(()=>{var nv=Object.defineProperty;var r=(B,l)=>nv(B,"name",{value:l,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-canvas","gantry-v2-vendors-single-channel-client","gantry-v2-vendors-async-sk-landing","gantry-v2-vendors-workflow-builder"],{7492298763:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},3778408185:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1514424064),h=d(285364620),p=d(5625132121),m=d(5640133965),a=d(5283324899),s=d(5368312762);l.addClsInstrumentationHandler=f.addClsInstrumentationHandler,l.addFidInstrumentationHandler=f.addFidInstrumentationHandler,l.addLcpInstrumentationHandler=f.addLcpInstrumentationHandler,l.addPerformanceInstrumentationHandler=f.addPerformanceInstrumentationHandler,l.addTtfbInstrumentationHandler=f.addTtfbInstrumentationHandler,l.addPerformanceEntries=h.addPerformanceEntries,l.startTrackingInteractions=h.startTrackingInteractions,l.startTrackingLongTasks=h.startTrackingLongTasks,l.startTrackingWebVitals=h.startTrackingWebVitals,l.addClickKeypressInstrumentationHandler=p.addClickKeypressInstrumentationHandler,l.addHistoryInstrumentationHandler=m.addHistoryInstrumentationHandler,l.SENTRY_XHR_DATA_KEY=a.SENTRY_XHR_DATA_KEY,l.addXhrInstrumentationHandler=a.addXhrInstrumentationHandler,l.startTrackingINP=s.startTrackingINP},5625132121:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(6496036490),p=1e3;let m,a,s;function n(g){const S="dom";f.addHandler(S,g),f.maybeInstrument(S,e)}r(n,"addClickKeypressInstrumentationHandler");function e(){if(!h.WINDOW.document)return;const g=f.triggerHandlers.bind(null,"dom"),S=o(g,!0);h.WINDOW.document.addEventListener("click",S,!1),h.WINDOW.document.addEventListener("keypress",S,!1),["EventTarget","Node"].forEach(u=>{const v=h.WINDOW[u]&&h.WINDOW[u].prototype;!v||!v.hasOwnProperty||!v.hasOwnProperty("addEventListener")||(f.fill(v,"addEventListener",function(E){return function(b,_,C){if(b==="click"||b=="keypress")try{const I=this,A=I.__sentry_instrumentation_handlers__=I.__sentry_instrumentation_handlers__||{},w=A[b]=A[b]||{refCount:0};if(!w.handler){const O=o(g);w.handler=O,E.call(this,b,O,C)}w.refCount++}catch{}return E.call(this,b,_,C)}}),f.fill(v,"removeEventListener",function(E){return function(b,_,C){if(b==="click"||b=="keypress")try{const I=this,A=I.__sentry_instrumentation_handlers__||{},w=A[b];w&&(w.refCount--,w.refCount<=0&&(E.call(this,b,w.handler,C),w.handler=void 0,delete A[b]),Object.keys(A).length===0&&delete I.__sentry_instrumentation_handlers__)}catch{}return E.call(this,b,_,C)}}))})}r(e,"instrumentDOM");function t(g){if(g.type!==a)return!1;try{if(!g.target||g.target._sentryId!==s)return!1}catch{}return!0}r(t,"isSimilarToLastCapturedEvent");function i(g,S){return g!=="keypress"?!1:!S||!S.tagName?!0:!(S.tagName==="INPUT"||S.tagName==="TEXTAREA"||S.isContentEditable)}r(i,"shouldSkipDOMEvent");function o(g,S=!1){return u=>{if(!u||u._sentryCaptured)return;const v=c(u);if(i(u.type,v))return;f.addNonEnumerableProperty(u,"_sentryCaptured",!0),v&&!v._sentryId&&f.addNonEnumerableProperty(v,"_sentryId",f.uuid4());const E=u.type==="keypress"?"input":u.type;t(u)||(g({event:u,name:E,global:S}),a=u.type,s=v?v._sentryId:void 0),clearTimeout(m),m=h.WINDOW.setTimeout(()=>{s=void 0,a=void 0},p)}}r(o,"makeDOMEventHandler");function c(g){try{return g.target}catch{return null}}r(c,"getEventTarget"),l.addClickKeypressInstrumentationHandler=n,l.instrumentDOM=e},5640133965:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(6496036490);let p;function m(s){const n="history";f.addHandler(n,s),f.maybeInstrument(n,a)}r(m,"addHistoryInstrumentationHandler");function a(){if(!f.supportsHistory())return;const s=h.WINDOW.onpopstate;h.WINDOW.onpopstate=function(...e){const t=h.WINDOW.location.href,i=p;p=t;const o={from:i,to:t};if(f.triggerHandlers("history",o),s)try{return s.apply(this,e)}catch{}};function n(e){return function(...t){const i=t.length>2?t[2]:void 0;if(i){const o=p,c=String(i);p=c;const g={from:o,to:c};f.triggerHandlers("history",g)}return e.apply(this,t)}}r(n,"historyReplacementFunction"),f.fill(h.WINDOW.history,"pushState",n),f.fill(h.WINDOW.history,"replaceState",n)}r(a,"instrumentHistory"),l.addHistoryInstrumentationHandler=m},5283324899:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(6496036490),p="__sentry_xhr_v3__";function m(n){const e="xhr";f.addHandler(e,n),f.maybeInstrument(e,a)}r(m,"addXhrInstrumentationHandler");function a(){if(!h.WINDOW.XMLHttpRequest)return;const n=XMLHttpRequest.prototype;f.fill(n,"open",function(e){return function(...t){const i=f.timestampInSeconds()*1e3,o=f.isString(t[0])?t[0].toUpperCase():void 0,c=s(t[1]);if(!o||!c)return e.apply(this,t);this[p]={method:o,url:c,request_headers:{}},o==="POST"&&c.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const g=r(()=>{const S=this[p];if(S&&this.readyState===4){try{S.status_code=this.status}catch{}const u={endTimestamp:f.timestampInSeconds()*1e3,startTimestamp:i,xhr:this};f.triggerHandlers("xhr",u)}},"onreadystatechangeHandler");return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?f.fill(this,"onreadystatechange",function(S){return function(...u){return g(),S.apply(this,u)}}):this.addEventListener("readystatechange",g),f.fill(this,"setRequestHeader",function(S){return function(...u){const[v,E]=u,b=this[p];return b&&f.isString(v)&&f.isString(E)&&(b.request_headers[v.toLowerCase()]=E),S.apply(this,u)}}),e.apply(this,t)}}),f.fill(n,"send",function(e){return function(...t){const i=this[p];if(!i)return e.apply(this,t);t[0]!==void 0&&(i.body=t[0]);const o={startTimestamp:f.timestampInSeconds()*1e3,xhr:this};return f.triggerHandlers("xhr",o),e.apply(this,t)}})}r(a,"instrumentXHR");function s(n){if(f.isString(n))return n;try{return n.toString()}catch{}}r(s,"parseUrl"),l.SENTRY_XHR_DATA_KEY=p,l.addXhrInstrumentationHandler=m,l.instrumentXHR=a},285364620:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(7492298763),m=d(1514424064),a=d(6496036490),s=d(2929564606),n=d(2273798110),e=d(8451898068),t=2147483647;let i=0,o={},c,g;function S(){const ne=s.getBrowserPerformanceAPI();if(ne&&h.browserPerformanceTimeOrigin){ne.mark&&a.WINDOW.performance.mark("sentry-tracing-init");const ie=_(),ge=E(),Ie=b(),We=C();return()=>{ie(),ge(),Ie(),We()}}return()=>{}}r(S,"startTrackingWebVitals");function u(){m.addPerformanceInstrumentationHandler("longtask",({entries:ne})=>{for(const ie of ne){if(!f.getActiveSpan())return;const ge=s.msToSec(h.browserPerformanceTimeOrigin+ie.startTime),Ie=s.msToSec(ie.duration),We=f.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:ge,attributes:{[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});We&&We.end(ge+Ie)}})}r(u,"startTrackingLongTasks");function v(){m.addPerformanceInstrumentationHandler("event",({entries:ne})=>{for(const ie of ne){if(!f.getActiveSpan())return;if(ie.name==="click"){const ge=s.msToSec(h.browserPerformanceTimeOrigin+ie.startTime),Ie=s.msToSec(ie.duration),We={name:h.htmlTreeAsString(ie.target),op:`ui.interaction.${ie.name}`,startTime:ge,attributes:{[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},ct=h.getComponentName(ie.target);ct&&(We.attributes["ui.component_name"]=ct);const Ae=f.startInactiveSpan(We);Ae&&Ae.end(ge+Ie)}}})}r(v,"startTrackingInteractions");function E(){return m.addClsInstrumentationHandler(({metric:ne})=>{const ie=ne.entries[ne.entries.length-1];ie&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding CLS"),o.cls={value:ne.value,unit:""},g=ie)},!0)}r(E,"_trackCLS");function b(){return m.addLcpInstrumentationHandler(({metric:ne})=>{const ie=ne.entries[ne.entries.length-1];ie&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding LCP"),o.lcp={value:ne.value,unit:"millisecond"},c=ie)},!0)}r(b,"_trackLCP");function _(){return m.addFidInstrumentationHandler(({metric:ne})=>{const ie=ne.entries[ne.entries.length-1];if(!ie)return;const ge=s.msToSec(h.browserPerformanceTimeOrigin),Ie=s.msToSec(ie.startTime);p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FID"),o.fid={value:ne.value,unit:"millisecond"},o["mark.fid"]={value:ge+Ie,unit:"second"}})}r(_,"_trackFID");function C(){return m.addTtfbInstrumentationHandler(({metric:ne})=>{ne.entries[ne.entries.length-1]&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding TTFB"),o.ttfb={value:ne.value,unit:"millisecond"})})}r(C,"_trackTtfb");function I(ne){const ie=s.getBrowserPerformanceAPI();if(!ie||!a.WINDOW.performance.getEntries||!h.browserPerformanceTimeOrigin)return;p.DEBUG_BUILD&&h.logger.log("[Tracing] Adding & adjusting spans using Performance API");const ge=s.msToSec(h.browserPerformanceTimeOrigin),Ie=ie.getEntries(),{op:We,start_timestamp:ct}=f.spanToJSON(ne);if(Ie.slice(i).forEach(Ae=>{const Fe=s.msToSec(Ae.startTime),Xe=s.msToSec(Ae.duration);if(!(We==="navigation"&&ct&&ge+Fe<ct))switch(Ae.entryType){case"navigation":{w(ne,Ae,ge);break}case"mark":case"paint":case"measure":{A(ne,Ae,Fe,Xe,ge);const Ge=e.getVisibilityWatcher(),it=Ae.startTime<Ge.firstHiddenTime;Ae.name==="first-paint"&&it&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FP"),o.fp={value:Ae.startTime,unit:"millisecond"}),Ae.name==="first-contentful-paint"&&it&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding FCP"),o.fcp={value:Ae.startTime,unit:"millisecond"});break}case"resource":{F(ne,Ae,Ae.name,Fe,Xe,ge);break}}}),i=Math.max(Ie.length-1,0),V(ne),We==="pageload"){Y(o),["fcp","fp","lcp"].forEach(Fe=>{if(!o[Fe]||!ct||ge>=ct)return;const Xe=o[Fe].value,Ge=ge+s.msToSec(Xe),it=Math.abs((Ge-ct)*1e3),Dt=it-Xe;p.DEBUG_BUILD&&h.logger.log(`[Measurements] Normalized ${Fe} from ${Xe} to ${it} (${Dt})`),o[Fe].value=it});const Ae=o["mark.fid"];Ae&&o.fid&&(s.startAndEndSpan(ne,Ae.value,Ae.value+s.msToSec(o.fid.value),{name:"first input delay",op:"ui.action",attributes:{[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete o["mark.fid"]),"fcp"in o||delete o.cls,Object.keys(o).forEach(Fe=>{f.setMeasurement(Fe,o[Fe].value,o[Fe].unit)}),$(ne)}c=void 0,g=void 0,o={}}r(I,"addPerformanceEntries");function A(ne,ie,ge,Ie,We){const ct=We+ge,Ae=ct+Ie;return s.startAndEndSpan(ne,ct,Ae,{name:ie.name,op:ie.entryType,attributes:{[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"}}),ct}r(A,"_addMeasureSpans");function w(ne,ie,ge){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(Ie=>{O(ne,ie,Ie,ge)}),O(ne,ie,"secureConnection",ge,"TLS/SSL","connectEnd"),O(ne,ie,"fetch",ge,"cache","domainLookupStart"),O(ne,ie,"domainLookup",ge,"DNS"),R(ne,ie,ge)}r(w,"_addNavigationSpans");function O(ne,ie,ge,Ie,We,ct){const Ae=ct?ie[ct]:ie[`${ge}End`],Fe=ie[`${ge}Start`];!Fe||!Ae||s.startAndEndSpan(ne,Ie+s.msToSec(Fe),Ie+s.msToSec(Ae),{op:"browser",name:We||ge,attributes:{[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}r(O,"_addPerformanceNavigationTiming");function R(ne,ie,ge){ie.responseEnd&&(s.startAndEndSpan(ne,ge+s.msToSec(ie.requestStart),ge+s.msToSec(ie.responseEnd),{op:"browser",name:"request",attributes:{[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),s.startAndEndSpan(ne,ge+s.msToSec(ie.responseStart),ge+s.msToSec(ie.responseEnd),{op:"browser",name:"response",attributes:{[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}r(R,"_addRequest");function F(ne,ie,ge,Ie,We,ct){if(ie.initiatorType==="xmlhttprequest"||ie.initiatorType==="fetch")return;const Ae=h.parseUrl(ge),Fe={[f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};X(Fe,ie,"transferSize","http.response_transfer_size"),X(Fe,ie,"encodedBodySize","http.response_content_length"),X(Fe,ie,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in ie&&(Fe["resource.render_blocking_status"]=ie.renderBlockingStatus),Ae.protocol&&(Fe["url.scheme"]=Ae.protocol.split(":").pop()),Ae.host&&(Fe["server.address"]=Ae.host),Fe["url.same_origin"]=ge.includes(a.WINDOW.location.origin);const Xe=ct+Ie,Ge=Xe+We;s.startAndEndSpan(ne,Xe,Ge,{name:ge.replace(a.WINDOW.location.origin,""),op:ie.initiatorType?`resource.${ie.initiatorType}`:"resource.other",attributes:Fe})}r(F,"_addResourceSpans");function V(ne){const ie=a.WINDOW.navigator;if(!ie)return;const ge=ie.connection;ge&&(ge.effectiveType&&ne.setAttribute("effectiveConnectionType",ge.effectiveType),ge.type&&ne.setAttribute("connectionType",ge.type),s.isMeasurementValue(ge.rtt)&&(o["connection.rtt"]={value:ge.rtt,unit:"millisecond"})),s.isMeasurementValue(ie.deviceMemory)&&ne.setAttribute("deviceMemory",`${ie.deviceMemory} GB`),s.isMeasurementValue(ie.hardwareConcurrency)&&ne.setAttribute("hardwareConcurrency",String(ie.hardwareConcurrency))}r(V,"_trackNavigator");function $(ne){c&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding LCP Data"),c.element&&ne.setAttribute("lcp.element",h.htmlTreeAsString(c.element)),c.id&&ne.setAttribute("lcp.id",c.id),c.url&&ne.setAttribute("lcp.url",c.url.trim().slice(0,200)),ne.setAttribute("lcp.size",c.size)),g&&g.sources&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding CLS Data"),g.sources.forEach((ie,ge)=>ne.setAttribute(`cls.source.${ge+1}`,h.htmlTreeAsString(ie.node))))}r($,"_tagMetricInfo");function X(ne,ie,ge,Ie){const We=ie[ge];We!=null&&We<t&&(ne[Ie]=We)}r(X,"setResourceEntrySizeData");function Y(ne){const ie=n.getNavigationEntry();if(!ie)return;const{responseStart:ge,requestStart:Ie}=ie;Ie<=ge&&(p.DEBUG_BUILD&&h.logger.log("[Measurements] Adding TTFB Request Time"),ne["ttfb.requestTime"]={value:ge-Ie,unit:"millisecond"})}r(Y,"_addTtfbRequestTimeToMeasurements"),l._addMeasureSpans=A,l._addResourceSpans=F,l.addPerformanceEntries=I,l.startTrackingInteractions=v,l.startTrackingLongTasks=u,l.startTrackingWebVitals=S},5368312762:(B,l,d)=>{var{_optionalChain:f}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const h=d(8482989710),p=d(7563271614),m=d(1514424064),a=d(2929564606);function s(){if(a.getBrowserPerformanceAPI()&&p.browserPerformanceTimeOrigin){const i=e();return()=>{i()}}return()=>{}}r(s,"startTrackingINP");const n={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function e(){return m.addInpInstrumentationHandler(({metric:t})=>{const i=h.getClient();if(!i||t.value==null)return;const o=t.entries.find($=>$.duration===t.value&&n[$.name]);if(!o)return;const c=n[o.name],g=i.getOptions(),S=a.msToSec(p.browserPerformanceTimeOrigin+o.startTime),u=a.msToSec(t.value),v=h.getCurrentScope(),E=h.getActiveSpan(),b=E?h.getRootSpan(E):void 0,_=b?h.spanToJSON(b).description:void 0,C=v.getUser(),I=i.getIntegrationByName("Replay"),A=I&&I.getReplayId(),w=C!==void 0?C.email||C.id||C.ip_address:void 0,O=f([v,"access",$=>$.getScopeData,"call",$=>$(),"access",$=>$.contexts,"optionalAccess",$=>$.profile,"optionalAccess",$=>$.profile_id]),R=p.htmlTreeAsString(o.target),F=p.dropUndefinedKeys({release:g.release,environment:g.environment,transaction:_,[h.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:t.value,user:w||void 0,profile_id:O||void 0,replay_id:A||void 0}),V=h.startInactiveSpan({name:R,op:`ui.interaction.${c}`,attributes:F,startTime:S,experimental:{standalone:!0}});V.addEvent("inp",{[h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t.value}),V.end(S+u)})}r(e,"_trackINP"),l.startTrackingINP=s},1514424064:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(7492298763),p=d(8724048708),m=d(5639023535),a=d(2086611485),s=d(5927711655),n=d(9526061972),e=d(1514170081),t={},i={};let o,c,g,S,u;function v(ie,ge=!1){return $("cls",ie,w,o,ge)}r(v,"addClsInstrumentationHandler");function E(ie,ge=!1){return $("lcp",ie,R,g,ge)}r(E,"addLcpInstrumentationHandler");function b(ie){return $("fid",ie,O,c)}r(b,"addFidInstrumentationHandler");function _(ie){return $("ttfb",ie,F,S)}r(_,"addTtfbInstrumentationHandler");function C(ie){return $("inp",ie,V,u)}r(C,"addInpInstrumentationHandler");function I(ie,ge){return Y(ie,ge),i[ie]||(X(ie),i[ie]=!0),ne(ie,ge)}r(I,"addPerformanceInstrumentationHandler");function A(ie,ge){const Ie=t[ie];if(!(!Ie||!Ie.length))for(const We of Ie)try{We(ge)}catch(ct){h.DEBUG_BUILD&&f.logger.error(`Error while triggering instrumentation handler.
Type: ${ie}
Name: ${f.getFunctionName(We)}
Error:`,ct)}}r(A,"triggerHandlers");function w(){return p.onCLS(ie=>{A("cls",{metric:ie}),o=ie},{reportAllChanges:!0})}r(w,"instrumentCls");function O(){return m.onFID(ie=>{A("fid",{metric:ie}),c=ie})}r(O,"instrumentFid");function R(){return s.onLCP(ie=>{A("lcp",{metric:ie}),g=ie})}r(R,"instrumentLcp");function F(){return e.onTTFB(ie=>{A("ttfb",{metric:ie}),S=ie})}r(F,"instrumentTtfb");function V(){return a.onINP(ie=>{A("inp",{metric:ie}),u=ie})}r(V,"instrumentInp");function $(ie,ge,Ie,We,ct=!1){Y(ie,ge);let Ae;return i[ie]||(Ae=Ie(),i[ie]=!0),We&&ge({metric:We}),ne(ie,ge,ct?Ae:void 0)}r($,"addMetricObserver");function X(ie){const ge={};ie==="event"&&(ge.durationThreshold=0),n.observe(ie,Ie=>{A(ie,{entries:Ie})},ge)}r(X,"instrumentPerformanceObserver");function Y(ie,ge){t[ie]=t[ie]||[],t[ie].push(ge)}r(Y,"addHandler");function ne(ie,ge,Ie){return()=>{Ie&&Ie();const We=t[ie];if(!We)return;const ct=We.indexOf(ge);ct!==-1&&We.splice(ct,1)}}r(ne,"getCleanupCallback"),l.addClsInstrumentationHandler=v,l.addFidInstrumentationHandler=b,l.addInpInstrumentationHandler=C,l.addLcpInstrumentationHandler=E,l.addPerformanceInstrumentationHandler=I,l.addTtfbInstrumentationHandler=_},6496036490:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const h=d(7563271614).GLOBAL_OBJ;l.WINDOW=h},2929564606:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(6496036490);function p(n){return typeof n=="number"&&isFinite(n)}r(p,"isMeasurementValue");function m(n,e,t,{...i}){const o=f.spanToJSON(n).start_timestamp;return o&&o>e&&typeof n.updateStartTime=="function"&&n.updateStartTime(e),f.withActiveSpan(n,()=>{const c=f.startInactiveSpan({startTime:e,...i});return c&&c.end(t),c})}r(m,"startAndEndSpan");function a(){return h.WINDOW&&h.WINDOW.addEventListener&&h.WINDOW.performance}r(a,"getBrowserPerformanceAPI");function s(n){return n/1e3}r(s,"msToSec"),l.getBrowserPerformanceAPI=a,l.isMeasurementValue=p,l.msToSec=s,l.startAndEndSpan=m},8724048708:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9035861842),h=d(4479988250),p=d(9526061972),m=d(7603883117),a=d(7841494492),s=d(2741739498),n=[.1,.25],e=r((t,i={})=>{s.onFCP(a.runOnce(()=>{const o=h.initMetric("CLS",0);let c,g=0,S=[];const u=r(E=>{E.forEach(b=>{if(!b.hadRecentInput){const _=S[0],C=S[S.length-1];g&&b.startTime-C.startTime<1e3&&b.startTime-_.startTime<5e3?(g+=b.value,S.push(b)):(g=b.value,S=[b])}}),g>o.value&&(o.value=g,o.entries=S,c())},"handleEntries"),v=p.observe("layout-shift",u);v&&(c=f.bindReporter(t,o,n,i.reportAllChanges),m.onHidden(()=>{u(v.takeRecords()),c(!0)}),setTimeout(c,0))}))},"onCLS");l.CLSThresholds=n,l.onCLS=e},5639023535:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9035861842),h=d(8451898068),p=d(4479988250),m=d(9526061972),a=d(7603883117),s=d(7841494492),n=d(3420582863),e=[100,300],t=r((i,o={})=>{n.whenActivated(()=>{const c=h.getVisibilityWatcher(),g=p.initMetric("FID");let S;const u=r(b=>{b.startTime<c.firstHiddenTime&&(g.value=b.processingStart-b.startTime,g.entries.push(b),S(!0))},"handleEntry"),v=r(b=>{b.forEach(u)},"handleEntries"),E=m.observe("first-input",v);S=f.bindReporter(i,g,e,o.reportAllChanges),E&&a.onHidden(s.runOnce(()=>{v(E.takeRecords()),E.disconnect()}))})},"onFID");l.FIDThresholds=e,l.onFID=t},2086611485:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490),h=d(9035861842),p=d(4479988250),m=d(9526061972),a=d(7603883117),s=d(6842089089),n=d(3420582863),e=[200,500],t=0,i=r(()=>s.getInteractionCount()-t,"getInteractionCountForNavigation"),o=10,c=[],g={},S=r(E=>{const b=c[c.length-1],_=g[E.interactionId];if(_||c.length<o||E.duration>b.latency){if(_)_.entries.push(E),_.latency=Math.max(_.latency,E.duration);else{const C={id:E.interactionId,latency:E.duration,entries:[E]};g[C.id]=C,c.push(C)}c.sort((C,I)=>I.latency-C.latency),c.splice(o).forEach(C=>{delete g[C.id]})}},"processEntry"),u=r(()=>{const E=Math.min(c.length-1,Math.floor(i()/50));return c[E]},"estimateP98LongestInteraction"),v=r((E,b={})=>{n.whenActivated(()=>{s.initInteractionCountPolyfill();const _=p.initMetric("INP");let C;const I=r(w=>{w.forEach(R=>{R.interactionId&&S(R),R.entryType==="first-input"&&!c.some(V=>V.entries.some($=>R.duration===$.duration&&R.startTime===$.startTime))&&S(R)});const O=u();O&&O.latency!==_.value&&(_.value=O.latency,_.entries=O.entries,C())},"handleEntries"),A=m.observe("event",I,{durationThreshold:b.durationThreshold!=null?b.durationThreshold:40});C=h.bindReporter(E,_,e,b.reportAllChanges),A&&("PerformanceEventTiming"in f.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&A.observe({type:"first-input",buffered:!0}),a.onHidden(()=>{I(A.takeRecords()),_.value<0&&i()>0&&(_.value=0,_.entries=[]),C(!0)}))})},"onINP");l.INPThresholds=e,l.onINP=v},5927711655:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490),h=d(9035861842),p=d(2520992508),m=d(8451898068),a=d(4479988250),s=d(9526061972),n=d(7603883117),e=d(7841494492),t=d(3420582863),i=[2500,4e3],o={},c=r((g,S={})=>{t.whenActivated(()=>{const u=m.getVisibilityWatcher(),v=a.initMetric("LCP");let E;const b=r(C=>{const I=C[C.length-1];I&&I.startTime<u.firstHiddenTime&&(v.value=Math.max(I.startTime-p.getActivationStart(),0),v.entries=[I],E())},"handleEntries"),_=s.observe("largest-contentful-paint",b);if(_){E=h.bindReporter(g,v,i,S.reportAllChanges);const C=e.runOnce(()=>{o[v.id]||(b(_.takeRecords()),_.disconnect(),o[v.id]=!0,E(!0))});["keydown","click"].forEach(I=>{f.WINDOW.document&&addEventListener(I,()=>setTimeout(C,0),!0)}),n.onHidden(C)}})},"onLCP");l.LCPThresholds=i,l.onLCP=c},9035861842:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r((h,p)=>h>p[1]?"poor":h>p[0]?"needs-improvement":"good","getRating"),f=r((h,p,m,a)=>{let s,n;return e=>{p.value>=0&&(e||a)&&(n=p.value-(s||0),(n||s===void 0)&&(s=p.value,p.delta=n,p.rating=d(p.value,m),h(p)))}},"bindReporter");l.bindReporter=f},8117347597:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r(()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,"generateUniqueID");l.generateUniqueID=d},2520992508:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(2273798110),h=r(()=>{const p=f.getNavigationEntry();return p&&p.activationStart||0},"getActivationStart");l.getActivationStart=h},2273798110:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490),h=r(()=>f.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],"getNavigationEntry");l.getNavigationEntry=h},8451898068:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490);let h=-1;const p=r(()=>{h=f.WINDOW.document.visibilityState==="hidden"&&!f.WINDOW.document.prerendering?0:1/0},"initHiddenTime"),m=r(n=>{f.WINDOW.document.visibilityState==="hidden"&&h>-1&&(h=n.type==="visibilitychange"?n.timeStamp:0,removeEventListener("visibilitychange",m,!0),removeEventListener("prerenderingchange",m,!0))},"onVisibilityUpdate"),a=r(()=>{addEventListener("visibilitychange",m,!0),addEventListener("prerenderingchange",m,!0)},"addChangeListeners"),s=r(()=>(f.WINDOW.document&&h<0&&(p(),a()),{get firstHiddenTime(){return h}}),"getVisibilityWatcher");l.getVisibilityWatcher=s},4479988250:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490),h=d(8117347597),p=d(2520992508),m=d(2273798110),a=r((s,n)=>{const e=m.getNavigationEntry();let t="navigate";return e&&(f.WINDOW.document&&f.WINDOW.document.prerendering||p.getActivationStart()>0?t="prerender":f.WINDOW.document&&f.WINDOW.document.wasDiscarded?t="restore":e.type&&(t=e.type.replace(/_/g,"-"))),{name:s,value:typeof n>"u"?-1:n,rating:"good",delta:0,entries:[],id:h.generateUniqueID(),navigationType:t}},"initMetric");l.initMetric=a},9526061972:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r((f,h,p)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(f)){const m=new PerformanceObserver(a=>{Promise.resolve().then(()=>{h(a.getEntries())})});return m.observe(Object.assign({type:f,buffered:!0},p||{})),m}}catch{}},"observe");l.observe=d},7603883117:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490),h=r(p=>{const m=r(a=>{(a.type==="pagehide"||f.WINDOW.document&&f.WINDOW.document.visibilityState==="hidden")&&p(a)},"onHiddenOrPageHide");f.WINDOW.document&&(addEventListener("visibilitychange",m,!0),addEventListener("pagehide",m,!0))},"onHidden");l.onHidden=h},6842089089:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9526061972);let h=0,p=1/0,m=0;const a=r(t=>{t.forEach(i=>{i.interactionId&&(p=Math.min(p,i.interactionId),m=Math.max(m,i.interactionId),h=m?(m-p)/7+1:0)})},"updateEstimate");let s;const n=r(()=>s?h:performance.interactionCount||0,"getInteractionCount"),e=r(()=>{"interactionCount"in performance||s||(s=f.observe("event",a,{type:"event",buffered:!0,durationThreshold:0}))},"initInteractionCountPolyfill");l.getInteractionCount=n,l.initInteractionCountPolyfill=e},7841494492:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=r(f=>{let h=!1;return p=>{h||(f(p),h=!0)}},"runOnce");l.runOnce=d},3420582863:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490),h=r(p=>{f.WINDOW.document&&f.WINDOW.document.prerendering?addEventListener("prerenderingchange",()=>p(),!0):p()},"whenActivated");l.whenActivated=h},2741739498:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9035861842),h=d(2520992508),p=d(8451898068),m=d(4479988250),a=d(9526061972),s=d(3420582863),n=[1800,3e3],e=r((t,i={})=>{s.whenActivated(()=>{const o=p.getVisibilityWatcher(),c=m.initMetric("FCP");let g;const S=r(v=>{v.forEach(E=>{E.name==="first-contentful-paint"&&(u.disconnect(),E.startTime<o.firstHiddenTime&&(c.value=Math.max(E.startTime-h.getActivationStart(),0),c.entries.push(E),g(!0)))})},"handleEntries"),u=a.observe("paint",S);u&&(g=f.bindReporter(t,c,n,i.reportAllChanges))})},"onFCP");l.FCPThresholds=n,l.onFCP=e},1514170081:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6496036490),h=d(9035861842),p=d(2520992508),m=d(2273798110),a=d(4479988250),s=d(3420582863),n=[800,1800],e=r(i=>{f.WINDOW.document&&f.WINDOW.document.prerendering?s.whenActivated(()=>e(i)):f.WINDOW.document&&f.WINDOW.document.readyState!=="complete"?addEventListener("load",()=>e(i),!0):setTimeout(i,0)},"whenReady"),t=r((i,o={})=>{const c=a.initMetric("TTFB"),g=h.bindReporter(i,c,n,o.reportAllChanges);e(()=>{const S=m.getNavigationEntry();if(S){const u=S.responseStart;if(u<=0||u>performance.now())return;c.value=Math.max(u-p.getActivationStart(),0),c.entries=[S],g(!0)}})},"onTTFB");l.TTFBThresholds=n,l.onTTFB=t},6049995776:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ,m=p.document,a=p.navigator,s="Report a Bug",n="Cancel",e="Send Bug Report",t="Confirm",i="Report a Bug",o="your.email@example.org",c="Email",g="What's the bug? What did you expect?",S="Description",u="Your Name",v="Name",E="Thank you for your report!",b="(required)",_="Add a screenshot",C="Remove screenshot",I="widget",A="api",w=5e3,O=r((ue,ve={includeReplay:!0})=>{if(!ue.message)throw new Error("Unable to submit feedback with empty message");const Le=f.getClient();if(!Le)throw new Error("No client setup, cannot send feedback.");const at=f.captureFeedback({source:A,url:h.getLocationHref(),...ue},ve);return new Promise((gt,Tt)=>{const rn=setTimeout(()=>Tt("Unable to determine if Feedback was correctly sent."),5e3);Le.on("afterSendEvent",(bn,Tn)=>{if(bn.event_id===at){if(clearTimeout(rn),Tn&&typeof Tn.statusCode=="number"&&(Tn.statusCode<200||Tn.statusCode>=300))return Tn.statusCode===0?Tt("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):Tt("Unable to send Feedback. Invalid response from server.");gt(at)}})})},"sendFeedback"),R=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function F(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a.userAgent)||!isSecureContext)}r(F,"isScreenshotSupported");function V(ue,ve){return{...ue,...ve,onFormOpen:()=>{ve.onFormOpen&&ve.onFormOpen(),ue.onFormOpen&&ue.onFormOpen()},onFormClose:()=>{ve.onFormClose&&ve.onFormClose(),ue.onFormClose&&ue.onFormClose()},onSubmitSuccess:Le=>{ve.onSubmitSuccess&&ve.onSubmitSuccess(Le),ue.onSubmitSuccess&&ue.onSubmitSuccess(Le)},onSubmitError:Le=>{ve.onSubmitError&&ve.onSubmitError(Le),ue.onSubmitError&&ue.onSubmitError(Le)},onFormSubmitted:()=>{ve.onFormSubmitted&&ve.onFormSubmitted(),ue.onFormSubmitted&&ue.onFormSubmitted()},themeDark:{...ue.themeDark,...ve.themeDark},themeLight:{...ue.themeLight,...ve.themeLight}}}r(V,"mergeOptions");function $(){const ue=m.createElement("style");return ue.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,ue}r($,"createActorStyles");function X(ue,ve){return Object.entries(ve).forEach(([Le,at])=>{ue.setAttributeNS(null,Le,at)}),ue}r(X,"setAttributesNS");const Y=20,ne="http://www.w3.org/2000/svg";function ie(){const ue=r(bn=>p.document.createElementNS(ne,bn),"createElementNS"),ve=X(ue("svg"),{width:`${Y}`,height:`${Y}`,viewBox:`0 0 ${Y} ${Y}`,fill:"var(--foreground)"}),Le=X(ue("g"),{clipPath:"url(#clip0_57_80)"}),at=X(ue("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});ve.appendChild(Le).appendChild(at);const gt=ue("defs"),Tt=X(ue("clipPath"),{id:"clip0_57_80"}),rn=X(ue("rect"),{width:`${Y}`,height:`${Y}`,fill:"white"});return Tt.appendChild(rn),gt.appendChild(Tt),ve.appendChild(gt).appendChild(Tt).appendChild(rn),ve}r(ie,"FeedbackIcon");function ge({triggerLabel:ue,shadow:ve}){const Le=m.createElement("button");if(Le.type="button",Le.className="widget__actor",Le.ariaHidden="false",Le.ariaLabel=ue,Le.appendChild(ie()),ue){const gt=m.createElement("span");gt.appendChild(m.createTextNode(ue)),Le.appendChild(gt)}const at=$();return{el:Le,appendToDom(){ve.appendChild(at),ve.appendChild(Le)},removeFromDom(){ve.removeChild(Le),ve.removeChild(at)},show(){Le.ariaHidden="false"},hide(){Le.ariaHidden="true"}}}r(ge,"Actor");const Ie="rgba(88, 74, 192, 1)",We={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Ie,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},ct={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Ie,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(41, 35, 47, 0.5)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Ae(ue){return`
  --foreground: ${ue.foreground};
  --background: ${ue.background};
  --accent-foreground: ${ue.accentForeground};
  --accent-background: ${ue.accentBackground};
  --success-color: ${ue.successColor};
  --error-color: ${ue.errorColor};
  --border: ${ue.border};
  --box-shadow: ${ue.boxShadow};
  --outline: ${ue.outline};
  --interactive-filter: ${ue.interactiveFilter};
  `}r(Ae,"getThemedCssVariables");function Fe({colorScheme:ue,themeDark:ve,themeLight:Le}){const at=m.createElement("style");return at.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${Ae(ue==="dark"?{...ct,...ve}:{...We,...Le})}
}

${ue==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Ae({...ct,...ve})}
  }
}`:""}
}
`,at}r(Fe,"createMainStyles");const Xe=r(({lazyLoadIntegration:ue,getModalIntegration:ve,getScreenshotIntegration:Le})=>r(({id:gt="sentry-feedback",showBranding:Tt=!0,autoInject:rn=!0,showEmail:bn=!0,showName:Tn=!0,enableScreenshot:ln=!0,useSentryUser:Vn={email:"email",name:"username"},isNameRequired:Ut=!1,isEmailRequired:hi=!1,colorScheme:An="system",themeLight:Fi={},themeDark:Qi={},addScreenshotButtonLabel:Zi=_,cancelButtonLabel:Hn=n,confirmButtonLabel:Jn=t,emailLabel:ai=c,emailPlaceholder:Ri=o,formTitle:Cr=i,isRequiredLabel:Ur=b,messageLabel:li=S,messagePlaceholder:Kr=g,nameLabel:Ji=v,namePlaceholder:Or=u,removeScreenshotButtonLabel:xo=C,submitButtonLabel:Go=e,successMessageText:Po=E,triggerLabel:ko=s,onFormOpen:Uo,onFormClose:To,onSubmitSuccess:Jr,onSubmitError:ao,onFormSubmitted:Io}={})=>{const Gr={id:gt,autoInject:rn,showBranding:Tt,isEmailRequired:hi,isNameRequired:Ut,showEmail:bn,showName:Tn,enableScreenshot:ln,useSentryUser:Vn,colorScheme:An,themeDark:Qi,themeLight:Fi,triggerLabel:ko,cancelButtonLabel:Hn,submitButtonLabel:Go,confirmButtonLabel:Jn,formTitle:Cr,emailLabel:ai,emailPlaceholder:Ri,messageLabel:li,messagePlaceholder:Kr,nameLabel:Ji,namePlaceholder:Or,successMessageText:Po,isRequiredLabel:Ur,addScreenshotButtonLabel:Zi,removeScreenshotButtonLabel:xo,onFormClose:To,onFormOpen:Uo,onSubmitError:ao,onSubmitSuccess:Jr,onFormSubmitted:Io};let lo=null,vr=[];const co=r(pr=>{if(!lo){const Mr=m.createElement("div");Mr.id=String(pr.id),m.body.appendChild(Mr),lo=Mr.attachShadow({mode:"open"}),lo.appendChild(Fe(pr))}return lo},"_createShadow"),ws=r(async(pr,Mr,wr)=>{const jr=f.getClient(),Vr=jr&&jr.getIntegrationByName(pr);if(Vr)return Vr;const q=(Mr&&Mr()||await ue(wr))();return jr&&jr.addIntegration(q),q},"_findIntegration"),Ds=r(async pr=>{const Mr=pr.enableScreenshot&&F(),[wr,jr]=await Promise.all([ws("FeedbackModal",ve,"feedbackModalIntegration"),Mr?ws("FeedbackScreenshot",Le,"feedbackScreenshotIntegration"):void 0]);if(!wr)throw R&&h.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");return Mr&&!jr&&R&&h.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots."),wr.createDialog({options:pr,screenshotIntegration:Mr?jr:void 0,sendFeedback:O,shadow:co(pr)})},"_loadAndRenderDialog"),Yr=r((pr,Mr={})=>{const wr=V(Gr,Mr),jr=typeof pr=="string"?m.querySelector(pr):typeof pr.addEventListener=="function"?pr:null;if(!jr)throw R&&h.logger.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Vr=null;const rs=r(async()=>{Vr||(Vr=await Ds({...wr,onFormClose:()=>{Vr&&Vr.close(),wr.onFormClose&&wr.onFormClose()},onFormSubmitted:()=>{Vr&&Vr.removeFromDom(),wr.onFormSubmitted&&wr.onFormSubmitted()}})),Vr.appendToDom(),Vr.open()},"handleClick");jr.addEventListener("click",rs);const q=r(()=>{vr=vr.filter(re=>re!==q),Vr&&Vr.removeFromDom(),Vr=null,jr.removeEventListener("click",rs)},"unsubscribe");return vr.push(q),q},"_attachTo"),Co=r((pr={})=>{const Mr=co(Gr),wr=ge({triggerLabel:Gr.triggerLabel,shadow:Mr}),jr=V(Gr,{...pr,onFormOpen(){wr.hide()},onFormClose(){wr.show()},onFormSubmitted(){wr.show()}});return Yr(wr.el,jr),wr},"_createActor");return{name:"Feedback",setupOnce(){!h.isBrowser()||!Gr.autoInject||Co().appendToDom()},attachTo:Yr,createWidget(pr={}){const Mr=Co(V(Gr,pr));return Mr.appendToDom(),Mr},async createForm(pr={}){return Ds(V(Gr,pr))},remove(){lo&&(lo.parentElement&&lo.parentElement.remove(),lo=null),vr.forEach(pr=>pr()),vr=[]}}},"feedbackIntegration"),"buildFeedbackIntegration");function Ge(){const ue=f.getClient();return ue&&ue.getIntegrationByName("Feedback")}r(Ge,"getFeedback");var it,Dt,wt,Pe,xe,et,rt,je={},Ft=[],Gt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Xt=Array.isArray;function sn(ue,ve){for(var Le in ve)ue[Le]=ve[Le];return ue}r(sn,"v$1");function cn(ue){var ve=ue.parentNode;ve&&ve.removeChild(ue)}r(cn,"p$1");function Bt(ue,ve,Le){var at,gt,Tt,rn={};for(Tt in ve)Tt=="key"?at=ve[Tt]:Tt=="ref"?gt=ve[Tt]:rn[Tt]=ve[Tt];if(arguments.length>2&&(rn.children=arguments.length>3?it.call(arguments,2):Le),typeof ue=="function"&&ue.defaultProps!=null)for(Tt in ue.defaultProps)rn[Tt]===void 0&&(rn[Tt]=ue.defaultProps[Tt]);return gn(ue,rn,at,gt,null)}r(Bt,"y$1");function gn(ue,ve,Le,at,gt){var Tt={type:ue,props:ve,key:Le,ref:at,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:gt??++wt,__i:-1,__u:0};return gt==null&&Dt.vnode!=null&&Dt.vnode(Tt),Tt}r(gn,"d$1");function Ci(ue){return ue.children}r(Ci,"g");function $n(ue,ve){this.props=ue,this.context=ve}r($n,"b");function Sn(ue,ve){if(ve==null)return ue.__?Sn(ue.__,ue.__i+1):null;for(var Le;ve<ue.__k.length;ve++)if((Le=ue.__k[ve])!=null&&Le.__e!=null)return Le.__e;return typeof ue.type=="function"?Sn(ue):null}r(Sn,"m$1");function nn(ue,ve,Le){var at,gt=ue.__v,Tt=gt.__e,rn=ue.__P;if(rn)return(at=sn({},gt)).__v=gt.__v+1,Dt.vnode&&Dt.vnode(at),le(rn,at,gt,ue.__n,rn.ownerSVGElement!==void 0,32&gt.__u?[Tt]:null,ve,Tt??Sn(gt),!!(32&gt.__u),Le),at.__.__k[at.__i]=at,at.__d=void 0,at.__e!=Tt&&Vt(at),at}r(nn,"w$1");function Vt(ue){var ve,Le;if((ue=ue.__)!=null&&ue.__c!=null){for(ue.__e=ue.__c.base=null,ve=0;ve<ue.__k.length;ve++)if((Le=ue.__k[ve])!=null&&Le.__e!=null){ue.__e=ue.__c.base=Le.__e;break}return Vt(ue)}}r(Vt,"k$1");function Wn(ue){(!ue.__d&&(ue.__d=!0)&&Pe.push(ue)&&!Lt.__r++||xe!==Dt.debounceRendering)&&((xe=Dt.debounceRendering)||et)(Lt)}r(Wn,"x$1");function Lt(){var ue,ve,Le,at=[],gt=[];for(Pe.sort(rt);ue=Pe.shift();)ue.__d&&(Le=Pe.length,ve=nn(ue,at,gt)||ve,Le===0||Pe.length>Le?(Ue(at,ve,gt),gt.length=at.length=0,ve=void 0,Pe.sort(rt)):ve&&Dt.__c&&Dt.__c(ve,Ft));ve&&Ue(at,ve,gt),Lt.__r=0}r(Lt,"C$1");function zt(ue,ve,Le,at,gt,Tt,rn,bn,Tn,ln,Vn){var Ut,hi,An,Fi,Qi,Zi=at&&at.__k||Ft,Hn=ve.length;for(Le.__d=Tn,It(Le,ve,Zi),Tn=Le.__d,Ut=0;Ut<Hn;Ut++)(An=Le.__k[Ut])!=null&&typeof An!="boolean"&&typeof An!="function"&&(hi=An.__i===-1?je:Zi[An.__i]||je,An.__i=Ut,le(ue,An,hi,gt,Tt,rn,bn,Tn,ln,Vn),Fi=An.__e,An.ref&&hi.ref!=An.ref&&(hi.ref&&Q(hi.ref,null,An),Vn.push(An.ref,An.__c||Fi,An)),Qi==null&&Fi!=null&&(Qi=Fi),65536&An.__u||hi.__k===An.__k?Tn=z(An,Tn,ue):typeof An.type=="function"&&An.__d!==void 0?Tn=An.__d:Fi&&(Tn=Fi.nextSibling),An.__d=void 0,An.__u&=-196609);Le.__d=Tn,Le.__e=Qi}r(zt,"P");function It(ue,ve,Le){var at,gt,Tt,rn,bn,Tn=ve.length,ln=Le.length,Vn=ln,Ut=0;for(ue.__k=[],at=0;at<Tn;at++)(gt=ue.__k[at]=(gt=ve[at])==null||typeof gt=="boolean"||typeof gt=="function"?null:typeof gt=="string"||typeof gt=="number"||typeof gt=="bigint"||gt.constructor==String?gn(null,gt,null,null,gt):Xt(gt)?gn(Ci,{children:gt},null,null,null):gt.constructor===void 0&&gt.__b>0?gn(gt.type,gt.props,gt.key,gt.ref?gt.ref:null,gt.__v):gt)!=null?(gt.__=ue,gt.__b=ue.__b+1,bn=Ve(gt,Le,rn=at+Ut,Vn),gt.__i=bn,Tt=null,bn!==-1&&(Vn--,(Tt=Le[bn])&&(Tt.__u|=131072)),Tt==null||Tt.__v===null?(bn==-1&&Ut--,typeof gt.type!="function"&&(gt.__u|=65536)):bn!==rn&&(bn===rn+1?Ut++:bn>rn?Vn>Tn-rn?Ut+=bn-rn:Ut--:Ut=bn<rn&&bn==rn-1?bn-rn:0,bn!==at+Ut&&(gt.__u|=65536))):(Tt=Le[at])&&Tt.key==null&&Tt.__e&&(Tt.__e==ue.__d&&(ue.__d=Sn(Tt)),ye(Tt,Tt,!1),Le[at]=null,Vn--);if(Vn)for(at=0;at<ln;at++)(Tt=Le[at])!=null&&!(131072&Tt.__u)&&(Tt.__e==ue.__d&&(ue.__d=Sn(Tt)),ye(Tt,Tt))}r(It,"S");function z(ue,ve,Le){var at,gt;if(typeof ue.type=="function"){for(at=ue.__k,gt=0;at&&gt<at.length;gt++)at[gt]&&(at[gt].__=ue,ve=z(at[gt],ve,Le));return ve}ue.__e!=ve&&(Le.insertBefore(ue.__e,ve||null),ve=ue.__e);do ve=ve&&ve.nextSibling;while(ve!=null&&ve.nodeType===8);return ve}r(z,"$");function Ve(ue,ve,Le,at){var gt=ue.key,Tt=ue.type,rn=Le-1,bn=Le+1,Tn=ve[Le];if(Tn===null||Tn&&gt==Tn.key&&Tt===Tn.type)return Le;if(at>(Tn!=null&&!(131072&Tn.__u)?1:0))for(;rn>=0||bn<ve.length;){if(rn>=0){if((Tn=ve[rn])&&!(131072&Tn.__u)&&gt==Tn.key&&Tt===Tn.type)return rn;rn--}if(bn<ve.length){if((Tn=ve[bn])&&!(131072&Tn.__u)&&gt==Tn.key&&Tt===Tn.type)return bn;bn++}}return-1}r(Ve,"I");function He(ue,ve,Le){ve[0]==="-"?ue.setProperty(ve,Le??""):ue[ve]=Le==null?"":typeof Le!="number"||Gt.test(ve)?Le:Le+"px"}r(He,"T");function Je(ue,ve,Le,at,gt){var Tt;e:if(ve==="style")if(typeof Le=="string")ue.style.cssText=Le;else{if(typeof at=="string"&&(ue.style.cssText=at=""),at)for(ve in at)Le&&ve in Le||He(ue.style,ve,"");if(Le)for(ve in Le)at&&Le[ve]===at[ve]||He(ue.style,ve,Le[ve])}else if(ve[0]==="o"&&ve[1]==="n")Tt=ve!==(ve=ve.replace(/(PointerCapture)$|Capture$/i,"$1")),ve=ve.toLowerCase()in ue?ve.toLowerCase().slice(2):ve.slice(2),ue.l||(ue.l={}),ue.l[ve+Tt]=Le,Le?at?Le.u=at.u:(Le.u=Date.now(),ue.addEventListener(ve,Tt?lt:Ye,Tt)):ue.removeEventListener(ve,Tt?lt:Ye,Tt);else{if(gt)ve=ve.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(ve!=="width"&&ve!=="height"&&ve!=="href"&&ve!=="list"&&ve!=="form"&&ve!=="tabIndex"&&ve!=="download"&&ve!=="rowSpan"&&ve!=="colSpan"&&ve!=="role"&&ve in ue)try{ue[ve]=Le??"";break e}catch{}typeof Le=="function"||(Le==null||Le===!1&&ve[4]!=="-"?ue.removeAttribute(ve):ue.setAttribute(ve,Le))}}r(Je,"A");function Ye(ue){if(this.l){var ve=this.l[ue.type+!1];if(ue.t){if(ue.t<=ve.u)return}else ue.t=Date.now();return ve(Dt.event?Dt.event(ue):ue)}}r(Ye,"D$1");function lt(ue){if(this.l)return this.l[ue.type+!0](Dt.event?Dt.event(ue):ue)}r(lt,"L");function le(ue,ve,Le,at,gt,Tt,rn,bn,Tn,ln){var Vn,Ut,hi,An,Fi,Qi,Zi,Hn,Jn,ai,Ri,Cr,Ur,li,Kr,Ji=ve.type;if(ve.constructor!==void 0)return null;128&Le.__u&&(Tn=!!(32&Le.__u),Tt=[bn=ve.__e=Le.__e]),(Vn=Dt.__b)&&Vn(ve);e:if(typeof Ji=="function")try{if(Hn=ve.props,Jn=(Vn=Ji.contextType)&&at[Vn.__c],ai=Vn?Jn?Jn.props.value:Vn.__:at,Le.__c?Zi=(Ut=ve.__c=Le.__c).__=Ut.__E:("prototype"in Ji&&Ji.prototype.render?ve.__c=Ut=new Ji(Hn,ai):(ve.__c=Ut=new $n(Hn,ai),Ut.constructor=Ji,Ut.render=Ee),Jn&&Jn.sub(Ut),Ut.props=Hn,Ut.state||(Ut.state={}),Ut.context=ai,Ut.__n=at,hi=Ut.__d=!0,Ut.__h=[],Ut._sb=[]),Ut.__s==null&&(Ut.__s=Ut.state),Ji.getDerivedStateFromProps!=null&&(Ut.__s==Ut.state&&(Ut.__s=sn({},Ut.__s)),sn(Ut.__s,Ji.getDerivedStateFromProps(Hn,Ut.__s))),An=Ut.props,Fi=Ut.state,Ut.__v=ve,hi)Ji.getDerivedStateFromProps==null&&Ut.componentWillMount!=null&&Ut.componentWillMount(),Ut.componentDidMount!=null&&Ut.__h.push(Ut.componentDidMount);else{if(Ji.getDerivedStateFromProps==null&&Hn!==An&&Ut.componentWillReceiveProps!=null&&Ut.componentWillReceiveProps(Hn,ai),!Ut.__e&&(Ut.shouldComponentUpdate!=null&&Ut.shouldComponentUpdate(Hn,Ut.__s,ai)===!1||ve.__v===Le.__v)){for(ve.__v!==Le.__v&&(Ut.props=Hn,Ut.state=Ut.__s,Ut.__d=!1),ve.__e=Le.__e,ve.__k=Le.__k,ve.__k.forEach(function(Or){Or&&(Or.__=ve)}),Ri=0;Ri<Ut._sb.length;Ri++)Ut.__h.push(Ut._sb[Ri]);Ut._sb=[],Ut.__h.length&&rn.push(Ut);break e}Ut.componentWillUpdate!=null&&Ut.componentWillUpdate(Hn,Ut.__s,ai),Ut.componentDidUpdate!=null&&Ut.__h.push(function(){Ut.componentDidUpdate(An,Fi,Qi)})}if(Ut.context=ai,Ut.props=Hn,Ut.__P=ue,Ut.__e=!1,Cr=Dt.__r,Ur=0,"prototype"in Ji&&Ji.prototype.render){for(Ut.state=Ut.__s,Ut.__d=!1,Cr&&Cr(ve),Vn=Ut.render(Ut.props,Ut.state,Ut.context),li=0;li<Ut._sb.length;li++)Ut.__h.push(Ut._sb[li]);Ut._sb=[]}else do Ut.__d=!1,Cr&&Cr(ve),Vn=Ut.render(Ut.props,Ut.state,Ut.context),Ut.state=Ut.__s;while(Ut.__d&&++Ur<25);Ut.state=Ut.__s,Ut.getChildContext!=null&&(at=sn(sn({},at),Ut.getChildContext())),hi||Ut.getSnapshotBeforeUpdate==null||(Qi=Ut.getSnapshotBeforeUpdate(An,Fi)),zt(ue,Xt(Kr=Vn!=null&&Vn.type===Ci&&Vn.key==null?Vn.props.children:Vn)?Kr:[Kr],ve,Le,at,gt,Tt,rn,bn,Tn,ln),Ut.base=ve.__e,ve.__u&=-161,Ut.__h.length&&rn.push(Ut),Zi&&(Ut.__E=Ut.__=null)}catch(Or){ve.__v=null,Tn||Tt!=null?(ve.__e=bn,ve.__u|=Tn?160:32,Tt[Tt.indexOf(bn)]=null):(ve.__e=Le.__e,ve.__k=Le.__k),Dt.__e(Or,ve,Le)}else Tt==null&&ve.__v===Le.__v?(ve.__k=Le.__k,ve.__e=Le.__e):ve.__e=G(Le.__e,ve,Le,at,gt,Tt,rn,Tn,ln);(Vn=Dt.diffed)&&Vn(ve)}r(le,"M");function Ue(ue,ve,Le){for(var at=0;at<Le.length;at++)Q(Le[at],Le[++at],Le[++at]);Dt.__c&&Dt.__c(ve,ue),ue.some(function(gt){try{ue=gt.__h,gt.__h=[],ue.some(function(Tt){Tt.call(gt)})}catch(Tt){Dt.__e(Tt,gt.__v)}})}r(Ue,"j$1");function G(ue,ve,Le,at,gt,Tt,rn,bn,Tn){var ln,Vn,Ut,hi,An,Fi,Qi,Zi=Le.props,Hn=ve.props,Jn=ve.type;if(Jn==="svg"&&(gt=!0),Tt!=null){for(ln=0;ln<Tt.length;ln++)if((An=Tt[ln])&&"setAttribute"in An==!!Jn&&(Jn?An.localName===Jn:An.nodeType===3)){ue=An,Tt[ln]=null;break}}if(ue==null){if(Jn===null)return document.createTextNode(Hn);ue=gt?document.createElementNS("http://www.w3.org/2000/svg",Jn):document.createElement(Jn,Hn.is&&Hn),Tt=null,bn=!1}if(Jn===null)Zi===Hn||bn&&ue.data===Hn||(ue.data=Hn);else{if(Tt=Tt&&it.call(ue.childNodes),Zi=Le.props||je,!bn&&Tt!=null)for(Zi={},ln=0;ln<ue.attributes.length;ln++)Zi[(An=ue.attributes[ln]).name]=An.value;for(ln in Zi)An=Zi[ln],ln=="children"||(ln=="dangerouslySetInnerHTML"?Ut=An:ln==="key"||ln in Hn||Je(ue,ln,null,An,gt));for(ln in Hn)An=Hn[ln],ln=="children"?hi=An:ln=="dangerouslySetInnerHTML"?Vn=An:ln=="value"?Fi=An:ln=="checked"?Qi=An:ln==="key"||bn&&typeof An!="function"||Zi[ln]===An||Je(ue,ln,An,Zi[ln],gt);if(Vn)bn||Ut&&(Vn.__html===Ut.__html||Vn.__html===ue.innerHTML)||(ue.innerHTML=Vn.__html),ve.__k=[];else if(Ut&&(ue.innerHTML=""),zt(ue,Xt(hi)?hi:[hi],ve,Le,at,gt&&Jn!=="foreignObject",Tt,rn,Tt?Tt[0]:Le.__k&&Sn(Le,0),bn,Tn),Tt!=null)for(ln=Tt.length;ln--;)Tt[ln]!=null&&cn(Tt[ln]);bn||(ln="value",Fi!==void 0&&(Fi!==ue[ln]||Jn==="progress"&&!Fi||Jn==="option"&&Fi!==Zi[ln])&&Je(ue,ln,Fi,Zi[ln],!1),ln="checked",Qi!==void 0&&Qi!==ue[ln]&&Je(ue,ln,Qi,Zi[ln],!1))}return ue}r(G,"z$1");function Q(ue,ve,Le){try{typeof ue=="function"?ue(ve):ue.current=ve}catch(at){Dt.__e(at,Le)}}r(Q,"N");function ye(ue,ve,Le){var at,gt;if(Dt.unmount&&Dt.unmount(ue),(at=ue.ref)&&(at.current&&at.current!==ue.__e||Q(at,null,ve)),(at=ue.__c)!=null){if(at.componentWillUnmount)try{at.componentWillUnmount()}catch(Tt){Dt.__e(Tt,ve)}at.base=at.__P=null,ue.__c=void 0}if(at=ue.__k)for(gt=0;gt<at.length;gt++)at[gt]&&ye(at[gt],ve,Le||typeof ue.type!="function");Le||ue.__e==null||cn(ue.__e),ue.__=ue.__e=ue.__d=void 0}r(ye,"O");function Ee(ue,ve,Le){return this.constructor(ue,Le)}r(Ee,"q$1");function pt(ue,ve,Le){var at,gt,Tt,rn;Dt.__&&Dt.__(ue,ve),gt=(at=typeof Le=="function")?null:Le&&Le.__k||ve.__k,Tt=[],rn=[],le(ve,ue=(!at&&Le||ve).__k=Bt(Ci,null,[ue]),gt||je,je,ve.ownerSVGElement!==void 0,!at&&Le?[Le]:gt?null:ve.firstChild?it.call(ve.childNodes):null,Tt,!at&&Le?Le:gt?gt.__e:ve.firstChild,at,rn),ue.__d=void 0,Ue(Tt,ue,rn)}r(pt,"B$1"),it=Ft.slice,Dt={__e:function(ue,ve,Le,at){for(var gt,Tt,rn;ve=ve.__;)if((gt=ve.__c)&&!gt.__)try{if((Tt=gt.constructor)&&Tt.getDerivedStateFromError!=null&&(gt.setState(Tt.getDerivedStateFromError(ue)),rn=gt.__d),gt.componentDidCatch!=null&&(gt.componentDidCatch(ue,at||{}),rn=gt.__d),rn)return gt.__E=gt}catch(bn){ue=bn}throw ue}},wt=0,$n.prototype.setState=function(ue,ve){var Le;Le=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=sn({},this.state),typeof ue=="function"&&(ue=ue(sn({},Le),this.props)),ue&&sn(Le,ue),ue!=null&&this.__v&&(ve&&this._sb.push(ve),Wn(this))},$n.prototype.forceUpdate=function(ue){this.__v&&(this.__e=!0,ue&&this.__h.push(ue),Wn(this))},$n.prototype.render=Ci,Pe=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rt=r(function(ue,ve){return ue.__v.__b-ve.__v.__b},"f$1"),Lt.__r=0;var ze,st,me,Me,k=0,Se=[],be=[],we=Dt,ee=we.__b,en=we.__r,dt=we.diffed,Ct=we.__c,xn=we.unmount,Qt=we.__;function Xi(ue,ve){we.__h&&we.__h(st,ue,k||ve),k=0;var Le=st.__H||(st.__H={__:[],__h:[]});return ue>=Le.__.length&&Le.__.push({__V:be}),Le.__[ue]}r(Xi,"h");function Pi(ue){return k=1,Kn(vi,ue)}r(Pi,"p");function Kn(ue,ve,Le){var at=Xi(ze++,2);if(at.t=ue,!at.__c&&(at.__=[Le?Le(ve):vi(void 0,ve),function(bn){var Tn=at.__N?at.__N[0]:at.__[0],ln=at.t(Tn,bn);Tn!==ln&&(at.__N=[ln,at.__[1]],at.__c.setState({}))}],at.__c=st,!st.u)){var gt=r(function(bn,Tn,ln){if(!at.__c.__H)return!0;var Vn=at.__c.__H.__.filter(function(hi){return!!hi.__c});if(Vn.every(function(hi){return!hi.__N}))return!Tt||Tt.call(this,bn,Tn,ln);var Ut=!1;return Vn.forEach(function(hi){if(hi.__N){var An=hi.__[0];hi.__=hi.__N,hi.__N=void 0,An!==hi.__[0]&&(Ut=!0)}}),!(!Ut&&at.__c.props===bn)&&(!Tt||Tt.call(this,bn,Tn,ln))},"f");st.u=!0;var Tt=st.shouldComponentUpdate,rn=st.componentWillUpdate;st.componentWillUpdate=function(bn,Tn,ln){if(this.__e){var Vn=Tt;Tt=void 0,gt(bn,Tn,ln),Tt=Vn}rn&&rn.call(this,bn,Tn,ln)},st.shouldComponentUpdate=gt}return at.__N||at.__}r(Kn,"y");function ni(ue,ve){var Le=Xi(ze++,3);!we.__s&&si(Le.__H,ve)&&(Le.__=ue,Le.i=ve,st.__H.__h.push(Le))}r(ni,"_");function Mn(ue){return k=5,qn(function(){return{current:ue}},[])}r(Mn,"F");function qn(ue,ve){var Le=Xi(ze++,7);return si(Le.__H,ve)?(Le.__V=ue(),Le.i=ve,Le.__h=ue,Le.__V):Le.__}r(qn,"q");function bi(ue,ve){return k=8,qn(function(){return ue},ve)}r(bi,"x");function xr(){for(var ue;ue=Se.shift();)if(ue.__P&&ue.__H)try{ue.__H.__h.forEach(On),ue.__H.__h.forEach(_n),ue.__H.__h=[]}catch(ve){ue.__H.__h=[],we.__e(ve,ue.__v)}}r(xr,"j"),we.__b=function(ue){st=null,ee&&ee(ue)},we.__=function(ue,ve){ve.__k&&ve.__k.__m&&(ue.__m=ve.__k.__m),Qt&&Qt(ue,ve)},we.__r=function(ue){en&&en(ue),ze=0;var ve=(st=ue.__c).__H;ve&&(me===st?(ve.__h=[],st.__h=[],ve.__.forEach(function(Le){Le.__N&&(Le.__=Le.__N),Le.__V=be,Le.__N=Le.i=void 0})):(ve.__h.forEach(On),ve.__h.forEach(_n),ve.__h=[],ze=0)),me=st},we.diffed=function(ue){dt&&dt(ue);var ve=ue.__c;ve&&ve.__H&&(ve.__H.__h.length&&(Se.push(ve)!==1&&Me===we.requestAnimationFrame||((Me=we.requestAnimationFrame)||Nt)(xr)),ve.__H.__.forEach(function(Le){Le.i&&(Le.__H=Le.i),Le.__V!==be&&(Le.__=Le.__V),Le.i=void 0,Le.__V=be})),me=st=null},we.__c=function(ue,ve){ve.some(function(Le){try{Le.__h.forEach(On),Le.__h=Le.__h.filter(function(at){return!at.__||_n(at)})}catch(at){ve.some(function(gt){gt.__h&&(gt.__h=[])}),ve=[],we.__e(at,Le.__v)}}),Ct&&Ct(ue,ve)},we.unmount=function(ue){xn&&xn(ue);var ve,Le=ue.__c;Le&&Le.__H&&(Le.__H.__.forEach(function(at){try{On(at)}catch(gt){ve=gt}}),Le.__H=void 0,ve&&we.__e(ve,Le.__v))};var Zt=typeof requestAnimationFrame=="function";function Nt(ue){var ve,Le=r(function(){clearTimeout(at),Zt&&cancelAnimationFrame(ve),setTimeout(ue)},"r"),at=setTimeout(Le,100);Zt&&(ve=requestAnimationFrame(Le))}r(Nt,"w");function On(ue){var ve=st,Le=ue.__c;typeof Le=="function"&&(ue.__c=void 0,Le()),st=ve}r(On,"z");function _n(ue){var ve=st;ue.__c=ue.__(),st=ve}r(_n,"B");function si(ue,ve){return!ue||ue.length!==ve.length||ve.some(function(Le,at){return Le!==ue[at]})}r(si,"C");function vi(ue,ve){return typeof ve=="function"?ve(ue):ve}r(vi,"D");const Mi="http://www.w3.org/2000/svg";function ui(){const ue=r(at=>m.createElementNS(Mi,at),"createElementNS"),ve=X(ue("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),Le=X(ue("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return ve.appendChild(Le),ve}r(ui,"SentryLogo");const Ii="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function wi({options:ue}){const ve=qn(()=>({__html:ui().outerHTML}),[]);return Bt("h2",{class:"dialog__header",__self:this,__source:{fileName:Ii,lineNumber:16}},ue.formTitle,ue.showBranding?Bt("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:ve,__self:this,__source:{fileName:Ii,lineNumber:19}}):null)}r(wi,"DialogHeader");function Ui(ue,ve){const Le=[];return ve.isNameRequired&&!ue.name&&Le.push(ve.nameLabel),ve.isEmailRequired&&!ue.email&&Le.push(ve.emailLabel),ue.message||Le.push(ve.messageLabel),Le}r(Ui,"getMissingFields");const ii="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function fr(ue,ve){const Le=ue.get(ve);return typeof Le=="string"?Le.trim():""}r(fr,"retrieveStringValue");function Li({options:ue,defaultEmail:ve,defaultName:Le,onFormClose:at,onSubmit:gt,onSubmitSuccess:Tt,onSubmitError:rn,showEmail:bn,showName:Tn,screenshotInput:ln}){const{addScreenshotButtonLabel:Vn,removeScreenshotButtonLabel:Ut,cancelButtonLabel:hi,emailLabel:An,emailPlaceholder:Fi,isEmailRequired:Qi,isNameRequired:Zi,messageLabel:Hn,messagePlaceholder:Jn,nameLabel:ai,namePlaceholder:Ri,submitButtonLabel:Cr,isRequiredLabel:Ur}=ue,[li,Kr]=Pi(null),[Ji,Or]=Pi(!1),xo=ln&&ln.input,[Go,Po]=Pi(null),ko=bi(Jr=>{Po(Jr),Or(!1)},[]),Uo=bi(Jr=>{const ao=Ui(Jr,{emailLabel:An,isEmailRequired:Qi,isNameRequired:Zi,messageLabel:Hn,nameLabel:ai});return ao.length>0?Kr(`Please enter in the following required fields: ${ao.join(", ")}`):Kr(null),ao.length===0},[An,Qi,Zi,Hn,ai]),To=bi(async Jr=>{try{if(Jr.preventDefault(),!(Jr.target instanceof HTMLFormElement))return;const ao=new FormData(Jr.target),Io=await(ln&&Ji?ln.value():void 0),Gr={name:fr(ao,"name"),email:fr(ao,"email"),message:fr(ao,"message"),attachments:Io?[Io]:void 0};if(!Uo(Gr))return;try{await gt({name:Gr.name,email:Gr.email,message:Gr.message,source:I},{attachments:Gr.attachments}),Tt(Gr)}catch(lo){R&&h.logger.error(lo),Kr("There was a problem submitting feedback, please wait and try again."),rn(lo)}}catch{}},[ln&&Ji,Tt,rn]);return Bt("form",{class:"form",onSubmit:To,__self:this,__source:{fileName:ii,lineNumber:142}},xo&&Ji?Bt(xo,{onError:ko,__self:this,__source:{fileName:ii,lineNumber:144}}):null,Bt("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:ii,lineNumber:147}},Bt("div",{class:"form__top",__self:this,__source:{fileName:ii,lineNumber:148}},li?Bt("div",{class:"form__error-container",__self:this,__source:{fileName:ii,lineNumber:149}},li):null,Tn?Bt("label",{for:"name",class:"form__label",__self:this,__source:{fileName:ii,lineNumber:152}},Bt(Ar,{label:ai,isRequiredLabel:Ur,isRequired:Zi,__self:this,__source:{fileName:ii,lineNumber:153}}),Bt("input",{class:"form__input",defaultValue:Le,id:"name",name:"name",placeholder:Ri,required:Zi,type:"text",__self:this,__source:{fileName:ii,lineNumber:154}})):Bt("input",{"aria-hidden":!0,value:Le,name:"name",type:"hidden",__self:this,__source:{fileName:ii,lineNumber:165}}),bn?Bt("label",{for:"email",class:"form__label",__self:this,__source:{fileName:ii,lineNumber:169}},Bt(Ar,{label:An,isRequiredLabel:Ur,isRequired:Qi,__self:this,__source:{fileName:ii,lineNumber:170}}),Bt("input",{class:"form__input",defaultValue:ve,id:"email",name:"email",placeholder:Fi,required:Qi,type:"email",__self:this,__source:{fileName:ii,lineNumber:171}})):Bt("input",{"aria-hidden":!0,value:ve,name:"email",type:"hidden",__self:this,__source:{fileName:ii,lineNumber:182}}),Bt("label",{for:"message",class:"form__label",__self:this,__source:{fileName:ii,lineNumber:185}},Bt(Ar,{label:Hn,isRequiredLabel:Ur,isRequired:!0,__self:this,__source:{fileName:ii,lineNumber:186}}),Bt("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:Jn,required:!0,rows:5,__self:this,__source:{fileName:ii,lineNumber:187}})),xo?Bt("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:ii,lineNumber:199}},Bt("button",{class:"btn btn--default",type:"button",onClick:()=>{Po(null),Or(Jr=>!Jr)},__self:this,__source:{fileName:ii,lineNumber:200}},Ji?Ut:Vn),Go?Bt("div",{class:"form__error-container",__self:this,__source:{fileName:ii,lineNumber:210}},Go.message):null):null),Bt("div",{class:"btn-group",__self:this,__source:{fileName:ii,lineNumber:214}},Bt("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:ii,lineNumber:215}},Cr),Bt("button",{class:"btn btn--default",type:"button",onClick:at,__self:this,__source:{fileName:ii,lineNumber:218}},hi))))}r(Li,"Form");function Ar({label:ue,isRequired:ve,isRequiredLabel:Le}){return Bt("span",{class:"form__label__text",__self:this,__source:{fileName:ii,lineNumber:233}},ue,ve&&Bt("span",{class:"form__label__text--required",__self:this,__source:{fileName:ii,lineNumber:235}},Le))}r(Ar,"LabelText");const Zn=16,N=17,oe="http://www.w3.org/2000/svg";function Re(){const ue=r(Tn=>p.document.createElementNS(oe,Tn),"createElementNS"),ve=X(ue("svg"),{width:`${Zn}`,height:`${N}`,viewBox:`0 0 ${Zn} ${N}`,fill:"inherit"}),Le=X(ue("g"),{clipPath:"url(#clip0_57_156)"}),at=X(ue("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),gt=X(ue("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});ve.appendChild(Le).append(gt,at);const Tt=ue("defs"),rn=X(ue("clipPath"),{id:"clip0_57_156"}),bn=X(ue("rect"),{width:`${Zn}`,height:`${Zn}`,fill:"white",transform:"translate(0 0.5)"});return rn.appendChild(bn),Tt.appendChild(rn),ve.appendChild(Tt).appendChild(rn).appendChild(bn),ve}r(Re,"SuccessIcon");const nt="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function Pt({open:ue,onFormSubmitted:ve,...Le}){const at=Le.options,gt=qn(()=>({__html:Re().outerHTML}),[]),[Tt,rn]=Pi(null),bn=bi(()=>{Tt&&(clearTimeout(Tt),rn(null)),ve()},[Tt]),Tn=bi(ln=>{Le.onSubmitSuccess(ln),rn(setTimeout(()=>{ve(),rn(null)},w))},[ve]);return Bt(Ci,{__self:this,__source:{fileName:nt,lineNumber:47}},Tt?Bt("div",{class:"success__position",onClick:bn,__self:this,__source:{fileName:nt,lineNumber:49}},Bt("div",{class:"success__content",__self:this,__source:{fileName:nt,lineNumber:50}},at.successMessageText,Bt("span",{class:"success__icon",dangerouslySetInnerHTML:gt,__self:this,__source:{fileName:nt,lineNumber:52}}))):Bt("dialog",{class:"dialog",onClick:at.onFormClose,open:ue,__self:this,__source:{fileName:nt,lineNumber:56}},Bt("div",{class:"dialog__position",__self:this,__source:{fileName:nt,lineNumber:57}},Bt("div",{class:"dialog__content",onClick:ln=>{ln.stopPropagation()},__self:this,__source:{fileName:nt,lineNumber:58}},Bt(wi,{options:at,__self:this,__source:{fileName:nt,lineNumber:65}}),Bt(Li,{...Le,onSubmitSuccess:Tn,__self:this,__source:{fileName:nt,lineNumber:66}})))))}r(Pt,"Dialog");const En=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}
`,wn=`
.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}

.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,vn=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  width: var(--form-width, 272px);
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  flex: 1 0 auto;
}

@media (max-width: 600px) {
  .form__right {
    width: auto;
  }
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-foreground);
  fill: var(--error-foreground);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,yn=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,Rn=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function Fn(){const ue=m.createElement("style");return ue.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${En}
${wn}
${vn}
${yn}
${Rn}
`,ue}r(Fn,"createDialogStyles");const yi="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx";function fi(){const ue=f.getCurrentScope().getUser(),ve=f.getIsolationScope().getUser(),Le=f.getGlobalScope().getUser();return ue&&Object.keys(ue).length?ue:ve&&Object.keys(ve).length?ve:Le}r(fi,"getUser");const Wi=r(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:ue,screenshotIntegration:ve,sendFeedback:Le,shadow:at})=>{const gt=at,Tt=ue.useSentryUser,rn=fi(),bn=m.createElement("div"),Tn=Fn();let ln="";const Vn={get el(){return bn},appendToDom(){!gt.contains(Tn)&&!gt.contains(bn)&&(gt.appendChild(Tn),gt.appendChild(bn))},removeFromDom(){gt.removeChild(bn),gt.removeChild(Tn)},open(){hi(!0),ue.onFormOpen&&ue.onFormOpen(),ln=m.body.style.overflow,m.body.style.overflow="hidden"},close(){hi(!1),m.body.style.overflow=ln}},Ut=ve&&ve.createInput(Bt,Vn,ue),hi=r(An=>{pt(Bt(Pt,{options:ue,screenshotInput:Ut,showName:ue.showName||ue.isNameRequired,showEmail:ue.showEmail||ue.isEmailRequired,defaultName:Tt&&rn&&rn[Tt.name]||"",defaultEmail:Tt&&rn&&rn[Tt.email]||"",onFormClose:()=>{hi(!1),ue.onFormClose&&ue.onFormClose()},onSubmit:Le,onSubmitSuccess:Fi=>{hi(!1),ue.onSubmitSuccess&&ue.onSubmitSuccess(Fi)},onSubmitError:Fi=>{ue.onSubmitError&&ue.onSubmitError(Fi)},onFormSubmitted:()=>{ue.onFormSubmitted&&ue.onFormSubmitted()},open:An,__self:void 0,__source:{fileName:yi,lineNumber:72}}),bn)},"renderContent");return Vn}}),"feedbackModalIntegration");function Zr(){const ue=m.createElement("style"),ve="#1A141F",Le="#302735";return ue.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${ve};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${ve} 8px,
      ${ve} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${Le} 15px,
      ${Le} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.editor__canvas-container canvas {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,ue}r(Zr,"createScreenshotInputStyles");const gr=r(({onBeforeScreenshot:ue,onScreenshot:ve,onAfterScreenshot:Le,onError:at})=>{ni(()=>{r(async()=>{ue();const Tt=await a.mediaDevices.getDisplayMedia({video:{width:p.innerWidth*p.devicePixelRatio,height:p.innerHeight*p.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),rn=m.createElement("video");await new Promise((bn,Tn)=>{rn.srcObject=Tt,rn.onloadedmetadata=()=>{ve(rn),Tt.getTracks().forEach(ln=>ln.stop()),bn()},rn.play().catch(Tn)}),Le()},"takeScreenshot")().catch(at)},[])},"useTakeScreenshot"),Un="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",hr=30,ar=3,pn=hr+ar,Sr=p.devicePixelRatio,Pn=r(ue=>({x:Math.min(ue.startX,ue.endX),y:Math.min(ue.startY,ue.endY),width:Math.abs(ue.startX-ue.endX),height:Math.abs(ue.startY-ue.endY)}),"constructRect"),so=r(ue=>{const ve=ue.clientHeight,Le=ue.clientWidth,at=ue.width/ue.height;let gt=ve*at,Tt=ve;gt>Le&&(gt=Le,Tt=Le/at);const rn=(Le-gt)/2,bn=(ve-Tt)/2;return{startX:rn,startY:bn,endX:gt+rn,endY:Tt+bn}},"getContainedSize");function Wr({imageBuffer:ue,dialog:ve,options:Le}){return r(function({onError:gt}){const Tt=qn(()=>({__html:Zr().innerText}),[]),rn=Mn(null),bn=Mn(null),Tn=Mn(null),[ln,Vn]=Pi({startX:0,startY:0,endX:0,endY:0}),[Ut,hi]=Pi(!1);ni(()=>{p.addEventListener("resize",An,!1)},[]);function An(){const Hn=Tn.current,Jn=Pn(so(ue));if(Hn){Hn.width=Jn.width*Sr,Hn.height=Jn.height*Sr,Hn.style.width=`${Jn.width}px`,Hn.style.height=`${Jn.height}px`;const Ri=Hn.getContext("2d");Ri&&Ri.scale(Sr,Sr)}const ai=bn.current;ai&&(ai.style.width=`${Jn.width}px`,ai.style.height=`${Jn.height}px`,ai.style.left=`${Jn.x}px`,ai.style.top=`${Jn.y}px`),Vn({startX:0,startY:0,endX:Jn.width,endY:Jn.height})}r(An,"resizeCropper"),ni(()=>{const Hn=Tn.current;if(!Hn)return;const Jn=Hn.getContext("2d");if(!Jn)return;const ai=Pn(so(ue)),Ri=Pn(ln);Jn.clearRect(0,0,ai.width,ai.height),Jn.fillStyle="rgba(0, 0, 0, 0.5)",Jn.fillRect(0,0,ai.width,ai.height),Jn.clearRect(Ri.x,Ri.y,Ri.width,Ri.height),Jn.strokeStyle="#ffffff",Jn.lineWidth=3,Jn.strokeRect(Ri.x+1,Ri.y+1,Ri.width-2,Ri.height-2),Jn.strokeStyle="#000000",Jn.lineWidth=1,Jn.strokeRect(Ri.x+3,Ri.y+3,Ri.width-6,Ri.height-6)},[ln]);function Fi(Hn,Jn){hi(!1);const ai=Qi(Jn),Ri=r(()=>{m.removeEventListener("mousemove",ai),m.removeEventListener("mouseup",Ri),hi(!0)},"handleMouseUp");m.addEventListener("mouseup",Ri),m.addEventListener("mousemove",ai)}r(Fi,"onGrabButton");const Qi=bi(Hn=>function(Jn){if(!Tn.current)return;const ai=Tn.current,Ri=ai.getBoundingClientRect(),Cr=Jn.clientX-Ri.x,Ur=Jn.clientY-Ri.y;switch(Hn){case"top-left":Vn(li=>({...li,startX:Math.min(Math.max(0,Cr),li.endX-pn),startY:Math.min(Math.max(0,Ur),li.endY-pn)}));break;case"top-right":Vn(li=>({...li,endX:Math.max(Math.min(Cr,ai.width/Sr),li.startX+pn),startY:Math.min(Math.max(0,Ur),li.endY-pn)}));break;case"bottom-left":Vn(li=>({...li,startX:Math.min(Math.max(0,Cr),li.endX-pn),endY:Math.max(Math.min(Ur,ai.height/Sr),li.startY+pn)}));break;case"bottom-right":Vn(li=>({...li,endX:Math.max(Math.min(Cr,ai.width/Sr),li.startX+pn),endY:Math.max(Math.min(Ur,ai.height/Sr),li.startY+pn)}));break}},[]);function Zi(){const Hn=m.createElement("canvas"),Jn=Pn(so(ue)),ai=Pn(ln);Hn.width=ai.width,Hn.height=ai.height;const Ri=Hn.getContext("2d");Ri&&ue&&Ri.drawImage(ue,ai.x/Jn.width*ue.width,ai.y/Jn.height*ue.height,ai.width/Jn.width*ue.width,ai.height/Jn.height*ue.height,0,0,ai.width,ai.height);const Cr=ue.getContext("2d");Cr&&(Cr.clearRect(0,0,ue.width,ue.height),ue.width=Hn.width,ue.height=Hn.height,Cr.drawImage(Hn,0,0),An())}return r(Zi,"submit"),gr({onBeforeScreenshot:bi(()=>{ve.el.style.display="none"},[]),onScreenshot:bi(Hn=>{const Jn=ue.getContext("2d");if(!Jn)throw new Error("Could not get canvas context");ue.width=Hn.videoWidth,ue.height=Hn.videoHeight,Jn.drawImage(Hn,0,0)},[ue]),onAfterScreenshot:bi(()=>{ve.el.style.display="block";const Hn=rn.current;Hn&&Hn.appendChild(ue),An()},[]),onError:bi(Hn=>{ve.el.style.display="block",gt(Hn)},[])}),Bt("div",{class:"editor",__self:this,__source:{fileName:Un,lineNumber:249}},Bt("style",{dangerouslySetInnerHTML:Tt,__self:this,__source:{fileName:Un,lineNumber:250}}),Bt("div",{class:"editor__canvas-container",ref:rn,__self:this,__source:{fileName:Un,lineNumber:251}},Bt("div",{class:"editor__crop-container",style:{position:"absolute"},ref:bn,__self:this,__source:{fileName:Un,lineNumber:252}},Bt("canvas",{style:{position:"absolute"},ref:Tn,__self:this,__source:{fileName:Un,lineNumber:253}}),Bt($r,{left:ln.startX-ar,top:ln.startY-ar,onGrabButton:Fi,corner:"top-left",__self:this,__source:{fileName:Un,lineNumber:254}}),Bt($r,{left:ln.endX-hr+ar,top:ln.startY-ar,onGrabButton:Fi,corner:"top-right",__self:this,__source:{fileName:Un,lineNumber:260}}),Bt($r,{left:ln.startX-ar,top:ln.endY-hr+ar,onGrabButton:Fi,corner:"bottom-left",__self:this,__source:{fileName:Un,lineNumber:266}}),Bt($r,{left:ln.endX-hr+ar,top:ln.endY-hr+ar,onGrabButton:Fi,corner:"bottom-right",__self:this,__source:{fileName:Un,lineNumber:272}}),Bt("div",{style:{left:Math.max(0,ln.endX-191),top:Math.max(0,ln.endY+8),display:Ut?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:Un,lineNumber:278}},Bt("button",{onClick:Hn=>{Hn.preventDefault(),Tn.current&&Vn({startX:0,startY:0,endX:Tn.current.width/Sr,endY:Tn.current.height/Sr}),hi(!1)},class:"btn btn--default",__self:this,__source:{fileName:Un,lineNumber:286}},Le.cancelButtonLabel),Bt("button",{onClick:Hn=>{Hn.preventDefault(),Zi(),hi(!1)},class:"btn btn--primary",__self:this,__source:{fileName:Un,lineNumber:303}},Le.confirmButtonLabel)))))},"ScreenshotEditor")}r(Wr,"makeScreenshotEditorComponent");function $r({top:ue,left:ve,corner:Le,onGrabButton:at}){return Bt("button",{class:`editor__crop-corner editor__crop-corner--${Le} `,style:{top:ue,left:ve},onMouseDown:gt=>{gt.preventDefault(),at(gt,Le)},onClick:gt=>{gt.preventDefault()},__self:this,__source:{fileName:Un,lineNumber:333}})}r($r,"CropCorner");const yo=r(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:(ue,ve,Le)=>{const at=m.createElement("canvas");return{input:Wr({h:ue,imageBuffer:at,dialog:ve,options:Le}),value:async()=>{const gt=await new Promise(Tt=>{at.toBlob(Tt,"image/png")});if(gt)return{data:new Uint8Array(await gt.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),"feedbackScreenshotIntegration");l.buildFeedbackIntegration=Xe,l.feedbackModalIntegration=Wi,l.feedbackScreenshotIntegration=yo,l.getFeedback=Ge,l.sendFeedback=O},4947629935:(B,l,d)=>{var{_optionalChain:f}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const h=d(8482989710);var p;(function(Pe){Pe[Pe.Document=0]="Document",Pe[Pe.DocumentType=1]="DocumentType",Pe[Pe.Element=2]="Element",Pe[Pe.Text=3]="Text",Pe[Pe.CDATA=4]="CDATA",Pe[Pe.Comment=5]="Comment"})(p||(p={}));function m(Pe,xe){for(let et=Pe.classList.length;et--;){const rt=Pe.classList[et];if(xe.test(rt))return!0}return!1}r(m,"elementClassMatchesRegex");function a(Pe,xe,et=1/0,rt=0){return!Pe||Pe.nodeType!==Pe.ELEMENT_NODE||rt>et?-1:xe(Pe)?rt:a(Pe.parentNode,xe,et,rt+1)}r(a,"distanceToMatch");function s(Pe,xe){return et=>{const rt=et;if(rt===null)return!1;try{if(Pe){if(typeof Pe=="string"){if(rt.matches(`.${Pe}`))return!0}else if(m(rt,Pe))return!0}return!!(xe&&rt.matches(xe))}catch{return!1}}}r(s,"createMatchPredicate");const n=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let e={map:{},getId(){return console.error(n),-1},getNode(){return console.error(n),null},removeNodeFromMap(){console.error(n)},has(){return console.error(n),!1},reset(){console.error(n)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(e=new Proxy(e,{get(Pe,xe,et){return xe==="map"&&console.error(n),Reflect.get(Pe,xe,et)}}));function t(Pe,xe,et,rt,je=window){const Ft=je.Object.getOwnPropertyDescriptor(Pe,xe);return je.Object.defineProperty(Pe,xe,rt?et:{set(Gt){v(()=>{et.set.call(this,Gt)},0),Ft&&Ft.set&&Ft.set.call(this,Gt)}}),()=>t(Pe,xe,Ft||{},!0)}r(t,"hookSetter");function i(Pe,xe,et){try{if(!(xe in Pe))return()=>{};const rt=Pe[xe],je=et(rt);return typeof je=="function"&&(je.prototype=je.prototype||{},Object.defineProperties(je,{__rrweb_original__:{enumerable:!1,value:rt}})),Pe[xe]=je,()=>{Pe[xe]=rt}}catch{return()=>{}}}r(i,"patch"),/[1-9][0-9]{12}/.test(Date.now().toString());function o(Pe){return Pe?Pe.nodeType===Pe.ELEMENT_NODE?Pe:Pe.parentElement:null}r(o,"closestElementOfNode");function c(Pe,xe,et,rt,je){if(!Pe)return!1;const Ft=o(Pe);if(!Ft)return!1;const Gt=s(xe,et);if(!je){const cn=rt&&Ft.matches(rt);return Gt(Ft)&&!cn}const Xt=a(Ft,Gt);let sn=-1;return Xt<0?!1:(rt&&(sn=a(Ft,s(null,rt))),Xt>-1&&sn<0?!0:Xt<sn)}r(c,"isBlocked");const g={};function S(Pe){const xe=g[Pe];if(xe)return xe;const et=window.document;let rt=window[Pe];if(et&&typeof et.createElement=="function")try{const je=et.createElement("iframe");je.hidden=!0,et.head.appendChild(je);const Ft=je.contentWindow;Ft&&Ft[Pe]&&(rt=Ft[Pe]),et.head.removeChild(je)}catch{}return g[Pe]=rt.bind(window)}r(S,"getImplementation");function u(...Pe){return S("requestAnimationFrame")(...Pe)}r(u,"onRequestAnimationFrame");function v(...Pe){return S("setTimeout")(...Pe)}r(v,"setTimeout");var E=(Pe=>(Pe[Pe["2D"]=0]="2D",Pe[Pe.WebGL=1]="WebGL",Pe[Pe.WebGL2=2]="WebGL2",Pe))(E||{});let b;function _(Pe){b=Pe}r(_,"registerErrorHandler");const C=r(Pe=>b?r((...et)=>{try{return Pe(...et)}catch(rt){if(b&&b(rt)===!0)return()=>{};throw rt}},"rrwebWrapped"):Pe,"callbackWrapper");for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=typeof Uint8Array>"u"?[]:new Uint8Array(256),w=0;w<I.length;w++)A[I.charCodeAt(w)]=w;var O=r(function(Pe){var xe=new Uint8Array(Pe),et,rt=xe.length,je="";for(et=0;et<rt;et+=3)je+=I[xe[et]>>2],je+=I[(xe[et]&3)<<4|xe[et+1]>>4],je+=I[(xe[et+1]&15)<<2|xe[et+2]>>6],je+=I[xe[et+2]&63];return rt%3===2?je=je.substring(0,je.length-1)+"=":rt%3===1&&(je=je.substring(0,je.length-2)+"=="),je},"encode");const R=new Map;function F(Pe,xe){let et=R.get(Pe);return et||(et=new Map,R.set(Pe,et)),et.has(xe)||et.set(xe,[]),et.get(xe)}r(F,"variableListFor");const V=r((Pe,xe,et)=>{if(!Pe||!(Y(Pe,xe)||typeof Pe=="object"))return;const rt=Pe.constructor.name,je=F(et,rt);let Ft=je.indexOf(Pe);return Ft===-1&&(Ft=je.length,je.push(Pe)),Ft},"saveWebGLVar");function $(Pe,xe,et){if(Pe instanceof Array)return Pe.map(rt=>$(rt,xe,et));if(Pe===null)return Pe;if(Pe instanceof Float32Array||Pe instanceof Float64Array||Pe instanceof Int32Array||Pe instanceof Uint32Array||Pe instanceof Uint8Array||Pe instanceof Uint16Array||Pe instanceof Int16Array||Pe instanceof Int8Array||Pe instanceof Uint8ClampedArray)return{rr_type:Pe.constructor.name,args:[Object.values(Pe)]};if(Pe instanceof ArrayBuffer){const rt=Pe.constructor.name,je=O(Pe);return{rr_type:rt,base64:je}}else{if(Pe instanceof DataView)return{rr_type:Pe.constructor.name,args:[$(Pe.buffer,xe,et),Pe.byteOffset,Pe.byteLength]};if(Pe instanceof HTMLImageElement){const rt=Pe.constructor.name,{src:je}=Pe;return{rr_type:rt,src:je}}else if(Pe instanceof HTMLCanvasElement){const rt="HTMLImageElement",je=Pe.toDataURL();return{rr_type:rt,src:je}}else{if(Pe instanceof ImageData)return{rr_type:Pe.constructor.name,args:[$(Pe.data,xe,et),Pe.width,Pe.height]};if(Y(Pe,xe)||typeof Pe=="object"){const rt=Pe.constructor.name,je=V(Pe,xe,et);return{rr_type:rt,index:je}}}}return Pe}r($,"serializeArg");const X=r((Pe,xe,et)=>Pe.map(rt=>$(rt,xe,et)),"serializeArgs"),Y=r((Pe,xe)=>{const rt=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(je=>typeof xe[je]=="function");return Boolean(rt.find(je=>Pe instanceof xe[je]))},"isInstanceOfWebGLObject");function ne(Pe,xe,et,rt,je){const Ft=[],Gt=Object.getOwnPropertyNames(xe.CanvasRenderingContext2D.prototype);for(const Xt of Gt)try{if(typeof xe.CanvasRenderingContext2D.prototype[Xt]!="function")continue;const sn=i(xe.CanvasRenderingContext2D.prototype,Xt,function(cn){return function(...Bt){return c(this.canvas,et,rt,je,!0)||v(()=>{const gn=X(Bt,xe,this);Pe(this.canvas,{type:E["2D"],property:Xt,args:gn})},0),cn.apply(this,Bt)}});Ft.push(sn)}catch{const cn=t(xe.CanvasRenderingContext2D.prototype,Xt,{set(Bt){Pe(this.canvas,{type:E["2D"],property:Xt,args:[Bt],setter:!0})}});Ft.push(cn)}return()=>{Ft.forEach(Xt=>Xt())}}r(ne,"initCanvas2DMutationObserver");function ie(Pe){return Pe==="experimental-webgl"?"webgl":Pe}r(ie,"getNormalizedContextName");function ge(Pe,xe,et,rt,je){const Ft=[];try{const Gt=i(Pe.HTMLCanvasElement.prototype,"getContext",function(Xt){return function(sn,...cn){if(!c(this,xe,et,rt,!0)){const Bt=ie(sn);if("__context"in this||(this.__context=Bt),je&&["webgl","webgl2"].includes(Bt))if(cn[0]&&typeof cn[0]=="object"){const gn=cn[0];gn.preserveDrawingBuffer||(gn.preserveDrawingBuffer=!0)}else cn.splice(0,1,{preserveDrawingBuffer:!0})}return Xt.apply(this,[sn,...cn])}});Ft.push(Gt)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{Ft.forEach(Gt=>Gt())}}r(ge,"initCanvasContextObserver");function Ie(Pe,xe,et,rt,je,Ft,Gt,Xt){const sn=[],cn=Object.getOwnPropertyNames(Pe);for(const Bt of cn)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(Bt))try{if(typeof Pe[Bt]!="function")continue;const gn=i(Pe,Bt,function(Ci){return function(...$n){const Sn=Ci.apply(this,$n);if(V(Sn,Xt,this),"tagName"in this.canvas&&!c(this.canvas,rt,je,Ft,!0)){const nn=X($n,Xt,this),Vt={type:xe,property:Bt,args:nn};et(this.canvas,Vt)}return Sn}});sn.push(gn)}catch{const Ci=t(Pe,Bt,{set($n){et(this.canvas,{type:xe,property:Bt,args:[$n],setter:!0})}});sn.push(Ci)}return sn}r(Ie,"patchGLPrototype");function We(Pe,xe,et,rt,je,Ft){const Gt=[];return Gt.push(...Ie(xe.WebGLRenderingContext.prototype,E.WebGL,Pe,et,rt,je,Ft,xe)),typeof xe.WebGL2RenderingContext<"u"&&Gt.push(...Ie(xe.WebGL2RenderingContext.prototype,E.WebGL2,Pe,et,rt,je,Ft,xe)),()=>{Gt.forEach(Xt=>Xt())}}r(We,"initCanvasWebGLMutationObserver");var ct='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function Ae(){const Pe=new Blob([ct]);return URL.createObjectURL(Pe)}r(Ae,"t");class Fe{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(xe){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(gn,Ci)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(gn)||this.pendingCanvasMutations.set(gn,[]),this.pendingCanvasMutations.get(gn).push(Ci)};const{sampling:et="all",win:rt,blockClass:je,blockSelector:Ft,unblockSelector:Gt,maxCanvasSize:Xt,recordCanvas:sn,dataURLOptions:cn,errorHandler:Bt}=xe;this.mutationCb=xe.mutationCb,this.mirror=xe.mirror,this.options=xe,Bt&&_(Bt),!xe.enableManualSnapshot&&C(()=>{sn&&et==="all"&&this.initCanvasMutationObserver(rt,je,Ft,Gt),sn&&typeof et=="number"&&this.initCanvasFPSObserver(et,rt,je,Ft,Gt,Xt,{dataURLOptions:cn})})()}initCanvasFPSObserver(xe,et,rt,je,Ft,Gt,Xt){const sn=ge(et,rt,je,Ft,!0),cn=this.takeSnapshot(!1,xe,et,rt,je,Ft,Gt,Xt.dataURLOptions);this.resetObservers=()=>{sn(),cancelAnimationFrame(cn)}}initCanvasMutationObserver(xe,et,rt,je){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const Ft=ge(xe,et,rt,je,!1),Gt=ne(this.processMutation.bind(this),xe,et,rt,je),Xt=We(this.processMutation.bind(this),xe,et,rt,je,this.mirror);this.resetObservers=()=>{Ft(),Gt(),Xt()}}snapshot(xe){const{options:et}=this,rt=this.takeSnapshot(!0,et.sampling==="all"?2:et.sampling||2,et.win,et.blockClass,et.blockSelector,et.unblockSelector,et.maxCanvasSize,et.dataURLOptions,xe);this.resetObservers=()=>{cancelAnimationFrame(rt)}}takeSnapshot(xe,et,rt,je,Ft,Gt,Xt,sn,cn){const Bt=new Map,gn=new Worker(Ae());gn.onmessage=Wn=>{const Lt=Wn.data,{id:zt}=Lt;if(Bt.set(zt,!1),!("base64"in Lt))return;const{base64:It,type:z,width:Ve,height:He}=Lt;this.mutationCb({id:zt,type:E["2D"],commands:[{property:"clearRect",args:[0,0,Ve,He]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:It}],type:z}]},0,0,Ve,He]}]})};const Ci=1e3/et;let $n=0,Sn;const nn=r(Wn=>{if(Wn)return[Wn];const Lt=[];return rt.document.querySelectorAll("canvas").forEach(zt=>{c(zt,je,Ft,Gt,!0)||Lt.push(zt)}),Lt},"getCanvas"),Vt=r(Wn=>{if($n&&Wn-$n<Ci){Sn=u(Vt);return}$n=Wn,nn(cn).forEach(Lt=>{const zt=this.mirror.getId(Lt);if(!Bt.get(zt)&&!(!Lt.width||!Lt.height)){if(Bt.set(zt,!0),!xe&&["webgl","webgl2"].includes(Lt.__context)){const It=Lt.getContext(Lt.__context);f([It,"optionalAccess",z=>z.getContextAttributes,"call",z=>z(),"optionalAccess",z=>z.preserveDrawingBuffer])===!1&&It.clear(It.COLOR_BUFFER_BIT)}createImageBitmap(Lt).then(It=>{gn.postMessage({id:zt,bitmap:It,width:Lt.width,height:Lt.height,dataURLOptions:sn,maxCanvasSize:Xt},[It])}).catch(It=>{C(()=>{throw It})()})}}),Sn=u(Vt)},"takeCanvasSnapshots");return Sn=u(Vt),Sn}startPendingCanvasMutationFlusher(){u(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const xe=r(et=>{this.rafStamps.latestId=et,u(xe)},"setLatestRAFTimestamp");u(xe)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((xe,et)=>{const rt=this.mirror.getId(et);this.flushPendingCanvasMutationFor(et,rt)}),u(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(xe,et){if(this.frozen||this.locked)return;const rt=this.pendingCanvasMutations.get(xe);if(!rt||et===-1)return;const je=rt.map(Gt=>{const{type:Xt,...sn}=Gt;return sn}),{type:Ft}=rt[0];this.mutationCb({id:et,type:Ft,commands:je}),this.pendingCanvasMutations.delete(xe)}}r(Fe,"CanvasManager");const Xe={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Ge="ReplayCanvas",it=1280,Dt=r((Pe={})=>{const[xe,et]=Pe.maxCanvasSize||[],rt={quality:Pe.quality||"medium",enableManualSnapshot:Pe.enableManualSnapshot,maxCanvasSize:[xe?Math.min(xe,it):it,et?Math.min(et,it):it]};let je;const Ft=new Promise(Gt=>je=Gt);return{name:Ge,getOptions(){const{quality:Gt,enableManualSnapshot:Xt,maxCanvasSize:sn}=rt;return{enableManualSnapshot:Xt,recordCanvas:!0,getCanvasManager:cn=>{const Bt=new Fe({...cn,enableManualSnapshot:Xt,maxCanvasSize:sn,errorHandler:gn=>{try{typeof gn=="object"&&(gn.__rrweb__=!0)}catch{}}});return je(Bt),Bt},...Xe[Gt||"medium"]||Xe.medium}},async snapshot(Gt){(await Ft).snapshot(Gt)}}},"_replayCanvasIntegration"),wt=h.defineIntegration(Dt);l.replayCanvasIntegration=wt},6979168052:(B,l,d)=>{var{_nullishCoalesce:f,_optionalChain:h}=d(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const p=d(8482989710),m=d(7563271614),a=d(3778408185),s=m.GLOBAL_OBJ,n="sentryReplaySession",e="replay_event",t="Unable to send Replay",i=3e5,o=9e5,c=5e3,g=5500,S=6e4,u=5e3,v=3,E=15e4,b=5e3,_=3e3,C=300,I=2e7,A=4999,w=15e3,O=36e5;function R(P,x){return P??x()}r(R,"_nullishCoalesce$1");function F(P){let x,W=P[0],Z=1;for(;Z<P.length;){const ce=P[Z],De=P[Z+1];if(Z+=2,(ce==="optionalAccess"||ce==="optionalCall")&&W==null)return;ce==="access"||ce==="optionalAccess"?(x=W,W=De(W)):(ce==="call"||ce==="optionalCall")&&(W=De((...$e)=>W.call(x,...$e)),x=void 0)}return W}r(F,"_optionalChain$5");var V;(function(P){P[P.Document=0]="Document",P[P.DocumentType=1]="DocumentType",P[P.Element=2]="Element",P[P.Text=3]="Text",P[P.CDATA=4]="CDATA",P[P.Comment=5]="Comment"})(V||(V={}));function $(P){return P.nodeType===P.ELEMENT_NODE}r($,"isElement$1");function X(P){const x=F([P,"optionalAccess",W=>W.host]);return Boolean(F([x,"optionalAccess",W=>W.shadowRoot])===P)}r(X,"isShadowRoot");function Y(P){return Object.prototype.toString.call(P)==="[object ShadowRoot]"}r(Y,"isNativeShadowDom");function ne(P){return P.includes(" background-clip: text;")&&!P.includes(" -webkit-background-clip: text;")&&(P=P.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),P}r(ne,"fixBrowserCompatibilityIssuesInCSS");function ie(P){const{cssText:x}=P;if(x.split('"').length<3)return x;const W=["@import",`url(${JSON.stringify(P.href)})`];return P.layerName===""?W.push("layer"):P.layerName&&W.push(`layer(${P.layerName})`),P.supportsText&&W.push(`supports(${P.supportsText})`),P.media.length&&W.push(P.media.mediaText),W.join(" ")+";"}r(ie,"escapeImportStatement");function ge(P){try{const x=P.rules||P.cssRules;return x?ne(Array.from(x,Ie).join("")):null}catch{return null}}r(ge,"stringifyStylesheet");function Ie(P){let x;if(ct(P))try{x=ge(P.styleSheet)||ie(P)}catch{}else if(Ae(P)&&P.selectorText.includes(":"))return We(P.cssText);return x||P.cssText}r(Ie,"stringifyRule");function We(P){const x=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return P.replace(x,"$1\\$2")}r(We,"fixSafariColons");function ct(P){return"styleSheet"in P}r(ct,"isCSSImportRule");function Ae(P){return"selectorText"in P}r(Ae,"isCSSStyleRule");class Fe{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(x){if(!x)return-1;const W=F([this,"access",Z=>Z.getMeta,"call",Z=>Z(x),"optionalAccess",Z=>Z.id]);return R(W,()=>-1)}getNode(x){return this.idNodeMap.get(x)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(x){return this.nodeMetaMap.get(x)||null}removeNodeFromMap(x){const W=this.getId(x);this.idNodeMap.delete(W),x.childNodes&&x.childNodes.forEach(Z=>this.removeNodeFromMap(Z))}has(x){return this.idNodeMap.has(x)}hasNode(x){return this.nodeMetaMap.has(x)}add(x,W){const Z=W.id;this.idNodeMap.set(Z,x),this.nodeMetaMap.set(x,W)}replace(x,W){const Z=this.getNode(x);if(Z){const ce=this.nodeMetaMap.get(Z);ce&&this.nodeMetaMap.set(W,ce)}this.idNodeMap.set(x,W)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}r(Fe,"Mirror");function Xe(){return new Fe}r(Xe,"createMirror");function Ge({maskInputOptions:P,tagName:x,type:W}){return x==="OPTION"&&(x="SELECT"),Boolean(P[x.toLowerCase()]||W&&P[W]||W==="password"||x==="INPUT"&&!W&&P.text)}r(Ge,"shouldMaskInput");function it({isMasked:P,element:x,value:W,maskInputFn:Z}){let ce=W||"";return P?(Z&&(ce=Z(ce,x)),"*".repeat(ce.length)):ce}r(it,"maskInputValue");function Dt(P){return P.toLowerCase()}r(Dt,"toLowerCase");function wt(P){return P.toUpperCase()}r(wt,"toUpperCase");const Pe="__rrweb_original__";function xe(P){const x=P.getContext("2d");if(!x)return!0;const W=50;for(let Z=0;Z<P.width;Z+=W)for(let ce=0;ce<P.height;ce+=W){const De=x.getImageData,$e=Pe in De?De[Pe]:De;if(new Uint32Array($e.call(x,Z,ce,Math.min(W,P.width-Z),Math.min(W,P.height-ce)).data.buffer).some(tt=>tt!==0))return!1}return!0}r(xe,"is2DCanvasBlank");function et(P){const x=P.type;return P.hasAttribute("data-rr-is-password")?"password":x?Dt(x):null}r(et,"getInputType");function rt(P,x,W){return x==="INPUT"&&(W==="radio"||W==="checkbox")?P.getAttribute("value")||"":P.value}r(rt,"getInputValue");let je=1;const Ft=new RegExp("[^a-z0-9-_:]"),Gt=-2;function Xt(){return je++}r(Xt,"genId");function sn(P){if(P instanceof HTMLFormElement)return"form";const x=Dt(P.tagName);return Ft.test(x)?"div":x}r(sn,"getValidTagName");function cn(P){let x="";return P.indexOf("//")>-1?x=P.split("/").slice(0,3).join("/"):x=P.split("/")[0],x=x.split("?")[0],x}r(cn,"extractOrigin");let Bt,gn;const Ci=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,$n=/^(?:[a-z+]+:)?\/\//i,Sn=/^www\..*/i,nn=/^(data:)([^,]*),(.*)/i;function Vt(P,x){return(P||"").replace(Ci,(W,Z,ce,De,$e,ut)=>{const tt=ce||$e||ut,Ot=Z||De||"";if(!tt)return W;if($n.test(tt)||Sn.test(tt))return`url(${Ot}${tt}${Ot})`;if(nn.test(tt))return`url(${Ot}${tt}${Ot})`;if(tt[0]==="/")return`url(${Ot}${cn(x)+tt}${Ot})`;const vt=x.split("/"),Wt=tt.split("/");vt.pop();for(const qt of Wt)qt!=="."&&(qt===".."?vt.pop():vt.push(qt));return`url(${Ot}${vt.join("/")}${Ot})`})}r(Vt,"absoluteToStylesheet");const Wn=/^[^ \t\n\r\u000c]+/,Lt=/^[, \t\n\r\u000c]+/;function zt(P,x){if(x.trim()==="")return x;let W=0;function Z(De){let $e;const ut=De.exec(x.substring(W));return ut?($e=ut[0],W+=$e.length,$e):""}r(Z,"collectCharacters");const ce=[];for(;Z(Lt),!(W>=x.length);){let De=Z(Wn);if(De.slice(-1)===",")De=It(P,De.substring(0,De.length-1)),ce.push(De);else{let $e="";De=It(P,De);let ut=!1;for(;;){const tt=x.charAt(W);if(tt===""){ce.push((De+$e).trim());break}else if(ut)tt===")"&&(ut=!1);else if(tt===","){W+=1,ce.push((De+$e).trim());break}else tt==="("&&(ut=!0);$e+=tt,W+=1}}}return ce.join(", ")}r(zt,"getAbsoluteSrcsetString");function It(P,x){if(!x||x.trim()==="")return x;const W=P.createElement("a");return W.href=x,W.href}r(It,"absoluteToDoc");function z(P){return Boolean(P.tagName==="svg"||P.ownerSVGElement)}r(z,"isSVGElement");function Ve(){const P=document.createElement("a");return P.href="",P.href}r(Ve,"getHref");function He(P,x,W,Z,ce,De){return Z&&(W==="src"||W==="href"&&!(x==="use"&&Z[0]==="#")||W==="xlink:href"&&Z[0]!=="#"||W==="background"&&(x==="table"||x==="td"||x==="th")?It(P,Z):W==="srcset"?zt(P,Z):W==="style"?Vt(Z,Ve()):x==="object"&&W==="data"?It(P,Z):typeof De=="function"?De(W,Z,ce):Z)}r(He,"transformAttribute");function Je(P,x,W){return(P==="video"||P==="audio")&&x==="autoplay"}r(Je,"ignoreAttribute");function Ye(P,x,W,Z){try{if(Z&&P.matches(Z))return!1;if(typeof x=="string"){if(P.classList.contains(x))return!0}else for(let ce=P.classList.length;ce--;){const De=P.classList[ce];if(x.test(De))return!0}if(W)return P.matches(W)}catch{}return!1}r(Ye,"_isBlockedElement");function lt(P,x){for(let W=P.classList.length;W--;){const Z=P.classList[W];if(x.test(Z))return!0}return!1}r(lt,"elementClassMatchesRegex");function le(P,x,W=1/0,Z=0){return!P||P.nodeType!==P.ELEMENT_NODE||Z>W?-1:x(P)?Z:le(P.parentNode,x,W,Z+1)}r(le,"distanceToMatch");function Ue(P,x){return W=>{const Z=W;if(Z===null)return!1;try{if(P){if(typeof P=="string"){if(Z.matches(`.${P}`))return!0}else if(lt(Z,P))return!0}return!!(x&&Z.matches(x))}catch{return!1}}}r(Ue,"createMatchPredicate");function G(P,x,W,Z,ce,De){try{const $e=P.nodeType===P.ELEMENT_NODE?P:P.parentElement;if($e===null)return!1;if($e.tagName==="INPUT"){const Ot=$e.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(Ot))return!0}let ut=-1,tt=-1;if(De){if(tt=le($e,Ue(Z,ce)),tt<0)return!0;ut=le($e,Ue(x,W),tt>=0?tt:1/0)}else{if(ut=le($e,Ue(x,W)),ut<0)return!1;tt=le($e,Ue(Z,ce),ut>=0?ut:1/0)}return ut>=0?tt>=0?ut<=tt:!0:tt>=0?!1:!!De}catch{}return!!De}r(G,"needMaskingText");function Q(P,x,W){const Z=P.contentWindow;if(!Z)return;let ce=!1,De;try{De=Z.document.readyState}catch{return}if(De!=="complete"){const ut=setTimeout(()=>{ce||(x(),ce=!0)},W);P.addEventListener("load",()=>{clearTimeout(ut),ce=!0,x()});return}const $e="about:blank";if(Z.location.href!==$e||P.src===$e||P.src==="")return setTimeout(x,0),P.addEventListener("load",x);P.addEventListener("load",x)}r(Q,"onceIframeLoaded");function ye(P,x,W){let Z=!1,ce;try{ce=P.sheet}catch{return}if(ce)return;const De=setTimeout(()=>{Z||(x(),Z=!0)},W);P.addEventListener("load",()=>{clearTimeout(De),Z=!0,x()})}r(ye,"onceStylesheetLoaded");function Ee(P,x){const{doc:W,mirror:Z,blockClass:ce,blockSelector:De,unblockSelector:$e,maskAllText:ut,maskAttributeFn:tt,maskTextClass:Ot,unmaskTextClass:vt,maskTextSelector:Wt,unmaskTextSelector:qt,inlineStylesheet:fn,maskInputOptions:In={},maskTextFn:Qn,maskInputFn:Oi,dataURLOptions:ri={},inlineImages:Gi,recordCanvas:lr,keepIframeSrcFn:dr,newlyAddedElement:Lr=!1}=x,Ni=pt(W,Z);switch(P.nodeType){case P.DOCUMENT_NODE:return P.compatMode!=="CSS1Compat"?{type:V.Document,childNodes:[],compatMode:P.compatMode}:{type:V.Document,childNodes:[]};case P.DOCUMENT_TYPE_NODE:return{type:V.DocumentType,name:P.name,publicId:P.publicId,systemId:P.systemId,rootId:Ni};case P.ELEMENT_NODE:return st(P,{doc:W,blockClass:ce,blockSelector:De,unblockSelector:$e,inlineStylesheet:fn,maskAttributeFn:tt,maskInputOptions:In,maskInputFn:Oi,dataURLOptions:ri,inlineImages:Gi,recordCanvas:lr,keepIframeSrcFn:dr,newlyAddedElement:Lr,rootId:Ni,maskAllText:ut,maskTextClass:Ot,unmaskTextClass:vt,maskTextSelector:Wt,unmaskTextSelector:qt});case P.TEXT_NODE:return ze(P,{maskAllText:ut,maskTextClass:Ot,unmaskTextClass:vt,maskTextSelector:Wt,unmaskTextSelector:qt,maskTextFn:Qn,maskInputOptions:In,maskInputFn:Oi,rootId:Ni});case P.CDATA_SECTION_NODE:return{type:V.CDATA,textContent:"",rootId:Ni};case P.COMMENT_NODE:return{type:V.Comment,textContent:P.textContent||"",rootId:Ni};default:return!1}}r(Ee,"serializeNode");function pt(P,x){if(!x.hasNode(P))return;const W=x.getId(P);return W===1?void 0:W}r(pt,"getRootId");function ze(P,x){const{maskAllText:W,maskTextClass:Z,unmaskTextClass:ce,maskTextSelector:De,unmaskTextSelector:$e,maskTextFn:ut,maskInputOptions:tt,maskInputFn:Ot,rootId:vt}=x,Wt=P.parentNode&&P.parentNode.tagName;let qt=P.textContent;const fn=Wt==="STYLE"?!0:void 0,In=Wt==="SCRIPT"?!0:void 0,Qn=Wt==="TEXTAREA"?!0:void 0;if(fn&&qt){try{P.nextSibling||P.previousSibling||F([P,"access",ri=>ri.parentNode,"access",ri=>ri.sheet,"optionalAccess",ri=>ri.cssRules])&&(qt=ge(P.parentNode.sheet))}catch(ri){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${ri}`,P)}qt=Vt(qt,Ve())}In&&(qt="SCRIPT_PLACEHOLDER");const Oi=G(P,Z,De,ce,$e,W);if(!fn&&!In&&!Qn&&qt&&Oi&&(qt=ut?ut(qt,P.parentElement):qt.replace(/[\S]/g,"*")),Qn&&qt&&(tt.textarea||Oi)&&(qt=Ot?Ot(qt,P.parentNode):qt.replace(/[\S]/g,"*")),Wt==="OPTION"&&qt){const ri=Ge({type:null,tagName:Wt,maskInputOptions:tt});qt=it({isMasked:G(P,Z,De,ce,$e,ri),element:P,value:qt,maskInputFn:Ot})}return{type:V.Text,textContent:qt||"",isStyle:fn,rootId:vt}}r(ze,"serializeTextNode");function st(P,x){const{doc:W,blockClass:Z,blockSelector:ce,unblockSelector:De,inlineStylesheet:$e,maskInputOptions:ut={},maskAttributeFn:tt,maskInputFn:Ot,dataURLOptions:vt={},inlineImages:Wt,recordCanvas:qt,keepIframeSrcFn:fn,newlyAddedElement:In=!1,rootId:Qn,maskAllText:Oi,maskTextClass:ri,unmaskTextClass:Gi,maskTextSelector:lr,unmaskTextSelector:dr}=x,Lr=Ye(P,Z,ce,De),Ni=sn(P);let ei={};const tr=P.attributes.length;for(let ti=0;ti<tr;ti++){const ji=P.attributes[ti];ji.name&&!Je(Ni,ji.name,ji.value)&&(ei[ji.name]=He(W,Ni,Dt(ji.name),ji.value,P,tt))}if(Ni==="link"&&$e){const ti=Array.from(W.styleSheets).find(Dr=>Dr.href===P.href);let ji=null;ti&&(ji=ge(ti)),ji&&(delete ei.rel,delete ei.href,ei._cssText=Vt(ji,ti.href))}if(Ni==="style"&&P.sheet&&!(P.innerText||P.textContent||"").trim().length){const ti=ge(P.sheet);ti&&(ei._cssText=Vt(ti,Ve()))}if(Ni==="input"||Ni==="textarea"||Ni==="select"||Ni==="option"){const ti=P,ji=et(ti),Dr=rt(ti,wt(Ni),ji),to=ti.checked;if(ji!=="submit"&&ji!=="button"&&Dr){const po=G(ti,ri,lr,Gi,dr,Ge({type:ji,tagName:wt(Ni),maskInputOptions:ut}));ei.value=it({isMasked:po,element:ti,value:Dr,maskInputFn:Ot})}to&&(ei.checked=to)}if(Ni==="option"&&(P.selected&&!ut.select?ei.selected=!0:delete ei.selected),Ni==="canvas"&&qt){if(P.__context==="2d")xe(P)||(ei.rr_dataURL=P.toDataURL(vt.type,vt.quality));else if(!("__context"in P)){const ti=P.toDataURL(vt.type,vt.quality),ji=document.createElement("canvas");ji.width=P.width,ji.height=P.height;const Dr=ji.toDataURL(vt.type,vt.quality);ti!==Dr&&(ei.rr_dataURL=ti)}}if(Ni==="img"&&Wt){Bt||(Bt=W.createElement("canvas"),gn=Bt.getContext("2d"));const ti=P,ji=ti.crossOrigin;ti.crossOrigin="anonymous";const Dr=r(()=>{ti.removeEventListener("load",Dr);try{Bt.width=ti.naturalWidth,Bt.height=ti.naturalHeight,gn.drawImage(ti,0,0),ei.rr_dataURL=Bt.toDataURL(vt.type,vt.quality)}catch(to){console.warn(`Cannot inline img src=${ti.currentSrc}! Error: ${to}`)}ji?ei.crossOrigin=ji:ti.removeAttribute("crossorigin")},"recordInlineImage");ti.complete&&ti.naturalWidth!==0?Dr():ti.addEventListener("load",Dr)}if((Ni==="audio"||Ni==="video")&&(ei.rr_mediaState=P.paused?"paused":"played",ei.rr_mediaCurrentTime=P.currentTime),In||(P.scrollLeft&&(ei.rr_scrollLeft=P.scrollLeft),P.scrollTop&&(ei.rr_scrollTop=P.scrollTop)),Lr){const{width:ti,height:ji}=P.getBoundingClientRect();ei={class:ei.class,rr_width:`${ti}px`,rr_height:`${ji}px`}}Ni==="iframe"&&!fn(ei.src)&&(P.contentDocument||(ei.rr_src=ei.src),delete ei.src);let zr;try{customElements.get(Ni)&&(zr=!0)}catch{}return{type:V.Element,tagName:Ni,attributes:ei,childNodes:[],isSVG:z(P)||void 0,needBlock:Lr,rootId:Qn,isCustom:zr}}r(st,"serializeElementNode");function me(P){return P==null?"":P.toLowerCase()}r(me,"lowerIfExists");function Me(P,x){if(x.comment&&P.type===V.Comment)return!0;if(P.type===V.Element){if(x.script&&(P.tagName==="script"||P.tagName==="link"&&(P.attributes.rel==="preload"||P.attributes.rel==="modulepreload")&&P.attributes.as==="script"||P.tagName==="link"&&P.attributes.rel==="prefetch"&&typeof P.attributes.href=="string"&&P.attributes.href.endsWith(".js")))return!0;if(x.headFavicon&&(P.tagName==="link"&&P.attributes.rel==="shortcut icon"||P.tagName==="meta"&&(me(P.attributes.name).match(/^msapplication-tile(image|color)$/)||me(P.attributes.name)==="application-name"||me(P.attributes.rel)==="icon"||me(P.attributes.rel)==="apple-touch-icon"||me(P.attributes.rel)==="shortcut icon")))return!0;if(P.tagName==="meta"){if(x.headMetaDescKeywords&&me(P.attributes.name).match(/^description|keywords$/))return!0;if(x.headMetaSocial&&(me(P.attributes.property).match(/^(og|twitter|fb):/)||me(P.attributes.name).match(/^(og|twitter):/)||me(P.attributes.name)==="pinterest"))return!0;if(x.headMetaRobots&&(me(P.attributes.name)==="robots"||me(P.attributes.name)==="googlebot"||me(P.attributes.name)==="bingbot"))return!0;if(x.headMetaHttpEquiv&&P.attributes["http-equiv"]!==void 0)return!0;if(x.headMetaAuthorship&&(me(P.attributes.name)==="author"||me(P.attributes.name)==="generator"||me(P.attributes.name)==="framework"||me(P.attributes.name)==="publisher"||me(P.attributes.name)==="progid"||me(P.attributes.property).match(/^article:/)||me(P.attributes.property).match(/^product:/)))return!0;if(x.headMetaVerification&&(me(P.attributes.name)==="google-site-verification"||me(P.attributes.name)==="yandex-verification"||me(P.attributes.name)==="csrf-token"||me(P.attributes.name)==="p:domain_verify"||me(P.attributes.name)==="verify-v1"||me(P.attributes.name)==="verification"||me(P.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}r(Me,"slimDOMExcluded");function k(P,x){const{doc:W,mirror:Z,blockClass:ce,blockSelector:De,unblockSelector:$e,maskAllText:ut,maskTextClass:tt,unmaskTextClass:Ot,maskTextSelector:vt,unmaskTextSelector:Wt,skipChild:qt=!1,inlineStylesheet:fn=!0,maskInputOptions:In={},maskAttributeFn:Qn,maskTextFn:Oi,maskInputFn:ri,slimDOMOptions:Gi,dataURLOptions:lr={},inlineImages:dr=!1,recordCanvas:Lr=!1,onSerialize:Ni,onIframeLoad:ei,iframeLoadTimeout:tr=5e3,onStylesheetLoad:zr,stylesheetLoadTimeout:ti=5e3,keepIframeSrcFn:ji=r(()=>!1,"keepIframeSrcFn"),newlyAddedElement:Dr=!1}=x;let{preserveWhiteSpace:to=!0}=x;const po=Ee(P,{doc:W,mirror:Z,blockClass:ce,blockSelector:De,maskAllText:ut,unblockSelector:$e,maskTextClass:tt,unmaskTextClass:Ot,maskTextSelector:vt,unmaskTextSelector:Wt,inlineStylesheet:fn,maskInputOptions:In,maskAttributeFn:Qn,maskTextFn:Oi,maskInputFn:ri,dataURLOptions:lr,inlineImages:dr,recordCanvas:Lr,keepIframeSrcFn:ji,newlyAddedElement:Dr});if(!po)return console.warn(P,"not serialized"),null;let Mo;Z.hasNode(P)?Mo=Z.getId(P):Me(po,Gi)||!to&&po.type===V.Text&&!po.isStyle&&!po.textContent.replace(/^\s+|\s+$/gm,"").length?Mo=Gt:Mo=Xt();const br=Object.assign(po,{id:Mo});if(Z.add(P,br),Mo===Gt)return null;Ni&&Ni(P);let Lo=!qt;if(br.type===V.Element){Lo=Lo&&!br.needBlock,delete br.needBlock;const mo=P.shadowRoot;mo&&Y(mo)&&(br.isShadowHost=!0)}if((br.type===V.Document||br.type===V.Element)&&Lo){Gi.headWhitespace&&br.type===V.Element&&br.tagName==="head"&&(to=!1);const mo={doc:W,mirror:Z,blockClass:ce,blockSelector:De,maskAllText:ut,unblockSelector:$e,maskTextClass:tt,unmaskTextClass:Ot,maskTextSelector:vt,unmaskTextSelector:Wt,skipChild:qt,inlineStylesheet:fn,maskInputOptions:In,maskAttributeFn:Qn,maskTextFn:Oi,maskInputFn:ri,slimDOMOptions:Gi,dataURLOptions:lr,inlineImages:dr,recordCanvas:Lr,preserveWhiteSpace:to,onSerialize:Ni,onIframeLoad:ei,iframeLoadTimeout:tr,onStylesheetLoad:zr,stylesheetLoadTimeout:ti,keepIframeSrcFn:ji};for(const qo of Array.from(P.childNodes)){const ys=k(qo,mo);ys&&br.childNodes.push(ys)}if($(P)&&P.shadowRoot)for(const qo of Array.from(P.shadowRoot.childNodes)){const ys=k(qo,mo);ys&&(Y(P.shadowRoot)&&(ys.isShadow=!0),br.childNodes.push(ys))}}return P.parentNode&&X(P.parentNode)&&Y(P.parentNode)&&(br.isShadow=!0),br.type===V.Element&&br.tagName==="iframe"&&Q(P,()=>{const mo=P.contentDocument;if(mo&&ei){const qo=k(mo,{doc:mo,mirror:Z,blockClass:ce,blockSelector:De,unblockSelector:$e,maskAllText:ut,maskTextClass:tt,unmaskTextClass:Ot,maskTextSelector:vt,unmaskTextSelector:Wt,skipChild:!1,inlineStylesheet:fn,maskInputOptions:In,maskAttributeFn:Qn,maskTextFn:Oi,maskInputFn:ri,slimDOMOptions:Gi,dataURLOptions:lr,inlineImages:dr,recordCanvas:Lr,preserveWhiteSpace:to,onSerialize:Ni,onIframeLoad:ei,iframeLoadTimeout:tr,onStylesheetLoad:zr,stylesheetLoadTimeout:ti,keepIframeSrcFn:ji});qo&&ei(P,qo)}},tr),br.type===V.Element&&br.tagName==="link"&&br.attributes.rel==="stylesheet"&&ye(P,()=>{if(zr){const mo=k(P,{doc:W,mirror:Z,blockClass:ce,blockSelector:De,unblockSelector:$e,maskAllText:ut,maskTextClass:tt,unmaskTextClass:Ot,maskTextSelector:vt,unmaskTextSelector:Wt,skipChild:!1,inlineStylesheet:fn,maskInputOptions:In,maskAttributeFn:Qn,maskTextFn:Oi,maskInputFn:ri,slimDOMOptions:Gi,dataURLOptions:lr,inlineImages:dr,recordCanvas:Lr,preserveWhiteSpace:to,onSerialize:Ni,onIframeLoad:ei,iframeLoadTimeout:tr,onStylesheetLoad:zr,stylesheetLoadTimeout:ti,keepIframeSrcFn:ji});mo&&zr(P,mo)}},ti),br}r(k,"serializeNodeWithId");function Se(P,x){const{mirror:W=new Fe,blockClass:Z="rr-block",blockSelector:ce=null,unblockSelector:De=null,maskAllText:$e=!1,maskTextClass:ut="rr-mask",unmaskTextClass:tt=null,maskTextSelector:Ot=null,unmaskTextSelector:vt=null,inlineStylesheet:Wt=!0,inlineImages:qt=!1,recordCanvas:fn=!1,maskAllInputs:In=!1,maskAttributeFn:Qn,maskTextFn:Oi,maskInputFn:ri,slimDOM:Gi=!1,dataURLOptions:lr,preserveWhiteSpace:dr,onSerialize:Lr,onIframeLoad:Ni,iframeLoadTimeout:ei,onStylesheetLoad:tr,stylesheetLoadTimeout:zr,keepIframeSrcFn:ti=r(()=>!1,"keepIframeSrcFn")}=x||{};return k(P,{doc:P,mirror:W,blockClass:Z,blockSelector:ce,unblockSelector:De,maskAllText:$e,maskTextClass:ut,unmaskTextClass:tt,maskTextSelector:Ot,unmaskTextSelector:vt,skipChild:!1,inlineStylesheet:Wt,maskInputOptions:In===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:In===!1?{}:In,maskAttributeFn:Qn,maskTextFn:Oi,maskInputFn:ri,slimDOMOptions:Gi===!0||Gi==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Gi==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Gi===!1?{}:Gi,dataURLOptions:lr,inlineImages:qt,recordCanvas:fn,preserveWhiteSpace:dr,onSerialize:Lr,onIframeLoad:Ni,iframeLoadTimeout:ei,onStylesheetLoad:tr,stylesheetLoadTimeout:zr,keepIframeSrcFn:ti,newlyAddedElement:!1})}r(Se,"snapshot");function be(P){let x,W=P[0],Z=1;for(;Z<P.length;){const ce=P[Z],De=P[Z+1];if(Z+=2,(ce==="optionalAccess"||ce==="optionalCall")&&W==null)return;ce==="access"||ce==="optionalAccess"?(x=W,W=De(W)):(ce==="call"||ce==="optionalCall")&&(W=De((...$e)=>W.call(x,...$e)),x=void 0)}return W}r(be,"_optionalChain$4");function we(P,x,W=document){const Z={capture:!0,passive:!0};return W.addEventListener(P,x,Z),()=>W.removeEventListener(P,x,Z)}r(we,"on");const ee=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let en={map:{},getId(){return console.error(ee),-1},getNode(){return console.error(ee),null},removeNodeFromMap(){console.error(ee)},has(){return console.error(ee),!1},reset(){console.error(ee)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(en=new Proxy(en,{get(P,x,W){return x==="map"&&console.error(ee),Reflect.get(P,x,W)}}));function dt(P,x,W={}){let Z=null,ce=0;return function(...De){const $e=Date.now();!ce&&W.leading===!1&&(ce=$e);const ut=x-($e-ce),tt=this;ut<=0||ut>x?(Z&&(Ar(Z),Z=null),ce=$e,P.apply(tt,De)):!Z&&W.trailing!==!1&&(Z=Li(()=>{ce=W.leading===!1?0:Date.now(),Z=null,P.apply(tt,De)},ut))}}r(dt,"throttle$1");function Ct(P,x,W,Z,ce=window){const De=ce.Object.getOwnPropertyDescriptor(P,x);return ce.Object.defineProperty(P,x,Z?W:{set($e){Li(()=>{W.set.call(this,$e)},0),De&&De.set&&De.set.call(this,$e)}}),()=>Ct(P,x,De||{},!0)}r(Ct,"hookSetter");function xn(P,x,W){try{if(!(x in P))return()=>{};const Z=P[x],ce=W(Z);return typeof ce=="function"&&(ce.prototype=ce.prototype||{},Object.defineProperties(ce,{__rrweb_original__:{enumerable:!1,value:Z}})),P[x]=ce,()=>{P[x]=Z}}catch{return()=>{}}}r(xn,"patch");let Qt=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Qt=r(()=>new Date().getTime(),"nowTimestamp"));function Xi(P){const x=P.document;return{left:x.scrollingElement?x.scrollingElement.scrollLeft:P.pageXOffset!==void 0?P.pageXOffset:be([x,"optionalAccess",W=>W.documentElement,"access",W=>W.scrollLeft])||be([x,"optionalAccess",W=>W.body,"optionalAccess",W=>W.parentElement,"optionalAccess",W=>W.scrollLeft])||be([x,"optionalAccess",W=>W.body,"optionalAccess",W=>W.scrollLeft])||0,top:x.scrollingElement?x.scrollingElement.scrollTop:P.pageYOffset!==void 0?P.pageYOffset:be([x,"optionalAccess",W=>W.documentElement,"access",W=>W.scrollTop])||be([x,"optionalAccess",W=>W.body,"optionalAccess",W=>W.parentElement,"optionalAccess",W=>W.scrollTop])||be([x,"optionalAccess",W=>W.body,"optionalAccess",W=>W.scrollTop])||0}}r(Xi,"getWindowScroll");function Pi(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}r(Pi,"getWindowHeight");function Kn(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}r(Kn,"getWindowWidth");function ni(P){return P?P.nodeType===P.ELEMENT_NODE?P:P.parentElement:null}r(ni,"closestElementOfNode");function Mn(P,x,W,Z,ce){if(!P)return!1;const De=ni(P);if(!De)return!1;const $e=Ue(x,W);if(!ce){const Ot=Z&&De.matches(Z);return $e(De)&&!Ot}const ut=le(De,$e);let tt=-1;return ut<0?!1:(Z&&(tt=le(De,Ue(null,Z))),ut>-1&&tt<0?!0:ut<tt)}r(Mn,"isBlocked");function qn(P,x){return x.getId(P)!==-1}r(qn,"isSerialized");function bi(P,x){return x.getId(P)===Gt}r(bi,"isIgnored");function xr(P,x){if(X(P))return!1;const W=x.getId(P);return x.has(W)?P.parentNode&&P.parentNode.nodeType===P.DOCUMENT_NODE?!1:P.parentNode?xr(P.parentNode,x):!0:!0}r(xr,"isAncestorRemoved");function Zt(P){return Boolean(P.changedTouches)}r(Zt,"legacy_isTouchEvent");function Nt(P=window){"NodeList"in P&&!P.NodeList.prototype.forEach&&(P.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in P&&!P.DOMTokenList.prototype.forEach&&(P.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...x)=>{let W=x[0];if(!(0 in x))throw new TypeError("1 argument is required");do if(this===W)return!0;while(W=W&&W.parentNode);return!1})}r(Nt,"polyfill");function On(P,x){return Boolean(P.nodeName==="IFRAME"&&x.getMeta(P))}r(On,"isSerializedIframe");function _n(P,x){return Boolean(P.nodeName==="LINK"&&P.nodeType===P.ELEMENT_NODE&&P.getAttribute&&P.getAttribute("rel")==="stylesheet"&&x.getMeta(P))}r(_n,"isSerializedStylesheet");function si(P){return Boolean(be([P,"optionalAccess",x=>x.shadowRoot]))}r(si,"hasShadowRoot");class vi{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(x){return f(this.styleIDMap.get(x),()=>-1)}has(x){return this.styleIDMap.has(x)}add(x,W){if(this.has(x))return this.getId(x);let Z;return W===void 0?Z=this.id++:Z=W,this.styleIDMap.set(x,Z),this.idStyleMap.set(Z,x),Z}getStyle(x){return this.idStyleMap.get(x)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}r(vi,"StyleSheetMirror");function Mi(P){let x=null;return be([P,"access",W=>W.getRootNode,"optionalCall",W=>W(),"optionalAccess",W=>W.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&P.getRootNode().host&&(x=P.getRootNode().host),x}r(Mi,"getShadowHost");function ui(P){let x=P,W;for(;W=Mi(x);)x=W;return x}r(ui,"getRootShadowHost");function Ii(P){const x=P.ownerDocument;if(!x)return!1;const W=ui(P);return x.contains(W)}r(Ii,"shadowHostInDom");function wi(P){const x=P.ownerDocument;return x?x.contains(P)||Ii(P):!1}r(wi,"inDom");const Ui={};function ii(P){const x=Ui[P];if(x)return x;const W=window.document;let Z=window[P];if(W&&typeof W.createElement=="function")try{const ce=W.createElement("iframe");ce.hidden=!0,W.head.appendChild(ce);const De=ce.contentWindow;De&&De[P]&&(Z=De[P]),W.head.removeChild(ce)}catch{}return Ui[P]=Z.bind(window)}r(ii,"getImplementation");function fr(...P){return ii("requestAnimationFrame")(...P)}r(fr,"onRequestAnimationFrame");function Li(...P){return ii("setTimeout")(...P)}r(Li,"setTimeout$1");function Ar(...P){return ii("clearTimeout")(...P)}r(Ar,"clearTimeout$1");var Zn=(P=>(P[P.DomContentLoaded=0]="DomContentLoaded",P[P.Load=1]="Load",P[P.FullSnapshot=2]="FullSnapshot",P[P.IncrementalSnapshot=3]="IncrementalSnapshot",P[P.Meta=4]="Meta",P[P.Custom=5]="Custom",P[P.Plugin=6]="Plugin",P))(Zn||{}),N=(P=>(P[P.Mutation=0]="Mutation",P[P.MouseMove=1]="MouseMove",P[P.MouseInteraction=2]="MouseInteraction",P[P.Scroll=3]="Scroll",P[P.ViewportResize=4]="ViewportResize",P[P.Input=5]="Input",P[P.TouchMove=6]="TouchMove",P[P.MediaInteraction=7]="MediaInteraction",P[P.StyleSheetRule=8]="StyleSheetRule",P[P.CanvasMutation=9]="CanvasMutation",P[P.Font=10]="Font",P[P.Log=11]="Log",P[P.Drag=12]="Drag",P[P.StyleDeclaration=13]="StyleDeclaration",P[P.Selection=14]="Selection",P[P.AdoptedStyleSheet=15]="AdoptedStyleSheet",P[P.CustomElement=16]="CustomElement",P))(N||{}),oe=(P=>(P[P.MouseUp=0]="MouseUp",P[P.MouseDown=1]="MouseDown",P[P.Click=2]="Click",P[P.ContextMenu=3]="ContextMenu",P[P.DblClick=4]="DblClick",P[P.Focus=5]="Focus",P[P.Blur=6]="Blur",P[P.TouchStart=7]="TouchStart",P[P.TouchMove_Departed=8]="TouchMove_Departed",P[P.TouchEnd=9]="TouchEnd",P[P.TouchCancel=10]="TouchCancel",P))(oe||{}),Re=(P=>(P[P.Mouse=0]="Mouse",P[P.Pen=1]="Pen",P[P.Touch=2]="Touch",P))(Re||{});function nt(P){let x,W=P[0],Z=1;for(;Z<P.length;){const ce=P[Z],De=P[Z+1];if(Z+=2,(ce==="optionalAccess"||ce==="optionalCall")&&W==null)return;ce==="access"||ce==="optionalAccess"?(x=W,W=De(W)):(ce==="call"||ce==="optionalCall")&&(W=De((...$e)=>W.call(x,...$e)),x=void 0)}return W}r(nt,"_optionalChain$3");function Pt(P){return"__ln"in P}r(Pt,"isNodeInLinkedList");class En{constructor(){this.length=0,this.head=null,this.tail=null}get(x){if(x>=this.length)throw new Error("Position outside of list range");let W=this.head;for(let Z=0;Z<x;Z++)W=nt([W,"optionalAccess",ce=>ce.next])||null;return W}addNode(x){const W={value:x,previous:null,next:null};if(x.__ln=W,x.previousSibling&&Pt(x.previousSibling)){const Z=x.previousSibling.__ln.next;W.next=Z,W.previous=x.previousSibling.__ln,x.previousSibling.__ln.next=W,Z&&(Z.previous=W)}else if(x.nextSibling&&Pt(x.nextSibling)&&x.nextSibling.__ln.previous){const Z=x.nextSibling.__ln.previous;W.previous=Z,W.next=x.nextSibling.__ln,x.nextSibling.__ln.previous=W,Z&&(Z.next=W)}else this.head&&(this.head.previous=W),W.next=this.head,this.head=W;W.next===null&&(this.tail=W),this.length++}removeNode(x){const W=x.__ln;this.head&&(W.previous?(W.previous.next=W.next,W.next?W.next.previous=W.previous:this.tail=W.previous):(this.head=W.next,this.head?this.head.previous=null:this.tail=null),x.__ln&&delete x.__ln,this.length--)}}r(En,"DoubleLinkedList");const wn=r((P,x)=>`${P}@${x}`,"moveKey");class vn{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=x=>{x.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const x=[],W=new Set,Z=new En,ce=r(tt=>{let Ot=tt,vt=Gt;for(;vt===Gt;)Ot=Ot&&Ot.nextSibling,vt=Ot&&this.mirror.getId(Ot);return vt},"getNextId"),De=r(tt=>{if(!tt.parentNode||!wi(tt))return;const Ot=X(tt.parentNode)?this.mirror.getId(Mi(tt)):this.mirror.getId(tt.parentNode),vt=ce(tt);if(Ot===-1||vt===-1)return Z.addNode(tt);const Wt=k(tt,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:qt=>{On(qt,this.mirror)&&this.iframeManager.addIframe(qt),_n(qt,this.mirror)&&this.stylesheetManager.trackLinkElement(qt),si(tt)&&this.shadowDomManager.addShadowRoot(tt.shadowRoot,this.doc)},onIframeLoad:(qt,fn)=>{this.iframeManager.attachIframe(qt,fn),this.shadowDomManager.observeAttachShadow(qt)},onStylesheetLoad:(qt,fn)=>{this.stylesheetManager.attachLinkElement(qt,fn)}});Wt&&(x.push({parentId:Ot,nextId:vt,node:Wt}),W.add(Wt.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const tt of this.movedSet)Rn(this.removes,tt,this.mirror)&&!this.movedSet.has(tt.parentNode)||De(tt);for(const tt of this.addedSet)!yi(this.droppedSet,tt)&&!Rn(this.removes,tt,this.mirror)||yi(this.movedSet,tt)?De(tt):this.droppedSet.add(tt);let $e=null;for(;Z.length;){let tt=null;if($e){const Ot=this.mirror.getId($e.value.parentNode),vt=ce($e.value);Ot!==-1&&vt!==-1&&(tt=$e)}if(!tt){let Ot=Z.tail;for(;Ot;){const vt=Ot;if(Ot=Ot.previous,vt){const Wt=this.mirror.getId(vt.value.parentNode);if(ce(vt.value)===-1)continue;if(Wt!==-1){tt=vt;break}else{const fn=vt.value;if(fn.parentNode&&fn.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const In=fn.parentNode.host;if(this.mirror.getId(In)!==-1){tt=vt;break}}}}}}if(!tt){for(;Z.head;)Z.removeNode(Z.head.value);break}$e=tt.previous,Z.removeNode(tt.value),De(tt.value)}const ut={texts:this.texts.map(tt=>({id:this.mirror.getId(tt.node),value:tt.value})).filter(tt=>!W.has(tt.id)).filter(tt=>this.mirror.has(tt.id)),attributes:this.attributes.map(tt=>{const{attributes:Ot}=tt;if(typeof Ot.style=="string"){const vt=JSON.stringify(tt.styleDiff),Wt=JSON.stringify(tt._unchangedStyles);vt.length<Ot.style.length&&(vt+Wt).split("var(").length===Ot.style.split("var(").length&&(Ot.style=tt.styleDiff)}return{id:this.mirror.getId(tt.node),attributes:Ot}}).filter(tt=>!W.has(tt.id)).filter(tt=>this.mirror.has(tt.id)),removes:this.removes,adds:x};!ut.texts.length&&!ut.attributes.length&&!ut.removes.length&&!ut.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(ut))},this.processMutation=x=>{if(!bi(x.target,this.mirror))switch(x.type){case"characterData":{const W=x.target.textContent;!Mn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&W!==x.oldValue&&this.texts.push({value:G(x.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&W?this.maskTextFn?this.maskTextFn(W,ni(x.target)):W.replace(/[\S]/g,"*"):W,node:x.target});break}case"attributes":{const W=x.target;let Z=x.attributeName,ce=x.target.getAttribute(Z);if(Z==="value"){const $e=et(W),ut=W.tagName;ce=rt(W,ut,$e);const tt=Ge({maskInputOptions:this.maskInputOptions,tagName:ut,type:$e}),Ot=G(x.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,tt);ce=it({isMasked:Ot,element:W,value:ce,maskInputFn:this.maskInputFn})}if(Mn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ce===x.oldValue)return;let De=this.attributeMap.get(x.target);if(W.tagName==="IFRAME"&&Z==="src"&&!this.keepIframeSrcFn(ce))if(!W.contentDocument)Z="rr_src";else return;if(De||(De={node:x.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(De),this.attributeMap.set(x.target,De)),Z==="type"&&W.tagName==="INPUT"&&(x.oldValue||"").toLowerCase()==="password"&&W.setAttribute("data-rr-is-password","true"),!Je(W.tagName,Z)&&(De.attributes[Z]=He(this.doc,Dt(W.tagName),Dt(Z),ce,W,this.maskAttributeFn),Z==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const $e=this.unattachedDoc.createElement("span");x.oldValue&&$e.setAttribute("style",x.oldValue);for(const ut of Array.from(W.style)){const tt=W.style.getPropertyValue(ut),Ot=W.style.getPropertyPriority(ut);tt!==$e.style.getPropertyValue(ut)||Ot!==$e.style.getPropertyPriority(ut)?Ot===""?De.styleDiff[ut]=tt:De.styleDiff[ut]=[tt,Ot]:De._unchangedStyles[ut]=[tt,Ot]}for(const ut of Array.from($e.style))W.style.getPropertyValue(ut)===""&&(De.styleDiff[ut]=!1)}break}case"childList":{if(Mn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;x.addedNodes.forEach(W=>this.genAdds(W,x.target)),x.removedNodes.forEach(W=>{const Z=this.mirror.getId(W),ce=X(x.target)?this.mirror.getId(x.target.host):this.mirror.getId(x.target);Mn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||bi(W,this.mirror)||!qn(W,this.mirror)||(this.addedSet.has(W)?(yn(this.addedSet,W),this.droppedSet.add(W)):this.addedSet.has(x.target)&&Z===-1||xr(x.target,this.mirror)||(this.movedSet.has(W)&&this.movedMap[wn(Z,ce)]?yn(this.movedSet,W):this.removes.push({parentId:ce,id:Z,isShadow:X(x.target)&&Y(x.target)?!0:void 0})),this.mapRemoves.push(W))});break}}},this.genAdds=(x,W)=>{if(!this.processedNodeManager.inOtherBuffer(x,this)&&!(this.addedSet.has(x)||this.movedSet.has(x))){if(this.mirror.hasNode(x)){if(bi(x,this.mirror))return;this.movedSet.add(x);let Z=null;W&&this.mirror.hasNode(W)&&(Z=this.mirror.getId(W)),Z&&Z!==-1&&(this.movedMap[wn(this.mirror.getId(x),Z)]=!0)}else this.addedSet.add(x),this.droppedSet.delete(x);Mn(x,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(x.childNodes.forEach(Z=>this.genAdds(Z)),si(x)&&x.shadowRoot.childNodes.forEach(Z=>{this.processedNodeManager.add(Z,this),this.genAdds(Z,x)}))}}}init(x){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(W=>{this[W]=x[W]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}r(vn,"MutationBuffer");function yn(P,x){P.delete(x),x.childNodes.forEach(W=>yn(P,W))}r(yn,"deepDelete");function Rn(P,x,W){return P.length===0?!1:Fn(P,x,W)}r(Rn,"isParentRemoved");function Fn(P,x,W){const{parentNode:Z}=x;if(!Z)return!1;const ce=W.getId(Z);return P.some(De=>De.id===ce)?!0:Fn(P,Z,W)}r(Fn,"_isParentRemoved");function yi(P,x){return P.size===0?!1:fi(P,x)}r(yi,"isAncestorInSet");function fi(P,x){const{parentNode:W}=x;return W?P.has(W)?!0:fi(P,W):!1}r(fi,"_isAncestorInSet");let Wi;function Zr(P){Wi=P}r(Zr,"registerErrorHandler");function gr(){Wi=void 0}r(gr,"unregisterErrorHandler");const Un=r(P=>Wi?r((...W)=>{try{return P(...W)}catch(Z){if(Wi&&Wi(Z)===!0)return()=>{};throw Z}},"rrwebWrapped"):P,"callbackWrapper");function hr(P){let x,W=P[0],Z=1;for(;Z<P.length;){const ce=P[Z],De=P[Z+1];if(Z+=2,(ce==="optionalAccess"||ce==="optionalCall")&&W==null)return;ce==="access"||ce==="optionalAccess"?(x=W,W=De(W)):(ce==="call"||ce==="optionalCall")&&(W=De((...$e)=>W.call(x,...$e)),x=void 0)}return W}r(hr,"_optionalChain$2");const ar=[];function pn(P){try{if("composedPath"in P){const x=P.composedPath();if(x.length)return x[0]}else if("path"in P&&P.path.length)return P.path[0]}catch{}return P&&P.target}r(pn,"getEventTarget");function Sr(P,x){const W=new vn;ar.push(W),W.init(P);let Z=window.MutationObserver||window.__rrMutationObserver;const ce=hr([window,"optionalAccess",$e=>$e.Zone,"optionalAccess",$e=>$e.__symbol__,"optionalCall",$e=>$e("MutationObserver")]);ce&&window[ce]&&(Z=window[ce]);const De=new Z(Un($e=>{P.onMutation&&P.onMutation($e)===!1||W.processMutations.bind(W)($e)}));return De.observe(x,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),De}r(Sr,"initMutationObserver");function Pn({mousemoveCb:P,sampling:x,doc:W,mirror:Z}){if(x.mousemove===!1)return()=>{};const ce=typeof x.mousemove=="number"?x.mousemove:50,De=typeof x.mousemoveCallback=="number"?x.mousemoveCallback:500;let $e=[],ut;const tt=dt(Un(Wt=>{const qt=Date.now()-ut;P($e.map(fn=>(fn.timeOffset-=qt,fn)),Wt),$e=[],ut=null}),De),Ot=Un(dt(Un(Wt=>{const qt=pn(Wt),{clientX:fn,clientY:In}=Zt(Wt)?Wt.changedTouches[0]:Wt;ut||(ut=Qt()),$e.push({x:fn,y:In,id:Z.getId(qt),timeOffset:Qt()-ut}),tt(typeof DragEvent<"u"&&Wt instanceof DragEvent?N.Drag:Wt instanceof MouseEvent?N.MouseMove:N.TouchMove)}),ce,{trailing:!1})),vt=[we("mousemove",Ot,W),we("touchmove",Ot,W),we("drag",Ot,W)];return Un(()=>{vt.forEach(Wt=>Wt())})}r(Pn,"initMoveObserver");function so({mouseInteractionCb:P,doc:x,mirror:W,blockClass:Z,blockSelector:ce,unblockSelector:De,sampling:$e}){if($e.mouseInteraction===!1)return()=>{};const ut=$e.mouseInteraction===!0||$e.mouseInteraction===void 0?{}:$e.mouseInteraction,tt=[];let Ot=null;const vt=r(Wt=>qt=>{const fn=pn(qt);if(Mn(fn,Z,ce,De,!0))return;let In=null,Qn=Wt;if("pointerType"in qt){switch(qt.pointerType){case"mouse":In=Re.Mouse;break;case"touch":In=Re.Touch;break;case"pen":In=Re.Pen;break}In===Re.Touch?oe[Wt]===oe.MouseDown?Qn="TouchStart":oe[Wt]===oe.MouseUp&&(Qn="TouchEnd"):Re.Pen}else Zt(qt)&&(In=Re.Touch);In!==null?(Ot=In,(Qn.startsWith("Touch")&&In===Re.Touch||Qn.startsWith("Mouse")&&In===Re.Mouse)&&(In=null)):oe[Wt]===oe.Click&&(In=Ot,Ot=null);const Oi=Zt(qt)?qt.changedTouches[0]:qt;if(!Oi)return;const ri=W.getId(fn),{clientX:Gi,clientY:lr}=Oi;Un(P)({type:oe[Qn],id:ri,x:Gi,y:lr,...In!==null&&{pointerType:In}})},"getHandler");return Object.keys(oe).filter(Wt=>Number.isNaN(Number(Wt))&&!Wt.endsWith("_Departed")&&ut[Wt]!==!1).forEach(Wt=>{let qt=Dt(Wt);const fn=vt(Wt);if(window.PointerEvent)switch(oe[Wt]){case oe.MouseDown:case oe.MouseUp:qt=qt.replace("mouse","pointer");break;case oe.TouchStart:case oe.TouchEnd:return}tt.push(we(qt,fn,x))}),Un(()=>{tt.forEach(Wt=>Wt())})}r(so,"initMouseInteractionObserver");function Wr({scrollCb:P,doc:x,mirror:W,blockClass:Z,blockSelector:ce,unblockSelector:De,sampling:$e}){const ut=Un(dt(Un(tt=>{const Ot=pn(tt);if(!Ot||Mn(Ot,Z,ce,De,!0))return;const vt=W.getId(Ot);if(Ot===x&&x.defaultView){const Wt=Xi(x.defaultView);P({id:vt,x:Wt.left,y:Wt.top})}else P({id:vt,x:Ot.scrollLeft,y:Ot.scrollTop})}),$e.scroll||100));return we("scroll",ut,x)}r(Wr,"initScrollObserver");function $r({viewportResizeCb:P},{win:x}){let W=-1,Z=-1;const ce=Un(dt(Un(()=>{const De=Pi(),$e=Kn();(W!==De||Z!==$e)&&(P({width:Number($e),height:Number(De)}),W=De,Z=$e)}),200));return we("resize",ce,x)}r($r,"initViewportResizeObserver");const yo=["INPUT","TEXTAREA","SELECT"],ue=new WeakMap;function ve({inputCb:P,doc:x,mirror:W,blockClass:Z,blockSelector:ce,unblockSelector:De,ignoreClass:$e,ignoreSelector:ut,maskInputOptions:tt,maskInputFn:Ot,sampling:vt,userTriggeredOnInput:Wt,maskTextClass:qt,unmaskTextClass:fn,maskTextSelector:In,unmaskTextSelector:Qn}){function Oi(ei){let tr=pn(ei);const zr=ei.isTrusted,ti=tr&&wt(tr.tagName);if(ti==="OPTION"&&(tr=tr.parentElement),!tr||!ti||yo.indexOf(ti)<0||Mn(tr,Z,ce,De,!0))return;const ji=tr;if(ji.classList.contains($e)||ut&&ji.matches(ut))return;const Dr=et(tr);let to=rt(ji,ti,Dr),po=!1;const Mo=Ge({maskInputOptions:tt,tagName:ti,type:Dr}),br=G(tr,qt,In,fn,Qn,Mo);(Dr==="radio"||Dr==="checkbox")&&(po=tr.checked),to=it({isMasked:br,element:tr,value:to,maskInputFn:Ot}),ri(tr,Wt?{text:to,isChecked:po,userTriggered:zr}:{text:to,isChecked:po});const Lo=tr.name;Dr==="radio"&&Lo&&po&&x.querySelectorAll(`input[type="radio"][name="${Lo}"]`).forEach(mo=>{if(mo!==tr){const qo=it({isMasked:br,element:mo,value:rt(mo,ti,Dr),maskInputFn:Ot});ri(mo,Wt?{text:qo,isChecked:!po,userTriggered:!1}:{text:qo,isChecked:!po})}})}r(Oi,"eventHandler");function ri(ei,tr){const zr=ue.get(ei);if(!zr||zr.text!==tr.text||zr.isChecked!==tr.isChecked){ue.set(ei,tr);const ti=W.getId(ei);Un(P)({...tr,id:ti})}}r(ri,"cbWithDedup");const lr=(vt.input==="last"?["change"]:["input","change"]).map(ei=>we(ei,Un(Oi),x)),dr=x.defaultView;if(!dr)return()=>{lr.forEach(ei=>ei())};const Lr=dr.Object.getOwnPropertyDescriptor(dr.HTMLInputElement.prototype,"value"),Ni=[[dr.HTMLInputElement.prototype,"value"],[dr.HTMLInputElement.prototype,"checked"],[dr.HTMLSelectElement.prototype,"value"],[dr.HTMLTextAreaElement.prototype,"value"],[dr.HTMLSelectElement.prototype,"selectedIndex"],[dr.HTMLOptionElement.prototype,"selected"]];return Lr&&Lr.set&&lr.push(...Ni.map(ei=>Ct(ei[0],ei[1],{set(){Un(Oi)({target:this,isTrusted:!1})}},!1,dr))),Un(()=>{lr.forEach(ei=>ei())})}r(ve,"initInputObserver");function Le(P){const x=[];function W(Z,ce){if(hi("CSSGroupingRule")&&Z.parentRule instanceof CSSGroupingRule||hi("CSSMediaRule")&&Z.parentRule instanceof CSSMediaRule||hi("CSSSupportsRule")&&Z.parentRule instanceof CSSSupportsRule||hi("CSSConditionRule")&&Z.parentRule instanceof CSSConditionRule){const $e=Array.from(Z.parentRule.cssRules).indexOf(Z);ce.unshift($e)}else if(Z.parentStyleSheet){const $e=Array.from(Z.parentStyleSheet.cssRules).indexOf(Z);ce.unshift($e)}return ce}return r(W,"recurse"),W(P,x)}r(Le,"getNestedCSSRulePositions");function at(P,x,W){let Z,ce;return P?(P.ownerNode?Z=x.getId(P.ownerNode):ce=W.getId(P),{styleId:ce,id:Z}):{}}r(at,"getIdAndStyleId");function gt({styleSheetRuleCb:P,mirror:x,stylesheetManager:W},{win:Z}){if(!Z.CSSStyleSheet||!Z.CSSStyleSheet.prototype)return()=>{};const ce=Z.CSSStyleSheet.prototype.insertRule;Z.CSSStyleSheet.prototype.insertRule=new Proxy(ce,{apply:Un((vt,Wt,qt)=>{const[fn,In]=qt,{id:Qn,styleId:Oi}=at(Wt,x,W.styleMirror);return(Qn&&Qn!==-1||Oi&&Oi!==-1)&&P({id:Qn,styleId:Oi,adds:[{rule:fn,index:In}]}),vt.apply(Wt,qt)})});const De=Z.CSSStyleSheet.prototype.deleteRule;Z.CSSStyleSheet.prototype.deleteRule=new Proxy(De,{apply:Un((vt,Wt,qt)=>{const[fn]=qt,{id:In,styleId:Qn}=at(Wt,x,W.styleMirror);return(In&&In!==-1||Qn&&Qn!==-1)&&P({id:In,styleId:Qn,removes:[{index:fn}]}),vt.apply(Wt,qt)})});let $e;Z.CSSStyleSheet.prototype.replace&&($e=Z.CSSStyleSheet.prototype.replace,Z.CSSStyleSheet.prototype.replace=new Proxy($e,{apply:Un((vt,Wt,qt)=>{const[fn]=qt,{id:In,styleId:Qn}=at(Wt,x,W.styleMirror);return(In&&In!==-1||Qn&&Qn!==-1)&&P({id:In,styleId:Qn,replace:fn}),vt.apply(Wt,qt)})}));let ut;Z.CSSStyleSheet.prototype.replaceSync&&(ut=Z.CSSStyleSheet.prototype.replaceSync,Z.CSSStyleSheet.prototype.replaceSync=new Proxy(ut,{apply:Un((vt,Wt,qt)=>{const[fn]=qt,{id:In,styleId:Qn}=at(Wt,x,W.styleMirror);return(In&&In!==-1||Qn&&Qn!==-1)&&P({id:In,styleId:Qn,replaceSync:fn}),vt.apply(Wt,qt)})}));const tt={};An("CSSGroupingRule")?tt.CSSGroupingRule=Z.CSSGroupingRule:(An("CSSMediaRule")&&(tt.CSSMediaRule=Z.CSSMediaRule),An("CSSConditionRule")&&(tt.CSSConditionRule=Z.CSSConditionRule),An("CSSSupportsRule")&&(tt.CSSSupportsRule=Z.CSSSupportsRule));const Ot={};return Object.entries(tt).forEach(([vt,Wt])=>{Ot[vt]={insertRule:Wt.prototype.insertRule,deleteRule:Wt.prototype.deleteRule},Wt.prototype.insertRule=new Proxy(Ot[vt].insertRule,{apply:Un((qt,fn,In)=>{const[Qn,Oi]=In,{id:ri,styleId:Gi}=at(fn.parentStyleSheet,x,W.styleMirror);return(ri&&ri!==-1||Gi&&Gi!==-1)&&P({id:ri,styleId:Gi,adds:[{rule:Qn,index:[...Le(fn),Oi||0]}]}),qt.apply(fn,In)})}),Wt.prototype.deleteRule=new Proxy(Ot[vt].deleteRule,{apply:Un((qt,fn,In)=>{const[Qn]=In,{id:Oi,styleId:ri}=at(fn.parentStyleSheet,x,W.styleMirror);return(Oi&&Oi!==-1||ri&&ri!==-1)&&P({id:Oi,styleId:ri,removes:[{index:[...Le(fn),Qn]}]}),qt.apply(fn,In)})})}),Un(()=>{Z.CSSStyleSheet.prototype.insertRule=ce,Z.CSSStyleSheet.prototype.deleteRule=De,$e&&(Z.CSSStyleSheet.prototype.replace=$e),ut&&(Z.CSSStyleSheet.prototype.replaceSync=ut),Object.entries(tt).forEach(([vt,Wt])=>{Wt.prototype.insertRule=Ot[vt].insertRule,Wt.prototype.deleteRule=Ot[vt].deleteRule})})}r(gt,"initStyleSheetObserver");function Tt({mirror:P,stylesheetManager:x},W){let Z=null;W.nodeName==="#document"?Z=P.getId(W):Z=P.getId(W.host);const ce=W.nodeName==="#document"?hr([W,"access",$e=>$e.defaultView,"optionalAccess",$e=>$e.Document]):hr([W,"access",$e=>$e.ownerDocument,"optionalAccess",$e=>$e.defaultView,"optionalAccess",$e=>$e.ShadowRoot]),De=hr([ce,"optionalAccess",$e=>$e.prototype])?Object.getOwnPropertyDescriptor(hr([ce,"optionalAccess",$e=>$e.prototype]),"adoptedStyleSheets"):void 0;return Z===null||Z===-1||!ce||!De?()=>{}:(Object.defineProperty(W,"adoptedStyleSheets",{configurable:De.configurable,enumerable:De.enumerable,get(){return hr([De,"access",$e=>$e.get,"optionalAccess",$e=>$e.call,"call",$e=>$e(this)])},set($e){const ut=hr([De,"access",tt=>tt.set,"optionalAccess",tt=>tt.call,"call",tt=>tt(this,$e)]);if(Z!==null&&Z!==-1)try{x.adoptStyleSheets($e,Z)}catch{}return ut}}),Un(()=>{Object.defineProperty(W,"adoptedStyleSheets",{configurable:De.configurable,enumerable:De.enumerable,get:De.get,set:De.set})}))}r(Tt,"initAdoptedStyleSheetObserver");function rn({styleDeclarationCb:P,mirror:x,ignoreCSSAttributes:W,stylesheetManager:Z},{win:ce}){const De=ce.CSSStyleDeclaration.prototype.setProperty;ce.CSSStyleDeclaration.prototype.setProperty=new Proxy(De,{apply:Un((ut,tt,Ot)=>{const[vt,Wt,qt]=Ot;if(W.has(vt))return De.apply(tt,[vt,Wt,qt]);const{id:fn,styleId:In}=at(hr([tt,"access",Qn=>Qn.parentRule,"optionalAccess",Qn=>Qn.parentStyleSheet]),x,Z.styleMirror);return(fn&&fn!==-1||In&&In!==-1)&&P({id:fn,styleId:In,set:{property:vt,value:Wt,priority:qt},index:Le(tt.parentRule)}),ut.apply(tt,Ot)})});const $e=ce.CSSStyleDeclaration.prototype.removeProperty;return ce.CSSStyleDeclaration.prototype.removeProperty=new Proxy($e,{apply:Un((ut,tt,Ot)=>{const[vt]=Ot;if(W.has(vt))return $e.apply(tt,[vt]);const{id:Wt,styleId:qt}=at(hr([tt,"access",fn=>fn.parentRule,"optionalAccess",fn=>fn.parentStyleSheet]),x,Z.styleMirror);return(Wt&&Wt!==-1||qt&&qt!==-1)&&P({id:Wt,styleId:qt,remove:{property:vt},index:Le(tt.parentRule)}),ut.apply(tt,Ot)})}),Un(()=>{ce.CSSStyleDeclaration.prototype.setProperty=De,ce.CSSStyleDeclaration.prototype.removeProperty=$e})}r(rn,"initStyleDeclarationObserver");function bn({mediaInteractionCb:P,blockClass:x,blockSelector:W,unblockSelector:Z,mirror:ce,sampling:De,doc:$e}){const ut=Un(Ot=>dt(Un(vt=>{const Wt=pn(vt);if(!Wt||Mn(Wt,x,W,Z,!0))return;const{currentTime:qt,volume:fn,muted:In,playbackRate:Qn}=Wt;P({type:Ot,id:ce.getId(Wt),currentTime:qt,volume:fn,muted:In,playbackRate:Qn})}),De.media||500)),tt=[we("play",ut(0),$e),we("pause",ut(1),$e),we("seeked",ut(2),$e),we("volumechange",ut(3),$e),we("ratechange",ut(4),$e)];return Un(()=>{tt.forEach(Ot=>Ot())})}r(bn,"initMediaInteractionObserver");function Tn({fontCb:P,doc:x}){const W=x.defaultView;if(!W)return()=>{};const Z=[],ce=new WeakMap,De=W.FontFace;W.FontFace=r(function(tt,Ot,vt){const Wt=new De(tt,Ot,vt);return ce.set(Wt,{family:tt,buffer:typeof Ot!="string",descriptors:vt,fontSource:typeof Ot=="string"?Ot:JSON.stringify(Array.from(new Uint8Array(Ot)))}),Wt},"FontFace");const $e=xn(x.fonts,"add",function(ut){return function(tt){return Li(Un(()=>{const Ot=ce.get(tt);Ot&&(P(Ot),ce.delete(tt))}),0),ut.apply(this,[tt])}});return Z.push(()=>{W.FontFace=De}),Z.push($e),Un(()=>{Z.forEach(ut=>ut())})}r(Tn,"initFontObserver");function ln(P){const{doc:x,mirror:W,blockClass:Z,blockSelector:ce,unblockSelector:De,selectionCb:$e}=P;let ut=!0;const tt=Un(()=>{const Ot=x.getSelection();if(!Ot||ut&&hr([Ot,"optionalAccess",qt=>qt.isCollapsed]))return;ut=Ot.isCollapsed||!1;const vt=[],Wt=Ot.rangeCount||0;for(let qt=0;qt<Wt;qt++){const fn=Ot.getRangeAt(qt),{startContainer:In,startOffset:Qn,endContainer:Oi,endOffset:ri}=fn;Mn(In,Z,ce,De,!0)||Mn(Oi,Z,ce,De,!0)||vt.push({start:W.getId(In),startOffset:Qn,end:W.getId(Oi),endOffset:ri})}$e({ranges:vt})});return tt(),we("selectionchange",tt)}r(ln,"initSelectionObserver");function Vn({doc:P,customElementCb:x}){const W=P.defaultView;return!W||!W.customElements?()=>{}:xn(W.customElements,"define",function(ce){return function(De,$e,ut){try{x({define:{name:De}})}catch{}return ce.apply(this,[De,$e,ut])}})}r(Vn,"initCustomElementObserver");function Ut(P,x={}){const W=P.doc.defaultView;if(!W)return()=>{};const Z=Sr(P,P.doc),ce=Pn(P),De=so(P),$e=Wr(P),ut=$r(P,{win:W}),tt=ve(P),Ot=bn(P),vt=gt(P,{win:W}),Wt=Tt(P,P.doc),qt=rn(P,{win:W}),fn=P.collectFonts?Tn(P):()=>{},In=ln(P),Qn=Vn(P),Oi=[];for(const ri of P.plugins)Oi.push(ri.observer(ri.callback,W,ri.options));return Un(()=>{ar.forEach(ri=>ri.reset()),Z.disconnect(),ce(),De(),$e(),ut(),tt(),Ot(),vt(),Wt(),qt(),fn(),In(),Qn(),Oi.forEach(ri=>ri())})}r(Ut,"initObservers");function hi(P){return typeof window[P]<"u"}r(hi,"hasNestedCSSRule");function An(P){return Boolean(typeof window[P]<"u"&&window[P].prototype&&"insertRule"in window[P].prototype&&"deleteRule"in window[P].prototype)}r(An,"canMonkeyPatchNestedCSSRule");class Fi{constructor(x){this.generateIdFn=x,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(x,W,Z,ce){const De=Z||this.getIdToRemoteIdMap(x),$e=ce||this.getRemoteIdToIdMap(x);let ut=De.get(W);return ut||(ut=this.generateIdFn(),De.set(W,ut),$e.set(ut,W)),ut}getIds(x,W){const Z=this.getIdToRemoteIdMap(x),ce=this.getRemoteIdToIdMap(x);return W.map(De=>this.getId(x,De,Z,ce))}getRemoteId(x,W,Z){const ce=Z||this.getRemoteIdToIdMap(x);if(typeof W!="number")return W;const De=ce.get(W);return De||-1}getRemoteIds(x,W){const Z=this.getRemoteIdToIdMap(x);return W.map(ce=>this.getRemoteId(x,ce,Z))}reset(x){if(!x){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(x),this.iframeRemoteIdToIdMap.delete(x)}getIdToRemoteIdMap(x){let W=this.iframeIdToRemoteIdMap.get(x);return W||(W=new Map,this.iframeIdToRemoteIdMap.set(x,W)),W}getRemoteIdToIdMap(x){let W=this.iframeRemoteIdToIdMap.get(x);return W||(W=new Map,this.iframeRemoteIdToIdMap.set(x,W)),W}}r(Fi,"CrossOriginIframeMirror");function Qi(P){let x,W=P[0],Z=1;for(;Z<P.length;){const ce=P[Z],De=P[Z+1];if(Z+=2,(ce==="optionalAccess"||ce==="optionalCall")&&W==null)return;ce==="access"||ce==="optionalAccess"?(x=W,W=De(W)):(ce==="call"||ce==="optionalCall")&&(W=De((...$e)=>W.call(x,...$e)),x=void 0)}return W}r(Qi,"_optionalChain$1");class Zi{constructor(){this.crossOriginIframeMirror=new Fi(Xt),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}r(Zi,"IframeManagerNoop");class Hn{constructor(x){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Fi(Xt),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=x.mutationCb,this.wrappedEmit=x.wrappedEmit,this.stylesheetManager=x.stylesheetManager,this.recordCrossOriginIframes=x.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Fi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=x.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(x){this.iframes.set(x,!0),x.contentWindow&&this.crossOriginIframeMap.set(x.contentWindow,x)}addLoadListener(x){this.loadListener=x}attachIframe(x,W){this.mutationCb({adds:[{parentId:this.mirror.getId(x),nextId:null,node:W}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Qi([this,"access",Z=>Z.loadListener,"optionalCall",Z=>Z(x)]),x.contentDocument&&x.contentDocument.adoptedStyleSheets&&x.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(x.contentDocument.adoptedStyleSheets,this.mirror.getId(x.contentDocument))}handleMessage(x){const W=x;if(W.data.type!=="rrweb"||W.origin!==W.data.origin||!x.source)return;const ce=this.crossOriginIframeMap.get(x.source);if(!ce)return;const De=this.transformCrossOriginEvent(ce,W.data.event);De&&this.wrappedEmit(De,W.data.isCheckout)}transformCrossOriginEvent(x,W){switch(W.type){case Zn.FullSnapshot:{this.crossOriginIframeMirror.reset(x),this.crossOriginIframeStyleMirror.reset(x),this.replaceIdOnNode(W.data.node,x);const Z=W.data.node.id;return this.crossOriginIframeRootIdMap.set(x,Z),this.patchRootIdOnNode(W.data.node,Z),{timestamp:W.timestamp,type:Zn.IncrementalSnapshot,data:{source:N.Mutation,adds:[{parentId:this.mirror.getId(x),nextId:null,node:W.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Zn.Meta:case Zn.Load:case Zn.DomContentLoaded:return!1;case Zn.Plugin:return W;case Zn.Custom:return this.replaceIds(W.data.payload,x,["id","parentId","previousId","nextId"]),W;case Zn.IncrementalSnapshot:switch(W.data.source){case N.Mutation:return W.data.adds.forEach(Z=>{this.replaceIds(Z,x,["parentId","nextId","previousId"]),this.replaceIdOnNode(Z.node,x);const ce=this.crossOriginIframeRootIdMap.get(x);ce&&this.patchRootIdOnNode(Z.node,ce)}),W.data.removes.forEach(Z=>{this.replaceIds(Z,x,["parentId","id"])}),W.data.attributes.forEach(Z=>{this.replaceIds(Z,x,["id"])}),W.data.texts.forEach(Z=>{this.replaceIds(Z,x,["id"])}),W;case N.Drag:case N.TouchMove:case N.MouseMove:return W.data.positions.forEach(Z=>{this.replaceIds(Z,x,["id"])}),W;case N.ViewportResize:return!1;case N.MediaInteraction:case N.MouseInteraction:case N.Scroll:case N.CanvasMutation:case N.Input:return this.replaceIds(W.data,x,["id"]),W;case N.StyleSheetRule:case N.StyleDeclaration:return this.replaceIds(W.data,x,["id"]),this.replaceStyleIds(W.data,x,["styleId"]),W;case N.Font:return W;case N.Selection:return W.data.ranges.forEach(Z=>{this.replaceIds(Z,x,["start","end"])}),W;case N.AdoptedStyleSheet:return this.replaceIds(W.data,x,["id"]),this.replaceStyleIds(W.data,x,["styleIds"]),Qi([W,"access",Z=>Z.data,"access",Z=>Z.styles,"optionalAccess",Z=>Z.forEach,"call",Z=>Z(ce=>{this.replaceStyleIds(ce,x,["styleId"])})]),W}}return!1}replace(x,W,Z,ce){for(const De of ce)!Array.isArray(W[De])&&typeof W[De]!="number"||(Array.isArray(W[De])?W[De]=x.getIds(Z,W[De]):W[De]=x.getId(Z,W[De]));return W}replaceIds(x,W,Z){return this.replace(this.crossOriginIframeMirror,x,W,Z)}replaceStyleIds(x,W,Z){return this.replace(this.crossOriginIframeStyleMirror,x,W,Z)}replaceIdOnNode(x,W){this.replaceIds(x,W,["id","rootId"]),"childNodes"in x&&x.childNodes.forEach(Z=>{this.replaceIdOnNode(Z,W)})}patchRootIdOnNode(x,W){x.type!==V.Document&&!x.rootId&&(x.rootId=W),"childNodes"in x&&x.childNodes.forEach(Z=>{this.patchRootIdOnNode(Z,W)})}}r(Hn,"IframeManager");class Jn{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}r(Jn,"ShadowDomManagerNoop");class ai{constructor(x){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=x.mutationCb,this.scrollCb=x.scrollCb,this.bypassOptions=x.bypassOptions,this.mirror=x.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(x,W){if(!Y(x)||this.shadowDoms.has(x))return;this.shadowDoms.add(x);const Z=Sr({...this.bypassOptions,doc:W,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},x);this.restoreHandlers.push(()=>Z.disconnect()),this.restoreHandlers.push(Wr({...this.bypassOptions,scrollCb:this.scrollCb,doc:x,mirror:this.mirror})),Li(()=>{x.adoptedStyleSheets&&x.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(x.adoptedStyleSheets,this.mirror.getId(x.host)),this.restoreHandlers.push(Tt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},x))},0)}observeAttachShadow(x){!x.contentWindow||!x.contentDocument||this.patchAttachShadow(x.contentWindow.Element,x.contentDocument)}patchAttachShadow(x,W){const Z=this;this.restoreHandlers.push(xn(x.prototype,"attachShadow",function(ce){return function(De){const $e=ce.call(this,De);return this.shadowRoot&&wi(this)&&Z.addShadowRoot(this.shadowRoot,W),$e}}))}reset(){this.restoreHandlers.forEach(x=>{try{x()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}r(ai,"ShadowDomManager");class Ri{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}r(Ri,"CanvasManagerNoop");class Cr{constructor(x){this.trackedLinkElements=new WeakSet,this.styleMirror=new vi,this.mutationCb=x.mutationCb,this.adoptedStyleSheetCb=x.adoptedStyleSheetCb}attachLinkElement(x,W){"_cssText"in W.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:W.id,attributes:W.attributes}]}),this.trackLinkElement(x)}trackLinkElement(x){this.trackedLinkElements.has(x)||(this.trackedLinkElements.add(x),this.trackStylesheetInLinkElement(x))}adoptStyleSheets(x,W){if(x.length===0)return;const Z={id:W,styleIds:[]},ce=[];for(const De of x){let $e;this.styleMirror.has(De)?$e=this.styleMirror.getId(De):($e=this.styleMirror.add(De),ce.push({styleId:$e,rules:Array.from(De.rules||CSSRule,(ut,tt)=>({rule:Ie(ut),index:tt}))})),Z.styleIds.push($e)}ce.length>0&&(Z.styles=ce),this.adoptedStyleSheetCb(Z)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(x){}}r(Cr,"StylesheetManager");class Ur{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){fr(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(x,W){const Z=this.nodeMap.get(x);return Z&&Array.from(Z).some(ce=>ce!==W)}add(x,W){this.nodeMap.set(x,(this.nodeMap.get(x)||new Set).add(W))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}r(Ur,"ProcessedNodeManager");let li,Kr;const Ji=Xe();function Or(P={}){const{emit:x,checkoutEveryNms:W,checkoutEveryNth:Z,blockClass:ce="rr-block",blockSelector:De=null,unblockSelector:$e=null,ignoreClass:ut="rr-ignore",ignoreSelector:tt=null,maskAllText:Ot=!1,maskTextClass:vt="rr-mask",unmaskTextClass:Wt=null,maskTextSelector:qt=null,unmaskTextSelector:fn=null,inlineStylesheet:In=!0,maskAllInputs:Qn,maskInputOptions:Oi,slimDOMOptions:ri,maskAttributeFn:Gi,maskInputFn:lr,maskTextFn:dr,maxCanvasSize:Lr=null,packFn:Ni,sampling:ei={},dataURLOptions:tr={},mousemoveWait:zr,recordCanvas:ti=!1,recordCrossOriginIframes:ji=!1,recordAfter:Dr=P.recordAfter==="DOMContentLoaded"?P.recordAfter:"load",userTriggeredOnInput:to=!1,collectFonts:po=!1,inlineImages:Mo=!1,plugins:br,keepIframeSrcFn:Lo=r(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:mo=new Set([]),errorHandler:qo,onMutation:ys,getCanvasManager:kc}=P;Zr(qo);const Rl=ji?window.parent===window:!0;let Pl=!1;if(!Rl)try{window.parent.document&&(Pl=!1)}catch{Pl=!0}if(Rl&&!x)throw new Error("emit function is required");zr!==void 0&&ei.mousemove===void 0&&(ei.mousemove=zr),Ji.reset();const ba=Qn===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:Oi!==void 0?Oi:{},Gd=ri===!0||ri==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:ri==="all",headMetaDescKeywords:ri==="all"}:ri||{};Nt();let kl,Nl=0;const jd=r(cr=>{for(const Vo of br||[])Vo.eventProcessor&&(cr=Vo.eventProcessor(cr));return Ni&&!Pl&&(cr=Ni(cr)),cr},"eventProcessor");li=r((cr,Vo)=>{const or=cr;if(or.timestamp=Qt(),h([ar,"access",Fr=>Fr[0],"optionalAccess",Fr=>Fr.isFrozen,"call",Fr=>Fr()])&&or.type!==Zn.FullSnapshot&&!(or.type===Zn.IncrementalSnapshot&&or.data.source===N.Mutation)&&ar.forEach(Fr=>Fr.unfreeze()),Rl)h([x,"optionalCall",Fr=>Fr(jd(or),Vo)]);else if(Pl){const Fr={type:"rrweb",event:jd(or),origin:window.location.origin,isCheckout:Vo};window.parent.postMessage(Fr,"*")}if(or.type===Zn.FullSnapshot)kl=or,Nl=0;else if(or.type===Zn.IncrementalSnapshot){if(or.data.source===N.Mutation&&or.data.isAttachIframe)return;Nl++;const Fr=Z&&Nl>=Z,ur=W&&kl&&or.timestamp-kl.timestamp>W;(Fr||ur)&&Fl(!0)}},"wrappedEmit");const _a=r(cr=>{li({type:Zn.IncrementalSnapshot,data:{source:N.Mutation,...cr}})},"wrappedMutationEmit"),zd=r(cr=>li({type:Zn.IncrementalSnapshot,data:{source:N.Scroll,...cr}}),"wrappedScrollEmit"),da=r(cr=>li({type:Zn.IncrementalSnapshot,data:{source:N.CanvasMutation,...cr}}),"wrappedCanvasMutationEmit"),za=r(cr=>li({type:Zn.IncrementalSnapshot,data:{source:N.AdoptedStyleSheet,...cr}}),"wrappedAdoptedStyleSheetEmit"),Es=new Cr({mutationCb:_a,adoptedStyleSheetCb:za}),Js=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Zi:new Hn({mirror:Ji,mutationCb:_a,stylesheetManager:Es,recordCrossOriginIframes:ji,wrappedEmit:li});for(const cr of br||[])cr.getMirror&&cr.getMirror({nodeMirror:Ji,crossOriginIframeMirror:Js.crossOriginIframeMirror,crossOriginIframeStyleMirror:Js.crossOriginIframeStyleMirror});const $d=new Ur,Ll=Go(kc,{mirror:Ji,win:window,mutationCb:cr=>li({type:Zn.IncrementalSnapshot,data:{source:N.CanvasMutation,...cr}}),recordCanvas:ti,blockClass:ce,blockSelector:De,unblockSelector:$e,maxCanvasSize:Lr,sampling:ei.canvas,dataURLOptions:tr,errorHandler:qo}),Ta=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Jn:new ai({mutationCb:_a,scrollCb:zd,bypassOptions:{onMutation:ys,blockClass:ce,blockSelector:De,unblockSelector:$e,maskAllText:Ot,maskTextClass:vt,unmaskTextClass:Wt,maskTextSelector:qt,unmaskTextSelector:fn,inlineStylesheet:In,maskInputOptions:ba,dataURLOptions:tr,maskAttributeFn:Gi,maskTextFn:dr,maskInputFn:lr,recordCanvas:ti,inlineImages:Mo,sampling:ei,slimDOMOptions:Gd,iframeManager:Js,stylesheetManager:Es,canvasManager:Ll,keepIframeSrcFn:Lo,processedNodeManager:$d},mirror:Ji}),Fl=r((cr=!1)=>{li({type:Zn.Meta,data:{href:window.location.href,width:Kn(),height:Pi()}},cr),Es.reset(),Ta.init(),ar.forEach(or=>or.lock());const Vo=Se(document,{mirror:Ji,blockClass:ce,blockSelector:De,unblockSelector:$e,maskAllText:Ot,maskTextClass:vt,unmaskTextClass:Wt,maskTextSelector:qt,unmaskTextSelector:fn,inlineStylesheet:In,maskAllInputs:ba,maskAttributeFn:Gi,maskInputFn:lr,maskTextFn:dr,slimDOM:Gd,dataURLOptions:tr,recordCanvas:ti,inlineImages:Mo,onSerialize:or=>{On(or,Ji)&&Js.addIframe(or),_n(or,Ji)&&Es.trackLinkElement(or),si(or)&&Ta.addShadowRoot(or.shadowRoot,document)},onIframeLoad:(or,Fr)=>{Js.attachIframe(or,Fr),Ta.observeAttachShadow(or)},onStylesheetLoad:(or,Fr)=>{Es.attachLinkElement(or,Fr)},keepIframeSrcFn:Lo});if(!Vo)return console.warn("Failed to snapshot the document");li({type:Zn.FullSnapshot,data:{node:Vo,initialOffset:Xi(window)}}),ar.forEach(or=>or.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Es.adoptStyleSheets(document.adoptedStyleSheets,Ji.getId(document))},"takeFullSnapshot");Kr=Fl;try{const cr=[],Vo=r(Fr=>Un(Ut)({onMutation:ys,mutationCb:_a,mousemoveCb:(ur,ds)=>li({type:Zn.IncrementalSnapshot,data:{source:ds,positions:ur}}),mouseInteractionCb:ur=>li({type:Zn.IncrementalSnapshot,data:{source:N.MouseInteraction,...ur}}),scrollCb:zd,viewportResizeCb:ur=>li({type:Zn.IncrementalSnapshot,data:{source:N.ViewportResize,...ur}}),inputCb:ur=>li({type:Zn.IncrementalSnapshot,data:{source:N.Input,...ur}}),mediaInteractionCb:ur=>li({type:Zn.IncrementalSnapshot,data:{source:N.MediaInteraction,...ur}}),styleSheetRuleCb:ur=>li({type:Zn.IncrementalSnapshot,data:{source:N.StyleSheetRule,...ur}}),styleDeclarationCb:ur=>li({type:Zn.IncrementalSnapshot,data:{source:N.StyleDeclaration,...ur}}),canvasMutationCb:da,fontCb:ur=>li({type:Zn.IncrementalSnapshot,data:{source:N.Font,...ur}}),selectionCb:ur=>{li({type:Zn.IncrementalSnapshot,data:{source:N.Selection,...ur}})},customElementCb:ur=>{li({type:Zn.IncrementalSnapshot,data:{source:N.CustomElement,...ur}})},blockClass:ce,ignoreClass:ut,ignoreSelector:tt,maskAllText:Ot,maskTextClass:vt,unmaskTextClass:Wt,maskTextSelector:qt,unmaskTextSelector:fn,maskInputOptions:ba,inlineStylesheet:In,sampling:ei,recordCanvas:ti,inlineImages:Mo,userTriggeredOnInput:to,collectFonts:po,doc:Fr,maskAttributeFn:Gi,maskInputFn:lr,maskTextFn:dr,keepIframeSrcFn:Lo,blockSelector:De,unblockSelector:$e,slimDOMOptions:Gd,dataURLOptions:tr,mirror:Ji,iframeManager:Js,stylesheetManager:Es,shadowDomManager:Ta,processedNodeManager:$d,canvasManager:Ll,ignoreCSSAttributes:mo,plugins:h([br,"optionalAccess",ur=>ur.filter,"call",ur=>ur(ds=>ds.observer),"optionalAccess",ur=>ur.map,"call",ur=>ur(ds=>({observer:ds.observer,options:ds.options,callback:Kd=>li({type:Zn.Plugin,data:{plugin:ds.name,payload:Kd}})}))])||[]},{}),"observe");Js.addLoadListener(Fr=>{try{cr.push(Vo(Fr.contentDocument))}catch(ur){console.warn(ur)}});const or=r(()=>{Fl(),cr.push(Vo(document))},"init");return document.readyState==="interactive"||document.readyState==="complete"?or():(cr.push(we("DOMContentLoaded",()=>{li({type:Zn.DomContentLoaded,data:{}}),Dr==="DOMContentLoaded"&&or()})),cr.push(we("load",()=>{li({type:Zn.Load,data:{}}),Dr==="load"&&or()},window))),()=>{cr.forEach(Fr=>Fr()),$d.destroy(),Kr=void 0,gr()}}catch(cr){console.warn(cr)}}r(Or,"record");function xo(P){if(!Kr)throw new Error("please take full snapshot after start recording");Kr(P)}r(xo,"takeFullSnapshot"),Or.mirror=Ji,Or.takeFullSnapshot=xo;function Go(P,x){try{return P?P(x):new Ri}catch{return console.warn("Unable to initialize CanvasManager"),new Ri}}r(Go,"_getCanvasManager");const Po=3,ko=5;function Uo(P){return P>9999999999?P:P*1e3}r(Uo,"timestampToMs");function To(P){return P>9999999999?P/1e3:P}r(To,"timestampToS");function Jr(P,x){x.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(x.category)?P.triggerUserActivity():P.checkAndHandleExpiredSession(),P.addUpdate(()=>(P.throttledAddEvent({type:Zn.Custom,timestamp:(x.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:m.normalize(x,10,1e3)}}),x.category==="console")))}r(Jr,"addBreadcrumbEvent");const ao="button,a";function Io(P){return P.closest(ao)||P}r(Io,"getClosestInteractive");function Gr(P){const x=lo(P);return!x||!(x instanceof Element)?x:Io(x)}r(Gr,"getClickTargetNode");function lo(P){return vr(P)?P.target:P}r(lo,"getTargetNode");function vr(P){return typeof P=="object"&&!!P&&"target"in P}r(vr,"isEventWithTarget");let co;function ws(P){return co||(co=[],Ds()),co.push(P),()=>{const x=co?co.indexOf(P):-1;x>-1&&co.splice(x,1)}}r(ws,"onWindowOpen");function Ds(){m.fill(s,"open",function(P){return function(...x){if(co)try{co.forEach(W=>W())}catch{}return P.apply(s,x)}})}r(Ds,"monkeyPatchWindowOpen");function Yr(P,x,W){P.handleClick(x,W)}r(Yr,"handleClick");class Co{constructor(x,W,Z=Jr){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=W.timeout/1e3,this._threshold=W.threshold/1e3,this._scollTimeout=W.scrollTimeout/1e3,this._replay=x,this._ignoreSelector=W.ignoreSelector,this._addBreadcrumbEvent=Z}addListeners(){const x=ws(()=>{this._lastMutation=jr()});this._teardown=()=>{x(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(x,W){if(Mr(W,this._ignoreSelector)||!wr(x))return;const Z={timestamp:To(x.timestamp),clickBreadcrumb:x,clickCount:0,node:W};this._clicks.some(ce=>ce.node===Z.node&&Math.abs(ce.timestamp-Z.timestamp)<1)||(this._clicks.push(Z),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(x=Date.now()){this._lastMutation=To(x)}registerScroll(x=Date.now()){this._lastScroll=To(x)}registerClick(x){const W=Io(x);this._handleMultiClick(W)}_handleMultiClick(x){this._getClicks(x).forEach(W=>{W.clickCount++})}_getClicks(x){return this._clicks.filter(W=>W.node===x)}_checkClicks(){const x=[],W=jr();this._clicks.forEach(Z=>{!Z.mutationAfter&&this._lastMutation&&(Z.mutationAfter=Z.timestamp<=this._lastMutation?this._lastMutation-Z.timestamp:void 0),!Z.scrollAfter&&this._lastScroll&&(Z.scrollAfter=Z.timestamp<=this._lastScroll?this._lastScroll-Z.timestamp:void 0),Z.timestamp+this._timeout<=W&&x.push(Z)});for(const Z of x){const ce=this._clicks.indexOf(Z);ce>-1&&(this._generateBreadcrumbs(Z),this._clicks.splice(ce,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(x){const W=this._replay,Z=x.scrollAfter&&x.scrollAfter<=this._scollTimeout,ce=x.mutationAfter&&x.mutationAfter<=this._threshold,De=!Z&&!ce,{clickCount:$e,clickBreadcrumb:ut}=x;if(De){const tt=Math.min(x.mutationAfter||this._timeout,this._timeout)*1e3,Ot=tt<this._timeout*1e3?"mutation":"timeout",vt={type:"default",message:ut.message,timestamp:ut.timestamp,category:"ui.slowClickDetected",data:{...ut.data,url:s.location.href,route:W.getCurrentRoute(),timeAfterClickMs:tt,endReason:Ot,clickCount:$e||1}};this._addBreadcrumbEvent(W,vt);return}if($e>1){const tt={type:"default",message:ut.message,timestamp:ut.timestamp,category:"ui.multiClick",data:{...ut.data,url:s.location.href,route:W.getCurrentRoute(),clickCount:$e,metric:!0}};this._addBreadcrumbEvent(W,tt)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}r(Co,"ClickDetector");const pr=["A","BUTTON","INPUT"];function Mr(P,x){return!!(!pr.includes(P.tagName)||P.tagName==="INPUT"&&!["submit","button"].includes(P.getAttribute("type")||"")||P.tagName==="A"&&(P.hasAttribute("download")||P.hasAttribute("target")&&P.getAttribute("target")!=="_self")||x&&P.matches(x))}r(Mr,"ignoreElement");function wr(P){return!!(P.data&&typeof P.data.nodeId=="number"&&P.timestamp)}r(wr,"isClickBreadcrumb");function jr(){return Date.now()/1e3}r(jr,"nowInSeconds");function Vr(P,x){try{if(!rs(x))return;const{source:W}=x.data;if(W===N.Mutation&&P.registerMutation(x.timestamp),W===N.Scroll&&P.registerScroll(x.timestamp),q(x)){const{type:Z,id:ce}=x.data,De=Or.mirror.getNode(ce);De instanceof HTMLElement&&Z===oe.Click&&P.registerClick(De)}}catch{}}r(Vr,"updateClickDetectorForRecordingEvent");function rs(P){return P.type===Po}r(rs,"isIncrementalEvent");function q(P){return P.data.source===N.MouseInteraction}r(q,"isIncrementalMouseInteraction");function re(P){return{timestamp:Date.now()/1e3,type:"default",...P}}r(re,"createBreadcrumb");var he;(function(P){P[P.Document=0]="Document",P[P.DocumentType=1]="DocumentType",P[P.Element=2]="Element",P[P.Text=3]="Text",P[P.CDATA=4]="CDATA",P[P.Comment=5]="Comment"})(he||(he={}));const Te=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function ke(P){const x={};!P["data-sentry-component"]&&P["data-sentry-element"]&&(P["data-sentry-component"]=P["data-sentry-element"]);for(const W in P)if(Te.has(W)){let Z=W;(W==="data-testid"||W==="data-test-id")&&(Z="testId"),x[Z]=P[W]}return x}r(ke,"getAttributesToRecord");const ot=r(P=>x=>{if(!P.isEnabled())return;const W=Mt(x);if(!W)return;const Z=x.name==="click",ce=Z?x.event:void 0;Z&&P.clickDetector&&ce&&ce.target&&!ce.altKey&&!ce.metaKey&&!ce.ctrlKey&&!ce.shiftKey&&Yr(P.clickDetector,W,Gr(x.event)),Jr(P,W)},"handleDomListener");function Ze(P,x){const W=Or.mirror.getId(P),Z=W&&Or.mirror.getNode(W),ce=Z&&Or.mirror.getMeta(Z),De=ce&&xt(ce)?ce:null;return{message:x,data:De?{nodeId:W,node:{id:W,tagName:De.tagName,textContent:Array.from(De.childNodes).map($e=>$e.type===he.Text&&$e.textContent).filter(Boolean).map($e=>$e.trim()).join(""),attributes:ke(De.attributes)}}:{}}}r(Ze,"getBaseDomBreadcrumb");function Mt(P){const{target:x,message:W}=Rt(P);return re({category:`ui.${P.name}`,...Ze(x,W)})}r(Mt,"handleDom");function Rt(P){const x=P.name==="click";let W,Z=null;try{Z=x?Gr(P.event):lo(P.event),W=m.htmlTreeAsString(Z,{maxStringLength:200})||"<unknown>"}catch{W="<unknown>"}return{target:Z,message:W}}r(Rt,"getDomTarget");function xt(P){return P.type===he.Element}r(xt,"isElement");function kt(P,x){if(!P.isEnabled())return;P.updateUserActivity();const W=Jt(x);W&&Jr(P,W)}r(kt,"handleKeyboardEvent");function Jt(P){const{metaKey:x,shiftKey:W,ctrlKey:Z,altKey:ce,key:De,target:$e}=P;if(!$e||Yt($e)||!De)return null;const ut=x||Z||ce,tt=De.length===1;if(!ut&&tt)return null;const Ot=m.htmlTreeAsString($e,{maxStringLength:200})||"<unknown>",vt=Ze($e,Ot);return re({category:"ui.keyDown",message:Ot,data:{...vt.data,metaKey:x,shiftKey:W,ctrlKey:Z,altKey:ce,key:De}})}r(Jt,"getKeyboardBreadcrumb");function Yt(P){return P.tagName==="INPUT"||P.tagName==="TEXTAREA"||P.isContentEditable}r(Yt,"isInputElement");const tn={resource:Ei,paint:$t,navigation:Bn};function mn(P){return P.map(hn).filter(Boolean)}r(mn,"createPerformanceEntries");function hn(P){return tn[P.entryType]?tn[P.entryType](P):null}r(hn,"createPerformanceEntry");function an(P){return((m.browserPerformanceTimeOrigin||s.performance.timeOrigin)+P)/1e3}r(an,"getAbsoluteTime");function $t(P){const{duration:x,entryType:W,name:Z,startTime:ce}=P,De=an(ce);return{type:W,name:Z,start:De,end:De+x,data:void 0}}r($t,"createPaintEntry");function Bn(P){const{entryType:x,name:W,decodedBodySize:Z,duration:ce,domComplete:De,encodedBodySize:$e,domContentLoadedEventStart:ut,domContentLoadedEventEnd:tt,domInteractive:Ot,loadEventStart:vt,loadEventEnd:Wt,redirectCount:qt,startTime:fn,transferSize:In,type:Qn}=P;return ce===0?null:{type:`${x}.${Qn}`,start:an(fn),end:an(De),name:W,data:{size:In,decodedBodySize:Z,encodedBodySize:$e,duration:ce,domInteractive:Ot,domContentLoadedEventStart:ut,domContentLoadedEventEnd:tt,loadEventStart:vt,loadEventEnd:Wt,domComplete:De,redirectCount:qt}}}r(Bn,"createNavigationEntry");function Ei(P){const{entryType:x,initiatorType:W,name:Z,responseEnd:ce,startTime:De,decodedBodySize:$e,encodedBodySize:ut,responseStatus:tt,transferSize:Ot}=P;return["fetch","xmlhttprequest"].includes(W)?null:{type:`${x}.${W}`,start:an(De),end:an(ce),name:Z,data:{size:Ot,statusCode:tt,decodedBodySize:$e,encodedBodySize:ut}}}r(Ei,"createResourceEntry");function Bi(P){const x=P.entries,W=x[x.length-1],Z=W?W.element:void 0,ce=P.value,De=an(ce);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:De,end:De,data:{value:ce,size:ce,nodeId:Z?Or.mirror.getId(Z):void 0}}}r(Bi,"getLargestContentfulPaint");function qi(P){function x(ce){P.performanceEntries.includes(ce)||P.performanceEntries.push(ce)}r(x,"addPerformanceEntry");function W({entries:ce}){ce.forEach(x)}r(W,"onEntries");const Z=[];return["navigation","paint","resource"].forEach(ce=>{Z.push(a.addPerformanceInstrumentationHandler(ce,W))}),Z.push(a.addLcpInstrumentationHandler(({metric:ce})=>{P.replayPerformanceEntries.push(Bi(ce))})),()=>{Z.forEach(ce=>ce())}}r(qi,"setupPerformanceObserver");const Et=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Vi='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Hi(){const P=new Blob([Vi]);return URL.createObjectURL(P)}r(Hi,"e");function Ti(P,x){Et&&(m.logger.info(P),x&&uo(P))}r(Ti,"logInfo");function Rr(P,x){Et&&(m.logger.info(P),x&&setTimeout(()=>{uo(P)},0))}r(Rr,"logInfoNextTick");function uo(P){p.addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:P},{level:"info"})}r(uo,"addLogBreadcrumb");class Ir extends Error{constructor(){super(`Event buffer exceeded maximum size of ${I}.`)}}r(Ir,"EventBufferSizeExceededError");class qr{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(x){const W=JSON.stringify(x).length;if(this._totalSize+=W,this._totalSize>I)throw new Ir;this.events.push(x)}finish(){return new Promise(x=>{const W=this.events;this.clear(),x(JSON.stringify(W))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const x=this.events.map(W=>W.timestamp).sort()[0];return x?Uo(x):null}}r(qr,"EventBufferArray");class eo{constructor(x){this._worker=x,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((x,W)=>{this._worker.addEventListener("message",({data:Z})=>{Z.success?x():W()},{once:!0}),this._worker.addEventListener("error",Z=>{W(Z)},{once:!0})}),this._ensureReadyPromise)}destroy(){Ti("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(x,W){const Z=this._getAndIncrementId();return new Promise((ce,De)=>{const $e=r(({data:ut})=>{const tt=ut;if(tt.method===x&&tt.id===Z){if(this._worker.removeEventListener("message",$e),!tt.success){Et&&m.logger.error("[Replay]",tt.response),De(new Error("Error in compression worker"));return}ce(tt.response)}},"listener");this._worker.addEventListener("message",$e),this._worker.postMessage({id:Z,method:x,arg:W})})}_getAndIncrementId(){return this._id++}}r(eo,"WorkerHandler");class Vs{constructor(x){this._worker=new eo(x),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(x){const W=Uo(x.timestamp);(!this._earliestTimestamp||W<this._earliestTimestamp)&&(this._earliestTimestamp=W);const Z=JSON.stringify(x);return this._totalSize+=Z.length,this._totalSize>I?Promise.reject(new Ir):this._sendEventToWorker(Z)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,x=>{Et&&m.logger.warn('[Replay] Sending "clear" message to worker failed',x)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(x){return this._worker.postMessage("addEvent",x)}async _finishRequest(){const x=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,x}}r(Vs,"EventBufferCompressionWorker");class Hs{constructor(x){this._fallback=new qr,this._compression=new Vs(x),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(x){this._used.hasCheckout=x}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(x){return this._used.addEvent(x)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{Ti("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:x,hasCheckout:W}=this._fallback,Z=[];for(const ce of x)Z.push(this._compression.addEvent(ce));this._compression.hasCheckout=W,this._used=this._compression;try{await Promise.all(Z)}catch(ce){Et&&m.logger.warn("[Replay] Failed to add events when switching buffers.",ce)}}}r(Hs,"EventBufferProxy");function Pr({useCompression:P,workerUrl:x}){if(P&&window.Worker){const W=ps(x);if(W)return W}return Ti("[Replay] Using simple buffer"),new qr}r(Pr,"createEventBuffer");function ps(P){try{const x=P||Ws();if(!x)return;Ti(`[Replay] Using compression worker${P?` from ${P}`:""}`);const W=new Worker(x);return new Hs(W)}catch{Ti("[Replay] Failed to create compression worker")}}r(ps,"_loadWorker");function Ws(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?Hi():""}r(Ws,"_getWorkerUrl");function os(){try{return"sessionStorage"in s&&!!s.sessionStorage}catch{return!1}}r(os,"hasSessionStorage");function Jo(P){As(),P.session=void 0}r(Jo,"clearSession");function As(){if(os())try{s.sessionStorage.removeItem(n)}catch{}}r(As,"deleteSession");function ms(P){return P===void 0?!1:Math.random()<P}r(ms,"isSampled");function No(P){const x=Date.now(),W=P.id||m.uuid4(),Z=P.started||x,ce=P.lastActivity||x,De=P.segmentId||0,$e=P.sampled,ut=P.previousSessionId;return{id:W,started:Z,lastActivity:ce,segmentId:De,sampled:$e,previousSessionId:ut}}r(No,"makeSession");function Yo(P){if(os())try{s.sessionStorage.setItem(n,JSON.stringify(P))}catch{}}r(Yo,"saveSession");function wo(P,x){return ms(P)?"session":x?"buffer":!1}r(wo,"getSessionSampleType");function Gs({sessionSampleRate:P,allowBuffering:x,stickySession:W=!1},{previousSessionId:Z}={}){const ce=wo(P,x),De=No({sampled:ce,previousSessionId:Z});return W&&Yo(De),De}r(Gs,"createSession");function Ld(P){if(!os())return null;try{const x=s.sessionStorage.getItem(n);if(!x)return null;const W=JSON.parse(x);return Rr("[Replay] Loading existing session",P),No(W)}catch{return null}}r(Ld,"fetchSession");function oa(P,x,W=+new Date){return P===null||x===void 0||x<0?!0:x===0?!1:P+x<=W}r(oa,"isExpired");function Do(P,{maxReplayDuration:x,sessionIdleExpire:W,targetTime:Z=Date.now()}){return oa(P.started,x,Z)||oa(P.lastActivity,W,Z)}r(Do,"isSessionExpired");function Gn(P,{sessionIdleExpire:x,maxReplayDuration:W}){return!(!Do(P,{sessionIdleExpire:x,maxReplayDuration:W})||P.sampled==="buffer"&&P.segmentId===0)}r(Gn,"shouldRefreshSession");function ss({traceInternals:P,sessionIdleExpire:x,maxReplayDuration:W,previousSessionId:Z},ce){const De=ce.stickySession&&Ld(P);return De?Gn(De,{sessionIdleExpire:x,maxReplayDuration:W})?(Rr("[Replay] Session in sessionStorage is expired, creating new one..."),Gs(ce,{previousSessionId:De.id})):De:(Rr("[Replay] Creating new session",P),Gs(ce,{previousSessionId:Z}))}r(ss,"loadOrCreateSession");function Yn(P){return P.type===Zn.Custom}r(Yn,"isCustomEvent");function ma(P,x,W){return kr(P,x)?(ga(P,x,W),!0):!1}r(ma,"addEventSync");function Os(P,x,W){return kr(P,x)?ga(P,x,W):Promise.resolve(null)}r(Os,"addEvent");async function ga(P,x,W){if(!P.eventBuffer)return null;try{W&&P.recordingMode==="buffer"&&P.eventBuffer.clear(),W&&(P.eventBuffer.hasCheckout=!0);const Z=P.getOptions(),ce=Tl(x,Z.beforeAddRecordingEvent);return ce?await P.eventBuffer.addEvent(ce):void 0}catch(Z){const ce=Z&&Z instanceof Ir?"addEventSizeExceeded":"addEvent";Et&&m.logger.error(Z),await P.stop({reason:ce});const De=p.getClient();De&&De.recordDroppedEvent("internal_sdk_error","replay")}}r(ga,"_addEvent");function kr(P,x){if(!P.eventBuffer||P.isPaused()||!P.isEnabled())return!1;const W=Uo(x.timestamp);return W+P.timeouts.sessionIdlePause<Date.now()?!1:W>P.getContext().initialTimestamp+P.getOptions().maxReplayDuration?(Ti(`[Replay] Skipping event with timestamp ${W} because it is after maxReplayDuration`,P.getOptions()._experiments.traceInternals),!1):!0}r(kr,"shouldAddEvent");function Tl(P,x){try{if(typeof x=="function"&&Yn(P))return x(P)}catch(W){return Et&&m.logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",W),null}return P}r(Tl,"maybeApplyCallback");function js(P){return!P.type}r(js,"isErrorEvent");function zs(P){return P.type==="transaction"}r(zs,"isTransactionEvent");function sa(P){return P.type==="replay_event"}r(sa,"isReplayEvent");function aa(P){return P.type==="feedback"}r(aa,"isFeedbackEvent");function la(P){return(x,W)=>{if(!P.isEnabled()||!js(x)&&!zs(x))return;const Z=W&&W.statusCode;if(!(!Z||Z<200||Z>=300)){if(zs(x)){Xo(P,x);return}gs(P,x)}}}r(la,"handleAfterSendEvent");function Xo(P,x){const W=P.getContext();x.contexts&&x.contexts.trace&&x.contexts.trace.trace_id&&W.traceIds.size<100&&W.traceIds.add(x.contexts.trace.trace_id)}r(Xo,"handleTransactionEvent");function gs(P,x){const W=P.getContext();if(x.event_id&&W.errorIds.size<100&&W.errorIds.add(x.event_id),P.recordingMode!=="buffer"||!x.tags||!x.tags.replayId)return;const{beforeErrorSampling:Z}=P.getOptions();typeof Z=="function"&&!Z(x)||setTimeout(()=>{P.sendBufferedReplayOrFlush()})}r(gs,"handleErrorEvent");function xa(P){return x=>{!P.isEnabled()||!js(x)||jn(P,x)}}r(xa,"handleBeforeSendEvent");function jn(P,x){const W=x.exception&&x.exception.values&&x.exception.values[0].value;if(typeof W=="string"&&(W.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||W.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const Z=re({category:"replay.hydrate-error"});Jr(P,Z)}}r(jn,"handleHydrationError");function ki(P){const x=p.getClient();x&&x.on("beforeAddBreadcrumb",W=>on(P,W))}r(ki,"handleBreadcrumbs");function on(P,x){if(!P.isEnabled()||!Va(x))return;const W=Cl(x);W&&Jr(P,W)}r(on,"beforeAddBreadcrumb");function Cl(P){return!Va(P)||["fetch","xhr","sentry.event","sentry.transaction"].includes(P.category)||P.category.startsWith("ui.")?null:P.category==="console"?Ua(P):re(P)}r(Cl,"normalizeBreadcrumb");function Ua(P){const x=P.data&&P.data.arguments;if(!Array.isArray(x)||x.length===0)return re(P);let W=!1;const Z=x.map(ce=>{if(!ce)return ce;if(typeof ce=="string")return ce.length>b?(W=!0,`${ce.slice(0,b)}\u2026`):ce;if(typeof ce=="object")try{const De=m.normalize(ce,7);return JSON.stringify(De).length>b?(W=!0,`${JSON.stringify(De,null,2).slice(0,b)}\u2026`):De}catch{}return ce});return re({...P,data:{...P.data,arguments:Z,...W?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}r(Ua,"normalizeConsoleBreadcrumb");function Va(P){return!!P.category}r(Va,"isBreadcrumbWithCategory");function Fd(P,x){return P.type||!P.exception||!P.exception.values||!P.exception.values.length?!1:!!(x.originalException&&x.originalException.__rrweb__)}r(Fd,"isRrwebError");function Ha(P,x){P.triggerUserActivity(),P.addUpdate(()=>x.timestamp?(P.throttledAddEvent({type:Zn.Custom,timestamp:x.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:x.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:x.event_id}}}}),!1):!0)}r(Ha,"addFeedbackBreadcrumb");function Qo(P,x){return P.recordingMode!=="buffer"||x.message===t||!x.exception||x.type?!1:ms(P.getOptions().errorSampleRate)}r(Qo,"shouldSampleForBufferEvent");function Il(P){return Object.assign((x,W)=>P.isEnabled()?sa(x)?(delete x.breadcrumbs,x):!js(x)&&!zs(x)&&!aa(x)||!P.checkAndHandleExpiredSession()?x:aa(x)?(P.flush(),x.contexts.feedback.replay_id=P.getSessionId(),Ha(P,x),x):Fd(x,W)&&!P.getOptions()._experiments.captureExceptions?(Et&&m.logger.log("[Replay] Ignoring error from rrweb internals",x),null):((Qo(P,x)||P.recordingMode==="session")&&(x.tags={...x.tags,replayId:P.getSessionId()}),x):x,{id:"Replay"})}r(Il,"handleGlobalEventListener");function $s(P,x){return x.map(({type:W,start:Z,end:ce,name:De,data:$e})=>{const ut=P.throttledAddEvent({type:Zn.Custom,timestamp:Z,data:{tag:"performanceSpan",payload:{op:W,description:De,startTimestamp:Z,endTimestamp:ce,data:$e}}});return typeof ut=="string"?Promise.resolve(null):ut})}r($s,"createPerformanceSpans");function Bd(P){const{from:x,to:W}=P,Z=Date.now()/1e3;return{type:"navigation.push",start:Z,end:Z,name:W,data:{previous:x}}}r(Bd,"handleHistory");function wl(P){return x=>{if(!P.isEnabled())return;const W=Bd(x);W!==null&&(P.getContext().urls.push(W.name),P.triggerUserActivity(),P.addUpdate(()=>($s(P,[W]),!1)))}}r(wl,"handleHistorySpanListener");function Wa(P,x){return Et&&P.getOptions()._experiments.traceInternals?!1:p.isSentryRequestUrl(x,p.getClient())}r(Wa,"shouldFilterRequest");function Ga(P,x){P.isEnabled()&&x!==null&&(Wa(P,x.name)||P.addUpdate(()=>($s(P,[x]),!0)))}r(Ga,"addNetworkBreadcrumb");function Sa(P){if(!P)return;const x=new TextEncoder;try{if(typeof P=="string")return x.encode(P).length;if(P instanceof URLSearchParams)return x.encode(P.toString()).length;if(P instanceof FormData){const W=mi(P);return x.encode(W).length}if(P instanceof Blob)return P.size;if(P instanceof ArrayBuffer)return P.byteLength}catch{}}r(Sa,"getBodySize");function mt(P){if(!P)return;const x=parseInt(P,10);return isNaN(x)?void 0:x}r(mt,"parseContentLengthHeader");function At(P){try{if(typeof P=="string")return[P];if(P instanceof URLSearchParams)return[P.toString()];if(P instanceof FormData)return[mi(P)];if(!P)return[void 0]}catch{return Et&&m.logger.warn("[Replay] Failed to serialize body",P),[void 0,"BODY_PARSE_ERROR"]}return Et&&m.logger.info("[Replay] Skipping network body because of body type",P),[void 0,"UNPARSEABLE_BODY_TYPE"]}r(At,"getBodyString");function jt(P,x){if(!P)return{headers:{},size:void 0,_meta:{warnings:[x]}};const W={...P._meta},Z=W.warnings||[];return W.warnings=[...Z,x],P._meta=W,P}r(jt,"mergeWarning");function Cn(P,x){if(!x)return null;const{startTimestamp:W,endTimestamp:Z,url:ce,method:De,statusCode:$e,request:ut,response:tt}=x;return{type:P,start:W/1e3,end:Z/1e3,name:ce,data:m.dropUndefinedKeys({method:De,statusCode:$e,request:ut,response:tt})}}r(Cn,"makeNetworkReplayBreadcrumb");function zn(P){return{headers:{},size:P,_meta:{warnings:["URL_SKIPPED"]}}}r(zn,"buildSkippedNetworkRequestOrResponse");function Di(P,x,W){if(!x&&Object.keys(P).length===0)return;if(!x)return{headers:P};if(!W)return{headers:P,size:x};const Z={headers:P,size:x},{body:ce,warnings:De}=di(W);return Z.body=ce,De&&De.length>0&&(Z._meta={warnings:De}),Z}r(Di,"buildNetworkRequestOrResponse");function pi(P,x){return Object.keys(P).reduce((W,Z)=>{const ce=Z.toLowerCase();return x.includes(ce)&&P[Z]&&(W[ce]=P[Z]),W},{})}r(pi,"getAllowedHeaders");function mi(P){return new URLSearchParams(P).toString()}r(mi,"_serializeFormData");function di(P){if(!P||typeof P!="string")return{body:P};const x=P.length>E,W=er(P);if(x){const Z=P.slice(0,E);return W?{body:Z,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${Z}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(W)try{return{body:JSON.parse(P)}}catch{}return{body:P}}r(di,"normalizeNetworkBody");function er(P){const x=P[0],W=P[P.length-1];return x==="["&&W==="]"||x==="{"&&W==="}"}r(er,"_strIsProbablyJson");function Hr(P,x){const W=xi(P);return m.stringMatchesSomePattern(W,x)}r(Hr,"urlMatches");function xi(P,x=s.document.baseURI){if(P.startsWith("http://")||P.startsWith("https://")||P.startsWith(s.location.origin))return P;const W=new URL(P,x);if(W.origin!==new URL(x).origin)return P;const Z=W.href;return!P.endsWith("/")&&Z.endsWith("/")?Z.slice(0,-1):Z}r(xi,"getFullUrl");async function Er(P,x,W){try{const Z=await Ao(P,x,W),ce=Cn("resource.fetch",Z);Ga(W.replay,ce)}catch(Z){Et&&m.logger.error("[Replay] Failed to capture fetch breadcrumb",Z)}}r(Er,"captureFetchBreadcrumbToReplay");function fo(P,x){const{input:W,response:Z}=x,ce=W?Zo(W):void 0,De=Sa(ce),$e=Z?mt(Z.headers.get("content-length")):void 0;De!==void 0&&(P.data.request_body_size=De),$e!==void 0&&(P.data.response_body_size=$e)}r(fo,"enrichFetchBreadcrumb");async function Ao(P,x,W){const Z=Date.now(),{startTimestamp:ce=Z,endTimestamp:De=Z}=x,{url:$e,method:ut,status_code:tt=0,request_body_size:Ot,response_body_size:vt}=P.data,Wt=Hr($e,W.networkDetailAllowUrls)&&!Hr($e,W.networkDetailDenyUrls),qt=Wt?ho(W,x.input,Ot):zn(Ot),fn=await Nr(Wt,W,x.response,vt);return{startTimestamp:ce,endTimestamp:De,url:$e,method:ut,statusCode:tt,request:qt,response:fn}}r(Ao,"_prepareFetchData");function ho({networkCaptureBodies:P,networkRequestHeaders:x},W,Z){const ce=W?Ks(W,x):{};if(!P)return Di(ce,Z,void 0);const De=Zo(W),[$e,ut]=At(De),tt=Di(ce,Z,$e);return ut?jt(tt,ut):tt}r(ho,"_getRequestInfo");async function Nr(P,{networkCaptureBodies:x,networkResponseHeaders:W},Z,ce){if(!P&&ce!==void 0)return zn(ce);const De=Z?as(Z.headers,W):{};if(!Z||!x&&ce!==void 0)return Di(De,ce,void 0);const[$e,ut]=await Ms(Z),tt=Ss($e,{networkCaptureBodies:x,responseBodySize:ce,captureDetails:P,headers:De});return ut?jt(tt,ut):tt}r(Nr,"_getResponseInfo");function Ss(P,{networkCaptureBodies:x,responseBodySize:W,captureDetails:Z,headers:ce}){try{const De=P&&P.length&&W===void 0?Sa(P):W;return Z?x?Di(ce,De,P):Di(ce,De,void 0):zn(De)}catch(De){return Et&&m.logger.warn("[Replay] Failed to serialize response body",De),Di(ce,W,void 0)}}r(Ss,"getResponseData");async function Ms(P){const x=va(P);if(!x)return[void 0,"BODY_PARSE_ERROR"];try{return[await Ps(x)]}catch(W){return Et&&m.logger.warn("[Replay] Failed to get text body from response",W),[void 0,"BODY_PARSE_ERROR"]}}r(Ms,"_parseFetchResponseBody");function Zo(P=[]){if(!(P.length!==2||typeof P[1]!="object"))return P[1].body}r(Zo,"_getFetchRequestArgBody");function as(P,x){const W={};return x.forEach(Z=>{P.get(Z)&&(W[Z]=P.get(Z))}),W}r(as,"getAllHeaders");function Ks(P,x){return P.length===1&&typeof P[0]!="string"?Rs(P[0],x):P.length===2?Rs(P[1],x):{}}r(Ks,"getRequestHeaders");function Rs(P,x){if(!P)return{};const W=P.headers;return W?W instanceof Headers?as(W,x):Array.isArray(W)?{}:pi(W,x):{}}r(Rs,"getHeadersFromOptions");function va(P){try{return P.clone()}catch(x){Et&&m.logger.warn("[Replay] Failed to clone response body",x)}}r(va,"_tryCloneResponse");function Ps(P){return new Promise((x,W)=>{const Z=setTimeout(()=>W(new Error("Timeout while trying to read response body")),500);Oo(P).then(ce=>x(ce),ce=>W(ce)).finally(()=>clearTimeout(Z))})}r(Ps,"_tryGetResponseText");async function Oo(P){return await P.text()}r(Oo,"_getResponseText");async function rr(P,x,W){try{const Z=Xr(P,x,W),ce=Cn("resource.xhr",Z);Ga(W.replay,ce)}catch(Z){Et&&m.logger.error("[Replay] Failed to capture xhr breadcrumb",Z)}}r(rr,"captureXhrBreadcrumbToReplay");function mr(P,x){const{xhr:W,input:Z}=x;if(!W)return;const ce=Sa(Z),De=W.getResponseHeader("content-length")?mt(W.getResponseHeader("content-length")):Sc(W.response,W.responseType);ce!==void 0&&(P.data.request_body_size=ce),De!==void 0&&(P.data.response_body_size=De)}r(mr,"enrichXhrBreadcrumb");function Xr(P,x,W){const Z=Date.now(),{startTimestamp:ce=Z,endTimestamp:De=Z,input:$e,xhr:ut}=x,{url:tt,method:Ot,status_code:vt=0,request_body_size:Wt,response_body_size:qt}=P.data;if(!tt)return null;if(!ut||!Hr(tt,W.networkDetailAllowUrls)||Hr(tt,W.networkDetailDenyUrls)){const Ni=zn(Wt),ei=zn(qt);return{startTimestamp:ce,endTimestamp:De,url:tt,method:Ot,statusCode:vt,request:Ni,response:ei}}const fn=ut[a.SENTRY_XHR_DATA_KEY],In=fn?pi(fn.request_headers,W.networkRequestHeaders):{},Qn=pi(vs(ut),W.networkResponseHeaders),[Oi,ri]=W.networkCaptureBodies?At($e):[void 0],[Gi,lr]=W.networkCaptureBodies?jo(ut):[void 0],dr=Di(In,Wt,Oi),Lr=Di(Qn,qt,Gi);return{startTimestamp:ce,endTimestamp:De,url:tt,method:Ot,statusCode:vt,request:ri?jt(dr,ri):dr,response:lr?jt(Lr,lr):Lr}}r(Xr,"_prepareXhrData");function vs(P){const x=P.getAllResponseHeaders();return x?x.split(`\r
`).reduce((W,Z)=>{const[ce,De]=Z.split(": ");return W[ce.toLowerCase()]=De,W},{}):{}}r(vs,"getResponseHeaders");function jo(P){const x=[];try{return[P.responseText]}catch(W){x.push(W)}try{return gc(P.response,P.responseType)}catch(W){x.push(W)}return Et&&m.logger.warn("[Replay] Failed to get xhr response body",...x),[void 0]}r(jo,"_getXhrResponseBody");function gc(P,x){try{if(typeof P=="string")return[P];if(P instanceof Document)return[P.body.outerHTML];if(x==="json"&&P&&typeof P=="object")return[JSON.stringify(P)];if(!P)return[void 0]}catch{return Et&&m.logger.warn("[Replay] Failed to serialize body",P),[void 0,"BODY_PARSE_ERROR"]}return Et&&m.logger.info("[Replay] Skipping network body because of body type",P),[void 0,"UNPARSEABLE_BODY_TYPE"]}r(gc,"_parseXhrResponse");function Sc(P,x){try{const W=x==="json"&&P&&typeof P=="object"?JSON.stringify(P):P;return Sa(W)}catch{return}}r(Sc,"_getBodySize");function vc(P){const x=p.getClient();try{const{networkDetailAllowUrls:W,networkDetailDenyUrls:Z,networkCaptureBodies:ce,networkRequestHeaders:De,networkResponseHeaders:$e}=P.getOptions(),ut={replay:P,networkDetailAllowUrls:W,networkDetailDenyUrls:Z,networkCaptureBodies:ce,networkRequestHeaders:De,networkResponseHeaders:$e};x&&x.on("beforeAddBreadcrumb",(tt,Ot)=>yc(ut,tt,Ot))}catch{}}r(vc,"handleNetworkBreadcrumbs");function yc(P,x,W){if(x.data)try{Ec(x)&&_c(W)&&(mr(x,W),rr(x,W,P)),bc(x)&&Tc(W)&&(fo(x,W),Er(x,W,P))}catch{Et&&m.logger.warn("Error when enriching network breadcrumb")}}r(yc,"beforeAddNetworkBreadcrumb");function Ec(P){return P.category==="xhr"}r(Ec,"_isXhrBreadcrumb");function bc(P){return P.category==="fetch"}r(bc,"_isFetchBreadcrumb");function _c(P){return P&&P.xhr}r(_c,"_isXhrHint");function Tc(P){return P&&P.response}r(Tc,"_isFetchHint");function Cc(P){const x=p.getClient();a.addClickKeypressInstrumentationHandler(ot(P)),a.addHistoryInstrumentationHandler(wl(P)),ki(P),vc(P);const W=Il(P);p.addEventProcessor(W),x&&(x.on("beforeSendEvent",xa(P)),x.on("afterSendEvent",la(P)),x.on("createDsc",Z=>{const ce=P.getSessionId();ce&&P.isEnabled()&&P.recordingMode==="session"&&P.checkAndHandleExpiredSession()&&(Z.replay_id=ce)}),x.on("spanStart",Z=>{P.lastActiveSpan=Z}),x.on("spanEnd",Z=>{P.lastActiveSpan=Z}),x.on("beforeSendFeedback",(Z,ce)=>{const De=P.getSessionId();ce&&ce.includeReplay&&P.isEnabled()&&De&&Z.contexts&&Z.contexts.feedback&&(Z.contexts.feedback.replay_id=De)}))}r(Cc,"addGlobalListeners");async function Ou(P){try{return Promise.all($s(P,[Ic(s.performance.memory)]))}catch{return[]}}r(Ou,"addMemoryEntry");function Ic(P){const{jsHeapSizeLimit:x,totalJSHeapSize:W,usedJSHeapSize:Z}=P,ce=Date.now()/1e3;return{type:"memory",name:"memory",start:ce,end:ce,data:{memory:{jsHeapSizeLimit:x,totalJSHeapSize:W,usedJSHeapSize:Z}}}}r(Ic,"createMemoryEntry");function Yi(P,x,W){let Z,ce,De;const $e=W&&W.maxWait?Math.max(W.maxWait,x):0;function ut(){return tt(),Z=P(),Z}r(ut,"invokeFunc");function tt(){ce!==void 0&&clearTimeout(ce),De!==void 0&&clearTimeout(De),ce=De=void 0}r(tt,"cancelTimers");function Ot(){return ce!==void 0||De!==void 0?ut():Z}r(Ot,"flush");function vt(){return ce&&clearTimeout(ce),ce=setTimeout(ut,x),$e&&De===void 0&&(De=setTimeout(ut,$e)),Z}return r(vt,"debounced"),vt.cancel=tt,vt.flush=Ot,vt}r(Yi,"debounce");function Dl(P){let x=!1;return(W,Z)=>{if(!P.checkAndHandleExpiredSession()){Et&&m.logger.warn("[Replay] Received replay event after session expired.");return}const ce=Z||!x;x=!0,P.clickDetector&&Vr(P.clickDetector,W),P.addUpdate(()=>{if(P.recordingMode==="buffer"&&ce&&P.setInitialState(),!ma(P,W,ce))return!0;if(!ce)return!1;if(Al(P,ce),P.session&&P.session.previousSessionId)return!0;if(P.recordingMode==="buffer"&&P.session&&P.eventBuffer){const De=P.eventBuffer.getEarliestTimestamp();De&&(Ti(`[Replay] Updating session start time to earliest event in buffer to ${new Date(De)}`,P.getOptions()._experiments.traceInternals),P.session.started=De,P.getOptions().stickySession&&Yo(P.session))}return P.recordingMode==="session"&&P.flush(),!0})}}r(Dl,"getHandleRecordingEmit");function ya(P){const x=P.getOptions();return{type:Zn.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:P.isRecordingCanvas(),sessionSampleRate:x.sessionSampleRate,errorSampleRate:x.errorSampleRate,useCompressionOption:x.useCompression,blockAllMedia:x.blockAllMedia,maskAllText:x.maskAllText,maskAllInputs:x.maskAllInputs,useCompression:P.eventBuffer?P.eventBuffer.type==="worker":!1,networkDetailHasUrls:x.networkDetailAllowUrls.length>0,networkCaptureBodies:x.networkCaptureBodies,networkRequestHasHeaders:x.networkRequestHeaders.length>0,networkResponseHasHeaders:x.networkResponseHeaders.length>0}}}}r(ya,"createOptionsEvent");function Al(P,x){!x||!P.session||P.session.segmentId!==0||ma(P,ya(P),!1)}r(Al,"addSettingsEvent");function Ht(P,x,W,Z){return m.createEnvelope(m.createEventEnvelopeHeaders(P,m.getSdkMetadataForEnvelopeHeader(P),Z,W),[[{type:"replay_event"},P],[{type:"replay_recording",length:typeof x=="string"?new TextEncoder().encode(x).length:x.length},x]])}r(Ht,"createReplayEnvelope");function Mu({recordingData:P,headers:x}){let W;const Z=`${JSON.stringify(x)}
`;if(typeof P=="string")W=`${Z}${P}`;else{const De=new TextEncoder().encode(Z);W=new Uint8Array(De.length+P.length),W.set(De),W.set(P,De.length)}return W}r(Mu,"prepareRecordingData");async function Dn({client:P,scope:x,replayId:W,event:Z}){const ce=typeof P._integrations=="object"&&P._integrations!==null&&!Array.isArray(P._integrations)?Object.keys(P._integrations):void 0,De={event_id:W,integrations:ce};P.emit("preprocessEvent",Z,De);const $e=await p.prepareEvent(P.getOptions(),Z,De,x,P,p.getIsolationScope());if(!$e)return null;$e.platform=$e.platform||"javascript";const ut=P.getSdkMetadata(),{name:tt,version:Ot}=ut&&ut.sdk||{};return $e.sdk={...$e.sdk,name:tt||"sentry.javascript.unknown",version:Ot||"0.0.0"},$e}r(Dn,"prepareReplayEvent");async function wc({recordingData:P,replayId:x,segmentId:W,eventContext:Z,timestamp:ce,session:De}){const $e=Mu({recordingData:P,headers:{segment_id:W}}),{urls:ut,errorIds:tt,traceIds:Ot,initialTimestamp:vt}=Z,Wt=p.getClient(),qt=p.getCurrentScope(),fn=Wt&&Wt.getTransport(),In=Wt&&Wt.getDsn();if(!Wt||!fn||!In||!De.sampled)return m.resolvedSyncPromise({});const Qn={type:e,replay_start_timestamp:vt/1e3,timestamp:ce/1e3,error_ids:tt,trace_ids:Ot,urls:ut,replay_id:x,segment_id:W,replay_type:De.sampled},Oi=await Dn({scope:qt,client:Wt,replayId:x,event:Qn});if(!Oi)return Wt.recordDroppedEvent("event_processor","replay",Qn),Ti("An event processor returned `null`, will not send event."),m.resolvedSyncPromise({});delete Oi.sdkProcessingMetadata;const ri=Ht(Oi,$e,In,Wt.getOptions().tunnel);let Gi;try{Gi=await fn.send(ri)}catch(dr){const Lr=new Error(t);try{Lr.cause=dr}catch{}throw Lr}if(typeof Gi.statusCode=="number"&&(Gi.statusCode<200||Gi.statusCode>=300))throw new ja(Gi.statusCode);const lr=m.updateRateLimits({},Gi);if(m.isRateLimited(lr,"replay"))throw new Ol(lr);return Gi}r(wc,"sendReplayRequest");class ja extends Error{constructor(x){super(`Transport returned status code ${x}`)}}r(ja,"TransportStatusCodeError");class Ol extends Error{constructor(x){super("Rate limit hit"),this.rateLimits=x}}r(Ol,"RateLimitError");async function xd(P,x={count:0,interval:u}){const{recordingData:W,options:Z}=P;if(W.length)try{return await wc(P),!0}catch(ce){if(ce instanceof ja||ce instanceof Ol)throw ce;if(p.setContext("Replays",{_retryCount:x.count}),Et&&Z._experiments&&Z._experiments.captureExceptions&&p.captureException(ce),x.count>=v){const De=new Error(`${t} - max retries exceeded`);try{De.cause=ce}catch{}throw De}return x.interval*=++x.count,new Promise((De,$e)=>{setTimeout(async()=>{try{await xd(P,x),De(!0)}catch(ut){$e(ut)}},x.interval)})}}r(xd,"sendReplay");const Ml="__THROTTLED",Dc="__SKIPPED";function Ru(P,x,W){const Z=new Map,ce=r(ut=>{const tt=ut-W;Z.forEach((Ot,vt)=>{vt<tt&&Z.delete(vt)})},"_cleanup"),De=r(()=>[...Z.values()].reduce((ut,tt)=>ut+tt,0),"_getTotalCount");let $e=!1;return(...ut)=>{const tt=Math.floor(Date.now()/1e3);if(ce(tt),De()>=x){const vt=$e;return $e=!0,vt?Dc:Ml}$e=!1;const Ot=Z.get(tt)||0;return Z.set(tt,Ot+1),P(...ut)}}r(Ru,"throttle");class ls{constructor({options:x,recordingOptions:W}){ls.prototype.__init.call(this),ls.prototype.__init2.call(this),ls.prototype.__init3.call(this),ls.prototype.__init4.call(this),ls.prototype.__init5.call(this),ls.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:i,sessionIdleExpire:o},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=W,this._options=x,this._debouncedFlush=Yi(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Ru(($e,ut)=>Os(this,$e,ut),300,5);const{slowClickTimeout:Z,slowClickIgnoreSelectors:ce}=this.getOptions(),De=Z?{threshold:Math.min(_,Z),timeout:Z,scrollTimeout:C,ignoreSelector:ce?ce.join(","):""}:void 0;De&&(this.clickDetector=new Co(this,De))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(x){const{errorSampleRate:W,sessionSampleRate:Z}=this._options;if(!(W<=0&&Z<=0)){if(this._initializeSessionForSampling(x),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Rr(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Rr("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const x=ss({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=x,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Rr("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const x=ss({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=x,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const x=this._canvas;this._stopRecording=Or({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:S},emit:Dl(this),onMutation:this._onMutationHandler,...x?{recordCanvas:x.recordCanvas,getCanvasManager:x.getCanvasManager,sampling:x.sampling,dataURLOptions:x.dataURLOptions}:{}})}catch(x){this._handleException(x)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(x){return this._handleException(x),!1}}async stop({forceFlush:x=!1,reason:W}={}){if(this._isEnabled){this._isEnabled=!1;try{Ti(`[Replay] Stopping Replay${W?` triggered by ${W}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),x&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Jo(this)}catch(Z){this._handleException(Z)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Ti("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Ti("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:x=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const W=Date.now();Ti("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const Z=this.stopRecording();!x||!Z||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(W),this._updateSessionActivity(W),this._maybeSaveSession()),this.startRecording())}addUpdate(x){const W=x();this.recordingMode!=="buffer"&&W!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&oa(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const x=`${s.location.pathname}${s.location.hash}${s.location.search}`,W=`${s.location.origin}${x}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=W,this._context.initialTimestamp=Date.now(),this._context.urls.push(W)}throttledAddEvent(x,W){const Z=this._throttledAddEvent(x,W);if(Z===Ml){const ce=re({category:"replay.throttled"});this.addUpdate(()=>!ma(this,{type:ko,timestamp:ce.timestamp||0,data:{tag:"breadcrumb",payload:ce,metric:!0}}))}return Z}getCurrentRoute(){const x=this.lastActiveSpan||p.getActiveSpan(),W=x&&p.getRootSpan(x),ce=(W&&p.spanToJSON(W).data||{})[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(!(!W||!ce||!["route","custom"].includes(ce)))return p.spanToJSON(W).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Pr({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(x){Et&&m.logger.error("[Replay]",x),Et&&this._options._experiments&&this._options._experiments.captureExceptions&&p.captureException(x)}_initializeSessionForSampling(x){const W=this._options.errorSampleRate>0,Z=ss({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:x},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:W});this.session=Z}_checkSession(){if(!this.session)return!1;const x=this.session;return Gn(x,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(x),!1):!0}async _refreshSession(x){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(x.id))}_addListeners(){try{s.document.addEventListener("visibilitychange",this._handleVisibilityChange),s.addEventListener("blur",this._handleWindowBlur),s.addEventListener("focus",this._handleWindowFocus),s.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Cc(this),this._hasInitializedCoreListeners=!0)}catch(x){this._handleException(x)}this._performanceCleanupCallback=qi(this)}_removeListeners(){try{s.document.removeEventListener("visibilitychange",this._handleVisibilityChange),s.removeEventListener("blur",this._handleWindowBlur),s.removeEventListener("focus",this._handleWindowFocus),s.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(x){this._handleException(x)}}__init(){this._handleVisibilityChange=()=>{s.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const x=re({category:"ui.blur"});this._doChangeToBackgroundTasks(x)}}__init3(){this._handleWindowFocus=()=>{const x=re({category:"ui.focus"});this._doChangeToForegroundTasks(x)}}__init4(){this._handleKeyboardEvent=x=>{kt(this,x)}}_doChangeToBackgroundTasks(x){!this.session||Do(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(x&&this._createCustomBreadcrumb(x),this.conditionalFlush())}_doChangeToForegroundTasks(x){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Ti("[Replay] Document has become active, but session has expired");return}x&&this._createCustomBreadcrumb(x)}_updateUserActivity(x=Date.now()){this._lastActivity=x}_updateSessionActivity(x=Date.now()){this.session&&(this.session.lastActivity=x,this._maybeSaveSession())}_createCustomBreadcrumb(x){this.addUpdate(()=>{this.throttledAddEvent({type:Zn.Custom,timestamp:x.timestamp||0,data:{tag:"breadcrumb",payload:x}})})}_addPerformanceEntries(){const x=mn(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all($s(this,x))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:x,eventBuffer:W}=this;if(!x||!W||x.segmentId)return;const Z=W.getEarliestTimestamp();Z&&Z<this._context.initialTimestamp&&(this._context.initialTimestamp=Z)}_popEventContext(){const x={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),x}async _runFlush(){const x=this.getSessionId();if(!this.session||!this.eventBuffer||!x){Et&&m.logger.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await Ou(this),!!this.eventBuffer&&x===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const W=Date.now();if(W-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const Z=this._popEventContext(),ce=this.session.segmentId++;this._maybeSaveSession();const De=await this.eventBuffer.finish();await xd({replayId:x,recordingData:De,segmentId:ce,eventContext:Z,session:this.session,options:this.getOptions(),timestamp:W})}catch(W){this._handleException(W),this.stop({reason:"sendReplay"});const Z=p.getClient();Z&&Z.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:x=!1}={})=>{if(!this._isEnabled&&!x)return;if(!this.checkAndHandleExpiredSession()){Et&&m.logger.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const W=this.session.started,ce=Date.now()-W;this._debouncedFlush.cancel();const De=ce<this._options.minReplayDuration,$e=ce>this._options.maxReplayDuration+5e3;if(De||$e){Ti(`[Replay] Session duration (${Math.floor(ce/1e3)}s) is too ${De?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),De&&this._debouncedFlush();return}const ut=this.eventBuffer;if(ut&&this.session.segmentId===0&&!ut.hasCheckout&&Ti("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(tt){Et&&m.logger.error(tt)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Yo(this.session)}__init6(){this._onMutationHandler=x=>{const W=x.length,Z=this._options.mutationLimit,ce=this._options.mutationBreadcrumbLimit,De=Z&&W>Z;if(W>ce||De){const $e=re({category:"replay.mutations",data:{count:W,limit:De}});this._createCustomBreadcrumb($e)}return De?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}r(ls,"ReplayContainer");function Xn(P,x){return[...P,...x].join(",")}r(Xn,"getOption");function Ac({mask:P,unmask:x,block:W,unblock:Z,ignore:ce}){const De=['base[href="/"]'],$e=Xn(P,[".sentry-mask","[data-sentry-mask]"]),ut=Xn(x,[]);return{maskTextSelector:$e,unmaskTextSelector:ut,blockSelector:Xn(W,[".sentry-block","[data-sentry-block]",...De]),unblockSelector:Xn(Z,[]),ignoreSelector:Xn(ce,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}r(Ac,"getPrivacyOptions");function Oc({el:P,key:x,maskAttributes:W,maskAllText:Z,privacyOptions:ce,value:De}){return!Z||ce.unmaskTextSelector&&P.matches(ce.unmaskTextSelector)?De:W.includes(x)||x==="value"&&P.tagName==="INPUT"&&["submit","button"].includes(P.getAttribute("type")||"")?De.replace(/[\S]/g,"*"):De}r(Oc,"maskAttribute");const Ud='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Mc=["content-length","content-type","accept"];let Vd=!1;const Hd=r(P=>new Ea(P),"replayIntegration");class Ea{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:x=c,flushMaxDelay:W=g,minReplayDuration:Z=A,maxReplayDuration:ce=O,stickySession:De=!0,useCompression:$e=!0,workerUrl:ut,_experiments:tt={},maskAllText:Ot=!0,maskAllInputs:vt=!0,blockAllMedia:Wt=!0,mutationBreadcrumbLimit:qt=750,mutationLimit:fn=1e4,slowClickTimeout:In=7e3,slowClickIgnoreSelectors:Qn=[],networkDetailAllowUrls:Oi=[],networkDetailDenyUrls:ri=[],networkCaptureBodies:Gi=!0,networkRequestHeaders:lr=[],networkResponseHeaders:dr=[],mask:Lr=[],maskAttributes:Ni=["title","placeholder"],unmask:ei=[],block:tr=[],unblock:zr=[],ignore:ti=[],maskFn:ji,beforeAddRecordingEvent:Dr,beforeErrorSampling:to}={}){this.name=Ea.id;const po=Ac({mask:Lr,unmask:ei,block:tr,unblock:zr,ignore:ti});if(this._recordingOptions={maskAllInputs:vt,maskAllText:Ot,maskInputOptions:{password:!0},maskTextFn:ji,maskInputFn:ji,maskAttributeFn:(Mo,br,Lo)=>Oc({maskAttributes:Ni,maskAllText:Ot,privacyOptions:po,key:Mo,value:br,el:Lo}),...po,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:Mo=>{try{Mo.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:x,flushMaxDelay:W,minReplayDuration:Math.min(Z,w),maxReplayDuration:Math.min(ce,O),stickySession:De,useCompression:$e,workerUrl:ut,blockAllMedia:Wt,maskAllInputs:vt,maskAllText:Ot,mutationBreadcrumbLimit:qt,mutationLimit:fn,slowClickTimeout:In,slowClickIgnoreSelectors:Qn,networkDetailAllowUrls:Oi,networkDetailDenyUrls:ri,networkCaptureBodies:Gi,networkRequestHeaders:Wd(lr),networkResponseHeaders:Wd(dr),beforeAddRecordingEvent:Dr,beforeErrorSampling:to,_experiments:tt},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ud}`:Ud),this._isInitialized&&m.isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Vd}set _isInitialized(x){Vd=x}setupOnce(){m.isBrowser()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(x){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(x)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const x=Rc(this._initialOptions);this._replay=new ls({options:x,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const W=p.getClient().getIntegrationByName("ReplayCanvas");if(!W)return;this._replay._canvas=W.getOptions()}catch{}}}r(Ea,"Replay"),Ea.__initStatic();function Rc(P){const x=p.getClient(),W=x&&x.getOptions(),Z={sessionSampleRate:0,errorSampleRate:0,...m.dropUndefinedKeys(P)};if(!W)return m.consoleSandbox(()=>{console.warn("SDK client is not available.")}),Z;const ce=p.parseSampleRate(W.replaysSessionSampleRate),De=p.parseSampleRate(W.replaysOnErrorSampleRate);return ce==null&&De==null&&m.consoleSandbox(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),ce!=null&&(Z.sessionSampleRate=ce),De!=null&&(Z.errorSampleRate=De),Z}r(Rc,"loadReplayOptionsFromClient");function Wd(P){return[...Mc,...P.map(x=>x.toLowerCase())]}r(Wd,"_getMergedNetworkHeaders");function Pc(){const P=p.getClient();return P&&P.getIntegrationByName("Replay")}r(Pc,"getReplay"),l.getReplay=Pc,l.replayIntegration=Hd},8151162894:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(375537670),a=d(9046403702),s=d(7738910413);class n extends f.BaseClient{constructor(t){const i={parentSpanIsAlwaysRootSpan:!0,...t},o=a.WINDOW.SENTRY_SDK_SOURCE||h.getSDKSource();f.applySdkMetadata(i,"browser",["browser"],o),super(i),i.sendClientReports&&a.WINDOW.document&&a.WINDOW.document.addEventListener("visibilitychange",()=>{a.WINDOW.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,i){return m.eventFromException(this._options.stackParser,t,i,this._options.attachStacktrace)}eventFromMessage(t,i="info",o){return m.eventFromMessage(this._options.stackParser,t,i,o,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){p.DEBUG_BUILD&&h.logger.warn("SDK not enabled, will not capture user feedback.");return}const i=s.createUserFeedbackEnvelope(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(i)}_prepareEvent(t,i,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,i,o)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){p.DEBUG_BUILD&&h.logger.log("No outcomes to send");return}if(!this._dsn){p.DEBUG_BUILD&&h.logger.log("No dsn provided, will not send outcomes");return}p.DEBUG_BUILD&&h.logger.log("Sending outcomes:",t);const i=h.createClientReportEnvelope(t,this._options.tunnel&&h.dsnToString(this._dsn));this.sendEnvelope(i)}}r(n,"BrowserClient"),l.BrowserClient=n},3345899401:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},375537670:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614);function p(b,_){const C=s(b,_),I={type:_&&_.name,value:i(_)};return C.length&&(I.stacktrace={frames:C}),I.type===void 0&&I.value===""&&(I.value="Unrecoverable error caught"),I}r(p,"exceptionFromError");function m(b,_,C,I){const A=f.getClient(),w=A&&A.getOptions().normalizeDepth,O=E(_),R={__serialized__:h.normalizeToSize(_,w)};if(O)return{exception:{values:[p(b,O)]},extra:R};const F={exception:{values:[{type:h.isEvent(_)?_.constructor.name:I?"UnhandledRejection":"Error",value:u(_,{isUnhandledRejection:I})}]},extra:R};if(C){const V=s(b,C);V.length&&(F.exception.values[0].stacktrace={frames:V})}return F}r(m,"eventFromPlainObject");function a(b,_){return{exception:{values:[p(b,_)]}}}r(a,"eventFromError");function s(b,_){const C=_.stacktrace||_.stack||"",I=e(_),A=t(_);try{return b(C,I,A)}catch{}return[]}r(s,"parseStackFrames");const n=/Minified React error #\d+;/i;function e(b){return b&&n.test(b.message)?1:0}r(e,"getSkipFirstStackStringLines");function t(b){return typeof b.framesToPop=="number"?b.framesToPop:0}r(t,"getPopFirstTopFrames");function i(b){const _=b&&b.message;return _?_.error&&typeof _.error.message=="string"?_.error.message:_:"No error message"}r(i,"extractMessage");function o(b,_,C,I){const A=C&&C.syntheticException||void 0,w=g(b,_,A,I);return h.addExceptionMechanism(w),w.level="error",C&&C.event_id&&(w.event_id=C.event_id),h.resolvedSyncPromise(w)}r(o,"eventFromException");function c(b,_,C="info",I,A){const w=I&&I.syntheticException||void 0,O=S(b,_,w,A);return O.level=C,I&&I.event_id&&(O.event_id=I.event_id),h.resolvedSyncPromise(O)}r(c,"eventFromMessage");function g(b,_,C,I,A){let w;if(h.isErrorEvent(_)&&_.error)return a(b,_.error);if(h.isDOMError(_)||h.isDOMException(_)){const O=_;if("stack"in _)w=a(b,_);else{const R=O.name||(h.isDOMError(O)?"DOMError":"DOMException"),F=O.message?`${R}: ${O.message}`:R;w=S(b,F,C,I),h.addExceptionTypeValue(w,F)}return"code"in O&&(w.tags={...w.tags,"DOMException.code":`${O.code}`}),w}return h.isError(_)?a(b,_):h.isPlainObject(_)||h.isEvent(_)?(w=m(b,_,C,A),h.addExceptionMechanism(w,{synthetic:!0}),w):(w=S(b,_,C,I),h.addExceptionTypeValue(w,`${_}`,void 0),h.addExceptionMechanism(w,{synthetic:!0}),w)}r(g,"eventFromUnknownInput");function S(b,_,C,I){const A={};if(I&&C){const w=s(b,C);w.length&&(A.exception={values:[{value:_,stacktrace:{frames:w}}]})}if(h.isParameterizedString(_)){const{__sentry_template_string__:w,__sentry_template_values__:O}=_;return A.logentry={message:w,params:O},A}return A.message=_,A}r(S,"eventFromString");function u(b,{isUnhandledRejection:_}){const C=h.extractExceptionKeysForMessage(b),I=_?"promise rejection":"exception";return h.isErrorEvent(b)?`Event \`ErrorEvent\` captured as ${I} with message \`${b.message}\``:h.isEvent(b)?`Event \`${v(b)}\` (type=${b.type}) captured as ${I}`:`Object captured as ${I} with keys: ${C}`}r(u,"getNonErrorObjectExceptionValue");function v(b){try{const _=Object.getPrototypeOf(b);return _?_.constructor.name:void 0}catch{}}r(v,"getObjectClassName");function E(b){for(const _ in b)if(Object.prototype.hasOwnProperty.call(b,_)){const C=b[_];if(C instanceof Error)return C}}r(E,"getErrorPropertyFromObject"),l.eventFromException=o,l.eventFromMessage=c,l.eventFromUnknownInput=g,l.exceptionFromError=p},2915497046:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6049995776),h=d(1076637753),p=f.buildFeedbackIntegration({lazyLoadIntegration:h.lazyLoadIntegration});l.feedbackAsyncIntegration=p},9038494489:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6049995776),h=d(1076637753),p=f.buildFeedbackIntegration({lazyLoadIntegration:h.lazyLoadIntegration,getModalIntegration:()=>f.feedbackModalIntegration,getScreenshotIntegration:()=>f.feedbackScreenshotIntegration});l.feedbackSyncIntegration=p},9046403702:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ;let m=0;function a(){return m>0}r(a,"shouldIgnoreOnError");function s(){m++,setTimeout(()=>{m--})}r(s,"ignoreNextOnError");function n(e,t={},i){if(typeof e!="function")return e;try{const c=e.__sentry_wrapped__;if(c)return c;if(h.getOriginalFunction(e))return e}catch{return e}const o=r(function(){const c=Array.prototype.slice.call(arguments);try{i&&typeof i=="function"&&i.apply(this,arguments);const g=c.map(S=>n(S,t));return e.apply(this,g)}catch(g){throw s(),f.withScope(S=>{S.addEventProcessor(u=>(t.mechanism&&(h.addExceptionTypeValue(u,void 0,void 0),h.addExceptionMechanism(u,t.mechanism)),u.extra={...u.extra,arguments:c},u)),f.captureException(g)}),g}},"sentryWrapped");try{for(const c in e)Object.prototype.hasOwnProperty.call(e,c)&&(o[c]=e[c])}catch{}h.markFunctionWrapped(o,e),h.addNonEnumerableProperty(e,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get(){return e.name}})}catch{}return o}r(n,"wrap"),l.WINDOW=p,l.ignoreNextOnError=s,l.shouldIgnoreOnError=a,l.wrap=n},8904626639:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(1114790286),p=d(9046403702),m=d(8151162894),a=d(8685600704),s=d(4795369790),n=d(375537670),e=d(7738910413),t=d(7672786771),i=d(3985552739),o=d(2334015581),c=d(7098914998),g=d(4305747877),S=d(9919948800),u=d(1076637753),v=d(918703877),E=d(328044736),b=d(4269444637),_=d(6979168052),C=d(4947629935),I=d(2915497046),A=d(9038494489),w=d(6049995776),O=d(6520656099),R=d(5559796378),F=d(7824548363),V=d(5380267868);l.SDK_VERSION=f.SDK_VERSION,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=f.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=f.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=f.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=f.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.Scope=f.Scope,l.addBreadcrumb=f.addBreadcrumb,l.addEventProcessor=f.addEventProcessor,l.addIntegration=f.addIntegration,l.addTracingExtensions=f.addTracingExtensions,l.captureConsoleIntegration=f.captureConsoleIntegration,l.captureEvent=f.captureEvent,l.captureException=f.captureException,l.captureFeedback=f.captureFeedback,l.captureMessage=f.captureMessage,l.captureSession=f.captureSession,l.close=f.close,l.continueTrace=f.continueTrace,l.createTransport=f.createTransport,l.debugIntegration=f.debugIntegration,l.dedupeIntegration=f.dedupeIntegration,l.endSession=f.endSession,l.extraErrorDataIntegration=f.extraErrorDataIntegration,l.flush=f.flush,l.functionToStringIntegration=f.functionToStringIntegration,l.getActiveSpan=f.getActiveSpan,l.getClient=f.getClient,l.getCurrentHub=f.getCurrentHub,l.getCurrentScope=f.getCurrentScope,l.getGlobalScope=f.getGlobalScope,l.getIsolationScope=f.getIsolationScope,l.getRootSpan=f.getRootSpan,l.getSpanDescendants=f.getSpanDescendants,l.getSpanStatusFromHttpCode=f.getSpanStatusFromHttpCode,l.inboundFiltersIntegration=f.inboundFiltersIntegration,l.isInitialized=f.isInitialized,l.lastEventId=f.lastEventId,l.makeMultiplexedTransport=f.makeMultiplexedTransport,l.moduleMetadataIntegration=f.moduleMetadataIntegration,l.parameterize=f.parameterize,l.registerSpanErrorInstrumentation=f.registerSpanErrorInstrumentation,l.rewriteFramesIntegration=f.rewriteFramesIntegration,l.sessionTimingIntegration=f.sessionTimingIntegration,l.setContext=f.setContext,l.setCurrentClient=f.setCurrentClient,l.setExtra=f.setExtra,l.setExtras=f.setExtras,l.setHttpStatus=f.setHttpStatus,l.setMeasurement=f.setMeasurement,l.setTag=f.setTag,l.setTags=f.setTags,l.setUser=f.setUser,l.spanToBaggageHeader=f.spanToBaggageHeader,l.spanToJSON=f.spanToJSON,l.spanToTraceHeader=f.spanToTraceHeader,l.startInactiveSpan=f.startInactiveSpan,l.startSession=f.startSession,l.startSpan=f.startSpan,l.startSpanManual=f.startSpanManual,l.withActiveSpan=f.withActiveSpan,l.withIsolationScope=f.withIsolationScope,l.withScope=f.withScope,l.zodErrorsIntegration=f.zodErrorsIntegration,l.metrics=h.metrics,l.WINDOW=p.WINDOW,l.BrowserClient=m.BrowserClient,l.makeFetchTransport=a.makeFetchTransport,l.chromeStackLineParser=s.chromeStackLineParser,l.defaultStackLineParsers=s.defaultStackLineParsers,l.defaultStackParser=s.defaultStackParser,l.geckoStackLineParser=s.geckoStackLineParser,l.opera10StackLineParser=s.opera10StackLineParser,l.opera11StackLineParser=s.opera11StackLineParser,l.winjsStackLineParser=s.winjsStackLineParser,l.eventFromException=n.eventFromException,l.eventFromMessage=n.eventFromMessage,l.exceptionFromError=n.exceptionFromError,l.createUserFeedbackEnvelope=e.createUserFeedbackEnvelope,l.captureUserFeedback=t.captureUserFeedback,l.forceLoad=t.forceLoad,l.getDefaultIntegrations=t.getDefaultIntegrations,l.init=t.init,l.onLoad=t.onLoad,l.showReportDialog=t.showReportDialog,l.breadcrumbsIntegration=i.breadcrumbsIntegration,l.globalHandlersIntegration=o.globalHandlersIntegration,l.httpContextIntegration=c.httpContextIntegration,l.linkedErrorsIntegration=g.linkedErrorsIntegration,l.browserApiErrorsIntegration=S.browserApiErrorsIntegration,l.lazyLoadIntegration=u.lazyLoadIntegration,l.reportingObserverIntegration=v.reportingObserverIntegration,l.httpClientIntegration=E.httpClientIntegration,l.contextLinesIntegration=b.contextLinesIntegration,l.getReplay=_.getReplay,l.replayIntegration=_.replayIntegration,l.replayCanvasIntegration=C.replayCanvasIntegration,l.feedbackAsyncIntegration=I.feedbackAsyncIntegration,l.feedbackIntegration=A.feedbackSyncIntegration,l.feedbackSyncIntegration=A.feedbackSyncIntegration,l.getFeedback=w.getFeedback,l.sendFeedback=w.sendFeedback,l.defaultRequestInstrumentationOptions=O.defaultRequestInstrumentationOptions,l.instrumentOutgoingRequests=O.instrumentOutgoingRequests,l.browserTracingIntegration=R.browserTracingIntegration,l.startBrowserTracingNavigationSpan=R.startBrowserTracingNavigationSpan,l.startBrowserTracingPageLoadSpan=R.startBrowserTracingPageLoadSpan,l.makeBrowserOfflineTransport=F.makeBrowserOfflineTransport,l.browserProfilingIntegration=V.browserProfilingIntegration},3985552739:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(3345899401),a=d(9046403702),s=1024,n="Breadcrumbs",e=r((E={})=>{const b={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...E};return{name:n,setup(_){b.console&&p.addConsoleInstrumentationHandler(c(_)),b.dom&&f.addClickKeypressInstrumentationHandler(o(_,b.dom)),b.xhr&&f.addXhrInstrumentationHandler(g(_)),b.fetch&&p.addFetchInstrumentationHandler(S(_)),b.history&&f.addHistoryInstrumentationHandler(u(_)),b.sentry&&_.on("beforeSendEvent",i(_))}}},"_breadcrumbsIntegration"),t=h.defineIntegration(e);function i(E){return r(function(_){h.getClient()===E&&h.addBreadcrumb({category:`sentry.${_.type==="transaction"?"transaction":"event"}`,event_id:_.event_id,level:_.level,message:p.getEventDescription(_)},{event:_})},"addSentryBreadcrumb")}r(i,"_getSentryBreadcrumbHandler");function o(E,b){return r(function(C){if(h.getClient()!==E)return;let I,A,w=typeof b=="object"?b.serializeAttribute:void 0,O=typeof b=="object"&&typeof b.maxStringLength=="number"?b.maxStringLength:void 0;O&&O>s&&(m.DEBUG_BUILD&&p.logger.warn(`\`dom.maxStringLength\` cannot exceed ${s}, but a value of ${O} was configured. Sentry will use ${s} instead.`),O=s),typeof w=="string"&&(w=[w]);try{const F=C.event,V=v(F)?F.target:F;I=p.htmlTreeAsString(V,{keyAttrs:w,maxStringLength:O}),A=p.getComponentName(V)}catch{I="<unknown>"}if(I.length===0)return;const R={category:`ui.${C.name}`,message:I};A&&(R.data={"ui.component_name":A}),h.addBreadcrumb(R,{event:C.event,name:C.name,global:C.global})},"_innerDomBreadcrumb")}r(o,"_getDomBreadcrumbHandler");function c(E){return r(function(_){if(h.getClient()!==E)return;const C={category:"console",data:{arguments:_.args,logger:"console"},level:p.severityLevelFromString(_.level),message:p.safeJoin(_.args," ")};if(_.level==="assert")if(_.args[0]===!1)C.message=`Assertion failed: ${p.safeJoin(_.args.slice(1)," ")||"console.assert"}`,C.data.arguments=_.args.slice(1);else return;h.addBreadcrumb(C,{input:_.args,level:_.level})},"_consoleBreadcrumb")}r(c,"_getConsoleBreadcrumbHandler");function g(E){return r(function(_){if(h.getClient()!==E)return;const{startTimestamp:C,endTimestamp:I}=_,A=_.xhr[f.SENTRY_XHR_DATA_KEY];if(!C||!I||!A)return;const{method:w,url:O,status_code:R,body:F}=A,V={method:w,url:O,status_code:R},$={xhr:_.xhr,input:F,startTimestamp:C,endTimestamp:I};h.addBreadcrumb({category:"xhr",data:V,type:"http"},$)},"_xhrBreadcrumb")}r(g,"_getXhrBreadcrumbHandler");function S(E){return r(function(_){if(h.getClient()!==E)return;const{startTimestamp:C,endTimestamp:I}=_;if(I&&!(_.fetchData.url.match(/sentry_key/)&&_.fetchData.method==="POST"))if(_.error){const A=_.fetchData,w={data:_.error,input:_.args,startTimestamp:C,endTimestamp:I};h.addBreadcrumb({category:"fetch",data:A,level:"error",type:"http"},w)}else{const A=_.response,w={..._.fetchData,status_code:A&&A.status},O={input:_.args,response:A,startTimestamp:C,endTimestamp:I};h.addBreadcrumb({category:"fetch",data:w,type:"http"},O)}},"_fetchBreadcrumb")}r(S,"_getFetchBreadcrumbHandler");function u(E){return r(function(_){if(h.getClient()!==E)return;let C=_.from,I=_.to;const A=p.parseUrl(a.WINDOW.location.href);let w=C?p.parseUrl(C):void 0;const O=p.parseUrl(I);(!w||!w.path)&&(w=A),A.protocol===O.protocol&&A.host===O.host&&(I=O.relative),A.protocol===w.protocol&&A.host===w.host&&(C=w.relative),h.addBreadcrumb({category:"navigation",data:{from:C,to:I}})},"_historyBreadcrumb")}r(u,"_getHistoryBreadcrumbHandler");function v(E){return!!E&&!!E.target}r(v,"_isEvent"),l.breadcrumbsIntegration=t},9919948800:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(9046403702),m=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a="BrowserApiErrors",s=r((c={})=>{const g={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...c};return{name:a,setupOnce(){g.setTimeout&&h.fill(p.WINDOW,"setTimeout",e),g.setInterval&&h.fill(p.WINDOW,"setInterval",e),g.requestAnimationFrame&&h.fill(p.WINDOW,"requestAnimationFrame",t),g.XMLHttpRequest&&"XMLHttpRequest"in p.WINDOW&&h.fill(XMLHttpRequest.prototype,"send",i);const S=g.eventTarget;S&&(Array.isArray(S)?S:m).forEach(o)}}},"_browserApiErrorsIntegration"),n=f.defineIntegration(s);function e(c){return function(...g){const S=g[0];return g[0]=p.wrap(S,{mechanism:{data:{function:h.getFunctionName(c)},handled:!1,type:"instrument"}}),c.apply(this,g)}}r(e,"_wrapTimeFunction");function t(c){return function(g){return c.apply(this,[p.wrap(g,{mechanism:{data:{function:"requestAnimationFrame",handler:h.getFunctionName(c)},handled:!1,type:"instrument"}})])}}r(t,"_wrapRAF");function i(c){return function(...g){const S=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(v=>{v in S&&typeof S[v]=="function"&&h.fill(S,v,function(E){const b={mechanism:{data:{function:v,handler:h.getFunctionName(E)},handled:!1,type:"instrument"}},_=h.getOriginalFunction(E);return _&&(b.mechanism.data.handler=h.getFunctionName(_)),p.wrap(E,b)})}),c.apply(this,g)}}r(i,"_wrapXHR");function o(c){const g=p.WINDOW,S=g[c]&&g[c].prototype;!S||!S.hasOwnProperty||!S.hasOwnProperty("addEventListener")||(h.fill(S,"addEventListener",function(u){return function(v,E,b){try{typeof E.handleEvent=="function"&&(E.handleEvent=p.wrap(E.handleEvent,{mechanism:{data:{function:"handleEvent",handler:h.getFunctionName(E),target:c},handled:!1,type:"instrument"}}))}catch{}return u.apply(this,[v,p.wrap(E,{mechanism:{data:{function:"addEventListener",handler:h.getFunctionName(E),target:c},handled:!1,type:"instrument"}}),b])}}),h.fill(S,"removeEventListener",function(u){return function(v,E,b){const _=E;try{const C=_&&_.__sentry_wrapped__;C&&u.call(this,v,C,b)}catch{}return u.call(this,v,_,b)}}))}r(o,"_wrapEventTarget"),l.browserApiErrorsIntegration=n},4269444637:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ,m=7,a="ContextLines",s=r((i={})=>{const o=i.frameContextLines!=null?i.frameContextLines:m;return{name:a,processEvent(c){return e(c,o)}}},"_contextLinesIntegration"),n=f.defineIntegration(s);function e(i,o){const c=p.document,g=p.location&&h.stripUrlQueryAndFragment(p.location.href);if(!c||!g)return i;const S=i.exception&&i.exception.values;if(!S||!S.length)return i;const u=c.documentElement.innerHTML;if(!u)return i;const v=["<!DOCTYPE html>","<html>",...u.split(`
`),"</html>"];return S.forEach(E=>{const b=E.stacktrace;b&&b.frames&&(b.frames=b.frames.map(_=>t(_,v,g,o)))}),i}r(e,"addSourceContext");function t(i,o,c,g){return i.filename!==c||!i.lineno||!o.length||h.addContextToFrame(o,i,g),i}r(t,"applySourceContextToFrame"),l.applySourceContextToFrame=t,l.contextLinesIntegration=n},2334015581:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(375537670),a=d(9046403702),s="GlobalHandlers",n=r((v={})=>{const E={onerror:!0,onunhandledrejection:!0,...v};return{name:s,setupOnce(){Error.stackTraceLimit=50},setup(b){E.onerror&&(t(b),S("onerror")),E.onunhandledrejection&&(i(b),S("onunhandledrejection"))}}},"_globalHandlersIntegration"),e=f.defineIntegration(n);function t(v){h.addGlobalErrorInstrumentationHandler(E=>{const{stackParser:b,attachStacktrace:_}=u();if(f.getClient()!==v||a.shouldIgnoreOnError())return;const{msg:C,url:I,line:A,column:w,error:O}=E,R=g(m.eventFromUnknownInput(b,O||C,void 0,_,!1),I,A,w);R.level="error",f.captureEvent(R,{originalException:O,mechanism:{handled:!1,type:"onerror"}})})}r(t,"_installGlobalOnErrorHandler");function i(v){h.addGlobalUnhandledRejectionInstrumentationHandler(E=>{const{stackParser:b,attachStacktrace:_}=u();if(f.getClient()!==v||a.shouldIgnoreOnError())return;const C=o(E),I=h.isPrimitive(C)?c(C):m.eventFromUnknownInput(b,C,void 0,_,!0);I.level="error",f.captureEvent(I,{originalException:C,mechanism:{handled:!1,type:"onunhandledrejection"}})})}r(i,"_installGlobalOnUnhandledRejectionHandler");function o(v){if(h.isPrimitive(v))return v;try{if("reason"in v)return v.reason;if("detail"in v&&"reason"in v.detail)return v.detail.reason}catch{}return v}r(o,"_getUnhandledRejectionError");function c(v){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(v)}`}]}}}r(c,"_eventFromRejectionWithPrimitive");function g(v,E,b,_){const C=v.exception=v.exception||{},I=C.values=C.values||[],A=I[0]=I[0]||{},w=A.stacktrace=A.stacktrace||{},O=w.frames=w.frames||[],R=isNaN(parseInt(_,10))?void 0:_,F=isNaN(parseInt(b,10))?void 0:b,V=h.isString(E)&&E.length>0?E:h.getLocationHref();return O.length===0&&O.push({colno:R,filename:V,function:h.UNKNOWN_FUNCTION,in_app:!0,lineno:F}),v}r(g,"_enhanceEventWithInitialFrame");function S(v){p.DEBUG_BUILD&&h.logger.log(`Global Handler attached: ${v}`)}r(S,"globalHandlerLog");function u(){const v=f.getClient();return v&&v.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}r(u,"getOptions"),l.globalHandlersIntegration=e},328044736:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(3345899401),a="HttpClient",s=r((A={})=>{const w={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...A};return{name:a,setup(O){v(O,w),E(O,w)}}},"_httpClientIntegration"),n=h.defineIntegration(s);function e(A,w,O,R){if(b(A,O.status,O.url)){const F=C(w,R);let V,$,X,Y;I()&&([{headers:V,cookies:X},{headers:$,cookies:Y}]=[{cookieHeader:"Cookie",obj:F},{cookieHeader:"Set-Cookie",obj:O}].map(({cookieHeader:ie,obj:ge})=>{const Ie=c(ge.headers);let We;try{const ct=Ie[ie]||Ie[ie.toLowerCase()]||void 0;ct&&(We=o(ct))}catch{m.DEBUG_BUILD&&p.logger.log(`Could not extract cookies from header ${ie}`)}return{headers:Ie,cookies:We}}));const ne=_({url:F.url,method:F.method,status:O.status,requestHeaders:V,responseHeaders:$,requestCookies:X,responseCookies:Y});h.captureEvent(ne)}}r(e,"_fetchResponseHandler");function t(A,w,O,R){if(b(A,w.status,w.responseURL)){let F,V,$;if(I()){try{const Y=w.getResponseHeader("Set-Cookie")||w.getResponseHeader("set-cookie")||void 0;Y&&(V=o(Y))}catch{m.DEBUG_BUILD&&p.logger.log("Could not extract cookies from response headers")}try{$=g(w)}catch{m.DEBUG_BUILD&&p.logger.log("Could not extract headers from response")}F=R}const X=_({url:w.responseURL,method:O,status:w.status,requestHeaders:F,responseHeaders:$,responseCookies:V});h.captureEvent(X)}}r(t,"_xhrResponseHandler");function i(A){if(A){const w=A["Content-Length"]||A["content-length"];if(w)return parseInt(w,10)}}r(i,"_getResponseSizeFromHeaders");function o(A){return A.split("; ").reduce((w,O)=>{const[R,F]=O.split("=");return w[R]=F,w},{})}r(o,"_parseCookieString");function c(A){const w={};return A.forEach((O,R)=>{w[R]=O}),w}r(c,"_extractFetchHeaders");function g(A){const w=A.getAllResponseHeaders();return w?w.split(`\r
`).reduce((O,R)=>{const[F,V]=R.split(": ");return O[F]=V,O},{}):{}}r(g,"_getXHRResponseHeaders");function S(A,w){return A.some(O=>typeof O=="string"?w.includes(O):O.test(w))}r(S,"_isInGivenRequestTargets");function u(A,w){return A.some(O=>typeof O=="number"?O===w:w>=O[0]&&w<=O[1])}r(u,"_isInGivenStatusRanges");function v(A,w){p.supportsNativeFetch()&&p.addFetchInstrumentationHandler(O=>{if(h.getClient()!==A)return;const{response:R,args:F}=O,[V,$]=F;R&&e(w,V,R,$)})}r(v,"_wrapFetch");function E(A,w){"XMLHttpRequest"in p.GLOBAL_OBJ&&f.addXhrInstrumentationHandler(O=>{if(h.getClient()!==A)return;const R=O.xhr,F=R[f.SENTRY_XHR_DATA_KEY];if(!F)return;const{method:V,request_headers:$}=F;try{t(w,R,V,$)}catch(X){m.DEBUG_BUILD&&p.logger.warn("Error while extracting response event form XHR response",X)}})}r(E,"_wrapXHR");function b(A,w,O){return u(A.failedRequestStatusCodes,w)&&S(A.failedRequestTargets,O)&&!h.isSentryRequestUrl(O,h.getClient())}r(b,"_shouldCaptureResponse");function _(A){const w=`HTTP Client Error with status code: ${A.status}`,O={message:w,exception:{values:[{type:"Error",value:w}]},request:{url:A.url,method:A.method,headers:A.requestHeaders,cookies:A.requestCookies},contexts:{response:{status_code:A.status,headers:A.responseHeaders,cookies:A.responseCookies,body_size:i(A.responseHeaders)}}};return p.addExceptionMechanism(O,{type:"http.client",handled:!1}),O}r(_,"_createEvent");function C(A,w){return!w&&A instanceof Request||A instanceof Request&&A.bodyUsed?A:new Request(A,w)}r(C,"_getRequest");function I(){const A=h.getClient();return A?Boolean(A.getOptions().sendDefaultPii):!1}r(I,"_shouldSendDefaultPii"),l.httpClientIntegration=n},7098914998:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(9046403702),p=f.defineIntegration(()=>({name:"HttpContext",preprocessEvent(m){if(!h.WINDOW.navigator&&!h.WINDOW.location&&!h.WINDOW.document)return;const a=m.request&&m.request.url||h.WINDOW.location&&h.WINDOW.location.href,{referrer:s}=h.WINDOW.document||{},{userAgent:n}=h.WINDOW.navigator||{},e={...m.request&&m.request.headers,...s&&{Referer:s},...n&&{"User-Agent":n}},t={...m.request,...a&&{url:a},headers:e};m.request=t}}));l.httpContextIntegration=p},4305747877:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(375537670),m="cause",a=5,s="LinkedErrors",n=r((t={})=>{const i=t.limit||a,o=t.key||m;return{name:s,preprocessEvent(c,g,S){const u=S.getOptions();h.applyAggregateErrorsToEvent(p.exceptionFromError,u.stackParser,u.maxValueLength,o,i,c,g)}}},"_linkedErrorsIntegration"),e=f.defineIntegration(n);l.linkedErrorsIntegration=e},918703877:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=h.GLOBAL_OBJ,m="ReportingObserver",a=new WeakMap,s=r((e={})=>{const t=e.types||["crash","deprecation","intervention"];function i(o){if(a.has(f.getClient()))for(const c of o)f.withScope(g=>{g.setExtra("url",c.url);const S=`ReportingObserver [${c.type}]`;let u="No details available";if(c.body){const v={};for(const E in c.body)v[E]=c.body[E];if(g.setExtra("body",v),c.type==="crash"){const E=c.body;u=[E.crashId||"",E.reason||""].join(" ").trim()||u}else u=c.body.message||u}f.captureMessage(`${S}: ${u}`)})}return r(i,"handler"),{name:m,setupOnce(){if(!h.supportsReportingObserver())return;new p.ReportingObserver(i,{buffered:!0,types:t}).observe()},setup(o){a.set(o,!0)}}},"_reportingObserverIntegration"),n=f.defineIntegration(s);l.reportingObserverIntegration=n},1114790286:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710);function h(n,e=1,t){f.metrics.increment(f.BrowserMetricsAggregator,n,e,t)}r(h,"increment");function p(n,e,t){f.metrics.distribution(f.BrowserMetricsAggregator,n,e,t)}r(p,"distribution");function m(n,e,t){f.metrics.set(f.BrowserMetricsAggregator,n,e,t)}r(m,"set");function a(n,e,t){f.metrics.gauge(f.BrowserMetricsAggregator,n,e,t)}r(a,"gauge");const s={increment:h,distribution:p,set:m,gauge:a};l.metrics=s},5380267868:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(3423034766),a=d(9596377211),s="BrowserProfiling",n=r(()=>({name:s,setup(t){const i=f.getActiveSpan(),o=i&&f.getRootSpan(i);o&&a.isAutomatedPageLoadSpan(o)&&a.shouldProfileSpan(o)&&m.startProfileForSpan(o),t.on("spanStart",c=>{c===f.getRootSpan(c)&&a.shouldProfileSpan(c)&&m.startProfileForSpan(c)}),t.on("beforeEnvelope",c=>{if(!a.getActiveProfilesCount())return;const g=a.findProfiledTransactionsFromEnvelope(c);if(!g.length)return;const S=[];for(const u of g){const v=u&&u.contexts,E=v&&v.profile&&v.profile.profile_id,b=v&&v.profile&&v.profile.start_timestamp;if(typeof E!="string"){p.DEBUG_BUILD&&h.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!E){p.DEBUG_BUILD&&h.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}v&&v.profile&&delete v.profile;const _=a.takeProfileFromGlobalCache(E);if(!_){p.DEBUG_BUILD&&h.logger.log(`[Profiling] Could not retrieve profile for span: ${E}`);continue}const C=a.createProfilingEvent(E,b,_,u);C&&S.push(C)}a.addProfilesToEnvelope(c,S)})}}),"_browserProfilingIntegration"),e=f.defineIntegration(n);l.browserProfilingIntegration=e},3423034766:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(9046403702),a=d(9596377211);function s(n){let e;a.isAutomatedPageLoadSpan(n)&&(e=h.timestampInSeconds()*1e3);const t=a.startJSSelfProfile();if(!t)return;p.DEBUG_BUILD&&h.logger.log(`[Profiling] started profiling span: ${f.spanToJSON(n).description}`);const i=h.uuid4();f.getCurrentScope().setContext("profile",{profile_id:i,start_timestamp:e});async function o(){if(n&&t)return t.stop().then(u=>{if(c&&(m.WINDOW.clearTimeout(c),c=void 0),p.DEBUG_BUILD&&h.logger.log(`[Profiling] stopped profiling of span: ${f.spanToJSON(n).description}`),!u){p.DEBUG_BUILD&&h.logger.log(`[Profiling] profiler returned null profile for: ${f.spanToJSON(n).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}a.addProfileToGlobalCache(i,u)}).catch(u=>{p.DEBUG_BUILD&&h.logger.log("[Profiling] error while stopping profiler:",u)})}r(o,"onProfileHandler");let c=m.WINDOW.setTimeout(()=>{p.DEBUG_BUILD&&h.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",f.spanToJSON(n).description),o()},a.MAX_PROFILE_DURATION_MS);const g=n.end.bind(n);function S(){return n?(o().then(()=>{g()},()=>{g()}),n):g()}r(S,"profilingWrappedSpanEnd"),n.end=S}r(s,"startProfileForSpan"),l.startProfileForSpan=s},9596377211:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(9046403702),a=1e6,s=String(0),n="main";let e="",t="",i="",o=m.WINDOW.navigator&&m.WINDOW.navigator.userAgent||"",c="";const g=m.WINDOW.navigator&&m.WINDOW.navigator.language||m.WINDOW.navigator&&m.WINDOW.navigator.languages&&m.WINDOW.navigator.languages[0]||"";function S(Fe){return typeof Fe=="object"&&Fe!==null&&"getHighEntropyValues"in Fe}r(S,"isUserAgentData");const u=m.WINDOW.navigator&&m.WINDOW.navigator.userAgentData;S(u)&&u.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(Fe=>{if(e=Fe.platform||"",i=Fe.architecture||"",c=Fe.model||"",t=Fe.platformVersion||"",Fe.fullVersionList&&Fe.fullVersionList.length>0){const Xe=Fe.fullVersionList[Fe.fullVersionList.length-1];o=`${Xe.brand} ${Xe.version}`}}).catch(Fe=>{});function v(Fe){return!("thread_metadata"in Fe)}r(v,"isProcessedJSSelfProfile");function E(Fe){return v(Fe)?I(Fe):Fe}r(E,"enrichWithThreadInformation");function b(Fe){const Xe=Fe&&Fe.contexts&&Fe.contexts.trace&&Fe.contexts.trace.trace_id;return typeof Xe=="string"&&Xe.length!==32&&p.DEBUG_BUILD&&h.logger.log(`[Profiling] Invalid traceId: ${Xe} on profiled event`),typeof Xe!="string"?"":Xe}r(b,"getTraceId");function _(Fe,Xe,Ge,it){if(it.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(Ge==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${Ge} instead.`);const Dt=b(it),wt=E(Ge),Pe=Xe||(typeof it.start_timestamp=="number"?it.start_timestamp*1e3:h.timestampInSeconds()*1e3),xe=typeof it.timestamp=="number"?it.timestamp*1e3:h.timestampInSeconds()*1e3;return{event_id:Fe,timestamp:new Date(Pe).toISOString(),platform:"javascript",version:"1",release:it.release||"",environment:it.environment||f.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:m.WINDOW.navigator.userAgent},os:{name:e,version:t,build_number:o},device:{locale:g,model:c,manufacturer:o,architecture:i,is_emulator:!1},debug_meta:{images:R(Ge.resources)},profile:wt,transactions:[{name:it.transaction||"",id:it.event_id||h.uuid4(),trace_id:Dt,active_thread_id:s,relative_start_ns:"0",relative_end_ns:((xe-Pe)*1e6).toFixed(0)}]}}r(_,"createProfilePayload");function C(Fe){return f.spanToJSON(Fe).op==="pageload"}r(C,"isAutomatedPageLoadSpan");function I(Fe){let Xe,Ge=0;const it={samples:[],stacks:[],frames:[],thread_metadata:{[s]:{name:n}}};if(!Fe.samples.length)return it;const Dt=Fe.samples[0].timestamp,wt=typeof performance.timeOrigin=="number"?performance.timeOrigin:h.browserPerformanceTimeOrigin||0,Pe=wt-(h.browserPerformanceTimeOrigin||wt);for(let xe=0;xe<Fe.samples.length;xe++){const et=Fe.samples[xe];if(et.stackId===void 0){Xe===void 0&&(Xe=Ge,it.stacks[Xe]=[],Ge++),it.samples[xe]={elapsed_since_start_ns:((et.timestamp+Pe-Dt)*a).toFixed(0),stack_id:Xe,thread_id:s};continue}let rt=Fe.stacks[et.stackId];const je=[];for(;rt;){je.push(rt.frameId);const Gt=Fe.frames[rt.frameId];it.frames[rt.frameId]===void 0&&(it.frames[rt.frameId]={function:Gt.name,abs_path:typeof Gt.resourceId=="number"?Fe.resources[Gt.resourceId]:void 0,lineno:Gt.line,colno:Gt.column}),rt=rt.parentId===void 0?void 0:Fe.stacks[rt.parentId]}const Ft={elapsed_since_start_ns:((et.timestamp+Pe-Dt)*a).toFixed(0),stack_id:Ge,thread_id:s};it.stacks[Ge]=je,it.samples[xe]=Ft,Ge++}return it}r(I,"convertJSSelfProfileToSampledFormat");function A(Fe,Xe){if(!Xe.length)return Fe;for(const Ge of Xe)Fe[1].push([{type:"profile"},Ge]);return Fe}r(A,"addProfilesToEnvelope");function w(Fe){const Xe=[];return h.forEachEnvelopeItem(Fe,(Ge,it)=>{if(it==="transaction")for(let Dt=1;Dt<Ge.length;Dt++){const wt=Ge[Dt];wt&&wt.contexts&&wt.contexts.profile&&wt.contexts.profile.profile_id&&Xe.push(Ge[Dt])}}),Xe}r(w,"findProfiledTransactionsFromEnvelope");const O=new WeakMap;function R(Fe){const Xe=h.GLOBAL_OBJ._sentryDebugIds;if(!Xe)return[];const Ge=f.getClient(),it=Ge&&Ge.getOptions(),Dt=it&&it.stackParser;if(!Dt)return[];let wt;const Pe=O.get(Dt);Pe?wt=Pe:(wt=new Map,O.set(Dt,wt));const xe=Object.keys(Xe).reduce((rt,je)=>{let Ft;const Gt=wt.get(je);Gt?Ft=Gt:(Ft=Dt(je),wt.set(je,Ft));for(let Xt=Ft.length-1;Xt>=0;Xt--){const sn=Ft[Xt],cn=sn&&sn.filename;if(sn&&cn){rt[cn]=Xe[je];break}}return rt},{}),et=[];for(const rt of Fe)rt&&xe[rt]&&et.push({type:"sourcemap",code_file:rt,debug_id:xe[rt]});return et}r(R,"applyDebugMetadata");function F(Fe){return typeof Fe!="number"&&typeof Fe!="boolean"||typeof Fe=="number"&&isNaN(Fe)?(p.DEBUG_BUILD&&h.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Fe)} of type ${JSON.stringify(typeof Fe)}.`),!1):Fe===!0||Fe===!1?!0:Fe<0||Fe>1?(p.DEBUG_BUILD&&h.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${Fe}.`),!1):!0}r(F,"isValidSampleRate");function V(Fe){return Fe.samples.length<2?(p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):Fe.frames.length?!0:(p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}r(V,"isValidProfile");let $=!1;const X=3e4;function Y(Fe){return typeof Fe=="function"}r(Y,"isJSProfilerSupported");function ne(){const Fe=m.WINDOW.Profiler;if(!Y(Fe)){p.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const Xe=10,Ge=Math.floor(X/Xe);try{return new Fe({sampleInterval:Xe,maxBufferSize:Ge})}catch{p.DEBUG_BUILD&&(h.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.logger.log("[Profiling] Disabling profiling for current user session.")),$=!0}}r(ne,"startJSSelfProfile");function ie(Fe){if($)return p.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!Fe.isRecording())return p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const Xe=f.getClient(),Ge=Xe&&Xe.getOptions();if(!Ge)return p.DEBUG_BUILD&&h.logger.log("[Profiling] Profiling disabled, no options found."),!1;const it=Ge.profilesSampleRate;return F(it)?it?(it===!0?!0:Math.random()<it)?!0:(p.DEBUG_BUILD&&h.logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(it)})`),!1):(p.DEBUG_BUILD&&h.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(p.DEBUG_BUILD&&h.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}r(ie,"shouldProfileSpan");function ge(Fe,Xe,Ge,it){return V(Ge)?_(Fe,Xe,Ge,it):null}r(ge,"createProfilingEvent");const Ie=new Map;function We(){return Ie.size}r(We,"getActiveProfilesCount");function ct(Fe){const Xe=Ie.get(Fe);return Xe&&Ie.delete(Fe),Xe}r(ct,"takeProfileFromGlobalCache");function Ae(Fe,Xe){if(Ie.set(Fe,Xe),Ie.size>30){const Ge=Ie.keys().next().value;Ie.delete(Ge)}}r(Ae,"addProfileToGlobalCache"),l.MAX_PROFILE_DURATION_MS=X,l.addProfileToGlobalCache=Ae,l.addProfilesToEnvelope=A,l.applyDebugMetadata=R,l.convertJSSelfProfileToSampledFormat=I,l.createProfilePayload=_,l.createProfilingEvent=ge,l.enrichWithThreadInformation=E,l.findProfiledTransactionsFromEnvelope=w,l.getActiveProfilesCount=We,l.isAutomatedPageLoadSpan=C,l.isValidSampleRate=F,l.shouldProfileSpan=ie,l.startJSSelfProfile=ne,l.takeProfileFromGlobalCache=ct},7672786771:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(3778408185),m=d(8151162894),a=d(3345899401),s=d(9046403702),n=d(3985552739),e=d(9919948800),t=d(2334015581),i=d(7098914998),o=d(4305747877),c=d(4795369790),g=d(8685600704);function S(w){return[f.inboundFiltersIntegration(),f.functionToStringIntegration(),e.browserApiErrorsIntegration(),n.breadcrumbsIntegration(),t.globalHandlersIntegration(),o.linkedErrorsIntegration(),f.dedupeIntegration(),i.httpContextIntegration()]}r(S,"getDefaultIntegrations");function u(w={}){return{...{defaultIntegrations:S(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:s.WINDOW.SENTRY_RELEASE&&s.WINDOW.SENTRY_RELEASE.id?s.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...w}}r(u,"applyDefaultOptions");function v(){const w=s.WINDOW,O=w&&w.chrome&&w.chrome.runtime&&w.chrome.runtime.id,R=s.WINDOW;return!!(R&&R.browser&&R.browser.runtime&&R.browser.runtime.id)||!!O}r(v,"shouldShowBrowserExtensionError");function E(w={}){const O=u(w);if(v()){h.consoleSandbox(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}a.DEBUG_BUILD&&(h.supportsFetch()||h.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const R={...O,stackParser:h.stackParserFromStackParserOptions(O.stackParser||c.defaultStackParser),integrations:f.getIntegrationsToSetup(O),transport:O.transport||g.makeFetchTransport};f.initAndBind(m.BrowserClient,R),O.autoSessionTracking&&I()}r(E,"init");function b(w={}){if(!s.WINDOW.document){a.DEBUG_BUILD&&h.logger.error("Global document not defined in showReportDialog call");return}const O=f.getCurrentScope(),R=O.getClient(),F=R&&R.getDsn();if(!F){a.DEBUG_BUILD&&h.logger.error("DSN not configured for showReportDialog call");return}if(O&&(w.user={...O.getUser(),...w.user}),!w.eventId){const Y=f.lastEventId();Y&&(w.eventId=Y)}const V=s.WINDOW.document.createElement("script");V.async=!0,V.crossOrigin="anonymous",V.src=f.getReportDialogEndpoint(F,w),w.onLoad&&(V.onload=w.onLoad);const{onClose:$}=w;if($){const Y=r(ne=>{if(ne.data==="__sentry_reportdialog_closed__")try{$()}finally{s.WINDOW.removeEventListener("message",Y)}},"reportDialogClosedMessageHandler");s.WINDOW.addEventListener("message",Y)}const X=s.WINDOW.document.head||s.WINDOW.document.body;X?X.appendChild(V):a.DEBUG_BUILD&&h.logger.error("Not injecting report dialog. No injection point found in HTML")}r(b,"showReportDialog");function _(){}r(_,"forceLoad");function C(w){w()}r(C,"onLoad");function I(){if(typeof s.WINDOW.document>"u"){a.DEBUG_BUILD&&h.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}f.startSession({ignoreDuration:!0}),f.captureSession(),p.addHistoryInstrumentationHandler(({from:w,to:O})=>{w!==void 0&&w!==O&&(f.startSession({ignoreDuration:!0}),f.captureSession())})}r(I,"startSessionTracking");function A(w){const O=f.getClient();O&&O.captureUserFeedback(w)}r(A,"captureUserFeedback"),l.captureUserFeedback=A,l.forceLoad=_,l.getDefaultIntegrations=S,l.init=E,l.onLoad=C,l.showReportDialog=b},4795369790:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=10,p=20,m=30,a=40,s=50;function n($,X,Y,ne){const ie={filename:$,function:X==="<anonymous>"?f.UNKNOWN_FUNCTION:X,in_app:!0};return Y!==void 0&&(ie.lineno=Y),ne!==void 0&&(ie.colno=ne),ie}r(n,"createFrame");const e=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,t=/\((\S*)(?::(\d+))(?::(\d+))\)/,o=[m,r($=>{const X=e.exec($);if(X){if(X[2]&&X[2].indexOf("eval")===0){const ge=t.exec(X[2]);ge&&(X[2]=ge[1],X[3]=ge[2],X[4]=ge[3])}const[ne,ie]=V(X[1]||f.UNKNOWN_FUNCTION,X[2]);return n(ie,ne,X[3]?+X[3]:void 0,X[4]?+X[4]:void 0)}},"chromeStackParserFn")],c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,g=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=[s,r($=>{const X=c.exec($);if(X){if(X[3]&&X[3].indexOf(" > eval")>-1){const ge=g.exec(X[3]);ge&&(X[1]=X[1]||"eval",X[3]=ge[1],X[4]=ge[2],X[5]="")}let ne=X[3],ie=X[1]||f.UNKNOWN_FUNCTION;return[ie,ne]=V(ie,ne),n(ne,ie,X[4]?+X[4]:void 0,X[5]?+X[5]:void 0)}},"gecko")],v=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,b=[a,r($=>{const X=v.exec($);return X?n(X[2],X[1]||f.UNKNOWN_FUNCTION,+X[3],X[4]?+X[4]:void 0):void 0},"winjs")],_=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,I=[h,r($=>{const X=_.exec($);return X?n(X[2],X[3]||f.UNKNOWN_FUNCTION,+X[1]):void 0},"opera10")],A=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,O=[p,r($=>{const X=A.exec($);return X?n(X[5],X[3]||X[4]||f.UNKNOWN_FUNCTION,+X[1],+X[2]):void 0},"opera11")],R=[o,u],F=f.createStackParser(...R),V=r(($,X)=>{const Y=$.indexOf("safari-extension")!==-1,ne=$.indexOf("safari-web-extension")!==-1;return Y||ne?[$.indexOf("@")!==-1?$.split("@")[0]:f.UNKNOWN_FUNCTION,Y?`safari-extension:${X}`:`safari-web-extension:${X}`]:[$,X]},"extractSafariExtensionDetails");l.chromeStackLineParser=o,l.defaultStackLineParsers=R,l.defaultStackParser=F,l.geckoStackLineParser=u,l.opera10StackLineParser=I,l.opera11StackLineParser=O,l.winjsStackLineParser=b},3372334685:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(3345899401),m=d(9046403702);function a(){m.WINDOW&&m.WINDOW.document?m.WINDOW.document.addEventListener("visibilitychange",()=>{const s=f.getActiveSpan();if(!s)return;const n=f.getRootSpan(s);if(m.WINDOW.document.hidden&&n){const e="cancelled",{op:t,status:i}=f.spanToJSON(n);p.DEBUG_BUILD&&h.logger.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t}`),i||n.setStatus({code:f.SPAN_STATUS_ERROR,message:e}),n.setAttribute("sentry.cancellation_reason","document.hidden"),n.end()}}):p.DEBUG_BUILD&&h.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}r(a,"registerBackgroundTabDetection"),l.registerBackgroundTabDetection=a},5559796378:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(3345899401),a=d(9046403702),s=d(3372334685),n=d(6520656099),e="BrowserTracing",t={...h.TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...n.defaultRequestInstrumentationOptions},i=r((v={})=>{h.registerSpanErrorInstrumentation();const{enableInp:E,enableLongTask:b,_experiments:{enableInteractions:_},beforeStartSpan:C,idleTimeout:I,finalTimeout:A,childSpanTimeout:w,markBackgroundSpan:O,traceFetch:R,traceXHR:F,shouldCreateSpanForRequest:V,enableHTTPTimings:$,instrumentPageLoad:X,instrumentNavigation:Y}={...t,...v},ne=f.startTrackingWebVitals();E&&f.startTrackingINP(),b&&f.startTrackingLongTasks(),_&&f.startTrackingInteractions();const ie={name:void 0,source:void 0};function ge(Ie,We){const ct=We.op==="pageload",Ae=C?C(We):We,Fe=Ae.attributes||{};We.name!==Ae.name&&(Fe[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",Ae.attributes=Fe),ie.name=Ae.name,ie.source=Fe[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];const Xe=h.startIdleSpan(Ae,{idleTimeout:I,finalTimeout:A,childSpanTimeout:w,disableAutoFinish:ct,beforeSpanEnd:it=>{ne(),f.addPerformanceEntries(it)}});function Ge(){["interactive","complete"].includes(a.WINDOW.document.readyState)&&Ie.emit("idleSpanEnableAutoFinish",Xe)}return r(Ge,"emitFinish"),ct&&a.WINDOW.document&&(a.WINDOW.document.addEventListener("readystatechange",()=>{Ge()}),Ge()),Xe}return r(ge,"_createRouteSpan"),{name:e,afterAllSetup(Ie){let We,ct=a.WINDOW.location&&a.WINDOW.location.href;Ie.on("startNavigationSpan",Ae=>{h.getClient()===Ie&&(We&&(m.DEBUG_BUILD&&p.logger.log(`[Tracing] Finishing current root span with op: ${h.spanToJSON(We).op}`),We.end()),We=ge(Ie,{op:"navigation",...Ae}))}),Ie.on("startPageLoadSpan",(Ae,Fe={})=>{if(h.getClient()!==Ie)return;We&&(m.DEBUG_BUILD&&p.logger.log(`[Tracing] Finishing current root span with op: ${h.spanToJSON(We).op}`),We.end());const Xe=Fe.sentryTrace||g("sentry-trace"),Ge=Fe.baggage||g("baggage"),it=p.propagationContextFromHeaders(Xe,Ge);h.getCurrentScope().setPropagationContext(it),We=ge(Ie,{op:"pageload",...Ae})}),Ie.on("spanEnd",Ae=>{const Fe=h.spanToJSON(Ae).op;if(Ae!==h.getRootSpan(Ae)||Fe!=="navigation"&&Fe!=="pageload")return;const Xe=h.getCurrentScope(),Ge=Xe.getPropagationContext();Xe.setPropagationContext({...Ge,sampled:Ge.sampled!==void 0?Ge.sampled:h.spanIsSampled(Ae),dsc:Ge.dsc||h.getDynamicSamplingContextFromSpan(Ae)})}),a.WINDOW.location&&(X&&o(Ie,{name:a.WINDOW.location.pathname,startTime:p.browserPerformanceTimeOrigin?p.browserPerformanceTimeOrigin/1e3:void 0,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.pageload.browser"}}),Y&&f.addHistoryInstrumentationHandler(({to:Ae,from:Fe})=>{if(Fe===void 0&&ct&&ct.indexOf(Ae)!==-1){ct=void 0;return}Fe!==Ae&&(ct=void 0,c(Ie,{name:a.WINDOW.location.pathname,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.navigation.browser"}}))})),O&&s.registerBackgroundTabDetection(),_&&S(I,A,w,ie),n.instrumentOutgoingRequests({traceFetch:R,traceXHR:F,tracePropagationTargets:Ie.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:V,enableHTTPTimings:$})}}},"browserTracingIntegration");function o(v,E,b){v.emit("startPageLoadSpan",E,b),h.getCurrentScope().setTransactionName(E.name);const _=h.getActiveSpan();return(_&&h.spanToJSON(_).op)==="pageload"?_:void 0}r(o,"startBrowserTracingPageLoadSpan");function c(v,E){h.getCurrentScope().setPropagationContext(u()),h.getIsolationScope().setPropagationContext(u()),v.emit("startNavigationSpan",E),h.getCurrentScope().setTransactionName(E.name);const b=h.getActiveSpan();return(b&&h.spanToJSON(b).op)==="navigation"?b:void 0}r(c,"startBrowserTracingNavigationSpan");function g(v){const E=p.getDomElement(`meta[name=${v}]`);return E?E.getAttribute("content"):void 0}r(g,"getMetaContent");function S(v,E,b,_){let C;const I=r(()=>{const A="ui.action.click",w=h.getActiveSpan(),O=w&&h.getRootSpan(w);if(O){const R=h.spanToJSON(O).op;if(["navigation","pageload"].includes(R)){m.DEBUG_BUILD&&p.logger.warn(`[Tracing] Did not create ${A} span because a pageload or navigation span is in progress.`);return}}if(C&&(C.setAttribute(h.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),C.end(),C=void 0),!_.name){m.DEBUG_BUILD&&p.logger.warn(`[Tracing] Did not create ${A} transaction because _latestRouteName is missing.`);return}C=h.startIdleSpan({name:_.name,op:A,attributes:{[h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:_.source||"url"}},{idleTimeout:v,finalTimeout:E,childSpanTimeout:b})},"registerInteractionTransaction");a.WINDOW.document&&addEventListener("click",I,{once:!1,capture:!0})}r(S,"registerInteractionListener");function u(){return{traceId:p.uuid4(),spanId:p.uuid4().substring(16)}}r(u,"generatePropagationContext"),l.BROWSER_TRACING_INTEGRATION_ID=e,l.browserTracingIntegration=i,l.getMetaContent=g,l.startBrowserTracingNavigationSpan=c,l.startBrowserTracingPageLoadSpan=o},6520656099:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(3778408185),h=d(8482989710),p=d(7563271614),m=d(9046403702),a={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function s(E){const{traceFetch:b,traceXHR:_,shouldCreateSpanForRequest:C,enableHTTPTimings:I,tracePropagationTargets:A}={traceFetch:a.traceFetch,traceXHR:a.traceXHR,...E},w=typeof C=="function"?C:F=>!0,O=r(F=>c(F,A),"shouldAttachHeadersWithTargets"),R={};b&&p.addFetchInstrumentationHandler(F=>{const V=h.instrumentFetchRequest(F,w,O,R);if(V){const $=v(F.fetchData.url),X=$?p.parseUrl($).host:void 0;V.setAttributes({"http.url":$,"server.address":X})}I&&V&&e(V)}),_&&f.addXhrInstrumentationHandler(F=>{const V=g(F,w,O,R);I&&V&&e(V)})}r(s,"instrumentOutgoingRequests");function n(E){return E.entryType==="resource"&&"initiatorType"in E&&typeof E.nextHopProtocol=="string"&&(E.initiatorType==="fetch"||E.initiatorType==="xmlhttprequest")}r(n,"isPerformanceResourceTiming");function e(E){const{url:b}=h.spanToJSON(E).data||{};if(!b||typeof b!="string")return;const _=f.addPerformanceInstrumentationHandler("resource",({entries:C})=>{C.forEach(I=>{n(I)&&I.name.endsWith(b)&&(o(I).forEach(w=>E.setAttribute(...w)),setTimeout(_))})})}r(e,"addHTTPTimings");function t(E){let b="unknown",_="unknown",C="";for(const I of E){if(I==="/"){[b,_]=E.split("/");break}if(!isNaN(Number(I))){b=C==="h"?"http":C,_=E.split(C)[1];break}C+=I}return C===E&&(b=C),{name:b,version:_}}r(t,"extractNetworkProtocol");function i(E=0){return((p.browserPerformanceTimeOrigin||performance.timeOrigin)+E)/1e3}r(i,"getAbsoluteTime");function o(E){const{name:b,version:_}=t(E.nextHopProtocol),C=[];return C.push(["network.protocol.version",_],["network.protocol.name",b]),p.browserPerformanceTimeOrigin?[...C,["http.request.redirect_start",i(E.redirectStart)],["http.request.fetch_start",i(E.fetchStart)],["http.request.domain_lookup_start",i(E.domainLookupStart)],["http.request.domain_lookup_end",i(E.domainLookupEnd)],["http.request.connect_start",i(E.connectStart)],["http.request.secure_connection_start",i(E.secureConnectionStart)],["http.request.connection_end",i(E.connectEnd)],["http.request.request_start",i(E.requestStart)],["http.request.response_start",i(E.responseStart)],["http.request.response_end",i(E.responseEnd)]]:C}r(o,"resourceTimingEntryToSpanData");function c(E,b){const _=m.WINDOW.location&&m.WINDOW.location.href;if(_){let C,I;try{C=new URL(E,_),I=new URL(_).origin}catch{return!1}const A=C.origin===I;return b?p.stringMatchesSomePattern(C.toString(),b)||A&&p.stringMatchesSomePattern(C.pathname,b):A}else{const C=!!E.match(/^\/(?!\/)/);return b?p.stringMatchesSomePattern(E,b):C}}r(c,"shouldAttachHeaders");function g(E,b,_,C){const I=E.xhr,A=I&&I[f.SENTRY_XHR_DATA_KEY];if(!I||I.__sentry_own_request__||!A)return;const w=h.hasTracingEnabled()&&b(A.url);if(E.endTimestamp&&w){const X=I.__sentry_xhr_span_id__;if(!X)return;const Y=C[X];Y&&A.status_code!==void 0&&(h.setHttpStatus(Y,A.status_code),Y.end(),delete C[X]);return}const O=v(A.url),R=O?p.parseUrl(O).host:void 0,F=!!h.getActiveSpan(),V=w&&F?h.startInactiveSpan({name:`${A.method} ${A.url}`,attributes:{type:"xhr","http.method":A.method,"http.url":O,url:A.url,"server.address":R,[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser",[h.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new h.SentryNonRecordingSpan;I.__sentry_xhr_span_id__=V.spanContext().spanId,C[I.__sentry_xhr_span_id__]=V;const $=h.getClient();return I.setRequestHeader&&_(A.url)&&$&&S(I,$,h.hasTracingEnabled()&&F?V:void 0),V}r(g,"xhrCallback");function S(E,b,_){const C=h.getCurrentScope(),I=h.getIsolationScope(),{traceId:A,spanId:w,sampled:O,dsc:R}={...I.getPropagationContext(),...C.getPropagationContext()},F=_&&h.hasTracingEnabled()?h.spanToTraceHeader(_):p.generateSentryTraceHeader(A,w,O),V=p.dynamicSamplingContextToSentryBaggageHeader(R||(_?h.getDynamicSamplingContextFromSpan(_):h.getDynamicSamplingContextFromClient(A,b)));u(E,F,V)}r(S,"addTracingHeadersToXhrRequest");function u(E,b,_){try{E.setRequestHeader("sentry-trace",b),_&&E.setRequestHeader(p.BAGGAGE_HEADER_NAME,_)}catch{}}r(u,"setHeaderOnXhr");function v(E){try{return new URL(E,m.WINDOW.location.origin).href}catch{return}}r(v,"getFullURL"),l.defaultRequestInstrumentationOptions=a,l.extractNetworkProtocol=t,l.instrumentOutgoingRequests=s,l.shouldAttachHeaders=c,l.xhrCallback=g},8685600704:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(8475594045);function m(a,s=p.getNativeFetchImplementation()){let n=0,e=0;function t(i){const o=i.body.length;n+=o,e++;const c={body:i.body,method:"POST",referrerPolicy:"origin",headers:a.headers,keepalive:n<=6e4&&e<15,...a.fetchOptions};if(!s)return p.clearCachedFetchImplementation(),h.rejectedSyncPromise("No fetch implementation available");try{return s(a.url,c).then(g=>(n-=o,e--,{statusCode:g.status,headers:{"x-sentry-rate-limits":g.headers.get("X-Sentry-Rate-Limits"),"retry-after":g.headers.get("Retry-After")}}))}catch(g){return p.clearCachedFetchImplementation(),n-=o,e--,h.rejectedSyncPromise(g)}}return r(t,"makeRequest"),f.createTransport(a,t)}r(m,"makeFetchTransport"),l.makeFetchTransport=m},7824548363:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(7563271614),p=d(8685600704);function m(g){return new Promise((S,u)=>{g.oncomplete=g.onsuccess=()=>S(g.result),g.onabort=g.onerror=()=>u(g.error)})}r(m,"promisifyRequest");function a(g,S){const u=indexedDB.open(g);u.onupgradeneeded=()=>u.result.createObjectStore(S);const v=m(u);return E=>v.then(b=>E(b.transaction(S,"readwrite").objectStore(S)))}r(a,"createStore");function s(g){return m(g.getAllKeys())}r(s,"keys");function n(g,S,u){return g(v=>s(v).then(E=>{if(!(E.length>=u))return v.put(S,Math.max(...E,0)+1),m(v.transaction)}))}r(n,"push");function e(g,S,u){return g(v=>s(v).then(E=>{if(!(E.length>=u))return v.put(S,Math.min(...E,0)-1),m(v.transaction)}))}r(e,"unshift");function t(g){return g(S=>s(S).then(u=>{if(u.length!==0)return m(S.get(u[0])).then(v=>(S.delete(u[0]),m(S.transaction).then(()=>v)))}))}r(t,"shift");function i(g){let S;function u(){return S==null&&(S=a(g.dbName||"sentry-offline",g.storeName||"queue")),S}return r(u,"getStore"),{push:async v=>{try{const E=await h.serializeEnvelope(v);await n(u(),E,g.maxQueueSize||30)}catch{}},unshift:async v=>{try{const E=await h.serializeEnvelope(v);await e(u(),E,g.maxQueueSize||30)}catch{}},shift:async()=>{try{const v=await t(u());if(v)return h.parseEnvelope(v)}catch{}}}}r(i,"createIndexedDbStore");function o(g){return S=>g({...S,createStore:i})}r(o,"makeIndexedDbOfflineTransport");function c(g=p.makeFetchTransport){return o(f.makeOfflineTransport(g))}r(c,"makeBrowserOfflineTransport"),l.createStore=a,l.makeBrowserOfflineTransport=c,l.push=n,l.shift=t,l.unshift=e},8475594045:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(3345899401),p=d(9046403702);let m;function a(){if(m)return m;if(f.isNativeFetch(p.WINDOW.fetch))return m=p.WINDOW.fetch.bind(p.WINDOW);const n=p.WINDOW.document;let e=p.WINDOW.fetch;if(n&&typeof n.createElement=="function")try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i.fetch&&(e=i.fetch),n.head.removeChild(t)}catch(t){h.DEBUG_BUILD&&f.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}try{return m=e.bind(p.WINDOW)}catch{}}r(a,"getNativeFetchImplementation");function s(){m=void 0}r(s,"clearCachedFetchImplementation"),l.clearCachedFetchImplementation=s,l.getNativeFetchImplementation=a},7738910413:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);function h(m,{metadata:a,tunnel:s,dsn:n}){const e={event_id:m.event_id,sent_at:new Date().toISOString(),...a&&a.sdk&&{sdk:{name:a.sdk.name,version:a.sdk.version}},...!!s&&!!n&&{dsn:f.dsnToString(n)}},t=p(m);return f.createEnvelope(e,[t])}r(h,"createUserFeedbackEnvelope");function p(m){return[{type:"user_report"},m]}r(p,"createUserFeedbackEnvelopeItem"),l.createUserFeedbackEnvelope=h},1076637753:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8482989710),h=d(9046403702),p={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming"},m=h.WINDOW;async function a(n){const e=p[n],t=m.Sentry=m.Sentry||{};if(!e)throw new Error(`Cannot lazy load integration: ${n}`);const i=t[n];if(typeof i=="function")return i;const o=s(e),c=h.WINDOW.document.createElement("script");c.src=o,c.crossOrigin="anonymous";const g=new Promise((u,v)=>{c.addEventListener("load",()=>u()),c.addEventListener("error",v)});h.WINDOW.document.body.appendChild(c);try{await g}catch{throw new Error(`Error when loading integration: ${n}`)}const S=t[n];if(typeof S!="function")throw new Error(`Could not load integration: ${n}`);return S}r(a,"lazyLoadIntegration");function s(n){const e=f.getClient(),t=e&&e.getOptions(),i=t&&t.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${f.SDK_VERSION}/${n}.min.js`,i).toString()}r(s,"getScriptURL"),l.lazyLoadIntegration=a},9857059330:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h="7";function p(e){const t=e.protocol?`${e.protocol}:`:"",i=e.port?`:${e.port}`:"";return`${t}//${e.host}${i}${e.path?`/${e.path}`:""}/api/`}r(p,"getBaseApiEndpoint");function m(e){return`${p(e)}${e.projectId}/envelope/`}r(m,"_getIngestEndpoint");function a(e,t){return f.urlEncode({sentry_key:e.publicKey,sentry_version:h,...t&&{sentry_client:`${t.name}/${t.version}`}})}r(a,"_encodedAuth");function s(e,t,i){return t||`${m(e)}?${a(e,i)}`}r(s,"getEnvelopeEndpointWithUrlEncodedAuth");function n(e,t){const i=f.makeDsn(e);if(!i)return"";const o=`${p(i)}embed/error-page/`;let c=`dsn=${f.dsnToString(i)}`;for(const g in t)if(g!=="dsn"&&g!=="onClose")if(g==="user"){const S=t.user;if(!S)continue;S.name&&(c+=`&name=${encodeURIComponent(S.name)}`),S.email&&(c+=`&email=${encodeURIComponent(S.email)}`)}else c+=`&${encodeURIComponent(g)}=${encodeURIComponent(t[g])}`;return`${o}?${c}`}r(n,"getReportDialogEndpoint"),l.getEnvelopeEndpointWithUrlEncodedAuth=s,l.getReportDialogEndpoint=n},897859094:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(2685322190),h=d(3752312155);function p(a){const s=f.getMainCarrier(),n=f.getSentryCarrier(s);n.acs=a}r(p,"setAsyncContextStrategy");function m(a){const s=f.getSentryCarrier(a);return s.acs?s.acs:h.getStackAsyncContextStrategy()}r(m,"getAsyncContextStrategy"),l.getAsyncContextStrategy=m,l.setAsyncContextStrategy=p},3752312155:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(2158524366),m=d(2685322190);class a{constructor(c,g){let S;c?S=c:S=new p.Scope;let u;g?u=g:u=new p.Scope,this._stack=[{scope:S}],this._isolationScope=u}withScope(c){const g=this._pushScope();let S;try{S=c(g)}catch(u){throw this._popScope(),u}return f.isThenable(S)?S.then(u=>(this._popScope(),u),u=>{throw this._popScope(),u}):(this._popScope(),S)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const c=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:c}),c}_popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}}r(a,"AsyncContextStack");function s(){const o=m.getMainCarrier(),c=m.getSentryCarrier(o);return c.hub||(c.hub=new a(h.getDefaultCurrentScope(),h.getDefaultIsolationScope())),c.hub}r(s,"getAsyncContextStack");function n(o){return s().withScope(o)}r(n,"withScope");function e(o,c){const g=s();return g.withScope(()=>(g.getStackTop().scope=o,c(o)))}r(e,"withSetScope");function t(o){return s().withScope(()=>o(s().getIsolationScope()))}r(t,"withIsolationScope");function i(){return{withIsolationScope:t,withScope:n,withSetScope:e,withSetIsolationScope:(o,c)=>t(c),getCurrentScope:()=>s().getScope(),getIsolationScope:()=>s().getIsolationScope()}}r(i,"getStackAsyncContextStrategy"),l.AsyncContextStack=a,l.getStackAsyncContextStrategy=i},4936960144:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(9857059330),p=d(8438156026),m=d(8844511336),a=d(5297268390),s=d(1927145604),n=d(5234873710),e=d(9064881818),t=d(1119532287),i=d(9877103701),o="Not capturing exception because it's already been captured.";class c{constructor(b){if(this._options=b,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],b.dsn?this._dsn=f.makeDsn(b.dsn):m.DEBUG_BUILD&&f.logger.warn("No DSN provided, client will not send events."),this._dsn){const _=h.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,b.tunnel,b._metadata?b._metadata.sdk:void 0);this._transport=b.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...b.transportOptions,url:_})}}captureException(b,_,C){const I=f.uuid4();if(f.checkOrSetAlreadyCaught(b))return m.DEBUG_BUILD&&f.logger.log(o),I;const A={event_id:I,..._};return this._process(this.eventFromException(b,A).then(w=>this._captureEvent(w,A,C))),A.event_id}captureMessage(b,_,C,I){const A={event_id:f.uuid4(),...C},w=f.isParameterizedString(b)?b:String(b),O=f.isPrimitive(b)?this.eventFromMessage(w,_,A):this.eventFromException(b,A);return this._process(O.then(R=>this._captureEvent(R,A,I))),A.event_id}captureEvent(b,_,C){const I=f.uuid4();if(_&&_.originalException&&f.checkOrSetAlreadyCaught(_.originalException))return m.DEBUG_BUILD&&f.logger.log(o),I;const A={event_id:I,..._},O=(b.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(b,A,O||C)),A.event_id}captureSession(b){typeof b.release!="string"?m.DEBUG_BUILD&&f.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(b),n.updateSession(b,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(b){const _=this._transport;return _?(this.emit("flush"),this._isClientDoneProcessing(b).then(C=>_.flush(b).then(I=>C&&I))):f.resolvedSyncPromise(!0)}close(b){return this.flush(b).then(_=>(this.getOptions().enabled=!1,this.emit("close"),_))}getEventProcessors(){return this._eventProcessors}addEventProcessor(b){this._eventProcessors.push(b)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(b){return this._integrations[b]}addIntegration(b){const _=this._integrations[b.name];s.setupIntegration(this,b,this._integrations),_||s.afterSetupIntegrations(this,[b])}sendEvent(b,_={}){this.emit("beforeSendEvent",b,_);let C=a.createEventEnvelope(b,this._dsn,this._options._metadata,this._options.tunnel);for(const A of _.attachments||[])C=f.addItemToEnvelope(C,f.createAttachmentEnvelopeItem(A));const I=this.sendEnvelope(C);I&&I.then(A=>this.emit("afterSendEvent",b,A),null)}sendSession(b){const _=a.createSessionEnvelope(b,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(_)}recordDroppedEvent(b,_,C){if(this._options.sendClientReports){const I=`${b}:${_}`;m.DEBUG_BUILD&&f.logger.log(`Adding outcome: "${I}"`),this._outcomes[I]=this._outcomes[I]+1||1}}on(b,_){this._hooks[b]||(this._hooks[b]=[]),this._hooks[b].push(_)}emit(b,..._){this._hooks[b]&&this._hooks[b].forEach(C=>C(..._))}sendEnvelope(b){return this.emit("beforeEnvelope",b),this._isEnabled()&&this._transport?this._transport.send(b).then(null,_=>(m.DEBUG_BUILD&&f.logger.error("Error while sending event:",_),_)):(m.DEBUG_BUILD&&f.logger.error("Transport disabled"),f.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:b}=this._options;this._integrations=s.setupIntegrations(this,b),s.afterSetupIntegrations(this,b)}_updateSessionFromEvent(b,_){let C=!1,I=!1;const A=_.exception&&_.exception.values;if(A){I=!0;for(const R of A){const F=R.mechanism;if(F&&F.handled===!1){C=!0;break}}}const w=b.status==="ok";(w&&b.errors===0||w&&C)&&(n.updateSession(b,{...C&&{status:"crashed"},errors:b.errors||Number(I||C)}),this.captureSession(b))}_isClientDoneProcessing(b){return new f.SyncPromise(_=>{let C=0;const I=1,A=setInterval(()=>{this._numProcessing==0?(clearInterval(A),_(!0)):(C+=I,b&&C>=b&&(clearInterval(A),_(!1)))},I)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(b,_,C,I=p.getIsolationScope()){const A=this.getOptions(),w=Object.keys(this._integrations);return!_.integrations&&w.length>0&&(_.integrations=w),this.emit("preprocessEvent",b,_),b.type||I.setLastEventId(b.event_id||_.event_id),i.prepareEvent(A,b,_,C,this,I).then(O=>{if(O===null)return O;const R={...I.getPropagationContext(),...C?C.getPropagationContext():void 0};if(!(O.contexts&&O.contexts.trace)&&R){const{traceId:V,spanId:$,parentSpanId:X,dsc:Y}=R;O.contexts={trace:f.dropUndefinedKeys({trace_id:V,span_id:$,parent_span_id:X}),...O.contexts};const ne=Y||e.getDynamicSamplingContextFromClient(V,this);O.sdkProcessingMetadata={dynamicSamplingContext:ne,...O.sdkProcessingMetadata}}return O})}_captureEvent(b,_={},C){return this._processEvent(b,_,C).then(I=>I.event_id,I=>{if(m.DEBUG_BUILD){const A=I;A.logLevel==="log"?f.logger.log(A.message):f.logger.warn(A)}})}_processEvent(b,_,C){const I=this.getOptions(),{sampleRate:A}=I,w=v(b),O=u(b),R=b.type||"error",F=`before send for type \`${R}\``,V=typeof A>"u"?void 0:t.parseSampleRate(A);if(O&&typeof V=="number"&&Math.random()>V)return this.recordDroppedEvent("sample_rate","error",b),f.rejectedSyncPromise(new f.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${A})`,"log"));const $=R==="replay_event"?"replay":R,Y=(b.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(b,_,C,Y).then(ne=>{if(ne===null)throw this.recordDroppedEvent("event_processor",$,b),new f.SentryError("An event processor returned `null`, will not send event.","log");if(_.data&&_.data.__sentry__===!0)return ne;const ge=S(I,ne,_);return g(ge,F)}).then(ne=>{if(ne===null)throw this.recordDroppedEvent("before_send",$,b),new f.SentryError(`${F} returned \`null\`, will not send event.`,"log");const ie=C&&C.getSession();!w&&ie&&this._updateSessionFromEvent(ie,ne);const ge=ne.transaction_info;if(w&&ge&&ne.transaction!==b.transaction){const Ie="custom";ne.transaction_info={...ge,source:Ie}}return this.sendEvent(ne,_),ne}).then(null,ne=>{throw ne instanceof f.SentryError?ne:(this.captureException(ne,{data:{__sentry__:!0},originalException:ne}),new f.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${ne}`))})}_process(b){this._numProcessing++,b.then(_=>(this._numProcessing--,_),_=>(this._numProcessing--,_))}_clearOutcomes(){const b=this._outcomes;return this._outcomes={},Object.keys(b).map(_=>{const[C,I]=_.split(":");return{reason:C,category:I,quantity:b[_]}})}}r(c,"BaseClient");function g(E,b){const _=`${b} must return \`null\` or a valid event.`;if(f.isThenable(E))return E.then(C=>{if(!f.isPlainObject(C)&&C!==null)throw new f.SentryError(_);return C},C=>{throw new f.SentryError(`${b} rejected with ${C}`)});if(!f.isPlainObject(E)&&E!==null)throw new f.SentryError(_);return E}r(g,"_validateBeforeSendResult");function S(E,b,_){const{beforeSend:C,beforeSendTransaction:I,beforeSendSpan:A}=E;if(u(b)&&C)return C(b,_);if(v(b)){if(b.spans&&A){const w=[];for(const O of b.spans){const R=A(O);R&&w.push(R)}b.spans=w}if(I)return I(b,_)}return b}r(S,"processBeforeSend");function u(E){return E.type===void 0}r(u,"isErrorEvent");function v(E){return E.type==="transaction"}r(v,"isTransactionEvent"),l.BaseClient=c},4433801832:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=100;function m(a,s){const n=h.getClient(),e=h.getIsolationScope();if(!n)return;const{beforeBreadcrumb:t=null,maxBreadcrumbs:i=p}=n.getOptions();if(i<=0)return;const c={timestamp:f.dateTimestampInSeconds(),...a},g=t?f.consoleSandbox(()=>t(c,s)):c;g!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",g,s),e.addBreadcrumb(g,i))}r(m,"addBreadcrumb"),l.addBreadcrumb=m},2685322190:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);function h(){return p(f.GLOBAL_OBJ),f.GLOBAL_OBJ}r(h,"getMainCarrier");function p(m){return m.__SENTRY__||(m.__SENTRY__={extensions:{}}),m.__SENTRY__}r(p,"getSentryCarrier"),l.getMainCarrier=h,l.getSentryCarrier=p},7584701501:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);function h(m,a,s,n,e){const t={sent_at:new Date().toISOString()};s&&s.sdk&&(t.sdk={name:s.sdk.name,version:s.sdk.version}),n&&e&&(t.dsn=f.dsnToString(e)),a&&(t.trace=f.dropUndefinedKeys(a));const i=p(m);return f.createEnvelope(t,[i])}r(h,"createCheckInEnvelope");function p(m){return[{type:"check_in"},m]}r(p,"createCheckInEnvelopeItem"),l.createCheckInEnvelope=h},4834620523:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="production";l.DEFAULT_ENVIRONMENT=d},8438156026:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(897859094),p=d(2685322190),m=d(2158524366);function a(){return f.getGlobalSingleton("defaultCurrentScope",()=>new m.Scope)}r(a,"getDefaultCurrentScope");function s(){return f.getGlobalSingleton("defaultIsolationScope",()=>new m.Scope)}r(s,"getDefaultIsolationScope");function n(){const g=p.getMainCarrier();return h.getAsyncContextStrategy(g).getCurrentScope()}r(n,"getCurrentScope");function e(){const g=p.getMainCarrier();return h.getAsyncContextStrategy(g).getIsolationScope()}r(e,"getIsolationScope");function t(){return f.getGlobalSingleton("globalScope",()=>new m.Scope)}r(t,"getGlobalScope");function i(...g){const S=p.getMainCarrier(),u=h.getAsyncContextStrategy(S);if(g.length===2){const[v,E]=g;return v?u.withSetScope(v,E):u.withScope(E)}return u.withScope(g[0])}r(i,"withScope");function o(...g){const S=p.getMainCarrier(),u=h.getAsyncContextStrategy(S);if(g.length===2){const[v,E]=g;return v?u.withSetIsolationScope(v,E):u.withIsolationScope(E)}return u.withIsolationScope(g[0])}r(o,"withIsolationScope");function c(){return n().getClient()}r(c,"getClient"),l.getClient=c,l.getCurrentScope=n,l.getDefaultCurrentScope=a,l.getDefaultIsolationScope=s,l.getGlobalScope=t,l.getIsolationScope=e,l.withIsolationScope=o,l.withScope=i},8844511336:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},5297268390:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);d(2206474662),d(8844511336);const h=d(5475300505),p=d(9064881818);function m(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}r(m,"enhanceEventWithSdkInfo");function a(e,t,i,o){const c=f.getSdkMetadataForEnvelopeHeader(i),g={sent_at:new Date().toISOString(),...c&&{sdk:c},...!!o&&t&&{dsn:f.dsnToString(t)}},S="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return f.createEnvelope(g,[S])}r(a,"createSessionEnvelope");function s(e,t,i,o){const c=f.getSdkMetadataForEnvelopeHeader(i),g=e.type&&e.type!=="replay_event"?e.type:"event";m(e,i&&i.sdk);const S=f.createEventEnvelopeHeaders(e,c,o,t);delete e.sdkProcessingMetadata;const u=[{type:g},e];return f.createEnvelope(S,[u])}r(s,"createEventEnvelope");function n(e,t){function i(v){return!!v.trace_id&&!!v.public_key}r(i,"dscHasRequiredProps");const o=p.getDynamicSamplingContextFromSpan(e[0]),c={sent_at:new Date().toISOString(),...i(o)&&{trace:o}},g=t&&t.getOptions().beforeSendSpan,S=g?v=>g(h.spanToJSON(v)):v=>h.spanToJSON(v),u=[];for(const v of e){const E=S(v);E&&u.push(f.createSpanEnvelopeItem(E))}return f.createEnvelope(c,u)}r(n,"createSpanEnvelope"),l.createEventEnvelope=s,l.createSessionEnvelope=a,l.createSpanEnvelope=n},5911348835:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336);function p(m,a,s,n=0){return new f.SyncPromise((e,t)=>{const i=m[n];if(a===null||typeof i!="function")e(a);else{const o=i({...a},s);h.DEBUG_BUILD&&i.id&&o===null&&f.logger.log(`Event processor "${i.id}" dropped event`),f.isThenable(o)?o.then(c=>p(m,c,s,n+1).then(e)).then(null,t):p(m,o,s,n+1).then(e).then(null,t)}})}r(p,"notifyEventProcessors"),l.notifyEventProcessors=p},5015065869:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(4834620523),p=d(8438156026),m=d(8844511336),a=d(5234873710),s=d(9877103701);function n($,X){return p.getCurrentScope().captureException($,s.parseEventHintOrCaptureContext(X))}r(n,"captureException");function e($,X){const Y=typeof X=="string"?X:void 0,ne=typeof X!="string"?{captureContext:X}:void 0;return p.getCurrentScope().captureMessage($,Y,ne)}r(e,"captureMessage");function t($,X){return p.getCurrentScope().captureEvent($,X)}r(t,"captureEvent");function i($,X){p.getIsolationScope().setContext($,X)}r(i,"setContext");function o($){p.getIsolationScope().setExtras($)}r(o,"setExtras");function c($,X){p.getIsolationScope().setExtra($,X)}r(c,"setExtra");function g($){p.getIsolationScope().setTags($)}r(g,"setTags");function S($,X){p.getIsolationScope().setTag($,X)}r(S,"setTag");function u($){p.getIsolationScope().setUser($)}r(u,"setUser");function v(){return p.getIsolationScope().lastEventId()}r(v,"lastEventId");function E($,X){const Y=p.getCurrentScope(),ne=p.getClient();if(!ne)m.DEBUG_BUILD&&f.logger.warn("Cannot capture check-in. No client defined.");else if(!ne.captureCheckIn)m.DEBUG_BUILD&&f.logger.warn("Cannot capture check-in. Client does not support sending check-ins.");else return ne.captureCheckIn($,X,Y);return f.uuid4()}r(E,"captureCheckIn");function b($,X,Y){const ne=E({monitorSlug:$,status:"in_progress"},Y),ie=f.timestampInSeconds();function ge(Ie){E({monitorSlug:$,status:Ie,checkInId:ne,duration:f.timestampInSeconds()-ie})}return r(ge,"finishCheckIn"),p.withIsolationScope(()=>{let Ie;try{Ie=X()}catch(We){throw ge("error"),We}return f.isThenable(Ie)?Promise.resolve(Ie).then(()=>{ge("ok")},()=>{ge("error")}):ge("ok"),Ie})}r(b,"withMonitor");async function _($){const X=p.getClient();return X?X.flush($):(m.DEBUG_BUILD&&f.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}r(_,"flush");async function C($){const X=p.getClient();return X?X.close($):(m.DEBUG_BUILD&&f.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}r(C,"close");function I(){return!!p.getClient()}r(I,"isInitialized");function A(){const $=p.getClient();return!!$&&$.getOptions().enabled!==!1&&!!$.getTransport()}r(A,"isEnabled");function w($){p.getIsolationScope().addEventProcessor($)}r(w,"addEventProcessor");function O($){const X=p.getClient(),Y=p.getIsolationScope(),ne=p.getCurrentScope(),{release:ie,environment:ge=h.DEFAULT_ENVIRONMENT}=X&&X.getOptions()||{},{userAgent:Ie}=f.GLOBAL_OBJ.navigator||{},We=a.makeSession({release:ie,environment:ge,user:ne.getUser()||Y.getUser(),...Ie&&{userAgent:Ie},...$}),ct=Y.getSession();return ct&&ct.status==="ok"&&a.updateSession(ct,{status:"exited"}),R(),Y.setSession(We),ne.setSession(We),We}r(O,"startSession");function R(){const $=p.getIsolationScope(),X=p.getCurrentScope(),Y=X.getSession()||$.getSession();Y&&a.closeSession(Y),F(),$.setSession(),X.setSession()}r(R,"endSession");function F(){const $=p.getIsolationScope(),X=p.getCurrentScope(),Y=p.getClient(),ne=X.getSession()||$.getSession();ne&&Y&&Y.captureSession(ne)}r(F,"_sendSessionUpdate");function V($=!1){if($){R();return}F()}r(V,"captureSession"),l.addEventProcessor=w,l.captureCheckIn=E,l.captureEvent=t,l.captureException=n,l.captureMessage=e,l.captureSession=V,l.close=C,l.endSession=R,l.flush=_,l.isEnabled=A,l.isInitialized=I,l.lastEventId=v,l.setContext=i,l.setExtra=c,l.setExtras=o,l.setTag=S,l.setTags=g,l.setUser=u,l.startSession=O,l.withMonitor=b},7983636933:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026);function p(m,a={}){const{message:s,name:n,email:e,url:t,source:i,associatedEventId:o}=m,c=h.getClient(),g={contexts:{feedback:f.dropUndefinedKeys({contact_email:e,name:n,message:s,url:t,source:i,associated_event_id:o})},type:"feedback",level:"info"};return c&&c.emit("beforeSendFeedback",g,a),h.getCurrentScope().captureEvent(g,a)}r(p,"captureFeedback"),l.captureFeedback=p},296812610:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(2332127203);d(2206474662),d(8844511336);const m=d(8645141291),a=d(5475300505),s=d(8167549304),n=d(1150305139),e=d(4530391782),t=d(9064881818);function i(S,u,v,E,b="auto.http.browser"){if(!S.fetchData)return;const _=m.hasTracingEnabled()&&u(S.fetchData.url);if(S.endTimestamp&&_){const $=S.fetchData.__span;if(!$)return;const X=E[$];X&&(g(X,S),delete E[$]);return}const C=h.getCurrentScope(),I=h.getClient(),{method:A,url:w}=S.fetchData,O=c(w),R=O?f.parseUrl(O).host:void 0,F=!!a.getActiveSpan(),V=_&&F?e.startInactiveSpan({name:`${A} ${w}`,attributes:{url:w,type:"fetch","http.method":A,"http.url":O,"server.address":R,[p.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:b,[p.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new s.SentryNonRecordingSpan;if(S.fetchData.__span=V.spanContext().spanId,E[V.spanContext().spanId]=V,v(S.fetchData.url)&&I){const $=S.args[0];S.args[1]=S.args[1]||{};const X=S.args[1];X.headers=o($,I,C,X,m.hasTracingEnabled()&&F?V:void 0)}return V}r(i,"instrumentFetchRequest");function o(S,u,v,E,b){const _=h.getIsolationScope(),{traceId:C,spanId:I,sampled:A,dsc:w}={..._.getPropagationContext(),...v.getPropagationContext()},O=b?a.spanToTraceHeader(b):f.generateSentryTraceHeader(C,I,A),R=f.dynamicSamplingContextToSentryBaggageHeader(w||(b?t.getDynamicSamplingContextFromSpan(b):t.getDynamicSamplingContextFromClient(C,u))),F=E.headers||(typeof Request<"u"&&f.isInstanceOf(S,Request)?S.headers:void 0);if(F)if(typeof Headers<"u"&&f.isInstanceOf(F,Headers)){const V=new Headers(F);return V.append("sentry-trace",O),R&&V.append(f.BAGGAGE_HEADER_NAME,R),V}else if(Array.isArray(F)){const V=[...F,["sentry-trace",O]];return R&&V.push([f.BAGGAGE_HEADER_NAME,R]),V}else{const V="baggage"in F?F.baggage:void 0,$=[];return Array.isArray(V)?$.push(...V):V&&$.push(V),R&&$.push(R),{...F,"sentry-trace":O,baggage:$.length>0?$.join(","):void 0}}else return{"sentry-trace":O,baggage:R}}r(o,"addTracingHeadersToFetchRequest");function c(S){try{return new URL(S).href}catch{return}}r(c,"getFullURL");function g(S,u){if(u.response){n.setHttpStatus(S,u.response.status);const v=u.response&&u.response.headers&&u.response.headers.get("content-length");if(v){const E=parseInt(v);E>0&&S.setAttribute("http.response_content_length",E)}}else u.error&&S.setStatus({code:n.SPAN_STATUS_ERROR,message:"internal_error"});S.end()}r(g,"endSpan"),l.addTracingHeadersToFetchRequest=o,l.instrumentFetchRequest=i},6649284951:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(4433801832),h=d(8438156026),p=d(5015065869);function m(){return{bindClient(n){h.getCurrentScope().setClient(n)},withScope:h.withScope,getClient:()=>h.getClient(),getScope:h.getCurrentScope,getIsolationScope:h.getIsolationScope,captureException:(n,e)=>h.getCurrentScope().captureException(n,e),captureMessage:(n,e,t)=>h.getCurrentScope().captureMessage(n,e,t),captureEvent:p.captureEvent,addBreadcrumb:f.addBreadcrumb,setUser:p.setUser,setTags:p.setTags,setTag:p.setTag,setExtra:p.setExtra,setExtras:p.setExtras,setContext:p.setContext,getIntegration(n){const e=h.getClient();return e&&e.getIntegrationByName(n.id)||null},startSession:p.startSession,endSession:p.endSession,captureSession(n){if(n)return p.endSession();s()}}}r(m,"getCurrentHubShim");const a=m;function s(){const n=h.getCurrentScope(),e=h.getClient(),t=n.getSession();e&&t&&e.captureSession(t)}r(s,"_sendSessionUpdate"),l.getCurrentHub=a,l.getCurrentHubShim=m},8482989710:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(2206474662),h=d(9578383602),p=d(5618891990),m=d(7265722327),a=d(6720678066),s=d(8167549304),n=d(1150305139),e=d(4530391782),t=d(9064881818),i=d(3345259075),o=d(6939919536),c=d(8482601586),g=d(2332127203),S=d(5297268390),u=d(5015065869),v=d(8438156026),E=d(897859094),b=d(2685322190),_=d(5234873710),C=d(7083316483),I=d(2158524366),A=d(5911348835),w=d(9857059330),O=d(4936960144),R=d(1817668688),F=d(9483783910),V=d(306863924),$=d(3178226440),X=d(2843166954),Y=d(639277478),ne=d(1927145604),ie=d(8969228363),ge=d(9877103701),Ie=d(7584701501),We=d(8645141291),ct=d(175966809),Ae=d(5800525242),Fe=d(4718881455),Xe=d(5475300505),Ge=d(1119532287),it=d(3433863337),Dt=d(4834620523),wt=d(4433801832),Pe=d(3620727810),xe=d(3514394122),et=d(8947681608),rt=d(2133507327),je=d(4474256835),Ft=d(8953708405),Gt=d(1072936841),Xt=d(1794376169),sn=d(6437106406),cn=d(8435832800),Bt=d(3496361636),gn=d(3005223956),Ci=d(6342793611),$n=d(6431460707),Sn=d(5988719990),nn=d(1243296801),Vt=d(296812610),Wn=d(2117263085),Lt=d(7983636933),zt=d(6649284951);l.registerSpanErrorInstrumentation=f.registerSpanErrorInstrumentation,l.getCapturedScopesOnSpan=h.getCapturedScopesOnSpan,l.setCapturedScopesOnSpan=h.setCapturedScopesOnSpan,l.addTracingExtensions=p.addTracingExtensions,l.TRACING_DEFAULTS=m.TRACING_DEFAULTS,l.startIdleSpan=m.startIdleSpan,l.SentrySpan=a.SentrySpan,l.SentryNonRecordingSpan=s.SentryNonRecordingSpan,l.SPAN_STATUS_ERROR=n.SPAN_STATUS_ERROR,l.SPAN_STATUS_OK=n.SPAN_STATUS_OK,l.SPAN_STATUS_UNSET=n.SPAN_STATUS_UNSET,l.getSpanStatusFromHttpCode=n.getSpanStatusFromHttpCode,l.setHttpStatus=n.setHttpStatus,l.continueTrace=e.continueTrace,l.startInactiveSpan=e.startInactiveSpan,l.startSpan=e.startSpan,l.startSpanManual=e.startSpanManual,l.suppressTracing=e.suppressTracing,l.withActiveSpan=e.withActiveSpan,l.getDynamicSamplingContextFromClient=t.getDynamicSamplingContextFromClient,l.getDynamicSamplingContextFromSpan=t.getDynamicSamplingContextFromSpan,l.setMeasurement=i.setMeasurement,l.timedEventsToMeasurements=i.timedEventsToMeasurements,l.sampleSpan=o.sampleSpan,l.logSpanEnd=c.logSpanEnd,l.logSpanStart=c.logSpanStart,l.SEMANTIC_ATTRIBUTE_CACHE_HIT=g.SEMANTIC_ATTRIBUTE_CACHE_HIT,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=g.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=g.SEMANTIC_ATTRIBUTE_CACHE_KEY,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=g.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=g.SEMANTIC_ATTRIBUTE_PROFILE_ID,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=g.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=g.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=g.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.createEventEnvelope=S.createEventEnvelope,l.createSessionEnvelope=S.createSessionEnvelope,l.createSpanEnvelope=S.createSpanEnvelope,l.addEventProcessor=u.addEventProcessor,l.captureCheckIn=u.captureCheckIn,l.captureEvent=u.captureEvent,l.captureException=u.captureException,l.captureMessage=u.captureMessage,l.captureSession=u.captureSession,l.close=u.close,l.endSession=u.endSession,l.flush=u.flush,l.isEnabled=u.isEnabled,l.isInitialized=u.isInitialized,l.lastEventId=u.lastEventId,l.setContext=u.setContext,l.setExtra=u.setExtra,l.setExtras=u.setExtras,l.setTag=u.setTag,l.setTags=u.setTags,l.setUser=u.setUser,l.startSession=u.startSession,l.withMonitor=u.withMonitor,l.getClient=v.getClient,l.getCurrentScope=v.getCurrentScope,l.getDefaultCurrentScope=v.getDefaultCurrentScope,l.getDefaultIsolationScope=v.getDefaultIsolationScope,l.getGlobalScope=v.getGlobalScope,l.getIsolationScope=v.getIsolationScope,l.withIsolationScope=v.withIsolationScope,l.withScope=v.withScope,l.setAsyncContextStrategy=E.setAsyncContextStrategy,l.getMainCarrier=b.getMainCarrier,l.closeSession=_.closeSession,l.makeSession=_.makeSession,l.updateSession=_.updateSession,l.SessionFlusher=C.SessionFlusher,l.Scope=I.Scope,l.notifyEventProcessors=A.notifyEventProcessors,l.getEnvelopeEndpointWithUrlEncodedAuth=w.getEnvelopeEndpointWithUrlEncodedAuth,l.getReportDialogEndpoint=w.getReportDialogEndpoint,l.BaseClient=O.BaseClient,l.ServerRuntimeClient=R.ServerRuntimeClient,l.initAndBind=F.initAndBind,l.setCurrentClient=F.setCurrentClient,l.createTransport=V.createTransport,l.makeOfflineTransport=$.makeOfflineTransport,l.makeMultiplexedTransport=X.makeMultiplexedTransport,l.SDK_VERSION=Y.SDK_VERSION,l.addIntegration=ne.addIntegration,l.defineIntegration=ne.defineIntegration,l.getIntegrationsToSetup=ne.getIntegrationsToSetup,l.applyScopeDataToEvent=ie.applyScopeDataToEvent,l.mergeScopeData=ie.mergeScopeData,l.prepareEvent=ge.prepareEvent,l.createCheckInEnvelope=Ie.createCheckInEnvelope,l.hasTracingEnabled=We.hasTracingEnabled,l.isSentryRequestUrl=ct.isSentryRequestUrl,l.handleCallbackErrors=Ae.handleCallbackErrors,l.parameterize=Fe.parameterize,l.addChildSpanToSpan=Xe.addChildSpanToSpan,l.getActiveSpan=Xe.getActiveSpan,l.getRootSpan=Xe.getRootSpan,l.getSpanDescendants=Xe.getSpanDescendants,l.getStatusMessage=Xe.getStatusMessage,l.spanIsSampled=Xe.spanIsSampled,l.spanToBaggageHeader=Xe.spanToBaggageHeader,l.spanToJSON=Xe.spanToJSON,l.spanToTraceContext=Xe.spanToTraceContext,l.spanToTraceHeader=Xe.spanToTraceHeader,l.parseSampleRate=Ge.parseSampleRate,l.applySdkMetadata=it.applySdkMetadata,l.DEFAULT_ENVIRONMENT=Dt.DEFAULT_ENVIRONMENT,l.addBreadcrumb=wt.addBreadcrumb,l.functionToStringIntegration=Pe.functionToStringIntegration,l.inboundFiltersIntegration=xe.inboundFiltersIntegration,l.linkedErrorsIntegration=et.linkedErrorsIntegration,l.moduleMetadataIntegration=rt.moduleMetadataIntegration,l.requestDataIntegration=je.requestDataIntegration,l.captureConsoleIntegration=Ft.captureConsoleIntegration,l.debugIntegration=Gt.debugIntegration,l.dedupeIntegration=Xt.dedupeIntegration,l.extraErrorDataIntegration=sn.extraErrorDataIntegration,l.rewriteFramesIntegration=cn.rewriteFramesIntegration,l.sessionTimingIntegration=Bt.sessionTimingIntegration,l.zodErrorsIntegration=gn.zodErrorsIntegration,l.metrics=Ci.metrics,l.metricsDefault=$n.metricsDefault,l.BrowserMetricsAggregator=Sn.BrowserMetricsAggregator,l.getMetricSummaryJsonForSpan=nn.getMetricSummaryJsonForSpan,l.addTracingHeadersToFetchRequest=Vt.addTracingHeadersToFetchRequest,l.instrumentFetchRequest=Vt.instrumentFetchRequest,l.trpcMiddleware=Wn.trpcMiddleware,l.captureFeedback=Lt.captureFeedback,l.getCurrentHub=zt.getCurrentHub,l.getCurrentHubShim=zt.getCurrentHubShim},1927145604:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(8844511336),m=[];function a(g){const S={};return g.forEach(u=>{const{name:v}=u,E=S[v];E&&!E.isDefaultInstance&&u.isDefaultInstance||(S[v]=u)}),Object.keys(S).map(u=>S[u])}r(a,"filterDuplicates");function s(g){const S=g.defaultIntegrations||[],u=g.integrations;S.forEach(_=>{_.isDefaultInstance=!0});let v;Array.isArray(u)?v=[...S,...u]:typeof u=="function"?v=f.arrayify(u(S)):v=S;const E=a(v),b=o(E,_=>_.name==="Debug");if(b!==-1){const[_]=E.splice(b,1);E.push(_)}return E}r(s,"getIntegrationsToSetup");function n(g,S){const u={};return S.forEach(v=>{v&&t(g,v,u)}),u}r(n,"setupIntegrations");function e(g,S){for(const u of S)u&&u.afterAllSetup&&u.afterAllSetup(g)}r(e,"afterSetupIntegrations");function t(g,S,u){if(u[S.name]){p.DEBUG_BUILD&&f.logger.log(`Integration skipped because it was already installed: ${S.name}`);return}if(u[S.name]=S,m.indexOf(S.name)===-1&&typeof S.setupOnce=="function"&&(S.setupOnce(),m.push(S.name)),S.setup&&typeof S.setup=="function"&&S.setup(g),typeof S.preprocessEvent=="function"){const v=S.preprocessEvent.bind(S);g.on("preprocessEvent",(E,b)=>v(E,b,g))}if(typeof S.processEvent=="function"){const v=S.processEvent.bind(S),E=Object.assign((b,_)=>v(b,_,g),{id:S.name});g.addEventProcessor(E)}p.DEBUG_BUILD&&f.logger.log(`Integration installed: ${S.name}`)}r(t,"setupIntegration");function i(g){const S=h.getClient();if(!S){p.DEBUG_BUILD&&f.logger.warn(`Cannot add integration "${g.name}" because no SDK Client is available.`);return}S.addIntegration(g)}r(i,"addIntegration");function o(g,S){for(let u=0;u<g.length;u++)if(S(g[u])===!0)return u;return-1}r(o,"findIndex");function c(g){return g}r(c,"defineIntegration"),l.addIntegration=i,l.afterSetupIntegrations=e,l.defineIntegration=c,l.getIntegrationsToSetup=s,l.installedIntegrations=m,l.setupIntegration=t,l.setupIntegrations=n},8953708405:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(5015065869),m=d(1927145604),a="CaptureConsole",s=r((t={})=>{const i=t.levels||f.CONSOLE_LEVELS;return{name:a,setup(o){"console"in f.GLOBAL_OBJ&&f.addConsoleInstrumentationHandler(({args:c,level:g})=>{h.getClient()!==o||!i.includes(g)||e(c,g)})}}},"_captureConsoleIntegration"),n=m.defineIntegration(s);function e(t,i){const o={level:f.severityLevelFromString(i),extra:{arguments:t}};h.withScope(c=>{if(c.addEventProcessor(u=>(u.logger="console",f.addExceptionMechanism(u,{handled:!1,type:"console"}),u)),i==="assert"){if(!t[0]){const u=`Assertion failed: ${f.safeJoin(t.slice(1)," ")||"console.assert"}`;c.setExtra("arguments",t.slice(1)),p.captureMessage(u,o)}return}const g=t.find(u=>u instanceof Error);if(g){p.captureException(g,o);return}const S=f.safeJoin(t," ");p.captureMessage(S,o)})}r(e,"consoleHandler"),l.captureConsoleIntegration=n},1072936841:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p="Debug",m=r((s={})=>{const n={debugger:!1,stringify:!1,...s};return{name:p,setup(e){e.on("beforeSendEvent",(t,i)=>{if(n.debugger)debugger;f.consoleSandbox(()=>{n.stringify?(console.log(JSON.stringify(t,null,2)),i&&Object.keys(i).length&&console.log(JSON.stringify(i,null,2))):(console.log(t),i&&Object.keys(i).length&&console.log(i))})})}}},"_debugIntegration"),a=h.defineIntegration(m);l.debugIntegration=a},1794376169:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p=d(8844511336),m="Dedupe",a=r(()=>{let S;return{name:m,processEvent(u){if(u.type)return u;try{if(n(u,S))return p.DEBUG_BUILD&&f.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return S=u}}},"_dedupeIntegration"),s=h.defineIntegration(a);function n(S,u){return u?!!(e(S,u)||t(S,u)):!1}r(n,"_shouldDropEvent");function e(S,u){const v=S.message,E=u.message;return!(!v&&!E||v&&!E||!v&&E||v!==E||!o(S,u)||!i(S,u))}r(e,"_isSameMessageEvent");function t(S,u){const v=c(u),E=c(S);return!(!v||!E||v.type!==E.type||v.value!==E.value||!o(S,u)||!i(S,u))}r(t,"_isSameExceptionEvent");function i(S,u){let v=g(S),E=g(u);if(!v&&!E)return!0;if(v&&!E||!v&&E||(v=v,E=E,E.length!==v.length))return!1;for(let b=0;b<E.length;b++){const _=E[b],C=v[b];if(_.filename!==C.filename||_.lineno!==C.lineno||_.colno!==C.colno||_.function!==C.function)return!1}return!0}r(i,"_isSameStacktrace");function o(S,u){let v=S.fingerprint,E=u.fingerprint;if(!v&&!E)return!0;if(v&&!E||!v&&E)return!1;v=v,E=E;try{return v.join("")===E.join("")}catch{return!1}}r(o,"_isSameFingerprint");function c(S){return S.exception&&S.exception.values&&S.exception.values[0]}r(c,"_getExceptionFromEvent");function g(S){const u=S.exception;if(u)try{return u.values[0].stacktrace.frames}catch{return}}r(g,"_getFramesFromEvent"),l._shouldDropEvent=n,l.dedupeIntegration=s},6437106406:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p=d(8844511336),m="ExtraErrorData",a=r((t={})=>{const{depth:i=3,captureErrorCause:o=!0}=t;return{name:m,processEvent(c,g){return n(c,g,i,o)}}},"_extraErrorDataIntegration"),s=h.defineIntegration(a);function n(t,i={},o,c){if(!i.originalException||!f.isError(i.originalException))return t;const g=i.originalException.name||i.originalException.constructor.name,S=e(i.originalException,c);if(S){const u={...t.contexts},v=f.normalize(S,o);return f.isPlainObject(v)&&(f.addNonEnumerableProperty(v,"__sentry_skip_normalization__",!0),u[g]=v),{...t,contexts:u}}return t}r(n,"_enhanceEventWithErrorData");function e(t,i){try{const o=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],c={};for(const g of Object.keys(t)){if(o.indexOf(g)!==-1)continue;const S=t[g];c[g]=f.isError(S)?S.toString():S}if(i&&t.cause!==void 0&&(c.cause=f.isError(t.cause)?t.cause.toString():t.cause),typeof t.toJSON=="function"){const g=t.toJSON();for(const S of Object.keys(g)){const u=g[S];c[S]=f.isError(u)?u.toString():u}}return c}catch(o){p.DEBUG_BUILD&&f.logger.error("Unable to extract extra data from the Error object:",o)}return null}r(e,"_extractErrorData"),l.extraErrorDataIntegration=s},3620727810:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(1927145604);let m;const a="FunctionToString",s=new WeakMap,n=r(()=>({name:a,setupOnce(){m=Function.prototype.toString;try{Function.prototype.toString=function(...t){const i=f.getOriginalFunction(this),o=s.has(h.getClient())&&i!==void 0?i:this;return m.apply(o,t)}}catch{}},setup(t){s.set(t,!0)}}),"_functionToStringIntegration"),e=p.defineIntegration(n);l.functionToStringIntegration=e},3514394122:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336),p=d(1927145604),m=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],a="InboundFilters",s=r((b={})=>({name:a,processEvent(_,C,I){const A=I.getOptions(),w=e(b,A);return t(_,w)?null:_}}),"_inboundFiltersIntegration"),n=p.defineIntegration(s);function e(b={},_={}){return{allowUrls:[...b.allowUrls||[],..._.allowUrls||[]],denyUrls:[...b.denyUrls||[],..._.denyUrls||[]],ignoreErrors:[...b.ignoreErrors||[],..._.ignoreErrors||[],...b.disableErrorDefaults?[]:m],ignoreTransactions:[...b.ignoreTransactions||[],..._.ignoreTransactions||[]],ignoreInternal:b.ignoreInternal!==void 0?b.ignoreInternal:!0}}r(e,"_mergeOptions");function t(b,_){return _.ignoreInternal&&u(b)?(h.DEBUG_BUILD&&f.logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${f.getEventDescription(b)}`),!0):i(b,_.ignoreErrors)?(h.DEBUG_BUILD&&f.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${f.getEventDescription(b)}`),!0):o(b,_.ignoreTransactions)?(h.DEBUG_BUILD&&f.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${f.getEventDescription(b)}`),!0):c(b,_.denyUrls)?(h.DEBUG_BUILD&&f.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${f.getEventDescription(b)}.
Url: ${E(b)}`),!0):g(b,_.allowUrls)?!1:(h.DEBUG_BUILD&&f.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${f.getEventDescription(b)}.
Url: ${E(b)}`),!0)}r(t,"_shouldDropEvent");function i(b,_){return b.type||!_||!_.length?!1:S(b).some(C=>f.stringMatchesSomePattern(C,_))}r(i,"_isIgnoredError");function o(b,_){if(b.type!=="transaction"||!_||!_.length)return!1;const C=b.transaction;return C?f.stringMatchesSomePattern(C,_):!1}r(o,"_isIgnoredTransaction");function c(b,_){if(!_||!_.length)return!1;const C=E(b);return C?f.stringMatchesSomePattern(C,_):!1}r(c,"_isDeniedUrl");function g(b,_){if(!_||!_.length)return!0;const C=E(b);return C?f.stringMatchesSomePattern(C,_):!0}r(g,"_isAllowedUrl");function S(b){const _=[];b.message&&_.push(b.message);let C;try{C=b.exception.values[b.exception.values.length-1]}catch{}return C&&C.value&&(_.push(C.value),C.type&&_.push(`${C.type}: ${C.value}`)),_}r(S,"_getPossibleEventMessages");function u(b){try{return b.exception.values[0].type==="SentryError"}catch{}return!1}r(u,"_isSentryError");function v(b=[]){for(let _=b.length-1;_>=0;_--){const C=b[_];if(C&&C.filename!=="<anonymous>"&&C.filename!=="[native code]")return C.filename||null}return null}r(v,"_getLastValidUrl");function E(b){try{let _;try{_=b.exception.values[0].stacktrace.frames}catch{}return _?v(_):null}catch{return h.DEBUG_BUILD&&f.logger.error(`Cannot extract url for event ${f.getEventDescription(b)}`),null}}r(E,"_getEventFilterUrl"),l.inboundFiltersIntegration=n},8947681608:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p="cause",m=5,a="LinkedErrors",s=r((e={})=>{const t=e.limit||m,i=e.key||p;return{name:a,preprocessEvent(o,c,g){const S=g.getOptions();f.applyAggregateErrorsToEvent(f.exceptionFromError,S.stackParser,S.maxValueLength,i,t,o,c)}}},"_linkedErrorsIntegration"),n=h.defineIntegration(s);l.linkedErrorsIntegration=n},2133507327:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p=d(2247716195),m="ModuleMetadata",a=r(()=>({name:m,setup(n){n.on("beforeEnvelope",e=>{f.forEachEnvelopeItem(e,(t,i)=>{if(i==="event"){const o=Array.isArray(t)?t[1]:void 0;o&&(p.stripMetadataFromStackFrames(o),t[1]=o)}})})},processEvent(n,e,t){const i=t.getOptions().stackParser;return p.addMetadataToStackFrames(i,n),n}}),"_moduleMetadataIntegration"),s=h.defineIntegration(a);l.moduleMetadataIntegration=s},4474256835:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},m="RequestData",a=r((e={})=>{const t={...p,...e,include:{...p.include,...e.include,user:e.include&&typeof e.include.user=="boolean"?e.include.user:{...p.include.user,...(e.include||{}).user}}};return{name:m,processEvent(i){const{sdkProcessingMetadata:o={}}=i,c=o.request;if(!c)return i;const g=n(t);return f.addRequestDataToEvent(i,c,g)}}},"_requestDataIntegration"),s=h.defineIntegration(a);function n(e){const{transactionNamingScheme:t,include:{ip:i,user:o,...c}}=e,g=["method"];for(const[u,v]of Object.entries(c))v&&g.push(u);let S;if(o===void 0)S=!0;else if(typeof o=="boolean")S=o;else{const u=[];for(const[v,E]of Object.entries(o))E&&u.push(v);S=u}return{include:{ip:i,user:S,request:g.length!==0?g:void 0,transaction:t}}}r(n,"convertReqDataIntegrationOptsToAddReqDataOpts"),l.requestDataIntegration=s},8435832800:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p="RewriteFrames",m=h.defineIntegration((s={})=>{const n=s.root,e=s.prefix||"app:///",t="window"in f.GLOBAL_OBJ&&f.GLOBAL_OBJ.window!==void 0,i=s.iteratee||a({isBrowser:t,root:n,prefix:e});function o(g){try{return{...g,exception:{...g.exception,values:g.exception.values.map(S=>({...S,...S.stacktrace&&{stacktrace:c(S.stacktrace)}}))}}}catch{return g}}r(o,"_processExceptionsEvent");function c(g){return{...g,frames:g&&g.frames&&g.frames.map(S=>i(S))}}return r(c,"_processStacktrace"),{name:p,processEvent(g){let S=g;return g.exception&&Array.isArray(g.exception.values)&&(S=o(S)),S}}});function a({isBrowser:s,root:n,prefix:e}){return t=>{if(!t.filename)return t;const i=/^[a-zA-Z]:\\/.test(t.filename)||t.filename.includes("\\")&&!t.filename.includes("/"),o=/^\//.test(t.filename);if(s){if(n){const c=t.filename;c.indexOf(n)===0&&(t.filename=c.replace(n,e))}}else if(i||o){const c=i?t.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):t.filename,g=n?f.relative(n,c):f.basename(c);t.filename=`${e}${g}`}return t}}r(a,"generateIteratee"),l.generateIteratee=a,l.rewriteFramesIntegration=m},3496361636:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p="SessionTiming",m=r(()=>{const s=f.timestampInSeconds()*1e3;return{name:p,processEvent(n){const e=f.timestampInSeconds()*1e3;return{...n,extra:{...n.extra,["session:start"]:s,["session:duration"]:e-s,["session:end"]:e}}}}},"_sessionTimingIntegration"),a=h.defineIntegration(m);l.sessionTimingIntegration=a},3005223956:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(1927145604),p=10,m="ZodErrors";function a(o){return f.isError(o)&&o.name==="ZodError"&&Array.isArray(o.errors)}r(a,"originalExceptionIsZodError");function s(o){return{...o,path:"path"in o&&Array.isArray(o.path)?o.path.join("."):void 0,keys:"keys"in o?JSON.stringify(o.keys):void 0,unionErrors:"unionErrors"in o?JSON.stringify(o.unionErrors):void 0}}r(s,"formatIssueTitle");function n(o){const c=new Set;for(const S of o.issues)S.path&&c.add(S.path[0]);const g=Array.from(c);return`Failed to validate keys: ${f.truncate(g.join(", "),100)}`}r(n,"formatIssueMessage");function e(o,c,g){return!c.exception||!c.exception.values||!g||!g.originalException||!a(g.originalException)||g.originalException.issues.length===0?c:{...c,exception:{...c.exception,values:[{...c.exception.values[0],value:n(g.originalException)},...c.exception.values.slice(1)]},extra:{...c.extra,"zoderror.issues":g.originalException.errors.slice(0,o).map(s)}}}r(e,"applyZodErrorsToEvent");const t=r((o={})=>{const c=o.limit||p;return{name:m,processEvent(g,S){return e(c,g,S)}}},"_zodErrorsIntegration"),i=h.defineIntegration(t);l.applyZodErrorsToEvent=e,l.zodErrorsIntegration=i},2247716195:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=new Map,p=new Set;function m(e){if(f.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(f.GLOBAL_OBJ._sentryModuleMetadata)){const i=f.GLOBAL_OBJ._sentryModuleMetadata[t];if(p.has(t))continue;p.add(t);const o=e(t);for(const c of o.reverse())if(c.filename){h.set(c.filename,i);break}}}r(m,"ensureMetadataStacksAreParsed");function a(e,t){return m(e),h.get(t)}r(a,"getMetadataForUrl");function s(e,t){try{t.exception.values.forEach(i=>{if(i.stacktrace)for(const o of i.stacktrace.frames||[]){if(!o.filename)continue;const c=a(e,o.filename);c&&(o.module_metadata=c)}})}catch{}}r(s,"addMetadataToStackFrames");function n(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const i of t.stacktrace.frames||[])delete i.module_metadata})}catch{}}r(n,"stripMetadataFromStackFrames"),l.addMetadataToStackFrames=s,l.getMetadataForUrl=a,l.stripMetadataFromStackFrames=n},7604170301:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(5475300505),p=d(9622876717),m=d(5663957480),a=d(8672240743),s=d(5227316865);class n{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),p.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*p.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(t,i,o,c="none",g={},S=f.timestampInSeconds()){const u=Math.floor(S),v=s.sanitizeMetricKey(i),E=s.sanitizeTags(g),b=s.sanitizeUnit(c),_=s.getBucketKey(t,v,b,E);let C=this._buckets.get(_);const I=C&&t===p.SET_METRIC_TYPE?C.metric.weight:0;C?(C.metric.add(o),C.timestamp<u&&(C.timestamp=u)):(C={metric:new a.METRIC_MAP[t](o),timestamp:u,metricType:t,name:v,unit:b,tags:E},this._buckets.set(_,C));const A=typeof o=="string"?C.metric.weight-I:o;h.updateMetricSummaryOnActiveSpan(t,v,A,b,g,_),this._bucketsTotalWeight+=C.metric.weight,this._bucketsTotalWeight>=p.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush){this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();return}const t=Math.floor(f.timestampInSeconds())-p.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,i=new Map;for(const[o,c]of this._buckets)c.timestamp<=t&&(i.set(o,c),this._bucketsTotalWeight-=c.metric.weight);for(const[o]of i)this._buckets.delete(o);this._captureMetrics(i)}_captureMetrics(t){if(t.size>0){const i=Array.from(t).map(([,o])=>o);m.captureAggregateMetrics(this._client,i)}}}r(n,"MetricsAggregator"),l.MetricsAggregator=n},5988719990:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(5475300505),p=d(9622876717),m=d(5663957480),a=d(8672240743),s=d(5227316865);class n{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),p.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(t,i,o,c="none",g={},S=f.timestampInSeconds()){const u=Math.floor(S),v=s.sanitizeMetricKey(i),E=s.sanitizeTags(g),b=s.sanitizeUnit(c),_=s.getBucketKey(t,v,b,E);let C=this._buckets.get(_);const I=C&&t===p.SET_METRIC_TYPE?C.metric.weight:0;C?(C.metric.add(o),C.timestamp<u&&(C.timestamp=u)):(C={metric:new a.METRIC_MAP[t](o),timestamp:u,metricType:t,name:v,unit:b,tags:E},this._buckets.set(_,C));const A=typeof o=="string"?C.metric.weight-I:o;h.updateMetricSummaryOnActiveSpan(t,v,A,b,g,_)}flush(){if(this._buckets.size===0)return;const t=Array.from(this._buckets.values());m.captureAggregateMetrics(this._client,t),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}r(n,"BrowserMetricsAggregator"),l.BrowserMetricsAggregator=n},9622876717:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="c",f="g",h="s",p="d",m=5e3,a=1e4,s=1e4;l.COUNTER_METRIC_TYPE=d,l.DEFAULT_BROWSER_FLUSH_INTERVAL=m,l.DEFAULT_FLUSH_INTERVAL=a,l.DISTRIBUTION_METRIC_TYPE=p,l.GAUGE_METRIC_TYPE=f,l.MAX_WEIGHT=s,l.SET_METRIC_TYPE=h},5663957480:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(5227316865);function p(s,n){f.logger.log(`Flushing aggregated metrics, number of metrics: ${n.length}`);const e=s.getDsn(),t=s.getSdkMetadata(),i=s.getOptions().tunnel,o=m(n,e,t,i);s.sendEnvelope(o)}r(p,"captureAggregateMetrics");function m(s,n,e,t){const i={sent_at:new Date().toISOString()};e&&e.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),t&&n&&(i.dsn=f.dsnToString(n));const o=a(s);return f.createEnvelope(i,[o])}r(m,"createMetricEnvelope");function a(s){const n=h.serializeMetricBuckets(s);return[{type:"statsd",length:n.length},n]}r(a,"createMetricEnvelopeItem"),l.captureAggregateMetrics=p,l.createMetricEnvelope=m},6431460707:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7604170301),h=d(6342793611);function p(t,i=1,o){h.metrics.increment(f.MetricsAggregator,t,i,o)}r(p,"increment");function m(t,i,o){h.metrics.distribution(f.MetricsAggregator,t,i,o)}r(m,"distribution");function a(t,i,o){h.metrics.set(f.MetricsAggregator,t,i,o)}r(a,"set");function s(t,i,o){h.metrics.gauge(f.MetricsAggregator,t,i,o)}r(s,"gauge");function n(t){return h.metrics.getMetricsAggregatorForClient(t,f.MetricsAggregator)}r(n,"getMetricsAggregatorForClient");const e={increment:p,distribution:m,set:a,gauge:s,getMetricsAggregatorForClient:n};l.metricsDefault=e},6342793611:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(8844511336),m=d(5475300505),a=d(9622876717);function s(g,S){const u=f.getGlobalSingleton("globalMetricsAggregators",()=>new WeakMap),v=u.get(g);if(v)return v;const E=new S(g);return g.on("flush",()=>E.flush()),g.on("close",()=>E.close()),u.set(g,E),E}r(s,"getMetricsAggregatorForClient");function n(g,S,u,v,E={}){const b=E.client||h.getClient();if(!b)return;const _=m.getActiveSpan(),C=_?m.getRootSpan(_):void 0,{unit:I,tags:A,timestamp:w}=E,{release:O,environment:R}=b.getOptions(),F={};O&&(F.release=O),R&&(F.environment=R),C&&(F.transaction=m.spanToJSON(C).description||""),p.DEBUG_BUILD&&f.logger.log(`Adding value of ${v} to ${S} metric ${u}`),s(b,g).add(S,u,v,I,{...F,...A},w)}r(n,"addToMetricsAggregator");function e(g,S,u=1,v){n(g,a.COUNTER_METRIC_TYPE,S,u,v)}r(e,"increment");function t(g,S,u,v){n(g,a.DISTRIBUTION_METRIC_TYPE,S,u,v)}r(t,"distribution");function i(g,S,u,v){n(g,a.SET_METRIC_TYPE,S,u,v)}r(i,"set");function o(g,S,u,v){n(g,a.GAUGE_METRIC_TYPE,S,u,v)}r(o,"gauge");const c={increment:e,distribution:t,set:i,gauge:o,getMetricsAggregatorForClient:s};l.metrics=c},8672240743:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9622876717),h=d(5227316865);class p{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}r(p,"CounterMetric");class m{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}r(m,"GaugeMetric");class a{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}r(a,"DistributionMetric");class s{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?h.simpleHash(t):t).join(":")}}r(s,"SetMetric");const n={[f.COUNTER_METRIC_TYPE]:p,[f.GAUGE_METRIC_TYPE]:m,[f.DISTRIBUTION_METRIC_TYPE]:a,[f.SET_METRIC_TYPE]:s};l.CounterMetric=p,l.DistributionMetric=a,l.GaugeMetric=m,l.METRIC_MAP=n,l.SetMetric=s},1243296801:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);let h;function p(s){return h?h.get(s):void 0}r(p,"getMetricStorageForSpan");function m(s){const n=p(s);if(!n)return;const e={};for(const[,[t,i]]of n)e[t]||(e[t]=[]),e[t].push(f.dropUndefinedKeys(i));return e}r(m,"getMetricSummaryJsonForSpan");function a(s,n,e,t,i,o,c){const g=p(s)||new Map,S=`${n}:${e}@${i}`,u=g.get(c);if(u){const[,v]=u;g.set(c,[S,{min:Math.min(v.min,t),max:Math.max(v.max,t),count:v.count+=1,sum:v.sum+=t,tags:v.tags}])}else g.set(c,[S,{min:t,max:t,count:1,sum:t,tags:o}]);h||(h=new WeakMap),h.set(s,g)}r(a,"updateMetricSummaryOnSpan"),l.getMetricSummaryJsonForSpan=m,l.updateMetricSummaryOnSpan=a},5227316865:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);function h(c,g,S,u){const v=Object.entries(f.dropUndefinedKeys(u)).sort((E,b)=>E[0].localeCompare(b[0]));return`${c}${g}${S}${v}`}r(h,"getBucketKey");function p(c){let g=0;for(let S=0;S<c.length;S++){const u=c.charCodeAt(S);g=(g<<5)-g+u,g&=g}return g>>>0}r(p,"simpleHash");function m(c){let g="";for(const S of c){const u=Object.entries(S.tags),v=u.length>0?`|#${u.map(([E,b])=>`${E}:${b}`).join(",")}`:"";g+=`${S.name}@${S.unit}:${S.metric}|${S.metricType}${v}|T${S.timestamp}
`}return g}r(m,"serializeMetricBuckets");function a(c){return c.replace(/[^\w]+/gi,"_")}r(a,"sanitizeUnit");function s(c){return c.replace(/[^\w\-.]+/gi,"_")}r(s,"sanitizeMetricKey");function n(c){return c.replace(/[^\w\-./]+/gi,"")}r(n,"sanitizeTagKey");const e=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function t(c){for(const[g,S]of e)if(c===g)return S;return c}r(t,"getCharOrReplacement");function i(c){return[...c].reduce((g,S)=>g+t(S),"")}r(i,"sanitizeTagValue");function o(c){const g={};for(const S in c)if(Object.prototype.hasOwnProperty.call(c,S)){const u=n(S);g[u]=i(String(c[S]))}return g}r(o,"sanitizeTags"),l.getBucketKey=h,l.sanitizeMetricKey=s,l.sanitizeTags=o,l.sanitizeUnit=a,l.serializeMetricBuckets=m,l.simpleHash=p},2158524366:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(5234873710),p=d(9972015035),m=100;class a{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=n()}clone(){const t=new a;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,p._setSpanForScope(t,p._getSpanForScope(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&h.updateSession(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,i){return this._tags={...this._tags,[t]:i},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,i){return this._extra={...this._extra,[t]:i},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,i){return i===null?delete this._contexts[t]:this._contexts[t]=i,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const i=typeof t=="function"?t(this):t,[o,c]=i instanceof s?[i.getScopeData(),i.getRequestSession()]:f.isPlainObject(i)?[t,t.requestSession]:[],{tags:g,extra:S,user:u,contexts:v,level:E,fingerprint:b=[],propagationContext:_}=o||{};return this._tags={...this._tags,...g},this._extra={...this._extra,...S},this._contexts={...this._contexts,...v},u&&Object.keys(u).length&&(this._user=u),E&&(this._level=E),b.length&&(this._fingerprint=b),_&&(this._propagationContext=_),c&&(this._requestSession=c),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,p._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=n(),this._notifyScopeListeners(),this}addBreadcrumb(t,i){const o=typeof i=="number"?i:m;if(o<=0)return this;const c={timestamp:f.dateTimestampInSeconds(),...t},g=this._breadcrumbs;return g.push(c),this._breadcrumbs=g.length>o?g.slice(-o):g,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:p._getSpanForScope(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,i){const o=i&&i.event_id?i.event_id:f.uuid4();if(!this._client)return f.logger.warn("No client configured on scope - will not capture exception!"),o;const c=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:c,...i,event_id:o},this),o}captureMessage(t,i,o){const c=o&&o.event_id?o.event_id:f.uuid4();if(!this._client)return f.logger.warn("No client configured on scope - will not capture message!"),c;const g=new Error(t);return this._client.captureMessage(t,i,{originalException:t,syntheticException:g,...o,event_id:c},this),c}captureEvent(t,i){const o=i&&i.event_id?i.event_id:f.uuid4();return this._client?(this._client.captureEvent(t,{...i,event_id:o},this),o):(f.logger.warn("No client configured on scope - will not capture event!"),o)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}r(a,"ScopeClass");const s=a;function n(){return{traceId:f.uuid4(),spanId:f.uuid4().substring(16)}}r(n,"generatePropagationContext"),l.Scope=s},9483783910:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(2685322190),m=d(8844511336);function a(e,t){t.debug===!0&&(m.DEBUG_BUILD?f.logger.enable():f.consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),h.getCurrentScope().update(t.initialScope);const o=new e(t);s(o),o.init()}r(a,"initAndBind");function s(e){h.getCurrentScope().setClient(e),n(e)}r(s,"setCurrentClient");function n(e){const t=p.getSentryCarrier(p.getMainCarrier());t.hub&&typeof t.hub.getStackTop=="function"&&(t.hub.getStackTop().client=e)}r(n,"registerClientOnGlobalHub"),l.initAndBind=a,l.setCurrentClient=s},2332127203:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="sentry.source",f="sentry.sample_rate",h="sentry.op",p="sentry.origin",m="sentry.idle_span_finish_reason",a="sentry.measurement_unit",s="sentry.measurement_value",n="sentry.profile_id",e="sentry.exclusive_time",t="cache.hit",i="cache.key",o="cache.item_size";l.SEMANTIC_ATTRIBUTE_CACHE_HIT=t,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=o,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=i,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=e,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=n,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=m,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=a,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=s,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=h,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=p,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=f,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=d},1817668688:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(4936960144),p=d(7584701501),m=d(8438156026),a=d(8844511336),s=d(7083316483),n=d(2206474662),e=d(9972015035),t=d(5475300505),i=d(9064881818);class o extends h.BaseClient{constructor(g){n.registerSpanErrorInstrumentation(),super(g)}eventFromException(g,S){return f.resolvedSyncPromise(f.eventFromUnknownInput(this,this._options.stackParser,g,S))}eventFromMessage(g,S="info",u){return f.resolvedSyncPromise(f.eventFromMessage(this._options.stackParser,g,S,u,this._options.attachStacktrace))}captureException(g,S,u){if(this._options.autoSessionTracking&&this._sessionFlusher){const v=m.getIsolationScope().getRequestSession();v&&v.status==="ok"&&(v.status="errored")}return super.captureException(g,S,u)}captureEvent(g,S,u){if(this._options.autoSessionTracking&&this._sessionFlusher&&(g.type||"exception")==="exception"&&g.exception&&g.exception.values&&g.exception.values.length>0){const b=m.getIsolationScope().getRequestSession();b&&b.status==="ok"&&(b.status="errored")}return super.captureEvent(g,S,u)}close(g){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(g)}initSessionFlusher(){const{release:g,environment:S}=this._options;g?this._sessionFlusher=new s.SessionFlusher(this,{release:g,environment:S}):a.DEBUG_BUILD&&f.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(g,S,u){const v="checkInId"in g&&g.checkInId?g.checkInId:f.uuid4();if(!this._isEnabled())return a.DEBUG_BUILD&&f.logger.warn("SDK not enabled, will not capture checkin."),v;const E=this.getOptions(),{release:b,environment:_,tunnel:C}=E,I={check_in_id:v,monitor_slug:g.monitorSlug,status:g.status,release:b,environment:_};"duration"in g&&(I.duration=g.duration),S&&(I.monitor_config={schedule:S.schedule,checkin_margin:S.checkinMargin,max_runtime:S.maxRuntime,timezone:S.timezone});const[A,w]=this._getTraceInfoFromScope(u);w&&(I.contexts={trace:w});const O=p.createCheckInEnvelope(I,A,this.getSdkMetadata(),C,this.getDsn());return a.DEBUG_BUILD&&f.logger.info("Sending checkin:",g.monitorSlug,g.status),this.sendEnvelope(O),v}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():a.DEBUG_BUILD&&f.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(g,S,u,v){return this._options.platform&&(g.platform=g.platform||this._options.platform),this._options.runtime&&(g.contexts={...g.contexts,runtime:(g.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(g.server_name=g.server_name||this._options.serverName),super._prepareEvent(g,S,u,v)}_getTraceInfoFromScope(g){if(!g)return[void 0,void 0];const S=e._getSpanForScope(g);if(S){const C=t.getRootSpan(S);return[i.getDynamicSamplingContextFromSpan(C),t.spanToTraceContext(C)]}const{traceId:u,spanId:v,parentSpanId:E,dsc:b}=g.getPropagationContext(),_={trace_id:u,span_id:v,parent_span_id:E};return b?[b,_]:[i.getDynamicSamplingContextFromClient(u,this),_]}}r(o,"ServerRuntimeClient"),l.ServerRuntimeClient=o},5234873710:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);function h(s){const n=f.timestampInSeconds(),e={sid:f.uuid4(),init:!0,timestamp:n,started:n,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>a(e)};return s&&p(e,s),e}r(h,"makeSession");function p(s,n={}){if(n.user&&(!s.ipAddress&&n.user.ip_address&&(s.ipAddress=n.user.ip_address),!s.did&&!n.did&&(s.did=n.user.id||n.user.email||n.user.username)),s.timestamp=n.timestamp||f.timestampInSeconds(),n.abnormal_mechanism&&(s.abnormal_mechanism=n.abnormal_mechanism),n.ignoreDuration&&(s.ignoreDuration=n.ignoreDuration),n.sid&&(s.sid=n.sid.length===32?n.sid:f.uuid4()),n.init!==void 0&&(s.init=n.init),!s.did&&n.did&&(s.did=`${n.did}`),typeof n.started=="number"&&(s.started=n.started),s.ignoreDuration)s.duration=void 0;else if(typeof n.duration=="number")s.duration=n.duration;else{const e=s.timestamp-s.started;s.duration=e>=0?e:0}n.release&&(s.release=n.release),n.environment&&(s.environment=n.environment),!s.ipAddress&&n.ipAddress&&(s.ipAddress=n.ipAddress),!s.userAgent&&n.userAgent&&(s.userAgent=n.userAgent),typeof n.errors=="number"&&(s.errors=n.errors),n.status&&(s.status=n.status)}r(p,"updateSession");function m(s,n){let e={};n?e={status:n}:s.status==="ok"&&(e={status:"exited"}),p(s,e)}r(m,"closeSession");function a(s){return f.dropUndefinedKeys({sid:`${s.sid}`,init:s.init,started:new Date(s.started*1e3).toISOString(),timestamp:new Date(s.timestamp*1e3).toISOString(),status:s.status,errors:s.errors,did:typeof s.did=="number"||typeof s.did=="string"?`${s.did}`:void 0,duration:s.duration,abnormal_mechanism:s.abnormal_mechanism,attrs:{release:s.release,environment:s.environment,ip_address:s.ipAddress,user_agent:s.userAgent}})}r(a,"sessionToJSON"),l.closeSession=m,l.makeSession=h,l.updateSession=p},7083316483:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026);class p{constructor(a,s){this._client=a,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=s}flush(){const a=this.getSessionAggregates();a.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(a))}getSessionAggregates(){const a=Object.keys(this._pendingAggregates).map(n=>this._pendingAggregates[parseInt(n)]),s={attrs:this._sessionAttrs,aggregates:a};return f.dropUndefinedKeys(s)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const a=h.getIsolationScope(),s=a.getRequestSession();s&&s.status&&(this._incrementSessionStatusCount(s.status,new Date),a.setRequestSession(void 0))}_incrementSessionStatusCount(a,s){const n=new Date(s).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};const e=this._pendingAggregates[n];switch(e.started||(e.started=new Date(n).toISOString()),a){case"errored":return e.errored=(e.errored||0)+1,e.errored;case"ok":return e.exited=(e.exited||0)+1,e.exited;default:return e.crashed=(e.crashed||0)+1,e.crashed}}}r(p,"SessionFlusher"),l.SessionFlusher=p},9064881818:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(4834620523),p=d(8438156026),m=d(2332127203),a=d(5475300505),s="_frozenDsc";function n(i,o){const c=i;f.addNonEnumerableProperty(c,s,o)}r(n,"freezeDscOnSpan");function e(i,o){const c=o.getOptions(),{publicKey:g}=o.getDsn()||{},S=f.dropUndefinedKeys({environment:c.environment||h.DEFAULT_ENVIRONMENT,release:c.release,public_key:g,trace_id:i});return o.emit("createDsc",S),S}r(e,"getDynamicSamplingContextFromClient");function t(i){const o=p.getClient();if(!o)return{};const c=e(a.spanToJSON(i).trace_id||"",o),g=a.getRootSpan(i);if(!g)return c;const S=g[s];if(S)return S;const u=a.spanToJSON(g),v=u.data||{},E=v[m.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];E!=null&&(c.sample_rate=`${E}`);const b=v[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];return b&&b!=="url"&&(c.transaction=u.description),c.sampled=String(a.spanIsSampled(g)),o.emit("createDsc",c),c}r(t,"getDynamicSamplingContextFromSpan"),l.freezeDscOnSpan=n,l.getDynamicSamplingContextFromClient=e,l.getDynamicSamplingContextFromSpan=t},2206474662:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336),p=d(5475300505),m=d(1150305139);let a=!1;function s(){a||(a=!0,f.addGlobalErrorInstrumentationHandler(n),f.addGlobalUnhandledRejectionInstrumentationHandler(n))}r(s,"registerSpanErrorInstrumentation");function n(){const e=p.getActiveSpan(),t=e&&p.getRootSpan(e);if(t){const i="internal_error";h.DEBUG_BUILD&&f.logger.log(`[Tracing] Root span: ${i} -> Global error occured`),t.setStatus({code:m.SPAN_STATUS_ERROR,message:i})}}r(n,"errorCallback"),n.tag="sentry_tracingErrorCallback",l.registerSpanErrorInstrumentation=s},5618891990:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(2206474662);function h(){f.registerSpanErrorInstrumentation()}r(h,"addTracingExtensions"),l.addTracingExtensions=h},7265722327:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(8844511336),m=d(2332127203),a=d(8645141291),s=d(9972015035),n=d(5475300505),e=d(8167549304),t=d(1150305139),i=d(4530391782),o={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},c="heartbeatFailed",g="idleTimeout",S="finalTimeout",u="externalFinish";function v(b,_={}){const C=new Map;let I=!1,A,w=u,O=!_.disableAutoFinish;const{idleTimeout:R=o.idleTimeout,finalTimeout:F=o.finalTimeout,childSpanTimeout:V=o.childSpanTimeout,beforeSpanEnd:$}=_,X=h.getClient();if(!X||!a.hasTracingEnabled())return new e.SentryNonRecordingSpan;const Y=h.getCurrentScope(),ne=n.getActiveSpan(),ie=E(b);function ge(Ge=f.timestampInSeconds()){const it=n.getSpanDescendants(ie).filter(rt=>rt!==ie);if(!it.length){ie.end(Ge);return}const Dt=it.map(rt=>n.spanToJSON(rt).timestamp).filter(rt=>!!rt),wt=Dt.length?Math.max(...Dt):void 0,Pe=n.spanTimeInputToSeconds(Ge),xe=n.spanToJSON(ie).start_timestamp,et=Math.min(xe?xe+F/1e3:1/0,Math.max(xe||-1/0,Math.min(Pe,wt||1/0)));ie.end(et)}r(ge,"_endSpan");function Ie(){A&&(clearTimeout(A),A=void 0)}r(Ie,"_cancelIdleTimeout");function We(Ge){Ie(),A=setTimeout(()=>{!I&&C.size===0&&O&&(w=g,ge(Ge))},R)}r(We,"_restartIdleTimeout");function ct(Ge){A=setTimeout(()=>{!I&&O&&(w=c,ge(Ge))},V)}r(ct,"_restartChildSpanTimeout");function Ae(Ge){Ie(),C.set(Ge,!0);const it=f.timestampInSeconds();ct(it+V/1e3)}r(Ae,"_pushActivity");function Fe(Ge){if(C.has(Ge)&&C.delete(Ge),C.size===0){const it=f.timestampInSeconds();We(it+R/1e3)}}r(Fe,"_popActivity");function Xe(){I=!0,C.clear(),$&&$(ie),s._setSpanForScope(Y,ne);const Ge=n.spanToJSON(ie),{timestamp:it,start_timestamp:Dt}=Ge;if(!it||!Dt)return;(Ge.data||{})[m.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||ie.setAttribute(m.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,w),f.logger.log(`[Tracing] Idle span "${Ge.op}" finished`);const Pe=n.getSpanDescendants(ie).filter(et=>et!==ie);let xe=0;Pe.forEach(et=>{et.isRecording()&&(et.setStatus({code:t.SPAN_STATUS_ERROR,message:"cancelled"}),et.end(it),p.DEBUG_BUILD&&f.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(et,void 0,2)));const rt=n.spanToJSON(et),{timestamp:je=0,start_timestamp:Ft=0}=rt,Gt=Ft<=it,Xt=(F+R)/1e3,sn=je-Ft<Xt;if(p.DEBUG_BUILD){const cn=JSON.stringify(et,void 0,2);Gt?sn||f.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",cn):f.logger.log("[Tracing] Discarding span since it happened after idle span was finished",cn)}(!sn||!Gt)&&(n.removeChildSpanFromSpan(ie,et),xe++)}),xe>0&&ie.setAttribute("sentry.idle_span_discarded_spans",xe)}return r(Xe,"onIdleSpanEnded"),X.on("spanStart",Ge=>{if(I||Ge===ie||n.spanToJSON(Ge).timestamp)return;n.getSpanDescendants(ie).includes(Ge)&&Ae(Ge.spanContext().spanId)}),X.on("spanEnd",Ge=>{I||(Fe(Ge.spanContext().spanId),Ge===ie&&Xe())}),X.on("idleSpanEnableAutoFinish",Ge=>{Ge===ie&&(O=!0,We(),C.size&&ct())}),_.disableAutoFinish||We(),setTimeout(()=>{I||(ie.setStatus({code:t.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),w=S,ge())},F),ie}r(v,"startIdleSpan");function E(b){const _=i.startInactiveSpan(b);return s._setSpanForScope(h.getCurrentScope(),_),p.DEBUG_BUILD&&f.logger.log("[Tracing] Started span is an idle span"),_}r(E,"_startIdleSpan"),l.TRACING_DEFAULTS=o,l.startIdleSpan=v},8482601586:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336),p=d(5475300505);function m(s){if(!h.DEBUG_BUILD)return;const{description:n="< unknown name >",op:e="< unknown op >",parent_span_id:t}=p.spanToJSON(s),{spanId:i}=s.spanContext(),o=p.spanIsSampled(s),c=p.getRootSpan(s),g=c===s,S=`[Tracing] Starting ${o?"sampled":"unsampled"} ${g?"root ":""}span`,u=[`op: ${e}`,`name: ${n}`,`ID: ${i}`];if(t&&u.push(`parent ID: ${t}`),!g){const{op:v,description:E}=p.spanToJSON(c);u.push(`root ID: ${c.spanContext().spanId}`),v&&u.push(`root op: ${v}`),E&&u.push(`root description: ${E}`)}f.logger.log(`${S}
  ${u.join(`
  `)}`)}r(m,"logSpanStart");function a(s){if(!h.DEBUG_BUILD)return;const{description:n="< unknown name >",op:e="< unknown op >"}=p.spanToJSON(s),{spanId:t}=s.spanContext(),o=p.getRootSpan(s)===s,c=`[Tracing] Finishing "${e}" ${o?"root ":""}span "${n}" with ID ${t}`;f.logger.log(c)}r(a,"logSpanEnd"),l.logSpanEnd=a,l.logSpanStart=m},3345259075:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(2332127203),h=d(5475300505);function p(a,s,n){const e=h.getActiveSpan(),t=e&&h.getRootSpan(e);t&&t.addEvent(a,{[f.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:s,[f.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:n})}r(p,"setMeasurement");function m(a){if(!a||a.length===0)return;const s={};return a.forEach(n=>{const e=n.attributes||{},t=e[f.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],i=e[f.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];typeof t=="string"&&typeof i=="number"&&(s[n.name]={value:i,unit:t})}),s}r(m,"timedEventsToMeasurements"),l.setMeasurement=p,l.timedEventsToMeasurements=m},6939919536:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336),p=d(8645141291),m=d(1119532287);function a(s,n){if(!p.hasTracingEnabled(s))return[!1];let e;typeof s.tracesSampler=="function"?e=s.tracesSampler(n):n.parentSampled!==void 0?e=n.parentSampled:typeof s.tracesSampleRate<"u"?e=s.tracesSampleRate:e=1;const t=m.parseSampleRate(e);return t===void 0?(h.DEBUG_BUILD&&f.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):t?Math.random()<t?[!0,t]:(h.DEBUG_BUILD&&f.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(e)})`),[!1,t]):(h.DEBUG_BUILD&&f.logger.log(`[Tracing] Discarding transaction because ${typeof s.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,t])}r(a,"sampleSpan"),l.sampleSpan=a},8167549304:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(5475300505);class p{constructor(a={}){this._traceId=a.traceId||f.uuid4(),this._spanId=a.spanId||f.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:h.TRACE_FLAG_NONE}}end(a){}setAttribute(a,s){return this}setAttributes(a){return this}setStatus(a){return this}updateName(a){return this}isRecording(){return!1}addEvent(a,s,n){return this}}r(p,"SentryNonRecordingSpan"),l.SentryNonRecordingSpan=p},6720678066:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(8844511336),m=d(5297268390),a=d(1243296801),s=d(2332127203),n=d(5475300505),e=d(9064881818),t=d(8482601586),i=d(3345259075),o=d(9578383602);class c{constructor(b={}){this._traceId=b.traceId||f.uuid4(),this._spanId=b.spanId||f.uuid4().substring(16),this._startTime=b.startTimestamp||f.timestampInSeconds(),this._attributes={},this.setAttributes({[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:b.op,...b.attributes}),this._name=b.name,b.parentSpanId&&(this._parentSpanId=b.parentSpanId),"sampled"in b&&(this._sampled=b.sampled),b.endTimestamp&&(this._endTime=b.endTimestamp),this._events=[],this._isStandaloneSpan=b.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:b,_traceId:_,_sampled:C}=this;return{spanId:b,traceId:_,traceFlags:C?n.TRACE_FLAG_SAMPLED:n.TRACE_FLAG_NONE}}setAttribute(b,_){_===void 0?delete this._attributes[b]:this._attributes[b]=_}setAttributes(b){Object.keys(b).forEach(_=>this.setAttribute(_,b[_]))}updateStartTime(b){this._startTime=n.spanTimeInputToSeconds(b)}setStatus(b){return this._status=b,this}updateName(b){return this._name=b,this}end(b){this._endTime||(this._endTime=n.spanTimeInputToSeconds(b),t.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return f.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[s.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:n.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[s.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[s.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:i.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&n.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?n.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(b,_,C){p.DEBUG_BUILD&&f.logger.log("[Tracing] Adding an event to span:",b);const I=g(_)?_:C||f.timestampInSeconds(),A=g(_)?{}:_||{},w={name:b,time:n.spanTimeInputToSeconds(I),attributes:A};return this._events.push(w),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const b=h.getClient();if(b&&b.emit("spanEnd",this),!(this._isStandaloneSpan||this===n.getRootSpan(this)))return;if(this._isStandaloneSpan){v(m.createSpanEnvelope([this],b));return}const C=this._convertSpanToTransaction();C&&(o.getCapturedScopesOnSpan(this).scope||h.getCurrentScope()).captureEvent(C)}_convertSpanToTransaction(){if(!S(n.spanToJSON(this)))return;this._name||(p.DEBUG_BUILD&&f.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:b,isolationScope:_}=o.getCapturedScopesOnSpan(this),I=(b||h.getCurrentScope()).getClient()||h.getClient();if(this._sampled!==!0){p.DEBUG_BUILD&&f.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),I&&I.recordDroppedEvent("sample_rate","transaction");return}const w=n.getSpanDescendants(this).filter($=>$!==this&&!u($)).map($=>n.spanToJSON($)).filter(S),O=this._attributes[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],R={contexts:{trace:n.spanToTransactionTraceContext(this)},spans:w,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:b,capturedSpanIsolationScope:_,...f.dropUndefinedKeys({dynamicSamplingContext:e.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:a.getMetricSummaryJsonForSpan(this),...O&&{transaction_info:{source:O}}},F=i.timedEventsToMeasurements(this._events);return F&&Object.keys(F).length&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(F,void 0,2)),R.measurements=F),R}}r(c,"SentrySpan");function g(E){return E&&typeof E=="number"||E instanceof Date||Array.isArray(E)}r(g,"isSpanTimeInput");function S(E){return!!E.start_timestamp&&!!E.timestamp&&!!E.span_id&&!!E.trace_id}r(S,"isFullFinishedSpan");function u(E){return E instanceof c&&E.isStandaloneSpan()}r(u,"isStandaloneSpan");function v(E){const b=h.getClient();if(!b)return;const _=E[1];if(!_||_.length===0){b.recordDroppedEvent("before_send","span");return}const C=b.getTransport();C&&C.send(E).then(null,I=>{p.DEBUG_BUILD&&f.logger.error("Error while sending span:",I)})}r(v,"sendSpanEnvelope"),l.SentrySpan=c},1150305139:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=0,f=1,h=2;function p(a){if(a<400&&a>=100)return{code:f};if(a>=400&&a<500)switch(a){case 401:return{code:h,message:"unauthenticated"};case 403:return{code:h,message:"permission_denied"};case 404:return{code:h,message:"not_found"};case 409:return{code:h,message:"already_exists"};case 413:return{code:h,message:"failed_precondition"};case 429:return{code:h,message:"resource_exhausted"};case 499:return{code:h,message:"cancelled"};default:return{code:h,message:"invalid_argument"}}if(a>=500&&a<600)switch(a){case 501:return{code:h,message:"unimplemented"};case 503:return{code:h,message:"unavailable"};case 504:return{code:h,message:"deadline_exceeded"};default:return{code:h,message:"internal_error"}}return{code:h,message:"unknown_error"}}r(p,"getSpanStatusFromHttpCode");function m(a,s){a.setAttribute("http.response.status_code",s);const n=p(s);n.message!=="unknown_error"&&a.setStatus(n)}r(m,"setHttpStatus"),l.SPAN_STATUS_ERROR=h,l.SPAN_STATUS_OK=f,l.SPAN_STATUS_UNSET=d,l.getSpanStatusFromHttpCode=p,l.setHttpStatus=m},4530391782:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(2685322190),p=d(8438156026),m=d(897859094),a=d(2332127203),s=d(5800525242),n=d(8645141291),e=d(9972015035),t=d(5475300505),i=d(9064881818),o=d(8482601586),c=d(6939919536),g=d(8167549304),S=d(6720678066),u=d(1150305139),v=d(9578383602),E="__SENTRY_SUPPRESS_TRACING__";function b(Y,ne){const ie=F();if(ie.startSpan)return ie.startSpan(Y,ne);const ge=R(Y);return p.withScope(Y.scope,Ie=>{const We=X(Ie),Ae=Y.onlyIfParent&&!We?new g.SentryNonRecordingSpan:O({parentSpan:We,spanContext:ge,forceTransaction:Y.forceTransaction,scope:Ie});return e._setSpanForScope(Ie,Ae),s.handleCallbackErrors(()=>ne(Ae),()=>{const{status:Fe}=t.spanToJSON(Ae);Ae.isRecording()&&(!Fe||Fe==="ok")&&Ae.setStatus({code:u.SPAN_STATUS_ERROR,message:"internal_error"})},()=>Ae.end())})}r(b,"startSpan");function _(Y,ne){const ie=F();if(ie.startSpanManual)return ie.startSpanManual(Y,ne);const ge=R(Y);return p.withScope(Y.scope,Ie=>{const We=X(Ie),Ae=Y.onlyIfParent&&!We?new g.SentryNonRecordingSpan:O({parentSpan:We,spanContext:ge,forceTransaction:Y.forceTransaction,scope:Ie});e._setSpanForScope(Ie,Ae);function Fe(){Ae.end()}return r(Fe,"finishAndSetSpan"),s.handleCallbackErrors(()=>ne(Ae,Fe),()=>{const{status:Xe}=t.spanToJSON(Ae);Ae.isRecording()&&(!Xe||Xe==="ok")&&Ae.setStatus({code:u.SPAN_STATUS_ERROR,message:"internal_error"})})})}r(_,"startSpanManual");function C(Y){const ne=F();if(ne.startInactiveSpan)return ne.startInactiveSpan(Y);const ie=R(Y),ge=Y.scope||p.getCurrentScope(),Ie=X(ge);return Y.onlyIfParent&&!Ie?new g.SentryNonRecordingSpan:O({parentSpan:Ie,spanContext:ie,forceTransaction:Y.forceTransaction,scope:ge})}r(C,"startInactiveSpan");const I=r(({sentryTrace:Y,baggage:ne},ie)=>p.withScope(ge=>{const Ie=f.propagationContextFromHeaders(Y,ne);return ge.setPropagationContext(Ie),ie()}),"continueTrace");function A(Y,ne){const ie=F();return ie.withActiveSpan?ie.withActiveSpan(Y,ne):p.withScope(ge=>(e._setSpanForScope(ge,Y||void 0),ne(ge)))}r(A,"withActiveSpan");function w(Y){const ne=F();return ne.suppressTracing?ne.suppressTracing(Y):p.withScope(ie=>(ie.setSDKProcessingMetadata({[E]:!0}),Y()))}r(w,"suppressTracing");function O({parentSpan:Y,spanContext:ne,forceTransaction:ie,scope:ge}){if(!n.hasTracingEnabled())return new g.SentryNonRecordingSpan;const Ie=p.getIsolationScope();let We;if(Y&&!ie)We=$(Y,ge,ne),t.addChildSpanToSpan(Y,We);else if(Y){const ct=i.getDynamicSamplingContextFromSpan(Y),{traceId:Ae,spanId:Fe}=Y.spanContext(),Xe=t.spanIsSampled(Y);We=V({traceId:Ae,parentSpanId:Fe,...ne},ge,Xe),i.freezeDscOnSpan(We,ct)}else{const{traceId:ct,dsc:Ae,parentSpanId:Fe,sampled:Xe}={...Ie.getPropagationContext(),...ge.getPropagationContext()};We=V({traceId:ct,parentSpanId:Fe,...ne},ge,Xe),Ae&&i.freezeDscOnSpan(We,Ae)}return o.logSpanStart(We),v.setCapturedScopesOnSpan(We,ge,Ie),We}r(O,"createChildOrRootSpan");function R(Y){const ie={isStandalone:(Y.experimental||{}).standalone,...Y};if(Y.startTime){const ge={...ie};return ge.startTimestamp=t.spanTimeInputToSeconds(Y.startTime),delete ge.startTime,ge}return ie}r(R,"normalizeContext");function F(){const Y=h.getMainCarrier();return m.getAsyncContextStrategy(Y)}r(F,"getAcs");function V(Y,ne,ie){const ge=p.getClient(),Ie=ge&&ge.getOptions()||{},{name:We="",attributes:ct}=Y,[Ae,Fe]=ne.getScopeData().sdkProcessingMetadata[E]?[!1]:c.sampleSpan(Ie,{name:We,parentSampled:ie,attributes:ct,transactionContext:{name:We,parentSampled:ie}}),Xe=new S.SentrySpan({...Y,attributes:{[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...Y.attributes},sampled:Ae});return Fe!==void 0&&Xe.setAttribute(a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Fe),ge&&ge.emit("spanStart",Xe),Xe}r(V,"_startRootSpan");function $(Y,ne,ie){const{spanId:ge,traceId:Ie}=Y.spanContext(),We=ne.getScopeData().sdkProcessingMetadata[E]?!1:t.spanIsSampled(Y),ct=We?new S.SentrySpan({...ie,parentSpanId:ge,traceId:Ie,sampled:We}):new g.SentryNonRecordingSpan({traceId:Ie});t.addChildSpanToSpan(Y,ct);const Ae=p.getClient();return Ae&&(Ae.emit("spanStart",ct),ie.endTimestamp&&Ae.emit("spanEnd",ct)),ct}r($,"_startChildSpan");function X(Y){const ne=e._getSpanForScope(Y);if(!ne)return;const ie=p.getClient();return(ie?ie.getOptions():{}).parentSpanIsAlwaysRootSpan?t.getRootSpan(ne):ne}r(X,"getParentSpan"),l.continueTrace=I,l.startInactiveSpan=C,l.startSpan=b,l.startSpanManual=_,l.suppressTracing=w,l.withActiveSpan=A},9578383602:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h="_sentryScope",p="_sentryIsolationScope";function m(s,n,e){s&&(f.addNonEnumerableProperty(s,p,e),f.addNonEnumerableProperty(s,h,n))}r(m,"setCapturedScopesOnSpan");function a(s){return{scope:s[h],isolationScope:s[p]}}r(a,"getCapturedScopesOnSpan"),l.stripUrlQueryAndFragment=f.stripUrlQueryAndFragment,l.getCapturedScopesOnSpan=a,l.setCapturedScopesOnSpan=m},306863924:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336),p=64;function m(s,n,e=f.makePromiseBuffer(s.bufferSize||p)){let t={};const i=r(c=>e.drain(c),"flush");function o(c){const g=[];if(f.forEachEnvelopeItem(c,(E,b)=>{const _=f.envelopeItemTypeToDataCategory(b);if(f.isRateLimited(t,_)){const C=a(E,b);s.recordDroppedEvent("ratelimit_backoff",_,C)}else g.push(E)}),g.length===0)return f.resolvedSyncPromise({});const S=f.createEnvelope(c[0],g),u=r(E=>{f.forEachEnvelopeItem(S,(b,_)=>{const C=a(b,_);s.recordDroppedEvent(E,f.envelopeItemTypeToDataCategory(_),C)})},"recordEnvelopeLoss"),v=r(()=>n({body:f.serializeEnvelope(S)}).then(E=>(E.statusCode!==void 0&&(E.statusCode<200||E.statusCode>=300)&&h.DEBUG_BUILD&&f.logger.warn(`Sentry responded with status code ${E.statusCode} to sent event.`),t=f.updateRateLimits(t,E),E),E=>{throw u("network_error"),E}),"requestTask");return e.add(v).then(E=>E,E=>{if(E instanceof f.SentryError)return h.DEBUG_BUILD&&f.logger.error("Skipped sending event because buffer is full."),u("queue_overflow"),f.resolvedSyncPromise({});throw E})}return r(o,"send"),{send:o,flush:i}}r(m,"createTransport");function a(s,n){if(!(n!=="event"&&n!=="transaction"))return Array.isArray(s)?s[1]:void 0}r(a,"getEventForEnvelopeItem"),l.DEFAULT_TRANSPORT_BUFFER_SIZE=p,l.createTransport=m},2843166954:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(9857059330);function p(n,e){let t;return f.forEachEnvelopeItem(n,(i,o)=>(e.includes(o)&&(t=Array.isArray(i)?i[1]:void 0),!!t)),t}r(p,"eventFromEnvelope");function m(n,e){return t=>{const i=n(t);return{...i,send:async o=>{const c=p(o,["event","transaction","profile","replay_event"]);return c&&(c.release=e),i.send(o)}}}}r(m,"makeOverrideReleaseTransport");function a(n,e){return f.createEnvelope(e?{...n[0],dsn:e}:n[0],n[1])}r(a,"overrideDsn");function s(n,e){return t=>{const i=n(t),o=new Map;function c(u,v){const E=v?`${u}:${v}`:u;let b=o.get(E);if(!b){const _=f.dsnFromString(u);if(!_)return;const C=h.getEnvelopeEndpointWithUrlEncodedAuth(_,t.tunnel);b=v?m(n,v)({...t,url:C}):n({...t,url:C}),o.set(E,b)}return[u,b]}r(c,"getTransport");async function g(u){function v(_){const C=_&&_.length?_:["event"];return p(u,C)}r(v,"getEvent");const E=e({envelope:u,getEvent:v}).map(_=>typeof _=="string"?c(_,void 0):c(_.dsn,_.release)).filter(_=>!!_);return E.length===0&&E.push(["",i]),(await Promise.all(E.map(([_,C])=>C.send(a(u,_)))))[0]}r(g,"send");async function S(u){const v=[...o.values(),i];return(await Promise.all(v.map(b=>b.flush(u)))).every(b=>b)}return r(S,"flush"),{send:g,flush:S}}}r(s,"makeMultiplexedTransport"),l.eventFromEnvelope=p,l.makeMultiplexedTransport=s},3178226440:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336),p=100,m=5e3,a=36e5;function s(n){function e(...t){h.DEBUG_BUILD&&f.logger.info("[Offline]:",...t)}return r(e,"log"),t=>{const i=n(t);if(!t.createStore)throw new Error("No `createStore` function was provided");const o=t.createStore(t);let c=m,g;function S(b,_,C){return f.envelopeContainsItemType(b,["client_report"])?!1:t.shouldStore?t.shouldStore(b,_,C):!0}r(S,"shouldQueue");function u(b){g&&clearTimeout(g),g=setTimeout(async()=>{g=void 0;const _=await o.shift();_&&(e("Attempting to send previously queued event"),_[0].sent_at=new Date().toISOString(),E(_,!0).catch(C=>{e("Failed to retry sending",C)}))},b),typeof g!="number"&&g.unref&&g.unref()}r(u,"flushIn");function v(){g||(u(c),c=Math.min(c*2,a))}r(v,"flushWithBackOff");async function E(b,_=!1){if(!_&&f.envelopeContainsItemType(b,["replay_event","replay_recording"]))return await o.push(b),u(p),{};try{const C=await i.send(b);let I=p;if(C){if(C.headers&&C.headers["retry-after"])I=f.parseRetryAfterHeader(C.headers["retry-after"]);else if(C.headers&&C.headers["x-sentry-rate-limits"])I=6e4;else if((C.statusCode||0)>=400)return C}return u(I),c=m,C}catch(C){if(await S(b,C,c))return _?await o.unshift(b):await o.push(b),v(),e("Error sending. Event queued.",C),{};throw C}}return r(E,"send"),t.flushAtStartup&&v(),{send:E,flush:b=>i.flush(b)}}}r(s,"makeOfflineTransport"),l.MIN_DELAY=p,l.START_DELAY=m,l.makeOfflineTransport=s},2117263085:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8438156026),p=d(5015065869),m=d(2332127203);d(2206474662),d(8844511336);const a=d(4530391782),s={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};function n(e={}){return function(t){const{path:i,type:o,next:c,rawInput:g}=t,S=h.getClient(),u=S&&S.getOptions(),v={procedure_type:o};(e.attachRpcInput!==void 0?e.attachRpcInput:u&&u.sendDefaultPii)&&(v.input=f.normalize(g)),p.setContext("trpc",v);function E(b){typeof b=="object"&&b!==null&&"ok"in b&&!b.ok&&"error"in b&&p.captureException(b.error,s)}return r(E,"captureIfError"),a.startSpanManual({name:`trpc/${i}`,op:"rpc.server",attributes:{[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},b=>{let _;try{_=c()}catch(C){throw p.captureException(C,s),b.end(),C}return f.isThenable(_)?_.then(C=>(E(C),b.end(),C),C=>{throw p.captureException(C,s),b.end(),C}):(E(_),b.end(),_)})}}r(n,"trpcMiddleware"),l.trpcMiddleware=n},8969228363:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(9064881818),p=d(5475300505);function m(c,g){const{fingerprint:S,span:u,breadcrumbs:v,sdkProcessingMetadata:E}=g;n(c,g),u&&i(c,u),o(c,S),e(c,v),t(c,E)}r(m,"applyScopeDataToEvent");function a(c,g){const{extra:S,tags:u,user:v,contexts:E,level:b,sdkProcessingMetadata:_,breadcrumbs:C,fingerprint:I,eventProcessors:A,attachments:w,propagationContext:O,transactionName:R,span:F}=g;s(c,"extra",S),s(c,"tags",u),s(c,"user",v),s(c,"contexts",E),s(c,"sdkProcessingMetadata",_),b&&(c.level=b),R&&(c.transactionName=R),F&&(c.span=F),C.length&&(c.breadcrumbs=[...c.breadcrumbs,...C]),I.length&&(c.fingerprint=[...c.fingerprint,...I]),A.length&&(c.eventProcessors=[...c.eventProcessors,...A]),w.length&&(c.attachments=[...c.attachments,...w]),c.propagationContext={...c.propagationContext,...O}}r(a,"mergeScopeData");function s(c,g,S){if(S&&Object.keys(S).length){c[g]={...c[g]};for(const u in S)Object.prototype.hasOwnProperty.call(S,u)&&(c[g][u]=S[u])}}r(s,"mergeAndOverwriteScopeData");function n(c,g){const{extra:S,tags:u,user:v,contexts:E,level:b,transactionName:_}=g,C=f.dropUndefinedKeys(S);C&&Object.keys(C).length&&(c.extra={...C,...c.extra});const I=f.dropUndefinedKeys(u);I&&Object.keys(I).length&&(c.tags={...I,...c.tags});const A=f.dropUndefinedKeys(v);A&&Object.keys(A).length&&(c.user={...A,...c.user});const w=f.dropUndefinedKeys(E);w&&Object.keys(w).length&&(c.contexts={...w,...c.contexts}),b&&(c.level=b),_&&c.type!=="transaction"&&(c.transaction=_)}r(n,"applyDataToEvent");function e(c,g){const S=[...c.breadcrumbs||[],...g];c.breadcrumbs=S.length?S:void 0}r(e,"applyBreadcrumbsToEvent");function t(c,g){c.sdkProcessingMetadata={...c.sdkProcessingMetadata,...g}}r(t,"applySdkMetadataToEvent");function i(c,g){c.contexts={trace:p.spanToTraceContext(g),...c.contexts},c.sdkProcessingMetadata={dynamicSamplingContext:h.getDynamicSamplingContextFromSpan(g),...c.sdkProcessingMetadata};const S=p.getRootSpan(g),u=p.spanToJSON(S).description;u&&!c.transaction&&c.type==="transaction"&&(c.transaction=u)}r(i,"applySpanToEvent");function o(c,g){c.fingerprint=c.fingerprint?f.arrayify(c.fingerprint):[],g&&(c.fingerprint=c.fingerprint.concat(g)),c.fingerprint&&!c.fingerprint.length&&delete c.fingerprint}r(o,"applyFingerprintToEvent"),l.applyScopeDataToEvent=m,l.mergeAndOverwriteScopeData=s,l.mergeScopeData=a},5800525242:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614);function h(m,a,s=()=>{}){let n;try{n=m()}catch(e){throw a(e),s(),e}return p(n,a,s)}r(h,"handleCallbackErrors");function p(m,a,s){return f.isThenable(m)?m.then(n=>(s(),n),n=>{throw a(n),s(),n}):(s(),m)}r(p,"maybeHandlePromiseRejection"),l.handleCallbackErrors=h},8645141291:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8438156026);function h(m){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const a=m||p();return!!a&&(a.enableTracing||"tracesSampleRate"in a||"tracesSampler"in a)}r(h,"hasTracingEnabled");function p(){const m=f.getClient();return m&&m.getOptions()}r(p,"getClientOptions"),l.hasTracingEnabled=h},175966809:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(m,a){const s=a&&a.getDsn(),n=a&&a.getOptions().tunnel;return h(m,s)||f(m,n)}r(d,"isSentryRequestUrl");function f(m,a){return a?p(m)===p(a):!1}r(f,"checkTunnel");function h(m,a){return a?m.includes(a.host):!1}r(h,"checkDsn");function p(m){return m[m.length-1]==="/"?m.slice(0,-1):m}r(p,"removeTrailingSlash"),l.isSentryRequestUrl=d},4718881455:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(f,...h){const p=new String(String.raw(f,...h));return p.__sentry_template_string__=f.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),p.__sentry_template_values__=h,p}r(d,"parameterize"),l.parameterize=d},1119532287:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(8844511336);function p(m){if(typeof m=="boolean")return Number(m);const a=typeof m=="string"?parseFloat(m):m;if(typeof a!="number"||isNaN(a)||a<0||a>1){h.DEBUG_BUILD&&f.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(m)} of type ${JSON.stringify(typeof m)}.`);return}return a}r(p,"parseSampleRate"),l.parseSampleRate=p},9877103701:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(4834620523),p=d(8438156026),m=d(5911348835),a=d(2158524366),s=d(8969228363);function n(_,C,I,A,w,O){const{normalizeDepth:R=3,normalizeMaxBreadth:F=1e3}=_,V={...C,event_id:C.event_id||I.event_id||f.uuid4(),timestamp:C.timestamp||f.dateTimestampInSeconds()},$=I.integrations||_.integrations.map(We=>We.name);e(V,_),c(V,$),C.type===void 0&&i(V,_.stackParser);const X=S(A,I.captureContext);I.mechanism&&f.addExceptionMechanism(V,I.mechanism);const Y=w?w.getEventProcessors():[],ne=p.getGlobalScope().getScopeData();if(O){const We=O.getScopeData();s.mergeScopeData(ne,We)}if(X){const We=X.getScopeData();s.mergeScopeData(ne,We)}const ie=[...I.attachments||[],...ne.attachments];ie.length&&(I.attachments=ie),s.applyScopeDataToEvent(V,ne);const ge=[...Y,...ne.eventProcessors];return m.notifyEventProcessors(ge,V,I).then(We=>(We&&o(We),typeof R=="number"&&R>0?g(We,R,F):We))}r(n,"prepareEvent");function e(_,C){const{environment:I,release:A,dist:w,maxValueLength:O=250}=C;"environment"in _||(_.environment="environment"in C?I:h.DEFAULT_ENVIRONMENT),_.release===void 0&&A!==void 0&&(_.release=A),_.dist===void 0&&w!==void 0&&(_.dist=w),_.message&&(_.message=f.truncate(_.message,O));const R=_.exception&&_.exception.values&&_.exception.values[0];R&&R.value&&(R.value=f.truncate(R.value,O));const F=_.request;F&&F.url&&(F.url=f.truncate(F.url,O))}r(e,"applyClientOptions");const t=new WeakMap;function i(_,C){const I=f.GLOBAL_OBJ._sentryDebugIds;if(!I)return;let A;const w=t.get(C);w?A=w:(A=new Map,t.set(C,A));const O=Object.keys(I).reduce((R,F)=>{let V;const $=A.get(F);$?V=$:(V=C(F),A.set(F,V));for(let X=V.length-1;X>=0;X--){const Y=V[X];if(Y.filename){R[Y.filename]=I[F];break}}return R},{});try{_.exception.values.forEach(R=>{R.stacktrace.frames.forEach(F=>{F.filename&&(F.debug_id=O[F.filename])})})}catch{}}r(i,"applyDebugIds");function o(_){const C={};try{_.exception.values.forEach(A=>{A.stacktrace.frames.forEach(w=>{w.debug_id&&(w.abs_path?C[w.abs_path]=w.debug_id:w.filename&&(C[w.filename]=w.debug_id),delete w.debug_id)})})}catch{}if(Object.keys(C).length===0)return;_.debug_meta=_.debug_meta||{},_.debug_meta.images=_.debug_meta.images||[];const I=_.debug_meta.images;Object.keys(C).forEach(A=>{I.push({type:"sourcemap",code_file:A,debug_id:C[A]})})}r(o,"applyDebugMeta");function c(_,C){C.length>0&&(_.sdk=_.sdk||{},_.sdk.integrations=[..._.sdk.integrations||[],...C])}r(c,"applyIntegrationsMetadata");function g(_,C,I){if(!_)return null;const A={..._,..._.breadcrumbs&&{breadcrumbs:_.breadcrumbs.map(w=>({...w,...w.data&&{data:f.normalize(w.data,C,I)}}))},..._.user&&{user:f.normalize(_.user,C,I)},..._.contexts&&{contexts:f.normalize(_.contexts,C,I)},..._.extra&&{extra:f.normalize(_.extra,C,I)}};return _.contexts&&_.contexts.trace&&A.contexts&&(A.contexts.trace=_.contexts.trace,_.contexts.trace.data&&(A.contexts.trace.data=f.normalize(_.contexts.trace.data,C,I))),_.spans&&(A.spans=_.spans.map(w=>({...w,...w.data&&{data:f.normalize(w.data,C,I)}}))),A}r(g,"normalizeEvent");function S(_,C){if(!C)return _;const I=_?_.clone():new a.Scope;return I.update(C),I}r(S,"getFinalScope");function u(_){if(_)return v(_)?{captureContext:_}:b(_)?{captureContext:_}:_}r(u,"parseEventHintOrCaptureContext");function v(_){return _ instanceof a.Scope||typeof _=="function"}r(v,"hintIsScopeOrFunction");const E=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function b(_){return Object.keys(_).some(C=>E.includes(C))}r(b,"hintIsScopeContext"),l.applyDebugIds=i,l.applyDebugMeta=o,l.parseEventHintOrCaptureContext=u,l.prepareEvent=n},3433863337:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(639277478);function h(p,m,a=[m],s="npm"){const n=p._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${m}`,packages:a.map(e=>({name:`${s}:@sentry/${e}`,version:f.SDK_VERSION})),version:f.SDK_VERSION}),p._metadata=n}r(h,"applySdkMetadata"),l.applySdkMetadata=h},9972015035:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h="_sentrySpan";function p(a,s){s?f.addNonEnumerableProperty(a,h,s):delete a[h]}r(p,"_setSpanForScope");function m(a){return a[h]}r(m,"_getSpanForScope"),l._getSpanForScope=m,l._setSpanForScope=p},5475300505:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(7563271614),h=d(897859094),p=d(2685322190),m=d(8438156026),a=d(1243296801),s=d(2332127203);d(2206474662),d(8844511336);const n=d(9972015035),e=d(1150305139),t=d(9064881818),i=0,o=1;function c(ne){const{spanId:ie,traceId:ge}=ne.spanContext(),{data:Ie,op:We,parent_span_id:ct,status:Ae,origin:Fe}=b(ne);return f.dropUndefinedKeys({parent_span_id:ct,span_id:ie,trace_id:ge,data:Ie,op:We,status:Ae,origin:Fe})}r(c,"spanToTransactionTraceContext");function g(ne){const{spanId:ie,traceId:ge}=ne.spanContext(),{parent_span_id:Ie}=b(ne);return f.dropUndefinedKeys({parent_span_id:Ie,span_id:ie,trace_id:ge})}r(g,"spanToTraceContext");function S(ne){const{traceId:ie,spanId:ge}=ne.spanContext(),Ie=I(ne);return f.generateSentryTraceHeader(ie,ge,Ie)}r(S,"spanToTraceHeader");function u(ne){const ie=t.getDynamicSamplingContextFromSpan(ne);return f.dynamicSamplingContextToSentryBaggageHeader(ie)}r(u,"spanToBaggageHeader");function v(ne){return typeof ne=="number"?E(ne):Array.isArray(ne)?ne[0]+ne[1]/1e9:ne instanceof Date?E(ne.getTime()):f.timestampInSeconds()}r(v,"spanTimeInputToSeconds");function E(ne){return ne>9999999999?ne/1e3:ne}r(E,"ensureTimestampInSeconds");function b(ne){if(C(ne))return ne.getSpanJSON();try{const{spanId:ie,traceId:ge}=ne.spanContext();if(_(ne)){const{attributes:Ie,startTime:We,name:ct,endTime:Ae,parentSpanId:Fe,status:Xe}=ne;return f.dropUndefinedKeys({span_id:ie,trace_id:ge,data:Ie,description:ct,parent_span_id:Fe,start_timestamp:v(We),timestamp:v(Ae)||void 0,status:A(Xe),op:Ie[s.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:Ie[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(ne)})}return{span_id:ie,trace_id:ge}}catch{return{}}}r(b,"spanToJSON");function _(ne){const ie=ne;return!!ie.attributes&&!!ie.startTime&&!!ie.name&&!!ie.endTime&&!!ie.status}r(_,"spanIsOpenTelemetrySdkTraceBaseSpan");function C(ne){return typeof ne.getSpanJSON=="function"}r(C,"spanIsSentrySpan");function I(ne){const{traceFlags:ie}=ne.spanContext();return ie===o}r(I,"spanIsSampled");function A(ne){if(!(!ne||ne.code===e.SPAN_STATUS_UNSET))return ne.code===e.SPAN_STATUS_OK?"ok":ne.message||"unknown_error"}r(A,"getStatusMessage");const w="_sentryChildSpans",O="_sentryRootSpan";function R(ne,ie){const ge=ne[O]||ne;f.addNonEnumerableProperty(ie,O,ge),ne[w]&&ne[w].size<1e3?ne[w].add(ie):f.addNonEnumerableProperty(ne,w,new Set([ie]))}r(R,"addChildSpanToSpan");function F(ne,ie){ne[w]&&ne[w].delete(ie)}r(F,"removeChildSpanFromSpan");function V(ne){const ie=new Set;function ge(Ie){if(!ie.has(Ie)&&I(Ie)){ie.add(Ie);const We=Ie[w]?Array.from(Ie[w]):[];for(const ct of We)ge(ct)}}return r(ge,"addSpanChildren"),ge(ne),Array.from(ie)}r(V,"getSpanDescendants");function $(ne){return ne[O]||ne}r($,"getRootSpan");function X(){const ne=p.getMainCarrier(),ie=h.getAsyncContextStrategy(ne);return ie.getActiveSpan?ie.getActiveSpan():n._getSpanForScope(m.getCurrentScope())}r(X,"getActiveSpan");function Y(ne,ie,ge,Ie,We,ct){const Ae=X();Ae&&a.updateMetricSummaryOnSpan(Ae,ne,ie,ge,Ie,We,ct)}r(Y,"updateMetricSummaryOnActiveSpan"),l.TRACE_FLAG_NONE=i,l.TRACE_FLAG_SAMPLED=o,l.addChildSpanToSpan=R,l.getActiveSpan=X,l.getRootSpan=$,l.getSpanDescendants=V,l.getStatusMessage=A,l.removeChildSpanFromSpan=F,l.spanIsSampled=I,l.spanTimeInputToSeconds=v,l.spanToBaggageHeader=u,l.spanToJSON=b,l.spanToTraceContext=g,l.spanToTraceHeader=S,l.spanToTransactionTraceContext=c,l.updateMetricSummaryOnActiveSpan=Y},639277478:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d="8.2.1";l.SDK_VERSION=d},4916261515:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5330804994),h=d(9996838991);function p(e,t,i=250,o,c,g,S){if(!g.exception||!g.exception.values||!S||!f.isInstanceOf(S.originalException,Error))return;const u=g.exception.values.length>0?g.exception.values[g.exception.values.length-1]:void 0;u&&(g.exception.values=n(m(e,t,c,S.originalException,o,g.exception.values,u,0),i))}r(p,"applyAggregateErrorsToEvent");function m(e,t,i,o,c,g,S,u){if(g.length>=i+1)return g;let v=[...g];if(f.isInstanceOf(o[c],Error)){a(S,u);const E=e(t,o[c]),b=v.length;s(E,c,b,u),v=m(e,t,i,o[c],c,[E,...v],E,b)}return Array.isArray(o.errors)&&o.errors.forEach((E,b)=>{if(f.isInstanceOf(E,Error)){a(S,u);const _=e(t,E),C=v.length;s(_,`errors[${b}]`,C,u),v=m(e,t,i,E,c,[_,...v],_,C)}}),v}r(m,"aggregateExceptionsFromError");function a(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}r(a,"applyExceptionGroupFieldsForParentException");function s(e,t,i,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:i,parent_id:o}}r(s,"applyExceptionGroupFieldsForChildException");function n(e,t){return e.map(i=>(i.value&&(i.value=h.truncate(i.value,t)),i))}r(n,"truncateAggregateExceptions"),l.applyAggregateErrorsToEvent=p},999571021:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6005876151),h=d(5247061117),p=d(9955566551);function m(s,n,e,t){const i=s();let o=!1,c=!0;return setInterval(()=>{const g=i.getTimeMs();o===!1&&g>n+e&&(o=!0,c&&t()),g<n+e&&(o=!1)},20),{poll:()=>{i.reset()},enabled:g=>{c=g}}}r(m,"watchdogTimer");function a(s,n,e){const t=n?n.replace(/^file:\/\//,""):void 0,i=s.location.columnNumber?s.location.columnNumber+1:void 0,o=s.location.lineNumber?s.location.lineNumber+1:void 0;return h.dropUndefinedKeys({filename:t,module:e(t),function:s.functionName||p.UNKNOWN_FUNCTION,colno:i,lineno:o,in_app:t?f.filenameIsInApp(t):void 0})}r(a,"callFrameToStackFrame"),l.callFrameToStackFrame=a,l.watchdogTimer=m},8666696284:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1795624184),h=d(5330804994),p=d(3610150206),m="baggage",a="sentry-",s=/^sentry-/,n=8192;function e(g){const S=i(g);if(!S)return;const u=Object.entries(S).reduce((v,[E,b])=>{if(E.match(s)){const _=E.slice(a.length);v[_]=b}return v},{});if(Object.keys(u).length>0)return u}r(e,"baggageHeaderToDynamicSamplingContext");function t(g){if(!g)return;const S=Object.entries(g).reduce((u,[v,E])=>(E&&(u[`${a}${v}`]=E),u),{});return c(S)}r(t,"dynamicSamplingContextToSentryBaggageHeader");function i(g){if(!(!g||!h.isString(g)&&!Array.isArray(g)))return Array.isArray(g)?g.reduce((S,u)=>{const v=o(u);for(const E of Object.keys(v))S[E]=v[E];return S},{}):o(g)}r(i,"parseBaggageHeader");function o(g){return g.split(",").map(S=>S.split("=").map(u=>decodeURIComponent(u.trim()))).reduce((S,[u,v])=>(S[u]=v,S),{})}r(o,"baggageHeaderToObject");function c(g){if(Object.keys(g).length!==0)return Object.entries(g).reduce((S,[u,v],E)=>{const b=`${encodeURIComponent(u)}=${encodeURIComponent(v)}`,_=E===0?b:`${S},${b}`;return _.length>n?(f.DEBUG_BUILD&&p.logger.warn(`Not adding key: ${u} with val: ${v} to baggage header due to exceeding baggage size limits.`),S):_},"")}r(c,"objectToBaggageHeader"),l.BAGGAGE_HEADER_NAME=m,l.MAX_BAGGAGE_STRING_LENGTH=n,l.SENTRY_BAGGAGE_KEY_PREFIX=a,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=s,l.baggageHeaderToDynamicSamplingContext=e,l.dynamicSamplingContextToSentryBaggageHeader=t,l.parseBaggageHeader=i},9550996546:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5330804994),p=d(1108286465).GLOBAL_OBJ,m=80;function a(i,o={}){if(!i)return"<unknown>";try{let c=i;const g=5,S=[];let u=0,v=0;const E=" > ",b=E.length;let _;const C=Array.isArray(o)?o:o.keyAttrs,I=!Array.isArray(o)&&o.maxStringLength||m;for(;c&&u++<g&&(_=s(c,C),!(_==="html"||u>1&&v+S.length*b+_.length>=I));)S.push(_),v+=_.length,c=c.parentNode;return S.reverse().join(E)}catch{return"<unknown>"}}r(a,"htmlTreeAsString");function s(i,o){const c=i,g=[];let S,u,v,E,b;if(!c||!c.tagName)return"";if(p.HTMLElement&&c instanceof HTMLElement&&c.dataset){if(c.dataset.sentryComponent)return c.dataset.sentryComponent;if(c.dataset.sentryElement)return c.dataset.sentryElement}g.push(c.tagName.toLowerCase());const _=o&&o.length?o.filter(I=>c.getAttribute(I)).map(I=>[I,c.getAttribute(I)]):null;if(_&&_.length)_.forEach(I=>{g.push(`[${I[0]}="${I[1]}"]`)});else if(c.id&&g.push(`#${c.id}`),S=c.className,S&&f.isString(S))for(u=S.split(/\s+/),b=0;b<u.length;b++)g.push(`.${u[b]}`);const C=["aria-label","type","name","title","alt"];for(b=0;b<C.length;b++)v=C[b],E=c.getAttribute(v),E&&g.push(`[${v}="${E}"]`);return g.join("")}r(s,"_htmlElementAsString");function n(){try{return p.document.location.href}catch{return""}}r(n,"getLocationHref");function e(i){return p.document&&p.document.querySelector?p.document.querySelector(i):null}r(e,"getDomElement");function t(i){if(!p.HTMLElement)return null;let o=i;const c=5;for(let g=0;g<c;g++){if(!o)return null;if(o instanceof HTMLElement){if(o.dataset.sentryComponent)return o.dataset.sentryComponent;if(o.dataset.sentryElement)return o.dataset.sentryElement}o=o.parentNode}return null}r(t,"getComponentName"),l.getComponentName=t,l.getDomElement=e,l.getLocationHref=n,l.htmlTreeAsString=a},7961093924:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9137969200);async function h(p,m){return f._nullishCoalesce(p,m)}r(h,"_asyncNullishCoalesce"),l._asyncNullishCoalesce=h},6639909989:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});async function d(f){let h,p=f[0],m=1;for(;m<f.length;){const a=f[m],s=f[m+1];if(m+=2,(a==="optionalAccess"||a==="optionalCall")&&p==null)return;a==="access"||a==="optionalAccess"?(h=p,p=await s(p)):(a==="call"||a==="optionalCall")&&(p=await s((...n)=>p.call(h,...n)),h=void 0)}return p}r(d,"_asyncOptionalChain"),l._asyncOptionalChain=d},8823822214:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(6639909989);async function h(p){const m=await f._asyncOptionalChain(p);return m??!0}r(h,"_asyncOptionalChainDelete"),l._asyncOptionalChainDelete=h},9137969200:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(f,h){return f??h()}r(d,"_nullishCoalesce"),l._nullishCoalesce=d},3683597617:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(f){let h,p=f[0],m=1;for(;m<f.length;){const a=f[m],s=f[m+1];if(m+=2,(a==="optionalAccess"||a==="optionalCall")&&p==null)return;a==="access"||a==="optionalAccess"?(h=p,p=s(p)):(a==="call"||a==="optionalCall")&&(p=s((...n)=>p.call(h,...n)),h=void 0)}return p}r(d,"_optionalChain"),l._optionalChain=d},2677927218:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(3683597617);function h(p){const m=f._optionalChain(p);return m??!0}r(h,"_optionalChainDelete"),l._optionalChainDelete=h},4308130348:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(f){let h=[],p={};return{add(m,a){for(;h.length>=f;){const s=h.shift();s!==void 0&&delete p[s]}p[m]&&this.delete(m),h.push(m),p[m]=a},clear(){p={},h=[]},get(m){return p[m]},size(){return h.length},delete(m){if(!p[m])return!1;delete p[m];for(let a=0;a<h.length;a++)if(h[a]===m){h.splice(a,1);break}return!0}}}r(d,"makeFifoCache"),l.makeFifoCache=d},738620759:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(688958166),h=d(2174399055);function p(m,a,s){const n=[{type:"client_report"},{timestamp:s||h.dateTimestampInSeconds(),discarded_events:m}];return f.createEnvelope(a?{dsn:a}:{},[n])}r(p,"createClientReportEnvelope"),l.createClientReportEnvelope=p},9687986872:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(f){const h={};let p=0;for(;p<f.length;){const m=f.indexOf("=",p);if(m===-1)break;let a=f.indexOf(";",p);if(a===-1)a=f.length;else if(a<m){p=f.lastIndexOf(";",m-1)+1;continue}const s=f.slice(p,m).trim();if(h[s]===void 0){let n=f.slice(m+1,a).trim();n.charCodeAt(0)===34&&(n=n.slice(1,-1));try{h[s]=n.indexOf("%")!==-1?decodeURIComponent(n):n}catch{h[s]=n}}p=a+1}return h}r(d,"parseCookie"),l.parseCookie=d},1795624184:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=d},8314282351:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1795624184),h=d(3610150206),p=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function m(i){return i==="http"||i==="https"}r(m,"isValidProtocol");function a(i,o=!1){const{host:c,path:g,pass:S,port:u,projectId:v,protocol:E,publicKey:b}=i;return`${E}://${b}${o&&S?`:${S}`:""}@${c}${u?`:${u}`:""}/${g&&`${g}/`}${v}`}r(a,"dsnToString");function s(i){const o=p.exec(i);if(!o){h.consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${i}`)});return}const[c,g,S="",u,v="",E]=o.slice(1);let b="",_=E;const C=_.split("/");if(C.length>1&&(b=C.slice(0,-1).join("/"),_=C.pop()),_){const I=_.match(/^\d+/);I&&(_=I[0])}return n({host:u,pass:S,path:b,projectId:_,port:v,protocol:c,publicKey:g})}r(s,"dsnFromString");function n(i){return{protocol:i.protocol,publicKey:i.publicKey||"",pass:i.pass||"",host:i.host,port:i.port||"",path:i.path||"",projectId:i.projectId}}r(n,"dsnFromComponents");function e(i){if(!f.DEBUG_BUILD)return!0;const{port:o,projectId:c,protocol:g}=i;return["protocol","publicKey","host","projectId"].find(v=>i[v]?!1:(h.logger.error(`Invalid Sentry Dsn: ${v} missing`),!0))?!1:c.match(/^\d+$/)?m(g)?o&&isNaN(parseInt(o,10))?(h.logger.error(`Invalid Sentry Dsn: Invalid port ${o}`),!1):!0:(h.logger.error(`Invalid Sentry Dsn: Invalid protocol ${g}`),!1):(h.logger.error(`Invalid Sentry Dsn: Invalid projectId ${c}`),!1)}r(e,"validateDsn");function t(i){const o=typeof i=="string"?s(i):n(i);if(!(!o||!e(o)))return o}r(t,"makeDsn"),l.dsnFromString=s,l.dsnToString=a,l.makeDsn=t},1390308333:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}r(d,"isBrowserBundle");function f(){return"npm"}r(f,"getSDKSource"),l.getSDKSource=f,l.isBrowserBundle=d},688958166:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8314282351),h=d(6371465633),p=d(5247061117),m=d(1108286465);function a(C,I=[]){return[C,I]}r(a,"createEnvelope");function s(C,I){const[A,w]=C;return[A,[...w,I]]}r(s,"addItemToEnvelope");function n(C,I){const A=C[1];for(const w of A){const O=w[0].type;if(I(w,O))return!0}return!1}r(n,"forEachEnvelopeItem");function e(C,I){return n(C,(A,w)=>I.includes(w))}r(e,"envelopeContainsItemType");function t(C){return m.GLOBAL_OBJ.__SENTRY__&&m.GLOBAL_OBJ.__SENTRY__.encodePolyfill?m.GLOBAL_OBJ.__SENTRY__.encodePolyfill(C):new TextEncoder().encode(C)}r(t,"encodeUTF8");function i(C){return m.GLOBAL_OBJ.__SENTRY__&&m.GLOBAL_OBJ.__SENTRY__.decodePolyfill?m.GLOBAL_OBJ.__SENTRY__.decodePolyfill(C):new TextDecoder().decode(C)}r(i,"decodeUTF8");function o(C){const[I,A]=C;let w=JSON.stringify(I);function O(R){typeof w=="string"?w=typeof R=="string"?w+R:[t(w),R]:w.push(typeof R=="string"?t(R):R)}r(O,"append");for(const R of A){const[F,V]=R;if(O(`
${JSON.stringify(F)}
`),typeof V=="string"||V instanceof Uint8Array)O(V);else{let $;try{$=JSON.stringify(V)}catch{$=JSON.stringify(h.normalize(V))}O($)}}return typeof w=="string"?w:c(w)}r(o,"serializeEnvelope");function c(C){const I=C.reduce((O,R)=>O+R.length,0),A=new Uint8Array(I);let w=0;for(const O of C)A.set(O,w),w+=O.length;return A}r(c,"concatBuffers");function g(C){let I=typeof C=="string"?t(C):C;function A(F){const V=I.subarray(0,F);return I=I.subarray(F+1),V}r(A,"readBinary");function w(){let F=I.indexOf(10);return F<0&&(F=I.length),JSON.parse(i(A(F)))}r(w,"readJson");const O=w(),R=[];for(;I.length;){const F=w(),V=typeof F.length=="number"?F.length:void 0;R.push([F,V?A(V):w()])}return[O,R]}r(g,"parseEnvelope");function S(C){return[{type:"span"},C]}r(S,"createSpanEnvelopeItem");function u(C){const I=typeof C.data=="string"?t(C.data):C.data;return[p.dropUndefinedKeys({type:"attachment",length:I.length,filename:C.filename,content_type:C.contentType,attachment_type:C.attachmentType}),I]}r(u,"createAttachmentEnvelopeItem");const v={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function E(C){return v[C]}r(E,"envelopeItemTypeToDataCategory");function b(C){if(!C||!C.sdk)return;const{name:I,version:A}=C.sdk;return{name:I,version:A}}r(b,"getSdkMetadataForEnvelopeHeader");function _(C,I,A,w){const O=C.sdkProcessingMetadata&&C.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:C.event_id,sent_at:new Date().toISOString(),...I&&{sdk:I},...!!A&&w&&{dsn:f.dsnToString(w)},...O&&{trace:p.dropUndefinedKeys({...O})}}}r(_,"createEventEnvelopeHeaders"),l.addItemToEnvelope=s,l.createAttachmentEnvelopeItem=u,l.createEnvelope=a,l.createEventEnvelopeHeaders=_,l.createSpanEnvelopeItem=S,l.envelopeContainsItemType=e,l.envelopeItemTypeToDataCategory=E,l.forEachEnvelopeItem=n,l.getSdkMetadataForEnvelopeHeader=b,l.parseEnvelope=g,l.serializeEnvelope=o},4759164024:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class d extends Error{constructor(h,p="warn"){super(h),this.message=h,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=p}}r(d,"SentryError"),l.SentryError=d},1705974933:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5330804994),h=d(4360077466),p=d(6371465633),m=d(5247061117);function a(g,S){return g(S.stack||"",1)}r(a,"parseStackFrames");function s(g,S){const u={type:S.name||S.constructor.name,value:S.message},v=a(g,S);return v.length&&(u.stacktrace={frames:v}),u}r(s,"exceptionFromError");function n(g){for(const S in g)if(Object.prototype.hasOwnProperty.call(g,S)){const u=g[S];if(u instanceof Error)return u}}r(n,"getErrorPropertyFromObject");function e(g){if("name"in g&&typeof g.name=="string"){let v=`'${g.name}' captured as exception`;return"message"in g&&typeof g.message=="string"&&(v+=` with message '${g.message}'`),v}else if("message"in g&&typeof g.message=="string")return g.message;const S=m.extractExceptionKeysForMessage(g);if(f.isErrorEvent(g))return`Event \`ErrorEvent\` captured as exception with message \`${g.message}\``;const u=t(g);return`${u&&u!=="Object"?`'${u}'`:"Object"} captured as exception with keys: ${S}`}r(e,"getMessageForObject");function t(g){try{const S=Object.getPrototypeOf(g);return S?S.constructor.name:void 0}catch{}}r(t,"getObjectClassName");function i(g,S,u,v){if(f.isError(u))return[u,void 0];if(S.synthetic=!0,f.isPlainObject(u)){const b=g&&g.getOptions().normalizeDepth,_={__serialized__:p.normalizeToSize(u,b)},C=n(u);if(C)return[C,_];const I=e(u),A=v&&v.syntheticException||new Error(I);return A.message=I,[A,_]}const E=v&&v.syntheticException||new Error(u);return E.message=`${u}`,[E,void 0]}r(i,"getException");function o(g,S,u,v){const b=v&&v.data&&v.data.mechanism||{handled:!0,type:"generic"},[_,C]=i(g,b,u,v),I={exception:{values:[s(S,_)]}};return C&&(I.extra=C),h.addExceptionTypeValue(I,void 0,void 0),h.addExceptionMechanism(I,b),{...I,event_id:v&&v.event_id}}r(o,"eventFromUnknownInput");function c(g,S,u="info",v,E){const b={event_id:v&&v.event_id,level:u};if(E&&v&&v.syntheticException){const _=a(g,v.syntheticException);_.length&&(b.exception={values:[{value:S,stacktrace:{frames:_}}]})}if(f.isParameterizedString(S)){const{__sentry_template_string__:_,__sentry_template_values__:C}=S;return b.logentry={message:_,params:C},b}return b.message=S,b}r(c,"eventFromMessage"),l.eventFromMessage=c,l.eventFromUnknownInput=o,l.exceptionFromError=s,l.parseStackFrames=a},7563271614:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(4916261515),h=d(9550996546),p=d(8314282351),m=d(4759164024),a=d(1108286465),s=d(3619233697),n=d(3178410512),e=d(5878142463),t=d(5817852989),i=d(7839211009),o=d(5330804994),c=d(4304701770),g=d(3610150206),S=d(47787884),u=d(4360077466),v=d(1552363198),E=d(6371465633),b=d(5247061117),_=d(4764604189),C=d(3193811597),I=d(4846555271),A=d(5043703765),w=d(9955566551),O=d(6005876151),R=d(9996838991),F=d(8265793926),V=d(2435760602),$=d(2174399055),X=d(6123212092),Y=d(1390308333),ne=d(688958166),ie=d(738620759),ge=d(277240735),Ie=d(8666696284),We=d(7216756807),ct=d(4308130348),Ae=d(1705974933),Fe=d(999571021),Xe=d(6852308275),Ge=d(7961093924),it=d(6639909989),Dt=d(8823822214),wt=d(9137969200),Pe=d(3683597617),xe=d(2677927218),et=d(6250807085),rt=d(7384544743);l.applyAggregateErrorsToEvent=f.applyAggregateErrorsToEvent,l.getComponentName=h.getComponentName,l.getDomElement=h.getDomElement,l.getLocationHref=h.getLocationHref,l.htmlTreeAsString=h.htmlTreeAsString,l.dsnFromString=p.dsnFromString,l.dsnToString=p.dsnToString,l.makeDsn=p.makeDsn,l.SentryError=m.SentryError,l.GLOBAL_OBJ=a.GLOBAL_OBJ,l.getGlobalSingleton=a.getGlobalSingleton,l.addConsoleInstrumentationHandler=s.addConsoleInstrumentationHandler,l.addFetchInstrumentationHandler=n.addFetchInstrumentationHandler,l.addGlobalErrorInstrumentationHandler=e.addGlobalErrorInstrumentationHandler,l.addGlobalUnhandledRejectionInstrumentationHandler=t.addGlobalUnhandledRejectionInstrumentationHandler,l.addHandler=i.addHandler,l.maybeInstrument=i.maybeInstrument,l.resetInstrumentationHandlers=i.resetInstrumentationHandlers,l.triggerHandlers=i.triggerHandlers,l.isDOMError=o.isDOMError,l.isDOMException=o.isDOMException,l.isElement=o.isElement,l.isError=o.isError,l.isErrorEvent=o.isErrorEvent,l.isEvent=o.isEvent,l.isInstanceOf=o.isInstanceOf,l.isParameterizedString=o.isParameterizedString,l.isPlainObject=o.isPlainObject,l.isPrimitive=o.isPrimitive,l.isRegExp=o.isRegExp,l.isString=o.isString,l.isSyntheticEvent=o.isSyntheticEvent,l.isThenable=o.isThenable,l.isVueViewModel=o.isVueViewModel,l.isBrowser=c.isBrowser,l.CONSOLE_LEVELS=g.CONSOLE_LEVELS,l.consoleSandbox=g.consoleSandbox,l.logger=g.logger,l.originalConsoleMethods=g.originalConsoleMethods,l.memoBuilder=S.memoBuilder,l.addContextToFrame=u.addContextToFrame,l.addExceptionMechanism=u.addExceptionMechanism,l.addExceptionTypeValue=u.addExceptionTypeValue,l.arrayify=u.arrayify,l.checkOrSetAlreadyCaught=u.checkOrSetAlreadyCaught,l.getEventDescription=u.getEventDescription,l.parseSemver=u.parseSemver,l.uuid4=u.uuid4,l.dynamicRequire=v.dynamicRequire,l.isNodeEnv=v.isNodeEnv,l.loadModule=v.loadModule,l.normalize=E.normalize,l.normalizeToSize=E.normalizeToSize,l.normalizeUrlToBase=E.normalizeUrlToBase,l.addNonEnumerableProperty=b.addNonEnumerableProperty,l.convertToPlainObject=b.convertToPlainObject,l.dropUndefinedKeys=b.dropUndefinedKeys,l.extractExceptionKeysForMessage=b.extractExceptionKeysForMessage,l.fill=b.fill,l.getOriginalFunction=b.getOriginalFunction,l.markFunctionWrapped=b.markFunctionWrapped,l.objectify=b.objectify,l.urlEncode=b.urlEncode,l.basename=_.basename,l.dirname=_.dirname,l.isAbsolute=_.isAbsolute,l.join=_.join,l.normalizePath=_.normalizePath,l.relative=_.relative,l.resolve=_.resolve,l.makePromiseBuffer=C.makePromiseBuffer,l.DEFAULT_USER_INCLUDES=I.DEFAULT_USER_INCLUDES,l.addRequestDataToEvent=I.addRequestDataToEvent,l.extractPathForTransaction=I.extractPathForTransaction,l.extractRequestData=I.extractRequestData,l.winterCGHeadersToDict=I.winterCGHeadersToDict,l.winterCGRequestToRequestData=I.winterCGRequestToRequestData,l.severityLevelFromString=A.severityLevelFromString,l.validSeverityLevels=A.validSeverityLevels,l.UNKNOWN_FUNCTION=w.UNKNOWN_FUNCTION,l.createStackParser=w.createStackParser,l.getFunctionName=w.getFunctionName,l.stackParserFromStackParserOptions=w.stackParserFromStackParserOptions,l.stripSentryFramesAndReverse=w.stripSentryFramesAndReverse,l.filenameIsInApp=O.filenameIsInApp,l.node=O.node,l.nodeStackLineParser=O.nodeStackLineParser,l.isMatchingPattern=R.isMatchingPattern,l.safeJoin=R.safeJoin,l.snipLine=R.snipLine,l.stringMatchesSomePattern=R.stringMatchesSomePattern,l.truncate=R.truncate,l.isNativeFetch=F.isNativeFetch,l.supportsDOMError=F.supportsDOMError,l.supportsDOMException=F.supportsDOMException,l.supportsErrorEvent=F.supportsErrorEvent,l.supportsFetch=F.supportsFetch,l.supportsNativeFetch=F.supportsNativeFetch,l.supportsReferrerPolicy=F.supportsReferrerPolicy,l.supportsReportingObserver=F.supportsReportingObserver,l.SyncPromise=V.SyncPromise,l.rejectedSyncPromise=V.rejectedSyncPromise,l.resolvedSyncPromise=V.resolvedSyncPromise,Object.defineProperty(l,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>$._browserPerformanceTimeOriginMode}),l.browserPerformanceTimeOrigin=$.browserPerformanceTimeOrigin,l.dateTimestampInSeconds=$.dateTimestampInSeconds,l.timestampInSeconds=$.timestampInSeconds,l.TRACEPARENT_REGEXP=X.TRACEPARENT_REGEXP,l.extractTraceparentData=X.extractTraceparentData,l.generateSentryTraceHeader=X.generateSentryTraceHeader,l.propagationContextFromHeaders=X.propagationContextFromHeaders,l.getSDKSource=Y.getSDKSource,l.isBrowserBundle=Y.isBrowserBundle,l.addItemToEnvelope=ne.addItemToEnvelope,l.createAttachmentEnvelopeItem=ne.createAttachmentEnvelopeItem,l.createEnvelope=ne.createEnvelope,l.createEventEnvelopeHeaders=ne.createEventEnvelopeHeaders,l.createSpanEnvelopeItem=ne.createSpanEnvelopeItem,l.envelopeContainsItemType=ne.envelopeContainsItemType,l.envelopeItemTypeToDataCategory=ne.envelopeItemTypeToDataCategory,l.forEachEnvelopeItem=ne.forEachEnvelopeItem,l.getSdkMetadataForEnvelopeHeader=ne.getSdkMetadataForEnvelopeHeader,l.parseEnvelope=ne.parseEnvelope,l.serializeEnvelope=ne.serializeEnvelope,l.createClientReportEnvelope=ie.createClientReportEnvelope,l.DEFAULT_RETRY_AFTER=ge.DEFAULT_RETRY_AFTER,l.disabledUntil=ge.disabledUntil,l.isRateLimited=ge.isRateLimited,l.parseRetryAfterHeader=ge.parseRetryAfterHeader,l.updateRateLimits=ge.updateRateLimits,l.BAGGAGE_HEADER_NAME=Ie.BAGGAGE_HEADER_NAME,l.MAX_BAGGAGE_STRING_LENGTH=Ie.MAX_BAGGAGE_STRING_LENGTH,l.SENTRY_BAGGAGE_KEY_PREFIX=Ie.SENTRY_BAGGAGE_KEY_PREFIX,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=Ie.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,l.baggageHeaderToDynamicSamplingContext=Ie.baggageHeaderToDynamicSamplingContext,l.dynamicSamplingContextToSentryBaggageHeader=Ie.dynamicSamplingContextToSentryBaggageHeader,l.parseBaggageHeader=Ie.parseBaggageHeader,l.getNumberOfUrlSegments=We.getNumberOfUrlSegments,l.getSanitizedUrlString=We.getSanitizedUrlString,l.parseUrl=We.parseUrl,l.stripUrlQueryAndFragment=We.stripUrlQueryAndFragment,l.makeFifoCache=ct.makeFifoCache,l.eventFromMessage=Ae.eventFromMessage,l.eventFromUnknownInput=Ae.eventFromUnknownInput,l.exceptionFromError=Ae.exceptionFromError,l.parseStackFrames=Ae.parseStackFrames,l.callFrameToStackFrame=Fe.callFrameToStackFrame,l.watchdogTimer=Fe.watchdogTimer,l.LRUMap=Xe.LRUMap,l._asyncNullishCoalesce=Ge._asyncNullishCoalesce,l._asyncOptionalChain=it._asyncOptionalChain,l._asyncOptionalChainDelete=Dt._asyncOptionalChainDelete,l._nullishCoalesce=wt._nullishCoalesce,l._optionalChain=Pe._optionalChain,l._optionalChainDelete=xe._optionalChainDelete,l.escapeStringForRegex=et.escapeStringForRegex,l.supportsHistory=rt.supportsHistory},3619233697:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(3610150206),h=d(5247061117),p=d(1108286465),m=d(7839211009);function a(n){const e="console";m.addHandler(e,n),m.maybeInstrument(e,s)}r(a,"addConsoleInstrumentationHandler");function s(){"console"in p.GLOBAL_OBJ&&f.CONSOLE_LEVELS.forEach(function(n){n in p.GLOBAL_OBJ.console&&h.fill(p.GLOBAL_OBJ.console,n,function(e){return f.originalConsoleMethods[n]=e,function(...t){const i={args:t,level:n};m.triggerHandlers("console",i);const o=f.originalConsoleMethods[n];o&&o.apply(p.GLOBAL_OBJ.console,t)}})})}r(s,"instrumentConsole"),l.addConsoleInstrumentationHandler=a},3178410512:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5247061117),h=d(8265793926),p=d(2174399055),m=d(1108286465),a=d(7839211009);function s(o){const c="fetch";a.addHandler(c,o),a.maybeInstrument(c,n)}r(s,"addFetchInstrumentationHandler");function n(){h.supportsNativeFetch()&&f.fill(m.GLOBAL_OBJ,"fetch",function(o){return function(...c){const{method:g,url:S}=i(c),u={args:c,fetchData:{method:g,url:S},startTimestamp:p.timestampInSeconds()*1e3};return a.triggerHandlers("fetch",{...u}),o.apply(m.GLOBAL_OBJ,c).then(v=>{const E={...u,endTimestamp:p.timestampInSeconds()*1e3,response:v};return a.triggerHandlers("fetch",E),v},v=>{const E={...u,endTimestamp:p.timestampInSeconds()*1e3,error:v};throw a.triggerHandlers("fetch",E),v})}})}r(n,"instrumentFetch");function e(o,c){return!!o&&typeof o=="object"&&!!o[c]}r(e,"hasProp");function t(o){return typeof o=="string"?o:o?e(o,"url")?o.url:o.toString?o.toString():"":""}r(t,"getUrlFromResource");function i(o){if(o.length===0)return{method:"GET",url:""};if(o.length===2){const[g,S]=o;return{url:t(g),method:e(S,"method")?String(S.method).toUpperCase():"GET"}}const c=o[0];return{url:t(c),method:e(c,"method")?String(c.method).toUpperCase():"GET"}}r(i,"parseFetchArgs"),l.addFetchInstrumentationHandler=s,l.parseFetchArgs=i},5878142463:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1108286465),h=d(7839211009);let p=null;function m(s){const n="error";h.addHandler(n,s),h.maybeInstrument(n,a)}r(m,"addGlobalErrorInstrumentationHandler");function a(){p=f.GLOBAL_OBJ.onerror,f.GLOBAL_OBJ.onerror=function(s,n,e,t,i){const o={column:t,error:i,line:e,msg:s,url:n};return h.triggerHandlers("error",o),p&&!p.__SENTRY_LOADER__?p.apply(this,arguments):!1},f.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}r(a,"instrumentError"),l.addGlobalErrorInstrumentationHandler=m},5817852989:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1108286465),h=d(7839211009);let p=null;function m(s){const n="unhandledrejection";h.addHandler(n,s),h.maybeInstrument(n,a)}r(m,"addGlobalUnhandledRejectionInstrumentationHandler");function a(){p=f.GLOBAL_OBJ.onunhandledrejection,f.GLOBAL_OBJ.onunhandledrejection=function(s){const n=s;return h.triggerHandlers("unhandledrejection",n),p&&!p.__SENTRY_LOADER__?p.apply(this,arguments):!0},f.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}r(a,"instrumentUnhandledRejection"),l.addGlobalUnhandledRejectionInstrumentationHandler=m},7839211009:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1795624184),h=d(3610150206),p=d(9955566551),m={},a={};function s(i,o){m[i]=m[i]||[],m[i].push(o)}r(s,"addHandler");function n(){Object.keys(m).forEach(i=>{m[i]=void 0})}r(n,"resetInstrumentationHandlers");function e(i,o){a[i]||(o(),a[i]=!0)}r(e,"maybeInstrument");function t(i,o){const c=i&&m[i];if(c)for(const g of c)try{g(o)}catch(S){f.DEBUG_BUILD&&h.logger.error(`Error while triggering instrumentation handler.
Type: ${i}
Name: ${p.getFunctionName(g)}
Error:`,S)}}r(t,"triggerHandlers"),l.addHandler=s,l.maybeInstrument=e,l.resetInstrumentationHandlers=n,l.triggerHandlers=t},5330804994:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=Object.prototype.toString;function f(E){switch(d.call(E)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return u(E,Error)}}r(f,"isError");function h(E,b){return d.call(E)===`[object ${b}]`}r(h,"isBuiltin");function p(E){return h(E,"ErrorEvent")}r(p,"isErrorEvent");function m(E){return h(E,"DOMError")}r(m,"isDOMError");function a(E){return h(E,"DOMException")}r(a,"isDOMException");function s(E){return h(E,"String")}r(s,"isString");function n(E){return typeof E=="object"&&E!==null&&"__sentry_template_string__"in E&&"__sentry_template_values__"in E}r(n,"isParameterizedString");function e(E){return E===null||n(E)||typeof E!="object"&&typeof E!="function"}r(e,"isPrimitive");function t(E){return h(E,"Object")}r(t,"isPlainObject");function i(E){return typeof Event<"u"&&u(E,Event)}r(i,"isEvent");function o(E){return typeof Element<"u"&&u(E,Element)}r(o,"isElement");function c(E){return h(E,"RegExp")}r(c,"isRegExp");function g(E){return Boolean(E&&E.then&&typeof E.then=="function")}r(g,"isThenable");function S(E){return t(E)&&"nativeEvent"in E&&"preventDefault"in E&&"stopPropagation"in E}r(S,"isSyntheticEvent");function u(E,b){try{return E instanceof b}catch{return!1}}r(u,"isInstanceOf");function v(E){return!!(typeof E=="object"&&E!==null&&(E.__isVue||E._isVue))}r(v,"isVueViewModel"),l.isDOMError=m,l.isDOMException=a,l.isElement=o,l.isError=f,l.isErrorEvent=p,l.isEvent=i,l.isInstanceOf=u,l.isParameterizedString=n,l.isPlainObject=t,l.isPrimitive=e,l.isRegExp=c,l.isString=s,l.isSyntheticEvent=S,l.isThenable=g,l.isVueViewModel=v},4304701770:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1552363198),h=d(1108286465);function p(){return typeof window<"u"&&(!f.isNodeEnv()||m())}r(p,"isBrowser");function m(){return h.GLOBAL_OBJ.process!==void 0&&h.GLOBAL_OBJ.process.type==="renderer"}r(m,"isElectronNodeRenderer"),l.isBrowser=p},3610150206:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1795624184),h=d(1108286465),p="Sentry Logger ",m=["debug","info","warn","error","log","assert","trace"],a={};function s(t){if(!("console"in h.GLOBAL_OBJ))return t();const i=h.GLOBAL_OBJ.console,o={},c=Object.keys(a);c.forEach(g=>{const S=a[g];o[g]=i[g],i[g]=S});try{return t()}finally{c.forEach(g=>{i[g]=o[g]})}}r(s,"consoleSandbox");function n(){let t=!1;const i={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return f.DEBUG_BUILD?m.forEach(o=>{i[o]=(...c)=>{t&&s(()=>{h.GLOBAL_OBJ.console[o](`${p}[${o}]:`,...c)})}}):m.forEach(o=>{i[o]=()=>{}}),i}r(n,"makeLogger");const e=n();l.CONSOLE_LEVELS=m,l.consoleSandbox=s,l.logger=e,l.originalConsoleMethods=a},6852308275:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class d{constructor(h){this._maxSize=h,this._cache=new Map}get size(){return this._cache.size}get(h){const p=this._cache.get(h);if(p!==void 0)return this._cache.delete(h),this._cache.set(h,p),p}set(h,p){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(h,p)}remove(h){const p=this._cache.get(h);return p&&this._cache.delete(h),p}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const h=[];return this._cache.forEach(p=>h.push(p)),h}}r(d,"LRUMap"),l.LRUMap=d},47787884:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(){const f=typeof WeakSet=="function",h=f?new WeakSet:[];function p(a){if(f)return h.has(a)?!0:(h.add(a),!1);for(let s=0;s<h.length;s++)if(h[s]===a)return!0;return h.push(a),!1}r(p,"memoize");function m(a){if(f)h.delete(a);else for(let s=0;s<h.length;s++)if(h[s]===a){h.splice(s,1);break}}return r(m,"unmemoize"),[p,m]}r(d,"memoBuilder"),l.memoBuilder=d},4360077466:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5247061117),h=d(9996838991),p=d(1108286465);function m(){const S=p.GLOBAL_OBJ,u=S.crypto||S.msCrypto;let v=r(()=>Math.random()*16,"getRandomByte");try{if(u&&u.randomUUID)return u.randomUUID().replace(/-/g,"");u&&u.getRandomValues&&(v=r(()=>{const E=new Uint8Array(1);return u.getRandomValues(E),E[0]},"getRandomByte"))}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,E=>(E^(v()&15)>>E/4).toString(16))}r(m,"uuid4");function a(S){return S.exception&&S.exception.values?S.exception.values[0]:void 0}r(a,"getFirstException");function s(S){const{message:u,event_id:v}=S;if(u)return u;const E=a(S);return E?E.type&&E.value?`${E.type}: ${E.value}`:E.type||E.value||v||"<unknown>":v||"<unknown>"}r(s,"getEventDescription");function n(S,u,v){const E=S.exception=S.exception||{},b=E.values=E.values||[],_=b[0]=b[0]||{};_.value||(_.value=u||""),_.type||(_.type=v||"Error")}r(n,"addExceptionTypeValue");function e(S,u){const v=a(S);if(!v)return;const E={type:"generic",handled:!0},b=v.mechanism;if(v.mechanism={...E,...b,...u},u&&"data"in u){const _={...b&&b.data,...u.data};v.mechanism.data=_}}r(e,"addExceptionMechanism");const t=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function i(S){const u=S.match(t)||[],v=parseInt(u[1],10),E=parseInt(u[2],10),b=parseInt(u[3],10);return{buildmetadata:u[5],major:isNaN(v)?void 0:v,minor:isNaN(E)?void 0:E,patch:isNaN(b)?void 0:b,prerelease:u[4]}}r(i,"parseSemver");function o(S,u,v=5){if(u.lineno===void 0)return;const E=S.length,b=Math.max(Math.min(E-1,u.lineno-1),0);u.pre_context=S.slice(Math.max(0,b-v),b).map(_=>h.snipLine(_,0)),u.context_line=h.snipLine(S[Math.min(E-1,b)],u.colno||0),u.post_context=S.slice(Math.min(b+1,E),b+1+v).map(_=>h.snipLine(_,0))}r(o,"addContextToFrame");function c(S){if(S&&S.__sentry_captured__)return!0;try{f.addNonEnumerableProperty(S,"__sentry_captured__",!0)}catch{}return!1}r(c,"checkOrSetAlreadyCaught");function g(S){return Array.isArray(S)?S:[S]}r(g,"arrayify"),l.addContextToFrame=o,l.addExceptionMechanism=e,l.addExceptionTypeValue=n,l.arrayify=g,l.checkOrSetAlreadyCaught=c,l.getEventDescription=s,l.parseSemver=i,l.uuid4=m},6005876151:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9955566551);function h(a,s=!1){return!(s||a&&!a.startsWith("/")&&!a.match(/^[A-Z]:/)&&!a.startsWith(".")&&!a.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&a!==void 0&&!a.includes("node_modules/")}r(h,"filenameIsInApp");function p(a){const s=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return e=>{const t=e.match(n);if(t){let i,o,c,g,S;if(t[1]){c=t[1];let E=c.lastIndexOf(".");if(c[E-1]==="."&&E--,E>0){i=c.slice(0,E),o=c.slice(E+1);const b=i.indexOf(".Module");b>0&&(c=c.slice(b+1),i=i.slice(0,b))}g=void 0}o&&(g=i,S=o),o==="<anonymous>"&&(S=void 0,c=void 0),c===void 0&&(S=S||f.UNKNOWN_FUNCTION,c=g?`${g}.${S}`:S);let u=t[2]&&t[2].startsWith("file://")?t[2].slice(7):t[2];const v=t[5]==="native";return u&&u.match(/\/[A-Z]:/)&&(u=u.slice(1)),!u&&t[5]&&!v&&(u=t[5]),{filename:u,module:a?a(u):void 0,function:c,lineno:parseInt(t[3],10)||void 0,colno:parseInt(t[4],10)||void 0,in_app:h(u,v)}}if(e.match(s))return{filename:e}}}r(p,"node");function m(a){return[90,p(a)]}r(m,"nodeStackLineParser"),l.filenameIsInApp=h,l.node=p,l.nodeStackLineParser=m},1552363198:(B,l,d)=>{B=d.nmd(B),Object.defineProperty(l,"__esModule",{value:!0});const f=d(1390308333);function h(){return!f.isBrowserBundle()&&Object.prototype.toString.call(0)==="[object process]"}r(h,"isNodeEnv");function p(a,s){return a.require(s)}r(p,"dynamicRequire");function m(a){let s;try{s=p(B,a)}catch{}try{const{cwd:n}=p(B,"process");s=p(B,`${n()}/node_modules/${a}`)}catch{}return s}r(m,"loadModule"),l.dynamicRequire=p,l.isNodeEnv=h,l.loadModule=m},6371465633:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5330804994),h=d(47787884),p=d(5247061117),m=d(9955566551);function a(g,S=100,u=1/0){try{return n("",g,S,u)}catch(v){return{ERROR:`**non-serializable** (${v})`}}}r(a,"normalize");function s(g,S=3,u=100*1024){const v=a(g,S);return o(v)>u?s(g,S-1,u):v}r(s,"normalizeToSize");function n(g,S,u=1/0,v=1/0,E=h.memoBuilder()){const[b,_]=E;if(S==null||["number","boolean","string"].includes(typeof S)&&!Number.isNaN(S))return S;const C=e(g,S);if(!C.startsWith("[object "))return C;if(S.__sentry_skip_normalization__)return S;const I=typeof S.__sentry_override_normalization_depth__=="number"?S.__sentry_override_normalization_depth__:u;if(I===0)return C.replace("object ","");if(b(S))return"[Circular ~]";const A=S;if(A&&typeof A.toJSON=="function")try{const F=A.toJSON();return n("",F,I-1,v,E)}catch{}const w=Array.isArray(S)?[]:{};let O=0;const R=p.convertToPlainObject(S);for(const F in R){if(!Object.prototype.hasOwnProperty.call(R,F))continue;if(O>=v){w[F]="[MaxProperties ~]";break}const V=R[F];w[F]=n(F,V,I-1,v,E),O++}return _(S),w}r(n,"visit");function e(g,S){try{if(g==="domain"&&S&&typeof S=="object"&&S._events)return"[Domain]";if(g==="domainEmitter")return"[DomainEmitter]";if(typeof d.g<"u"&&S===d.g)return"[Global]";if(typeof window<"u"&&S===window)return"[Window]";if(typeof document<"u"&&S===document)return"[Document]";if(f.isVueViewModel(S))return"[VueViewModel]";if(f.isSyntheticEvent(S))return"[SyntheticEvent]";if(typeof S=="number"&&S!==S)return"[NaN]";if(typeof S=="function")return`[Function: ${m.getFunctionName(S)}]`;if(typeof S=="symbol")return`[${String(S)}]`;if(typeof S=="bigint")return`[BigInt: ${String(S)}]`;const u=t(S);return/^HTML(\w*)Element$/.test(u)?`[HTMLElement: ${u}]`:`[object ${u}]`}catch(u){return`**non-serializable** (${u})`}}r(e,"stringifyValue");function t(g){const S=Object.getPrototypeOf(g);return S?S.constructor.name:"null prototype"}r(t,"getConstructorName");function i(g){return~-encodeURI(g).split(/%..|./).length}r(i,"utf8Length");function o(g){return i(JSON.stringify(g))}r(o,"jsonSize");function c(g,S){const u=S.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let v=g;try{v=decodeURI(g)}catch{}return v.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${u}/*`,"ig"),"app:///")}r(c,"normalizeUrlToBase"),l.normalize=a,l.normalizeToSize=s,l.normalizeUrlToBase=c},5247061117:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9550996546),h=d(1795624184),p=d(5330804994),m=d(3610150206),a=d(9996838991);function s(_,C,I){if(!(C in _))return;const A=_[C],w=I(A);typeof w=="function"&&e(w,A),_[C]=w}r(s,"fill");function n(_,C,I){try{Object.defineProperty(_,C,{value:I,writable:!0,configurable:!0})}catch{h.DEBUG_BUILD&&m.logger.log(`Failed to add non-enumerable property "${C}" to object`,_)}}r(n,"addNonEnumerableProperty");function e(_,C){try{const I=C.prototype||{};_.prototype=C.prototype=I,n(_,"__sentry_original__",C)}catch{}}r(e,"markFunctionWrapped");function t(_){return _.__sentry_original__}r(t,"getOriginalFunction");function i(_){return Object.keys(_).map(C=>`${encodeURIComponent(C)}=${encodeURIComponent(_[C])}`).join("&")}r(i,"urlEncode");function o(_){if(p.isError(_))return{message:_.message,name:_.name,stack:_.stack,...g(_)};if(p.isEvent(_)){const C={type:_.type,target:c(_.target),currentTarget:c(_.currentTarget),...g(_)};return typeof CustomEvent<"u"&&p.isInstanceOf(_,CustomEvent)&&(C.detail=_.detail),C}else return _}r(o,"convertToPlainObject");function c(_){try{return p.isElement(_)?f.htmlTreeAsString(_):Object.prototype.toString.call(_)}catch{return"<unknown>"}}r(c,"serializeEventTarget");function g(_){if(typeof _=="object"&&_!==null){const C={};for(const I in _)Object.prototype.hasOwnProperty.call(_,I)&&(C[I]=_[I]);return C}else return{}}r(g,"getOwnProperties");function S(_,C=40){const I=Object.keys(o(_));if(I.sort(),!I.length)return"[object has no keys]";if(I[0].length>=C)return a.truncate(I[0],C);for(let A=I.length;A>0;A--){const w=I.slice(0,A).join(", ");if(!(w.length>C))return A===I.length?w:a.truncate(w,C)}return""}r(S,"extractExceptionKeysForMessage");function u(_){return v(_,new Map)}r(u,"dropUndefinedKeys");function v(_,C){if(E(_)){const I=C.get(_);if(I!==void 0)return I;const A={};C.set(_,A);for(const w of Object.keys(_))typeof _[w]<"u"&&(A[w]=v(_[w],C));return A}if(Array.isArray(_)){const I=C.get(_);if(I!==void 0)return I;const A=[];return C.set(_,A),_.forEach(w=>{A.push(v(w,C))}),A}return _}r(v,"_dropUndefinedKeys");function E(_){if(!p.isPlainObject(_))return!1;try{const C=Object.getPrototypeOf(_).constructor.name;return!C||C==="Object"}catch{return!0}}r(E,"isPojo");function b(_){let C;switch(!0){case _==null:C=new String(_);break;case(typeof _=="symbol"||typeof _=="bigint"):C=Object(_);break;case p.isPrimitive(_):C=new _.constructor(_);break;default:C=_;break}return C}r(b,"objectify"),l.addNonEnumerableProperty=n,l.convertToPlainObject=o,l.dropUndefinedKeys=u,l.extractExceptionKeysForMessage=S,l.fill=s,l.getOriginalFunction=t,l.markFunctionWrapped=e,l.objectify=b,l.urlEncode=i},4764604189:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(o,c){let g=0;for(let S=o.length-1;S>=0;S--){const u=o[S];u==="."?o.splice(S,1):u===".."?(o.splice(S,1),g++):g&&(o.splice(S,1),g--)}if(c)for(;g--;g)o.unshift("..");return o}r(d,"normalizeArray");const f=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function h(o){const c=o.length>1024?`<truncated>${o.slice(-1024)}`:o,g=f.exec(c);return g?g.slice(1):[]}r(h,"splitPath");function p(...o){let c="",g=!1;for(let S=o.length-1;S>=-1&&!g;S--){const u=S>=0?o[S]:"/";u&&(c=`${u}/${c}`,g=u.charAt(0)==="/")}return c=d(c.split("/").filter(S=>!!S),!g).join("/"),(g?"/":"")+c||"."}r(p,"resolve");function m(o){let c=0;for(;c<o.length&&o[c]==="";c++);let g=o.length-1;for(;g>=0&&o[g]==="";g--);return c>g?[]:o.slice(c,g-c+1)}r(m,"trim");function a(o,c){o=p(o).slice(1),c=p(c).slice(1);const g=m(o.split("/")),S=m(c.split("/")),u=Math.min(g.length,S.length);let v=u;for(let b=0;b<u;b++)if(g[b]!==S[b]){v=b;break}let E=[];for(let b=v;b<g.length;b++)E.push("..");return E=E.concat(S.slice(v)),E.join("/")}r(a,"relative");function s(o){const c=n(o),g=o.slice(-1)==="/";let S=d(o.split("/").filter(u=>!!u),!c).join("/");return!S&&!c&&(S="."),S&&g&&(S+="/"),(c?"/":"")+S}r(s,"normalizePath");function n(o){return o.charAt(0)==="/"}r(n,"isAbsolute");function e(...o){return s(o.join("/"))}r(e,"join");function t(o){const c=h(o),g=c[0];let S=c[1];return!g&&!S?".":(S&&(S=S.slice(0,S.length-1)),g+S)}r(t,"dirname");function i(o,c){let g=h(o)[2];return c&&g.slice(c.length*-1)===c&&(g=g.slice(0,g.length-c.length)),g}r(i,"basename"),l.basename=i,l.dirname=t,l.isAbsolute=n,l.join=e,l.normalizePath=s,l.relative=a,l.resolve=p},3193811597:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(4759164024),h=d(2435760602);function p(m){const a=[];function s(){return m===void 0||a.length<m}r(s,"isReady");function n(i){return a.splice(a.indexOf(i),1)[0]}r(n,"remove");function e(i){if(!s())return h.rejectedSyncPromise(new f.SentryError("Not adding Promise because buffer limit was reached."));const o=i();return a.indexOf(o)===-1&&a.push(o),o.then(()=>n(o)).then(null,()=>n(o).then(null,()=>{})),o}r(e,"add");function t(i){return new h.SyncPromise((o,c)=>{let g=a.length;if(!g)return o(!0);const S=setTimeout(()=>{i&&i>0&&o(!1)},i);a.forEach(u=>{h.resolvedSyncPromise(u).then(()=>{--g||(clearTimeout(S),o(!0))},c)})})}return r(t,"drain"),{$:a,add:e,drain:t}}r(p,"makePromiseBuffer"),l.makePromiseBuffer=p},277240735:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=60*1e3;function f(a,s=Date.now()){const n=parseInt(`${a}`,10);if(!isNaN(n))return n*1e3;const e=Date.parse(`${a}`);return isNaN(e)?d:e-s}r(f,"parseRetryAfterHeader");function h(a,s){return a[s]||a.all||0}r(h,"disabledUntil");function p(a,s,n=Date.now()){return h(a,s)>n}r(p,"isRateLimited");function m(a,{statusCode:s,headers:n},e=Date.now()){const t={...a},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const c of i.trim().split(",")){const[g,S,,,u]=c.split(":",5),v=parseInt(g,10),E=(isNaN(v)?60:v)*1e3;if(!S)t.all=e+E;else for(const b of S.split(";"))b==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(t[b]=e+E):t[b]=e+E}else o?t.all=e+f(o,e):s===429&&(t.all=e+60*1e3);return t}r(m,"updateRateLimits"),l.DEFAULT_RETRY_AFTER=d,l.disabledUntil=h,l.isRateLimited=p,l.parseRetryAfterHeader=f,l.updateRateLimits=m},4846555271:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(9687986872),h=d(1795624184),p=d(5330804994),m=d(3610150206),a=d(6371465633),s=d(7216756807),n={ip:!1,request:!0,transaction:!0,user:!0},e=["cookies","data","headers","method","query_string","url"],t=["id","username","email"];function i(b,_={}){const C=b.method&&b.method.toUpperCase();let I="",A="url";_.customRoute||b.route?(I=_.customRoute||`${b.baseUrl||""}${b.route&&b.route.path}`,A="route"):(b.originalUrl||b.url)&&(I=s.stripUrlQueryAndFragment(b.originalUrl||b.url||""));let w="";return _.method&&C&&(w+=C),_.method&&_.path&&(w+=" "),_.path&&I&&(w+=I),[w,A]}r(i,"extractPathForTransaction");function o(b,_){switch(_){case"path":return i(b,{path:!0})[0];case"handler":return b.route&&b.route.stack&&b.route.stack[0]&&b.route.stack[0].name||"<anonymous>";case"methodPath":default:{const C=b._reconstructedRoute?b._reconstructedRoute:void 0;return i(b,{path:!0,method:!0,customRoute:C})[0]}}}r(o,"extractTransaction");function c(b,_){const C={};return(Array.isArray(_)?_:t).forEach(A=>{b&&A in b&&(C[A]=b[A])}),C}r(c,"extractUserData");function g(b,_){const{include:C=e}=_||{},I={},A=b.headers||{},w=b.method,O=A.host||b.hostname||b.host||"<no host>",R=b.protocol==="https"||b.socket&&b.socket.encrypted?"https":"http",F=b.originalUrl||b.url||"",V=F.startsWith(R)?F:`${R}://${O}${F}`;return C.forEach($=>{switch($){case"headers":{I.headers=A,C.includes("cookies")||delete I.headers.cookie;break}case"method":{I.method=w;break}case"url":{I.url=V;break}case"cookies":{I.cookies=b.cookies||A.cookie&&f.parseCookie(A.cookie)||{};break}case"query_string":{I.query_string=u(b);break}case"data":{if(w==="GET"||w==="HEAD")break;b.body!==void 0&&(I.data=p.isString(b.body)?b.body:JSON.stringify(a.normalize(b.body)));break}default:({}).hasOwnProperty.call(b,$)&&(I[$]=b[$])}}),I}r(g,"extractRequestData");function S(b,_,C){const I={...n,...C&&C.include};if(I.request){const A=Array.isArray(I.request)?g(_,{include:I.request}):g(_);b.request={...b.request,...A}}if(I.user){const A=_.user&&p.isPlainObject(_.user)?c(_.user,I.user):{};Object.keys(A).length&&(b.user={...b.user,...A})}if(I.ip){const A=_.ip||_.socket&&_.socket.remoteAddress;A&&(b.user={...b.user,ip_address:A})}return I.transaction&&!b.transaction&&b.type==="transaction"&&(b.transaction=o(_,I.transaction)),b}r(S,"addRequestDataToEvent");function u(b){let _=b.originalUrl||b.url||"";if(_){_.startsWith("/")&&(_=`http://dogs.are.great${_}`);try{const C=b.query||new URL(_).search.slice(1);return C.length?C:void 0}catch{return}}}r(u,"extractQueryParams");function v(b){const _={};try{b.forEach((C,I)=>{typeof C=="string"&&(_[I]=C)})}catch{h.DEBUG_BUILD&&m.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return _}r(v,"winterCGHeadersToDict");function E(b){const _=v(b.headers);return{method:b.method,url:b.url,headers:_}}r(E,"winterCGRequestToRequestData"),l.DEFAULT_USER_INCLUDES=t,l.addRequestDataToEvent=S,l.extractPathForTransaction=i,l.extractRequestData=g,l.winterCGHeadersToDict=v,l.winterCGRequestToRequestData=E},5043703765:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=["fatal","error","warning","log","info","debug"];function f(h){return h==="warn"?"warning":d.includes(h)?h:"log"}r(f,"severityLevelFromString"),l.severityLevelFromString=f,l.validSeverityLevels=d},9955566551:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=50,f="?",h=/\(error: (.*)\)/,p=/captureMessage|captureException/;function m(...t){const i=t.sort((o,c)=>o[0]-c[0]).map(o=>o[1]);return(o,c=0,g=0)=>{const S=[],u=o.split(`
`);for(let v=c;v<u.length;v++){const E=u[v];if(E.length>1024)continue;const b=h.test(E)?E.replace(h,"$1"):E;if(!b.match(/\S*Error: /)){for(const _ of i){const C=_(b);if(C){S.push(C);break}}if(S.length>=d+g)break}}return s(S.slice(g))}}r(m,"createStackParser");function a(t){return Array.isArray(t)?m(...t):t}r(a,"stackParserFromStackParserOptions");function s(t){if(!t.length)return[];const i=Array.from(t);return/sentryWrapped/.test(i[i.length-1].function||"")&&i.pop(),i.reverse(),p.test(i[i.length-1].function||"")&&(i.pop(),p.test(i[i.length-1].function||"")&&i.pop()),i.slice(0,d).map(o=>({...o,filename:o.filename||i[i.length-1].filename,function:o.function||f}))}r(s,"stripSentryFramesAndReverse");const n="<anonymous>";function e(t){try{return!t||typeof t!="function"?n:t.name||n}catch{return n}}r(e,"getFunctionName"),l.UNKNOWN_FUNCTION=f,l.createStackParser=m,l.getFunctionName=e,l.stackParserFromStackParserOptions=a,l.stripSentryFramesAndReverse=s},9996838991:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5330804994);function h(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.slice(0,e)}...`}r(h,"truncate");function p(n,e){let t=n;const i=t.length;if(i<=150)return t;e>i&&(e=i);let o=Math.max(e-60,0);o<5&&(o=0);let c=Math.min(o+140,i);return c>i-5&&(c=i),c===i&&(o=Math.max(c-140,0)),t=t.slice(o,c),o>0&&(t=`'{snip} ${t}`),c<i&&(t+=" {snip}"),t}r(p,"snipLine");function m(n,e){if(!Array.isArray(n))return"";const t=[];for(let i=0;i<n.length;i++){const o=n[i];try{f.isVueViewModel(o)?t.push("[VueViewModel]"):t.push(String(o))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}r(m,"safeJoin");function a(n,e,t=!1){return f.isString(n)?f.isRegExp(e)?e.test(n):f.isString(e)?t?n===e:n.includes(e):!1:!1}r(a,"isMatchingPattern");function s(n,e=[],t=!1){return e.some(i=>a(n,i,t))}r(s,"stringMatchesSomePattern"),l.isMatchingPattern=a,l.safeJoin=m,l.snipLine=p,l.stringMatchesSomePattern=s,l.truncate=h},8265793926:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1795624184),h=d(3610150206),m=d(1108286465).GLOBAL_OBJ;function a(){try{return new ErrorEvent(""),!0}catch{return!1}}r(a,"supportsErrorEvent");function s(){try{return new DOMError(""),!0}catch{return!1}}r(s,"supportsDOMError");function n(){try{return new DOMException(""),!0}catch{return!1}}r(n,"supportsDOMException");function e(){if(!("fetch"in m))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}r(e,"supportsFetch");function t(g){return g&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(g.toString())}r(t,"isNativeFetch");function i(){if(typeof EdgeRuntime=="string")return!0;if(!e())return!1;if(t(m.fetch))return!0;let g=!1;const S=m.document;if(S&&typeof S.createElement=="function")try{const u=S.createElement("iframe");u.hidden=!0,S.head.appendChild(u),u.contentWindow&&u.contentWindow.fetch&&(g=t(u.contentWindow.fetch)),S.head.removeChild(u)}catch(u){f.DEBUG_BUILD&&h.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",u)}return g}r(i,"supportsNativeFetch");function o(){return"ReportingObserver"in m}r(o,"supportsReportingObserver");function c(){if(!e())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}r(c,"supportsReferrerPolicy"),l.isNativeFetch=t,l.supportsDOMError=s,l.supportsDOMException=n,l.supportsErrorEvent=a,l.supportsFetch=e,l.supportsNativeFetch=i,l.supportsReferrerPolicy=c,l.supportsReportingObserver=o},2435760602:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(5330804994);var h;(function(s){s[s.PENDING=0]="PENDING";const e=1;s[s.RESOLVED=e]="RESOLVED";const t=2;s[s.REJECTED=t]="REJECTED"})(h||(h={}));function p(s){return new a(n=>{n(s)})}r(p,"resolvedSyncPromise");function m(s){return new a((n,e)=>{e(s)})}r(m,"rejectedSyncPromise");class a{constructor(n){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),this._state=h.PENDING,this._handlers=[];try{n(this._resolve,this._reject)}catch(e){this._reject(e)}}then(n,e){return new a((t,i)=>{this._handlers.push([!1,o=>{if(!n)t(o);else try{t(n(o))}catch(c){i(c)}},o=>{if(!e)i(o);else try{t(e(o))}catch(c){i(c)}}]),this._executeHandlers()})}catch(n){return this.then(e=>e,n)}finally(n){return new a((e,t)=>{let i,o;return this.then(c=>{o=!1,i=c,n&&n()},c=>{o=!0,i=c,n&&n()}).then(()=>{if(o){t(i);return}e(i)})})}__init(){this._resolve=n=>{this._setResult(h.RESOLVED,n)}}__init2(){this._reject=n=>{this._setResult(h.REJECTED,n)}}__init3(){this._setResult=(n,e)=>{if(this._state===h.PENDING){if(f.isThenable(e)){e.then(this._resolve,this._reject);return}this._state=n,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===h.PENDING)return;const n=this._handlers.slice();this._handlers=[],n.forEach(e=>{e[0]||(this._state===h.RESOLVED&&e[1](this._value),this._state===h.REJECTED&&e[2](this._value),e[0]=!0)})}}}r(a,"SyncPromise"),l.SyncPromise=a,l.rejectedSyncPromise=m,l.resolvedSyncPromise=p},2174399055:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(1108286465),h=1e3;function p(){return Date.now()/h}r(p,"dateTimestampInSeconds");function m(){const{performance:n}=f.GLOBAL_OBJ;if(!n||!n.now)return p;const e=Date.now()-n.now(),t=n.timeOrigin==null?e:n.timeOrigin;return()=>(t+n.now())/h}r(m,"createUnixTimestampInSecondsFunc");const a=m();l._browserPerformanceTimeOriginMode=void 0;const s=(()=>{const{performance:n}=f.GLOBAL_OBJ;if(!n||!n.now){l._browserPerformanceTimeOriginMode="none";return}const e=3600*1e3,t=n.now(),i=Date.now(),o=n.timeOrigin?Math.abs(n.timeOrigin+t-i):e,c=o<e,g=n.timing&&n.timing.navigationStart,u=typeof g=="number"?Math.abs(g+t-i):e,v=u<e;return c||v?o<=u?(l._browserPerformanceTimeOriginMode="timeOrigin",n.timeOrigin):(l._browserPerformanceTimeOriginMode="navigationStart",g):(l._browserPerformanceTimeOriginMode="dateNow",i)})();l.browserPerformanceTimeOrigin=s,l.dateTimestampInSeconds=p,l.timestampInSeconds=a},6123212092:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const f=d(8666696284),h=d(4360077466),p=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function m(n){if(!n)return;const e=n.match(p);if(!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}r(m,"extractTraceparentData");function a(n,e){const t=m(n),i=f.baggageHeaderToDynamicSamplingContext(e),{traceId:o,parentSpanId:c,parentSampled:g}=t||{};return t?{traceId:o||h.uuid4(),parentSpanId:c||h.uuid4().substring(16),spanId:h.uuid4().substring(16),sampled:g,dsc:i||{}}:{traceId:o||h.uuid4(),spanId:h.uuid4().substring(16)}}r(a,"propagationContextFromHeaders");function s(n=h.uuid4(),e=h.uuid4().substring(16),t){let i="";return t!==void 0&&(i=t?"-1":"-0"),`${n}-${e}${i}`}r(s,"generateSentryTraceHeader"),l.TRACEPARENT_REGEXP=p,l.extractTraceparentData=m,l.generateSentryTraceHeader=s,l.propagationContextFromHeaders=a},7216756807:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(m){if(!m)return{};const a=m.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!a)return{};const s=a[6]||"",n=a[8]||"";return{host:a[4],path:a[5],protocol:a[2],search:s,hash:n,relative:a[5]+s+n}}r(d,"parseUrl");function f(m){return m.split(/[\?#]/,1)[0]}r(f,"stripUrlQueryAndFragment");function h(m){return m.split(/\\?\//).filter(a=>a.length>0&&a!==",").length}r(h,"getNumberOfUrlSegments");function p(m){const{protocol:a,host:s,path:n}=m,e=s&&s.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${a?`${a}://`:""}${e}${n}`}r(p,"getSanitizedUrlString"),l.getNumberOfUrlSegments=h,l.getSanitizedUrlString=p,l.parseUrl=d,l.stripUrlQueryAndFragment=f},6250807085:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function d(f){return f.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}r(d,"escapeStringForRegex"),l.escapeStringForRegex=d},7384544743:(B,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0});const h=d(1108286465).GLOBAL_OBJ;function p(){const m=h.chrome,a=m&&m.app&&m.app.runtime,s="history"in h&&!!h.history.pushState&&!!h.history.replaceState;return!a&&s}r(p,"supportsHistory"),l.supportsHistory=p},1108286465:(B,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const d=globalThis;function f(h,p,m){const a=m||d,s=a.__SENTRY__=a.__SENTRY__||{};return s[h]||(s[h]=p())}r(f,"getGlobalSingleton"),l.GLOBAL_OBJ=d,l.getGlobalSingleton=f},2844658640:(B,l,d)=>{var f,h,p;B.exports=function(j){var a={},s={exports:a},n=j.AbortController,e=j.AbortSignal,t=j.addEventListener,i=j.alert,o=j.AnalyserNode,c=j.Animation,g=j.AnimationEffectReadOnly,S=j.AnimationEffectTiming,u=j.AnimationEffectTimingReadOnly,v=j.AnimationEvent,E=j.AnimationPlaybackEvent,b=j.AnimationTimeline,_=j.applicationCache,C=j.ApplicationCache,I=j.ApplicationCacheErrorEvent,A=j.atob,w=j.Attr,O=j.Audio,R=j.AudioBuffer,F=j.AudioBufferSourceNode,V=j.AudioContext,$=j.AudioDestinationNode,X=j.AudioListener,Y=j.AudioNode,ne=j.AudioParam,ie=j.AudioProcessingEvent,ge=j.AudioScheduledSourceNode,Ie=j.AudioWorkletGlobalScope,We=j.AudioWorkletNode,ct=j.AudioWorkletProcessor,Ae=j.BarProp,Fe=j.BaseAudioContext,Xe=j.BatteryManager,Ge=j.BeforeUnloadEvent,it=j.BiquadFilterNode,Dt=j.Blob,wt=j.BlobEvent,Pe=j.blur,xe=j.BroadcastChannel,et=j.btoa,rt=j.BudgetService,je=j.ByteLengthQueuingStrategy,Ft=j.Cache,Gt=j.CacheStorage,Xt=j.cancelAnimationFrame,sn=j.cancelIdleCallback,cn=j.CanvasCaptureMediaStreamTrack,Bt=j.CanvasGradient,gn=j.CanvasPattern,Ci=j.CanvasRenderingContext2D,$n=j.ChannelMergerNode,Sn=j.ChannelSplitterNode,nn=j.CharacterData,Vt=j.clearInterval,Wn=j.clearTimeout,Lt=j.clientInformation,zt=j.ClipboardEvent,It=j.close,z=j.closed,Ve=j.CloseEvent,He=j.Comment,Je=j.CompositionEvent,Ye=j.confirm,lt=j.console,le=j.ConstantSourceNode,Ue=j.ConvolverNode,G=j.CountQueuingStrategy,Q=j.createImageBitmap,ye=j.Credential,Ee=j.CredentialsContainer,pt=j.crypto,ze=j.Crypto,st=j.CryptoKey,me=j.CSS,Me=j.CSSConditionRule,k=j.CSSFontFaceRule,Se=j.CSSGroupingRule,be=j.CSSImportRule,we=j.CSSKeyframeRule,ee=j.CSSKeyframesRule,en=j.CSSMatrixComponent,dt=j.CSSMediaRule,Ct=j.CSSNamespaceRule,xn=j.CSSPageRule,Qt=j.CSSPerspective,Xi=j.CSSRotate,Pi=j.CSSRule,Kn=j.CSSRuleList,ni=j.CSSScale,Mn=j.CSSSkew,qn=j.CSSSkewX,bi=j.CSSSkewY,xr=j.CSSStyleDeclaration,Zt=j.CSSStyleRule,Nt=j.CSSStyleSheet,On=j.CSSSupportsRule,_n=j.CSSTransformValue,si=j.CSSTranslate,vi=j.CustomElementRegistry,Mi=j.customElements,ui=j.CustomEvent,Ii=j.DataTransfer,wi=j.DataTransferItem,Ui=j.DataTransferItemList,ii=j.defaultstatus,fr=j.defaultStatus,Li=j.DelayNode,Ar=j.DeviceMotionEvent,Zn=j.DeviceOrientationEvent,N=j.devicePixelRatio,oe=j.dispatchEvent,Re=j.document,nt=j.Document,Pt=j.DocumentFragment,En=j.DocumentType,wn=j.DOMError,vn=j.DOMException,yn=j.DOMImplementation,Rn=j.DOMMatrix,Fn=j.DOMMatrixReadOnly,yi=j.DOMParser,fi=j.DOMPoint,Wi=j.DOMPointReadOnly,Zr=j.DOMQuad,gr=j.DOMRect,Un=j.DOMRectList,hr=j.DOMRectReadOnly,ar=j.DOMStringList,pn=j.DOMStringMap,Sr=j.DOMTokenList,Pn=j.DragEvent,so=j.DynamicsCompressorNode,Wr=j.Element,$r=j.ErrorEvent,yo=j.event,ue=j.Event,ve=j.EventSource,Le=j.EventTarget,at=j.external,gt=j.fetch,Tt=j.File,rn=j.FileList,bn=j.FileReader,Tn=j.find,ln=j.focus,Vn=j.FocusEvent,Ut=j.FontFace,hi=j.FontFaceSetLoadEvent,An=j.FormData,Fi=j.frameElement,Qi=j.frames,Zi=j.GainNode,Hn=j.Gamepad,Jn=j.GamepadButton,ai=j.GamepadEvent,Ri=j.getComputedStyle,Cr=j.getSelection,Ur=j.HashChangeEvent,li=j.Headers,Kr=j.history,Ji=j.History,Or=j.HTMLAllCollection,xo=j.HTMLAnchorElement,Go=j.HTMLAreaElement,Po=j.HTMLAudioElement,ko=j.HTMLBaseElement,Uo=j.HTMLBodyElement,To=j.HTMLBRElement,Jr=j.HTMLButtonElement,ao=j.HTMLCanvasElement,Io=j.HTMLCollection,Gr=j.HTMLContentElement,lo=j.HTMLDataElement,vr=j.HTMLDataListElement,co=j.HTMLDetailsElement,ws=j.HTMLDialogElement,Ds=j.HTMLDirectoryElement,Yr=j.HTMLDivElement,Co=j.HTMLDListElement,pr=j.HTMLDocument,Mr=j.HTMLElement,wr=j.HTMLEmbedElement,jr=j.HTMLFieldSetElement,Vr=j.HTMLFontElement,rs=j.HTMLFormControlsCollection,q=j.HTMLFormElement,re=j.HTMLFrameElement,he=j.HTMLFrameSetElement,Te=j.HTMLHeadElement,ke=j.HTMLHeadingElement,ot=j.HTMLHRElement,Ze=j.HTMLHtmlElement,Mt=j.HTMLIFrameElement,Rt=j.HTMLImageElement,xt=j.HTMLInputElement,kt=j.HTMLLabelElement,Jt=j.HTMLLegendElement,Yt=j.HTMLLIElement,tn=j.HTMLLinkElement,mn=j.HTMLMapElement,hn=j.HTMLMarqueeElement,an=j.HTMLMediaElement,$t=j.HTMLMenuElement,Bn=j.HTMLMetaElement,Ei=j.HTMLMeterElement,Bi=j.HTMLModElement,qi=j.HTMLObjectElement,Et=j.HTMLOListElement,Vi=j.HTMLOptGroupElement,Hi=j.HTMLOptionElement,Ti=j.HTMLOptionsCollection,Rr=j.HTMLOutputElement,uo=j.HTMLParagraphElement,Ir=j.HTMLParamElement,qr=j.HTMLPictureElement,eo=j.HTMLPreElement,Vs=j.HTMLProgressElement,Hs=j.HTMLQuoteElement,Pr=j.HTMLScriptElement,ps=j.HTMLSelectElement,Ws=j.HTMLShadowElement,os=j.HTMLSlotElement,Jo=j.HTMLSourceElement,As=j.HTMLSpanElement,ms=j.HTMLStyleElement,No=j.HTMLTableCaptionElement,Yo=j.HTMLTableCellElement,wo=j.HTMLTableColElement,Gs=j.HTMLTableElement,Ld=j.HTMLTableRowElement,oa=j.HTMLTableSectionElement,Do=j.HTMLTemplateElement,Gn=j.HTMLTextAreaElement,ss=j.HTMLTimeElement,Yn=j.HTMLTitleElement,ma=j.HTMLTrackElement,Os=j.HTMLUListElement,ga=j.HTMLUnknownElement,kr=j.HTMLVideoElement,Tl=j.IDBCursor,js=j.IDBCursorWithValue,zs=j.IDBDatabase,sa=j.IDBFactory,aa=j.IDBIndex,la=j.IDBKeyRange,Xo=j.IDBObjectStore,gs=j.IDBOpenDBRequest,xa=j.IDBRequest,jn=j.IDBTransaction,ki=j.IDBVersionChangeEvent,on=j.IdleDeadline,Cl=j.IIRFilterNode,Ua=j.Image,Va=j.ImageBitmap,Fd=j.ImageBitmapRenderingContext,Ha=j.ImageCapture,Qo=j.ImageData,Il=j.indexedDB,$s=j.innerHeight,Bd=j.innerWidth,wl=j.InputEvent,Wa=j.IntersectionObserver,Ga=j.IntersectionObserverEntry,Sa=j.Intl,mt=j.isSecureContext,At=j.KeyboardEvent,jt=j.KeyframeEffect,Cn=j.KeyframeEffectReadOnly,zn=j.length,Di=j.localStorage,pi=j.location,mi=j.Location,di=j.locationbar,er=j.matchMedia,Hr=j.MediaDeviceInfo,xi=j.MediaDevices,Er=j.MediaElementAudioSourceNode,fo=j.MediaEncryptedEvent,Ao=j.MediaError,ho=j.MediaKeyMessageEvent,Nr=j.MediaKeySession,Ss=j.MediaKeyStatusMap,Ms=j.MediaKeySystemAccess,Zo=j.MediaList,as=j.MediaMetadata,Ks=j.MediaQueryList,Rs=j.MediaQueryListEvent,va=j.MediaRecorder,Ps=j.MediaSettingsRange,Oo=j.MediaSource,rr=j.MediaStream,mr=j.MediaStreamAudioDestinationNode,Xr=j.MediaStreamAudioSourceNode,vs=j.MediaStreamEvent,jo=j.MediaStreamTrack,gc=j.MediaStreamTrackEvent,Sc=j.menubar,vc=j.MessageChannel,yc=j.MessageEvent,Ec=j.MessagePort,bc=j.MIDIAccess,_c=j.MIDIConnectionEvent,Tc=j.MIDIInput,Cc=j.MIDIInputMap,Ou=j.MIDIMessageEvent,Ic=j.MIDIOutput,Yi=j.MIDIOutputMap,Dl=j.MIDIPort,ya=j.MimeType,Al=j.MimeTypeArray,Ht=j.MouseEvent,Mu=j.moveBy,Dn=j.moveTo,wc=j.MutationEvent,ja=j.MutationObserver,Ol=j.MutationRecord,xd=j.name,Ml=j.NamedNodeMap,Dc=j.NavigationPreloadManager,Ru=j.navigator,ls=j.Navigator,Xn=j.NetworkInformation,Ac=j.Node,Oc=j.NodeFilter,Ud=j.NodeIterator,Mc=j.NodeList,Vd=j.Notification,Hd=j.OfflineAudioCompletionEvent,Ea=j.OfflineAudioContext,Rc=j.offscreenBuffering,Wd=j.OffscreenCanvas,Pc=j.OffscreenCanvasRenderingContext2D,P=j.onabort,x=j.onafterprint,W=j.onanimationend,Z=j.onanimationiteration,ce=j.onanimationstart,De=j.onappinstalled,$e=j.onauxclick,ut=j.onbeforeinstallprompt,tt=j.onbeforeprint,Ot=j.onbeforeunload,vt=j.onblur,Wt=j.oncancel,qt=j.oncanplay,fn=j.oncanplaythrough,In=j.onchange,Qn=j.onclick,Oi=j.onclose,ri=j.oncontextmenu,Gi=j.oncuechange,lr=j.ondblclick,dr=j.ondevicemotion,Lr=j.ondeviceorientation,Ni=j.ondeviceorientationabsolute,ei=j.ondrag,tr=j.ondragend,zr=j.ondragenter,ti=j.ondragleave,ji=j.ondragover,Dr=j.ondragstart,to=j.ondrop,po=j.ondurationchange,Mo=j.onemptied,br=j.onended,Lo=j.onerror,mo=j.onfocus,qo=j.ongotpointercapture,ys=j.onhashchange,kc=j.oninput,Rl=j.oninvalid,Pl=j.onkeydown,ba=j.onkeypress,Gd=j.onkeyup,kl=j.onlanguagechange,Nl=j.onload,jd=j.onloadeddata,_a=j.onloadedmetadata,zd=j.onloadstart,da=j.onlostpointercapture,za=j.onmessage,Es=j.onmessageerror,Js=j.onmousedown,$d=j.onmouseenter,Ll=j.onmouseleave,Ta=j.onmousemove,Fl=j.onmouseout,cr=j.onmouseover,Vo=j.onmouseup,or=j.onmousewheel,Fr=j.onoffline,ur=j.ononline,ds=j.onpagehide,Kd=j.onpageshow,Kh=j.onpause,VS=j.onplay,HS=j.onplaying,Jh=j.onpointercancel,Pu=j.onpointerdown,Yh=j.onpointerenter,Xh=j.onpointerleave,Nc=j.onpointermove,Jd=j.onpointerout,ku=j.onpointerover,Qh=j.onpointerup,WS=j.onpopstate,Zh=j.onprogress,qh=j.onratechange,ep=j.onrejectionhandled,tp=j.onreset,np=j.onresize,_i=j.onscroll,ip=j.onsearch,rp=j.onseeked,op=j.onseeking,sp=j.onselect,Bl=j.onstalled,Lc=j.onstorage,Nu=j.onsubmit,Lu=j.onsuspend,ap=j.ontimeupdate,lp=j.ontoggle,Yd=j.ontransitionend,dp=j.onunhandledrejection,Fc=j.onunload,cp=j.onvolumechange,Bc=j.onwaiting,up=j.onwheel,fp=j.open,hp=j.openDatabase,GS=j.opener,jS=j.Option,zS=j.origin,$S=j.OscillatorNode,pp=j.outerHeight,Fu=j.outerWidth,Bu=j.OverconstrainedError,xc=j.PageTransitionEvent,mp=j.pageXOffset,Uc=j.pageYOffset,xu=j.PannerNode,gp=j.parent,Sp=j.Path2D,vp=j.PaymentAddress,xl=j.PaymentRequest,yp=j.PaymentRequestUpdateEvent,Ep=j.PaymentResponse,bp=j.performance,_p=j.Performance,Tp=j.PerformanceEntry,Cp=j.PerformanceLongTaskTiming,Ip=j.PerformanceMark,wp=j.PerformanceMeasure,Dp=j.PerformanceNavigation,Ap=j.PerformanceNavigationTiming,Op=j.PerformanceObserver,Mp=j.PerformanceObserverEntryList,Rp=j.PerformancePaintTiming,KS=j.PerformanceResourceTiming,cs=j.PerformanceTiming,Pp=j.PeriodicWave,kp=j.Permissions,Np=j.PermissionStatus,Lp=j.personalbar,Xd=j.PhotoCapabilities,Fp=j.Plugin,Bp=j.PluginArray,xp=j.PointerEvent,Up=j.PopStateEvent,Vp=j.postMessage,Uu=j.Presentation,JS=j.PresentationAvailability,Hp=j.PresentationConnection,Wp=j.PresentationConnectionAvailableEvent,Vu=j.PresentationConnectionCloseEvent,Gp=j.PresentationConnectionList,jp=j.PresentationReceiver,Hu=j.PresentationRequest,zp=j.print,Wu=j.ProcessingInstruction,Vc=j.ProgressEvent,Gu=j.PromiseRejectionEvent,$p=j.prompt,ju=j.PushManager,Ul=j.PushSubscription,Kp=j.PushSubscriptionOptions,zu=j.queueMicrotask,YS=j.RadioNodeList,$u=j.Range,ks=j.ReadableStream,Ns=j.registerProcessor,$a=j.RemotePlayback,Ku=j.removeEventListener,Ju=j.Request,Vl=j.requestAnimationFrame,Ka=j.requestIdleCallback,Hl=j.resizeBy,Ys=j.ResizeObserver,Hc=j.ResizeObserverEntry,Yu=j.resizeTo,Xu=j.Response,Qu=j.RTCCertificate,Zu=j.RTCDataChannel,qu=j.RTCDataChannelEvent,Ls=j.RTCDtlsTransport,ef=j.RTCIceCandidate,tf=j.RTCIceGatherer,nf=j.RTCIceTransport,rf=j.RTCPeerConnection,of=j.RTCPeerConnectionIceEvent,XS=j.RTCRtpContributingSource,Jp=j.RTCRtpReceiver,Yp=j.RTCRtpSender,Xp=j.RTCSctpTransport,Qp=j.RTCSessionDescription,Wl=j.RTCStatsReport,Wc=j.RTCTrackEvent,Gc=j.screen,QS=j.Screen,Zp=j.screenLeft,qp=j.ScreenOrientation,em=j.screenTop,tm=j.screenX,nm=j.screenY,im=j.ScriptProcessorNode,rm=j.scroll,om=j.scrollbars,sm=j.scrollBy,ZS=j.scrollTo,qS=j.scrollX,am=j.scrollY,lm=j.SecurityPolicyViolationEvent,Qd=j.Selection,Gl=j.self,zo=j.ServiceWorker,dm=j.ServiceWorkerContainer,zi=j.ServiceWorkerRegistration,cm=j.sessionStorage,um=j.setInterval,Ho=j.setTimeout,fm=j.ShadowRoot,hm=j.SharedWorker,pm=j.SourceBuffer,jl=j.SourceBufferList,zl=j.speechSynthesis,$l=j.SpeechSynthesisEvent,Kl=j.SpeechSynthesisUtterance,Jl=j.StaticRange,Yl=j.status,Xl=j.statusbar,Ql=j.StereoPannerNode,Zl=j.stop,mm=j.Storage,gm=j.StorageEvent,Sm=j.StorageManager,vm=j.styleMedia,ym=j.StyleSheet,Em=j.StyleSheetList,bm=j.SubtleCrypto,_m=j.SVGAElement,Tm=j.SVGAngle,Cm=j.SVGAnimatedAngle,Im=j.SVGAnimatedBoolean,wm=j.SVGAnimatedEnumeration,Dm=j.SVGAnimatedInteger,go=j.SVGAnimatedLength,sf=j.SVGAnimatedLengthList,af=j.SVGAnimatedNumber,lf=j.SVGAnimatedNumberList,df=j.SVGAnimatedPreserveAspectRatio,cf=j.SVGAnimatedRect,uf=j.SVGAnimatedString,ql=j.SVGAnimatedTransformList,ff=j.SVGAnimateElement,ed=j.SVGAnimateMotionElement,jc=j.SVGAnimateTransformElement,hf=j.SVGAnimationElement,pf=j.SVGCircleElement,mf=j.SVGClipPathElement,gf=j.SVGComponentTransferFunctionElement,td=j.SVGDefsElement,zc=j.SVGDescElement,Sf=j.SVGDiscardElement,Zd=j.SVGElement,vf=j.SVGEllipseElement,yf=j.SVGFEBlendElement,Ef=j.SVGFEColorMatrixElement,$c=j.SVGFEComponentTransferElement,bf=j.SVGFECompositeElement,_f=j.SVGFEConvolveMatrixElement,nd=j.SVGFEDiffuseLightingElement,Tf=j.SVGFEDisplacementMapElement,Cf=j.SVGFEDistantLightElement,If=j.SVGFEDropShadowElement,wf=j.SVGFEFloodElement,Df=j.SVGFEFuncAElement,Af=j.SVGFEFuncBElement,Of=j.SVGFEFuncGElement,Mf=j.SVGFEFuncRElement,Rf=j.SVGFEGaussianBlurElement,Pf=j.SVGFEImageElement,kf=j.SVGFEMergeElement,Nf=j.SVGFEMergeNodeElement,Lf=j.SVGFEMorphologyElement,Ff=j.SVGFEOffsetElement,Bf=j.SVGFEPointLightElement,xf=j.SVGFESpecularLightingElement,Uf=j.SVGFESpotLightElement,Vf=j.SVGFETileElement,Hf=j.SVGFETurbulenceElement,Wf=j.SVGFilterElement,Gf=j.SVGForeignObjectElement,jf=j.SVGGElement,zf=j.SVGGeometryElement,$f=j.SVGGradientElement,Kf=j.SVGGraphicsElement,Jf=j.SVGImageElement,Yf=j.SVGLength,Xf=j.SVGLengthList,Qf=j.SVGLinearGradientElement,Zf=j.SVGLineElement,qf=j.SVGMarkerElement,eh=j.SVGMaskElement,th=j.SVGMatrix,nh=j.SVGMetadataElement,ih=j.SVGMPathElement,rh=j.SVGNumber,oh=j.SVGNumberList,sh=j.SVGPathElement,ah=j.SVGPatternElement,lh=j.SVGPoint,dh=j.SVGPointList,ch=j.SVGPolygonElement,uh=j.SVGPolylineElement,fh=j.SVGPreserveAspectRatio,hh=j.SVGRadialGradientElement,Am=j.SVGRect,Om=j.SVGRectElement,Mm=j.SVGScriptElement,Rm=j.SVGSetElement,Pm=j.SVGStopElement,km=j.SVGStringList,Nm=j.SVGStyleElement,Lm=j.SVGSVGElement,Fm=j.SVGSwitchElement,Bm=j.SVGSymbolElement,xm=j.SVGTextContentElement,Um=j.SVGTextElement,Vm=j.SVGTextPathElement,Hm=j.SVGTextPositioningElement,Wm=j.SVGTitleElement,Gm=j.SVGTransform,jm=j.SVGTransformList,zm=j.SVGTSpanElement,$m=j.SVGUnitTypes,Km=j.SVGUseElement,Jm=j.SVGViewElement,Ym=j.TaskAttributionTiming,Xm=j.Text,Qm=j.TextDecoder,Zm=j.TextEncoder,qm=j.TextEvent,eg=j.TextMetrics,tg=j.TextTrack,ng=j.TextTrackCue,ig=j.TextTrackCueList,rg=j.TextTrackList,og=j.TimeRanges,sg=j.toolbar,ag=j.top,lg=j.Touch,dg=j.TouchEvent,cg=j.TouchList,ug=j.TrackEvent,fg=j.TransitionEvent,hg=j.TreeWalker,ph=j.trustedTypes,pg=j.UIEvent,mg=j.URL,gg=j.URLSearchParams,Sg=j.ValidityState,vg=j.visualViewport,yg=j.VisualViewport,Eg=j.VTTCue,bg=j.WaveShaperNode,_g=j.WebAssembly,Tg=j.WebGL2RenderingContext,Cg=j.WebGLActiveInfo,Ig=j.WebGLBuffer,wg=j.WebGLContextEvent,Dg=j.WebGLFramebuffer,Ag=j.WebGLProgram,Og=j.WebGLQuery,Mg=j.WebGLRenderbuffer,Rg=j.WebGLRenderingContext,Pg=j.WebGLSampler,kg=j.WebGLShader,Ng=j.WebGLShaderPrecisionFormat,Lg=j.WebGLSync,Fg=j.WebGLTexture,Bg=j.WebGLTransformFeedback,xg=j.WebGLUniformLocation,Ug=j.WebGLVertexArrayObject,Vg=j.WebSocket,Hg=j.WheelEvent,j=j.window,Wg=j.Window,Gg=j.Worker,jg=j.WritableStream,zg=j.XMLDocument,$g=j.XMLHttpRequest,Kg=j.XMLHttpRequestEventTarget,Jg=j.XMLHttpRequestUpload,Yg=j.XMLSerializer,Xg=j.XPathEvaluator,Qg=j.XPathExpression,Zg=j.XPathResult,qg=j.XSLTProcessor;return function(_r,ci){typeof a=="object"&&typeof s<"u"?ci(a,d(3134334389),d(4332857818)):(h=[a,d(3134334389),d(4332857818)],f=ci,p=typeof f=="function"?f.apply(a,h):f,p!==void 0&&(s.exports=p))}(this,function(_r,ci,qd){"use strict";var Kc=r(()=>'<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',"resizeTriggersHtml");function Qr(te,L){if(!(te instanceof L))throw new TypeError("Cannot call a class as a function")}r(Qr,"_classCallCheck");function Jc(te,L){for(var U=0;U<L.length;U++){var K=L[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(te,K.key,K)}}r(Jc,"_defineProperties");function no(te,L,U){return L&&Jc(te.prototype,L),U&&Jc(te,U),te}r(no,"_createClass");function bt(te,L,U){return L in te?Object.defineProperty(te,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):te[L]=U,te}r(bt,"_defineProperty");function us(){return(us=Object.assign||function(te){for(var L=1;L<arguments.length;L++){var U=arguments[L];for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(te[K]=U[K])}return te}).apply(this,arguments)}r(us,"_extends");function Yc(te,L){var U=Object.keys(te);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(te);L&&(K=K.filter(function(se){return Object.getOwnPropertyDescriptor(te,se).enumerable})),U.push.apply(U,K)}return U}r(Yc,"ownKeys");function sr(te){for(var L=1;L<arguments.length;L++){var U=arguments[L]!=null?arguments[L]:{};L%2?Yc(U,!0).forEach(function(K){bt(te,K,U[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(U)):Yc(U).forEach(function(K){Object.defineProperty(te,K,Object.getOwnPropertyDescriptor(U,K))})}return te}r(sr,"_objectSpread2");function Fo(te,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(L&&L.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),L&&Xc(te,L)}r(Fo,"_inherits");function Ro(te){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(te)}r(Ro,"_getPrototypeOf");function Xc(te,L){return(Xc=Object.setPrototypeOf||function(U,K){return U.__proto__=K,U})(te,L)}r(Xc,"_setPrototypeOf");function Ja(te,L){if(te==null)return{};var U,K,se=function(ae,Ce){if(ae==null)return{};var Be,Ne,Ke={},ft=Object.keys(ae);for(Ne=0;Ne<ft.length;Ne++)Be=ft[Ne],0<=Ce.indexOf(Be)||(Ke[Be]=ae[Be]);return Ke}(te,L);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(te);for(K=0;K<fe.length;K++)U=fe[K],0<=L.indexOf(U)||Object.prototype.propertyIsEnumerable.call(te,U)&&(se[U]=te[U])}return se}r(Ja,"_objectWithoutProperties");function Kt(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}r(Kt,"_assertThisInitialized");function Bo(te,L){return!L||typeof L!="object"&&typeof L!="function"?Kt(te):L}r(Bo,"_possibleConstructorReturn");function mh(te,L){return function(U){if(Array.isArray(U))return U}(te)||function(U,K){if(Symbol.iterator in Object(U)||Object.prototype.toString.call(U)==="[object Arguments]"){var se=[],fe=!0,ae=!1,Ce=void 0;try{for(var Be,Ne=U[Symbol.iterator]();!(fe=(Be=Ne.next()).done)&&(se.push(Be.value),!K||se.length!==K);fe=!0);}catch(Ke){ae=!0,Ce=Ke}finally{try{fe||Ne.return==null||Ne.return()}finally{if(ae)throw Ce}}return se}}(te,L)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r(mh,"_slicedToArray");function gh(te){return function(L){if(Array.isArray(L)){for(var U=0,K=new Array(L.length);U<L.length;U++)K[U]=L[U];return K}}(te)||function(L){if(Symbol.iterator in Object(L)||Object.prototype.toString.call(L)==="[object Arguments]")return Array.from(L)}(te)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r(gh,"_toConsumableArray");function Qc(){var te=this.constructor.getDerivedStateFromProps(this.props,this.state);te!=null&&this.setState(te)}r(Qc,"componentWillMount");function gi(te){this.setState(function(L){var U=this.constructor.getDerivedStateFromProps(te,L);return U??null}.bind(this))}r(gi,"componentWillReceiveProps");function Zc(te,L){try{var U=this.props,K=this.state;this.props=te,this.state=L,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(U,K)}finally{this.props=U,this.state=K}}r(Zc,"componentWillUpdate");function Ya(te){var L=te.prototype;if(!L||!L.isReactComponent)throw new Error("Can only polyfill class components");if(typeof te.getDerivedStateFromProps!="function"&&typeof L.getSnapshotBeforeUpdate!="function")return te;var U=null,K=null,se=null;if(typeof L.componentWillMount=="function"?U="componentWillMount":typeof L.UNSAFE_componentWillMount=="function"&&(U="UNSAFE_componentWillMount"),typeof L.componentWillReceiveProps=="function"?K="componentWillReceiveProps":typeof L.UNSAFE_componentWillReceiveProps=="function"&&(K="UNSAFE_componentWillReceiveProps"),typeof L.componentWillUpdate=="function"?se="componentWillUpdate":typeof L.UNSAFE_componentWillUpdate=="function"&&(se="UNSAFE_componentWillUpdate"),U!==null||K!==null||se!==null){var fe=te.displayName||te.name,ae=typeof te.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+fe+" uses "+ae+" but also contains the following legacy lifecycles:"+(U!==null?`
  `+U:"")+(K!==null?`
  `+K:"")+(se!==null?`
  `+se:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof te.getDerivedStateFromProps=="function"&&(L.componentWillMount=Qc,L.componentWillReceiveProps=gi),typeof L.getSnapshotBeforeUpdate=="function"){if(typeof L.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");L.componentWillUpdate=Zc;var Ce=L.componentDidUpdate;L.componentDidUpdate=function(Be,Ne,Ke){var ft=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Ke;Ce.call(this,Be,Ne,ft)}}return te}r(Ya,"polyfill"),Zc.__suppressDeprecationWarning=gi.__suppressDeprecationWarning=Qc.__suppressDeprecationWarning=!0;var ec=function(){function te(){var L,U;Qr(this,te);for(var K=arguments.length,se=new Array(K),fe=0;fe<K;fe++)se[fe]=arguments[fe];return bt(Kt(U=Bo(this,(L=Ro(te)).call.apply(L,[this].concat(se)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),bt(Kt(U),"_columnStartIndex",0),bt(Kt(U),"_columnStopIndex",0),bt(Kt(U),"_rowStartIndex",0),bt(Kt(U),"_rowStopIndex",0),bt(Kt(U),"_onKeyDown",function(ae){var Ce=U.props,Be=Ce.columnCount,Ne=Ce.disabled,Ke=Ce.mode,ft=Ce.rowCount;if(!Ne){var yt=U._getScrollState(),y=yt.scrollToColumn,T=yt.scrollToRow,D=U._getScrollState(),M=D.scrollToColumn,H=D.scrollToRow;switch(ae.key){case"ArrowDown":H=Math.min(Ke==="cells"?H+1:U._rowStopIndex+1,ft-1);break;case"ArrowLeft":M=Math.max(Ke==="cells"?M-1:U._columnStartIndex-1,0);break;case"ArrowRight":M=Math.min(Ke==="cells"?M+1:U._columnStopIndex+1,Be-1);break;case"ArrowUp":H=Math.max(Ke==="cells"?H-1:U._rowStartIndex-1,0)}M===y&&H===T||(ae.preventDefault(),U._updateScrollState({scrollToColumn:M,scrollToRow:H}))}}),bt(Kt(U),"_onSectionRendered",function(ae){var Ce=ae.columnStartIndex,Be=ae.columnStopIndex,Ne=ae.rowStartIndex,Ke=ae.rowStopIndex;U._columnStartIndex=Ce,U._columnStopIndex=Be,U._rowStartIndex=Ne,U._rowStopIndex=Ke}),U}return r(te,"ArrowKeyStepper"),Fo(te,ci.PureComponent),no(te,[{key:"setScrollIndexes",value:function(L){var U=L.scrollToColumn,K=L.scrollToRow;this.setState({scrollToRow:K,scrollToColumn:U})}},{key:"render",value:function(){var L=this.props,U=L.className,K=L.children,se=this._getScrollState(),fe=se.scrollToColumn,ae=se.scrollToRow;return ci.createElement("div",{className:U,onKeyDown:this._onKeyDown},K({onSectionRendered:this._onSectionRendered,scrollToColumn:fe,scrollToRow:ae}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(L){var U=L.scrollToColumn,K=L.scrollToRow,se=this.props,fe=se.isControlled,ae=se.onScrollToChange;typeof ae=="function"&&ae({scrollToColumn:U,scrollToRow:K}),fe||this.setState({scrollToColumn:U,scrollToRow:K})}}],[{key:"getDerivedStateFromProps",value:function(L,U){return L.isControlled?{}:L.scrollToColumn!==U.instanceProps.prevScrollToColumn||L.scrollToRow!==U.instanceProps.prevScrollToRow?sr({},U,{scrollToColumn:L.scrollToColumn,scrollToRow:L.scrollToRow,instanceProps:{prevScrollToColumn:L.scrollToColumn,prevScrollToRow:L.scrollToRow}}):{}}}]),te}();function qc(te,L){var U,K,se,fe=(U=L!==void 0?L:typeof j<"u"?j:typeof Gl<"u"?Gl:d.g).document!==void 0&&U.document.attachEvent;if(!fe){var ae=(se=U.requestAnimationFrame||U.mozRequestAnimationFrame||U.webkitRequestAnimationFrame||function(pe){return U.setTimeout(pe,20)},function(pe){return se(pe)}),Ce=(K=U.cancelAnimationFrame||U.mozCancelAnimationFrame||U.webkitCancelAnimationFrame||U.clearTimeout,function(pe){return K(pe)}),Be=r(function(pe){var Oe=pe.__resizeTriggers__,_e=Oe.firstElementChild,Qe=Oe.lastElementChild,qe=_e.firstElementChild;Qe.scrollLeft=Qe.scrollWidth,Qe.scrollTop=Qe.scrollHeight,qe.style.width=_e.offsetWidth+1+"px",qe.style.height=_e.offsetHeight+1+"px",_e.scrollLeft=_e.scrollWidth,_e.scrollTop=_e.scrollHeight},"resetTriggers"),Ne=r(function(pe){if(!(pe.target.className&&typeof pe.target.className.indexOf=="function"&&pe.target.className.indexOf("contract-trigger")<0&&pe.target.className.indexOf("expand-trigger")<0)){var Oe=this;Be(this),this.__resizeRAF__&&Ce(this.__resizeRAF__),this.__resizeRAF__=ae(function(){!function(_e){return _e.offsetWidth!=_e.__resizeLast__.width||_e.offsetHeight!=_e.__resizeLast__.height}(Oe)||(Oe.__resizeLast__.width=Oe.offsetWidth,Oe.__resizeLast__.height=Oe.offsetHeight,Oe.__resizeListeners__.forEach(function(_e){_e.call(Oe,pe)}))})}},"scrollListener"),Ke=!1,ft="",yt="animationstart",y="Webkit Moz O ms".split(" "),T="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),D=U.document.createElement("fakeelement");if(D.style.animationName!==void 0&&(Ke=!0),Ke===!1){for(var M=0;M<y.length;M++)if(D.style[y[M]+"AnimationName"]!==void 0){ft="-"+y[M].toLowerCase()+"-",yt=T[M],Ke=!0;break}}var H="resizeanim",J="@"+ft+"keyframes "+H+" { from { opacity: 0; } to { opacity: 0; } } ",de=ft+"animation: 1ms "+H+"; "}return{addResizeListener:function(pe,Oe){if(fe)pe.attachEvent("onresize",Oe);else{if(!pe.__resizeTriggers__){var _e=pe.ownerDocument,Qe=U.getComputedStyle(pe);if(Qe&&Qe.position=="static"&&(pe.style.position="relative"),function(St){if(!St.getElementById("detectElementResize")){var _t=(J||"")+".resize-triggers { "+(de||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',dn=St.head||St.getElementsByTagName("head")[0],kn=St.createElement("style");kn.id="detectElementResize",kn.type="text/css",te!=null&&kn.setAttribute("nonce",te),kn.styleSheet?kn.styleSheet.cssText=_t:kn.appendChild(St.createTextNode(_t)),dn.appendChild(kn)}}(_e),pe.__resizeLast__={},pe.__resizeListeners__=[],(pe.__resizeTriggers__=_e.createElement("div")).className="resize-triggers",j.trustedTypes){var qe=ph.createPolicy("react-virtualized-auto-sizer",{createHTML:Kc});pe.__resizeTriggers__.innerHTML=qe.createHTML("")}else pe.__resizeTriggers__.innerHTML=Kc();pe.appendChild(pe.__resizeTriggers__),Be(pe),pe.addEventListener("scroll",Ne,!0),yt&&(pe.__resizeTriggers__.__animationListener__=function(St){St.animationName==H&&Be(pe)},pe.__resizeTriggers__.addEventListener(yt,pe.__resizeTriggers__.__animationListener__))}pe.__resizeListeners__.push(Oe)}},removeResizeListener:function(pe,Oe){if(fe)pe.detachEvent("onresize",Oe);else if(pe.__resizeListeners__.splice(pe.__resizeListeners__.indexOf(Oe),1),!pe.__resizeListeners__.length){pe.removeEventListener("scroll",Ne,!0),pe.__resizeTriggers__.__animationListener__&&(pe.__resizeTriggers__.removeEventListener(yt,pe.__resizeTriggers__.__animationListener__),pe.__resizeTriggers__.__animationListener__=null);try{pe.__resizeTriggers__=!pe.removeChild(pe.__resizeTriggers__)}catch{}}}}}r(qc,"createDetectElementResize"),bt(ec,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),Ya(ec);var eu=function(){function te(){var L,U;Qr(this,te);for(var K=arguments.length,se=new Array(K),fe=0;fe<K;fe++)se[fe]=arguments[fe];return bt(Kt(U=Bo(this,(L=Ro(te)).call.apply(L,[this].concat(se)))),"state",{height:U.props.defaultHeight||0,width:U.props.defaultWidth||0}),bt(Kt(U),"_parentNode",void 0),bt(Kt(U),"_autoSizer",void 0),bt(Kt(U),"_window",void 0),bt(Kt(U),"_detectElementResize",void 0),bt(Kt(U),"_onResize",function(){var ae=U.props,Ce=ae.disableHeight,Be=ae.disableWidth,Ne=ae.onResize;if(U._parentNode){var Ke=U._parentNode.offsetHeight||0,ft=U._parentNode.offsetWidth||0,yt=(U._window||j).getComputedStyle(U._parentNode)||{},y=parseInt(yt.paddingLeft,10)||0,T=parseInt(yt.paddingRight,10)||0,D=parseInt(yt.paddingTop,10)||0,M=parseInt(yt.paddingBottom,10)||0,H=Ke-D-M,J=ft-y-T;(!Ce&&U.state.height!==H||!Be&&U.state.width!==J)&&(U.setState({height:Ke-D-M,width:ft-y-T}),Ne({height:Ke,width:ft}))}}),bt(Kt(U),"_setRef",function(ae){U._autoSizer=ae}),U}return r(te,"AutoSizer"),Fo(te,ci.Component),no(te,[{key:"componentDidMount",value:function(){var L=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=qc(L,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var L=this.props,U=L.children,K=L.className,se=L.disableHeight,fe=L.disableWidth,ae=L.style,Ce=this.state,Be=Ce.height,Ne=Ce.width,Ke={overflow:"visible"},ft={};return se||(Ke.height=0,ft.height=Be),fe||(Ke.width=0,ft.width=Ne),ci.createElement("div",{className:K,ref:this._setRef,style:sr({},Ke,{},ae)},U(ft))}}]),te}();bt(eu,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var tc=function(){function te(){var L,U;Qr(this,te);for(var K=arguments.length,se=new Array(K),fe=0;fe<K;fe++)se[fe]=arguments[fe];return bt(Kt(U=Bo(this,(L=Ro(te)).call.apply(L,[this].concat(se)))),"_child",void 0),bt(Kt(U),"_measure",function(){var ae=U.props,Ce=ae.cache,Be=ae.columnIndex,Ne=Be===void 0?0:Be,Ke=ae.parent,ft=ae.rowIndex,yt=ft===void 0?U.props.index||0:ft,y=U._getCellMeasurements(),T=y.height,D=y.width;T===Ce.getHeight(yt,Ne)&&D===Ce.getWidth(yt,Ne)||(Ce.set(yt,Ne,D,T),Ke&&typeof Ke.recomputeGridSize=="function"&&Ke.recomputeGridSize({columnIndex:Ne,rowIndex:yt}))}),bt(Kt(U),"_registerChild",function(ae){!ae||ae instanceof Wr||lt.warn("CellMeasurer registerChild expects to be passed Element or null"),(U._child=ae)&&U._maybeMeasureCell()}),U}return r(te,"CellMeasurer"),Fo(te,ci.PureComponent),no(te,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var L=this.props.children;return typeof L=="function"?L({measure:this._measure,registerChild:this._registerChild}):L}},{key:"_getCellMeasurements",value:function(){var L=this.props.cache,U=this._child||qd.findDOMNode(this);if(U&&U.ownerDocument&&U.ownerDocument.defaultView&&U instanceof U.ownerDocument.defaultView.HTMLElement){var K=U.style.width,se=U.style.height;L.hasFixedWidth()||(U.style.width="auto"),L.hasFixedHeight()||(U.style.height="auto");var fe=Math.ceil(U.offsetHeight),ae=Math.ceil(U.offsetWidth);return K&&(U.style.width=K),se&&(U.style.height=se),{height:fe,width:ae}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var L=this.props,U=L.cache,K=L.columnIndex,se=K===void 0?0:K,fe=L.parent,ae=L.rowIndex,Ce=ae===void 0?this.props.index||0:ae;if(!U.has(Ce,se)){var Be=this._getCellMeasurements(),Ne=Be.height,Ke=Be.width;U.set(Ce,se,Ke,Ne),fe&&typeof fe.invalidateCellSizeAfterRender=="function"&&fe.invalidateCellSizeAfterRender({columnIndex:se,rowIndex:Ce})}}}]),te}();bt(tc,"__internalCellMeasurerFlag",!1),tc.__internalCellMeasurerFlag=!0;var Sh=function(){function te(){var L=this,U=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Qr(this,te),bt(this,"_cellHeightCache",{}),bt(this,"_cellWidthCache",{}),bt(this,"_columnWidthCache",{}),bt(this,"_rowHeightCache",{}),bt(this,"_defaultHeight",void 0),bt(this,"_defaultWidth",void 0),bt(this,"_minHeight",void 0),bt(this,"_minWidth",void 0),bt(this,"_keyMapper",void 0),bt(this,"_hasFixedHeight",void 0),bt(this,"_hasFixedWidth",void 0),bt(this,"_columnCount",0),bt(this,"_rowCount",0),bt(this,"columnWidth",function(Ke){var ft=Ke.index,yt=L._keyMapper(0,ft);return L._columnWidthCache[yt]!==void 0?L._columnWidthCache[yt]:L._defaultWidth}),bt(this,"rowHeight",function(Ke){var ft=Ke.index,yt=L._keyMapper(ft,0);return L._rowHeightCache[yt]!==void 0?L._rowHeightCache[yt]:L._defaultHeight});var K=U.defaultHeight,se=U.defaultWidth,fe=U.fixedHeight,ae=U.fixedWidth,Ce=U.keyMapper,Be=U.minHeight,Ne=U.minWidth;this._hasFixedHeight=fe===!0,this._hasFixedWidth=ae===!0,this._minHeight=Be||0,this._minWidth=Ne||0,this._keyMapper=Ce||vh,this._defaultHeight=Math.max(this._minHeight,typeof K=="number"?K:30),this._defaultWidth=Math.max(this._minWidth,typeof se=="number"?se:100),this._hasFixedHeight===!1&&this._hasFixedWidth===!1&&lt.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),this._hasFixedHeight===!1&&this._defaultHeight===0&&lt.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),this._hasFixedWidth===!1&&this._defaultWidth===0&&lt.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return r(te,"CellMeasurerCache"),no(te,[{key:"clear",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:0,se=this._keyMapper(L,K);delete this._cellHeightCache[se],delete this._cellWidthCache[se],this._updateCachedColumnAndRowSizes(L,K)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:0;if(this._hasFixedHeight)return this._defaultHeight;var se=this._keyMapper(L,K);return this._cellHeightCache[se]!==void 0?Math.max(this._minHeight,this._cellHeightCache[se]):this._defaultHeight}},{key:"getWidth",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:0;if(this._hasFixedWidth)return this._defaultWidth;var se=this._keyMapper(L,K);return this._cellWidthCache[se]!==void 0?Math.max(this._minWidth,this._cellWidthCache[se]):this._defaultWidth}},{key:"has",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:0,se=this._keyMapper(L,K);return this._cellHeightCache[se]!==void 0}},{key:"set",value:function(L,U,K,se){var fe=this._keyMapper(L,U);U>=this._columnCount&&(this._columnCount=U+1),L>=this._rowCount&&(this._rowCount=L+1),this._cellHeightCache[fe]=se,this._cellWidthCache[fe]=K,this._updateCachedColumnAndRowSizes(L,U)}},{key:"_updateCachedColumnAndRowSizes",value:function(L,U){if(!this._hasFixedWidth){for(var K=0,se=0;se<this._rowCount;se++)K=Math.max(K,this.getWidth(se,U));var fe=this._keyMapper(0,U);this._columnWidthCache[fe]=K}if(!this._hasFixedHeight){for(var ae=0,Ce=0;Ce<this._columnCount;Ce++)ae=Math.max(ae,this.getHeight(L,Ce));var Be=this._keyMapper(L,0);this._rowHeightCache[Be]=ae}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),te}();function vh(te,L){return"".concat(te,"-").concat(L)}r(vh,"defaultKeyMapper");function tu(te){return te&&te.__esModule&&Object.prototype.hasOwnProperty.call(te,"default")?te.default:te}r(tu,"unwrapExports");function id(te,L){return te(L={exports:{}},L.exports),L.exports}r(id,"createCommonjsModule");var Tr=id(function(te,L){Object.defineProperty(L,"__esModule",{value:!0});var U=typeof Symbol=="function"&&Symbol.for,K=U?Symbol.for("react.element"):60103,se=U?Symbol.for("react.portal"):60106,fe=U?Symbol.for("react.fragment"):60107,ae=U?Symbol.for("react.strict_mode"):60108,Ce=U?Symbol.for("react.profiler"):60114,Be=U?Symbol.for("react.provider"):60109,Ne=U?Symbol.for("react.context"):60110,Ke=U?Symbol.for("react.async_mode"):60111,ft=U?Symbol.for("react.concurrent_mode"):60111,yt=U?Symbol.for("react.forward_ref"):60112,y=U?Symbol.for("react.suspense"):60113,T=U?Symbol.for("react.suspense_list"):60120,D=U?Symbol.for("react.memo"):60115,M=U?Symbol.for("react.lazy"):60116,H=U?Symbol.for("react.fundamental"):60117,J=U?Symbol.for("react.responder"):60118,de=U?Symbol.for("react.scope"):60119;function pe(_e){if(typeof _e=="object"&&_e!==null){var Qe=_e.$$typeof;switch(Qe){case K:switch(_e=_e.type){case Ke:case ft:case fe:case Ce:case ae:case y:return _e;default:switch(_e=_e&&_e.$$typeof){case Ne:case yt:case Be:return _e;default:return Qe}}case M:case D:case se:return Qe}}}r(pe,"y");function Oe(_e){return pe(_e)===ft}r(Oe,"z"),L.typeOf=pe,L.AsyncMode=Ke,L.ConcurrentMode=ft,L.ContextConsumer=Ne,L.ContextProvider=Be,L.Element=K,L.ForwardRef=yt,L.Fragment=fe,L.Lazy=M,L.Memo=D,L.Portal=se,L.Profiler=Ce,L.StrictMode=ae,L.Suspense=y,L.isValidElementType=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===fe||_e===ft||_e===Ce||_e===ae||_e===y||_e===T||typeof _e=="object"&&_e!==null&&(_e.$$typeof===M||_e.$$typeof===D||_e.$$typeof===Be||_e.$$typeof===Ne||_e.$$typeof===yt||_e.$$typeof===H||_e.$$typeof===J||_e.$$typeof===de)},L.isAsyncMode=function(_e){return Oe(_e)||pe(_e)===Ke},L.isConcurrentMode=Oe,L.isContextConsumer=function(_e){return pe(_e)===Ne},L.isContextProvider=function(_e){return pe(_e)===Be},L.isElement=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===K},L.isForwardRef=function(_e){return pe(_e)===yt},L.isFragment=function(_e){return pe(_e)===fe},L.isLazy=function(_e){return pe(_e)===M},L.isMemo=function(_e){return pe(_e)===D},L.isPortal=function(_e){return pe(_e)===se},L.isProfiler=function(_e){return pe(_e)===Ce},L.isStrictMode=function(_e){return pe(_e)===ae},L.isSuspense=function(_e){return pe(_e)===y}});tu(Tr),Tr.typeOf,Tr.AsyncMode,Tr.ConcurrentMode,Tr.ContextConsumer,Tr.ContextProvider,Tr.Element,Tr.ForwardRef,Tr.Fragment,Tr.Lazy,Tr.Memo,Tr.Portal,Tr.Profiler,Tr.StrictMode,Tr.Suspense,Tr.isValidElementType,Tr.isAsyncMode,Tr.isConcurrentMode,Tr.isContextConsumer,Tr.isContextProvider,Tr.isElement,Tr.isForwardRef,Tr.isFragment,Tr.isLazy,Tr.isMemo,Tr.isPortal,Tr.isProfiler,Tr.isStrictMode,Tr.isSuspense;var yr=id(function(te,L){(function(){Object.defineProperty(L,"__esModule",{value:!0});var U=typeof Symbol=="function"&&Symbol.for,K=U?Symbol.for("react.element"):60103,se=U?Symbol.for("react.portal"):60106,fe=U?Symbol.for("react.fragment"):60107,ae=U?Symbol.for("react.strict_mode"):60108,Ce=U?Symbol.for("react.profiler"):60114,Be=U?Symbol.for("react.provider"):60109,Ne=U?Symbol.for("react.context"):60110,Ke=U?Symbol.for("react.async_mode"):60111,ft=U?Symbol.for("react.concurrent_mode"):60111,yt=U?Symbol.for("react.forward_ref"):60112,y=U?Symbol.for("react.suspense"):60113,T=U?Symbol.for("react.suspense_list"):60120,D=U?Symbol.for("react.memo"):60115,M=U?Symbol.for("react.lazy"):60116,H=U?Symbol.for("react.fundamental"):60117,J=U?Symbol.for("react.responder"):60118,de=U?Symbol.for("react.scope"):60119,pe=r(function(Si,Cd){if(Cd===void 0)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!Si){for(var ka=arguments.length,dc=new Array(2<ka?ka-2:0),hu=2;hu<ka;hu++)dc[hu-2]=arguments[hu];(function(ev){for(var Ah=arguments.length,eS=new Array(1<Ah?Ah-1:0),pu=1;pu<Ah;pu++)eS[pu-1]=arguments[pu];var tv=0,tS="Warning: "+ev.replace(/%s/g,function(){return eS[tv++]});typeof lt<"u"&&lt.warn(tS);try{throw new Error(tS)}catch{}}).apply(void 0,[Cd].concat(dc))}},"lowPriorityWarningWithoutStack$1");function Oe(Si){if(typeof Si=="object"&&Si!==null){var Cd=Si.$$typeof;switch(Cd){case K:var ka=Si.type;switch(ka){case Ke:case ft:case fe:case Ce:case ae:case y:return ka;default:var dc=ka&&ka.$$typeof;switch(dc){case Ne:case yt:case Be:return dc;default:return Cd}}case M:case D:case se:return Cd}}}r(Oe,"typeOf");var _e=Ke,Qe=ft,qe=Ne,St=Be,_t=K,dn=yt,kn=fe,un=M,oi=D,Ai=se,io=Ce,Br=ae,is=y,hs=!1;function Td(Si){return Oe(Si)===ft}r(Td,"isConcurrentMode"),L.typeOf=Oe,L.AsyncMode=_e,L.ConcurrentMode=Qe,L.ContextConsumer=qe,L.ContextProvider=St,L.Element=_t,L.ForwardRef=dn,L.Fragment=kn,L.Lazy=un,L.Memo=oi,L.Portal=Ai,L.Profiler=io,L.StrictMode=Br,L.Suspense=is,L.isValidElementType=function(Si){return typeof Si=="string"||typeof Si=="function"||Si===fe||Si===ft||Si===Ce||Si===ae||Si===y||Si===T||typeof Si=="object"&&Si!==null&&(Si.$$typeof===M||Si.$$typeof===D||Si.$$typeof===Be||Si.$$typeof===Ne||Si.$$typeof===yt||Si.$$typeof===H||Si.$$typeof===J||Si.$$typeof===de)},L.isAsyncMode=function(Si){return hs||pe(!(hs=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),Td(Si)||Oe(Si)===Ke},L.isConcurrentMode=Td,L.isContextConsumer=function(Si){return Oe(Si)===Ne},L.isContextProvider=function(Si){return Oe(Si)===Be},L.isElement=function(Si){return typeof Si=="object"&&Si!==null&&Si.$$typeof===K},L.isForwardRef=function(Si){return Oe(Si)===yt},L.isFragment=function(Si){return Oe(Si)===fe},L.isLazy=function(Si){return Oe(Si)===M},L.isMemo=function(Si){return Oe(Si)===D},L.isPortal=function(Si){return Oe(Si)===se},L.isProfiler=function(Si){return Oe(Si)===Ce},L.isStrictMode=function(Si){return Oe(Si)===ae},L.isSuspense=function(Si){return Oe(Si)===y}})()});tu(yr),yr.typeOf,yr.AsyncMode,yr.ConcurrentMode,yr.ContextConsumer,yr.ContextProvider,yr.Element,yr.ForwardRef,yr.Fragment,yr.Lazy,yr.Memo,yr.Portal,yr.Profiler,yr.StrictMode,yr.Suspense,yr.isValidElementType,yr.isAsyncMode,yr.isConcurrentMode,yr.isContextConsumer,yr.isContextProvider,yr.isElement,yr.isForwardRef,yr.isFragment,yr.isLazy,yr.isMemo,yr.isPortal,yr.isProfiler,yr.isStrictMode,yr.isSuspense;var nu=id(function(te){te.exports=yr}),iu=Object.getOwnPropertySymbols,yh=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable,nc,Eh=function(){try{if(!Object.assign)return!1;var te=new String("abc");if(te[5]="de",Object.getOwnPropertyNames(te)[0]==="5")return!1;for(var L={},U=0;U<10;U++)L["_"+String.fromCharCode(U)]=U;if(Object.getOwnPropertyNames(L).map(function(se){return L[se]}).join("")!=="0123456789")return!1;var K={};return"abcdefghijklmnopqrst".split("").forEach(function(se){K[se]=se}),Object.keys(Object.assign({},K)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(te,L){for(var U,K,se=function(Be){if(Be==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Be)}(te),fe=1;fe<arguments.length;fe++){for(var ae in U=Object(arguments[fe]))yh.call(U,ae)&&(se[ae]=U[ae]);if(iu){K=iu(U);for(var Ce=0;Ce<K.length;Ce++)ru.call(U,K[Ce])&&(se[K[Ce]]=U[K[Ce]])}}return se},Ca="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ic={},ou=Function.call.bind(Object.prototype.hasOwnProperty);function su(te,L,U,K,se){for(var fe in te)if(ou(te,fe)){var ae;try{if(typeof te[fe]!="function"){var Ce=Error((K||"React class")+": "+U+" type `"+fe+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof te[fe]+"`.");throw Ce.name="Invariant Violation",Ce}ae=te[fe](L,fe,K,U,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ne){ae=Ne}if(!ae||ae instanceof Error||nc((K||"React class")+": type specification of "+U+" `"+fe+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof ae+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),ae instanceof Error&&!(ae.message in ic)){ic[ae.message]=!0;var Be=se?se():"";nc("Failed "+U+" type: "+ae.message+(Be??""))}}}r(su,"checkPropTypes"),nc=r(function(te){var L="Warning: "+te;typeof lt<"u"&&lt.error(L);try{throw new Error(L)}catch{}},"printWarning"),su.resetWarningCache=function(){ic={}};var Xa,rd=su,au=Function.call.bind(Object.prototype.hasOwnProperty);function Ia(){return null}r(Ia,"emptyFunctionThatReturnsNull"),Xa=r(function(te){var L="Warning: "+te;typeof lt<"u"&&lt.error(L);try{throw new Error(L)}catch{}},"printWarning$1");function rc(te,L){var U=typeof Symbol=="function"&&Symbol.iterator,K="@@iterator",se="<<anonymous>>",fe={array:Ne("array"),bool:Ne("boolean"),func:Ne("function"),number:Ne("number"),object:Ne("object"),string:Ne("string"),symbol:Ne("symbol"),any:Be(Ia),arrayOf:function(T){return Be(function(D,M,H,J,de){if(typeof T!="function")return new Ce("Property `"+de+"` of component `"+H+"` has invalid PropType notation inside arrayOf.");var pe=D[M];if(!Array.isArray(pe))return new Ce("Invalid "+J+" `"+de+"` of type `"+ft(pe)+"` supplied to `"+H+"`, expected an array.");for(var Oe=0;Oe<pe.length;Oe++){var _e=T(pe,Oe,H,J,de+"["+Oe+"]",Ca);if(_e instanceof Error)return _e}return null})},element:Be(function(T,D,M,H,J){var de=T[D];return te(de)?null:new Ce("Invalid "+H+" `"+J+"` of type `"+ft(de)+"` supplied to `"+M+"`, expected a single ReactElement.")}),elementType:Be(function(T,D,M,H,J){var de=T[D];return nu.isValidElementType(de)?null:new Ce("Invalid "+H+" `"+J+"` of type `"+ft(de)+"` supplied to `"+M+"`, expected a single ReactElement type.")}),instanceOf:function(T){return Be(function(D,M,H,J,de){if(D[M]instanceof T)return null;var pe=T.name||se;return new Ce("Invalid "+J+" `"+de+"` of type `"+function(Oe){return Oe.constructor&&Oe.constructor.name?Oe.constructor.name:se}(D[M])+"` supplied to `"+H+"`, expected instance of `"+pe+"`.")})},node:Be(function(T,D,M,H,J){return Ke(T[D])?null:new Ce("Invalid "+H+" `"+J+"` supplied to `"+M+"`, expected a ReactNode.")}),objectOf:function(T){return Be(function(D,M,H,J,de){if(typeof T!="function")return new Ce("Property `"+de+"` of component `"+H+"` has invalid PropType notation inside objectOf.");var pe=D[M],Oe=ft(pe);if(Oe!=="object")return new Ce("Invalid "+J+" `"+de+"` of type `"+Oe+"` supplied to `"+H+"`, expected an object.");for(var _e in pe)if(au(pe,_e)){var Qe=T(pe,_e,H,J,de+"."+_e,Ca);if(Qe instanceof Error)return Qe}return null})},oneOf:function(T){return Array.isArray(T)?Be(function(D,M,H,J,de){for(var pe=D[M],Oe=0;Oe<T.length;Oe++)if(ae(pe,T[Oe]))return null;var _e=JSON.stringify(T,function(Qe,qe){return yt(qe)==="symbol"?String(qe):qe});return new Ce("Invalid "+J+" `"+de+"` of value `"+String(pe)+"` supplied to `"+H+"`, expected one of "+_e+".")}):(Xa(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Ia)},oneOfType:function(T){if(!Array.isArray(T))return Xa("Invalid argument supplied to oneOfType, expected an instance of array."),Ia;for(var D=0;D<T.length;D++){var M=T[D];if(typeof M!="function")return Xa("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+y(M)+" at index "+D+"."),Ia}return Be(function(H,J,de,pe,Oe){for(var _e=0;_e<T.length;_e++)if((0,T[_e])(H,J,de,pe,Oe,Ca)==null)return null;return new Ce("Invalid "+pe+" `"+Oe+"` supplied to `"+de+"`.")})},shape:function(T){return Be(function(D,M,H,J,de){var pe=D[M],Oe=ft(pe);if(Oe!=="object")return new Ce("Invalid "+J+" `"+de+"` of type `"+Oe+"` supplied to `"+H+"`, expected `object`.");for(var _e in T){var Qe=T[_e];if(Qe){var qe=Qe(pe,_e,H,J,de+"."+_e,Ca);if(qe)return qe}}return null})},exact:function(T){return Be(function(D,M,H,J,de){var pe=D[M],Oe=ft(pe);if(Oe!=="object")return new Ce("Invalid "+J+" `"+de+"` of type `"+Oe+"` supplied to `"+H+"`, expected `object`.");var _e=Eh({},D[M],T);for(var Qe in _e){var qe=T[Qe];if(!qe)return new Ce("Invalid "+J+" `"+de+"` key `"+Qe+"` supplied to `"+H+"`.\nBad object: "+JSON.stringify(D[M],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(T),null,"  "));var St=qe(pe,Qe,H,J,de+"."+Qe,Ca);if(St)return St}return null})}};function ae(T,D){return T===D?T!==0||1/T==1/D:T!=T&&D!=D}r(ae,"is");function Ce(T){this.message=T,this.stack=""}r(Ce,"PropTypeError");function Be(T){var D={},M=0;function H(de,pe,Oe,_e,Qe,qe,St){if(_e=_e||se,qe=qe||Oe,St!==Ca){if(L){var _t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw _t.name="Invariant Violation",_t}if(typeof lt<"u"){var dn=_e+":"+Oe;!D[dn]&&M<3&&(Xa("You are manually calling a React.PropTypes validation function for the `"+qe+"` prop on `"+_e+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),D[dn]=!0,M++)}}return pe[Oe]==null?de?pe[Oe]===null?new Ce("The "+Qe+" `"+qe+"` is marked as required in `"+_e+"`, but its value is `null`."):new Ce("The "+Qe+" `"+qe+"` is marked as required in `"+_e+"`, but its value is `undefined`."):null:T(pe,Oe,_e,Qe,qe)}r(H,"checkType");var J=H.bind(null,!1);return J.isRequired=H.bind(null,!0),J}r(Be,"createChainableTypeChecker");function Ne(T){return Be(function(D,M,H,J,de,pe){var Oe=D[M];return ft(Oe)===T?null:new Ce("Invalid "+J+" `"+de+"` of type `"+yt(Oe)+"` supplied to `"+H+"`, expected `"+T+"`.")})}r(Ne,"createPrimitiveTypeChecker");function Ke(T){switch(typeof T){case"number":case"string":case"undefined":return!0;case"boolean":return!T;case"object":if(Array.isArray(T))return T.every(Ke);if(T===null||te(T))return!0;var D=function(de){var pe=de&&(U&&de[U]||de[K]);if(typeof pe=="function")return pe}(T);if(!D)return!1;var M,H=D.call(T);if(D!==T.entries){for(;!(M=H.next()).done;)if(!Ke(M.value))return!1}else for(;!(M=H.next()).done;){var J=M.value;if(J&&!Ke(J[1]))return!1}return!0;default:return!1}}r(Ke,"isNode");function ft(T){var D=typeof T;return Array.isArray(T)?"array":T instanceof RegExp?"object":function(M,H){return M==="symbol"||!!H&&(H["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&H instanceof Symbol)}(D,T)?"symbol":D}r(ft,"getPropType");function yt(T){if(T==null)return""+T;var D=ft(T);if(D==="object"){if(T instanceof Date)return"date";if(T instanceof RegExp)return"regexp"}return D}r(yt,"getPreciseType");function y(T){var D=yt(T);switch(D){case"array":case"object":return"an "+D;case"boolean":case"date":case"regexp":return"a "+D;default:return D}}return r(y,"getPostfixForTypeWarning"),Ce.prototype=Error.prototype,fe.checkPropTypes=rd,fe.resetWarningCache=rd.resetWarningCache,fe.PropTypes=fe}r(rc,"factoryWithTypeCheckers");var ht=id(function(te){var L=nu;te.exports=rc(L.isElement,!0)});function lu(te){var L,U,K="";if(te)if(typeof te=="object")if(te.push)for(L=0;L<te.length;L++)te[L]&&(U=lu(te[L]))&&(K&&(K+=" "),K+=U);else for(L in te)te[L]&&(U=lu(L))&&(K&&(K+=" "),K+=U);else typeof te=="boolean"||te.call||(K&&(K+=" "),K+=te);return K}r(lu,"toVal");function es(){for(var te,L=0,U="";L<arguments.length;)(te=lu(arguments[L++]))&&(U&&(U+=" "),U+=te);return U}r(es,"clsx");function Fs(te){var L=!(0<arguments.length&&te!==void 0)||te,U={};return function(K){var se=K.callback,fe=K.indices,ae=Object.keys(fe),Ce=!L||ae.every(function(Ne){var Ke=fe[Ne];return Array.isArray(Ke)?0<Ke.length:0<=Ke}),Be=ae.length!==Object.keys(U).length||ae.some(function(Ne){var Ke=U[Ne],ft=fe[Ne];return Array.isArray(ft)?Ke.join(",")!==ft.join(","):Ke!==ft});U=fe,Ce&&Be&&se(fe)}}r(Fs,"createCallbackMemoizer");var $i,bh=!(typeof j>"u"||!j.document||!j.document.createElement);function $o(te){if((!$i&&$i!==0||te)&&bh){var L=Re.createElement("div");L.style.position="absolute",L.style.top="-9999px",L.style.width="50px",L.style.height="50px",L.style.overflow="scroll",Re.body.appendChild(L),$i=L.offsetWidth-L.clientWidth,Re.body.removeChild(L)}return $i}r($o,"scrollbarSize");var _h="observed",Qa="requested",Wo=function(){function te(){var L,U;Qr(this,te);for(var K=arguments.length,se=new Array(K),fe=0;fe<K;fe++)se[fe]=arguments[fe];return bt(Kt(U=Bo(this,(L=Ro(te)).call.apply(L,[this].concat(se)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),bt(Kt(U),"_calculateSizeAndPositionDataOnNextUpdate",!1),bt(Kt(U),"_onSectionRenderedMemoizer",Fs()),bt(Kt(U),"_onScrollMemoizer",Fs(!1)),bt(Kt(U),"_invokeOnSectionRenderedHelper",function(){var ae=U.props,Ce=ae.cellLayoutManager,Be=ae.onSectionRendered;U._onSectionRenderedMemoizer({callback:Be,indices:{indices:Ce.getLastRenderedIndices()}})}),bt(Kt(U),"_setScrollingContainerRef",function(ae){U._scrollingContainer=ae}),bt(Kt(U),"_updateScrollPositionForScrollToCell",function(){var ae=U.props,Ce=ae.cellLayoutManager,Be=ae.height,Ne=ae.scrollToAlignment,Ke=ae.scrollToCell,ft=ae.width,yt=U.state,y=yt.scrollLeft,T=yt.scrollTop;if(0<=Ke){var D=Ce.getScrollPositionForCell({align:Ne,cellIndex:Ke,height:Be,scrollLeft:y,scrollTop:T,width:ft});D.scrollLeft===y&&D.scrollTop===T||U._setScrollPosition(D)}}),bt(Kt(U),"_onScroll",function(ae){if(ae.target===U._scrollingContainer){U._enablePointerEventsAfterDelay();var Ce=U.props,Be=Ce.cellLayoutManager,Ne=Ce.height,Ke=Ce.isScrollingChange,ft=Ce.width,yt=U._scrollbarSize,y=Be.getTotalSize(),T=y.height,D=y.width,M=Math.max(0,Math.min(D-ft+yt,ae.target.scrollLeft)),H=Math.max(0,Math.min(T-Ne+yt,ae.target.scrollTop));if(U.state.scrollLeft!==M||U.state.scrollTop!==H){var J=ae.cancelable?_h:Qa;U.state.isScrolling||Ke(!0),U.setState({isScrolling:!0,scrollLeft:M,scrollPositionChangeReason:J,scrollTop:H})}U._invokeOnScrollMemoizer({scrollLeft:M,scrollTop:H,totalWidth:D,totalHeight:T})}}),U._scrollbarSize=$o(),U._scrollbarSize===void 0?(U._scrollbarSizeMeasured=!1,U._scrollbarSize=0):U._scrollbarSizeMeasured=!0,U}return r(te,"CollectionView"),Fo(te,ci.PureComponent),no(te,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var L=this.props,U=L.cellLayoutManager,K=L.scrollLeft,se=L.scrollToCell,fe=L.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=$o(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=se?this._updateScrollPositionForScrollToCell():(0<=K||0<=fe)&&this._setScrollPosition({scrollLeft:K,scrollTop:fe}),this._invokeOnSectionRenderedHelper();var ae=U.getTotalSize(),Ce=ae.height,Be=ae.width;this._invokeOnScrollMemoizer({scrollLeft:K||0,scrollTop:fe||0,totalHeight:Ce,totalWidth:Be})}},{key:"componentDidUpdate",value:function(L,U){var K=this.props,se=K.height,fe=K.scrollToAlignment,ae=K.scrollToCell,Ce=K.width,Be=this.state,Ne=Be.scrollLeft,Ke=Be.scrollPositionChangeReason,ft=Be.scrollTop;Ke===Qa&&(0<=Ne&&Ne!==U.scrollLeft&&Ne!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=Ne),0<=ft&&ft!==U.scrollTop&&ft!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=ft)),se===L.height&&fe===L.scrollToAlignment&&ae===L.scrollToCell&&Ce===L.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Wn(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var L=this.props,U=L.autoHeight,K=L.cellCount,se=L.cellLayoutManager,fe=L.className,ae=L.height,Ce=L.horizontalOverscanSize,Be=L.id,Ne=L.noContentRenderer,Ke=L.style,ft=L.verticalOverscanSize,yt=L.width,y=this.state,T=y.isScrolling,D=y.scrollLeft,M=y.scrollTop;this._lastRenderedCellCount===K&&this._lastRenderedCellLayoutManager===se&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=K,this._lastRenderedCellLayoutManager=se,this._calculateSizeAndPositionDataOnNextUpdate=!1,se.calculateSizeAndPositionData());var H=se.getTotalSize(),J=H.height,de=H.width,pe=Math.max(0,D-Ce),Oe=Math.max(0,M-ft),_e=Math.min(de,D+yt+Ce),Qe=Math.min(J,M+ae+ft),qe=0<ae&&0<yt?se.cellRenderers({height:Qe-Oe,isScrolling:T,width:_e-pe,x:pe,y:Oe}):[],St={boxSizing:"border-box",direction:"ltr",height:U?"auto":ae,position:"relative",WebkitOverflowScrolling:"touch",width:yt,willChange:"transform"},_t=ae<J?this._scrollbarSize:0,dn=yt<de?this._scrollbarSize:0;return St.overflowX=de+_t<=yt?"hidden":"auto",St.overflowY=J+dn<=ae?"hidden":"auto",ci.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:es("ReactVirtualized__Collection",fe),id:Be,onScroll:this._onScroll,role:"grid",style:sr({},St,{},Ke),tabIndex:0},0<K&&ci.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:J,maxHeight:J,maxWidth:de,overflow:"hidden",pointerEvents:T?"none":"",width:de}},qe),K===0&&Ne())}},{key:"_enablePointerEventsAfterDelay",value:function(){var L=this;this._disablePointerEventsTimeoutId&&Wn(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Ho(function(){(0,L.props.isScrollingChange)(!1),L._disablePointerEventsTimeoutId=null,L.setState({isScrolling:!1})},150)}},{key:"_invokeOnScrollMemoizer",value:function(L){var U=this,K=L.scrollLeft,se=L.scrollTop,fe=L.totalHeight,ae=L.totalWidth;this._onScrollMemoizer({callback:function(Ce){var Be=Ce.scrollLeft,Ne=Ce.scrollTop,Ke=U.props,ft=Ke.height;(0,Ke.onScroll)({clientHeight:ft,clientWidth:Ke.width,scrollHeight:fe,scrollLeft:Be,scrollTop:Ne,scrollWidth:ae})},indices:{scrollLeft:K,scrollTop:se}})}},{key:"_setScrollPosition",value:function(L){var U=L.scrollLeft,K=L.scrollTop,se={scrollPositionChangeReason:Qa};0<=U&&(se.scrollLeft=U),0<=K&&(se.scrollTop=K),(0<=U&&U!==this.state.scrollLeft||0<=K&&K!==this.state.scrollTop)&&this.setState(se)}}],[{key:"getDerivedStateFromProps",value:function(L,U){return L.cellCount!==0||U.scrollLeft===0&&U.scrollTop===0?L.scrollLeft!==U.scrollLeft||L.scrollTop!==U.scrollTop?{scrollLeft:L.scrollLeft!=null?L.scrollLeft:U.scrollLeft,scrollTop:L.scrollTop!=null?L.scrollTop:U.scrollTop,scrollPositionChangeReason:Qa}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Qa}}}]),te}();bt(Wo,"propTypes",{"aria-label":ht.string,autoHeight:ht.bool,cellCount:ht.number.isRequired,cellLayoutManager:ht.object.isRequired,className:ht.string,height:ht.number.isRequired,id:ht.string,horizontalOverscanSize:ht.number.isRequired,isScrollingChange:ht.func,noContentRenderer:ht.func.isRequired,onScroll:ht.func.isRequired,onSectionRendered:ht.func.isRequired,scrollLeft:ht.number,scrollToAlignment:ht.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:ht.number.isRequired,scrollTop:ht.number,style:ht.object,verticalOverscanSize:ht.number.isRequired,width:ht.number.isRequired}),bt(Wo,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),Ya(Wo);var Th=function(){function te(L){var U=L.height,K=L.width,se=L.x,fe=L.y;Qr(this,te),this.height=U,this.width=K,this.x=se,this.y=fe,this._indexMap={},this._indices=[]}return r(te,"Section"),no(te,[{key:"addCellIndex",value:function(L){var U=L.index;this._indexMap[U]||(this._indexMap[U]=!0,this._indices.push(U))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),te}(),Ch=function(){function te(){var L=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;Qr(this,te),this._sectionSize=L,this._cellMetadata=[],this._sections={}}return r(te,"SectionManager"),no(te,[{key:"getCellIndices",value:function(L){var U=L.height,K=L.width,se=L.x,fe=L.y,ae={};return this.getSections({height:U,width:K,x:se,y:fe}).forEach(function(Ce){return Ce.getCellIndices().forEach(function(Be){ae[Be]=Be})}),Object.keys(ae).map(function(Ce){return ae[Ce]})}},{key:"getCellMetadata",value:function(L){var U=L.index;return this._cellMetadata[U]}},{key:"getSections",value:function(L){for(var U=L.height,K=L.width,se=L.x,fe=L.y,ae=Math.floor(se/this._sectionSize),Ce=Math.floor((se+K-1)/this._sectionSize),Be=Math.floor(fe/this._sectionSize),Ne=Math.floor((fe+U-1)/this._sectionSize),Ke=[],ft=ae;ft<=Ce;ft++)for(var yt=Be;yt<=Ne;yt++){var y="".concat(ft,".").concat(yt);this._sections[y]||(this._sections[y]=new Th({height:this._sectionSize,width:this._sectionSize,x:ft*this._sectionSize,y:yt*this._sectionSize})),Ke.push(this._sections[y])}return Ke}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var L=this;return Object.keys(this._sections).map(function(U){return L._sections[U].toString()})}},{key:"registerCell",value:function(L){var U=L.cellMetadatum,K=L.index;this._cellMetadata[K]=U,this.getSections(U).forEach(function(se){return se.addCellIndex({index:K})})}}]),te}();function Xs(te){var L=te.align,U=L===void 0?"auto":L,K=te.cellOffset,se=te.cellSize,fe=te.containerSize,ae=te.currentOffset,Ce=K,Be=Ce-fe+se;switch(U){case"start":return Ce;case"end":return Be;case"center":return Ce-(fe-se)/2;default:return Math.max(Be,Math.min(Ce,ae))}}r(Xs,"getUpdatedOffsetForIndex");var oc=function(){function te(L,U){var K;return Qr(this,te),(K=Bo(this,Ro(te).call(this,L,U)))._cellMetadata=[],K._lastRenderedCellIndices=[],K._cellCache=[],K._isScrollingChange=K._isScrollingChange.bind(Kt(K)),K._setCollectionViewRef=K._setCollectionViewRef.bind(Kt(K)),K}return r(te,"Collection"),Fo(te,ci.PureComponent),no(te,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var L=us({},this.props);return ci.createElement(Wo,us({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},L))}},{key:"calculateSizeAndPositionData",value:function(){var L=this.props,U=function(K){for(var se=K.cellCount,fe=K.cellSizeAndPositionGetter,ae=K.sectionSize,Ce=[],Be=new Ch(ae),Ne=0,Ke=0,ft=0;ft<se;ft++){var yt=fe({index:ft});if(yt.height==null||isNaN(yt.height)||yt.width==null||isNaN(yt.width)||yt.x==null||isNaN(yt.x)||yt.y==null||isNaN(yt.y))throw Error("Invalid metadata returned for cell ".concat(ft,`:
        x:`).concat(yt.x,", y:").concat(yt.y,", width:").concat(yt.width,", height:").concat(yt.height));Ne=Math.max(Ne,yt.y+yt.height),Ke=Math.max(Ke,yt.x+yt.width),Ce[ft]=yt,Be.registerCell({cellMetadatum:yt,index:ft})}return{cellMetadata:Ce,height:Ne,sectionManager:Be,width:Ke}}({cellCount:L.cellCount,cellSizeAndPositionGetter:L.cellSizeAndPositionGetter,sectionSize:L.sectionSize});this._cellMetadata=U.cellMetadata,this._sectionManager=U.sectionManager,this._height=U.height,this._width=U.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(L){var U=L.align,K=L.cellIndex,se=L.height,fe=L.scrollLeft,ae=L.scrollTop,Ce=L.width,Be=this.props.cellCount;if(0<=K&&K<Be){var Ne=this._cellMetadata[K];fe=Xs({align:U,cellOffset:Ne.x,cellSize:Ne.width,containerSize:Ce,currentOffset:fe,targetIndex:K}),ae=Xs({align:U,cellOffset:Ne.y,cellSize:Ne.height,containerSize:se,currentOffset:ae,targetIndex:K})}return{scrollLeft:fe,scrollTop:ae}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(L){var U=this,K=L.height,se=L.isScrolling,fe=L.width,ae=L.x,Ce=L.y,Be=this.props,Ne=Be.cellGroupRenderer,Ke=Be.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:K,width:fe,x:ae,y:Ce}),Ne({cellCache:this._cellCache,cellRenderer:Ke,cellSizeAndPositionGetter:function(ft){var yt=ft.index;return U._sectionManager.getCellMetadata({index:yt})},indices:this._lastRenderedCellIndices,isScrolling:se})}},{key:"_isScrollingChange",value:function(L){L||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(L){this._collectionView=L}}]),te}();bt(oc,"propTypes",{"aria-label":ht.string,cellCount:ht.number.isRequired,cellGroupRenderer:ht.func.isRequired,cellRenderer:ht.func.isRequired,cellSizeAndPositionGetter:ht.func.isRequired,sectionSize:ht.number}),bt(oc,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(te){var L=te.cellCache,U=te.cellRenderer,K=te.cellSizeAndPositionGetter,se=te.indices,fe=te.isScrolling;return se.map(function(ae){var Ce=K({index:ae}),Be={index:ae,isScrolling:fe,key:ae,style:{height:Ce.height,left:Ce.x,position:"absolute",top:Ce.y,width:Ce.width}};return fe?(ae in L||(L[ae]=U(Be)),L[ae]):U(Be)}).filter(function(ae){return!!ae})}});var du=function(){function te(L,U){var K;return Qr(this,te),(K=Bo(this,Ro(te).call(this,L,U)))._registerChild=K._registerChild.bind(Kt(K)),K}return r(te,"ColumnSizer"),Fo(te,ci.PureComponent),no(te,[{key:"componentDidUpdate",value:function(L){var U=this.props,K=U.columnMaxWidth,se=U.columnMinWidth,fe=U.columnCount,ae=U.width;K===L.columnMaxWidth&&se===L.columnMinWidth&&fe===L.columnCount&&ae===L.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var L=this.props,U=L.children,K=L.columnMaxWidth,se=L.columnMinWidth,fe=L.columnCount,ae=L.width,Ce=se||1,Be=K?Math.min(K,ae):ae,Ne=ae/fe;return Ne=Math.max(Ce,Ne),Ne=Math.min(Be,Ne),Ne=Math.floor(Ne),U({adjustedWidth:Math.min(ae,Ne*fe),columnWidth:Ne,getColumnWidth:function(){return Ne},registerChild:this._registerChild})}},{key:"_registerChild",value:function(L){if(L&&typeof L.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=L,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),te}();function cu(te){var L=te.cellCount,U=te.cellSize,K=te.computeMetadataCallback,se=te.computeMetadataCallbackProps,fe=te.nextCellsCount,ae=te.nextCellSize,Ce=te.nextScrollToIndex,Be=te.scrollToIndex,Ne=te.updateScrollOffsetForScrollToIndex;L===fe&&(typeof U!="number"&&typeof ae!="number"||U===ae)||(K(se),0<=Be&&Be===Ce&&Ne())}r(cu,"calculateSizeAndPositionDataAndUpdateScrollOffset"),bt(du,"propTypes",{children:ht.func.isRequired,columnMaxWidth:ht.number,columnMinWidth:ht.number,columnCount:ht.number.isRequired,width:ht.number.isRequired});var Ko,od=function(){function te(L){var U=L.cellCount,K=L.cellSizeGetter,se=L.estimatedCellSize;Qr(this,te),bt(this,"_cellSizeAndPositionData",{}),bt(this,"_lastMeasuredIndex",-1),bt(this,"_lastBatchedIndex",-1),bt(this,"_cellCount",void 0),bt(this,"_cellSizeGetter",void 0),bt(this,"_estimatedCellSize",void 0),this._cellSizeGetter=K,this._cellCount=U,this._estimatedCellSize=se}return r(te,"CellSizeAndPositionManager"),no(te,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(L){var U=L.cellCount,K=L.estimatedCellSize,se=L.cellSizeGetter;this._cellCount=U,this._estimatedCellSize=K,this._cellSizeGetter=se}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(L){if(L<0||L>=this._cellCount)throw Error("Requested index ".concat(L," is outside of range 0..").concat(this._cellCount));if(L>this._lastMeasuredIndex)for(var U=this.getSizeAndPositionOfLastMeasuredCell(),K=U.offset+U.size,se=this._lastMeasuredIndex+1;se<=L;se++){var fe=this._cellSizeGetter({index:se});if(fe===void 0||isNaN(fe))throw Error("Invalid size returned for cell ".concat(se," of value ").concat(fe));fe===null?(this._cellSizeAndPositionData[se]={offset:K,size:0},this._lastBatchedIndex=L):(this._cellSizeAndPositionData[se]={offset:K,size:fe},K+=fe,this._lastMeasuredIndex=L)}return this._cellSizeAndPositionData[L]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var L=this.getSizeAndPositionOfLastMeasuredCell();return L.offset+L.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(L){var U=L.align,K=U===void 0?"auto":U,se=L.containerSize,fe=L.currentOffset,ae=L.targetIndex;if(se<=0)return 0;var Ce,Be=this.getSizeAndPositionOfCell(ae),Ne=Be.offset,Ke=Ne-se+Be.size;switch(K){case"start":Ce=Ne;break;case"end":Ce=Ke;break;case"center":Ce=Ne-(se-Be.size)/2;break;default:Ce=Math.max(Ke,Math.min(Ne,fe))}var ft=this.getTotalSize();return Math.max(0,Math.min(ft-se,Ce))}},{key:"getVisibleCellRange",value:function(L){var U=L.containerSize,K=L.offset;if(this.getTotalSize()===0)return{};var se=K+U,fe=this._findNearestCell(K),ae=this.getSizeAndPositionOfCell(fe);K=ae.offset+ae.size;for(var Ce=fe;K<se&&Ce<this._cellCount-1;)Ce++,K+=this.getSizeAndPositionOfCell(Ce).size;return{start:fe,stop:Ce}}},{key:"resetCell",value:function(L){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,L-1)}},{key:"_binarySearch",value:function(L,U,K){for(;U<=L;){var se=U+Math.floor((L-U)/2),fe=this.getSizeAndPositionOfCell(se).offset;if(fe===K)return se;fe<K?U=se+1:K<fe&&(L=se-1)}return 0<U?U-1:0}},{key:"_exponentialSearch",value:function(L,U){for(var K=1;L<this._cellCount&&this.getSizeAndPositionOfCell(L).offset<U;)L+=K,K*=2;return this._binarySearch(Math.min(L,this._cellCount-1),Math.floor(L/2),U)}},{key:"_findNearestCell",value:function(L){if(isNaN(L))throw Error("Invalid offset ".concat(L," specified"));L=Math.max(0,L);var U=this.getSizeAndPositionOfLastMeasuredCell(),K=Math.max(0,this._lastMeasuredIndex);return U.offset>=L?this._binarySearch(K,0,L):this._exponentialSearch(K,L)}}]),te}(),Ih=r(function(){return typeof j<"u"&&j.chrome?16777100:15e5},"getMaxElementSize"),ts=function(){function te(L){var U=L.maxScrollSize,K=U===void 0?Ih():U,se=Ja(L,["maxScrollSize"]);Qr(this,te),bt(this,"_cellSizeAndPositionManager",void 0),bt(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new od(se),this._maxScrollSize=K}return r(te,"ScalingCellSizeAndPositionManager"),no(te,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(L){this._cellSizeAndPositionManager.configure(L)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(L){var U=L.containerSize,K=L.offset,se=this._cellSizeAndPositionManager.getTotalSize(),fe=this.getTotalSize(),ae=this._getOffsetPercentage({containerSize:U,offset:K,totalSize:fe});return Math.round(ae*(fe-se))}},{key:"getSizeAndPositionOfCell",value:function(L){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(L)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(L){var U=L.align,K=U===void 0?"auto":U,se=L.containerSize,fe=L.currentOffset,ae=L.targetIndex;fe=this._safeOffsetToOffset({containerSize:se,offset:fe});var Ce=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:K,containerSize:se,currentOffset:fe,targetIndex:ae});return this._offsetToSafeOffset({containerSize:se,offset:Ce})}},{key:"getVisibleCellRange",value:function(L){var U=L.containerSize,K=L.offset;return K=this._safeOffsetToOffset({containerSize:U,offset:K}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:U,offset:K})}},{key:"resetCell",value:function(L){this._cellSizeAndPositionManager.resetCell(L)}},{key:"_getOffsetPercentage",value:function(L){var U=L.containerSize,K=L.offset,se=L.totalSize;return se<=U?0:K/(se-U)}},{key:"_offsetToSafeOffset",value:function(L){var U=L.containerSize,K=L.offset,se=this._cellSizeAndPositionManager.getTotalSize(),fe=this.getTotalSize();if(se===fe)return K;var ae=this._getOffsetPercentage({containerSize:U,offset:K,totalSize:se});return Math.round(ae*(fe-U))}},{key:"_safeOffsetToOffset",value:function(L){var U=L.containerSize,K=L.offset,se=this._cellSizeAndPositionManager.getTotalSize(),fe=this.getTotalSize();if(se===fe)return K;var ae=this._getOffsetPercentage({containerSize:U,offset:K,totalSize:fe});return Math.round(ae*(se-U))}}]),te}();function uu(te){var L=te.cellCount,U=te.overscanCellsCount,K=te.scrollDirection,se=te.startIndex,fe=te.stopIndex;return K===1?{overscanStartIndex:Math.max(0,se),overscanStopIndex:Math.min(L-1,fe+U)}:{overscanStartIndex:Math.max(0,se-U),overscanStopIndex:Math.min(L-1,fe)}}r(uu,"defaultOverscanIndicesGetter");function fu(te){var L=te.cellSize,U=te.cellSizeAndPositionManager,K=te.previousCellsCount,se=te.previousCellSize,fe=te.previousScrollToAlignment,ae=te.previousScrollToIndex,Ce=te.previousSize,Be=te.scrollOffset,Ne=te.scrollToAlignment,Ke=te.scrollToIndex,ft=te.size,yt=te.sizeJustIncreasedFromZero,y=te.updateScrollIndexCallback,T=U.getCellCount(),D=0<=Ke&&Ke<T;D&&(ft!==Ce||yt||!se||typeof L=="number"&&L!==se||Ne!==fe||Ke!==ae)?y(Ke):!D&&0<T&&(ft<Ce||T<K)&&Be>U.getTotalSize()-ft&&y(T-1)}r(fu,"updateScrollIndexHelper");function ns(te){for(var L=te.cellCache,U=te.cellRenderer,K=te.columnSizeAndPositionManager,se=te.columnStartIndex,fe=te.columnStopIndex,ae=te.deferredMeasurementCache,Ce=te.horizontalOffsetAdjustment,Be=te.isScrolling,Ne=te.isScrollingOptOut,Ke=te.parent,ft=te.rowSizeAndPositionManager,yt=te.rowStartIndex,y=te.rowStopIndex,T=te.styleCache,D=te.verticalOffsetAdjustment,M=te.visibleColumnIndices,H=te.visibleRowIndices,J=[],de=K.areOffsetsAdjusted()||ft.areOffsetsAdjusted(),pe=!Be&&!de,Oe=yt;Oe<=y;Oe++)for(var _e=ft.getSizeAndPositionOfCell(Oe),Qe=se;Qe<=fe;Qe++){var qe=K.getSizeAndPositionOfCell(Qe),St=Qe>=M.start&&Qe<=M.stop&&Oe>=H.start&&Oe<=H.stop,_t="".concat(Oe,"-").concat(Qe),dn=void 0;pe&&T[_t]?dn=T[_t]:ae&&!ae.has(Oe,Qe)?dn={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(dn={height:_e.size,left:qe.offset+Ce,position:"absolute",top:_e.offset+D,width:qe.size},T[_t]=dn);var kn={columnIndex:Qe,isScrolling:Be,isVisible:St,key:_t,parent:Ke,rowIndex:Oe,style:dn},un=void 0;(un=!Ne&&!Be||Ce||D?U(kn):(L[_t]||(L[_t]=U(kn)),L[_t]))!=null&&un!==!1&&(wa(Ke,un),J.push(un))}return J}r(ns,"defaultCellRangeRenderer");function wa(te,L){L&&(L.type&&L.type.__internalCellMeasurerFlag&&(L=L.props.children),L&&L.props&&L.props.style===void 0&&te.__warnedAboutMissingStyle!==!0&&(te.__warnedAboutMissingStyle=!0,lt.warn("Rendered cell should include style property for positioning.")))}r(wa,"warnAboutMissingStyle");var wh=(Ko=typeof j<"u"?j:typeof Gl<"u"?Gl:{}).requestAnimationFrame||Ko.webkitRequestAnimationFrame||Ko.mozRequestAnimationFrame||Ko.oRequestAnimationFrame||Ko.msRequestAnimationFrame||function(te){return Ko.setTimeout(te,1e3/60)},Da=Ko.cancelAnimationFrame||Ko.webkitCancelAnimationFrame||Ko.mozCancelAnimationFrame||Ko.oCancelAnimationFrame||Ko.msCancelAnimationFrame||function(te){Ko.clearTimeout(te)},Qs=wh,Dh=Da,Aa=r(function(te){return Dh(te.id)},"cancelAnimationTimeout"),Ki=r(function(te,L){var U;Promise.resolve().then(function(){U=Date.now()});var K={id:Qs(r(function se(){Date.now()-U>=L?te.call():K.id=Qs(se)},"timeout"))};return K},"requestAnimationTimeout"),sc="observed",sd="requested",fs=function(){function te(L){var U;Qr(this,te),bt(Kt(U=Bo(this,Ro(te).call(this,L))),"_onGridRenderedMemoizer",Fs()),bt(Kt(U),"_onScrollMemoizer",Fs(!1)),bt(Kt(U),"_deferredInvalidateColumnIndex",null),bt(Kt(U),"_deferredInvalidateRowIndex",null),bt(Kt(U),"_recomputeScrollLeftFlag",!1),bt(Kt(U),"_recomputeScrollTopFlag",!1),bt(Kt(U),"_horizontalScrollBarSize",0),bt(Kt(U),"_verticalScrollBarSize",0),bt(Kt(U),"_scrollbarPresenceChanged",!1),bt(Kt(U),"_scrollingContainer",void 0),bt(Kt(U),"_childrenToDisplay",void 0),bt(Kt(U),"_columnStartIndex",void 0),bt(Kt(U),"_columnStopIndex",void 0),bt(Kt(U),"_rowStartIndex",void 0),bt(Kt(U),"_rowStopIndex",void 0),bt(Kt(U),"_renderedColumnStartIndex",0),bt(Kt(U),"_renderedColumnStopIndex",0),bt(Kt(U),"_renderedRowStartIndex",0),bt(Kt(U),"_renderedRowStopIndex",0),bt(Kt(U),"_initialScrollTop",void 0),bt(Kt(U),"_initialScrollLeft",void 0),bt(Kt(U),"_disablePointerEventsTimeoutId",void 0),bt(Kt(U),"_styleCache",{}),bt(Kt(U),"_cellCache",{}),bt(Kt(U),"_debounceScrollEndedCallback",function(){U._disablePointerEventsTimeoutId=null,U.setState({isScrolling:!1,needToResetStyleCache:!1})}),bt(Kt(U),"_invokeOnGridRenderedHelper",function(){var fe=U.props.onSectionRendered;U._onGridRenderedMemoizer({callback:fe,indices:{columnOverscanStartIndex:U._columnStartIndex,columnOverscanStopIndex:U._columnStopIndex,columnStartIndex:U._renderedColumnStartIndex,columnStopIndex:U._renderedColumnStopIndex,rowOverscanStartIndex:U._rowStartIndex,rowOverscanStopIndex:U._rowStopIndex,rowStartIndex:U._renderedRowStartIndex,rowStopIndex:U._renderedRowStopIndex}})}),bt(Kt(U),"_setScrollingContainerRef",function(fe){U._scrollingContainer=fe}),bt(Kt(U),"_onScroll",function(fe){fe.target===U._scrollingContainer&&U.handleScrollEvent(fe.target)});var K=new ts({cellCount:L.columnCount,cellSizeGetter:function(fe){return te._wrapSizeGetter(L.columnWidth)(fe)},estimatedCellSize:te._getEstimatedColumnSize(L)}),se=new ts({cellCount:L.rowCount,cellSizeGetter:function(fe){return te._wrapSizeGetter(L.rowHeight)(fe)},estimatedCellSize:te._getEstimatedRowSize(L)});return U.state={instanceProps:{columnSizeAndPositionManager:K,rowSizeAndPositionManager:se,prevColumnWidth:L.columnWidth,prevRowHeight:L.rowHeight,prevColumnCount:L.columnCount,prevRowCount:L.rowCount,prevIsScrolling:L.isScrolling===!0,prevScrollToColumn:L.scrollToColumn,prevScrollToRow:L.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<L.scrollToRow&&(U._initialScrollTop=U._getCalculatedScrollTop(L,U.state)),0<L.scrollToColumn&&(U._initialScrollLeft=U._getCalculatedScrollLeft(L,U.state)),U}return r(te,"Grid"),Fo(te,ci.PureComponent),no(te,[{key:"getOffsetForCell",value:function(L){var U=0<arguments.length&&L!==void 0?L:{},K=U.alignment,se=K===void 0?this.props.scrollToAlignment:K,fe=U.columnIndex,ae=fe===void 0?this.props.scrollToColumn:fe,Ce=U.rowIndex,Be=Ce===void 0?this.props.scrollToRow:Ce,Ne=sr({},this.props,{scrollToAlignment:se,scrollToColumn:ae,scrollToRow:Be});return{scrollLeft:this._getCalculatedScrollLeft(Ne),scrollTop:this._getCalculatedScrollTop(Ne)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(L){var U=L.scrollLeft,K=U===void 0?0:U,se=L.scrollTop,fe=se===void 0?0:se;if(!(fe<0)){this._debounceScrollEnded();var ae=this.props,Ce=ae.autoHeight,Be=ae.autoWidth,Ne=ae.height,Ke=ae.width,ft=this.state.instanceProps,yt=ft.scrollbarSize,y=ft.rowSizeAndPositionManager.getTotalSize(),T=ft.columnSizeAndPositionManager.getTotalSize(),D=Math.min(Math.max(0,T-Ke+yt),K),M=Math.min(Math.max(0,y-Ne+yt),fe);if(this.state.scrollLeft!==D||this.state.scrollTop!==M){var H={isScrolling:!0,scrollDirectionHorizontal:D!==this.state.scrollLeft?D>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:M!==this.state.scrollTop?M>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:sc};Ce||(H.scrollTop=M),Be||(H.scrollLeft=D),H.needToResetStyleCache=!1,this.setState(H)}this._invokeOnScrollMemoizer({scrollLeft:D,scrollTop:M,totalColumnsWidth:T,totalRowsHeight:y})}}},{key:"invalidateCellSizeAfterRender",value:function(L){var U=L.columnIndex,K=L.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,U):U,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,K):K}},{key:"measureAllCells",value:function(){var L=this.props,U=L.columnCount,K=L.rowCount,se=this.state.instanceProps;se.columnSizeAndPositionManager.getSizeAndPositionOfCell(U-1),se.rowSizeAndPositionManager.getSizeAndPositionOfCell(K-1)}},{key:"recomputeGridSize",value:function(L){var U=0<arguments.length&&L!==void 0?L:{},K=U.columnIndex,se=K===void 0?0:K,fe=U.rowIndex,ae=fe===void 0?0:fe,Ce=this.props,Be=Ce.scrollToColumn,Ne=Ce.scrollToRow,Ke=this.state.instanceProps;Ke.columnSizeAndPositionManager.resetCell(se),Ke.rowSizeAndPositionManager.resetCell(ae),this._recomputeScrollLeftFlag=0<=Be&&(this.state.scrollDirectionHorizontal===1?se<=Be:Be<=se),this._recomputeScrollTopFlag=0<=Ne&&(this.state.scrollDirectionVertical===1?ae<=Ne:Ne<=ae),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(L){var U=L.columnIndex,K=L.rowIndex,se=this.props.columnCount,fe=this.props;1<se&&U!==void 0&&this._updateScrollLeftForScrollToColumn(sr({},fe,{scrollToColumn:U})),K!==void 0&&this._updateScrollTopForScrollToRow(sr({},fe,{scrollToRow:K}))}},{key:"componentDidMount",value:function(){var L=this.props,U=L.getScrollbarSize,K=L.height,se=L.scrollLeft,fe=L.scrollToColumn,ae=L.scrollTop,Ce=L.scrollToRow,Be=L.width,Ne=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),Ne.scrollbarSizeMeasured||this.setState(function(yt){var y=sr({},yt,{needToResetStyleCache:!1});return y.instanceProps.scrollbarSize=U(),y.instanceProps.scrollbarSizeMeasured=!0,y}),typeof se=="number"&&0<=se||typeof ae=="number"&&0<=ae){var Ke=te._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:se,scrollTop:ae});Ke&&(Ke.needToResetStyleCache=!1,this.setState(Ke))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var ft=0<K&&0<Be;0<=fe&&ft&&this._updateScrollLeftForScrollToColumn(),0<=Ce&&ft&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:se||0,scrollTop:ae||0,totalColumnsWidth:Ne.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:Ne.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(L,U){var K=this,se=this.props,fe=se.autoHeight,ae=se.autoWidth,Ce=se.columnCount,Be=se.height,Ne=se.rowCount,Ke=se.scrollToAlignment,ft=se.scrollToColumn,yt=se.scrollToRow,y=se.width,T=this.state,D=T.scrollLeft,M=T.scrollPositionChangeReason,H=T.scrollTop,J=T.instanceProps;this._handleInvalidatedGridSize();var de=0<Ce&&L.columnCount===0||0<Ne&&L.rowCount===0;M===sd&&(!ae&&0<=D&&(D!==this._scrollingContainer.scrollLeft||de)&&(this._scrollingContainer.scrollLeft=D),!fe&&0<=H&&(H!==this._scrollingContainer.scrollTop||de)&&(this._scrollingContainer.scrollTop=H));var pe=(L.width===0||L.height===0)&&0<Be&&0<y;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):fu({cellSizeAndPositionManager:J.columnSizeAndPositionManager,previousCellsCount:L.columnCount,previousCellSize:L.columnWidth,previousScrollToAlignment:L.scrollToAlignment,previousScrollToIndex:L.scrollToColumn,previousSize:L.width,scrollOffset:D,scrollToAlignment:Ke,scrollToIndex:ft,size:y,sizeJustIncreasedFromZero:pe,updateScrollIndexCallback:function(){return K._updateScrollLeftForScrollToColumn(K.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):fu({cellSizeAndPositionManager:J.rowSizeAndPositionManager,previousCellsCount:L.rowCount,previousCellSize:L.rowHeight,previousScrollToAlignment:L.scrollToAlignment,previousScrollToIndex:L.scrollToRow,previousSize:L.height,scrollOffset:H,scrollToAlignment:Ke,scrollToIndex:yt,size:Be,sizeJustIncreasedFromZero:pe,updateScrollIndexCallback:function(){return K._updateScrollTopForScrollToRow(K.props)}}),this._invokeOnGridRenderedHelper(),D!==U.scrollLeft||H!==U.scrollTop){var Oe=J.rowSizeAndPositionManager.getTotalSize(),_e=J.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:D,scrollTop:H,totalColumnsWidth:_e,totalRowsHeight:Oe})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Aa(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var L=this.props,U=L.autoContainerWidth,K=L.autoHeight,se=L.autoWidth,fe=L.className,ae=L.containerProps,Ce=L.containerRole,Be=L.containerStyle,Ne=L.height,Ke=L.id,ft=L.noContentRenderer,yt=L.role,y=L.style,T=L.tabIndex,D=L.width,M=this.state,H=M.instanceProps,J=M.needToResetStyleCache,de=this._isScrolling(),pe={boxSizing:"border-box",direction:"ltr",height:K?"auto":Ne,position:"relative",width:se?"auto":D,WebkitOverflowScrolling:"touch",willChange:"transform"};J&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var Oe=H.columnSizeAndPositionManager.getTotalSize(),_e=H.rowSizeAndPositionManager.getTotalSize(),Qe=Ne<_e?H.scrollbarSize:0,qe=D<Oe?H.scrollbarSize:0;qe===this._horizontalScrollBarSize&&Qe===this._verticalScrollBarSize||(this._horizontalScrollBarSize=qe,this._verticalScrollBarSize=Qe,this._scrollbarPresenceChanged=!0),pe.overflowX=Oe+Qe<=D?"hidden":"auto",pe.overflowY=_e+qe<=Ne?"hidden":"auto";var St=this._childrenToDisplay,_t=St.length===0&&0<Ne&&0<D;return ci.createElement("div",us({ref:this._setScrollingContainerRef},ae,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:es("ReactVirtualized__Grid",fe),id:Ke,onScroll:this._onScroll,role:yt,style:sr({},pe,{},y),tabIndex:T}),0<St.length&&ci.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:Ce,style:sr({width:U?"auto":Oe,height:_e,maxWidth:Oe,maxHeight:_e,overflow:"hidden",pointerEvents:de?"none":"",position:"relative"},Be)},St),_t&&ft())}},{key:"_calculateChildrenToRender",value:function(L,U){var K=0<arguments.length&&L!==void 0?L:this.props,se=1<arguments.length&&U!==void 0?U:this.state,fe=K.cellRenderer,ae=K.cellRangeRenderer,Ce=K.columnCount,Be=K.deferredMeasurementCache,Ne=K.height,Ke=K.overscanColumnCount,ft=K.overscanIndicesGetter,yt=K.overscanRowCount,y=K.rowCount,T=K.width,D=K.isScrollingOptOut,M=se.scrollDirectionHorizontal,H=se.scrollDirectionVertical,J=se.instanceProps,de=0<this._initialScrollTop?this._initialScrollTop:se.scrollTop,pe=0<this._initialScrollLeft?this._initialScrollLeft:se.scrollLeft,Oe=this._isScrolling(K,se);if(this._childrenToDisplay=[],0<Ne&&0<T){var _e=J.columnSizeAndPositionManager.getVisibleCellRange({containerSize:T,offset:pe}),Qe=J.rowSizeAndPositionManager.getVisibleCellRange({containerSize:Ne,offset:de}),qe=J.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:T,offset:pe}),St=J.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:Ne,offset:de});this._renderedColumnStartIndex=_e.start,this._renderedColumnStopIndex=_e.stop,this._renderedRowStartIndex=Qe.start,this._renderedRowStopIndex=Qe.stop;var _t=ft({direction:"horizontal",cellCount:Ce,overscanCellsCount:Ke,scrollDirection:M,startIndex:typeof _e.start=="number"?_e.start:0,stopIndex:typeof _e.stop=="number"?_e.stop:-1}),dn=ft({direction:"vertical",cellCount:y,overscanCellsCount:yt,scrollDirection:H,startIndex:typeof Qe.start=="number"?Qe.start:0,stopIndex:typeof Qe.stop=="number"?Qe.stop:-1}),kn=_t.overscanStartIndex,un=_t.overscanStopIndex,oi=dn.overscanStartIndex,Ai=dn.overscanStopIndex;if(Be){if(!Be.hasFixedHeight()){for(var io=oi;io<=Ai;io++)if(!Be.has(io,0)){kn=0,un=Ce-1;break}}if(!Be.hasFixedWidth()){for(var Br=kn;Br<=un;Br++)if(!Be.has(0,Br)){oi=0,Ai=y-1;break}}}this._childrenToDisplay=ae({cellCache:this._cellCache,cellRenderer:fe,columnSizeAndPositionManager:J.columnSizeAndPositionManager,columnStartIndex:kn,columnStopIndex:un,deferredMeasurementCache:Be,horizontalOffsetAdjustment:qe,isScrolling:Oe,isScrollingOptOut:D,parent:this,rowSizeAndPositionManager:J.rowSizeAndPositionManager,rowStartIndex:oi,rowStopIndex:Ai,scrollLeft:pe,scrollTop:de,styleCache:this._styleCache,verticalOffsetAdjustment:St,visibleColumnIndices:_e,visibleRowIndices:Qe}),this._columnStartIndex=kn,this._columnStopIndex=un,this._rowStartIndex=oi,this._rowStopIndex=Ai}}},{key:"_debounceScrollEnded",value:function(){var L=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Aa(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Ki(this._debounceScrollEndedCallback,L)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var L=this._deferredInvalidateColumnIndex,U=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:L,rowIndex:U})}}},{key:"_invokeOnScrollMemoizer",value:function(L){var U=this,K=L.scrollLeft,se=L.scrollTop,fe=L.totalColumnsWidth,ae=L.totalRowsHeight;this._onScrollMemoizer({callback:function(Ce){var Be=Ce.scrollLeft,Ne=Ce.scrollTop,Ke=U.props,ft=Ke.height;(0,Ke.onScroll)({clientHeight:ft,clientWidth:Ke.width,scrollHeight:ae,scrollLeft:Be,scrollTop:Ne,scrollWidth:fe})},indices:{scrollLeft:K,scrollTop:se}})}},{key:"_isScrolling",value:function(L,U){var K=0<arguments.length&&L!==void 0?L:this.props,se=1<arguments.length&&U!==void 0?U:this.state;return Object.hasOwnProperty.call(K,"isScrolling")?Boolean(K.isScrolling):Boolean(se.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var L=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,L({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(L){var U=L.scrollLeft,K=L.scrollTop,se=te._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:U,scrollTop:K});se&&(se.needToResetStyleCache=!1,this.setState(se))}},{key:"_getCalculatedScrollLeft",value:function(L,U){var K=0<arguments.length&&L!==void 0?L:this.props,se=1<arguments.length&&U!==void 0?U:this.state;return te._getCalculatedScrollLeft(K,se)}},{key:"_updateScrollLeftForScrollToColumn",value:function(L,U){var K=0<arguments.length&&L!==void 0?L:this.props,se=1<arguments.length&&U!==void 0?U:this.state,fe=te._getScrollLeftForScrollToColumnStateUpdate(K,se);fe&&(fe.needToResetStyleCache=!1,this.setState(fe))}},{key:"_getCalculatedScrollTop",value:function(L,U){var K=0<arguments.length&&L!==void 0?L:this.props,se=1<arguments.length&&U!==void 0?U:this.state;return te._getCalculatedScrollTop(K,se)}},{key:"_resetStyleCache",value:function(){var L=this._styleCache,U=this._cellCache,K=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var se=this._rowStartIndex;se<=this._rowStopIndex;se++)for(var fe=this._columnStartIndex;fe<=this._columnStopIndex;fe++){var ae="".concat(se,"-").concat(fe);this._styleCache[ae]=L[ae],K&&(this._cellCache[ae]=U[ae])}}},{key:"_updateScrollTopForScrollToRow",value:function(L,U){var K=0<arguments.length&&L!==void 0?L:this.props,se=1<arguments.length&&U!==void 0?U:this.state,fe=te._getScrollTopForScrollToRowStateUpdate(K,se);fe&&(fe.needToResetStyleCache=!1,this.setState(fe))}}],[{key:"getDerivedStateFromProps",value:function(L,U){var K={};L.columnCount===0&&U.scrollLeft!==0||L.rowCount===0&&U.scrollTop!==0?(K.scrollLeft=0,K.scrollTop=0):(L.scrollLeft!==U.scrollLeft&&L.scrollToColumn<0||L.scrollTop!==U.scrollTop&&L.scrollToRow<0)&&Object.assign(K,te._getScrollToPositionStateUpdate({prevState:U,scrollLeft:L.scrollLeft,scrollTop:L.scrollTop}));var se,fe,ae=U.instanceProps;return K.needToResetStyleCache=!1,L.columnWidth===ae.prevColumnWidth&&L.rowHeight===ae.prevRowHeight||(K.needToResetStyleCache=!0),ae.columnSizeAndPositionManager.configure({cellCount:L.columnCount,estimatedCellSize:te._getEstimatedColumnSize(L),cellSizeGetter:te._wrapSizeGetter(L.columnWidth)}),ae.rowSizeAndPositionManager.configure({cellCount:L.rowCount,estimatedCellSize:te._getEstimatedRowSize(L),cellSizeGetter:te._wrapSizeGetter(L.rowHeight)}),ae.prevColumnCount!==0&&ae.prevRowCount!==0||(ae.prevColumnCount=0,ae.prevRowCount=0),L.autoHeight&&L.isScrolling===!1&&ae.prevIsScrolling===!0&&Object.assign(K,{isScrolling:!1}),cu({cellCount:ae.prevColumnCount,cellSize:typeof ae.prevColumnWidth=="number"?ae.prevColumnWidth:null,computeMetadataCallback:function(){return ae.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:L,nextCellsCount:L.columnCount,nextCellSize:typeof L.columnWidth=="number"?L.columnWidth:null,nextScrollToIndex:L.scrollToColumn,scrollToIndex:ae.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){se=te._getScrollLeftForScrollToColumnStateUpdate(L,U)}}),cu({cellCount:ae.prevRowCount,cellSize:typeof ae.prevRowHeight=="number"?ae.prevRowHeight:null,computeMetadataCallback:function(){return ae.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:L,nextCellsCount:L.rowCount,nextCellSize:typeof L.rowHeight=="number"?L.rowHeight:null,nextScrollToIndex:L.scrollToRow,scrollToIndex:ae.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){fe=te._getScrollTopForScrollToRowStateUpdate(L,U)}}),ae.prevColumnCount=L.columnCount,ae.prevColumnWidth=L.columnWidth,ae.prevIsScrolling=L.isScrolling===!0,ae.prevRowCount=L.rowCount,ae.prevRowHeight=L.rowHeight,ae.prevScrollToColumn=L.scrollToColumn,ae.prevScrollToRow=L.scrollToRow,ae.scrollbarSize=L.getScrollbarSize(),ae.scrollbarSize===void 0?(ae.scrollbarSizeMeasured=!1,ae.scrollbarSize=0):ae.scrollbarSizeMeasured=!0,K.instanceProps=ae,sr({},K,{},se,{},fe)}},{key:"_getEstimatedColumnSize",value:function(L){return typeof L.columnWidth=="number"?L.columnWidth:L.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(L){return typeof L.rowHeight=="number"?L.rowHeight:L.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(L){var U=L.prevState,K=L.scrollLeft,se=L.scrollTop,fe={scrollPositionChangeReason:sd};return typeof K=="number"&&0<=K&&(fe.scrollDirectionHorizontal=K>U.scrollLeft?1:-1,fe.scrollLeft=K),typeof se=="number"&&0<=se&&(fe.scrollDirectionVertical=se>U.scrollTop?1:-1,fe.scrollTop=se),typeof K=="number"&&0<=K&&K!==U.scrollLeft||typeof se=="number"&&0<=se&&se!==U.scrollTop?fe:{}}},{key:"_wrapSizeGetter",value:function(L){return typeof L=="function"?L:function(){return L}}},{key:"_getCalculatedScrollLeft",value:function(L,U){var K=L.columnCount,se=L.height,fe=L.scrollToAlignment,ae=L.scrollToColumn,Ce=L.width,Be=U.scrollLeft,Ne=U.instanceProps;if(0<K){var Ke=K-1,ft=ae<0?Ke:Math.min(Ke,ae),yt=Ne.rowSizeAndPositionManager.getTotalSize(),y=Ne.scrollbarSizeMeasured&&se<yt?Ne.scrollbarSize:0;return Ne.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:fe,containerSize:Ce-y,currentOffset:Be,targetIndex:ft})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(L,U){var K=U.scrollLeft,se=te._getCalculatedScrollLeft(L,U);return typeof se=="number"&&0<=se&&K!==se?te._getScrollToPositionStateUpdate({prevState:U,scrollLeft:se,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(L,U){var K=L.height,se=L.rowCount,fe=L.scrollToAlignment,ae=L.scrollToRow,Ce=L.width,Be=U.scrollTop,Ne=U.instanceProps;if(0<se){var Ke=se-1,ft=ae<0?Ke:Math.min(Ke,ae),yt=Ne.columnSizeAndPositionManager.getTotalSize(),y=Ne.scrollbarSizeMeasured&&Ce<yt?Ne.scrollbarSize:0;return Ne.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:fe,containerSize:K-y,currentOffset:Be,targetIndex:ft})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(L,U){var K=U.scrollTop,se=te._getCalculatedScrollTop(L,U);return typeof se=="number"&&0<=se&&K!==se?te._getScrollToPositionStateUpdate({prevState:U,scrollLeft:-1,scrollTop:se}):{}}}]),te}();bt(fs,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:ns,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:$o,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:uu,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),Ya(fs);function Za(te){var L=te.cellCount,U=te.overscanCellsCount,K=te.scrollDirection,se=te.startIndex,fe=te.stopIndex;return U=Math.max(1,U),K===1?{overscanStartIndex:Math.max(0,se-1),overscanStopIndex:Math.min(L-1,fe+U)}:{overscanStartIndex:Math.max(0,se-U),overscanStopIndex:Math.min(L-1,fe+1)}}r(Za,"defaultOverscanIndicesGetter$1");var qa=function(){function te(L,U){var K;return Qr(this,te),(K=Bo(this,Ro(te).call(this,L,U)))._loadMoreRowsMemoizer=Fs(),K._onRowsRendered=K._onRowsRendered.bind(Kt(K)),K._registerChild=K._registerChild.bind(Kt(K)),K}return r(te,"InfiniteLoader"),Fo(te,ci.PureComponent),no(te,[{key:"resetLoadMoreRowsCache",value:function(L){this._loadMoreRowsMemoizer=Fs(),L&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(L){var U=this,K=this.props.loadMoreRows;L.forEach(function(se){var fe=K(se);fe&&fe.then(function(){(function(ae){var Ce=ae.lastRenderedStartIndex,Be=ae.lastRenderedStopIndex,Ne=ae.startIndex,Ke=ae.stopIndex;return!(Be<Ne||Ke<Ce)})({lastRenderedStartIndex:U._lastRenderedStartIndex,lastRenderedStopIndex:U._lastRenderedStopIndex,startIndex:se.startIndex,stopIndex:se.stopIndex})&&U._registeredChild&&function(ae){var Ce=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Be=typeof ae.recomputeGridSize=="function"?ae.recomputeGridSize:ae.recomputeRowHeights;Be?Be.call(ae,Ce):ae.forceUpdate()}(U._registeredChild,U._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(L){var U=L.startIndex,K=L.stopIndex;this._lastRenderedStartIndex=U,this._lastRenderedStopIndex=K,this._doStuff(U,K)}},{key:"_doStuff",value:function(L,U){var K,se=this,fe=this.props,ae=fe.isRowLoaded,Ce=fe.minimumBatchSize,Be=fe.rowCount,Ne=fe.threshold,Ke=function(yt){for(var y=yt.isRowLoaded,T=yt.minimumBatchSize,D=yt.rowCount,M=yt.startIndex,H=yt.stopIndex,J=[],de=null,pe=null,Oe=M;Oe<=H;Oe++)y({index:Oe})?pe!==null&&(J.push({startIndex:de,stopIndex:pe}),de=pe=null):(pe=Oe,de===null&&(de=Oe));if(pe!==null){for(var _e=Math.min(Math.max(pe,de+T-1),D-1),Qe=pe+1;Qe<=_e&&!y({index:Qe});Qe++)pe=Qe;J.push({startIndex:de,stopIndex:pe})}if(J.length)for(var qe=J[0];qe.stopIndex-qe.startIndex+1<T&&0<qe.startIndex;){var St=qe.startIndex-1;if(y({index:St}))break;qe.startIndex=St}return J}({isRowLoaded:ae,minimumBatchSize:Ce,rowCount:Be,startIndex:Math.max(0,L-Ne),stopIndex:Math.min(Be-1,U+Ne)}),ft=(K=[]).concat.apply(K,gh(Ke.map(function(yt){return[yt.startIndex,yt.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){se._loadUnloadedRanges(Ke)},indices:{squashedUnloadedRanges:ft}})}},{key:"_registerChild",value:function(L){this._registeredChild=L}}]),te}();bt(qa,"propTypes",{children:ht.func.isRequired,isRowLoaded:ht.func.isRequired,loadMoreRows:ht.func.isRequired,minimumBatchSize:ht.number.isRequired,rowCount:ht.number.isRequired,threshold:ht.number.isRequired}),bt(qa,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var ad=function(){function te(){var L,U;Qr(this,te);for(var K=arguments.length,se=new Array(K),fe=0;fe<K;fe++)se[fe]=arguments[fe];return bt(Kt(U=Bo(this,(L=Ro(te)).call.apply(L,[this].concat(se)))),"Grid",void 0),bt(Kt(U),"_cellRenderer",function(ae){var Ce=ae.parent,Be=ae.rowIndex,Ne=ae.style,Ke=ae.isScrolling,ft=ae.isVisible,yt=ae.key,y=U.props.rowRenderer,T=Object.getOwnPropertyDescriptor(Ne,"width");return T&&T.writable&&(Ne.width="100%"),y({index:Be,style:Ne,isScrolling:Ke,isVisible:ft,key:yt,parent:Ce})}),bt(Kt(U),"_setRef",function(ae){U.Grid=ae}),bt(Kt(U),"_onScroll",function(ae){var Ce=ae.clientHeight,Be=ae.scrollHeight,Ne=ae.scrollTop;(0,U.props.onScroll)({clientHeight:Ce,scrollHeight:Be,scrollTop:Ne})}),bt(Kt(U),"_onSectionRendered",function(ae){var Ce=ae.rowOverscanStartIndex,Be=ae.rowOverscanStopIndex,Ne=ae.rowStartIndex,Ke=ae.rowStopIndex;(0,U.props.onRowsRendered)({overscanStartIndex:Ce,overscanStopIndex:Be,startIndex:Ne,stopIndex:Ke})}),U}return r(te,"List"),Fo(te,ci.PureComponent),no(te,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(L){var U=L.alignment,K=L.index;return this.Grid?this.Grid.getOffsetForCell({alignment:U,rowIndex:K,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(L){var U=L.columnIndex,K=L.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:K,columnIndex:U})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(L){var U=0<arguments.length&&L!==void 0?L:{},K=U.columnIndex,se=K===void 0?0:K,fe=U.rowIndex,ae=fe===void 0?0:fe;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ae,columnIndex:se})}},{key:"recomputeRowHeights",value:function(L){var U=0<arguments.length&&L!==void 0?L:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:U,columnIndex:0})}},{key:"scrollToPosition",value:function(L){var U=0<arguments.length&&L!==void 0?L:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:U})}},{key:"scrollToRow",value:function(L){var U=0<arguments.length&&L!==void 0?L:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:U})}},{key:"render",value:function(){var L=this.props,U=L.className,K=L.noRowsRenderer,se=L.scrollToIndex,fe=L.width,ae=es("ReactVirtualized__List",U);return ci.createElement(fs,us({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:ae,columnWidth:fe,columnCount:1,noContentRenderer:K,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:se}))}}]),te}();bt(ad,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Za,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Oa={ge:function(te,L,U,K,se){return typeof U=="function"?function(fe,ae,Ce,Be,Ne){for(var Ke=Ce+1;ae<=Ce;){var ft=ae+Ce>>>1;0<=Ne(fe[ft],Be)?Ce=(Ke=ft)-1:ae=1+ft}return Ke}(te,K===void 0?0:0|K,se===void 0?te.length-1:0|se,L,U):function(fe,ae,Ce,Be){for(var Ne=Ce+1;ae<=Ce;){var Ke=ae+Ce>>>1;Be<=fe[Ke]?Ce=(Ne=Ke)-1:ae=1+Ke}return Ne}(te,U===void 0?0:0|U,K===void 0?te.length-1:0|K,L)},gt:function(te,L,U,K,se){return typeof U=="function"?function(fe,ae,Ce,Be,Ne){for(var Ke=Ce+1;ae<=Ce;){var ft=ae+Ce>>>1;0<Ne(fe[ft],Be)?Ce=(Ke=ft)-1:ae=1+ft}return Ke}(te,K===void 0?0:0|K,se===void 0?te.length-1:0|se,L,U):function(fe,ae,Ce,Be){for(var Ne=Ce+1;ae<=Ce;){var Ke=ae+Ce>>>1;Be<fe[Ke]?Ce=(Ne=Ke)-1:ae=1+Ke}return Ne}(te,U===void 0?0:0|U,K===void 0?te.length-1:0|K,L)},lt:function(te,L,U,K,se){return typeof U=="function"?function(fe,ae,Ce,Be,Ne){for(var Ke=ae-1;ae<=Ce;){var ft=ae+Ce>>>1;Ne(fe[ft],Be)<0?ae=1+(Ke=ft):Ce=ft-1}return Ke}(te,K===void 0?0:0|K,se===void 0?te.length-1:0|se,L,U):function(fe,ae,Ce,Be){for(var Ne=ae-1;ae<=Ce;){var Ke=ae+Ce>>>1;fe[Ke]<Be?ae=1+(Ne=Ke):Ce=Ke-1}return Ne}(te,U===void 0?0:0|U,K===void 0?te.length-1:0|K,L)},le:function(te,L,U,K,se){return typeof U=="function"?function(fe,ae,Ce,Be,Ne){for(var Ke=ae-1;ae<=Ce;){var ft=ae+Ce>>>1;Ne(fe[ft],Be)<=0?ae=1+(Ke=ft):Ce=ft-1}return Ke}(te,K===void 0?0:0|K,se===void 0?te.length-1:0|se,L,U):function(fe,ae,Ce,Be){for(var Ne=ae-1;ae<=Ce;){var Ke=ae+Ce>>>1;fe[Ke]<=Be?ae=1+(Ne=Ke):Ce=Ke-1}return Ne}(te,U===void 0?0:0|U,K===void 0?te.length-1:0|K,L)},eq:function(te,L,U,K,se){return typeof U=="function"?function(fe,ae,Ce,Be,Ne){for(;ae<=Ce;){var Ke=ae+Ce>>>1,ft=Ne(fe[Ke],Be);if(ft===0)return Ke;ft<=0?ae=1+Ke:Ce=Ke-1}return-1}(te,K===void 0?0:0|K,se===void 0?te.length-1:0|se,L,U):function(fe,ae,Ce,Be){for(;ae<=Ce;){var Ne=ae+Ce>>>1,Ke=fe[Ne];if(Ke===Be)return Ne;Ke<=Be?ae=1+Ne:Ce=Ne-1}return-1}(te,U===void 0?0:0|U,K===void 0?te.length-1:0|K,L)}};function el(te,L,U,K,se){this.mid=te,this.left=L,this.right=U,this.leftPoints=K,this.rightPoints=se,this.count=(L?L.count:0)+(U?U.count:0)+K.length}r(el,"IntervalTreeNode");var ca=el.prototype;function tl(te,L){te.mid=L.mid,te.left=L.left,te.right=L.right,te.leftPoints=L.leftPoints,te.rightPoints=L.rightPoints,te.count=L.count}r(tl,"copy");function ld(te,L){var U=Zs(L);te.mid=U.mid,te.left=U.left,te.right=U.right,te.leftPoints=U.leftPoints,te.rightPoints=U.rightPoints,te.count=U.count}r(ld,"rebuild");function dd(te,L){var U=te.intervals([]);U.push(L),ld(te,U)}r(dd,"rebuildWithInterval");function cd(te,L){var U=te.intervals([]),K=U.indexOf(L);return K<0?0:(U.splice(K,1),ld(te,U),1)}r(cd,"rebuildWithoutInterval");function ud(te,L,U){for(var K=0;K<te.length&&te[K][0]<=L;++K){var se=U(te[K]);if(se)return se}}r(ud,"reportLeftRange");function fd(te,L,U){for(var K=te.length-1;0<=K&&te[K][1]>=L;--K){var se=U(te[K]);if(se)return se}}r(fd,"reportRightRange");function hd(te,L){for(var U=0;U<te.length;++U){var K=L(te[U]);if(K)return K}}r(hd,"reportRange");function ac(te,L){return te-L}r(ac,"compareNumbers");function nl(te,L){var U=te[0]-L[0];return U||te[1]-L[1]}r(nl,"compareBegin");function il(te,L){var U=te[1]-L[1];return U||te[0]-L[0]}r(il,"compareEnd");function Zs(te){if(te.length===0)return null;for(var L=[],U=0;U<te.length;++U)L.push(te[U][0],te[U][1]);L.sort(ac);var K=L[L.length>>1],se=[],fe=[],ae=[];for(U=0;U<te.length;++U){var Ce=te[U];Ce[1]<K?se.push(Ce):K<Ce[0]?fe.push(Ce):ae.push(Ce)}var Be=ae,Ne=ae.slice();return Be.sort(nl),Ne.sort(il),new el(K,Zs(se),Zs(fe),Be,Ne)}r(Zs,"createIntervalTree");function rl(te){this.root=te}r(rl,"IntervalTree"),ca.intervals=function(te){return te.push.apply(te,this.leftPoints),this.left&&this.left.intervals(te),this.right&&this.right.intervals(te),te},ca.insert=function(te){var L=this.count-this.leftPoints.length;if(this.count+=1,te[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+L)?dd(this,te):this.left.insert(te):this.left=Zs([te]);else if(te[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+L)?dd(this,te):this.right.insert(te):this.right=Zs([te]);else{var U=Oa.ge(this.leftPoints,te,nl),K=Oa.ge(this.rightPoints,te,il);this.leftPoints.splice(U,0,te),this.rightPoints.splice(K,0,te)}},ca.remove=function(te){var L=this.count-this.leftPoints;if(te[1]<this.mid)return this.left?3*(L-1)<4*(this.right?this.right.count:0)?cd(this,te):(fe=this.left.remove(te))===2?(this.left=null,this.count-=1,1):(fe===1&&(this.count-=1),fe):0;if(te[0]>this.mid)return this.right?3*(L-1)<4*(this.left?this.left.count:0)?cd(this,te):(fe=this.right.remove(te))===2?(this.right=null,this.count-=1,1):(fe===1&&(this.count-=1),fe):0;if(this.count===1)return this.leftPoints[0]===te?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===te){if(this.left&&this.right){for(var U=this,K=this.left;K.right;)K=(U=K).right;if(U===this)K.right=this.right;else{var se=this.left;fe=this.right,U.count-=K.count,U.right=K.left,K.left=se,K.right=fe}tl(this,K),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?tl(this,this.left):tl(this,this.right);return 1}for(se=Oa.ge(this.leftPoints,te,nl);se<this.leftPoints.length&&this.leftPoints[se][0]===te[0];++se)if(this.leftPoints[se]===te){for(this.count-=1,this.leftPoints.splice(se,1),fe=Oa.ge(this.rightPoints,te,il);fe<this.rightPoints.length&&this.rightPoints[fe][1]===te[1];++fe)if(this.rightPoints[fe]===te)return this.rightPoints.splice(fe,1),1}return 0;var fe},ca.queryPoint=function(te,L){if(te<this.mid)return this.left&&(U=this.left.queryPoint(te,L))?U:ud(this.leftPoints,te,L);if(te>this.mid){var U;return this.right&&(U=this.right.queryPoint(te,L))?U:fd(this.rightPoints,te,L)}return hd(this.leftPoints,L)},ca.queryInterval=function(te,L,U){var K;return te<this.mid&&this.left&&(K=this.left.queryInterval(te,L,U))||L>this.mid&&this.right&&(K=this.right.queryInterval(te,L,U))?K:L<this.mid?ud(this.leftPoints,L,U):te>this.mid?fd(this.rightPoints,te,U):hd(this.leftPoints,U)};var qs=rl.prototype;qs.insert=function(te){this.root?this.root.insert(te):this.root=new el(te[0],null,null,[te],[te])},qs.remove=function(te){if(this.root){var L=this.root.remove(te);return L===2&&(this.root=null),L!==0}return!1},qs.queryPoint=function(te,L){if(this.root)return this.root.queryPoint(te,L)},qs.queryInterval=function(te,L,U){if(te<=L&&this.root)return this.root.queryInterval(te,L,U)},Object.defineProperty(qs,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(qs,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var ol=function(){function te(){Qr(this,te),bt(this,"_columnSizeMap",{}),bt(this,"_intervalTree",function(L){return L&&L.length!==0?new rl(Zs(L)):new rl(null)}()),bt(this,"_leftMap",{})}return r(te,"PositionCache"),no(te,[{key:"estimateTotalHeight",value:function(L,U,K){var se=L-this.count;return this.tallestColumnSize+Math.ceil(se/U)*K}},{key:"range",value:function(L,U,K){var se=this;this._intervalTree.queryInterval(L,L+U,function(fe){var ae=mh(fe,3),Ce=ae[0],Be=(ae[1],ae[2]);return K(Be,se._leftMap[Be],Ce)})}},{key:"setPosition",value:function(L,U,K,se){this._intervalTree.insert([K,K+se,L]),this._leftMap[L]=U;var fe=this._columnSizeMap,ae=fe[U];fe[U]=ae===void 0?K+se:Math.max(ae,K+se)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var L=this._columnSizeMap,U=0;for(var K in L){var se=L[K];U=U===0?se:Math.min(U,se)}return U}},{key:"tallestColumnSize",get:function(){var L=this._columnSizeMap,U=0;for(var K in L){var se=L[K];U=Math.max(U,se)}return U}}]),te}(),sl=function(){function te(){var L,U;Qr(this,te);for(var K=arguments.length,se=new Array(K),fe=0;fe<K;fe++)se[fe]=arguments[fe];return bt(Kt(U=Bo(this,(L=Ro(te)).call.apply(L,[this].concat(se)))),"state",{isScrolling:!1,scrollTop:0}),bt(Kt(U),"_debounceResetIsScrollingId",void 0),bt(Kt(U),"_invalidateOnUpdateStartIndex",null),bt(Kt(U),"_invalidateOnUpdateStopIndex",null),bt(Kt(U),"_positionCache",new ol),bt(Kt(U),"_startIndex",null),bt(Kt(U),"_startIndexMemoized",null),bt(Kt(U),"_stopIndex",null),bt(Kt(U),"_stopIndexMemoized",null),bt(Kt(U),"_debounceResetIsScrollingCallback",function(){U.setState({isScrolling:!1})}),bt(Kt(U),"_setScrollingContainerRef",function(ae){U._scrollingContainer=ae}),bt(Kt(U),"_onScroll",function(ae){var Ce=U.props.height,Be=ae.currentTarget.scrollTop,Ne=Math.min(Math.max(0,U._getEstimatedTotalHeight()-Ce),Be);Be===Ne&&(U._debounceResetIsScrolling(),U.state.scrollTop!==Ne&&U.setState({isScrolling:!0,scrollTop:Ne}))}),U}return r(te,"Masonry"),Fo(te,ci.PureComponent),no(te,[{key:"clearCellPositions",value:function(){this._positionCache=new ol,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(L){var U=L.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=U,this._invalidateOnUpdateStopIndex=U):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,U),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,U))}},{key:"recomputeCellPositions",value:function(){var L=this._positionCache.count-1;this._positionCache=new ol,this._populatePositionCache(0,L),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(L){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==L.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Aa(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var L,U=this,K=this.props,se=K.autoHeight,fe=K.cellCount,ae=K.cellMeasurerCache,Ce=K.cellRenderer,Be=K.className,Ne=K.height,Ke=K.id,ft=K.keyMapper,yt=K.overscanByPixels,y=K.role,T=K.style,D=K.tabIndex,M=K.width,H=K.rowDirection,J=this.state,de=J.isScrolling,pe=J.scrollTop,Oe=[],_e=this._getEstimatedTotalHeight(),Qe=this._positionCache.shortestColumnSize,qe=this._positionCache.count,St=0;if(this._positionCache.range(Math.max(0,pe-yt),Ne+2*yt,function(kn,un,oi){var Ai;L=L===void 0?St=kn:(St=Math.min(St,kn),Math.max(L,kn)),Oe.push(Ce({index:kn,isScrolling:de,key:ft(kn),parent:U,style:(Ai={height:ae.getHeight(kn)},bt(Ai,H==="ltr"?"left":"right",un),bt(Ai,"position","absolute"),bt(Ai,"top",oi),bt(Ai,"width",ae.getWidth(kn)),Ai)}))}),Qe<pe+Ne+yt&&qe<fe)for(var _t=Math.min(fe-qe,Math.ceil((pe+Ne+yt-Qe)/ae.defaultHeight*M/ae.defaultWidth)),dn=qe;dn<qe+_t;dn++)L=dn,Oe.push(Ce({index:dn,isScrolling:de,key:ft(dn),parent:this,style:{width:ae.getWidth(dn)}}));return this._startIndex=St,this._stopIndex=L,ci.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:es("ReactVirtualized__Masonry",Be),id:Ke,onScroll:this._onScroll,role:y,style:sr({boxSizing:"border-box",direction:"ltr",height:se?"auto":Ne,overflowX:"hidden",overflowY:_e<Ne?"hidden":"auto",position:"relative",width:M,WebkitOverflowScrolling:"touch",willChange:"transform"},T),tabIndex:D},ci.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:_e,maxWidth:"100%",maxHeight:_e,overflow:"hidden",pointerEvents:de?"none":"",position:"relative"}},Oe))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var L=this._invalidateOnUpdateStartIndex,U=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(L,U),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var L=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Aa(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Ki(this._debounceResetIsScrollingCallback,L)}},{key:"_getEstimatedTotalHeight",value:function(){var L=this.props,U=L.cellCount,K=L.cellMeasurerCache,se=L.width,fe=Math.max(1,Math.floor(se/K.defaultWidth));return this._positionCache.estimateTotalHeight(U,fe,K.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var L=this.props,U=L.height,K=L.onScroll,se=this.state.scrollTop;this._onScrollMemoized!==se&&(K({clientHeight:U,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:se}),this._onScrollMemoized=se)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(L,U){for(var K=this.props,se=K.cellMeasurerCache,fe=K.cellPositioner,ae=L;ae<=U;ae++){var Ce=fe(ae),Be=Ce.left,Ne=Ce.top;this._positionCache.setPosition(ae,Be,Ne,se.getHeight(ae))}}}],[{key:"getDerivedStateFromProps",value:function(L,U){return L.scrollTop!==void 0&&U.scrollTop!==L.scrollTop?{isScrolling:!0,scrollTop:L.scrollTop}:null}}]),te}();function pd(){}r(pd,"noop"),bt(sl,"defaultProps",{autoHeight:!1,keyMapper:function(te){return te},onCellsRendered:pd,onScroll:pd,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),Ya(sl);var al=function(){function te(){var L=this,U=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Qr(this,te),bt(this,"_cellMeasurerCache",void 0),bt(this,"_columnIndexOffset",void 0),bt(this,"_rowIndexOffset",void 0),bt(this,"columnWidth",function(Be){var Ne=Be.index;L._cellMeasurerCache.columnWidth({index:Ne+L._columnIndexOffset})}),bt(this,"rowHeight",function(Be){var Ne=Be.index;L._cellMeasurerCache.rowHeight({index:Ne+L._rowIndexOffset})});var K=U.cellMeasurerCache,se=U.columnIndexOffset,fe=se===void 0?0:se,ae=U.rowIndexOffset,Ce=ae===void 0?0:ae;this._cellMeasurerCache=K,this._columnIndexOffset=fe,this._rowIndexOffset=Ce}return r(te,"CellMeasurerCacheDecorator"),no(te,[{key:"clear",value:function(L,U){this._cellMeasurerCache.clear(L+this._rowIndexOffset,U+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:0;return this._cellMeasurerCache.getHeight(L+this._rowIndexOffset,K+this._columnIndexOffset)}},{key:"getWidth",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:0;return this._cellMeasurerCache.getWidth(L+this._rowIndexOffset,K+this._columnIndexOffset)}},{key:"has",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:0;return this._cellMeasurerCache.has(L+this._rowIndexOffset,K+this._columnIndexOffset)}},{key:"set",value:function(L,U,K,se){this._cellMeasurerCache.set(L+this._rowIndexOffset,U+this._columnIndexOffset,K,se)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),te}(),Ma=function(){function te(L,U){var K;Qr(this,te),bt(Kt(K=Bo(this,Ro(te).call(this,L,U))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),bt(Kt(K),"_deferredInvalidateColumnIndex",null),bt(Kt(K),"_deferredInvalidateRowIndex",null),bt(Kt(K),"_bottomLeftGridRef",function(Ce){K._bottomLeftGrid=Ce}),bt(Kt(K),"_bottomRightGridRef",function(Ce){K._bottomRightGrid=Ce}),bt(Kt(K),"_cellRendererBottomLeftGrid",function(Ce){var Be=Ce.rowIndex,Ne=Ja(Ce,["rowIndex"]),Ke=K.props,ft=Ke.cellRenderer,yt=Ke.fixedRowCount;return Be===Ke.rowCount-yt?ci.createElement("div",{key:Ne.key,style:sr({},Ne.style,{height:20})}):ft(sr({},Ne,{parent:Kt(K),rowIndex:Be+yt}))}),bt(Kt(K),"_cellRendererBottomRightGrid",function(Ce){var Be=Ce.columnIndex,Ne=Ce.rowIndex,Ke=Ja(Ce,["columnIndex","rowIndex"]),ft=K.props,yt=ft.cellRenderer,y=ft.fixedColumnCount,T=ft.fixedRowCount;return yt(sr({},Ke,{columnIndex:Be+y,parent:Kt(K),rowIndex:Ne+T}))}),bt(Kt(K),"_cellRendererTopRightGrid",function(Ce){var Be=Ce.columnIndex,Ne=Ja(Ce,["columnIndex"]),Ke=K.props,ft=Ke.cellRenderer,yt=Ke.columnCount,y=Ke.fixedColumnCount;return Be===yt-y?ci.createElement("div",{key:Ne.key,style:sr({},Ne.style,{width:20})}):ft(sr({},Ne,{columnIndex:Be+y,parent:Kt(K)}))}),bt(Kt(K),"_columnWidthRightGrid",function(Ce){var Be=Ce.index,Ne=K.props,Ke=Ne.columnCount,ft=Ne.fixedColumnCount,yt=Ne.columnWidth,y=K.state,T=y.scrollbarSize;return y.showHorizontalScrollbar&&Be===Ke-ft?T:typeof yt=="function"?yt({index:Be+ft}):yt}),bt(Kt(K),"_onScroll",function(Ce){var Be=Ce.scrollLeft,Ne=Ce.scrollTop;K.setState({scrollLeft:Be,scrollTop:Ne});var Ke=K.props.onScroll;Ke&&Ke(Ce)}),bt(Kt(K),"_onScrollbarPresenceChange",function(Ce){var Be=Ce.horizontal,Ne=Ce.size,Ke=Ce.vertical,ft=K.state,yt=ft.showHorizontalScrollbar,y=ft.showVerticalScrollbar;if(Be!==yt||Ke!==y){K.setState({scrollbarSize:Ne,showHorizontalScrollbar:Be,showVerticalScrollbar:Ke});var T=K.props.onScrollbarPresenceChange;typeof T=="function"&&T({horizontal:Be,size:Ne,vertical:Ke})}}),bt(Kt(K),"_onScrollLeft",function(Ce){var Be=Ce.scrollLeft;K._onScroll({scrollLeft:Be,scrollTop:K.state.scrollTop})}),bt(Kt(K),"_onScrollTop",function(Ce){var Be=Ce.scrollTop;K._onScroll({scrollTop:Be,scrollLeft:K.state.scrollLeft})}),bt(Kt(K),"_rowHeightBottomGrid",function(Ce){var Be=Ce.index,Ne=K.props,Ke=Ne.fixedRowCount,ft=Ne.rowCount,yt=Ne.rowHeight,y=K.state,T=y.scrollbarSize;return y.showVerticalScrollbar&&Be===ft-Ke?T:typeof yt=="function"?yt({index:Be+Ke}):yt}),bt(Kt(K),"_topLeftGridRef",function(Ce){K._topLeftGrid=Ce}),bt(Kt(K),"_topRightGridRef",function(Ce){K._topRightGrid=Ce});var se=L.deferredMeasurementCache,fe=L.fixedColumnCount,ae=L.fixedRowCount;return K._maybeCalculateCachedStyles(!0),se&&(K._deferredMeasurementCacheBottomLeftGrid=0<ae?new al({cellMeasurerCache:se,columnIndexOffset:0,rowIndexOffset:ae}):se,K._deferredMeasurementCacheBottomRightGrid=0<fe||0<ae?new al({cellMeasurerCache:se,columnIndexOffset:fe,rowIndexOffset:ae}):se,K._deferredMeasurementCacheTopRightGrid=0<fe?new al({cellMeasurerCache:se,columnIndexOffset:fe,rowIndexOffset:0}):se),K}return r(te,"MultiGrid"),Fo(te,ci.PureComponent),no(te,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(L){var U=0<arguments.length&&L!==void 0?L:{},K=U.columnIndex,se=K===void 0?0:K,fe=U.rowIndex,ae=fe===void 0?0:fe;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,se):se,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,ae):ae}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(L){var U=0<arguments.length&&L!==void 0?L:{},K=U.columnIndex,se=K===void 0?0:K,fe=U.rowIndex,ae=fe===void 0?0:fe,Ce=this.props,Be=Ce.fixedColumnCount,Ne=Ce.fixedRowCount,Ke=Math.max(0,se-Be),ft=Math.max(0,ae-Ne);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:se,rowIndex:ft}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:Ke,rowIndex:ft}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:se,rowIndex:ae}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:Ke,rowIndex:ae}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var L=this.props,U=L.scrollLeft,K=L.scrollTop;if(0<U||0<K){var se={};0<U&&(se.scrollLeft=U),0<K&&(se.scrollTop=K),this.setState(se)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var L=this.props,U=L.onScroll,K=L.onSectionRendered,se=(L.onScrollbarPresenceChange,L.scrollLeft,L.scrollToColumn),fe=(L.scrollTop,L.scrollToRow),ae=Ja(L,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var Ce=this.state,Be=Ce.scrollLeft,Ne=Ce.scrollTop;return ci.createElement("div",{style:this._containerOuterStyle},ci.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(ae),this._renderTopRightGrid(sr({},ae,{onScroll:U,scrollLeft:Be}))),ci.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(sr({},ae,{onScroll:U,scrollTop:Ne})),this._renderBottomRightGrid(sr({},ae,{onScroll:U,onSectionRendered:K,scrollLeft:Be,scrollToColumn:se,scrollToRow:fe,scrollTop:Ne}))))}},{key:"_getBottomGridHeight",value:function(L){return L.height-this._getTopGridHeight(L)}},{key:"_getLeftGridWidth",value:function(L){var U=L.fixedColumnCount,K=L.columnWidth;if(this._leftGridWidth==null)if(typeof K=="function"){for(var se=0,fe=0;fe<U;fe++)se+=K({index:fe});this._leftGridWidth=se}else this._leftGridWidth=K*U;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(L){return L.width-this._getLeftGridWidth(L)}},{key:"_getTopGridHeight",value:function(L){var U=L.fixedRowCount,K=L.rowHeight;if(this._topGridHeight==null)if(typeof K=="function"){for(var se=0,fe=0;fe<U;fe++)se+=K({index:fe});this._topGridHeight=se}else this._topGridHeight=K*U;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var L=this._deferredInvalidateColumnIndex,U=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:L,rowIndex:U}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(L){var U=this.props,K=U.columnWidth,se=U.enableFixedColumnScroll,fe=U.enableFixedRowScroll,ae=U.height,Ce=U.fixedColumnCount,Be=U.fixedRowCount,Ne=U.rowHeight,Ke=U.style,ft=U.styleBottomLeftGrid,yt=U.styleBottomRightGrid,y=U.styleTopLeftGrid,T=U.styleTopRightGrid,D=U.width,M=L||ae!==this._lastRenderedHeight||D!==this._lastRenderedWidth,H=L||K!==this._lastRenderedColumnWidth||Ce!==this._lastRenderedFixedColumnCount,J=L||Be!==this._lastRenderedFixedRowCount||Ne!==this._lastRenderedRowHeight;(L||M||Ke!==this._lastRenderedStyle)&&(this._containerOuterStyle=sr({height:ae,overflow:"visible",width:D},Ke)),(L||M||J)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:D},this._containerBottomStyle={height:ae-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:D}),!L&&ft===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=sr({left:0,overflowX:"hidden",overflowY:se?"auto":"hidden",position:"absolute"},ft)),(L||H||yt!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=sr({left:this._getLeftGridWidth(this.props),position:"absolute"},yt)),!L&&y===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=sr({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},y)),(L||H||T!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=sr({left:this._getLeftGridWidth(this.props),overflowX:fe?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},T)),this._lastRenderedColumnWidth=K,this._lastRenderedFixedColumnCount=Ce,this._lastRenderedFixedRowCount=Be,this._lastRenderedHeight=ae,this._lastRenderedRowHeight=Ne,this._lastRenderedStyle=Ke,this._lastRenderedStyleBottomLeftGrid=ft,this._lastRenderedStyleBottomRightGrid=yt,this._lastRenderedStyleTopLeftGrid=y,this._lastRenderedStyleTopRightGrid=T,this._lastRenderedWidth=D}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(L){var U=L.enableFixedColumnScroll,K=L.fixedColumnCount,se=L.fixedRowCount,fe=L.rowCount,ae=L.hideBottomLeftGridScrollbar,Ce=this.state.showVerticalScrollbar;if(!K)return null;var Be=Ce?1:0,Ne=this._getBottomGridHeight(L),Ke=this._getLeftGridWidth(L),ft=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,yt=ae?Ke+ft:Ke,y=ci.createElement(fs,us({},L,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:K,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:Ne,onScroll:U?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,fe-se)+Be,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:yt}));return ae?ci.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:sr({},this._bottomLeftGridStyle,{height:Ne,width:Ke,overflowY:"hidden"})},y):y}},{key:"_renderBottomRightGrid",value:function(L){var U=L.columnCount,K=L.fixedColumnCount,se=L.fixedRowCount,fe=L.rowCount,ae=L.scrollToColumn,Ce=L.scrollToRow;return ci.createElement(fs,us({},L,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,U-K),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(L),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,fe-se),rowHeight:this._rowHeightBottomGrid,scrollToColumn:ae-K,scrollToRow:Ce-se,style:this._bottomRightGridStyle,width:this._getRightGridWidth(L)}))}},{key:"_renderTopLeftGrid",value:function(L){var U=L.fixedColumnCount,K=L.fixedRowCount;return U&&K?ci.createElement(fs,us({},L,{className:this.props.classNameTopLeftGrid,columnCount:U,height:this._getTopGridHeight(L),ref:this._topLeftGridRef,rowCount:K,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(L)})):null}},{key:"_renderTopRightGrid",value:function(L){var U=L.columnCount,K=L.enableFixedRowScroll,se=L.fixedColumnCount,fe=L.fixedRowCount,ae=L.scrollLeft,Ce=L.hideTopRightGridScrollbar,Be=this.state,Ne=Be.showHorizontalScrollbar,Ke=Be.scrollbarSize;if(!fe)return null;var ft=Ne?1:0,yt=this._getTopGridHeight(L),y=this._getRightGridWidth(L),T=Ne?Ke:0,D=yt,M=this._topRightGridStyle;Ce&&(D=yt+T,M=sr({},this._topRightGridStyle,{left:0}));var H=ci.createElement(fs,us({},L,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,U-se)+ft,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:D,onScroll:K?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:fe,scrollLeft:ae,style:M,tabIndex:null,width:y}));return Ce?ci.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:sr({},this._topRightGridStyle,{height:yt,width:y,overflowX:"hidden"})},H):H}}],[{key:"getDerivedStateFromProps",value:function(L,U){return L.scrollLeft!==U.scrollLeft||L.scrollTop!==U.scrollTop?{scrollLeft:L.scrollLeft!=null&&0<=L.scrollLeft?L.scrollLeft:U.scrollLeft,scrollTop:L.scrollTop!=null&&0<=L.scrollTop?L.scrollTop:U.scrollTop}:null}}]),te}();bt(Ma,"propTypes",{classNameBottomLeftGrid:ht.string.isRequired,classNameBottomRightGrid:ht.string.isRequired,classNameTopLeftGrid:ht.string.isRequired,classNameTopRightGrid:ht.string.isRequired,enableFixedColumnScroll:ht.bool.isRequired,enableFixedRowScroll:ht.bool.isRequired,fixedColumnCount:ht.number.isRequired,fixedRowCount:ht.number.isRequired,onScrollbarPresenceChange:ht.func,style:ht.object.isRequired,styleBottomLeftGrid:ht.object.isRequired,styleBottomRightGrid:ht.object.isRequired,styleTopLeftGrid:ht.object.isRequired,styleTopRightGrid:ht.object.isRequired,hideTopRightGridScrollbar:ht.bool,hideBottomLeftGridScrollbar:ht.bool}),bt(Ma,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),Ya(Ma);var md=function(){function te(L,U){var K;return Qr(this,te),(K=Bo(this,Ro(te).call(this,L,U))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},K._onScroll=K._onScroll.bind(Kt(K)),K}return r(te,"ScrollSync"),Fo(te,ci.PureComponent),no(te,[{key:"render",value:function(){var L=this.props.children,U=this.state,K=U.clientHeight,se=U.clientWidth,fe=U.scrollHeight,ae=U.scrollLeft,Ce=U.scrollTop,Be=U.scrollWidth;return L({clientHeight:K,clientWidth:se,onScroll:this._onScroll,scrollHeight:fe,scrollLeft:ae,scrollTop:Ce,scrollWidth:Be})}},{key:"_onScroll",value:function(L){var U=L.clientHeight,K=L.clientWidth,se=L.scrollHeight,fe=L.scrollLeft,ae=L.scrollTop,Ce=L.scrollWidth;this.setState({clientHeight:U,clientWidth:K,scrollHeight:se,scrollLeft:fe,scrollTop:ae,scrollWidth:Ce})}}]),te}();function ll(te){var L=te.dataKey,U=te.rowData;return typeof U.get=="function"?U.get(L):U[L]}r(ll,"defaultCellDataGetter");function dl(te){var L=te.cellData;return L==null?"":String(L)}r(dl,"defaultCellRenderer");function cl(te){var L=te.className,U=te.columns,K=te.style;return ci.createElement("div",{className:L,role:"row",style:K},U)}r(cl,"defaultHeaderRowRenderer"),bt(md,"propTypes",{children:ht.func.isRequired});var Eo={ASC:"ASC",DESC:"DESC"};function Ra(te){var L=te.sortDirection,U=es("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":L===Eo.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":L===Eo.DESC});return ci.createElement("svg",{className:U,width:18,height:18,viewBox:"0 0 24 24"},L===Eo.ASC?ci.createElement("path",{d:"M7 14l5-5 5 5z"}):ci.createElement("path",{d:"M7 10l5 5 5-5z"}),ci.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}r(Ra,"SortIndicator");function ul(te){var L=te.dataKey,U=te.label,K=te.sortBy,se=te.sortDirection,fe=K===L,ae=[ci.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof U=="string"?U:null},U)];return fe&&ae.push(ci.createElement(Ra,{key:"SortIndicator",sortDirection:se})),ae}r(ul,"defaultHeaderRenderer");function fl(te){var L=te.className,U=te.columns,K=te.index,se=te.key,fe=te.onRowClick,ae=te.onRowDoubleClick,Ce=te.onRowMouseOut,Be=te.onRowMouseOver,Ne=te.onRowRightClick,Ke=te.rowData,ft=te.style,yt={"aria-rowindex":K+1};return(fe||ae||Ce||Be||Ne)&&(yt["aria-label"]="row",yt.tabIndex=0,fe&&(yt.onClick=function(y){return fe({event:y,index:K,rowData:Ke})}),ae&&(yt.onDoubleClick=function(y){return ae({event:y,index:K,rowData:Ke})}),Ce&&(yt.onMouseOut=function(y){return Ce({event:y,index:K,rowData:Ke})}),Be&&(yt.onMouseOver=function(y){return Be({event:y,index:K,rowData:Ke})}),Ne&&(yt.onContextMenu=function(y){return Ne({event:y,index:K,rowData:Ke})})),ci.createElement("div",us({},yt,{className:L,key:se,role:"row",style:ft}),U)}r(fl,"defaultRowRenderer"),Ra.propTypes={sortDirection:ht.oneOf([Eo.ASC,Eo.DESC])};var ea=function(){function te(){return Qr(this,te),Bo(this,Ro(te).apply(this,arguments))}return r(te,"Column"),Fo(te,ci.Component),te}();bt(ea,"propTypes",{"aria-label":ht.string,cellDataGetter:ht.func,cellRenderer:ht.func,className:ht.string,columnData:ht.object,dataKey:ht.any.isRequired,defaultSortDirection:ht.oneOf([Eo.ASC,Eo.DESC]),disableSort:ht.bool,flexGrow:ht.number,flexShrink:ht.number,headerClassName:ht.string,headerRenderer:ht.func.isRequired,headerStyle:ht.object,id:ht.string,label:ht.node,maxWidth:ht.number,minWidth:ht.number,style:ht.object,width:ht.number.isRequired}),bt(ea,"defaultProps",{cellDataGetter:ll,cellRenderer:dl,defaultSortDirection:Eo.ASC,flexGrow:0,flexShrink:1,headerRenderer:ul,style:{}});var Pa=function(){function te(L){var U;return Qr(this,te),(U=Bo(this,Ro(te).call(this,L))).state={scrollbarWidth:0},U._createColumn=U._createColumn.bind(Kt(U)),U._createRow=U._createRow.bind(Kt(U)),U._onScroll=U._onScroll.bind(Kt(U)),U._onSectionRendered=U._onSectionRendered.bind(Kt(U)),U._setRef=U._setRef.bind(Kt(U)),U}return r(te,"Table"),Fo(te,ci.PureComponent),no(te,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(L){var U=L.alignment,K=L.index;return this.Grid?this.Grid.getOffsetForCell({alignment:U,rowIndex:K}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(L){var U=L.columnIndex,K=L.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:K,columnIndex:U})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(L){var U=0<arguments.length&&L!==void 0?L:{},K=U.columnIndex,se=K===void 0?0:K,fe=U.rowIndex,ae=fe===void 0?0:fe;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ae,columnIndex:se})}},{key:"recomputeRowHeights",value:function(L){var U=0<arguments.length&&L!==void 0?L:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:U})}},{key:"scrollToPosition",value:function(L){var U=0<arguments.length&&L!==void 0?L:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:U})}},{key:"scrollToRow",value:function(L){var U=0<arguments.length&&L!==void 0?L:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:U})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var L=qd.findDOMNode(this.Grid),U=L.clientWidth||0;return(L.offsetWidth||0)-U}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var L=this,U=this.props,K=U.children,se=U.className,fe=U.disableHeader,ae=U.gridClassName,Ce=U.gridStyle,Be=U.headerHeight,Ne=U.headerRowRenderer,Ke=U.height,ft=U.id,yt=U.noRowsRenderer,y=U.rowClassName,T=U.rowStyle,D=U.scrollToIndex,M=U.style,H=U.width,J=this.state.scrollbarWidth,de=fe?Ke:Ke-Be,pe=typeof y=="function"?y({index:-1}):y,Oe=typeof T=="function"?T({index:-1}):T;return this._cachedColumnStyles=[],ci.Children.toArray(K).forEach(function(_e,Qe){var qe=L._getFlexStyleForColumn(_e,_e.props.style);L._cachedColumnStyles[Qe]=sr({overflow:"hidden"},qe)}),ci.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":ci.Children.toArray(K).length,"aria-rowcount":this.props.rowCount,className:es("ReactVirtualized__Table",se),id:ft,role:"grid",style:M},!fe&&Ne({className:es("ReactVirtualized__Table__headerRow",pe),columns:this._getHeaderColumns(),style:sr({height:Be,overflow:"hidden",paddingRight:J,width:H},Oe)}),ci.createElement(fs,us({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:es("ReactVirtualized__Table__Grid",ae),cellRenderer:this._createRow,columnWidth:H,columnCount:1,height:de,id:void 0,noContentRenderer:yt,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:J,scrollToRow:D,style:sr({},Ce,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(L){var U=L.column,K=L.columnIndex,se=L.isScrolling,fe=L.parent,ae=L.rowData,Ce=L.rowIndex,Be=this.props.onColumnClick,Ne=U.props,Ke=Ne.cellDataGetter,ft=Ne.cellRenderer,yt=Ne.className,y=Ne.columnData,T=Ne.dataKey,D=Ne.id,M=ft({cellData:Ke({columnData:y,dataKey:T,rowData:ae}),columnData:y,columnIndex:K,dataKey:T,isScrolling:se,parent:fe,rowData:ae,rowIndex:Ce}),H=this._cachedColumnStyles[K],J=typeof M=="string"?M:null;return ci.createElement("div",{"aria-colindex":K+1,"aria-describedby":D,className:es("ReactVirtualized__Table__rowColumn",yt),key:"Row"+Ce+"-Col"+K,onClick:function(de){Be&&Be({columnData:y,dataKey:T,event:de})},role:"gridcell",style:H,title:J},M)}},{key:"_createHeader",value:function(L){var U,K,se,fe,ae,Ce=L.column,Be=L.index,Ne=this.props,Ke=Ne.headerClassName,ft=Ne.headerStyle,yt=Ne.onHeaderClick,y=Ne.sort,T=Ne.sortBy,D=Ne.sortDirection,M=Ce.props,H=M.columnData,J=M.dataKey,de=M.defaultSortDirection,pe=M.disableSort,Oe=M.headerRenderer,_e=M.id,Qe=M.label,qe=!pe&&y,St=es("ReactVirtualized__Table__headerColumn",Ke,Ce.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:qe}),_t=this._getFlexStyleForColumn(Ce,sr({},ft,{},Ce.props.headerStyle)),dn=Oe({columnData:H,dataKey:J,disableSort:pe,label:Qe,sortBy:T,sortDirection:D});if(qe||yt){var kn=T!==J?de:D===Eo.DESC?Eo.ASC:Eo.DESC,un=r(function(oi){qe&&y({defaultSortDirection:de,event:oi,sortBy:J,sortDirection:kn}),yt&&yt({columnData:H,dataKey:J,event:oi})},"onClick");ae=Ce.props["aria-label"]||Qe||J,fe="none",se=0,U=un,K=r(function(oi){oi.key!=="Enter"&&oi.key!==" "||un(oi)},"headerOnKeyDown")}return T===J&&(fe=D===Eo.ASC?"ascending":"descending"),ci.createElement("div",{"aria-label":ae,"aria-sort":fe,className:St,id:_e,key:"Header-Col"+Be,onClick:U,onKeyDown:K,role:"columnheader",style:_t,tabIndex:se},dn)}},{key:"_createRow",value:function(L){var U=this,K=L.rowIndex,se=L.isScrolling,fe=L.key,ae=L.parent,Ce=L.style,Be=this.props,Ne=Be.children,Ke=Be.onRowClick,ft=Be.onRowDoubleClick,yt=Be.onRowRightClick,y=Be.onRowMouseOver,T=Be.onRowMouseOut,D=Be.rowClassName,M=Be.rowGetter,H=Be.rowRenderer,J=Be.rowStyle,de=this.state.scrollbarWidth,pe=typeof D=="function"?D({index:K}):D,Oe=typeof J=="function"?J({index:K}):J,_e=M({index:K}),Qe=ci.Children.toArray(Ne).map(function(_t,dn){return U._createColumn({column:_t,columnIndex:dn,isScrolling:se,parent:ae,rowData:_e,rowIndex:K,scrollbarWidth:de})}),qe=es("ReactVirtualized__Table__row",pe),St=sr({},Ce,{height:this._getRowHeight(K),overflow:"hidden",paddingRight:de},Oe);return H({className:qe,columns:Qe,index:K,isScrolling:se,key:fe,onRowClick:Ke,onRowDoubleClick:ft,onRowRightClick:yt,onRowMouseOver:y,onRowMouseOut:T,rowData:_e,style:St})}},{key:"_getFlexStyleForColumn",value:function(L,U){var K=1<arguments.length&&U!==void 0?U:{},se="".concat(L.props.flexGrow," ").concat(L.props.flexShrink," ").concat(L.props.width,"px"),fe=sr({},K,{flex:se,msFlex:se,WebkitFlex:se});return L.props.maxWidth&&(fe.maxWidth=L.props.maxWidth),L.props.minWidth&&(fe.minWidth=L.props.minWidth),fe}},{key:"_getHeaderColumns",value:function(){var L=this,U=this.props,K=U.children;return(U.disableHeader?[]:ci.Children.toArray(K)).map(function(se,fe){return L._createHeader({column:se,index:fe})})}},{key:"_getRowHeight",value:function(L){var U=this.props.rowHeight;return typeof U=="function"?U({index:L}):U}},{key:"_onScroll",value:function(L){var U=L.clientHeight,K=L.scrollHeight,se=L.scrollTop;(0,this.props.onScroll)({clientHeight:U,scrollHeight:K,scrollTop:se})}},{key:"_onSectionRendered",value:function(L){var U=L.rowOverscanStartIndex,K=L.rowOverscanStopIndex,se=L.rowStartIndex,fe=L.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:U,overscanStopIndex:K,startIndex:se,stopIndex:fe})}},{key:"_setRef",value:function(L){this.Grid=L}},{key:"_setScrollbarWidth",value:function(){var L=this.getScrollbarWidth();this.setState({scrollbarWidth:L})}}]),te}();bt(Pa,"propTypes",{"aria-label":ht.string,"aria-labelledby":ht.string,autoHeight:ht.bool,children:function(te){for(var L=ci.Children.toArray(te.children),U=0;U<L.length;U++){var K=L[U].type;if(K!==ea&&!(K.prototype instanceof ea))return new Error("Table only accepts children of type Column")}},className:ht.string,disableHeader:ht.bool,estimatedRowSize:ht.number.isRequired,gridClassName:ht.string,gridStyle:ht.object,headerClassName:ht.string,headerHeight:ht.number.isRequired,headerRowRenderer:ht.func,headerStyle:ht.object,height:ht.number.isRequired,id:ht.string,noRowsRenderer:ht.func,onColumnClick:ht.func,onHeaderClick:ht.func,onRowClick:ht.func,onRowDoubleClick:ht.func,onRowMouseOut:ht.func,onRowMouseOver:ht.func,onRowRightClick:ht.func,onRowsRendered:ht.func,onScroll:ht.func.isRequired,overscanIndicesGetter:ht.func.isRequired,overscanRowCount:ht.number.isRequired,rowClassName:ht.oneOfType([ht.string,ht.func]),rowGetter:ht.func.isRequired,rowHeight:ht.oneOfType([ht.number,ht.func]).isRequired,rowCount:ht.number.isRequired,rowRenderer:ht.func,rowStyle:ht.oneOfType([ht.object,ht.func]).isRequired,scrollToAlignment:ht.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:ht.number.isRequired,scrollTop:ht.number,sort:ht.func,sortBy:ht.string,sortDirection:ht.oneOf([Eo.ASC,Eo.DESC]),style:ht.object,tabIndex:ht.number,width:ht.number.isRequired}),bt(Pa,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:Za,overscanRowCount:10,rowRenderer:fl,headerRowRenderer:cl,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var bs=[],ua=null,Bs=null;function gd(){Bs&&(Bs=null,Re.body&&ua!=null&&(Re.body.style.pointerEvents=ua),ua=null)}r(gd,"enablePointerEventsIfDisabled");function lc(){gd(),bs.forEach(function(te){return te.__resetIsScrolling()})}r(lc,"enablePointerEventsAfterDelayCallback");function Sd(te){te.currentTarget===j&&ua==null&&Re.body&&(ua=Re.body.style.pointerEvents,Re.body.style.pointerEvents="none"),function(){Bs&&Aa(Bs);var L=0;bs.forEach(function(U){L=Math.max(L,U.props.scrollingResetTimeInterval)}),Bs=Ki(lc,L)}(),bs.forEach(function(L){L.props.scrollElement===te.currentTarget&&L.__handleWindowScrollEvent()})}r(Sd,"onScrollWindow");function hl(te,L){bs.some(function(U){return U.props.scrollElement===L})||L.addEventListener("scroll",Sd),bs.push(te)}r(hl,"registerScrollListener");function vd(te,L){(bs=bs.filter(function(U){return U!==te})).length||(L.removeEventListener("scroll",Sd),Bs&&(Aa(Bs),gd()))}r(vd,"unregisterScrollListener");var pl=r(function(te){return te===j},"isWindow"),fa=r(function(te){return te.getBoundingClientRect()},"getBoundingBox");function yd(te,L){if(te){if(pl(te)){var U=j,K=U.innerHeight,se=U.innerWidth;return{height:typeof K=="number"?K:0,width:typeof se=="number"?se:0}}return fa(te)}return{height:L.serverHeight,width:L.serverWidth}}r(yd,"getDimensions");function Ed(te){return pl(te)&&Re.documentElement?{top:"scrollY"in j?j.scrollY:Re.documentElement.scrollTop,left:"scrollX"in j?j.scrollX:Re.documentElement.scrollLeft}:{top:te.scrollTop,left:te.scrollLeft}}r(Ed,"getScrollOffset");var bd=r(function(){return typeof j<"u"?j:void 0},"getWindow"),_d=function(){function te(){var L,U;Qr(this,te);for(var K=arguments.length,se=new Array(K),fe=0;fe<K;fe++)se[fe]=arguments[fe];return bt(Kt(U=Bo(this,(L=Ro(te)).call.apply(L,[this].concat(se)))),"_window",bd()),bt(Kt(U),"_isMounted",!1),bt(Kt(U),"_positionFromTop",0),bt(Kt(U),"_positionFromLeft",0),bt(Kt(U),"_detectElementResize",void 0),bt(Kt(U),"_child",void 0),bt(Kt(U),"state",sr({},yd(U.props.scrollElement,U.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),bt(Kt(U),"_registerChild",function(ae){!ae||ae instanceof Wr||lt.warn("WindowScroller registerChild expects to be passed Element or null"),U._child=ae,U.updatePosition()}),bt(Kt(U),"_onChildScroll",function(ae){var Ce=ae.scrollTop;if(U.state.scrollTop!==Ce){var Be=U.props.scrollElement;Be&&(typeof Be.scrollTo=="function"?Be.scrollTo(0,Ce+U._positionFromTop):Be.scrollTop=Ce+U._positionFromTop)}}),bt(Kt(U),"_registerResizeListener",function(ae){ae===j?j.addEventListener("resize",U._onResize,!1):U._detectElementResize.addResizeListener(ae,U._onResize)}),bt(Kt(U),"_unregisterResizeListener",function(ae){ae===j?j.removeEventListener("resize",U._onResize,!1):ae&&U._detectElementResize.removeResizeListener(ae,U._onResize)}),bt(Kt(U),"_onResize",function(){U.updatePosition()}),bt(Kt(U),"__handleWindowScrollEvent",function(){if(U._isMounted){var ae=U.props.onScroll,Ce=U.props.scrollElement;if(Ce){var Be=Ed(Ce),Ne=Math.max(0,Be.left-U._positionFromLeft),Ke=Math.max(0,Be.top-U._positionFromTop);U.setState({isScrolling:!0,scrollLeft:Ne,scrollTop:Ke}),ae({scrollLeft:Ne,scrollTop:Ke})}}}),bt(Kt(U),"__resetIsScrolling",function(){U.setState({isScrolling:!1})}),U}return r(te,"WindowScroller"),Fo(te,ci.PureComponent),no(te,[{key:"updatePosition",value:function(L){var U=0<arguments.length&&L!==void 0?L:this.props.scrollElement,K=this.props.onResize,se=this.state,fe=se.height,ae=se.width,Ce=this._child||qd.findDOMNode(this);if(Ce instanceof Wr&&U){var Be=function(Ke,ft){if(pl(ft)&&Re.documentElement){var yt=Re.documentElement,y=fa(Ke),T=fa(yt);return{top:y.top-T.top,left:y.left-T.left}}var D=Ed(ft),M=fa(Ke),H=fa(ft);return{top:M.top+D.top-H.top,left:M.left+D.left-H.left}}(Ce,U);this._positionFromTop=Be.top,this._positionFromLeft=Be.left}var Ne=yd(U,this.props);fe===Ne.height&&ae===Ne.width||(this.setState({height:Ne.height,width:Ne.width}),K({height:Ne.height,width:Ne.width}))}},{key:"componentDidMount",value:function(){var L=this.props.scrollElement;this._detectElementResize=qc(),this.updatePosition(L),L&&(hl(this,L),this._registerResizeListener(L)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(L){var U=this.props.scrollElement,K=L.scrollElement;K!==U&&K!=null&&U!=null&&(this.updatePosition(U),vd(this,K),hl(this,U),this._unregisterResizeListener(K),this._registerResizeListener(U))}},{key:"componentWillUnmount",value:function(){var L=this.props.scrollElement;L&&(vd(this,L),this._unregisterResizeListener(L)),this._isMounted=!1}},{key:"render",value:function(){var L=this.props.children,U=this.state,K=U.isScrolling,se=U.scrollTop,fe=U.scrollLeft,ae=U.height,Ce=U.width;return L({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:ae,isScrolling:K,scrollLeft:fe,scrollTop:se,width:Ce})}}]),te}();bt(_d,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:bd(),serverHeight:0,serverWidth:0}),_r.ArrowKeyStepper=ec,_r.AutoSizer=eu,_r.CellMeasurer=tc,_r.CellMeasurerCache=Sh,_r.Collection=oc,_r.Column=ea,_r.ColumnSizer=du,_r.Grid=fs,_r.InfiniteLoader=qa,_r.List=ad,_r.Masonry=sl,_r.MultiGrid=Ma,_r.ScrollSync=md,_r.SortDirection=Eo,_r.SortIndicator=Ra,_r.Table=Pa,_r.WindowScroller=_d,_r.accessibilityOverscanIndicesGetter=Za,_r.createMasonryCellPositioner=function(te){var L,U=te.cellMeasurerCache,K=te.columnCount,se=te.columnWidth,fe=te.spacer,ae=fe===void 0?0:fe;function Ce(Ne){for(var Ke=0,ft=1;ft<L.length;ft++)L[ft]<L[Ke]&&(Ke=ft);var yt=Ke*(se+ae),y=L[Ke]||0;return L[Ke]=y+U.getHeight(Ne)+ae,{left:yt,top:y}}r(Ce,"cellPositioner");function Be(){L=[];for(var Ne=0;Ne<K;Ne++)L[Ne]=0}return r(Be,"initOrResetDerivedValues"),Be(),Ce.reset=function(Ne){K=Ne.columnCount,se=Ne.columnWidth,ae=Ne.spacer,Be()},Ce},_r.createTableMultiSort=function(te){var L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},U=L.defaultSortBy,K=L.defaultSortDirection,se=K===void 0?{}:K;if(!te)throw Error('Required parameter "sortCallback" not specified');var fe=U||[],ae={};return fe.forEach(function(Ce){ae[Ce]=se[Ce]!==void 0?se[Ce]:"ASC"}),{sort:function(Ce){var Be=Ce.defaultSortDirection,Ne=Ce.event,Ke=Ce.sortBy;if(Ne.shiftKey)ae[Ke]!==void 0?ae[Ke]=ae[Ke]==="ASC"?"DESC":"ASC":(ae[Ke]=Be,fe.push(Ke));else if(Ne.ctrlKey||Ne.metaKey){var ft=fe.indexOf(Ke);0<=ft&&(fe.splice(ft,1),delete ae[Ke])}else fe.length=0,fe.push(Ke),Object.keys(ae).forEach(function(yt){yt!==Ke&&delete ae[yt]}),ae[Ke]!==void 0?ae[Ke]=ae[Ke]==="ASC"?"DESC":"ASC":ae[Ke]=Be;te({sortBy:fe,sortDirection:ae})},sortBy:fe,sortDirection:ae}},_r.defaultCellRangeRenderer=ns,_r.defaultOverscanIndicesGetter=uu,_r.defaultTableCellDataGetter=ll,_r.defaultTableCellRenderer=dl,_r.defaultTableHeaderRenderer=ul,_r.defaultTableHeaderRowRenderer=cl,_r.defaultTableRowRenderer=fl,Object.defineProperty(_r,"__esModule",{value:!0})}),s.exports}},3262078016:(B,l,d)=>{"use strict";d.r(l),d.d(l,{AiActionType:()=>Mn,AutocompleteActions:()=>be,CalloutBackgroundColor:()=>Ar,CalloutModificationProperty:()=>ni,CollabApi:()=>nn,CollabPopoverDismissSource:()=>st,CollabUrlType:()=>Zt,CommentFocusTarget:()=>wi,CommentLevel:()=>Mi,CommentUIContext:()=>Ui,DialogContext:()=>ze,DocBlockStyle:()=>G,DocInlineStyle:()=>Ue,EmbeddedMoveDirection:()=>xn,EmbeddedObjectType:()=>en,EmbeddedUIAttributes:()=>qn,EmbeddedUiAction:()=>bi,EmbeddedUiContext:()=>Ii,ErrorSource:()=>si,Feature:()=>me,FullTableModification:()=>Kn,GetSlackObjectFailureReason:()=>Se,GrafterUrls:()=>n,InlineFormattingType:()=>ye,NavigationTypeMetric:()=>le,OpenCommentScrollBehavior:()=>Ee,PlaceholderInsertionType:()=>_n,RichTextMessageAction:()=>Li,SectionInsertionType:()=>On,ShortcutModifier:()=>Me,SlackListContentRenderType:()=>dt,SlackObjectActionType:()=>ui,SlackObjectType:()=>k,SlackShortcutCommandType:()=>we,SlackShortcutMetricSource:()=>ee,SlackUnfurlContentRenderType:()=>Ct,TablePart:()=>Qt,TablePartModificationType:()=>Xi,TableSelectionAction:()=>xr,TableSelectionModification:()=>Pi,TemplateControlAction:()=>fr,TemplateType:()=>ii,ToastMessageContext:()=>pt,UnfurlType:()=>Nt});class f{constructor(){this.o=!1,this._=[]}run(){this.o=!0;const oe=this._;this._=[];for(let Re=0;Re<oe.length;Re++)oe[Re]()}add(oe){this.o?oe():this._.push(oe)}}r(f,"t");var h,p;(function(N){var oe;(oe=N.Op||(N.Op={}))[oe.DID_INITIALIZE=8]="DID_INITIALIZE",oe[oe.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(h||(h={})),function(N){var oe;(oe=N.Op||(N.Op={}))[oe.INIT=0]="INIT"}(p||(p={}));class m{constructor(oe){this.l=new Map,this.u=null,this.destinationFn=oe}setTransportHook(oe){this.u=oe}tearDown(){}addHandler(oe,Re){this.l.has(oe)&&this.logError(`Already had handler for op ${oe} will overwrite.`),this.l.set(oe,Re)}getHandler(oe){const Re=this.l.get(oe);return Re?this.u?(nt,Pt)=>{var En;return(En=this.u)===null||En===void 0||En.call(this,oe,nt,s.INCOMING),Re(nt,wn=>{var vn;return(vn=this.u)===null||vn===void 0||vn.call(this,oe,wn,s.OUTGOING_REPLY),Pt(wn)})}:Re:null}invoke(oe,Re,nt){var Pt;if((Pt=this.u)===null||Pt===void 0||Pt.call(this,oe,Re,s.OUTGOING),this.u&&nt){const vn=nt;nt=r(yn=>{var Rn;(Rn=this.u)===null||Rn===void 0||Rn.call(this,oe,yn,s.INCOMING_REPLY),vn(yn)},"i")}const En=this.destinationFn().getHandler(oe);if(!En)return void this.logError(`Bridge transport doesn't have handler for op ${oe}`);let wn;try{wn=En(Re,vn=>{nt?nt(vn):this.logError(`Invoke response received without callback for op ${oe}`)})}catch{a(oe,Re)}wn instanceof Promise&&wn.catch(vn=>a(oe,Re))}logError(oe){}}r(m,"s");let a=r((N,oe,Re)=>{let nt="";try{nt=JSON.stringify(oe)}catch{nt="(Unserializable message)"}},"n");var s,n,e;function t(N){return N?`${function(){var oe;const Re=(oe=new URLSearchParams(location.search).get("quip_js_path"))!==null&&oe!==void 0?oe:void 0;return Re&&/^remote-dev\d{4}$/.test(Re)?`https://app.${Re.split("-")[1]}.slack.com`:location.origin}()}${n.RDEVS_CONTROLLER_JS_PATH}`:n.CONTROLLER_JS}r(t,"E");function i(N){if(!N)return!1;const oe=N.indexOf(location.origin+"/")!=0,Re=N.includes("/canvas-rdev/collab/");return oe&&Re}r(i,"l"),function(N){N[N.INCOMING=1]="INCOMING",N[N.INCOMING_REPLY=2]="INCOMING_REPLY",N[N.OUTGOING=3]="OUTGOING",N[N.OUTGOING_REPLY=4]="OUTGOING_REPLY"}(s||(s={})),function(N){N.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",N.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",N.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded",N.RDEVS_EMBEDDED_JS_PATH="/canvas-rdev/collab/grafted/embedded?grafted=True&resource_bundle_name=collab_embedded",N.RDEVS_CONTROLLER_CSS_PATH="/canvas-rdev/collab/grafted/style?retina=True&mode=normal&less=collab%2Fcontroller.less",N.RDEVS_CONTROLLER_JS_PATH="/canvas-rdev/collab/canvas-remote-dev-vite?path=ts/src/collab/controller/bundle.ts"}(n||(n={})),function(N){N.BRIDGE_TRANSPORT_SET="bridge-transport-set",N.BRIDGE_TRANSPORT_READY="bridge-transport-ready",N.HANDLER_REGISTERED="handler-registered",N.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",N.MESSAGE_SENT="message_sent",N.MESSAGE_HANDLED="message-handled",N.INIT_SENT="init_sent",N.INIT_RECEIVED="init_received",N.DID_INIT_SENT="did_init_sent",N.DID_INIT_RECEIVED="did_init_received",N.BRIDGE_OPEN="bridge-open",N.ERROR="error",N.SYSTEMJS_LOADED="systemjs-loaded",N.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",N.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",N.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",N.PROBE="probe",N.OTHER="misc"}(e||(e={}));class o{constructor(oe){this.T=oe,this.A=[],this.S=[],this.O=[],this.N=[],this.I=[],this.L=Date.now(),this.onlyBefore("Handler registered late",e.HANDLER_REGISTERED,[e.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",e.MESSAGE_SENT,[e.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",e.MESSAGE_HANDLED,[e.BRIDGE_OPEN])}getTimeoutForPromise(){return o.TIMEOUT_FOR_PROMISE}fireEvent(oe,Re=null){if(this.S.filter(Pt=>Pt.beforeEvent==oe).forEach(Pt=>{Pt.afterEvents.some(En=>this.A.includes(En))&&Pt.message&&this.C(`${this.T}: ${Pt.message}`)}),this.O.filter(Pt=>Pt.afterEvent==oe).forEach(Pt=>{Pt.beforeEvents.some(En=>!this.A.includes(En))&&Pt.message&&this.C(`${this.T}: ${Pt.message}`)}),oe!=e.HANDLER_REGISTERED&&this.C(Re?Promise.resolve(Re).then(Pt=>`${oe}: ${Pt}`):oe),this.A.includes(oe))return;this.A.push(oe);const nt=[];this.N=this.N.filter(Pt=>!Pt.events.every(En=>this.A.includes(En))||(nt.push(Pt),!1)),nt.forEach(Pt=>{Pt.description&&this.C(`${oe} -> ${Pt.description}`),Pt.callback()})}after(oe,Re,nt=null){oe.every(Pt=>this.A.includes(Pt))?Re():(nt&&this.C(`${nt} deferred`),this.N.push({events:oe,description:nt,callback:Re}))}onlyBefore(oe,Re,nt){this.S.push({beforeEvent:Re,afterEvents:nt,message:oe})}onlyAfter(oe,Re,nt){this.O.push({beforeEvents:nt,afterEvent:Re,message:oe})}C(oe){if(this.I.length>o.MAX_INIT_LOG)return;const Re=Date.now()-this.L,nt=Promise.resolve(oe);this.I.push({timestamp:Re,message:nt}),nt.then(Pt=>{console.debug(`${this.T}: ${Pt}`)})}getInitLog(oe){const Re=(oe?this.I.slice(0,oe):this.I).map(async nt=>({t:nt.timestamp,e:await nt.message}));return Promise.all(Re).then(nt=>({id:this.T,log:nt}))}}r(o,"h"),o.MAX_INIT_LOG=50,o.TIMEOUT_FOR_PROMISE=3e4;function c(N,{logCallback:oe=r(()=>{},"e"),timeoutMillis:Re=3e4,name:nt="Unnamed",context:Pt=""}={}){return new Promise((En,wn)=>{let vn=window.setTimeout(()=>{vn=null,oe(`${nt} promise timed out: ${Pt}`),wn(new Error(`${nt} promise timed out`))},Re);const yn=r(()=>{vn&&(clearTimeout(vn),vn=null)},"E");N.then(Rn=>{vn?(yn(),En(Rn)):oe(`${nt} promise resolved after timeout: ${Pt}`)}).catch(Rn=>{vn?(yn(),wn(Rn)):oe(`${nt} promise rejected after timeout: ${Pt}`)})})}r(c,"a");function g(N,oe,Re,nt,Pt){const{span:En,closeSpanFn:wn}=nt.createBasicTraceSpan(Pt,Re,{[Je.URL]:N}),{closeSpanFn:vn}=nt.createBasicTraceSpan(En,He.HTTP_FETCH_HEADER),yn=new AbortController,Rn=setTimeout(()=>{yn.abort()},nt.bridgeInit.getTimeoutForPromise());return fetch(N,Object.assign({signal:yn.signal},oe)).catch(Fn=>{throw vn(Fn),Error(`${Re} fetch failed: ${Fn}`)}).then(Fn=>{if(clearTimeout(Rn),!Fn.ok)return vn(new Error(`returned ${Fn.status}`)),u(nt,Re,Fn,En).then(fi=>{throw Error(fi)});vn();const{closeSpanFn:yi}=nt.createBasicTraceSpan(En,He.HTTP_FETCH_CONTENT,{[Je.URL]:N});return Fn.text().catch(fi=>{throw yi(fi),fi}).then(fi=>{yi();const{closeSpanFn:Wi}=nt.createBasicTraceSpan(En,He.JSON_PARSE);try{const Zr=JSON.parse(fi);return Wi(),Zr}catch(Zr){throw Wi(new Error(`${Zr}`)),nt.bridgeInit.fireEvent(e.ERROR,u(nt,Re,Fn,null)),Zr}})}).finally(()=>{wn()})}r(g,"c");function S(N,oe,Re,nt,Pt=!1){const En=new AbortController,wn=setTimeout(()=>{En.abort()},Re.bridgeInit.getTimeoutForPromise());Re.bridgeInit.fireEvent(e.OTHER,`${oe} prefetch start`);const{span:vn,closeSpanFn:yn}=Re.createBasicTraceSpan(nt,He.MODULE_PREFETCH,{[Je.URL]:N}),{closeSpanFn:Rn}=Re.createBasicTraceSpan(vn,He.HTTP_FETCH_HEADER),Fn={method:"GET",mode:"cors",cache:"default",signal:En.signal};return Pt&&(Fn.credentials="include"),fetch(N,Fn).catch(yi=>{throw Rn(yi),Error(`${oe} fetch failed: ${yi}`)}).then(yi=>{if(!yi.ok)return Rn(new Error(`Returned ${yi.status}`)),u(Re,oe,yi,vn).then(Wi=>{throw Error(Wi)});Rn();const{closeSpanFn:fi}=Re.createBasicTraceSpan(vn,He.HTTP_FETCH_CONTENT);return yi.text().then(()=>{fi(),Re.bridgeInit.fireEvent(e.OTHER,`${oe} prefetch ok`)}).catch(Wi=>{throw fi(Wi),Wi})}).finally(()=>{yn(),clearTimeout(wn)})}r(S,"d");function u(N,oe,Re,nt){const{closeSpanFn:Pt}=N.createBasicTraceSpan(nt,He.HTTP_FETCH_CONTENT);return Re.text().then(En=>{const wn=function(yn){if(!yn||yn.trim().length==0)return"response body empty";try{const Rn=new DOMParser().parseFromString(yn,"text/html").documentElement.textContent;if(Rn&&Rn.trim().length>0)return Rn.trim().replace(/\s+/g," ").slice(0,50)}catch{}return yn.trim().slice(0,50)}(En),vn=`${oe} fetch returned ${Re.status}: ${wn}`;return Pt(new Error(vn)),vn}).catch(En=>{const wn=`${oe} fetch returned ${Re.status}: response body unavailable (${En})`;return Pt(new Error(wn)),wn})}r(u,"u");function v(N,oe,Re){let nt=null;const{id:Pt,promise:En}=function(yn){const Rn=Symbol(),Fn=new Promise(yi=>{$.push({id:Rn,callback:fi=>{yn(),yi(fi)}})});return X||(X=!0,window._collabInit=yi=>{var fi;(fi=$.shift())===null||fi===void 0||fi.callback(yi)}),{promise:Fn,id:Rn}}(()=>{var yn,Rn;(Rn=(yn=N==null?void 0:N.platformDelegate)===null||yn===void 0?void 0:yn.endTraceOrSpan)===null||Rn===void 0||Rn.call(yn,nt)}),wn=En.then(yn=>(N.bridgeInit.fireEvent(e.OTHER,"_collabInit called"),yn));return function(yn,Rn,Fn){return Rn.then(yi=>{if(yi.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:fi,closeSpanFn:Wi}=yn.createBasicTraceSpan(Fn,He.LOAD_CONTROLLER),Zr=yn.config.useGraftedMode?t(yn.config.isRemoteGraftingMode):yi.controller_entry_module_url;return function(gr,Un,hr,ar){hr&&(V=hr);const pn=gr.bridgeInit;if(A){const so=I;return pn.fireEvent(e.OTHER,`Collab ${so} is loading systemjs, reusing the promise`),A.then(()=>{pn.fireEvent(e.OTHER,`Systemjs promise reused from collab ${so} succeeded`)}).catch(Wr=>{throw pn.fireEvent(e.ERROR,`Systemjs promise reused from collab ${so} failed: ${Wr}`),Wr})}let Sr,Pn=null;if(w())pn.fireEvent(e.OTHER,"systemjs already loaded, running prepareImport"),Pn="System.prepareImport() promise resolved",Sr=c(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:pn.getTimeoutForPromise()});else{pn.fireEvent(e.OTHER,"No SystemJS found, loading it");const{span:so,closeSpanFn:Wr}=gr.createBasicTraceSpan(ar,He.LOAD_SYSTEMJS,{[Je.JS_PREFETCH_ENABLED]:"true",[Je.URL]:Un});Pn="systemjs script tag onload fired",Sr=function($r,yo,ue){return S(yo,"systemjs-module-loader",$r,ue,i(yo)).then(()=>{const ve=document.createElement("script");return new Promise((Le,at)=>{const{closeSpanFn:gt}=$r.createBasicTraceSpan(ue,He.SCRIPT_TAG);ve.src=yo,ve.defer=!0,ve.crossOrigin="anonymous",ve.onload=()=>{gt(),Le()},ve.onerror=Tt=>{const rn=Error(`systemjs onerror called: ${Tt}`);gt(rn),at(rn)},document.body.appendChild(ve)}).then(()=>{if(!w())throw Error("SystemJS not found after it was loaded")}).catch(Le=>{throw typeof System=="object"&&(delete window.System,$r.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs global object")),ve.onload=null,ve.onerror=null,ve.parentNode&&(ve.parentNode.removeChild(ve),$r.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs loader script tag")),Le})})}(gr,Un,so).finally(()=>{Wr()})}return I=gr.id,A=Sr.then(()=>{pn.fireEvent(e.SYSTEMJS_LOADED,Pn)}).finally(()=>{A=null,I=null}),A}(yn,yi.module_loader_url,yi.import_map,fi).then(()=>{var gr,Un;return _(Zr,(Un=(gr=yi.import_map)===null||gr===void 0?void 0:gr.imports)!==null&&Un!==void 0?Un:{},yn,fi)}).finally(()=>{Wi()})})}(N,oe,Re).then(()=>{var yn,Rn,Fn;return nt=(Fn=(Rn=(yn=N==null?void 0:N.platformDelegate)===null||yn===void 0?void 0:yn.startSpan)===null||Rn===void 0?void 0:Rn.call(yn,Re,He.AWAIT_CALLBACK))!==null&&Fn!==void 0?Fn:null,c(wn,{name:"_collabInit callback",timeoutMillis:N.bridgeInit.getTimeoutForPromise()}).catch(yi=>{var fi,Wi;throw(Wi=(fi=N==null?void 0:N.platformDelegate)===null||fi===void 0?void 0:fi.endTraceOrSpan)===null||Wi===void 0||Wi.call(fi,nt,{[Je.ERROR]:`${yi}`}),yi})}).catch(yn=>{var Rn;throw Rn=Pt,$=$.filter(Fn=>Fn.id!==Rn),yn})}r(v,"T");let E=null,b=null;function _(N,oe,Re,nt){const Pt=Re.bridgeInit;if(b){const yn=E;return Pt.fireEvent(e.OTHER,`Collab ${yn} is loading the controller, waiting for it to finish...`),b.then(()=>(Pt.fireEvent(e.OTHER,`Collab ${yn} module loading complete`),_(N,oe,Re,nt))).catch(Rn=>(Pt.fireEvent(e.OTHER,`Collab ${yn} module loading failed`),_(N,oe,Re,nt)))}if(Pt.fireEvent(e.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(Re.config.useSystemJsSharedFork&&!F){const yn=Object.keys(oe).filter(([Rn])=>Rn.endsWith("-ancillary.js"));F=yn.length>0?System.sharedFork(yn,oe):null}const En=System.fork(oe,F);Pt.fireEvent(e.OTHER,`controller module${System.isAlreadyLoaded(N)?" ":" not "}in systemjs cache`);const{span:wn,closeSpanFn:vn}=Re.createBasicTraceSpan(nt,He.LOAD_CONTROLLER_MODULE,{[Je.JS_PREFETCH_ENABLED]:"true",[Je.URL]:N});return b=S(N,"controller-module",Re,wn,i(N)).then(()=>{const{closeSpanFn:yn}=Re.createBasicTraceSpan(wn,He.SYSTEMJS_IMPORT_MODULE,{[Je.URL]:N}),Rn=[],Fn=new MutationObserver(yi=>{Rn.push(...C(yi))});return Fn.observe(document.head,{childList:!0}),En.import(N).then(()=>{yn(),Pt.fireEvent(e.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(yi=>{yn(yi),Rn.push(...C(Fn.takeRecords()));let fi=0;throw Rn.forEach(Wi=>{Wi.onload=null,Wi.onerror=null,Wi.parentNode&&(Wi.parentNode.removeChild(Wi),fi++)}),fi>0&&Pt.fireEvent(e.OTHER,`Cleaned up ${fi} SystemJS script tags`),System.resetInstantiationCache()&&Pt.fireEvent(e.OTHER,"SystemJS cache cleared"),yi}).finally(()=>{Fn.disconnect()})}).finally(()=>{vn(),E=null,b=null}),E=Re.id,b}r(_,"O");function C(N){const oe=[];return N.forEach(Re=>{Re.addedNodes.forEach(nt=>{nt instanceof HTMLScriptElement&&nt.getAttribute("systemjs")==="1"&&oe.push(nt)})}),oe}r(C,"N");let I=null,A=null;function w(){return typeof System=="object"&&typeof System.register=="function"}r(w,"C");function O(){if(!V)return console.warn("No import map data found"),[];const N=V.imports;return!N||typeof N!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(N).filter(oe=>typeof oe=="string"||oe instanceof String)}r(O,"R");const R={};let F,V,$=[],X=!1,Y=null;class ne extends m{constructor(oe,Re){super(Re),this.R=oe,this.m=oe.bridgeInit,this.D()}tearDown(){super.tearDown()}M(oe){var Re,nt;console.error("EmbeddedSameOriginBridgeTransport did not load",oe),oe&&console.error(oe.stack),this.m.fireEvent(e.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${oe}`),(nt=(Re=this.R.config.delegate)===null||Re===void 0?void 0:Re.didFailToInitialize)===null||nt===void 0||nt.call(Re,"exception",oe)}D(){var oe,Re,nt;const Pt=(nt=(Re=(oe=this.R.platformDelegate)===null||oe===void 0?void 0:oe.startTrace)===null||Re===void 0?void 0:Re.call(oe,He.COLLAB_INIT,{[Je.CONTROLLER_ID]:`${this.R.id}`}))!==null&&nt!==void 0?nt:null,En=function(vn,yn){const Rn=new FormData,{authToken:Fn,userJwt:yi,getSlackToken:fi,isGov:Wi,isPreload:Zr}=vn.config;Fn&&Rn.append("oauth_token",Fn),yi&&Rn.append("user_jwt",yi),fi&&Rn.append("token",fi()),Zr&&Rn.append("canvas_loadshed_priority","low");const gr=vn.config.xhrWithCredentials===!0?"include":void 0,Un=g(`${Ve(vn)}/collab/controller-init?format=map`,{method:"POST",body:Rn,credentials:gr},He.CONTROLLER_INIT,vn,yn).then(pn=>(vn.bridgeInit.fireEvent(e.CONTROLLER_INIT_DATA_FETCHED),pn)),hr=window.QUIP_VERSION_NAME||"server",ar=new URLSearchParams([["version-name",hr]]);return vn.config.language&&ar.append("language-code",vn.config.language),ar.append("cdn_fallback",`${vn.getAttemptNumber()}`),Wi&&ar.append("serve_gov","1"),Y=g(`${Ve(vn)}/collab/controller-resources?${ar.toString()}`,{method:"GET",credentials:gr},He.CONTROLLER_RESORCES,vn,yn).then(pn=>(vn.bridgeInit.fireEvent(e.CONTROLLER_RESOURCE_DATA_FETCHED),pn)).catch(pn=>(Y=null,vn.bridgeInit.fireEvent(e.ERROR,`controller-resources request failed: ${pn}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null,resources_version:""})),Promise.all([Un,Y]).then(pn=>{const[Sr,Pn]=pn;return Object.assign(Object.assign({},Sr),Pn)})}(this.R,Pt),wn=v(this.R,En,Pt);Promise.all([wn,En]).then(vn=>{var yn;const Rn=vn[0],Fn=vn[1];Rn.main(Fn.init_options,Fn.preserialized,this.R.config.getSlackToken?null:Fn.oauth_token,this.R.config.getSlackToken?null:Fn.oauth_token_expiry,(yn=this.R.config.getSlackToken)!==null&&yn!==void 0?yn:null,Ve(this.R),this.destinationFn(),Fn.js_initializer,Fn.user_id,this.R.config.xhrWithCredentials,this.R.config.enableWebCaching?Fn.web_cache_key:void 0,this.R.config.enableWebCaching?Fn.web_cache_key_version:void 0,this.R.config.requestsAreCors,Fn.body_classes,Fn.css_url,!!this.R.config.useGraftedMode,this.R.config.pathRewriteHook,!!this.R.config.isRemoteGraftingMode,Fn.resources_version),this.m.fireEvent(e.BRIDGE_TRANSPORT_READY)}).catch(vn=>this.M(vn)).finally(()=>{var vn,yn;(yn=(vn=this.R.platformDelegate)===null||vn===void 0?void 0:vn.endTraceOrSpan)===null||yn===void 0||yn.call(vn,Pt)})}logError(oe){this.m.fireEvent(e.ERROR,oe)}}r(ne,"P");class ie{constructor(oe){this.embeddedSide=new ne(oe,()=>this.controllerSide),this.controllerSide=new m(()=>this.embeddedSide)}}r(ie,"U");function ge(N,oe){let Re=null;for(const nt of function(Pt){const En=[];for(const wn of Object.keys(Pt))isNaN(Number(wn))&&En.push(wn);return En}(N))N[nt]===oe&&(Re=nt);return Re||(Re=String(oe)),Re+=` (${oe})`,Re}r(ge,"w");const Ie={[s.INCOMING]:"ToEmbedded",[s.OUTGOING]:"FromEmbedded",[s.INCOMING_REPLY]:"ReplyToEmbedded",[s.OUTGOING_REPLY]:"ReplyFromEmbedded"},We=[h.Op.DID_INITIALIZE,h.Op.DID_FAIL_TO_INITIALIZE],ct=[];class Ae{constructor(oe,Re){this.p=oe,this.v=Re,this.I=[],this.P=[],this.U={[Ie[s.INCOMING]]:{},[Ie[s.OUTGOING_REPLY]]:{},[Ie[s.OUTGOING]]:{},[Ie[s.INCOMING_REPLY]]:{}}}getHook(){const oe=this.I,Re=this.P,nt=this.U;return(Pt,En,wn)=>{var vn,yn;const Rn={ts:Date.now(),op:Pt,message:En,type:wn},Fn=Xe(wn,Pt);if((vn=(yn=nt[Ie[wn]])[Fn])!==null&&vn!==void 0||(yn[Fn]=0),nt[Ie[wn]][Fn]+=1,oe.length>=30)for(Re.push(Rn);Re.length>20;)Re.shift();else oe.push(Rn)}}getReport(oe=!0){var Re;return{collabInstanceId:this.p,collabInstanceTeamId:(Re=this.v)!==null&&Re!==void 0?Re:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:Fe(this.I,oe),recentLog:Fe(this.P,oe)}}}r(Ae,"F");function Fe(N,oe=!0){return N.map(Re=>{const nt={op:Xe(Re.type,Re.op),type:Ie[Re.type]};var Pt,En;return oe&&(Pt=Re.type,En=Re.op,!([s.INCOMING,s.OUTGOING_REPLY].includes(Pt)?We.includes(En):ct.includes(En)))||(nt.message=Re.message),oe||(nt.ts=Re.ts),nt})}r(Fe,"G");function Xe(N,oe){return[s.INCOMING,s.OUTGOING_REPLY].includes(N)?ge(h.Op,oe):ge(p.Op,oe)}r(Xe,"H");class Ge{constructor(oe){this.m=oe.bridgeInit,this.B=function(Re){return new ie(Re).embeddedSide}(oe),this.F=new Ae(oe.id,oe.config.teamId),this.m.fireEvent(e.BRIDGE_TRANSPORT_SET),this.B.setTransportHook(this.F.getHook())}init(oe){this.m.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(p.Op.INIT,oe),this.m.fireEvent(e.INIT_SENT)})}tearDown(){this.B.tearDown()}invoke(oe,Re){const nt=oe==p.Op.INIT,Pt=r(()=>{this.B.invoke(oe,Re),nt||this.m.fireEvent(e.MESSAGE_SENT,`Op ${oe}`)},"n");nt?Pt():this.m.after([e.BRIDGE_OPEN],Pt,`Send op ${oe}`)}addHandler(oe,Re){this.B.addHandler(oe,oe===h.Op.DID_INITIALIZE?Re:nt=>{this.m.after([e.BRIDGE_OPEN],()=>{Re(nt),this.m.fireEvent(e.MESSAGE_HANDLED,`Op ${oe}`)},`Handle op ${oe}`)})}getDebugReport(oe=!0){return this.F.getReport(oe)}}r(Ge,"V");class it{constructor(oe,Re){this.G=new WeakMap,this.H=oe,this.V=Re}get(){const oe=this.H.get();return this.K(oe)}getAsync(){return this.H.getAsync().then(oe=>this.K(oe))}listen(oe){let Re=this.G.get(oe);Re||(Re=r((nt,Pt)=>{oe(this.K(nt),this.V(Pt))},"e"),this.G.set(oe,Re)),this.H.listen(Re)}once(oe){let Re=this.G.get(oe);Re||(Re=r((nt,Pt)=>{oe(this.K(nt),this.V(Pt))},"e"),this.G.set(oe,Re)),this.H.once(Re)}unlisten(oe){const Re=this.G.get(oe);Re&&this.H.unlisten(Re)}K(oe){if(oe!==void 0)return this.V(oe)}}r(it,"y");class Dt{constructor(oe,Re){this.H=oe,this.$=Re}get(){return this.H.get()}getAsync(){const oe=this.H.getAsync();return new Promise((Re,nt)=>{oe.then(Pt=>{Pt?Re(Pt):this.H.once((En,wn)=>{Re(wn??this.$)})}).catch(nt)})}listen(oe){this.H.listen(oe)}unlisten(oe){this.H.unlisten(oe)}once(oe){this.H.once(oe)}}r(Dt,"K");var wt;(function(N){N[N.DOC_DISPLAY_TITLE=0]="DOC_DISPLAY_TITLE",N[N.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",N[N.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",N[N.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",N[N.SECTION_SNIPPET=4]="SECTION_SNIPPET",N[N.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",N[N.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",N[N.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",N[N.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",N[N.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",N[N.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",N[N.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",N[N.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",N[N.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",N[N.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",N[N.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",N[N.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE",N[N.PLACEHOLDERS_INFO=18]="PLACEHOLDERS_INFO",N[N.AI_ASSISTANT_OVERLAY_IS_OPEN=19]="AI_ASSISTANT_OVERLAY_IS_OPEN"})(wt||(wt={}));const Pe=new WeakMap;class xe{constructor(oe={}){this.Y=new Set,this.W=oe}add(oe,Re){if(!this.Y.has(oe)&&(this.Y.add(oe),Re&&Pe.set(oe,Re),this.Y.size===1)){const{didStartHavingListeners:nt}=this.W;nt&&nt()}}addOneShot(oe,Re){const nt=r((...Pt)=>{this.remove(nt),oe.apply(window,Pt)},"i");this.add(nt,Re)}remove(oe){if(this.Y.delete(oe)&&this.Y.size===0){const{didStopHavingListeners:Re}=this.W;Re&&Re()}}removeAll(){this.Y.forEach(oe=>this.remove(oe))}empty(){return this.Y.size===0}notify(...oe){if(this.Y.size===0)return;const{notifyDecorator:Re,catchError:nt}=this.W;let Pt;Re&&(Pt=Re());const En=Array.from(this.Y);for(let wn=0;wn<En.length;wn++)if(nt)try{En[wn].apply(window,oe)}catch(vn){nt(vn)}else En[wn].apply(window,oe);Pt&&Pt.clear()}debugGetDescriptions(){return Array.from(this.Y,(oe,Re)=>Pe.get(oe)||`<anonymous-${Re}>`)}}r(xe,"Y");class et{constructor(oe,Re,nt,Pt=!1){this.X=oe,this.J=Re,this.Z=nt,this.q=Pt;const En=r((wn,vn)=>{this.Y.notify(wn,vn)},"n");this.Y=new xe({didStartHavingListeners:()=>this.Z.addListener(oe,Re,En),didStopHavingListeners:()=>{this.Z.removeListener(oe,Re,En),this.q||this.Z.cleanupStorage(oe,Re)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(oe){this.Y.add(oe)}unlisten(oe){this.Y.remove(oe)}unlistenAll(){this.Y.removeAll()}once(oe){this.Y.addOneShot(oe)}}r(et,"W");class rt{constructor(oe){this.Y=new xe,this.tt=oe}set(oe){const Re=this.tt;this.tt=oe,this.Y.notify(Re,oe)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(oe){this.Y.add(oe)}unlisten(oe){this.Y.remove(oe)}once(oe){this.Y.addOneShot(oe)}}r(rt,"j");class je{constructor(oe){this.et=new Map,this.R=oe}didCreateDoc(oe,Re){const nt=this.et.get(oe);nt?(this.et.set(Re,nt),nt.idInternal.set(Re)):console.warn(`Could not find doc mapped to ID ${oe}`)}didDeleteDoc(oe){const Re=this.et.get(oe);Re==null||Re.deletedInternal.set(!0)}didTryToLoadWithTempId(oe){const Re=this.et.get(oe);Re==null||Re.didTryToLoadWithTempIdInternal.set(!0)}create(oe={}){const{title:Re,cannedDoc:nt,context:Pt,usesOnlyInlineTextComments:En,content:wn}=oe;return this.controllerAccess.docs.createDoc(Re,nt,Pt,En,wn).then(vn=>this.get(vn))}get(oe){let Re=this.et.get(oe);return Re||(Re=new Ft(oe,this.R),this.et.set(oe,Re)),Re}get controllerAccess(){return this.R.controllerAccess}setEditsDisabled(oe,Re){for(const nt of Xt.values())nt.doc().id.get()===oe&&nt.docEditor.setEditsDisabled(Re);this.controllerAccess.docs.reloadThread(oe)}getBlockKitThumbnail(oe,Re=!0,nt){const Pt=Lt(this.R),En=nt?`${oe}/${nt}`:oe;return new Dt(new et(wt.DOC_BLOCK_KIT_THUMBNAIL,En,Pt,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(wn=>(Re&&wn.blocks.length>0&&wn.blocks.shift(),wn))}getCannedDocName(oe){const Re=Lt(this.R);return new Dt(new et(wt.CANNED_DOC_NAME,oe,Re,!0),"").getAsync().then(nt=>nt.length===0?null:nt)}getSectionSnippet(oe){const Re=Lt(this.R);return new Dt(new et(wt.SECTION_SNIPPET,oe,Re,!0),"").getAsync()}setDebugOption(oe,Re){this.controllerAccess.docs.setDebugOption(oe,Re)}findSlackObject(oe,Re,nt){return this.controllerAccess.docs.findSlackObject(oe,Re,nt)}insertSlackObject(oe,Re,nt,Pt,En){return this.controllerAccess.docs.insertSlackObject(oe,Re,nt,Pt,En)}editLink(oe,Re,nt){this.controllerAccess.docs.editLink(oe,Re,nt)}loadData(oe,Re){return this.controllerAccess.docs.loadData([oe],Re)}it(){return Vt(this.R)}}r(je,"X");class Ft{constructor(oe,Re){this.st=null,this.id=this.idInternal=new rt(oe),this.R=Re;const nt=Lt(this.R);this.title=new et(wt.DOC_DISPLAY_TITLE,oe,nt),this.lastUpdated=new it(new et(wt.DOC_UPDATED_USEC,oe,nt,!0),Pt=>new Date(Pt/1e3)),this.lastUpdatedUsec=new et(wt.DOC_UPDATED_USEC,oe,nt,!0),this.lastUpdatedSlackUserId=new et(wt.DOC_LAST_UPDATED_USER_ID,oe,nt,!0),this.deleted=this.deletedInternal=new rt(!1),this.isEmpty=new et(wt.DOC_IS_EMPTY,oe,nt,!0),this.hasPerformedEditingAction=new rt(!1),this.hasFileUnfurls=new et(wt.DOC_HAS_FILE_UNFURLS,oe,nt,!0),this.templateControlsInfo=new et(wt.TEMPLATE_CONTROLS_BE,oe,nt,!0),this.lastNewSectionUpdated=new it(new et(wt.DOC_NEW_SECTION_USEC,oe,nt,!0),Pt=>new Date(Pt/1e3)),this.hasHeaderImage=new et(wt.DOC_HAS_HEADER_IMAGE,oe,nt,!0),this.didTryToLoadWithTempIdInternal=new rt(!1),this.placeholdersInfo=new et(wt.PLACEHOLDERS_INFO,oe,nt,!0)}getBlockKitThumbnailValue(){if(!this.st&&this.isCreated()){const oe=Lt(this.R);this.st=new it(new et(wt.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),oe,!0),JSON.parse)}return this.st}embed(oe,Re={mode:"editor"}){let nt=Gt.get(oe);return nt||(nt=new cn(this,oe,Re,this.R),Gt.set(oe,nt),nt.mount()),nt.doc()!==this&&console.error("There was a different document embedded in the container",oe),nt}isCreated(){return!this.idInternal.get().startsWith("temp:")}failedToCreate(){return!this.isCreated()&&this.deletedInternal.get()}triedToLoadTempId(){return this.didTryToLoadWithTempIdInternal.get()}}r(Ft,"J");const Gt=new WeakMap,Xt=new Map,sn={mode:"editor"};class cn{constructor(oe,Re,nt,Pt){this.rendered=new rt(!1),this.isRenderComplete=new rt(!1),this.isRenderStable=new rt(!1),this.failedToLoad=new rt(!1),this.loadInfo=new rt(void 0),this.editingActionPerformed=new rt(!1),this.loadError=new rt(void 0),this.editorContainer=new rt(void 0),this.nt=!1,this.rt=!1,this.ot=[],this._t=oe,this.Et=Re,this.W=Object.assign(Object.assign({},sn),nt),this.R=Pt,this.lt=`${gn}-${this.R.id}-${Ci++}`,this.ht=function(){const En=document.createElement("div");return En.classList.add("collab-root"),En}(),this.at(wt.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.at(wt.DOC_EMBED_SCROLL_POSITION),this.focusState=this.at(wt.DOC_EMBED_FOCUS_STATE),this.selectionState=this.at(wt.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.at(wt.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.at(wt.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.ct(wt.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.at(wt.DOC_HAS_HEADER_IMAGE),this.placeholdersInfo=this.at(wt.PLACEHOLDERS_INFO),this.aiAssistantOverlayIsOpen=this.at(wt.AI_ASSISTANT_OVERLAY_IS_OPEN),this.title=this._t.title,this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this.lt)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.R.controllerAccess}at(oe){const Re=Lt(this.R),nt=new et(oe,this.lt,Re,!1);return this.ot.push(nt),nt}ct(oe,Re){return new Dt(this.at(oe),Re)}onEditorLoadError(oe){console.info("[QUIP] Editor load error",oe),this.failedToLoad.set(!0),this.loadError.set(oe),this.ut()}didLoadModel(oe){this.loadInfo.set(oe)}didRender(oe){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(oe)}didFinishRender(){this.isRenderComplete.set(!0),this.isRenderStable.get()||this.isRenderStable.set(!0)}didFinishPartialStableRender(){this.isRenderStable.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this._t}docId(){return this._t.id.get()}containerElement(){return this.Et}frameName(){return this.lt}mount(){if(Xt.set(this.lt,this),!this.rt){const oe=this.ht;oe.style.visibility="hidden",this.Et.appendChild(oe);let Re=oe.ownerDocument.defaultView;Re||(console.warn(`Mounting ${this.lt} into element with no window`),Re=window),this.nt=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(oe)}),oe.style.visibility="visible",this.rt&&this.Tt(),this.rt=!0}this.nt&&this.Tt()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this.lt}. Frame loaded ${this.nt}`),this.nt&&(this.ut(),this.rendered.set(!1),this.isRenderStable.set(!1),this.isRenderComplete.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.nt=!1),this.rt&&(Gt.delete(this.Et),this.ht.remove(),this.rt=!1),this.ot.forEach(oe=>oe.unlistenAll()),Xt.delete(this.lt)}catch(oe){console.warn("[Quip] Error thrown in unmount",oe)}}waitForEmbeddedUiProvider(){return new Promise(oe=>{this.embeddedUiProvider?oe(this.embeddedUiProvider):this.At=oe})}it(){return Vt(this.R)}Tt(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this._t.id.get(),this.W)})}ut(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(oe){this.commentsUiProvider=oe,oe==null||oe.setDelegate(this.docEditor)}setAutocompleteUiProvider(oe){this.autocompleteUiProvider=oe,oe==null||oe.setDelegate(this.docEditor)}setPermalinkUiProvider(oe){this.permalinkUiProvider=oe}setEmbeddedUiProvider(oe){this.embeddedUiProvider=oe,this.At&&oe&&(this.At(oe),this.At=null)}setErrorUiProvider(oe){this.errorUiProvider=oe}setEditorUiConnector(oe){this.editorUiConnector=oe,oe==null||oe.setDelegate(this.docEditor)}}r(cn,"Q");class Bt{constructor(oe){this.St=oe}getFrameByName(oe){return this.St.get(oe)}withFrame(oe,Re){const nt=this.getFrameByName(oe);nt||console.warn(`Could not find a frame with name ${oe}.`),Re(nt)}}r(Bt,"z");const gn=`collab-doc-${(1e3*Math.random()).toString(36)}`;let Ci=0;class $n{constructor(){this.Ot=[],this.Nt=!1}get docs(){return this.It}get settings(){return this.Lt}get providers(){return this.Ct}run(oe){this.Nt?oe():this.Ot.push(oe)}setObjects({docs:oe,settings:Re,providers:nt}){this.Nt=!0,this.It=oe,this.Lt=Re,this.Ct=nt;for(const Pt of this.Ot)Pt();this.Ot=[]}}r($n,"it");let Sn=0;class nn{constructor(oe){this.id=Sn++,this.o=!1,this.Rt=!1,this.config=oe,this.platformDelegate=oe.delegate,this.bridgeInit=nn.Dt(`embedded ${this.id}`);const Re=new Ge(this);Wn.set(this,Re),this.controllerAccess=new $n,this.docs=new je(this),this.failedToInitialize=new rt(!1),this.initializationError=new rt(void 0),this.Mt()}Mt(){if(this.o)return void this.bridgeInit.fireEvent(e.ERROR,"Collab instance initialized more than once");const{appearance:oe,language:Re,delegate:nt,commentsDataProvider:Pt,bookmarksDataProvider:En,fileDataProvider:wn,slackListDataProvider:vn,slackObjectProvider:yn,features:Rn,documentEventProvider:Fn,underlineAllLinks:yi,enableAnimations:fi,displayEmojiAsPlainText:Wi,spellcheckEnabled:Zr,embeddedConfigProvider:gr,embeddedUiProvider:Un,topLevelTeamId:hr,anchorLinkProvider:ar,slackObjectUIProvider:pn,slackTextyHtmlConversionProvider:Sr,useSmartQuotesAndDashes:Pn,atomStorageProvider:so}=this.config,Wr=this.it();Wr.init({features:Rn,delegate:nt,anchorLinkProvider:ar,bookmarksDataProvider:En,commentsDataProvider:Pt,documentEventProvider:Fn,fileDataProvider:wn,slackListDataProvider:vn,slackObjectProvider:yn,slackObjectUIProvider:pn,slackTextyHtmlConversionProvider:Sr,mountedFrameProvider:new Bt(Xt),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(so)});const $r=new f;var yo,ue;$r.add(()=>{oe&&this.ft(oe),Re&&this.vt(Re),yi!==void 0&&this.setUnderlineAllLinks(yi),fi!==void 0&&this.setEnableAnimations(fi),Wi!==void 0&&this.setDisplayEmojiAsPlainText(Wi),Zr!==void 0&&this.setSpellcheckEnabled(Zr),hr&&this.Pt(hr),Pn!==void 0&&this.setUseSmartQuotesAndDashes(Pn)}),function(ve,Le,at){if(!at)return;const gt=at.supportedAutocompleteTypes;gt&&Le.add(()=>{ve.providers.registerAutocompleteTypes(gt)}),ve.run(()=>at.setDelegate(ve.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,$r,yn),function(ve,Le={},at,gt,Tt=rn=>{}){ve.addHandler(h.Op.DID_INITIALIZE,()=>{var rn;(rn=Le.didInitialize)===null||rn===void 0||rn.call(Le),at.run(),gt.fireEvent(e.DID_INIT_RECEIVED)}),ve.addHandler(h.Op.DID_FAIL_TO_INITIALIZE,({initError:rn})=>{var bn;Tt(rn),(bn=Le.didFailToInitialize)===null||bn===void 0||bn.call(Le,rn)})}(Wr,nt,$r,this.bridgeInit,ve=>{this.Ut(!0,ve)}),yo=this.controllerAccess,ue=Pt,yo.run(()=>{ue==null||ue.setDelegate(yo.providers.getCommentsDataProviderDelegate())}),function(ve,Le){ve.run(()=>{Le==null||Le.setDelegate(ve.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,En),function(ve,Le){ve.run(()=>Le==null?void 0:Le.setDelegate(ve.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,Fn),function(ve,Le,at){at&&Le.add(()=>{ve.providers.registerEmbeddedUiProvider(at.config())})}(this.controllerAccess,$r,gr||Un),this.o=!0,this.bridgeInit.fireEvent(e.HANDLER_REGISTRATION_FINISHED)}Ut(oe,Re){const nt=this.failedToInitialize,Pt=this.initializationError;nt.set(oe),Pt.set(Re)}static Dt(oe){const Re=new o(oe);return Re.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.INIT_SENT,e.DID_INIT_RECEIVED,e.HANDLER_REGISTRATION_FINISHED],()=>{Re.fireEvent(e.BRIDGE_OPEN)}),Re}controllerModuleUrls(){return O()}preload(){return!this.Rt&&(O().forEach(oe=>{if(!R[oe]){const Re=document.createElement("link");Re.rel="preload",Re.as="script",Re.href=oe,Re.crossOrigin="anonymous",R[oe]=Re,document.head.appendChild(Re)}}),this.Rt=!0,!0)}tearDown(){this.it().tearDown(),Wn.delete(this),this.Ut(!1),this.o=!1}createBasicTraceSpan(oe,Re,nt){var Pt,En,wn;const vn=(wn=(En=(Pt=this.platformDelegate)===null||Pt===void 0?void 0:Pt.startSpan)===null||En===void 0?void 0:En.call(Pt,oe,Re,nt))!==null&&wn!==void 0?wn:null;return vn?{span:vn,closeSpanFn:yn=>{var Rn,Fn;(Fn=(Rn=this.platformDelegate)===null||Rn===void 0?void 0:Rn.endTraceOrSpan)===null||Fn===void 0||Fn.call(Rn,vn,yn?{[Je.ERROR]:`${yn}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var oe;return(oe=this.config.attemptNumber)!==null&&oe!==void 0?oe:0}preloadThreads(oe,Re){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(oe,Re))}setAppearance(oe){this.config.appearance=oe,this.ft(oe)}setLanguage(oe){this.config.language=oe}setAppKeyboardFocusModeEnabled(oe,Re){this.wt(oe,Re)}ft(oe){this.controllerAccess.settings.setAppearance(oe)}vt(oe){this.controllerAccess.settings.setLanguage(oe)}wt(oe,Re){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(oe,Re)}Pt(oe){this.controllerAccess.settings.setDefaultTeamId(oe)}setUnderlineAllLinks(oe){this.controllerAccess.settings.setUnderlineLinks(oe)}setEnableAnimations(oe){this.controllerAccess.settings.setEnableAnimations(oe)}setDisplayEmojiAsPlainText(oe){this.controllerAccess.settings.setDisplayEmojiAsPlainText(oe)}setSpellcheckEnabled(oe){this.controllerAccess.settings.setSpellcheckEnabled(oe)}setUseSmartQuotesAndDashes(oe){this.controllerAccess.settings.setUseSmartQuotesAndDashes(oe)}async getInitLog(oe){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(oe)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(oe){for(let Re=o.MAX_INIT_LOG;Re>=0;Re--){const nt=JSON.stringify(await this.getInitLog(Re));if(nt.length<=oe)return nt}return"Failed to generate"}getDebugReport(oe){return this.getBridgeDebugReport(oe)}getBridgeDebugReport(oe=!0){return this.it().getDebugReport(oe)}it(){return Wn.get(this)}}r(nn,"nt");function Vt(N){return Wn.get(N)}r(Vt,"rt");const Wn=new Map;function Lt(N){return N.atomClient}r(Lt,"_t");const zt=document.querySelector("script[src*='/collab/embedded.js']"),It=zt==null?void 0:zt.src,z=It?new URL(It).origin:"https://prod.slack.quip.systems";function Ve(N){return N.config.origin||z}r(Ve,"at");var He,Je;(function(N){N.COLLAB_INIT="collab-init",N.CONTROLLER_INIT="controller-init",N.CONTROLLER_RESORCES="controller-resources",N.HTTP_FETCH_HEADER="http-fetch-header",N.HTTP_FETCH_CONTENT="http-fetch-content",N.JSON_PARSE="json-parse",N.LOAD_CONTROLLER="load-controller",N.AWAIT_CALLBACK="await-callback",N.LOAD_SYSTEMJS="load-systemjs",N.MODULE_PREFETCH="module-prefetch",N.SCRIPT_TAG="script-tag",N.LOAD_CONTROLLER_MODULE="load-controller-module",N.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})(He||(He={})),function(N){N.CONTROLLER_ID="controller-id",N.ERROR="error",N.JS_PREFETCH_ENABLED="js-prefetch-enabled",N.URL="url"}(Je||(Je={}));const Ye=(()=>{if(typeof d.g=="object")return d.g;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function lt(N,oe,Re){const nt=N.split(".");let Pt=Re||Ye;for(let En=0;En<nt.length;En++){const wn=nt[En];En===nt.length-1?Pt[wn]=oe:(wn in Pt||(Pt[wn]={}),Pt=Pt[wn])}}r(lt,"Tt");var le,Ue,G,Q,ye,Ee,pt,ze,st,me,Me,k,Se,be,we,ee,en,dt,Ct,xn,Qt,Xi,Pi,Kn,ni,Mn,qn,bi,xr,Zt,Nt,On,_n,si,vi,Mi,ui,Ii,wi,Ui,ii,fr,Li,Ar;(function(N){N[N.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",N[N.PERMALINK=1]="PERMALINK",N[N.POPOUT=2]="POPOUT"})(le||(le={})),function(N){N.BOLD="bold",N.ITALIC="italic",N.UNDERLINE="underline",N.STRIKETHROUGH="strikethrough",N.CODE="code",N.SUBSCRIPT="subscript",N.SUPERSCRIPT="superscript",N.LINK="link"}(Ue||(Ue={})),function(N){N.PLAIN="plain",N.H1="h1",N.H2="h2",N.H3="h3",N.CODE="code",N.BLOCKQUOTE="blockquote",N.LIST_BULLET="list_bullet",N.LIST_NUMBERED="list_numbered",N.LIST_CHECKLIST="list_checklist"}(G||(G={})),function(N){N.CACHE="cache",N.MEMORY="memory",N.NETWORK="network"}(Q||(Q={})),function(N){N.LINK="link",N.COMMENT="comment",N.REACTION="reaction",N.REFINEMENT="refinement"}(ye||(ye={})),function(N){N.NONE="none",N.SCROLL_TO_SECTION="scroll_to_section",N.FOCUS_SECTION="focus_section"}(Ee||(Ee={})),function(N){N[N.LINK_COPIED=0]="LINK_COPIED",N[N.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",N[N.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(pt||(pt={})),function(N){N[N.UNSUPPORTED_FILE_TYPE=0]="UNSUPPORTED_FILE_TYPE"}(ze||(ze={})),function(N){N[N.ANY=1]="ANY",N[N.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(st||(st={})),function(N){N[N.COMMENTS=0]="COMMENTS",N[N.FILE_UPLOADS=1]="FILE_UPLOADS",N[N.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",N[N.SPREADSHEETS=3]="SPREADSHEETS",N[N.HOVERCARDS=4]="HOVERCARDS",N[N.LINK_UNFURL=5]="LINK_UNFURL",N[N.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",N[N.REMINDERS=7]="REMINDERS",N[N.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",N[N.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",N[N.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",N[N.DOPE_TABLE=11]="DOPE_TABLE",N[N.UI_PARITY=12]="UI_PARITY",N[N.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",N[N.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",N[N.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",N[N.ANCHOR_LINKS=16]="ANCHOR_LINKS",N[N.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",N[N.IMAGE_CAPTION=18]="IMAGE_CAPTION",N[N.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",N[N.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",N[N.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",N[N.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",N[N.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",N[N.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",N[N.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",N[N.MENTIONS_SHARE=30]="MENTIONS_SHARE",N[N.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",N[N.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",N[N.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",N[N.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",N[N.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",N[N.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",N[N.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",N[N.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",N[N.INLINE_COMMENTS=40]="INLINE_COMMENTS",N[N.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",N[N.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",N[N.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",N[N.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",N[N.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",N[N.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",N[N.A11Y_CARET=47]="A11Y_CARET",N[N.BOOKMARKS=48]="BOOKMARKS",N[N.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",N[N.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",N[N.LENIENT_STARTUP=52]="LENIENT_STARTUP",N[N.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",N[N.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",N[N.STATIC_TITLES=55]="STATIC_TITLES",N[N.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",N[N.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",N[N.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",N[N.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",N[N.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",N[N.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",N[N.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",N[N.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",N[N.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",N[N.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",N[N.PADDING_RESIZING=66]="PADDING_RESIZING",N[N.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",N[N.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",N[N.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",N[N.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",N[N.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",N[N.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",N[N.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",N[N.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",N[N.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",N[N.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",N[N.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",N[N.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",N[N.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",N[N.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",N[N.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",N[N.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",N[N.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",N[N.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",N[N.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",N[N.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",N[N.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",N[N.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",N[N.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",N[N.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",N[N.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",N[N.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",N[N.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",N[N.SIMPLE_TABLES=97]="SIMPLE_TABLES",N[N.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",N[N.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",N[N.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",N[N.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",N[N.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",N[N.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",N[N.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",N[N.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",N[N.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",N[N.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",N[N.IMAGE_RESIZING=108]="IMAGE_RESIZING",N[N.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",N[N.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",N[N.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",N[N.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",N[N.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",N[N.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",N[N.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",N[N.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",N[N.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",N[N.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",N[N.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",N[N.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",N[N.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",N[N.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",N[N.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",N[N.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",N[N.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",N[N.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",N[N.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",N[N.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",N[N.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",N[N.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",N[N.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",N[N.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",N[N.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",N[N.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",N[N.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",N[N.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",N[N.UNFURL_EMBED=138]="UNFURL_EMBED",N[N.SLACK_REACT_17=139]="SLACK_REACT_17",N[N.ENABLE_REACT_18=140]="ENABLE_REACT_18",N[N.PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS=141]="PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS",N[N.DRAGGABLE_CONTROL=142]="DRAGGABLE_CONTROL",N[N.NEW_COLUMN_PLACEHOLDERS=143]="NEW_COLUMN_PLACEHOLDERS",N[N.CANVAS_LISTS_GA=144]="CANVAS_LISTS_GA",N[N.DOCUMENT_AUTOCOMPLETE=145]="DOCUMENT_AUTOCOMPLETE",N[N.CANVAS_DYNAMIC_LISTS=146]="CANVAS_DYNAMIC_LISTS",N[N.CANVAS_LISTS_CARDS=147]="CANVAS_LISTS_CARDS",N[N.MULTI_SECTION_DRAG=148]="MULTI_SECTION_DRAG",N[N.SMOOTHER_MARGIN_SELECTION=149]="SMOOTHER_MARGIN_SELECTION",N[N.WFB_BACK_TO_BASIC_APRIL_RELEASE=150]="WFB_BACK_TO_BASIC_APRIL_RELEASE",N[N.CANVAS_HEADER_IMAGE=151]="CANVAS_HEADER_IMAGE",N[N.AUTOSLUG_SLACK_CHANNELS=152]="AUTOSLUG_SLACK_CHANNELS",N[N.CANVAS_TITLE_UNFURL_DEFAULT=153]="CANVAS_TITLE_UNFURL_DEFAULT",N[N.CURSOR_AWARENESS=154]="CURSOR_AWARENESS",N[N.CANVAS_LISTS_EMBEDS=155]="CANVAS_LISTS_EMBEDS",N[N.CANVAS_DATE_MENTIONS=156]="CANVAS_DATE_MENTIONS",N[N.CANVAS_MOBILE_GENERIC_PLACEHOLDERS=157]="CANVAS_MOBILE_GENERIC_PLACEHOLDERS",N[N.SELECTION_AWARENESS=158]="SELECTION_AWARENESS",N[N.CANVAS_GROUP_MENTIONS=159]="CANVAS_GROUP_MENTIONS",N[N.CANVAS_SALES_TEMPLATES=160]="CANVAS_SALES_TEMPLATES",N[N.CALLOUTS=161]="CALLOUTS",N[N.CANVAS_LINK_HOVERCARD=162]="CANVAS_LINK_HOVERCARD",N[N.CANVAS_NATIVE_LIST_EMBED=163]="CANVAS_NATIVE_LIST_EMBED",N[N.MESSAGE_TO_CANVAS_BUTTON=165]="MESSAGE_TO_CANVAS_BUTTON",N[N.CANVAS_DYNAMIC_GUTTER=166]="CANVAS_DYNAMIC_GUTTER",N[N.TRANSIENT_SECTION_ENHANCEMENTS=167]="TRANSIENT_SECTION_ENHANCEMENTS",N[N.CANVAS_DATE_HOVERCARD=168]="CANVAS_DATE_HOVERCARD",N[N.MOBILE_COMMENT_ICON_UPDATE=169]="MOBILE_COMMENT_ICON_UPDATE",N[N.CRDTS_CLIENT=170]="CRDTS_CLIENT",N[N.MOBILE_CONTENT_REACTIONS=171]="MOBILE_CONTENT_REACTIONS",N[N.CANVAS_ANNOTATION_AUTO_HIGHLIGHTING=172]="CANVAS_ANNOTATION_AUTO_HIGHLIGHTING",N[N.CANVAS_REQUIRE_EXACT_MATCH_TO_OPEN_COMMENT_THREAD=173]="CANVAS_REQUIRE_EXACT_MATCH_TO_OPEN_COMMENT_THREAD",N[N.MOBILE_ADD_COMMENT_BOTTOM_SHEET=174]="MOBILE_ADD_COMMENT_BOTTOM_SHEET",N[N.CANVAS_GHOST_TEXT_ON_STYLED_SECTIONS=175]="CANVAS_GHOST_TEXT_ON_STYLED_SECTIONS",N[N.MOBILE_CONTENT_REACTIONS_AND_COMMENTS=176]="MOBILE_CONTENT_REACTIONS_AND_COMMENTS",N[N.CONTENT_REACTIONS_AND_COMMENTS=177]="CONTENT_REACTIONS_AND_COMMENTS",N[N.CANVAS_CHECKBOX_ANIMATIONS=178]="CANVAS_CHECKBOX_ANIMATIONS",N[N.MOBILE_SET_IN_CANVAS=179]="MOBILE_SET_IN_CANVAS",N[N.MOBILE_CANVAS_LEFT_PADDING=180]="MOBILE_CANVAS_LEFT_PADDING",N[N.CANVAS_AI_CONTENT_CREATION=181]="CANVAS_AI_CONTENT_CREATION",N[N.WORK_OBJECT_UNFURLS=182]="WORK_OBJECT_UNFURLS",N[N.ENABLE_LOCAL_HISTORY_LAYOUT_FIXERS=183]="ENABLE_LOCAL_HISTORY_LAYOUT_FIXERS",N[N.CANVAS_AI_GUTTER_ICON=184]="CANVAS_AI_GUTTER_ICON",N[N.LAZY_RENDERING=185]="LAZY_RENDERING"}(me||(me={})),function(N){N[N.NONE=0]="NONE",N[N.SHIFT=1]="SHIFT",N[N.ALT=2]="ALT",N[N.META=4]="META",N[N.CTRL=8]="CTRL",N[N.MOD=16]="MOD"}(Me||(Me={})),function(N){N[N.CHANNEL=0]="CHANNEL",N[N.USER=1]="USER",N[N.EMOJI=2]="EMOJI",N[N.FILE=4]="FILE",N[N.UNFURL=5]="UNFURL",N[N.DOCUMENT=6]="DOCUMENT",N[N.LINK=7]="LINK",N[N.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",N[N.PENDING_URL=10]="PENDING_URL",N[N.GENERIC=11]="GENERIC",N[N.TEMPLATE=12]="TEMPLATE",N[N.BACKGROUND=13]="BACKGROUND",N[N.WIDGET=14]="WIDGET",N[N.LIST=15]="LIST",N[N.LIST_RECORD=16]="LIST_RECORD",N[N.HEADER_IMAGE=17]="HEADER_IMAGE",N[N.SALESFORCE_RECORD=18]="SALESFORCE_RECORD",N[N.GROUP_MEMBERSHIP=19]="GROUP_MEMBERSHIP"}(k||(k={})),function(N){N[N.NOT_FOUND=0]="NOT_FOUND"}(Se||(Se={})),function(N){N[N.CLOSE=0]="CLOSE",N[N.SELECT=1]="SELECT",N[N.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",N[N.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(be||(be={})),function(N){N.CANVAS="insert-canvas",N.AUDIO="insert-audio",N.VIDEO="insert-video",N.FILE="insert-file",N.WORKFLOW="insert-workflow",N.PROFILE="insert-profile",N.LIST="insert-list",N.CALLOUT="insert-callout",N.CODE="inline-code",N.CHANNEL="ac-trigger-channel",N.CODEBLOCK="insert-codeblock",N.BLOCKQUOTE="insert-blockquote",N.PLAIN="insert-plain",N.H1="insert-h1",N.H2="insert-h2",N.H3="insert-h3",N.IMAGE="insert-image",N.TABLE="insert-table",N.CHECKLIST="insert-checklist",N.BULLET_LIST="insert-bullet-list",N.ORDERED_LIST="insert-ordered-list",N.DIVIDER="insert-divider",N.TWO_COLUMNS="layout-two-columns",N.THREE_COLUMNS="layout-three-columns",N.DATE_GENERIC="date-generic",N.DATE_TODAY="date-today",N.DATE_TOMORROW="date-tomorrow",N.DATE_YESTERDAY="date-yesterday",N.AI_ASSISTANT="ai-assistant",N.AI_ASSISTANT_CANVAS_SUMMARY="ai-assistant-canvas-summary",N.AI_ASSISTANT_CANVAS_ACTION_ITEMS="ai-assistant-canvas-action-items"}(we||(we={})),function(N){N.DEFAULT_SOURCE="canvas-shortcut-command"}(ee||(ee={})),function(N){N[N.SLACK_OBJECT=0]="SLACK_OBJECT",N[N.LINK=1]="LINK",N[N.HEADER=2]="HEADER",N[N.TEXT=3]="TEXT",N[N.DIVIDER=4]="DIVIDER",N[N.HYPERLINK=5]="HYPERLINK",N[N.TITLE=6]="TITLE",N[N.TABLE=7]="TABLE",N[N.DRAG_OVERLAY=8]="DRAG_OVERLAY",N[N.COMMENT_METADATA=9]="COMMENT_METADATA",N[N.INVITED_USER=10]="INVITED_USER",N[N.DATE=11]="DATE",N[N.BACKDROP=12]="BACKDROP",N[N.CALLOUT=13]="CALLOUT",N[N.AI_ASSISTANT=14]="AI_ASSISTANT"}(en||(en={})),function(N){N.STATIC="list-static",N.EMBED="list-embed"}(dt||(dt={})),function(N){N.STATIC="unfurl-static",N.EMBED="unfurl-embed",N.BUTTON="unfurl-button"}(Ct||(Ct={})),function(N){N[N.PREVIOUS=0]="PREVIOUS",N[N.NEXT=1]="NEXT"}(xn||(xn={})),function(N){N.ROW="row",N.COLUMN="column"}(Qt||(Qt={})),function(N){N.INSERT_BEFORE="insert_before",N.INSERT_AFTER="insert_after",N.DELETE="delete"}(Xi||(Xi={})),function(N){N.CLEAR_CONTENTS="clear_contents",N.MERGE_CELLS="merge_cells",N.UNMERGE_CELLS="unmerge_cells"}(Pi||(Pi={})),function(N){N.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",N.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",N.DISTRIBUTE_COLUMNS="distribute_columns",N.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(Kn||(Kn={})),function(N){N.BACKGROUND_COLOR="background_color"}(ni||(ni={})),function(N){N.INSERT_CONTENT="insert_content",N.ACCEPT_DRAFT="accept_draft",N.CANCEL_DRAFT="cancel_draft",N.HANDLE_STREAM_INIT="handle_stream_init",N.HANDLE_STREAM_UPDATE="handle_stream_update",N.HANDLE_STREAM_COMPLETE="handle_stream_complete"}(Mn||(Mn={})),function(N){N.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",N.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",N.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",N.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(qn||(qn={})),function(N){N[N.DISMISS_POPOVER=0]="DISMISS_POPOVER",N[N.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",N[N.COPY_OBJECT=2]="COPY_OBJECT",N[N.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",N[N.REPLACE_FILE=4]="REPLACE_FILE",N[N.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",N[N.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",N[N.SYNC_METADATA=7]="SYNC_METADATA",N[N.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",N[N.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",N[N.ADD_COLUMN=10]="ADD_COLUMN",N[N.MOVE_LINE=11]="MOVE_LINE",N[N.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",N[N.CHECK_ALL=13]="CHECK_ALL",N[N.UNCHECK_ALL=14]="UNCHECK_ALL",N[N.REMOVE_CHECKED=15]="REMOVE_CHECKED",N[N.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",N[N.SORT_ALPHA=17]="SORT_ALPHA",N[N.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",N[N.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",N[N.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",N[N.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",N[N.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",N[N.UNFURL_URL=23]="UNFURL_URL",N[N.MODIFY_TABLE=24]="MODIFY_TABLE",N[N.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",N[N.OPEN_POPOVER=26]="OPEN_POPOVER",N[N.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",N[N.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",N[N.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE",N[N.MESSAGE_UNFURL_CONFIRMATION=30]="MESSAGE_UNFURL_CONFIRMATION",N[N.UNFURL_URLS=31]="UNFURL_URLS",N[N.ADD_INVITED_USER_CARDS=32]="ADD_INVITED_USER_CARDS",N[N.SYNC_CONTENT_WIDTH=33]="SYNC_CONTENT_WIDTH",N[N.SET_DATE_MS=34]="SET_DATE_MS",N[N.SWITCH_LIST_VIEW=35]="SWITCH_LIST_VIEW",N[N.CONVERT_TABLE_TO_LIST=36]="CONVERT_TABLE_TO_LIST",N[N.HANDLE_MODAL_STATE_CHANGE=37]="HANDLE_MODAL_STATE_CHANGE",N[N.MODIFY_CALLOUT=38]="MODIFY_CALLOUT",N[N.CONVERT_TO_CALLOUT=39]="CONVERT_TO_CALLOUT",N[N.AI_INSERTION_ACTION=40]="AI_INSERTION_ACTION",N[N.CREATE_OR_VIEW_REACTION=41]="CREATE_OR_VIEW_REACTION"}(bi||(bi={})),function(N){N.MERGE="merge",N.UNMERGE="unmerge",N.CLEAR_CONTENTS="clear_contents"}(xr||(xr={})),function(N){N[N.SLACK_MESSAGE=0]="SLACK_MESSAGE",N[N.SLACK_FILE=1]="SLACK_FILE",N[N.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",N[N.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",N[N.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",N[N.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",N[N.SLACK_USER=5]="SLACK_USER",N[N.SLACK_CHANNEL=6]="SLACK_CHANNEL",N[N.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",N[N.SLACK_WIDGET=9]="SLACK_WIDGET",N[N.SLACK_EMBED=10]="SLACK_EMBED",N[N.SLACK_LIST=11]="SLACK_LIST",N[N.SLACK_LIST_RECORD=12]="SLACK_LIST_RECORD",N[N.SLACK_SALESFORCE_RECORD=13]="SLACK_SALESFORCE_RECORD"}(Zt||(Zt={})),function(N){N[N.CARD=0]="CARD",N[N.INLINE=1]="INLINE",N[N.LINK=2]="LINK",N[N.WIDGET=3]="WIDGET"}(Nt||(Nt={})),function(N){N.IMAGE="image",N.HORIZONTAL_RULE="horizontal-rule",N.CHECKLIST="checklist",N.NUMBERED_LIST="numbered-list",N.BULLETED_LIST="bullet-list",N.TABLE="table",N.CODE="code",N.TEXT_H1_STYLE="large-heading",N.TEXT_H2_STYLE="medium-heading",N.TEXT_H3_STYLE="small-heading",N.TEXT_PLAIN_STYLE="plain",N.BLOCKQUOTE="blockquote",N.LAYOUT="layout",N.EMOJI="emoji",N.DATE_MENTION="date-mention",N.CALLOUT="callout"}(On||(On={})),function(N){N.PROFILE="profile",N.WORKFLOW="workflow",N.LINK="link",N.IMAGE="image",N.CANVAS="canvas",N.VIDEO="video",N.AUDIO="audio",N.FILE="file",N.LIST="list",N.SALESFORCE_RECORD="sfrecord"}(_n||(_n={})),function(N){N[N.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",N[N.IO=2]="IO",N[N.LISTENER=3]="LISTENER",N[N.ELEMENT=4]="ELEMENT"}(si||(si={})),function(N){N[N.NONE=0]="NONE",N[N.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",N[N.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",N[N.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",N[N.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",N[N.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",N[N.SESSION_EXPIRED=6]="SESSION_EXPIRED",N[N.THREAD_CLOSED=7]="THREAD_CLOSED",N[N.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",N[N.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES",N[N.DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY=10]="DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY"}(vi||(vi={})),function(N){N[N.WRITE=0]="WRITE",N[N.READ=1]="READ",N[N.NONE=2]="NONE"}(Mi||(Mi={})),function(N){N.DOWNLOAD="download",N.EDIT_FILE="edit-file",N.OPEN_IN_NEW_WINDOW="open-in-new-window",N.PREVIEW_FILE="preview-file",N.VIEW_FULL_SCREEN="view-full-screen",N.SHARE="share"}(ui||(ui={})),function(N){N[N.HOVERCARD=0]="HOVERCARD",N[N.CARD=1]="CARD",N[N.HEADER=2]="HEADER",N[N.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",N[N.SECTION_MENU=4]="SECTION_MENU",N[N.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",N[N.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",N[N.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",N[N.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",N[N.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",N[N.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",N[N.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",N[N.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",N[N.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",N[N.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER",N[N.DATE_PICKER=15]="DATE_PICKER",N[N.MODAL_STATE_OBSERVER=16]="MODAL_STATE_OBSERVER",N[N.AI_ASSISTANT_OVERLAY=17]="AI_ASSISTANT_OVERLAY",N[N.EMOJI_PICKER=18]="EMOJI_PICKER",N[N.AI_SECTION_MENU=19]="AI_SECTION_MENU"}(Ii||(Ii={})),function(N){N.NONE="none",N.THREAD_ROOT="thread_root",N.THREAD_COMPOSER="thread_composer"}(wi||(wi={})),function(N){N[N.COMMENT=1]="COMMENT",N[N.REACTION=2]="REACTION"}(Ui||(Ui={})),function(N){N.TEXT="text",N.USER="user",N.CHANNEL="channel",N.DATE="date"}(ii||(ii={})),function(N){N.INSERT="insert",N.EDIT="edit",N.REMOVE="remove",N.SHOW_CREATION_POPOVER="show_creation_popover",N.HIGHLIGHT="highlight"}(fr||(fr={})),function(N){N.INSERT="insert",N.INITIATE_DRAG="initiate_drag"}(Li||(Li={}));class Zn{constructor(oe){this.gt=0,this.bt=-1,this.Bt=-1,this.Ft=-1,this.Gt=-1,this.Ht=void 0,this.Vt=void 0;const Re=oe.userAgent.toLowerCase(),nt=oe.platform;if(this.yt=Re.indexOf("webkit")!=-1,this.Kt=this.yt,this.kt=Re.indexOf("android")!=-1,this.$t=Re.indexOf("chrome")!=-1,this.Yt=Re.indexOf("edge/")!=-1,this.Wt=!1,this.$t&&(this.Wt=!0,this.Kt=!1,this.gt=parseInt(Re.match(/chrome\/(\d+)\./)[1],10)),this.jt=!this.$t&&Re.indexOf("safari")!=-1,this.Xt=Re.indexOf("gecko")!=-1&&Re.indexOf("like gecko")==-1,this.Jt=Re.indexOf("opera")!=-1,this.yt){const Pt=/applewebkit\/([\d.]+)/.exec(Re);Pt&&(this.bt=parseFloat(Pt[1]))}if(this.Xt){const Pt=/rv:([\d.]+)\)/.exec(Re);Pt&&(this.Bt=parseFloat(Pt[1]))}if(this.Yt){this.$t=!1,this.Wt=!1,this.yt=!1,this.Kt=!1,this.bt=-1,this.gt=0;const Pt=/edge\/([\d.]+)/.exec(Re);Pt&&(this.Ft=parseFloat(Pt[1]))}if(this.xt=nt.indexOf("Win")==0,this.Zt=nt.indexOf("Mac")==0,this.qt=nt.match(/^(iPad|iPhone|iPod)/)!==null,this.Qt=nt.match(/^(iPad)/)!==null,this.qt){const Pt=/(OS|os) (\d+)(_\d+)*\s/.exec(Re);Pt&&(this.Gt=parseInt(Pt[2]||"0",10))}}isWebKitLineage(){return this.yt}isWebKit(){return this.Kt}isBlink(){return this.Wt}webKitVersion(){return this.bt}isWindows(){return this.xt}isMac(){return this.Zt}isIOs(){return this.qt}iosMajorVersion(){return this.Gt}isIPad(){return this.Qt}isAndroid(){return this.kt}isChrome(){return this.$t}chromeVersion(){return this.gt}isSafari(){return this.jt}isGecko(){return this.Xt}geckoVersion(){return this.Bt}isOpera(){return this.Jt}isEdge(){return this.Yt}edgeVersion(){return this.Ft}isSmallScreen(){return this.Ht!==void 0?this.Ht=="small":this.qt?!this.Qt:!!this.kt&&Math.min(window.innerWidth,window.innerHeight)<630}isMediumScreen(){return this.Ht!==void 0&&this.Ht=="medium"}setScreenSizeOverride(oe){this.Ht=oe}isTablet(){return this.Vt!==void 0?!!this.Vt:!!this.qt&&this.Qt}setIsTabletOverride(oe){this.Vt=oe}isPhone(){return(this.isIOs()||this.isAndroid())&&!this.isTablet()}isMobile(){return this.isIOs()||this.isAndroid()}hasEmacsBindings(){return this.qt||this.Zt}consoleSupportsCss(){return this.Wt||this.Kt&&this.bt>=537||this.Xt}useAppStoreTimeout(){return this.qt&&this.bt<601}isSupportedBrowser(){return!!this.Wt||(this.yt?this.bt>=536:this.Xt?this.Bt>=21:!!this.Yt)}}r(Zn,"oe"),new Zn(navigator),function(N){N.GREEN="green",N.JADE="jade",N.BLUE="blue",N.INDIGO="indigo",N.PURPLE="purple",N.PINK="pink",N.ORANGE="orange",N.BROWN="brown",N.GRAY="gray"}(Ar||(Ar={})),lt("Collab",nn),lt("dumpCollabDebugReport",function(){Wn.forEach((N,oe)=>{oe.getInitLog().then(Re=>{console.log(`Collab instance ${oe.id} debug report:`,oe.getBridgeDebugReport(!1),Re)})})}),window.JS_CLIENT_HASH="kc6ySb4uzr4EjjnNNurnvA",window.QUIP_VERSION_NAME="quipbuild_2025_04_03T21_32_71e1601"},1874409785:function(B){(function(l,d){B.exports=d()})(this,function(){return function(l){var d={};function f(h){if(d[h])return d[h].exports;var p=d[h]={i:h,l:!1,exports:{}};return l[h].call(p.exports,p,p.exports,f),p.l=!0,p.exports}return r(f,"r"),f.m=l,f.c=d,f.d=function(h,p,m){f.o(h,p)||Object.defineProperty(h,p,{enumerable:!0,get:m})},f.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},f.t=function(h,p){if(1&p&&(h=f(h)),8&p||4&p&&typeof h=="object"&&h&&h.__esModule)return h;var m=Object.create(null);if(f.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:h}),2&p&&typeof h!="string")for(var a in h)f.d(m,a,function(s){return h[s]}.bind(null,a));return m},f.n=function(h){var p=h&&h.__esModule?function(){return h.default}:function(){return h};return f.d(p,"a",p),p},f.o=function(h,p){return Object.prototype.hasOwnProperty.call(h,p)},f.p="",f(f.s=90)}({17:function(l,d,f){"use strict";d.__esModule=!0,d.default=void 0;var h=f(18),p=function(){function m(){}return r(m,"e"),m.getFirstMatch=function(a,s){var n=s.match(a);return n&&n.length>0&&n[1]||""},m.getSecondMatch=function(a,s){var n=s.match(a);return n&&n.length>1&&n[2]||""},m.matchAndReturnConst=function(a,s,n){if(a.test(s))return n},m.getWindowsVersionName=function(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},m.getMacOSVersionName=function(a){var s=a.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(s.push(0),s[0]===10)switch(s[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},m.getAndroidVersionName=function(a){var s=a.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(s.push(0),!(s[0]===1&&s[1]<5))return s[0]===1&&s[1]<6?"Cupcake":s[0]===1&&s[1]>=6?"Donut":s[0]===2&&s[1]<2?"Eclair":s[0]===2&&s[1]===2?"Froyo":s[0]===2&&s[1]>2?"Gingerbread":s[0]===3?"Honeycomb":s[0]===4&&s[1]<1?"Ice Cream Sandwich":s[0]===4&&s[1]<4?"Jelly Bean":s[0]===4&&s[1]>=4?"KitKat":s[0]===5?"Lollipop":s[0]===6?"Marshmallow":s[0]===7?"Nougat":s[0]===8?"Oreo":s[0]===9?"Pie":void 0},m.getVersionPrecision=function(a){return a.split(".").length},m.compareVersions=function(a,s,n){n===void 0&&(n=!1);var e=m.getVersionPrecision(a),t=m.getVersionPrecision(s),i=Math.max(e,t),o=0,c=m.map([a,s],function(g){var S=i-m.getVersionPrecision(g),u=g+new Array(S+1).join(".0");return m.map(u.split("."),function(v){return new Array(20-v.length).join("0")+v}).reverse()});for(n&&(o=i-Math.min(e,t)),i-=1;i>=o;){if(c[0][i]>c[1][i])return 1;if(c[0][i]===c[1][i]){if(i===o)return 0;i-=1}else if(c[0][i]<c[1][i])return-1}},m.map=function(a,s){var n,e=[];if(Array.prototype.map)return Array.prototype.map.call(a,s);for(n=0;n<a.length;n+=1)e.push(s(a[n]));return e},m.find=function(a,s){var n,e;if(Array.prototype.find)return Array.prototype.find.call(a,s);for(n=0,e=a.length;n<e;n+=1){var t=a[n];if(s(t,n))return t}},m.assign=function(a){for(var s,n,e=a,t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[a].concat(i));var c=r(function(){var g=i[s];typeof g=="object"&&g!==null&&Object.keys(g).forEach(function(S){e[S]=g[S]})},"o");for(s=0,n=i.length;s<n;s+=1)c();return a},m.getBrowserAlias=function(a){return h.BROWSER_ALIASES_MAP[a]},m.getBrowserTypeByAlias=function(a){return h.BROWSER_MAP[a]||""},m}();d.default=p,l.exports=d.default},18:function(l,d,f){"use strict";d.__esModule=!0,d.ENGINE_MAP=d.OS_MAP=d.PLATFORMS_MAP=d.BROWSER_MAP=d.BROWSER_ALIASES_MAP=void 0,d.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},d.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},d.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},d.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},d.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(l,d,f){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=f(91))&&h.__esModule?h:{default:h},m=f(18);function a(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}r(a,"a");var s=function(){function n(){}r(n,"e");var e,t,i;return n.getParser=function(o,c){if(c===void 0&&(c=!1),typeof o!="string")throw new Error("UserAgent should be a string");return new p.default(o,c)},n.parse=function(o){return new p.default(o).getResult()},e=n,i=[{key:"BROWSER_MAP",get:function(){return m.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return m.ENGINE_MAP}},{key:"OS_MAP",get:function(){return m.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return m.PLATFORMS_MAP}}],(t=null)&&a(e.prototype,t),i&&a(e,i),n}();d.default=s,l.exports=d.default},91:function(l,d,f){"use strict";d.__esModule=!0,d.default=void 0;var h=n(f(92)),p=n(f(93)),m=n(f(94)),a=n(f(95)),s=n(f(17));function n(t){return t&&t.__esModule?t:{default:t}}r(n,"u");var e=function(){function t(o,c){if(c===void 0&&(c=!1),o==null||o==="")throw new Error("UserAgent parameter can't be empty");this._ua=o,this.parsedResult={},c!==!0&&this.parse()}r(t,"e");var i=t.prototype;return i.getUA=function(){return this._ua},i.test=function(o){return o.test(this._ua)},i.parseBrowser=function(){var o=this;this.parsedResult.browser={};var c=s.default.find(h.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.browser=c.describe(this.getUA())),this.parsedResult.browser},i.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},i.getBrowserName=function(o){return o?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},i.getBrowserVersion=function(){return this.getBrowser().version},i.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},i.parseOS=function(){var o=this;this.parsedResult.os={};var c=s.default.find(p.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.os=c.describe(this.getUA())),this.parsedResult.os},i.getOSName=function(o){var c=this.getOS().name;return o?String(c).toLowerCase()||"":c||""},i.getOSVersion=function(){return this.getOS().version},i.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},i.getPlatformType=function(o){o===void 0&&(o=!1);var c=this.getPlatform().type;return o?String(c).toLowerCase()||"":c||""},i.parsePlatform=function(){var o=this;this.parsedResult.platform={};var c=s.default.find(m.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.platform=c.describe(this.getUA())),this.parsedResult.platform},i.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},i.getEngineName=function(o){return o?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},i.parseEngine=function(){var o=this;this.parsedResult.engine={};var c=s.default.find(a.default,function(g){if(typeof g.test=="function")return g.test(o);if(g.test instanceof Array)return g.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.engine=c.describe(this.getUA())),this.parsedResult.engine},i.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},i.getResult=function(){return s.default.assign({},this.parsedResult)},i.satisfies=function(o){var c=this,g={},S=0,u={},v=0;if(Object.keys(o).forEach(function(O){var R=o[O];typeof R=="string"?(u[O]=R,v+=1):typeof R=="object"&&(g[O]=R,S+=1)}),S>0){var E=Object.keys(g),b=s.default.find(E,function(O){return c.isOS(O)});if(b){var _=this.satisfies(g[b]);if(_!==void 0)return _}var C=s.default.find(E,function(O){return c.isPlatform(O)});if(C){var I=this.satisfies(g[C]);if(I!==void 0)return I}}if(v>0){var A=Object.keys(u),w=s.default.find(A,function(O){return c.isBrowser(O,!0)});if(w!==void 0)return this.compareVersion(u[w])}},i.isBrowser=function(o,c){c===void 0&&(c=!1);var g=this.getBrowserName().toLowerCase(),S=o.toLowerCase(),u=s.default.getBrowserTypeByAlias(S);return c&&u&&(S=u.toLowerCase()),S===g},i.compareVersion=function(o){var c=[0],g=o,S=!1,u=this.getBrowserVersion();if(typeof u=="string")return o[0]===">"||o[0]==="<"?(g=o.substr(1),o[1]==="="?(S=!0,g=o.substr(2)):c=[],o[0]===">"?c.push(1):c.push(-1)):o[0]==="="?g=o.substr(1):o[0]==="~"&&(S=!0,g=o.substr(1)),c.indexOf(s.default.compareVersions(u,g,S))>-1},i.isOS=function(o){return this.getOSName(!0)===String(o).toLowerCase()},i.isPlatform=function(o){return this.getPlatformType(!0)===String(o).toLowerCase()},i.isEngine=function(o){return this.getEngineName(!0)===String(o).toLowerCase()},i.is=function(o,c){return c===void 0&&(c=!1),this.isBrowser(o,c)||this.isOS(o)||this.isPlatform(o)},i.some=function(o){var c=this;return o===void 0&&(o=[]),o.some(function(g){return c.is(g)})},t}();d.default=e,l.exports=d.default},92:function(l,d,f){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=f(17))&&h.__esModule?h:{default:h},m=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(s){var n={name:"Googlebot"},e=p.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/opera/i],describe:function(s){var n={name:"Opera"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/opr\/|opios/i],describe:function(s){var n={name:"Opera"},e=p.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/SamsungBrowser/i],describe:function(s){var n={name:"Samsung Internet for Android"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/Whale/i],describe:function(s){var n={name:"NAVER Whale Browser"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/MZBrowser/i],describe:function(s){var n={name:"MZ Browser"},e=p.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/focus/i],describe:function(s){var n={name:"Focus"},e=p.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/swing/i],describe:function(s){var n={name:"Swing"},e=p.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/coast/i],describe:function(s){var n={name:"Opera Coast"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(s){var n={name:"Opera Touch"},e=p.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/yabrowser/i],describe:function(s){var n={name:"Yandex Browser"},e=p.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/ucbrowser/i],describe:function(s){var n={name:"UC Browser"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/Maxthon|mxios/i],describe:function(s){var n={name:"Maxthon"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/epiphany/i],describe:function(s){var n={name:"Epiphany"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/puffin/i],describe:function(s){var n={name:"Puffin"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/sleipnir/i],describe:function(s){var n={name:"Sleipnir"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/k-meleon/i],describe:function(s){var n={name:"K-Meleon"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/micromessenger/i],describe:function(s){var n={name:"WeChat"},e=p.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/qqbrowser/i],describe:function(s){var n={name:/qqbrowserlite/i.test(s)?"QQ Browser Lite":"QQ Browser"},e=p.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/msie|trident/i],describe:function(s){var n={name:"Internet Explorer"},e=p.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/\sedg\//i],describe:function(s){var n={name:"Microsoft Edge"},e=p.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/edg([ea]|ios)/i],describe:function(s){var n={name:"Microsoft Edge"},e=p.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/vivaldi/i],describe:function(s){var n={name:"Vivaldi"},e=p.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/seamonkey/i],describe:function(s){var n={name:"SeaMonkey"},e=p.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/sailfish/i],describe:function(s){var n={name:"Sailfish"},e=p.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,s);return e&&(n.version=e),n}},{test:[/silk/i],describe:function(s){var n={name:"Amazon Silk"},e=p.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/phantom/i],describe:function(s){var n={name:"PhantomJS"},e=p.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/slimerjs/i],describe:function(s){var n={name:"SlimerJS"},e=p.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(s){var n={name:"BlackBerry"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/(web|hpw)[o0]s/i],describe:function(s){var n={name:"WebOS Browser"},e=p.default.getFirstMatch(m,s)||p.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/bada/i],describe:function(s){var n={name:"Bada"},e=p.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/tizen/i],describe:function(s){var n={name:"Tizen"},e=p.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/qupzilla/i],describe:function(s){var n={name:"QupZilla"},e=p.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/firefox|iceweasel|fxios/i],describe:function(s){var n={name:"Firefox"},e=p.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/electron/i],describe:function(s){var n={name:"Electron"},e=p.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/MiuiBrowser/i],describe:function(s){var n={name:"Miui"},e=p.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/chromium/i],describe:function(s){var n={name:"Chromium"},e=p.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,s)||p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/chrome|crios|crmo/i],describe:function(s){var n={name:"Chrome"},e=p.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/GSA/i],describe:function(s){var n={name:"Google Search"},e=p.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:function(s){var n=!s.test(/like android/i),e=s.test(/android/i);return n&&e},describe:function(s){var n={name:"Android Browser"},e=p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/playstation 4/i],describe:function(s){var n={name:"PlayStation 4"},e=p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/safari|applewebkit/i],describe:function(s){var n={name:"Safari"},e=p.default.getFirstMatch(m,s);return e&&(n.version=e),n}},{test:[/.*/i],describe:function(s){var n=s.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:p.default.getFirstMatch(n,s),version:p.default.getSecondMatch(n,s)}}}];d.default=a,l.exports=d.default},93:function(l,d,f){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=f(17))&&h.__esModule?h:{default:h},m=f(18),a=[{test:[/Roku\/DVP/],describe:function(s){var n=p.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,s);return{name:m.OS_MAP.Roku,version:n}}},{test:[/windows phone/i],describe:function(s){var n=p.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.WindowsPhone,version:n}}},{test:[/windows /i],describe:function(s){var n=p.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,s),e=p.default.getWindowsVersionName(n);return{name:m.OS_MAP.Windows,version:n,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(s){var n={name:m.OS_MAP.iOS},e=p.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,s);return e&&(n.version=e),n}},{test:[/macintosh/i],describe:function(s){var n=p.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,s).replace(/[_\s]/g,"."),e=p.default.getMacOSVersionName(n),t={name:m.OS_MAP.MacOS,version:n};return e&&(t.versionName=e),t}},{test:[/(ipod|iphone|ipad)/i],describe:function(s){var n=p.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,s).replace(/[_\s]/g,".");return{name:m.OS_MAP.iOS,version:n}}},{test:function(s){var n=!s.test(/like android/i),e=s.test(/android/i);return n&&e},describe:function(s){var n=p.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,s),e=p.default.getAndroidVersionName(n),t={name:m.OS_MAP.Android,version:n};return e&&(t.versionName=e),t}},{test:[/(web|hpw)[o0]s/i],describe:function(s){var n=p.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,s),e={name:m.OS_MAP.WebOS};return n&&n.length&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(s){var n=p.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,s)||p.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,s)||p.default.getFirstMatch(/\bbb(\d+)/i,s);return{name:m.OS_MAP.BlackBerry,version:n}}},{test:[/bada/i],describe:function(s){var n=p.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.Bada,version:n}}},{test:[/tizen/i],describe:function(s){var n=p.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.Tizen,version:n}}},{test:[/linux/i],describe:function(){return{name:m.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:m.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(s){var n=p.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,s);return{name:m.OS_MAP.PlayStation4,version:n}}}];d.default=a,l.exports=d.default},94:function(l,d,f){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=f(17))&&h.__esModule?h:{default:h},m=f(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(s){var n=p.default.getFirstMatch(/(can-l01)/i,s)&&"Nova",e={type:m.PLATFORMS_MAP.mobile,vendor:"Huawei"};return n&&(e.model=n),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:m.PLATFORMS_MAP.tablet}}},{test:function(s){var n=s.test(/ipod|iphone/i),e=s.test(/like (ipod|iphone)/i);return n&&!e},describe:function(s){var n=p.default.getFirstMatch(/(ipod|iphone)/i,s);return{type:m.PLATFORMS_MAP.mobile,vendor:"Apple",model:n}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:m.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:m.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getBrowserName(!0)==="blackberry"},describe:function(){return{type:m.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(s){return s.getBrowserName(!0)==="bada"},describe:function(){return{type:m.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getBrowserName()==="windows phone"},describe:function(){return{type:m.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(s){var n=Number(String(s.getOSVersion()).split(".")[0]);return s.getOSName(!0)==="android"&&n>=3},describe:function(){return{type:m.PLATFORMS_MAP.tablet}}},{test:function(s){return s.getOSName(!0)==="android"},describe:function(){return{type:m.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getOSName(!0)==="macos"},describe:function(){return{type:m.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(s){return s.getOSName(!0)==="windows"},describe:function(){return{type:m.PLATFORMS_MAP.desktop}}},{test:function(s){return s.getOSName(!0)==="linux"},describe:function(){return{type:m.PLATFORMS_MAP.desktop}}},{test:function(s){return s.getOSName(!0)==="playstation 4"},describe:function(){return{type:m.PLATFORMS_MAP.tv}}},{test:function(s){return s.getOSName(!0)==="roku"},describe:function(){return{type:m.PLATFORMS_MAP.tv}}}];d.default=a,l.exports=d.default},95:function(l,d,f){"use strict";d.__esModule=!0,d.default=void 0;var h,p=(h=f(17))&&h.__esModule?h:{default:h},m=f(18),a=[{test:function(s){return s.getBrowserName(!0)==="microsoft edge"},describe:function(s){if(/\sedg\//i.test(s))return{name:m.ENGINE_MAP.Blink};var n=p.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,s);return{name:m.ENGINE_MAP.EdgeHTML,version:n}}},{test:[/trident/i],describe:function(s){var n={name:m.ENGINE_MAP.Trident},e=p.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:function(s){return s.test(/presto/i)},describe:function(s){var n={name:m.ENGINE_MAP.Presto},e=p.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:function(s){var n=s.test(/gecko/i),e=s.test(/like gecko/i);return n&&!e},describe:function(s){var n={name:m.ENGINE_MAP.Gecko},e=p.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:m.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(s){var n={name:m.ENGINE_MAP.WebKit},e=p.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,s);return e&&(n.version=e),n}}];d.default=a,l.exports=d.default}})})},585669709:(B,l,d)=>{"use strict";d.r(l),d.d(l,{BotInfo:()=>a,BrowserInfo:()=>h,NodeInfo:()=>p,ReactNativeInfo:()=>s,SearchBotDeviceInfo:()=>m,browserName:()=>S,detect:()=>c,detectOS:()=>v,getNodeVersion:()=>E,parseUserAgent:()=>u});var f=function(_,C,I){if(I||arguments.length===2)for(var A=0,w=C.length,O;A<w;A++)(O||!(A in C))&&(O||(O=Array.prototype.slice.call(C,0,A)),O[A]=C[A]);return _.concat(O||Array.prototype.slice.call(C))},h=function(){function _(C,I,A){this.name=C,this.version=I,this.os=A,this.type="browser"}return r(_,"BrowserInfo"),_}(),p=function(){function _(C){this.version=C,this.type="node",this.name="node",this.os=(void 0).platform}return r(_,"NodeInfo"),_}(),m=function(){function _(C,I,A,w){this.name=C,this.version=I,this.os=A,this.bot=w,this.type="bot-device"}return r(_,"SearchBotDeviceInfo"),_}(),a=function(){function _(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r(_,"BotInfo"),_}(),s=function(){function _(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r(_,"ReactNativeInfo"),_}(),n=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t=3,i=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",n]],o=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function c(_){return _?u(_):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new s:typeof navigator<"u"?u(navigator.userAgent):E()}r(c,"detect");function g(_){return _!==""&&i.reduce(function(C,I){var A=I[0],w=I[1];if(C)return C;var O=w.exec(_);return!!O&&[A,O]},!1)}r(g,"matchUserAgent");function S(_){var C=g(_);return C?C[0]:null}r(S,"browserName");function u(_){var C=g(_);if(!C)return null;var I=C[0],A=C[1];if(I==="searchbot")return new a;var w=A[1]&&A[1].split(".").join("_").split("_").slice(0,3);w?w.length<t&&(w=f(f([],w,!0),b(t-w.length),!0)):w=[];var O=w.join("."),R=v(_),F=e.exec(_);return F&&F[1]?new m(I,O,R,F[1]):new h(I,O,R)}r(u,"parseUserAgent");function v(_){for(var C=0,I=o.length;C<I;C++){var A=o[C],w=A[0],O=A[1],R=O.exec(_);if(R)return w}return null}r(v,"detectOS");function E(){var _=!1;return _?new p((void 0).version.slice(1)):null}r(E,"getNodeVersion");function b(_){for(var C=[],I=0;I<_;I++)C.push("0");return C}r(b,"createVersionParts")},434544446:B=>{"use strict";B.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},344860614:(B,l,d)=>{"use strict";d.d(l,{zy:()=>Un,Zp:()=>Pn,wQ:()=>hr,g:()=>ue});var f=d(3134334389),h=d.t(f,2);/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p(){return p=Object.assign?Object.assign.bind():function(q){for(var re=1;re<arguments.length;re++){var he=arguments[re];for(var Te in he)Object.prototype.hasOwnProperty.call(he,Te)&&(q[Te]=he[Te])}return q},p.apply(this,arguments)}r(p,"_extends");var m;(function(q){q.Pop="POP",q.Push="PUSH",q.Replace="REPLACE"})(m||(m={}));const a="popstate";function s(q){q===void 0&&(q={});let{initialEntries:re=["/"],initialIndex:he,v5Compat:Te=!1}=q,ke;ke=re.map((tn,mn)=>kt(tn,typeof tn=="string"?null:tn.state,mn===0?"default":void 0));let ot=Rt(he??ke.length-1),Ze=m.Pop,Mt=null;function Rt(tn){return Math.min(Math.max(tn,0),ke.length-1)}r(Rt,"clampIndex");function xt(){return ke[ot]}r(xt,"getCurrentLocation");function kt(tn,mn,hn){mn===void 0&&(mn=null);let an=g(ke?xt().pathname:"/",tn,mn,hn);return i(an.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(tn)),an}r(kt,"createMemoryLocation");function Jt(tn){return typeof tn=="string"?tn:S(tn)}return r(Jt,"createHref"),{get index(){return ot},get action(){return Ze},get location(){return xt()},createHref:Jt,createURL(tn){return new URL(Jt(tn),"http://localhost")},encodeLocation(tn){let mn=typeof tn=="string"?u(tn):tn;return{pathname:mn.pathname||"",search:mn.search||"",hash:mn.hash||""}},push(tn,mn){Ze=m.Push;let hn=kt(tn,mn);ot+=1,ke.splice(ot,ke.length,hn),Te&&Mt&&Mt({action:Ze,location:hn,delta:1})},replace(tn,mn){Ze=m.Replace;let hn=kt(tn,mn);ke[ot]=hn,Te&&Mt&&Mt({action:Ze,location:hn,delta:0})},go(tn){Ze=m.Pop;let mn=Rt(ot+tn),hn=ke[mn];ot=mn,Mt&&Mt({action:Ze,location:hn,delta:tn})},listen(tn){return Mt=tn,()=>{Mt=null}}}}r(s,"router_createMemoryHistory");function n(q){q===void 0&&(q={});function re(Te,ke){let{pathname:ot,search:Ze,hash:Mt}=Te.location;return g("",{pathname:ot,search:Ze,hash:Mt},ke.state&&ke.state.usr||null,ke.state&&ke.state.key||"default")}r(re,"createBrowserLocation");function he(Te,ke){return typeof ke=="string"?ke:S(ke)}return r(he,"createBrowserHref"),v(re,he,null,q)}r(n,"createBrowserHistory");function e(q){q===void 0&&(q={});function re(ke,ot){let{pathname:Ze="/",search:Mt="",hash:Rt=""}=u(ke.location.hash.substr(1));return!Ze.startsWith("/")&&!Ze.startsWith(".")&&(Ze="/"+Ze),g("",{pathname:Ze,search:Mt,hash:Rt},ot.state&&ot.state.usr||null,ot.state&&ot.state.key||"default")}r(re,"createHashLocation");function he(ke,ot){let Ze=ke.document.querySelector("base"),Mt="";if(Ze&&Ze.getAttribute("href")){let Rt=ke.location.href,xt=Rt.indexOf("#");Mt=xt===-1?Rt:Rt.slice(0,xt)}return Mt+"#"+(typeof ot=="string"?ot:S(ot))}r(he,"createHashHref");function Te(ke,ot){i(ke.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(ot)+")")}return r(Te,"validateHashLocation"),v(re,he,Te,q)}r(e,"createHashHistory");function t(q,re){if(q===!1||q===null||typeof q>"u")throw new Error(re)}r(t,"invariant");function i(q,re){if(!q){typeof console<"u"&&console.warn(re);try{throw new Error(re)}catch{}}}r(i,"warning");function o(){return Math.random().toString(36).substr(2,8)}r(o,"createKey");function c(q,re){return{usr:q.state,key:q.key,idx:re}}r(c,"getHistoryState");function g(q,re,he,Te){return he===void 0&&(he=null),p({pathname:typeof q=="string"?q:q.pathname,search:"",hash:""},typeof re=="string"?u(re):re,{state:he,key:re&&re.key||Te||o()})}r(g,"createLocation");function S(q){let{pathname:re="/",search:he="",hash:Te=""}=q;return he&&he!=="?"&&(re+=he.charAt(0)==="?"?he:"?"+he),Te&&Te!=="#"&&(re+=Te.charAt(0)==="#"?Te:"#"+Te),re}r(S,"createPath");function u(q){let re={};if(q){let he=q.indexOf("#");he>=0&&(re.hash=q.substr(he),q=q.substr(0,he));let Te=q.indexOf("?");Te>=0&&(re.search=q.substr(Te),q=q.substr(0,Te)),q&&(re.pathname=q)}return re}r(u,"router_parsePath");function v(q,re,he,Te){Te===void 0&&(Te={});let{window:ke=document.defaultView,v5Compat:ot=!1}=Te,Ze=ke.history,Mt=m.Pop,Rt=null,xt=kt();xt==null&&(xt=0,Ze.replaceState(p({},Ze.state,{idx:xt}),""));function kt(){return(Ze.state||{idx:null}).idx}r(kt,"getIndex");function Jt(){Mt=m.Pop;let an=kt(),$t=an==null?null:an-xt;xt=an,Rt&&Rt({action:Mt,location:hn.location,delta:$t})}r(Jt,"handlePop");function Yt(an,$t){Mt=m.Push;let Bn=g(hn.location,an,$t);he&&he(Bn,an),xt=kt()+1;let Ei=c(Bn,xt),Bi=hn.createHref(Bn);try{Ze.pushState(Ei,"",Bi)}catch(qi){if(qi instanceof DOMException&&qi.name==="DataCloneError")throw qi;ke.location.assign(Bi)}ot&&Rt&&Rt({action:Mt,location:hn.location,delta:1})}r(Yt,"push");function tn(an,$t){Mt=m.Replace;let Bn=g(hn.location,an,$t);he&&he(Bn,an),xt=kt();let Ei=c(Bn,xt),Bi=hn.createHref(Bn);Ze.replaceState(Ei,"",Bi),ot&&Rt&&Rt({action:Mt,location:hn.location,delta:0})}r(tn,"replace");function mn(an){let $t=ke.location.origin!=="null"?ke.location.origin:ke.location.href,Bn=typeof an=="string"?an:S(an);return Bn=Bn.replace(/ $/,"%20"),t($t,"No window.location.(origin|href) available to create URL for href: "+Bn),new URL(Bn,$t)}r(mn,"createURL");let hn={get action(){return Mt},get location(){return q(ke,Ze)},listen(an){if(Rt)throw new Error("A history only accepts one active listener");return ke.addEventListener(a,Jt),Rt=an,()=>{ke.removeEventListener(a,Jt),Rt=null}},createHref(an){return re(ke,an)},createURL:mn,encodeLocation(an){let $t=mn(an);return{pathname:$t.pathname,search:$t.search,hash:$t.hash}},push:Yt,replace:tn,go(an){return Ze.go(an)}};return hn}r(v,"getUrlBasedHistory");var E;(function(q){q.data="data",q.deferred="deferred",q.redirect="redirect",q.error="error"})(E||(E={}));const b=new Set(["lazy","caseSensitive","path","id","index","children"]);function _(q){return q.index===!0}r(_,"isIndexRoute");function C(q,re,he,Te){return he===void 0&&(he=[]),Te===void 0&&(Te={}),q.map((ke,ot)=>{let Ze=[...he,ot],Mt=typeof ke.id=="string"?ke.id:Ze.join("-");if(t(ke.index!==!0||!ke.children,"Cannot specify children on an index route"),t(!Te[Mt],'Found a route id collision on id "'+Mt+`".  Route id's must be globally unique within Data Router usages`),_(ke)){let Rt=p({},ke,re(ke),{id:Mt});return Te[Mt]=Rt,Rt}else{let Rt=p({},ke,re(ke),{id:Mt,children:void 0});return Te[Mt]=Rt,ke.children&&(Rt.children=C(ke.children,re,Ze,Te)),Rt}})}r(C,"convertRoutesToDataRoutes");function I(q,re,he){he===void 0&&(he="/");let Te=typeof re=="string"?u(re):re,ke=Ge(Te.pathname||"/",he);if(ke==null)return null;let ot=w(q);R(ot);let Ze=null;for(let Mt=0;Ze==null&&Mt<ot.length;++Mt){let Rt=Xe(ke);Ze=We(ot[Mt],Rt)}return Ze}r(I,"router_matchRoutes");function A(q,re){let{route:he,pathname:Te,params:ke}=q;return{id:he.id,pathname:Te,params:ke,data:re[he.id],handle:he.handle}}r(A,"convertRouteMatchToUiMatch");function w(q,re,he,Te){re===void 0&&(re=[]),he===void 0&&(he=[]),Te===void 0&&(Te="");let ke=r((ot,Ze,Mt)=>{let Rt={relativePath:Mt===void 0?ot.path||"":Mt,caseSensitive:ot.caseSensitive===!0,childrenIndex:Ze,route:ot};Rt.relativePath.startsWith("/")&&(t(Rt.relativePath.startsWith(Te),'Absolute route path "'+Rt.relativePath+'" nested under path '+('"'+Te+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),Rt.relativePath=Rt.relativePath.slice(Te.length));let xt=je([Te,Rt.relativePath]),kt=he.concat(Rt);ot.children&&ot.children.length>0&&(t(ot.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+xt+'".')),w(ot.children,re,kt,xt)),!(ot.path==null&&!ot.index)&&re.push({path:xt,score:ge(xt,ot.index),routesMeta:kt})},"flattenRoute");return q.forEach((ot,Ze)=>{var Mt;if(ot.path===""||!((Mt=ot.path)!=null&&Mt.includes("?")))ke(ot,Ze);else for(let Rt of O(ot.path))ke(ot,Ze,Rt)}),re}r(w,"flattenRoutes");function O(q){let re=q.split("/");if(re.length===0)return[];let[he,...Te]=re,ke=he.endsWith("?"),ot=he.replace(/\?$/,"");if(Te.length===0)return ke?[ot,""]:[ot];let Ze=O(Te.join("/")),Mt=[];return Mt.push(...Ze.map(Rt=>Rt===""?ot:[ot,Rt].join("/"))),ke&&Mt.push(...Ze),Mt.map(Rt=>q.startsWith("/")&&Rt===""?"/":Rt)}r(O,"explodeOptionalSegments");function R(q){q.sort((re,he)=>re.score!==he.score?he.score-re.score:Ie(re.routesMeta.map(Te=>Te.childrenIndex),he.routesMeta.map(Te=>Te.childrenIndex)))}r(R,"rankRouteBranches");const F=/^:[\w-]+$/,V=3,$=2,X=1,Y=10,ne=null,ie=r(q=>q==="*","isSplat");function ge(q,re){let he=q.split("/"),Te=he.length;return he.some(ie)&&(Te+=ne),re&&(Te+=$),he.filter(ke=>!ie(ke)).reduce((ke,ot)=>ke+(F.test(ot)?V:ot===""?X:Y),Te)}r(ge,"computeScore");function Ie(q,re){return q.length===re.length&&q.slice(0,-1).every((Te,ke)=>Te===re[ke])?q[q.length-1]-re[re.length-1]:0}r(Ie,"compareIndexes");function We(q,re){let{routesMeta:he}=q,Te={},ke="/",ot=[];for(let Ze=0;Ze<he.length;++Ze){let Mt=he[Ze],Rt=Ze===he.length-1,xt=ke==="/"?re:re.slice(ke.length)||"/",kt=Ae({path:Mt.relativePath,caseSensitive:Mt.caseSensitive,end:Rt},xt);if(!kt)return null;Object.assign(Te,kt.params);let Jt=Mt.route;ot.push({params:Te,pathname:je([ke,kt.pathname]),pathnameBase:Ft(je([ke,kt.pathnameBase])),route:Jt}),kt.pathnameBase!=="/"&&(ke=je([ke,kt.pathnameBase]))}return ot}r(We,"matchRouteBranch");function ct(q,re){re===void 0&&(re={});let he=q;he.endsWith("*")&&he!=="*"&&!he.endsWith("/*")&&(i(!1,'Route path "'+he+'" will be treated as if it were '+('"'+he.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+he.replace(/\*$/,"/*")+'".')),he=he.replace(/\*$/,"/*"));const Te=he.startsWith("/")?"/":"",ke=r(Ze=>Ze==null?"":typeof Ze=="string"?Ze:String(Ze),"stringify"),ot=he.split(/\/+/).map((Ze,Mt,Rt)=>{if(Mt===Rt.length-1&&Ze==="*")return ke(re["*"]);const kt=Ze.match(/^:([\w-]+)(\??)$/);if(kt){const[,Jt,Yt]=kt;let tn=re[Jt];return t(Yt==="?"||tn!=null,'Missing ":'+Jt+'" param'),ke(tn)}return Ze.replace(/\?$/g,"")}).filter(Ze=>!!Ze);return Te+ot.join("/")}r(ct,"generatePath");function Ae(q,re){typeof q=="string"&&(q={path:q,caseSensitive:!1,end:!0});let[he,Te]=Fe(q.path,q.caseSensitive,q.end),ke=re.match(he);if(!ke)return null;let ot=ke[0],Ze=ot.replace(/(.)\/+$/,"$1"),Mt=ke.slice(1);return{params:Te.reduce((xt,kt,Jt)=>{let{paramName:Yt,isOptional:tn}=kt;if(Yt==="*"){let hn=Mt[Jt]||"";Ze=ot.slice(0,ot.length-hn.length).replace(/(.)\/+$/,"$1")}const mn=Mt[Jt];return tn&&!mn?xt[Yt]=void 0:xt[Yt]=(mn||"").replace(/%2F/g,"/"),xt},{}),pathname:ot,pathnameBase:Ze,pattern:q}}r(Ae,"router_matchPath");function Fe(q,re,he){re===void 0&&(re=!1),he===void 0&&(he=!0),i(q==="*"||!q.endsWith("*")||q.endsWith("/*"),'Route path "'+q+'" will be treated as if it were '+('"'+q.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+q.replace(/\*$/,"/*")+'".'));let Te=[],ke="^"+q.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(Ze,Mt,Rt)=>(Te.push({paramName:Mt,isOptional:Rt!=null}),Rt?"/?([^\\/]+)?":"/([^\\/]+)"));return q.endsWith("*")?(Te.push({paramName:"*"}),ke+=q==="*"||q==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):he?ke+="\\/*$":q!==""&&q!=="/"&&(ke+="(?:(?=\\/|$))"),[new RegExp(ke,re?void 0:"i"),Te]}r(Fe,"compilePath");function Xe(q){try{return q.split("/").map(re=>decodeURIComponent(re).replace(/\//g,"%2F")).join("/")}catch(re){return i(!1,'The URL path "'+q+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+re+").")),q}}r(Xe,"decodePath");function Ge(q,re){if(re==="/")return q;if(!q.toLowerCase().startsWith(re.toLowerCase()))return null;let he=re.endsWith("/")?re.length-1:re.length,Te=q.charAt(he);return Te&&Te!=="/"?null:q.slice(he)||"/"}r(Ge,"router_stripBasename");function it(q,re){re===void 0&&(re="/");let{pathname:he,search:Te="",hash:ke=""}=typeof q=="string"?u(q):q;return{pathname:he?he.startsWith("/")?he:Dt(he,re):re,search:Gt(Te),hash:Xt(ke)}}r(it,"resolvePath");function Dt(q,re){let he=re.replace(/\/+$/,"").split("/");return q.split("/").forEach(ke=>{ke===".."?he.length>1&&he.pop():ke!=="."&&he.push(ke)}),he.length>1?he.join("/"):"/"}r(Dt,"resolvePathname");function wt(q,re,he,Te){return"Cannot include a '"+q+"' character in a manually specified "+("`to."+re+"` field ["+JSON.stringify(Te)+"].  Please separate it out to the ")+("`to."+he+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}r(wt,"getInvalidPathError");function Pe(q){return q.filter((re,he)=>he===0||re.route.path&&re.route.path.length>0)}r(Pe,"getPathContributingMatches");function xe(q,re){let he=Pe(q);return re?he.map((Te,ke)=>ke===q.length-1?Te.pathname:Te.pathnameBase):he.map(Te=>Te.pathnameBase)}r(xe,"getResolveToMatches");function et(q,re,he,Te){Te===void 0&&(Te=!1);let ke;typeof q=="string"?ke=u(q):(ke=p({},q),t(!ke.pathname||!ke.pathname.includes("?"),wt("?","pathname","search",ke)),t(!ke.pathname||!ke.pathname.includes("#"),wt("#","pathname","hash",ke)),t(!ke.search||!ke.search.includes("#"),wt("#","search","hash",ke)));let ot=q===""||ke.pathname==="",Ze=ot?"/":ke.pathname,Mt;if(Ze==null)Mt=he;else{let Jt=re.length-1;if(!Te&&Ze.startsWith("..")){let Yt=Ze.split("/");for(;Yt[0]==="..";)Yt.shift(),Jt-=1;ke.pathname=Yt.join("/")}Mt=Jt>=0?re[Jt]:"/"}let Rt=it(ke,Mt),xt=Ze&&Ze!=="/"&&Ze.endsWith("/"),kt=(ot||Ze===".")&&he.endsWith("/");return!Rt.pathname.endsWith("/")&&(xt||kt)&&(Rt.pathname+="/"),Rt}r(et,"router_resolveTo");function rt(q){return q===""||q.pathname===""?"/":typeof q=="string"?u(q).pathname:q.pathname}r(rt,"getToPathname");const je=r(q=>q.join("/").replace(/\/\/+/g,"/"),"router_joinPaths"),Ft=r(q=>q.replace(/\/+$/,"").replace(/^\/*/,"/"),"normalizePathname"),Gt=r(q=>!q||q==="?"?"":q.startsWith("?")?q:"?"+q,"normalizeSearch"),Xt=r(q=>!q||q==="#"?"":q.startsWith("#")?q:"#"+q,"normalizeHash"),sn=r(function(re,he){he===void 0&&(he={});let Te=typeof he=="number"?{status:he}:he,ke=new Headers(Te.headers);return ke.has("Content-Type")||ke.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(re),p({},Te,{headers:ke}))},"json");class cn extends Error{}r(cn,"AbortedDeferredError");class Bt{constructor(re,he){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],t(re&&typeof re=="object"&&!Array.isArray(re),"defer() only accepts plain objects");let Te;this.abortPromise=new Promise((ot,Ze)=>Te=Ze),this.controller=new AbortController;let ke=r(()=>Te(new cn("Deferred data aborted")),"onAbort");this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",ke),this.controller.signal.addEventListener("abort",ke),this.data=Object.entries(re).reduce((ot,Ze)=>{let[Mt,Rt]=Ze;return Object.assign(ot,{[Mt]:this.trackPromise(Mt,Rt)})},{}),this.done&&this.unlistenAbortSignal(),this.init=he}trackPromise(re,he){if(!(he instanceof Promise))return he;this.deferredKeys.push(re),this.pendingKeysSet.add(re);let Te=Promise.race([he,this.abortPromise]).then(ke=>this.onSettle(Te,re,void 0,ke),ke=>this.onSettle(Te,re,ke));return Te.catch(()=>{}),Object.defineProperty(Te,"_tracked",{get:()=>!0}),Te}onSettle(re,he,Te,ke){if(this.controller.signal.aborted&&Te instanceof cn)return this.unlistenAbortSignal(),Object.defineProperty(re,"_error",{get:()=>Te}),Promise.reject(Te);if(this.pendingKeysSet.delete(he),this.done&&this.unlistenAbortSignal(),Te===void 0&&ke===void 0){let ot=new Error('Deferred data for key "'+he+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(re,"_error",{get:()=>ot}),this.emit(!1,he),Promise.reject(ot)}return ke===void 0?(Object.defineProperty(re,"_error",{get:()=>Te}),this.emit(!1,he),Promise.reject(Te)):(Object.defineProperty(re,"_data",{get:()=>ke}),this.emit(!1,he),ke)}emit(re,he){this.subscribers.forEach(Te=>Te(re,he))}subscribe(re){return this.subscribers.add(re),()=>this.subscribers.delete(re)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((re,he)=>this.pendingKeysSet.delete(he)),this.emit(!0)}async resolveData(re){let he=!1;if(!this.done){let Te=r(()=>this.cancel(),"onAbort");re.addEventListener("abort",Te),he=await new Promise(ke=>{this.subscribe(ot=>{re.removeEventListener("abort",Te),(ot||this.done)&&ke(ot)})})}return he}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return t(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((re,he)=>{let[Te,ke]=he;return Object.assign(re,{[Te]:Ci(ke)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}r(Bt,"DeferredData");function gn(q){return q instanceof Promise&&q._tracked===!0}r(gn,"isTrackedPromise");function Ci(q){if(!gn(q))return q;if(q._error)throw q._error;return q._data}r(Ci,"unwrapTrackedPromise");const $n=r(function(re,he){he===void 0&&(he={});let Te=typeof he=="number"?{status:he}:he;return new Bt(re,Te)},"defer"),Sn=r(function(re,he){he===void 0&&(he=302);let Te=he;typeof Te=="number"?Te={status:Te}:typeof Te.status>"u"&&(Te.status=302);let ke=new Headers(Te.headers);return ke.set("Location",re),new Response(null,p({},Te,{headers:ke}))},"redirect"),nn=r((q,re)=>{let he=Sn(q,re);return he.headers.set("X-Remix-Reload-Document","true"),he},"redirectDocument");class Vt{constructor(re,he,Te,ke){ke===void 0&&(ke=!1),this.status=re,this.statusText=he||"",this.internal=ke,Te instanceof Error?(this.data=Te.toString(),this.error=Te):this.data=Te}}r(Vt,"ErrorResponseImpl");function Wn(q){return q!=null&&typeof q.status=="number"&&typeof q.statusText=="string"&&typeof q.internal=="boolean"&&"data"in q}r(Wn,"router_isRouteErrorResponse");const Lt=["post","put","patch","delete"],zt=new Set(Lt),It=["get",...Lt],z=new Set(It),Ve=new Set([301,302,303,307,308]),He=new Set([307,308]),Je={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ye={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lt={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},le=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=r(q=>({hasErrorBoundary:Boolean(q.hasErrorBoundary)}),"defaultMapRouteProperties"),G="remix-router-transitions";function Q(q){const re=q.window?q.window:typeof window<"u"?window:void 0,he=typeof re<"u"&&typeof re.document<"u"&&typeof re.document.createElement<"u",Te=!he;t(q.routes.length>0,"You must provide a non-empty routes array to createRouter");let ke;if(q.mapRouteProperties)ke=q.mapRouteProperties;else if(q.detectErrorBoundary){let mt=q.detectErrorBoundary;ke=r(At=>({hasErrorBoundary:mt(At)}),"mapRouteProperties")}else ke=Ue;let ot={},Ze=C(q.routes,ke,void 0,ot),Mt,Rt=q.basename||"/",xt=p({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},q.future),kt=null,Jt=new Set,Yt=null,tn=null,mn=null,hn=q.hydrationData!=null,an=I(Ze,q.history.location,Rt),$t=null;if(an==null){let mt=qn(404,{pathname:q.history.location.pathname}),{matches:At,route:jt}=Mn(Ze);an=At,$t={[jt.id]:mt}}let Bn,Ei=an.some(mt=>mt.route.lazy),Bi=an.some(mt=>mt.route.loader);if(Ei)Bn=!1;else if(!Bi)Bn=!0;else if(xt.v7_partialHydration){let mt=q.hydrationData?q.hydrationData.loaderData:null,At=q.hydrationData?q.hydrationData.errors:null;Bn=an.every(jt=>jt.route.loader&&jt.route.loader.hydrate!==!0&&(mt&&mt[jt.route.id]!==void 0||At&&At[jt.route.id]!==void 0))}else Bn=q.hydrationData!=null;let qi,Et={historyAction:q.history.action,location:q.history.location,matches:an,initialized:Bn,navigation:Je,restoreScrollPosition:q.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:q.hydrationData&&q.hydrationData.loaderData||{},actionData:q.hydrationData&&q.hydrationData.actionData||null,errors:q.hydrationData&&q.hydrationData.errors||$t,fetchers:new Map,blockers:new Map},Vi=m.Pop,Hi=!1,Ti,Rr=!1,uo=new Map,Ir=null,qr=!1,eo=!1,Vs=[],Hs=[],Pr=new Map,ps=0,Ws=-1,os=new Map,Jo=new Set,As=new Map,ms=new Map,No=new Set,Yo=new Map,wo=new Map,Gs=!1;function Ld(){if(kt=q.history.listen(mt=>{let{action:At,location:jt,delta:Cn}=mt;if(Gs){Gs=!1;return}i(wo.size===0||Cn!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let zn=Il({currentLocation:Et.location,nextLocation:jt,historyAction:At});if(zn&&Cn!=null){Gs=!0,q.history.go(Cn*-1),Qo(zn,{state:"blocked",location:jt,proceed(){Qo(zn,{state:"proceeding",proceed:void 0,reset:void 0,location:jt}),q.history.go(Cn)},reset(){let Di=new Map(Et.blockers);Di.set(zn,lt),Gn({blockers:Di})}});return}return Os(At,jt)}),he){Pt(re,uo);let mt=r(()=>En(re,uo),"_saveAppliedTransitions");re.addEventListener("pagehide",mt),Ir=r(()=>re.removeEventListener("pagehide",mt),"removePageHideEventListener")}return Et.initialized||Os(m.Pop,Et.location,{initialHydration:!0}),qi}r(Ld,"initialize");function oa(){kt&&kt(),Ir&&Ir(),Jt.clear(),Ti&&Ti.abort(),Et.fetchers.forEach((mt,At)=>jn(At)),Et.blockers.forEach((mt,At)=>Ha(At))}r(oa,"dispose");function Do(mt){return Jt.add(mt),()=>Jt.delete(mt)}r(Do,"subscribe");function Gn(mt,At){At===void 0&&(At={}),Et=p({},Et,mt);let jt=[],Cn=[];xt.v7_fetcherPersist&&Et.fetchers.forEach((zn,Di)=>{zn.state==="idle"&&(No.has(Di)?Cn.push(Di):jt.push(Di))}),[...Jt].forEach(zn=>zn(Et,{deletedFetchers:Cn,unstable_viewTransitionOpts:At.viewTransitionOpts,unstable_flushSync:At.flushSync===!0})),xt.v7_fetcherPersist&&(jt.forEach(zn=>Et.fetchers.delete(zn)),Cn.forEach(zn=>jn(zn)))}r(Gn,"updateState");function ss(mt,At,jt){var Cn,zn;let{flushSync:Di}=jt===void 0?{}:jt,pi=Et.actionData!=null&&Et.navigation.formMethod!=null&&wi(Et.navigation.formMethod)&&Et.navigation.state==="loading"&&((Cn=mt.state)==null?void 0:Cn._isRedirect)!==!0,mi;At.actionData?Object.keys(At.actionData).length>0?mi=At.actionData:mi=null:pi?mi=Et.actionData:mi=null;let di=At.loaderData?Kn(Et.loaderData,At.loaderData,At.matches||[],At.errors):Et.loaderData,er=Et.blockers;er.size>0&&(er=new Map(er),er.forEach((Er,fo)=>er.set(fo,lt)));let Hr=Hi===!0||Et.navigation.formMethod!=null&&wi(Et.navigation.formMethod)&&((zn=mt.state)==null?void 0:zn._isRedirect)!==!0;Mt&&(Ze=Mt,Mt=void 0),qr||Vi===m.Pop||(Vi===m.Push?q.history.push(mt,mt.state):Vi===m.Replace&&q.history.replace(mt,mt.state));let xi;if(Vi===m.Pop){let Er=uo.get(Et.location.pathname);Er&&Er.has(mt.pathname)?xi={currentLocation:Et.location,nextLocation:mt}:uo.has(mt.pathname)&&(xi={currentLocation:mt,nextLocation:Et.location})}else if(Rr){let Er=uo.get(Et.location.pathname);Er?Er.add(mt.pathname):(Er=new Set([mt.pathname]),uo.set(Et.location.pathname,Er)),xi={currentLocation:Et.location,nextLocation:mt}}Gn(p({},At,{actionData:mi,loaderData:di,historyAction:Vi,location:mt,initialized:!0,navigation:Je,revalidation:"idle",restoreScrollPosition:Ga(mt,At.matches||Et.matches),preventScrollReset:Hr,blockers:er}),{viewTransitionOpts:xi,flushSync:Di===!0}),Vi=m.Pop,Hi=!1,Rr=!1,qr=!1,eo=!1,Vs=[],Hs=[]}r(ss,"completeNavigation");async function Yn(mt,At){if(typeof mt=="number"){q.history.go(mt);return}let jt=me(Et.location,Et.matches,Rt,xt.v7_prependBasename,mt,xt.v7_relativeSplatPath,At==null?void 0:At.fromRouteId,At==null?void 0:At.relative),{path:Cn,submission:zn,error:Di}=Me(xt.v7_normalizeFormMethod,!1,jt,At),pi=Et.location,mi=g(Et.location,Cn,At&&At.state);mi=p({},mi,q.history.encodeLocation(mi));let di=At&&At.replace!=null?At.replace:void 0,er=m.Push;di===!0?er=m.Replace:di===!1||zn!=null&&wi(zn.formMethod)&&zn.formAction===Et.location.pathname+Et.location.search&&(er=m.Replace);let Hr=At&&"preventScrollReset"in At?At.preventScrollReset===!0:void 0,xi=(At&&At.unstable_flushSync)===!0,Er=Il({currentLocation:pi,nextLocation:mi,historyAction:er});if(Er){Qo(Er,{state:"blocked",location:mi,proceed(){Qo(Er,{state:"proceeding",proceed:void 0,reset:void 0,location:mi}),Yn(mt,At)},reset(){let fo=new Map(Et.blockers);fo.set(Er,lt),Gn({blockers:fo})}});return}return await Os(er,mi,{submission:zn,pendingError:Di,preventScrollReset:Hr,replace:At&&At.replace,enableViewTransition:At&&At.unstable_viewTransition,flushSync:xi})}r(Yn,"navigate");function ma(){if(la(),Gn({revalidation:"loading"}),Et.navigation.state!=="submitting"){if(Et.navigation.state==="idle"){Os(Et.historyAction,Et.location,{startUninterruptedRevalidation:!0});return}Os(Vi||Et.historyAction,Et.navigation.location,{overrideNavigation:Et.navigation})}}r(ma,"revalidate");async function Os(mt,At,jt){Ti&&Ti.abort(),Ti=null,Vi=mt,qr=(jt&&jt.startUninterruptedRevalidation)===!0,Wa(Et.location,Et.matches),Hi=(jt&&jt.preventScrollReset)===!0,Rr=(jt&&jt.enableViewTransition)===!0;let Cn=Mt||Ze,zn=jt&&jt.overrideNavigation,Di=I(Cn,At,Rt),pi=(jt&&jt.flushSync)===!0;if(!Di){let fo=qn(404,{pathname:At.pathname}),{matches:Ao,route:ho}=Mn(Cn);$s(),ss(At,{matches:Ao,loaderData:{},errors:{[ho.id]:fo}},{flushSync:pi});return}if(Et.initialized&&!eo&&Zt(Et.location,At)&&!(jt&&jt.submission&&wi(jt.submission.formMethod))){ss(At,{matches:Di},{flushSync:pi});return}Ti=new AbortController;let mi=Ct(q.history,At,Ti.signal,jt&&jt.submission),di,er;if(jt&&jt.pendingError)er={[ni(Di).route.id]:jt.pendingError};else if(jt&&jt.submission&&wi(jt.submission.formMethod)){let fo=await ga(mi,At,jt.submission,Di,{replace:jt.replace,flushSync:pi});if(fo.shortCircuited)return;di=fo.pendingActionData,er=fo.pendingActionError,zn=Zn(At,jt.submission),pi=!1,mi=new Request(mi.url,{signal:mi.signal})}let{shortCircuited:Hr,loaderData:xi,errors:Er}=await kr(mi,At,Di,zn,jt&&jt.submission,jt&&jt.fetcherSubmission,jt&&jt.replace,jt&&jt.initialHydration===!0,pi,di,er);Hr||(Ti=null,ss(At,p({matches:Di},di?{actionData:di}:{},{loaderData:xi,errors:Er})))}r(Os,"startNavigation");async function ga(mt,At,jt,Cn,zn){zn===void 0&&(zn={}),la();let Di=N(At,jt);Gn({navigation:Di},{flushSync:zn.flushSync===!0});let pi,mi=Li(Cn,At);if(!mi.route.action&&!mi.route.lazy)pi={type:E.error,error:qn(405,{method:mt.method,pathname:At.pathname,routeId:mi.route.id})};else if(pi=await dt("action",mt,mi,Cn,ot,ke,Rt,xt.v7_relativeSplatPath),mt.signal.aborted)return{shortCircuited:!0};if(_n(pi)){let di;return zn&&zn.replace!=null?di=zn.replace:di=pi.location===Et.location.pathname+Et.location.search,await sa(Et,pi,{submission:jt,replace:di}),{shortCircuited:!0}}if(On(pi)){let di=ni(Cn,mi.route.id);return(zn&&zn.replace)!==!0&&(Vi=m.Push),{pendingActionData:{},pendingActionError:{[di.route.id]:pi.error}}}if(Nt(pi))throw qn(400,{type:"defer-action"});return{pendingActionData:{[mi.route.id]:pi.data}}}r(ga,"handleAction");async function kr(mt,At,jt,Cn,zn,Di,pi,mi,di,er,Hr){let xi=Cn||Zn(At,zn),Er=zn||Di||Ar(xi),fo=Mt||Ze,[Ao,ho]=Se(q.history,Et,jt,Er,At,xt.v7_partialHydration&&mi===!0,eo,Vs,Hs,No,As,Jo,fo,Rt,er,Hr);if($s(rr=>!(jt&&jt.some(mr=>mr.route.id===rr))||Ao&&Ao.some(mr=>mr.route.id===rr)),Ws=++ps,Ao.length===0&&ho.length===0){let rr=Ua();return ss(At,p({matches:jt,loaderData:{},errors:Hr||null},er?{actionData:er}:{},rr?{fetchers:new Map(Et.fetchers)}:{}),{flushSync:di}),{shortCircuited:!0}}if(!qr&&(!xt.v7_partialHydration||!mi)){ho.forEach(mr=>{let Xr=Et.fetchers.get(mr.key),vs=oe(void 0,Xr?Xr.data:void 0);Et.fetchers.set(mr.key,vs)});let rr=er||Et.actionData;Gn(p({navigation:xi},rr?Object.keys(rr).length===0?{actionData:null}:{actionData:rr}:{},ho.length>0?{fetchers:new Map(Et.fetchers)}:{}),{flushSync:di})}ho.forEach(rr=>{Pr.has(rr.key)&&on(rr.key),rr.controller&&Pr.set(rr.key,rr.controller)});let Nr=r(()=>ho.forEach(rr=>on(rr.key)),"abortPendingFetchRevalidations");Ti&&Ti.signal.addEventListener("abort",Nr);let{results:Ss,loaderResults:Ms,fetcherResults:Zo}=await aa(Et.matches,jt,Ao,ho,mt);if(mt.signal.aborted)return{shortCircuited:!0};Ti&&Ti.signal.removeEventListener("abort",Nr),ho.forEach(rr=>Pr.delete(rr.key));let as=bi(Ss);if(as){if(as.idx>=Ao.length){let rr=ho[as.idx-Ao.length].key;Jo.add(rr)}return await sa(Et,as.result,{replace:pi}),{shortCircuited:!0}}let{loaderData:Ks,errors:Rs}=Pi(Et,jt,Ao,Ms,Hr,ho,Zo,Yo);Yo.forEach((rr,mr)=>{rr.subscribe(Xr=>{(Xr||rr.done)&&Yo.delete(mr)})}),xt.v7_partialHydration&&mi&&Et.errors&&Object.entries(Et.errors).filter(rr=>{let[mr]=rr;return!Ao.some(Xr=>Xr.route.id===mr)}).forEach(rr=>{let[mr,Xr]=rr;Rs=Object.assign(Rs||{},{[mr]:Xr})});let va=Ua(),Ps=Va(Ws),Oo=va||Ps||ho.length>0;return p({loaderData:Ks,errors:Rs},Oo?{fetchers:new Map(Et.fetchers)}:{})}r(kr,"handleLoaders");function Tl(mt,At,jt,Cn){if(Te)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Pr.has(mt)&&on(mt);let zn=(Cn&&Cn.unstable_flushSync)===!0,Di=Mt||Ze,pi=me(Et.location,Et.matches,Rt,xt.v7_prependBasename,jt,xt.v7_relativeSplatPath,At,Cn==null?void 0:Cn.relative),mi=I(Di,pi,Rt);if(!mi){gs(mt,At,qn(404,{pathname:pi}),{flushSync:zn});return}let{path:di,submission:er,error:Hr}=Me(xt.v7_normalizeFormMethod,!0,pi,Cn);if(Hr){gs(mt,At,Hr,{flushSync:zn});return}let xi=Li(mi,di);if(Hi=(Cn&&Cn.preventScrollReset)===!0,er&&wi(er.formMethod)){js(mt,At,di,xi,mi,zn,er);return}As.set(mt,{routeId:At,path:di}),zs(mt,At,di,xi,mi,zn,er)}r(Tl,"fetch");async function js(mt,At,jt,Cn,zn,Di,pi){if(la(),As.delete(mt),!Cn.route.action&&!Cn.route.lazy){let mr=qn(405,{method:pi.formMethod,pathname:jt,routeId:At});gs(mt,At,mr,{flushSync:Di});return}let mi=Et.fetchers.get(mt);Xo(mt,Re(pi,mi),{flushSync:Di});let di=new AbortController,er=Ct(q.history,jt,di.signal,pi);Pr.set(mt,di);let Hr=ps,xi=await dt("action",er,Cn,zn,ot,ke,Rt,xt.v7_relativeSplatPath);if(er.signal.aborted){Pr.get(mt)===di&&Pr.delete(mt);return}if(xt.v7_fetcherPersist&&No.has(mt)){if(_n(xi)||On(xi)){Xo(mt,nt(void 0));return}}else{if(_n(xi))if(Pr.delete(mt),Ws>Hr){Xo(mt,nt(void 0));return}else return Jo.add(mt),Xo(mt,oe(pi)),sa(Et,xi,{fetcherSubmission:pi});if(On(xi)){gs(mt,At,xi.error);return}}if(Nt(xi))throw qn(400,{type:"defer-action"});let Er=Et.navigation.location||Et.location,fo=Ct(q.history,Er,di.signal),Ao=Mt||Ze,ho=Et.navigation.state!=="idle"?I(Ao,Et.navigation.location,Rt):Et.matches;t(ho,"Didn't find any matches after fetcher action");let Nr=++ps;os.set(mt,Nr);let Ss=oe(pi,xi.data);Et.fetchers.set(mt,Ss);let[Ms,Zo]=Se(q.history,Et,ho,pi,Er,!1,eo,Vs,Hs,No,As,Jo,Ao,Rt,{[Cn.route.id]:xi.data},void 0);Zo.filter(mr=>mr.key!==mt).forEach(mr=>{let Xr=mr.key,vs=Et.fetchers.get(Xr),jo=oe(void 0,vs?vs.data:void 0);Et.fetchers.set(Xr,jo),Pr.has(Xr)&&on(Xr),mr.controller&&Pr.set(Xr,mr.controller)}),Gn({fetchers:new Map(Et.fetchers)});let as=r(()=>Zo.forEach(mr=>on(mr.key)),"abortPendingFetchRevalidations");di.signal.addEventListener("abort",as);let{results:Ks,loaderResults:Rs,fetcherResults:va}=await aa(Et.matches,ho,Ms,Zo,fo);if(di.signal.aborted)return;di.signal.removeEventListener("abort",as),os.delete(mt),Pr.delete(mt),Zo.forEach(mr=>Pr.delete(mr.key));let Ps=bi(Ks);if(Ps){if(Ps.idx>=Ms.length){let mr=Zo[Ps.idx-Ms.length].key;Jo.add(mr)}return sa(Et,Ps.result)}let{loaderData:Oo,errors:rr}=Pi(Et,Et.matches,Ms,Rs,void 0,Zo,va,Yo);if(Et.fetchers.has(mt)){let mr=nt(xi.data);Et.fetchers.set(mt,mr)}Va(Nr),Et.navigation.state==="loading"&&Nr>Ws?(t(Vi,"Expected pending action"),Ti&&Ti.abort(),ss(Et.navigation.location,{matches:ho,loaderData:Oo,errors:rr,fetchers:new Map(Et.fetchers)})):(Gn({errors:rr,loaderData:Kn(Et.loaderData,Oo,ho,rr),fetchers:new Map(Et.fetchers)}),eo=!1)}r(js,"handleFetcherAction");async function zs(mt,At,jt,Cn,zn,Di,pi){let mi=Et.fetchers.get(mt);Xo(mt,oe(pi,mi?mi.data:void 0),{flushSync:Di});let di=new AbortController,er=Ct(q.history,jt,di.signal);Pr.set(mt,di);let Hr=ps,xi=await dt("loader",er,Cn,zn,ot,ke,Rt,xt.v7_relativeSplatPath);if(Nt(xi)&&(xi=await ii(xi,er.signal,!0)||xi),Pr.get(mt)===di&&Pr.delete(mt),!er.signal.aborted){if(No.has(mt)){Xo(mt,nt(void 0));return}if(_n(xi))if(Ws>Hr){Xo(mt,nt(void 0));return}else{Jo.add(mt),await sa(Et,xi);return}if(On(xi)){gs(mt,At,xi.error);return}t(!Nt(xi),"Unhandled fetcher deferred data"),Xo(mt,nt(xi.data))}}r(zs,"handleFetcherLoader");async function sa(mt,At,jt){let{submission:Cn,fetcherSubmission:zn,replace:Di}=jt===void 0?{}:jt;At.revalidate&&(eo=!0);let pi=g(mt.location,At.location,{_isRedirect:!0});if(t(pi,"Expected a location on the redirect navigation"),he){let Er=!1;if(At.reloadDocument)Er=!0;else if(le.test(At.location)){const fo=q.history.createURL(At.location);Er=fo.origin!==re.location.origin||Ge(fo.pathname,Rt)==null}if(Er){Di?re.location.replace(At.location):re.location.assign(At.location);return}}Ti=null;let mi=Di===!0?m.Replace:m.Push,{formMethod:di,formAction:er,formEncType:Hr}=mt.navigation;!Cn&&!zn&&di&&er&&Hr&&(Cn=Ar(mt.navigation));let xi=Cn||zn;if(He.has(At.status)&&xi&&wi(xi.formMethod))await Os(mi,pi,{submission:p({},xi,{formAction:At.location}),preventScrollReset:Hi});else{let Er=Zn(pi,Cn);await Os(mi,pi,{overrideNavigation:Er,fetcherSubmission:zn,preventScrollReset:Hi})}}r(sa,"startRedirectNavigation");async function aa(mt,At,jt,Cn,zn){let Di=await Promise.all([...jt.map(di=>dt("loader",zn,di,At,ot,ke,Rt,xt.v7_relativeSplatPath)),...Cn.map(di=>di.matches&&di.match&&di.controller?dt("loader",Ct(q.history,di.path,di.controller.signal),di.match,di.matches,ot,ke,Rt,xt.v7_relativeSplatPath):{type:E.error,error:qn(404,{pathname:di.path})})]),pi=Di.slice(0,jt.length),mi=Di.slice(jt.length);return await Promise.all([Ui(mt,jt,pi,pi.map(()=>zn.signal),!1,Et.loaderData),Ui(mt,Cn.map(di=>di.match),mi,Cn.map(di=>di.controller?di.controller.signal:null),!0)]),{results:Di,loaderResults:pi,fetcherResults:mi}}r(aa,"callLoadersAndMaybeResolveData");function la(){eo=!0,Vs.push(...$s()),As.forEach((mt,At)=>{Pr.has(At)&&(Hs.push(At),on(At))})}r(la,"interruptActiveLoads");function Xo(mt,At,jt){jt===void 0&&(jt={}),Et.fetchers.set(mt,At),Gn({fetchers:new Map(Et.fetchers)},{flushSync:(jt&&jt.flushSync)===!0})}r(Xo,"updateFetcherState");function gs(mt,At,jt,Cn){Cn===void 0&&(Cn={});let zn=ni(Et.matches,At);jn(mt),Gn({errors:{[zn.route.id]:jt},fetchers:new Map(Et.fetchers)},{flushSync:(Cn&&Cn.flushSync)===!0})}r(gs,"setFetcherError");function xa(mt){return xt.v7_fetcherPersist&&(ms.set(mt,(ms.get(mt)||0)+1),No.has(mt)&&No.delete(mt)),Et.fetchers.get(mt)||Ye}r(xa,"getFetcher");function jn(mt){let At=Et.fetchers.get(mt);Pr.has(mt)&&!(At&&At.state==="loading"&&os.has(mt))&&on(mt),As.delete(mt),os.delete(mt),Jo.delete(mt),No.delete(mt),Et.fetchers.delete(mt)}r(jn,"deleteFetcher");function ki(mt){if(xt.v7_fetcherPersist){let At=(ms.get(mt)||0)-1;At<=0?(ms.delete(mt),No.add(mt)):ms.set(mt,At)}else jn(mt);Gn({fetchers:new Map(Et.fetchers)})}r(ki,"deleteFetcherAndUpdateState");function on(mt){let At=Pr.get(mt);t(At,"Expected fetch controller: "+mt),At.abort(),Pr.delete(mt)}r(on,"abortFetcher");function Cl(mt){for(let At of mt){let jt=xa(At),Cn=nt(jt.data);Et.fetchers.set(At,Cn)}}r(Cl,"markFetchersDone");function Ua(){let mt=[],At=!1;for(let jt of Jo){let Cn=Et.fetchers.get(jt);t(Cn,"Expected fetcher: "+jt),Cn.state==="loading"&&(Jo.delete(jt),mt.push(jt),At=!0)}return Cl(mt),At}r(Ua,"markFetchRedirectsDone");function Va(mt){let At=[];for(let[jt,Cn]of os)if(Cn<mt){let zn=Et.fetchers.get(jt);t(zn,"Expected fetcher: "+jt),zn.state==="loading"&&(on(jt),os.delete(jt),At.push(jt))}return Cl(At),At.length>0}r(Va,"abortStaleFetchLoads");function Fd(mt,At){let jt=Et.blockers.get(mt)||lt;return wo.get(mt)!==At&&wo.set(mt,At),jt}r(Fd,"getBlocker");function Ha(mt){Et.blockers.delete(mt),wo.delete(mt)}r(Ha,"deleteBlocker");function Qo(mt,At){let jt=Et.blockers.get(mt)||lt;t(jt.state==="unblocked"&&At.state==="blocked"||jt.state==="blocked"&&At.state==="blocked"||jt.state==="blocked"&&At.state==="proceeding"||jt.state==="blocked"&&At.state==="unblocked"||jt.state==="proceeding"&&At.state==="unblocked","Invalid blocker state transition: "+jt.state+" -> "+At.state);let Cn=new Map(Et.blockers);Cn.set(mt,At),Gn({blockers:Cn})}r(Qo,"updateBlocker");function Il(mt){let{currentLocation:At,nextLocation:jt,historyAction:Cn}=mt;if(wo.size===0)return;wo.size>1&&i(!1,"A router only supports one blocker at a time");let zn=Array.from(wo.entries()),[Di,pi]=zn[zn.length-1],mi=Et.blockers.get(Di);if(!(mi&&mi.state==="proceeding")&&pi({currentLocation:At,nextLocation:jt,historyAction:Cn}))return Di}r(Il,"shouldBlockNavigation");function $s(mt){let At=[];return Yo.forEach((jt,Cn)=>{(!mt||mt(Cn))&&(jt.cancel(),At.push(Cn),Yo.delete(Cn))}),At}r($s,"cancelActiveDeferreds");function Bd(mt,At,jt){if(Yt=mt,mn=At,tn=jt||null,!hn&&Et.navigation===Je){hn=!0;let Cn=Ga(Et.location,Et.matches);Cn!=null&&Gn({restoreScrollPosition:Cn})}return()=>{Yt=null,mn=null,tn=null}}r(Bd,"enableScrollRestoration");function wl(mt,At){return tn&&tn(mt,At.map(Cn=>A(Cn,Et.loaderData)))||mt.key}r(wl,"getScrollKey");function Wa(mt,At){if(Yt&&mn){let jt=wl(mt,At);Yt[jt]=mn()}}r(Wa,"saveScrollPosition");function Ga(mt,At){if(Yt){let jt=wl(mt,At),Cn=Yt[jt];if(typeof Cn=="number")return Cn}return null}r(Ga,"getSavedScrollPosition");function Sa(mt){ot={},Mt=C(mt,ke,void 0,ot)}return r(Sa,"_internalSetRoutes"),qi={get basename(){return Rt},get future(){return xt},get state(){return Et},get routes(){return Ze},get window(){return re},initialize:Ld,subscribe:Do,enableScrollRestoration:Bd,navigate:Yn,fetch:Tl,revalidate:ma,createHref:mt=>q.history.createHref(mt),encodeLocation:mt=>q.history.encodeLocation(mt),getFetcher:xa,deleteFetcher:ki,dispose:oa,getBlocker:Fd,deleteBlocker:Ha,_internalFetchControllers:Pr,_internalActiveDeferreds:Yo,_internalSetRoutes:Sa},qi}r(Q,"router_createRouter");const ye=Symbol("deferred");function Ee(q,re){t(q.length>0,"You must provide a non-empty routes array to createStaticHandler");let he={},Te=(re?re.basename:null)||"/",ke;if(re!=null&&re.mapRouteProperties)ke=re.mapRouteProperties;else if(re!=null&&re.detectErrorBoundary){let Yt=re.detectErrorBoundary;ke=r(tn=>({hasErrorBoundary:Yt(tn)}),"mapRouteProperties")}else ke=Ue;let ot=p({v7_relativeSplatPath:!1,v7_throwAbortReason:!1},re?re.future:null),Ze=C(q,ke,void 0,he);async function Mt(Yt,tn){let{requestContext:mn}=tn===void 0?{}:tn,hn=new URL(Yt.url),an=Yt.method,$t=g("",S(hn),null,"default"),Bn=I(Ze,$t,Te);if(!Ii(an)&&an!=="HEAD"){let Bi=qn(405,{method:an}),{matches:qi,route:Et}=Mn(Ze);return{basename:Te,location:$t,matches:qi,loaderData:{},actionData:null,errors:{[Et.id]:Bi},statusCode:Bi.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}else if(!Bn){let Bi=qn(404,{pathname:$t.pathname}),{matches:qi,route:Et}=Mn(Ze);return{basename:Te,location:$t,matches:qi,loaderData:{},actionData:null,errors:{[Et.id]:Bi},statusCode:Bi.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let Ei=await xt(Yt,$t,Bn,mn);return vi(Ei)?Ei:p({location:$t,basename:Te},Ei)}r(Mt,"query");async function Rt(Yt,tn){let{routeId:mn,requestContext:hn}=tn===void 0?{}:tn,an=new URL(Yt.url),$t=Yt.method,Bn=g("",S(an),null,"default"),Ei=I(Ze,Bn,Te);if(!Ii($t)&&$t!=="HEAD"&&$t!=="OPTIONS")throw qn(405,{method:$t});if(!Ei)throw qn(404,{pathname:Bn.pathname});let Bi=mn?Ei.find(Hi=>Hi.route.id===mn):Li(Ei,Bn);if(mn&&!Bi)throw qn(403,{pathname:Bn.pathname,routeId:mn});if(!Bi)throw qn(404,{pathname:Bn.pathname});let qi=await xt(Yt,Bn,Ei,hn,Bi);if(vi(qi))return qi;let Et=qi.errors?Object.values(qi.errors)[0]:void 0;if(Et!==void 0)throw Et;if(qi.actionData)return Object.values(qi.actionData)[0];if(qi.loaderData){var Vi;let Hi=Object.values(qi.loaderData)[0];return(Vi=qi.activeDeferreds)!=null&&Vi[Bi.route.id]&&(Hi[ye]=qi.activeDeferreds[Bi.route.id]),Hi}}r(Rt,"queryRoute");async function xt(Yt,tn,mn,hn,an){t(Yt.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(wi(Yt.method.toLowerCase()))return await kt(Yt,mn,an||Li(mn,tn),hn,an!=null);let $t=await Jt(Yt,mn,hn,an);return vi($t)?$t:p({},$t,{actionData:null,actionHeaders:{}})}catch($t){if(ui($t)){if($t.type===E.error)throw $t.response;return $t.response}if(Mi($t))return $t;throw $t}}r(xt,"queryImpl");async function kt(Yt,tn,mn,hn,an){let $t;if(!mn.route.action&&!mn.route.lazy){let Bi=qn(405,{method:Yt.method,pathname:new URL(Yt.url).pathname,routeId:mn.route.id});if(an)throw Bi;$t={type:E.error,error:Bi}}else $t=await dt("action",Yt,mn,tn,he,ke,Te,ot.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:an,requestContext:hn}),Yt.signal.aborted&&ze(Yt,an,ot);if(_n($t))throw new Response(null,{status:$t.status,headers:{Location:$t.location}});if(Nt($t)){let Bi=qn(400,{type:"defer-action"});if(an)throw Bi;$t={type:E.error,error:Bi}}if(an){if(On($t))throw $t.error;return{matches:[mn],loaderData:{},actionData:{[mn.route.id]:$t.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(On($t)){let Bi=ni(tn,mn.route.id),qi=await Jt(Yt,tn,hn,void 0,{[Bi.route.id]:$t.error});return p({},qi,{statusCode:Wn($t.error)?$t.error.status:500,actionData:null,actionHeaders:p({},$t.headers?{[mn.route.id]:$t.headers}:{})})}let Bn=new Request(Yt.url,{headers:Yt.headers,redirect:Yt.redirect,signal:Yt.signal}),Ei=await Jt(Bn,tn,hn);return p({},Ei,$t.statusCode?{statusCode:$t.statusCode}:{},{actionData:{[mn.route.id]:$t.data},actionHeaders:p({},$t.headers?{[mn.route.id]:$t.headers}:{})})}r(kt,"submit");async function Jt(Yt,tn,mn,hn,an){let $t=hn!=null;if($t&&!(hn!=null&&hn.route.loader)&&!(hn!=null&&hn.route.lazy))throw qn(400,{method:Yt.method,pathname:new URL(Yt.url).pathname,routeId:hn==null?void 0:hn.route.id});let Ei=(hn?[hn]:k(tn,Object.keys(an||{})[0])).filter(Hi=>Hi.route.loader||Hi.route.lazy);if(Ei.length===0)return{matches:tn,loaderData:tn.reduce((Hi,Ti)=>Object.assign(Hi,{[Ti.route.id]:null}),{}),errors:an||null,statusCode:200,loaderHeaders:{},activeDeferreds:null};let Bi=await Promise.all([...Ei.map(Hi=>dt("loader",Yt,Hi,tn,he,ke,Te,ot.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:$t,requestContext:mn}))]);Yt.signal.aborted&&ze(Yt,$t,ot);let qi=new Map,Et=Xi(tn,Ei,Bi,an,qi),Vi=new Set(Ei.map(Hi=>Hi.route.id));return tn.forEach(Hi=>{Vi.has(Hi.route.id)||(Et.loaderData[Hi.route.id]=null)}),p({},Et,{matches:tn,activeDeferreds:qi.size>0?Object.fromEntries(qi.entries()):null})}return r(Jt,"loadRouteData"),{dataRoutes:Ze,query:Mt,queryRoute:Rt}}r(Ee,"createStaticHandler");function pt(q,re,he){return p({},re,{statusCode:Wn(he)?he.status:500,errors:{[re._deepestRenderedBoundaryId||q[0].id]:he}})}r(pt,"getStaticContextFromError");function ze(q,re,he){if(he.v7_throwAbortReason&&q.signal.reason!==void 0)throw q.signal.reason;let Te=re?"queryRoute":"query";throw new Error(Te+"() call aborted: "+q.method+" "+q.url)}r(ze,"throwStaticHandlerAbortedError");function st(q){return q!=null&&("formData"in q&&q.formData!=null||"body"in q&&q.body!==void 0)}r(st,"isSubmissionNavigation");function me(q,re,he,Te,ke,ot,Ze,Mt){let Rt,xt;if(Ze){Rt=[];for(let Jt of re)if(Rt.push(Jt),Jt.route.id===Ze){xt=Jt;break}}else Rt=re,xt=re[re.length-1];let kt=et(ke||".",xe(Rt,ot),Ge(q.pathname,he)||q.pathname,Mt==="path");return ke==null&&(kt.search=q.search,kt.hash=q.hash),(ke==null||ke===""||ke===".")&&xt&&xt.route.index&&!fr(kt.search)&&(kt.search=kt.search?kt.search.replace(/^\?/,"?index&"):"?index"),Te&&he!=="/"&&(kt.pathname=kt.pathname==="/"?he:je([he,kt.pathname])),S(kt)}r(me,"normalizeTo");function Me(q,re,he,Te){if(!Te||!st(Te))return{path:he};if(Te.formMethod&&!Ii(Te.formMethod))return{path:he,error:qn(405,{method:Te.formMethod})};let ke=r(()=>({path:he,error:qn(400,{type:"invalid-body"})}),"getInvalidBodyError"),ot=Te.formMethod||"get",Ze=q?ot.toUpperCase():ot.toLowerCase(),Mt=xr(he);if(Te.body!==void 0){if(Te.formEncType==="text/plain"){if(!wi(Ze))return ke();let Yt=typeof Te.body=="string"?Te.body:Te.body instanceof FormData||Te.body instanceof URLSearchParams?Array.from(Te.body.entries()).reduce((tn,mn)=>{let[hn,an]=mn;return""+tn+hn+"="+an+`
`},""):String(Te.body);return{path:he,submission:{formMethod:Ze,formAction:Mt,formEncType:Te.formEncType,formData:void 0,json:void 0,text:Yt}}}else if(Te.formEncType==="application/json"){if(!wi(Ze))return ke();try{let Yt=typeof Te.body=="string"?JSON.parse(Te.body):Te.body;return{path:he,submission:{formMethod:Ze,formAction:Mt,formEncType:Te.formEncType,formData:void 0,json:Yt,text:void 0}}}catch{return ke()}}}t(typeof FormData=="function","FormData is not available in this environment");let Rt,xt;if(Te.formData)Rt=xn(Te.formData),xt=Te.formData;else if(Te.body instanceof FormData)Rt=xn(Te.body),xt=Te.body;else if(Te.body instanceof URLSearchParams)Rt=Te.body,xt=Qt(Rt);else if(Te.body==null)Rt=new URLSearchParams,xt=new FormData;else try{Rt=new URLSearchParams(Te.body),xt=Qt(Rt)}catch{return ke()}let kt={formMethod:Ze,formAction:Mt,formEncType:Te&&Te.formEncType||"application/x-www-form-urlencoded",formData:xt,json:void 0,text:void 0};if(wi(kt.formMethod))return{path:he,submission:kt};let Jt=u(he);return re&&Jt.search&&fr(Jt.search)&&Rt.append("index",""),Jt.search="?"+Rt,{path:S(Jt),submission:kt}}r(Me,"normalizeNavigateOptions");function k(q,re){let he=q;if(re){let Te=q.findIndex(ke=>ke.route.id===re);Te>=0&&(he=q.slice(0,Te))}return he}r(k,"getLoaderMatchesUntilBoundary");function Se(q,re,he,Te,ke,ot,Ze,Mt,Rt,xt,kt,Jt,Yt,tn,mn,hn){let an=hn?Object.values(hn)[0]:mn?Object.values(mn)[0]:void 0,$t=q.createURL(re.location),Bn=q.createURL(ke),Ei=hn?Object.keys(hn)[0]:void 0,qi=k(he,Ei).filter((Vi,Hi)=>{let{route:Ti}=Vi;if(Ti.lazy)return!0;if(Ti.loader==null)return!1;if(ot)return Ti.loader.hydrate?!0:re.loaderData[Ti.id]===void 0&&(!re.errors||re.errors[Ti.id]===void 0);if(be(re.loaderData,re.matches[Hi],Vi)||Mt.some(Ir=>Ir===Vi.route.id))return!0;let Rr=re.matches[Hi],uo=Vi;return ee(Vi,p({currentUrl:$t,currentParams:Rr.params,nextUrl:Bn,nextParams:uo.params},Te,{actionResult:an,defaultShouldRevalidate:Ze||$t.pathname+$t.search===Bn.pathname+Bn.search||$t.search!==Bn.search||we(Rr,uo)}))}),Et=[];return kt.forEach((Vi,Hi)=>{if(ot||!he.some(qr=>qr.route.id===Vi.routeId)||xt.has(Hi))return;let Ti=I(Yt,Vi.path,tn);if(!Ti){Et.push({key:Hi,routeId:Vi.routeId,path:Vi.path,matches:null,match:null,controller:null});return}let Rr=re.fetchers.get(Hi),uo=Li(Ti,Vi.path),Ir=!1;Jt.has(Hi)?Ir=!1:Rt.includes(Hi)?Ir=!0:Rr&&Rr.state!=="idle"&&Rr.data===void 0?Ir=Ze:Ir=ee(uo,p({currentUrl:$t,currentParams:re.matches[re.matches.length-1].params,nextUrl:Bn,nextParams:he[he.length-1].params},Te,{actionResult:an,defaultShouldRevalidate:Ze})),Ir&&Et.push({key:Hi,routeId:Vi.routeId,path:Vi.path,matches:Ti,match:uo,controller:new AbortController})}),[qi,Et]}r(Se,"getMatchesToLoad");function be(q,re,he){let Te=!re||he.route.id!==re.route.id,ke=q[he.route.id]===void 0;return Te||ke}r(be,"isNewLoader");function we(q,re){let he=q.route.path;return q.pathname!==re.pathname||he!=null&&he.endsWith("*")&&q.params["*"]!==re.params["*"]}r(we,"isNewRouteInstance");function ee(q,re){if(q.route.shouldRevalidate){let he=q.route.shouldRevalidate(re);if(typeof he=="boolean")return he}return re.defaultShouldRevalidate}r(ee,"shouldRevalidateLoader");async function en(q,re,he){if(!q.lazy)return;let Te=await q.lazy();if(!q.lazy)return;let ke=he[q.id];t(ke,"No route found in manifest");let ot={};for(let Ze in Te){let Rt=ke[Ze]!==void 0&&Ze!=="hasErrorBoundary";i(!Rt,'Route "'+ke.id+'" has a static property "'+Ze+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+Ze+'" will be ignored.')),!Rt&&!b.has(Ze)&&(ot[Ze]=Te[Ze])}Object.assign(ke,ot),Object.assign(ke,p({},re(ke),{lazy:void 0}))}r(en,"loadLazyRouteModule");async function dt(q,re,he,Te,ke,ot,Ze,Mt,Rt){Rt===void 0&&(Rt={});let xt,kt,Jt,Yt=r(hn=>{let an,$t=new Promise((Bn,Ei)=>an=Ei);return Jt=r(()=>an(),"onReject"),re.signal.addEventListener("abort",Jt),Promise.race([hn({request:re,params:he.params,context:Rt.requestContext}),$t])},"runHandler");try{let hn=he.route[q];if(he.route.lazy)if(hn){let an,$t=await Promise.all([Yt(hn).catch(Bn=>{an=Bn}),en(he.route,ot,ke)]);if(an)throw an;kt=$t[0]}else if(await en(he.route,ot,ke),hn=he.route[q],hn)kt=await Yt(hn);else if(q==="action"){let an=new URL(re.url),$t=an.pathname+an.search;throw qn(405,{method:re.method,pathname:$t,routeId:he.route.id})}else return{type:E.data,data:void 0};else if(hn)kt=await Yt(hn);else{let an=new URL(re.url),$t=an.pathname+an.search;throw qn(404,{pathname:$t})}t(kt!==void 0,"You defined "+(q==="action"?"an action":"a loader")+" for route "+('"'+he.route.id+"\" but didn't return anything from your `"+q+"` ")+"function. Please return a value or `null`.")}catch(hn){xt=E.error,kt=hn}finally{Jt&&re.signal.removeEventListener("abort",Jt)}if(vi(kt)){let hn=kt.status;if(Ve.has(hn)){let $t=kt.headers.get("Location");if(t($t,"Redirects returned/thrown from loaders/actions must have a Location header"),!le.test($t))$t=me(new URL(re.url),Te.slice(0,Te.indexOf(he)+1),Ze,!0,$t,Mt);else if(!Rt.isStaticRequest){let Bn=new URL(re.url),Ei=$t.startsWith("//")?new URL(Bn.protocol+$t):new URL($t),Bi=Ge(Ei.pathname,Ze)!=null;Ei.origin===Bn.origin&&Bi&&($t=Ei.pathname+Ei.search+Ei.hash)}if(Rt.isStaticRequest)throw kt.headers.set("Location",$t),kt;return{type:E.redirect,status:hn,location:$t,revalidate:kt.headers.get("X-Remix-Revalidate")!==null,reloadDocument:kt.headers.get("X-Remix-Reload-Document")!==null}}if(Rt.isRouteRequest)throw{type:xt===E.error?E.error:E.data,response:kt};let an;try{let $t=kt.headers.get("Content-Type");$t&&/\bapplication\/json\b/.test($t)?kt.body==null?an=null:an=await kt.json():an=await kt.text()}catch($t){return{type:E.error,error:$t}}return xt===E.error?{type:xt,error:new Vt(hn,kt.statusText,an),headers:kt.headers}:{type:E.data,data:an,statusCode:kt.status,headers:kt.headers}}if(xt===E.error)return{type:xt,error:kt};if(si(kt)){var tn,mn;return{type:E.deferred,deferredData:kt,statusCode:(tn=kt.init)==null?void 0:tn.status,headers:((mn=kt.init)==null?void 0:mn.headers)&&new Headers(kt.init.headers)}}return{type:E.data,data:kt}}r(dt,"callLoaderOrAction");function Ct(q,re,he,Te){let ke=q.createURL(xr(re)).toString(),ot={signal:he};if(Te&&wi(Te.formMethod)){let{formMethod:Ze,formEncType:Mt}=Te;ot.method=Ze.toUpperCase(),Mt==="application/json"?(ot.headers=new Headers({"Content-Type":Mt}),ot.body=JSON.stringify(Te.json)):Mt==="text/plain"?ot.body=Te.text:Mt==="application/x-www-form-urlencoded"&&Te.formData?ot.body=xn(Te.formData):ot.body=Te.formData}return new Request(ke,ot)}r(Ct,"createClientSideRequest");function xn(q){let re=new URLSearchParams;for(let[he,Te]of q.entries())re.append(he,typeof Te=="string"?Te:Te.name);return re}r(xn,"convertFormDataToSearchParams");function Qt(q){let re=new FormData;for(let[he,Te]of q.entries())re.append(he,Te);return re}r(Qt,"convertSearchParamsToFormData");function Xi(q,re,he,Te,ke){let ot={},Ze=null,Mt,Rt=!1,xt={};return he.forEach((kt,Jt)=>{let Yt=re[Jt].route.id;if(t(!_n(kt),"Cannot handle redirect results in processLoaderData"),On(kt)){let tn=ni(q,Yt),mn=kt.error;Te&&(mn=Object.values(Te)[0],Te=void 0),Ze=Ze||{},Ze[tn.route.id]==null&&(Ze[tn.route.id]=mn),ot[Yt]=void 0,Rt||(Rt=!0,Mt=Wn(kt.error)?kt.error.status:500),kt.headers&&(xt[Yt]=kt.headers)}else Nt(kt)?(ke.set(Yt,kt.deferredData),ot[Yt]=kt.deferredData.data):ot[Yt]=kt.data,kt.statusCode!=null&&kt.statusCode!==200&&!Rt&&(Mt=kt.statusCode),kt.headers&&(xt[Yt]=kt.headers)}),Te&&(Ze=Te,ot[Object.keys(Te)[0]]=void 0),{loaderData:ot,errors:Ze,statusCode:Mt||200,loaderHeaders:xt}}r(Xi,"processRouteLoaderData");function Pi(q,re,he,Te,ke,ot,Ze,Mt){let{loaderData:Rt,errors:xt}=Xi(re,he,Te,ke,Mt);for(let kt=0;kt<ot.length;kt++){let{key:Jt,match:Yt,controller:tn}=ot[kt];t(Ze!==void 0&&Ze[kt]!==void 0,"Did not find corresponding fetcher result");let mn=Ze[kt];if(!(tn&&tn.signal.aborted))if(On(mn)){let hn=ni(q.matches,Yt==null?void 0:Yt.route.id);xt&&xt[hn.route.id]||(xt=p({},xt,{[hn.route.id]:mn.error})),q.fetchers.delete(Jt)}else if(_n(mn))t(!1,"Unhandled fetcher revalidation redirect");else if(Nt(mn))t(!1,"Unhandled fetcher deferred data");else{let hn=nt(mn.data);q.fetchers.set(Jt,hn)}}return{loaderData:Rt,errors:xt}}r(Pi,"processLoaderData");function Kn(q,re,he,Te){let ke=p({},re);for(let ot of he){let Ze=ot.route.id;if(re.hasOwnProperty(Ze)?re[Ze]!==void 0&&(ke[Ze]=re[Ze]):q[Ze]!==void 0&&ot.route.loader&&(ke[Ze]=q[Ze]),Te&&Te.hasOwnProperty(Ze))break}return ke}r(Kn,"mergeLoaderData");function ni(q,re){return(re?q.slice(0,q.findIndex(Te=>Te.route.id===re)+1):[...q]).reverse().find(Te=>Te.route.hasErrorBoundary===!0)||q[0]}r(ni,"findNearestBoundary");function Mn(q){let re=q.length===1?q[0]:q.find(he=>he.index||!he.path||he.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:re}],route:re}}r(Mn,"getShortCircuitMatches");function qn(q,re){let{pathname:he,routeId:Te,method:ke,type:ot}=re===void 0?{}:re,Ze="Unknown Server Error",Mt="Unknown @remix-run/router error";return q===400?(Ze="Bad Request",ke&&he&&Te?Mt="You made a "+ke+' request to "'+he+'" but '+('did not provide a `loader` for route "'+Te+'", ')+"so there is no way to handle the request.":ot==="defer-action"?Mt="defer() is not supported in actions":ot==="invalid-body"&&(Mt="Unable to encode submission body")):q===403?(Ze="Forbidden",Mt='Route "'+Te+'" does not match URL "'+he+'"'):q===404?(Ze="Not Found",Mt='No route matches URL "'+he+'"'):q===405&&(Ze="Method Not Allowed",ke&&he&&Te?Mt="You made a "+ke.toUpperCase()+' request to "'+he+'" but '+('did not provide an `action` for route "'+Te+'", ')+"so there is no way to handle the request.":ke&&(Mt='Invalid request method "'+ke.toUpperCase()+'"')),new Vt(q||500,Ze,new Error(Mt),!0)}r(qn,"getInternalRouterError");function bi(q){for(let re=q.length-1;re>=0;re--){let he=q[re];if(_n(he))return{result:he,idx:re}}}r(bi,"findRedirect");function xr(q){let re=typeof q=="string"?u(q):q;return S(p({},re,{hash:""}))}r(xr,"stripHashFromPath");function Zt(q,re){return q.pathname!==re.pathname||q.search!==re.search?!1:q.hash===""?re.hash!=="":q.hash===re.hash?!0:re.hash!==""}r(Zt,"isHashChangeOnly");function Nt(q){return q.type===E.deferred}r(Nt,"isDeferredResult");function On(q){return q.type===E.error}r(On,"isErrorResult");function _n(q){return(q&&q.type)===E.redirect}r(_n,"isRedirectResult");function si(q){let re=q;return re&&typeof re=="object"&&typeof re.data=="object"&&typeof re.subscribe=="function"&&typeof re.cancel=="function"&&typeof re.resolveData=="function"}r(si,"isDeferredData");function vi(q){return q!=null&&typeof q.status=="number"&&typeof q.statusText=="string"&&typeof q.headers=="object"&&typeof q.body<"u"}r(vi,"isResponse");function Mi(q){if(!vi(q))return!1;let re=q.status,he=q.headers.get("Location");return re>=300&&re<=399&&he!=null}r(Mi,"isRedirectResponse");function ui(q){return q&&vi(q.response)&&(q.type===E.data||q.type===E.error)}r(ui,"isQueryRouteResponse");function Ii(q){return z.has(q.toLowerCase())}r(Ii,"isValidMethod");function wi(q){return zt.has(q.toLowerCase())}r(wi,"isMutationMethod");async function Ui(q,re,he,Te,ke,ot){for(let Ze=0;Ze<he.length;Ze++){let Mt=he[Ze],Rt=re[Ze];if(!Rt)continue;let xt=q.find(Jt=>Jt.route.id===Rt.route.id),kt=xt!=null&&!we(xt,Rt)&&(ot&&ot[Rt.route.id])!==void 0;if(Nt(Mt)&&(ke||kt)){let Jt=Te[Ze];t(Jt,"Expected an AbortSignal for revalidating fetcher deferred result"),await ii(Mt,Jt,ke).then(Yt=>{Yt&&(he[Ze]=Yt||he[Ze])})}}}r(Ui,"resolveDeferredResults");async function ii(q,re,he){if(he===void 0&&(he=!1),!await q.deferredData.resolveData(re)){if(he)try{return{type:E.data,data:q.deferredData.unwrappedData}}catch(ke){return{type:E.error,error:ke}}return{type:E.data,data:q.deferredData.data}}}r(ii,"resolveDeferredData");function fr(q){return new URLSearchParams(q).getAll("index").some(re=>re==="")}r(fr,"hasNakedIndexQuery");function Li(q,re){let he=typeof re=="string"?u(re).search:re.search;if(q[q.length-1].route.index&&fr(he||""))return q[q.length-1];let Te=Pe(q);return Te[Te.length-1]}r(Li,"getTargetMatch");function Ar(q){let{formMethod:re,formAction:he,formEncType:Te,text:ke,formData:ot,json:Ze}=q;if(!(!re||!he||!Te)){if(ke!=null)return{formMethod:re,formAction:he,formEncType:Te,formData:void 0,json:void 0,text:ke};if(ot!=null)return{formMethod:re,formAction:he,formEncType:Te,formData:ot,json:void 0,text:void 0};if(Ze!==void 0)return{formMethod:re,formAction:he,formEncType:Te,formData:void 0,json:Ze,text:void 0}}}r(Ar,"getSubmissionFromNavigation");function Zn(q,re){return re?{state:"loading",location:q,formMethod:re.formMethod,formAction:re.formAction,formEncType:re.formEncType,formData:re.formData,json:re.json,text:re.text}:{state:"loading",location:q,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}r(Zn,"getLoadingNavigation");function N(q,re){return{state:"submitting",location:q,formMethod:re.formMethod,formAction:re.formAction,formEncType:re.formEncType,formData:re.formData,json:re.json,text:re.text}}r(N,"getSubmittingNavigation");function oe(q,re){return q?{state:"loading",formMethod:q.formMethod,formAction:q.formAction,formEncType:q.formEncType,formData:q.formData,json:q.json,text:q.text,data:re}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:re}}r(oe,"getLoadingFetcher");function Re(q,re){return{state:"submitting",formMethod:q.formMethod,formAction:q.formAction,formEncType:q.formEncType,formData:q.formData,json:q.json,text:q.text,data:re?re.data:void 0}}r(Re,"getSubmittingFetcher");function nt(q){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:q}}r(nt,"getDoneFetcher");function Pt(q,re){try{let he=q.sessionStorage.getItem(G);if(he){let Te=JSON.parse(he);for(let[ke,ot]of Object.entries(Te||{}))ot&&Array.isArray(ot)&&re.set(ke,new Set(ot||[]))}}catch{}}r(Pt,"restoreAppliedTransitions");function En(q,re){if(re.size>0){let he={};for(let[Te,ke]of re)he[Te]=[...ke];try{q.sessionStorage.setItem(G,JSON.stringify(he))}catch(Te){i(!1,"Failed to save applied view transitions in sessionStorage ("+Te+").")}}}r(En,"persistAppliedTransitions");/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wn(){return wn=Object.assign?Object.assign.bind():function(q){for(var re=1;re<arguments.length;re++){var he=arguments[re];for(var Te in he)Object.prototype.hasOwnProperty.call(he,Te)&&(q[Te]=he[Te])}return q},wn.apply(this,arguments)}r(wn,"dist_extends");const vn=f.createContext(null),yn=null,Rn=f.createContext(null),Fn=f.createContext(null),yi=f.createContext(null),fi=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Wi=f.createContext(null);function Zr(q,re){let{relative:he}=re===void 0?{}:re;gr()||UNSAFE_invariant(!1);let{basename:Te,navigator:ke}=React.useContext(Fn),{hash:ot,pathname:Ze,search:Mt}=ve(q,{relative:he}),Rt=Ze;return Te!=="/"&&(Rt=Ze==="/"?Te:joinPaths([Te,Ze])),ke.createHref({pathname:Rt,search:Mt,hash:ot})}r(Zr,"useHref");function gr(){return f.useContext(yi)!=null}r(gr,"useInRouterContext");function Un(){return gr()||t(!1),f.useContext(yi).location}r(Un,"useLocation");function hr(){return f.useContext(yi).navigationType}r(hr,"useNavigationType");function ar(q){gr()||UNSAFE_invariant(!1);let{pathname:re}=Un();return React.useMemo(()=>matchPath(q,re),[re,q])}r(ar,"useMatch");const pn=null;function Sr(q){f.useContext(Fn).static||f.useLayoutEffect(q)}r(Sr,"useIsomorphicLayoutEffect");function Pn(){let{isDataRoute:q}=f.useContext(fi);return q?Go():so()}r(Pn,"useNavigate");function so(){gr()||t(!1);let q=f.useContext(vn),{basename:re,future:he,navigator:Te}=f.useContext(Fn),{matches:ke}=f.useContext(fi),{pathname:ot}=Un(),Ze=JSON.stringify(xe(ke,he.v7_relativeSplatPath)),Mt=f.useRef(!1);return Sr(()=>{Mt.current=!0}),f.useCallback(function(xt,kt){if(kt===void 0&&(kt={}),!Mt.current)return;if(typeof xt=="number"){Te.go(xt);return}let Jt=et(xt,JSON.parse(Ze),ot,kt.relative==="path");q==null&&re!=="/"&&(Jt.pathname=Jt.pathname==="/"?re:je([re,Jt.pathname])),(kt.replace?Te.replace:Te.push)(Jt,kt.state,kt)},[re,Te,Ze,ot,q])}r(so,"useNavigateUnstable");const Wr=null;function $r(){return React.useContext(Wr)}r($r,"useOutletContext");function yo(q){let re=React.useContext(fi).outlet;return re&&React.createElement(Wr.Provider,{value:q},re)}r(yo,"useOutlet");function ue(){let{matches:q}=f.useContext(fi),re=q[q.length-1];return re?re.params:{}}r(ue,"useParams");function ve(q,re){let{relative:he}=re===void 0?{}:re,{future:Te}=React.useContext(Fn),{matches:ke}=React.useContext(fi),{pathname:ot}=Un(),Ze=JSON.stringify(UNSAFE_getResolveToMatches(ke,Te.v7_relativeSplatPath));return React.useMemo(()=>resolveTo(q,JSON.parse(Ze),ot,he==="path"),[q,Ze,ot,he])}r(ve,"useResolvedPath");function Le(q,re){return at(q,re)}r(Le,"useRoutes");function at(q,re,he,Te){gr()||UNSAFE_invariant(!1);let{navigator:ke}=React.useContext(Fn),{matches:ot}=React.useContext(fi),Ze=ot[ot.length-1],Mt=Ze?Ze.params:{},Rt=Ze?Ze.pathname:"/",xt=Ze?Ze.pathnameBase:"/",kt=Ze&&Ze.route,Jt=Un(),Yt;if(re){var tn;let Bn=typeof re=="string"?parsePath(re):re;xt==="/"||(tn=Bn.pathname)!=null&&tn.startsWith(xt)||UNSAFE_invariant(!1),Yt=Bn}else Yt=Jt;let mn=Yt.pathname||"/",hn=mn;if(xt!=="/"){let Bn=xt.replace(/^\//,"").split("/");hn="/"+mn.replace(/^\//,"").split("/").slice(Bn.length).join("/")}let an=matchRoutes(q,{pathname:hn}),$t=Tn(an&&an.map(Bn=>Object.assign({},Bn,{params:Object.assign({},Mt,Bn.params),pathname:joinPaths([xt,ke.encodeLocation?ke.encodeLocation(Bn.pathname).pathname:Bn.pathname]),pathnameBase:Bn.pathnameBase==="/"?xt:joinPaths([xt,ke.encodeLocation?ke.encodeLocation(Bn.pathnameBase).pathname:Bn.pathnameBase])})),ot,he,Te);return re&&$t?React.createElement(yi.Provider,{value:{location:wn({pathname:"/",search:"",hash:"",state:null,key:"default"},Yt),navigationType:Action.Pop}},$t):$t}r(at,"useRoutesImpl");function gt(){let q=li(),re=isRouteErrorResponse(q)?q.status+" "+q.statusText:q instanceof Error?q.message:JSON.stringify(q),he=q instanceof Error?q.stack:null,Te="rgba(200,200,200, 0.5)",ke={padding:"0.5rem",backgroundColor:Te},ot={padding:"2px 4px",backgroundColor:Te},Ze=null;return React.createElement(React.Fragment,null,React.createElement("h2",null,"Unexpected Application Error!"),React.createElement("h3",{style:{fontStyle:"italic"}},re),he?React.createElement("pre",{style:ke},he):null,Ze)}r(gt,"DefaultErrorComponent");const Tt=null;class rn extends f.Component{constructor(re){super(re),this.state={location:re.location,revalidation:re.revalidation,error:re.error}}static getDerivedStateFromError(re){return{error:re}}static getDerivedStateFromProps(re,he){return he.location!==re.location||he.revalidation!=="idle"&&re.revalidation==="idle"?{error:re.error,location:re.location,revalidation:re.revalidation}:{error:re.error!==void 0?re.error:he.error,location:he.location,revalidation:re.revalidation||he.revalidation}}componentDidCatch(re,he){console.error("React Router caught the following error during render",re,he)}render(){return this.state.error!==void 0?f.createElement(fi.Provider,{value:this.props.routeContext},f.createElement(Wi.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}r(rn,"RenderErrorBoundary");function bn(q){let{routeContext:re,match:he,children:Te}=q,ke=React.useContext(vn);return ke&&ke.static&&ke.staticContext&&(he.route.errorElement||he.route.ErrorBoundary)&&(ke.staticContext._deepestRenderedBoundaryId=he.route.id),React.createElement(fi.Provider,{value:re},Te)}r(bn,"RenderedRoute");function Tn(q,re,he,Te){var ke;if(re===void 0&&(re=[]),he===void 0&&(he=null),Te===void 0&&(Te=null),q==null){var ot;if((ot=he)!=null&&ot.errors)q=he.matches;else return null}let Ze=q,Mt=(ke=he)==null?void 0:ke.errors;if(Mt!=null){let kt=Ze.findIndex(Jt=>Jt.route.id&&(Mt==null?void 0:Mt[Jt.route.id]));kt>=0||UNSAFE_invariant(!1),Ze=Ze.slice(0,Math.min(Ze.length,kt+1))}let Rt=!1,xt=-1;if(he&&Te&&Te.v7_partialHydration)for(let kt=0;kt<Ze.length;kt++){let Jt=Ze[kt];if((Jt.route.HydrateFallback||Jt.route.hydrateFallbackElement)&&(xt=kt),Jt.route.id){let{loaderData:Yt,errors:tn}=he,mn=Jt.route.loader&&Yt[Jt.route.id]===void 0&&(!tn||tn[Jt.route.id]===void 0);if(Jt.route.lazy||mn){Rt=!0,xt>=0?Ze=Ze.slice(0,xt+1):Ze=[Ze[0]];break}}}return Ze.reduceRight((kt,Jt,Yt)=>{let tn,mn=!1,hn=null,an=null;he&&(tn=Mt&&Jt.route.id?Mt[Jt.route.id]:void 0,hn=Jt.route.errorElement||Tt,Rt&&(xt<0&&Yt===0?(ko("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),mn=!0,an=null):xt===Yt&&(mn=!0,an=Jt.route.hydrateFallbackElement||null)));let $t=re.concat(Ze.slice(0,Yt+1)),Bn=r(()=>{let Ei;return tn?Ei=hn:mn?Ei=an:Jt.route.Component?Ei=React.createElement(Jt.route.Component,null):Jt.route.element?Ei=Jt.route.element:Ei=kt,React.createElement(bn,{match:Jt,routeContext:{outlet:kt,matches:$t,isDataRoute:he!=null},children:Ei})},"getChildren");return he&&(Jt.route.ErrorBoundary||Jt.route.errorElement||Yt===0)?React.createElement(rn,{location:he.location,revalidation:he.revalidation,component:hn,error:tn,children:Bn(),routeContext:{outlet:null,matches:$t,isDataRoute:!0}}):Bn()},null)}r(Tn,"_renderMatches");var ln=function(q){return q.UseBlocker="useBlocker",q.UseRevalidator="useRevalidator",q.UseNavigateStable="useNavigate",q}(ln||{}),Vn=function(q){return q.UseBlocker="useBlocker",q.UseLoaderData="useLoaderData",q.UseActionData="useActionData",q.UseRouteError="useRouteError",q.UseNavigation="useNavigation",q.UseRouteLoaderData="useRouteLoaderData",q.UseMatches="useMatches",q.UseRevalidator="useRevalidator",q.UseNavigateStable="useNavigate",q.UseRouteId="useRouteId",q}(Vn||{});function Ut(q){return q+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}r(Ut,"getDataRouterConsoleError");function hi(q){let re=f.useContext(vn);return re||t(!1),re}r(hi,"useDataRouterContext");function An(q){let re=React.useContext(yn);return re||UNSAFE_invariant(!1),re}r(An,"useDataRouterState");function Fi(q){let re=f.useContext(fi);return re||t(!1),re}r(Fi,"useRouteContext");function Qi(q){let re=Fi(q),he=re.matches[re.matches.length-1];return he.route.id||t(!1),he.route.id}r(Qi,"useCurrentRouteId");function Zi(){return Qi(Vn.UseRouteId)}r(Zi,"useRouteId");function Hn(){return An(Vn.UseNavigation).navigation}r(Hn,"useNavigation");function Jn(){let q=hi(ln.UseRevalidator),re=An(Vn.UseRevalidator);return React.useMemo(()=>({revalidate:q.router.revalidate,state:re.revalidation}),[q.router.revalidate,re.revalidation])}r(Jn,"useRevalidator");function ai(){let{matches:q,loaderData:re}=An(Vn.UseMatches);return React.useMemo(()=>q.map(he=>UNSAFE_convertRouteMatchToUiMatch(he,re)),[q,re])}r(ai,"useMatches");function Ri(){let q=An(Vn.UseLoaderData),re=Qi(Vn.UseLoaderData);if(q.errors&&q.errors[re]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+re+")");return}return q.loaderData[re]}r(Ri,"useLoaderData");function Cr(q){return An(Vn.UseRouteLoaderData).loaderData[q]}r(Cr,"useRouteLoaderData");function Ur(){let q=An(Vn.UseActionData),re=Qi(Vn.UseLoaderData);return q.actionData?q.actionData[re]:void 0}r(Ur,"useActionData");function li(){var q;let re=React.useContext(Wi),he=An(Vn.UseRouteError),Te=Qi(Vn.UseRouteError);return re!==void 0?re:(q=he.errors)==null?void 0:q[Te]}r(li,"useRouteError");function Kr(){let q=React.useContext(Rn);return q==null?void 0:q._data}r(Kr,"useAsyncValue");function Ji(){let q=React.useContext(Rn);return q==null?void 0:q._error}r(Ji,"useAsyncError");let Or=0;function xo(q){let{router:re,basename:he}=hi(ln.UseBlocker),Te=An(Vn.UseBlocker),[ke,ot]=React.useState(""),Ze=React.useCallback(Mt=>{if(typeof q!="function")return!!q;if(he==="/")return q(Mt);let{currentLocation:Rt,nextLocation:xt,historyAction:kt}=Mt;return q({currentLocation:wn({},Rt,{pathname:stripBasename(Rt.pathname,he)||Rt.pathname}),nextLocation:wn({},xt,{pathname:stripBasename(xt.pathname,he)||xt.pathname}),historyAction:kt})},[he,q]);return React.useEffect(()=>{let Mt=String(++Or);return ot(Mt),()=>re.deleteBlocker(Mt)},[re]),React.useEffect(()=>{ke!==""&&re.getBlocker(ke,Ze)},[re,ke,Ze]),ke&&Te.blockers.has(ke)?Te.blockers.get(ke):IDLE_BLOCKER}r(xo,"useBlocker");function Go(){let{router:q}=hi(ln.UseNavigateStable),re=Qi(Vn.UseNavigateStable),he=f.useRef(!1);return Sr(()=>{he.current=!0}),f.useCallback(function(ke,ot){ot===void 0&&(ot={}),he.current&&(typeof ke=="number"?q.navigate(ke):q.navigate(ke,wn({fromRouteId:re},ot)))},[q,re])}r(Go,"useNavigateStable");const Po={};function ko(q,re,he){!re&&!Po[q]&&(Po[q]=!0)}r(ko,"warningOnce");const To=h["startTransition"];function Jr(q){let{fallbackElement:re,router:he,future:Te}=q,[ke,ot]=React.useState(he.state),{v7_startTransition:Ze}=Te||{},Mt=React.useCallback(Jt=>{Ze&&To?To(()=>ot(Jt)):ot(Jt)},[ot,Ze]);React.useLayoutEffect(()=>he.subscribe(Mt),[he,Mt]),React.useEffect(()=>{},[]);let Rt=React.useMemo(()=>({createHref:he.createHref,encodeLocation:he.encodeLocation,go:Jt=>he.navigate(Jt),push:(Jt,Yt,tn)=>he.navigate(Jt,{state:Yt,preventScrollReset:tn==null?void 0:tn.preventScrollReset}),replace:(Jt,Yt,tn)=>he.navigate(Jt,{replace:!0,state:Yt,preventScrollReset:tn==null?void 0:tn.preventScrollReset})}),[he]),xt=he.basename||"/",kt=React.useMemo(()=>({router:he,navigator:Rt,static:!1,basename:xt}),[he,Rt,xt]);return React.createElement(React.Fragment,null,React.createElement(vn.Provider,{value:kt},React.createElement(yn.Provider,{value:ke},React.createElement(co,{basename:xt,location:ke.location,navigationType:ke.historyAction,navigator:Rt,future:{v7_relativeSplatPath:he.future.v7_relativeSplatPath}},ke.initialized||he.future.v7_partialHydration?React.createElement(ao,{routes:he.routes,future:he.future,state:ke}):re))),null)}r(Jr,"RouterProvider");function ao(q){let{routes:re,future:he,state:Te}=q;return at(re,void 0,Te,he)}r(ao,"DataRoutes");function Io(q){let{basename:re,children:he,initialEntries:Te,initialIndex:ke,future:ot}=q,Ze=React.useRef();Ze.current==null&&(Ze.current=createMemoryHistory({initialEntries:Te,initialIndex:ke,v5Compat:!0}));let Mt=Ze.current,[Rt,xt]=React.useState({action:Mt.action,location:Mt.location}),{v7_startTransition:kt}=ot||{},Jt=React.useCallback(Yt=>{kt&&To?To(()=>xt(Yt)):xt(Yt)},[xt,kt]);return React.useLayoutEffect(()=>Mt.listen(Jt),[Mt,Jt]),React.createElement(co,{basename:re,children:he,location:Rt.location,navigationType:Rt.action,navigator:Mt,future:ot})}r(Io,"MemoryRouter");function Gr(q){let{to:re,replace:he,state:Te,relative:ke}=q;gr()||UNSAFE_invariant(!1);let{future:ot,static:Ze}=React.useContext(Fn),{matches:Mt}=React.useContext(fi),{pathname:Rt}=Un(),xt=Pn(),kt=resolveTo(re,UNSAFE_getResolveToMatches(Mt,ot.v7_relativeSplatPath),Rt,ke==="path"),Jt=JSON.stringify(kt);return React.useEffect(()=>xt(JSON.parse(Jt),{replace:he,state:Te,relative:ke}),[xt,Jt,ke,he,Te]),null}r(Gr,"Navigate");function lo(q){return yo(q.context)}r(lo,"Outlet");function vr(q){UNSAFE_invariant(!1)}r(vr,"Route");function co(q){let{basename:re="/",children:he=null,location:Te,navigationType:ke=Action.Pop,navigator:ot,static:Ze=!1,future:Mt}=q;gr()&&UNSAFE_invariant(!1);let Rt=re.replace(/^\/*/,"/"),xt=React.useMemo(()=>({basename:Rt,navigator:ot,static:Ze,future:wn({v7_relativeSplatPath:!1},Mt)}),[Rt,Mt,ot,Ze]);typeof Te=="string"&&(Te=parsePath(Te));let{pathname:kt="/",search:Jt="",hash:Yt="",state:tn=null,key:mn="default"}=Te,hn=React.useMemo(()=>{let an=stripBasename(kt,Rt);return an==null?null:{location:{pathname:an,search:Jt,hash:Yt,state:tn,key:mn},navigationType:ke}},[Rt,kt,Jt,Yt,tn,mn,ke]);return hn==null?null:React.createElement(Fn.Provider,{value:xt},React.createElement(yi.Provider,{children:he,value:hn}))}r(co,"Router");function ws(q){let{children:re,location:he}=q;return Le(wr(re),he)}r(ws,"Routes");function Ds(q){let{children:re,errorElement:he,resolve:Te}=q;return React.createElement(pr,{resolve:Te,errorElement:he},React.createElement(Mr,null,re))}r(Ds,"Await");var Yr=function(q){return q[q.pending=0]="pending",q[q.success=1]="success",q[q.error=2]="error",q}(Yr||{});const Co=new Promise(()=>{});class pr extends f.Component{constructor(re){super(re),this.state={error:null}}static getDerivedStateFromError(re){return{error:re}}componentDidCatch(re,he){console.error("<Await> caught the following error during render",re,he)}render(){let{children:re,errorElement:he,resolve:Te}=this.props,ke=null,ot=Yr.pending;if(!(Te instanceof Promise))ot=Yr.success,ke=Promise.resolve(),Object.defineProperty(ke,"_tracked",{get:()=>!0}),Object.defineProperty(ke,"_data",{get:()=>Te});else if(this.state.error){ot=Yr.error;let Ze=this.state.error;ke=Promise.reject().catch(()=>{}),Object.defineProperty(ke,"_tracked",{get:()=>!0}),Object.defineProperty(ke,"_error",{get:()=>Ze})}else Te._tracked?(ke=Te,ot=ke._error!==void 0?Yr.error:ke._data!==void 0?Yr.success:Yr.pending):(ot=Yr.pending,Object.defineProperty(Te,"_tracked",{get:()=>!0}),ke=Te.then(Ze=>Object.defineProperty(Te,"_data",{get:()=>Ze}),Ze=>Object.defineProperty(Te,"_error",{get:()=>Ze})));if(ot===Yr.error&&ke._error instanceof cn)throw Co;if(ot===Yr.error&&!he)throw ke._error;if(ot===Yr.error)return f.createElement(Rn.Provider,{value:ke,children:he});if(ot===Yr.success)return f.createElement(Rn.Provider,{value:ke,children:re});throw ke}}r(pr,"AwaitErrorBoundary");function Mr(q){let{children:re}=q,he=Kr(),Te=typeof re=="function"?re(he):re;return React.createElement(React.Fragment,null,Te)}r(Mr,"ResolveAwait");function wr(q,re){re===void 0&&(re=[]);let he=[];return React.Children.forEach(q,(Te,ke)=>{if(!React.isValidElement(Te))return;let ot=[...re,ke];if(Te.type===React.Fragment){he.push.apply(he,wr(Te.props.children,ot));return}Te.type!==vr&&UNSAFE_invariant(!1),!Te.props.index||!Te.props.children||UNSAFE_invariant(!1);let Ze={id:Te.props.id||ot.join("-"),caseSensitive:Te.props.caseSensitive,element:Te.props.element,Component:Te.props.Component,index:Te.props.index,path:Te.props.path,loader:Te.props.loader,action:Te.props.action,errorElement:Te.props.errorElement,ErrorBoundary:Te.props.ErrorBoundary,hasErrorBoundary:Te.props.ErrorBoundary!=null||Te.props.errorElement!=null,shouldRevalidate:Te.props.shouldRevalidate,handle:Te.props.handle,lazy:Te.props.lazy};Te.props.children&&(Ze.children=wr(Te.props.children,ot)),he.push(Ze)}),he}r(wr,"createRoutesFromChildren");function jr(q){return Tn(q)}r(jr,"renderMatches");function Vr(q){let re={hasErrorBoundary:q.ErrorBoundary!=null||q.errorElement!=null};return q.Component&&Object.assign(re,{element:React.createElement(q.Component),Component:void 0}),q.HydrateFallback&&Object.assign(re,{hydrateFallbackElement:React.createElement(q.HydrateFallback),HydrateFallback:void 0}),q.ErrorBoundary&&Object.assign(re,{errorElement:React.createElement(q.ErrorBoundary),ErrorBoundary:void 0}),re}r(Vr,"mapRouteProperties");function rs(q,re){return createRouter({basename:re==null?void 0:re.basename,future:wn({},re==null?void 0:re.future,{v7_prependBasename:!0}),history:createMemoryHistory({initialEntries:re==null?void 0:re.initialEntries,initialIndex:re==null?void 0:re.initialIndex}),hydrationData:re==null?void 0:re.hydrationData,routes:q,mapRouteProperties:Vr}).initialize()}r(rs,"createMemoryRouter")},7763652800:(B,l,d)=>{"use strict";d.d(l,{P:()=>h});function f(m){return r(({dispatch:s,getState:n})=>e=>t=>typeof t=="function"?t(s,n,m):e(t),"middleware")}r(f,"createThunkMiddleware");var h=f(),p=null},4473827453:()=>{(function(){var B=["user-blocking","user-visible","background"];class l{constructor(){this.channel_=new MessageChannel,this.sendPort_=this.channel_.port2,this.messages_={},this.nextMessageHandle_=1,this.channel_.port1.onmessage=n=>this.onMessageReceived_(n)}queueCallback(n){var e=this.nextMessageHandle_++;return this.messages_[e]=n,this.sendPort_.postMessage(e),e}cancelCallback(n){delete this.messages_[n]}onMessageReceived_(n){var e=n.data;if(e in this.messages_){var t=this.messages_[e];delete this.messages_[e],t()}}}r(l,"t");function d(){return d.instance_||(d.instance_=new l),d.instance_}r(d,"i");class f{constructor(n,e,t){t===void 0&&(t=0),this.callback_=n,this.callbackType_=null,this.handle_=null,this.canceled_=!1,this.schedule_(e,t)}isIdleCallback(){return this.callbackType_===0}isMessageChannelCallback(){return this.callbackType_===2}cancel(){if(!this.canceled_)switch(this.canceled_=!0,this.callbackType_){case 0:cancelIdleCallback(this.handle_);break;case 1:clearTimeout(this.handle_);break;case 2:d().cancelCallback(this.handle_);break;default:throw new TypeError("Unknown CallbackType")}}schedule_(n,e){if(e&&e>0)return this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()},e));if(!B.includes(n))throw new TypeError("Invalid task priority : "+n);return n==="background"&&typeof requestIdleCallback=="function"?(this.callbackType_=0,void(this.handle_=requestIdleCallback(()=>{this.runCallback_()}))):typeof MessageChannel=="function"?(this.callbackType_=2,void(this.handle_=d().queueCallback(()=>{this.runCallback_()}))):(this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()})))}runCallback_(){this.canceled_||this.callback_()}}r(f,"s");var h=0;class p{constructor(){this.head_=null,this.tail_=null}isEmpty(){return this.head_==null}push(n){if(typeof n!="object")throw new TypeError("Task must be an Object");n.tq_sequence_=h++,this.isEmpty()?(n.tq_prev_=null,this.head_=n):(n.tq_prev_=this.tail_,this.tail_.tq_next_=n),n.tq_next_=null,this.tail_=n}takeNextTask(){if(this.isEmpty())return null;var n=this.head_;return this.remove_(n),n}merge(n,e){if(typeof e!="function")throw new TypeError("Must provide a selector function.");if(n==null)throw new Error("sourceQueue cannot be null");for(var t=this.head_,i=null,o=n.head_;o;){var c=o;if(o=o.tq_next_,e(c)){for(n.remove_(c);t&&t.tq_sequence_<c.tq_sequence_;)i=t,t=t.tq_next_;this.insert_(c,i),i=c}}}toArray(){for(var n=this.head_,e=[];n!==null;)e.push(n),n=n.tq_next_;return e}insert_(n,e){if(e!=this.tail_){var t=e?e.tq_next_:this.head_;n.tq_next_=t,t.tq_prev_=n,n.tq_prev_=e,e!=null?e.tq_next_=n:this.head_=n}else this.push(n)}remove_(n){if(n==null)throw new Error("Expected task to be non-null");n===this.head_&&(this.head_=n.tq_next_),n===this.tail_&&(this.tail_=this.tail_.tq_prev_),n.tq_next_&&(n.tq_next_.tq_prev_=n.tq_prev_),n.tq_prev_&&(n.tq_prev_.tq_next_=n.tq_next_)}}r(p,"a");class m extends Event{constructor(n,e){if(!e||!B.includes(e.previousPriority))throw new TypeError("Invalid task priority: '"+e.previousPriority+"'");super(n),this.previousPriority=e.previousPriority}}r(m,"n");class a extends AbortController{constructor(n){if(n===void 0&&(n={}),super(),n==null&&(n={}),typeof n!="object")throw new TypeError("'init' is not an object");var e,t,i=n.priority===void 0?"user-visible":n.priority;if(!B.includes(i))throw new TypeError("Invalid task priority: '"+i+"'");this.priority_=i,this.isPriorityChanging_=!1,t=(e=this).signal,Object.defineProperties(t,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),t.addEventListener("prioritychange",o=>{t.onprioritychange&&t.onprioritychange(o)})}setPriority(n){if(!B.includes(n))throw new TypeError("Invalid task priority: "+n);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority!==n){this.isPriorityChanging_=!0;var e=this.priority_;this.priority_=n;var t=new m("prioritychange",{previousPriority:e});this.signal.dispatchEvent(t),this.isPriorityChanging_=!1}}}r(a,"l"),self.scheduler===void 0&&(self.scheduler=new class{constructor(){this.queues_={},B.forEach(s=>{this.queues_[s]=new p}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(s,n){if((n=Object.assign({},n)).signal!==void 0){if(n.signal===null||!("aborted"in n.signal)||typeof n.signal.addEventListener!="function")return Promise.reject(new TypeError("'signal' is not a valid 'AbortSignal'"));if(n.signal&&n.signal.priority&&!B.includes(n.signal.priority))return Promise.reject(new TypeError("Invalid task priority: '"+n.signal.priority+"'"))}if(n.priority!==void 0&&(n.priority===null||!B.includes(n.priority)))return Promise.reject(new TypeError("Invalid task priority: '"+n.priority+"'"));if(n.delay===void 0&&(n.delay=0),n.delay=Number(n.delay),n.delay<0)return Promise.reject(new TypeError("'delay' must be a positive number."));var e={callback:s,options:n,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},t=new Promise((i,o)=>{e.resolve=i,e.reject=o});return this.schedule_(e),t}schedule_(s){var n=s.options.signal;if(n){if(n.aborted)return void s.reject(n.reason);s.abortCallback=()=>{s.onTaskAborted()},n.addEventListener("abort",s.abortCallback)}s.options.delay>0?s.hostCallback=new f(()=>{s.hostCallback=null,this.onTaskDelayExpired_(s)},null,s.options.delay):(this.pushTask_(s),this.scheduleHostCallbackIfNeeded_())}onTaskDelayExpired_(s){this.pushTask_(s),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(s){var n=this.signals_.get(s);if(n===void 0)throw new Error("Attempting to change priority on an unregistered signal");n!==s.priority&&(this.queues_[s.priority].merge(this.queues_[n],e=>e.options.signal===s),this.signals_.set(s,s.priority))}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){var s=this.nextTaskPriority_();s!=null&&(s!=="background"&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new f(()=>{this.schedulerEntryCallback_()},s,0)))}pushTask_(s){var n;if(!B.includes(n=s.options.priority?s.options.priority:s.options.signal&&s.options.signal.priority?s.options.signal.priority:"user-visible"))throw new TypeError("Invalid task priority: "+n);if(s.options.signal&&s.options.signal.priority){var e=s.options.signal;this.signals_.has(e)||(e.addEventListener("prioritychange",()=>{this.onPriorityChange_(e)}),this.signals_.set(e,e.priority))}this.queues_[n].push(s)}runNextTask_(){var s=null;do{var n=this.nextTaskPriority_();if(n==null)return;s=this.queues_[n].takeNextTask()}while(s.isAborted());try{var e=s.callback();s.resolve(e)}catch(t){s.reject(t)}finally{s.onTaskCompleted()}}nextTaskPriority_(){for(var s=0;s<B.length;s++){var n=B[s];if(!this.queues_[n].isEmpty())return n}return null}},self.TaskController=a,self.TaskPriorityChangeEvent=m)})()},3803027235:()=>{/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */String.fromCodePoint||function(){var B=function(){try{var h={},p=Object.defineProperty,m=p(h,h,h)&&p}catch{}return m}(),l=String.fromCharCode,d=Math.floor,f=r(function(h){var p=16384,m=[],a,s,n=-1,e=arguments.length;if(!e)return"";for(var t="";++n<e;){var i=Number(arguments[n]);if(!isFinite(i)||i<0||i>1114111||d(i)!=i)throw RangeError("Invalid code point: "+i);i<=65535?m.push(i):(i-=65536,a=(i>>10)+55296,s=i%1024+56320,m.push(a,s)),(n+1==e||m.length>p)&&(t+=l.apply(null,m),m.length=0)}return t},"fromCodePoint");B?B(String,"fromCodePoint",{value:f,configurable:!0,writable:!0}):String.fromCodePoint=f}()},8274921051:(B,l,d)=>{"use strict";d.d(l,{Q:()=>f,c:()=>h});var f;(function(p){p[p.ID=25]="ID",p[p.FRECENCY=0]="FRECENCY",p[p.RAW_FRECENCY=65]="RAW_FRECENCY",p[p.FRECENCY_BONUS=76]="FRECENCY_BONUS",p[p.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",p[p.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",p[p.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",p[p.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",p[p.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",p[p.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",p[p.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",p[p.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",p[p.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",p[p.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",p[p.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",p[p.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",p[p.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",p[p.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",p[p.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",p[p.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",p[p.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",p[p.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",p[p.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",p[p.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",p[p.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",p[p.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",p[p.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",p[p.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",p[p.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",p[p.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",p[p.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",p[p.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",p[p.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",p[p.TYPE_QUERY=6]="TYPE_QUERY",p[p.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",p[p.TYPE_EMOJI=178]="TYPE_EMOJI",p[p.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",p[p.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",p[p.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",p[p.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",p[p.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",p[p.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",p[p.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",p[p.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",p[p.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",p[p.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",p[p.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",p[p.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",p[p.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",p[p.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",p[p.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",p[p.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",p[p.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",p[p.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",p[p.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",p[p.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",p[p.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",p[p.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",p[p.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",p[p.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",p[p.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",p[p.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",p[p.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",p[p.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",p[p.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",p[p.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",p[p.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",p[p.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",p[p.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",p[p.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",p[p.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",p[p.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",p[p.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",p[p.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",p[p.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",p[p.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",p[p.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",p[p.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",p[p.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",p[p.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",p[p.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",p[p.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",p[p.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",p[p.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",p[p.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",p[p.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",p[p.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",p[p.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",p[p.QUERY_LENGTH=61]="QUERY_LENGTH",p[p.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",p[p.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",p[p.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",p[p.MPIM_PRIORITY=66]="MPIM_PRIORITY",p[p.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",p[p.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",p[p.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",p[p.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",p[p.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",p[p.FUZZY_SCORE=73]="FUZZY_SCORE",p[p.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",p[p.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",p[p.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",p[p.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",p[p.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",p[p.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",p[p.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",p[p.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",p[p.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",p[p.USER_PRIORITY=89]="USER_PRIORITY",p[p.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",p[p.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",p[p.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",p[p.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",p[p.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",p[p.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",p[p.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",p[p.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",p[p.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",p[p.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",p[p.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",p[p.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",p[p.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",p[p.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",p[p.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",p[p.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",p[p.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",p[p.HERE_KEYWORD=131]="HERE_KEYWORD",p[p.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",p[p.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",p[p.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",p[p.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",p[p.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",p[p.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",p[p.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",p[p.QUERY_IS_SELF=193]="QUERY_IS_SELF",p[p.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",p[p.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",p[p.USER_SAME_TEAM=235]="USER_SAME_TEAM",p[p.USER_IS_BOT=254]="USER_IS_BOT",p[p.MEMBER_OF_SEARCHER_DEFAULT_TEAM=294]="MEMBER_OF_SEARCHER_DEFAULT_TEAM",p[p.HAS_WORKSPACE_INTERSECTION_WITH_SEARCHER=295]="HAS_WORKSPACE_INTERSECTION_WITH_SEARCHER",p[p.NUM_WORKSPACES_INTERSECTING_WITH_SEARCHER=296]="NUM_WORKSPACES_INTERSECTING_WITH_SEARCHER",p[p.USER_IS_DEACTIVATED=297]="USER_IS_DEACTIVATED",p[p.USER_IS_IN_CURRENT_THREAD=298]="USER_IS_IN_CURRENT_THREAD",p[p.MEMBER_FILTER_USER_IN_CHANNEL=299]="MEMBER_FILTER_USER_IN_CHANNEL",p[p.FROM_AND_CHANNEL_FILTERS_USER_IN_CHANNEL=300]="FROM_AND_CHANNEL_FILTERS_USER_IN_CHANNEL",p[p.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",p[p.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",p[p.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",p[p.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",p[p.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",p[p.HISTORY_POSITION=232]="HISTORY_POSITION",p[p.USER_DM_NULL=179]="USER_DM_NULL",p[p.USER_DM_EMPTY=180]="USER_DM_EMPTY",p[p.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",p[p.USER_DM_OPEN=182]="USER_DM_OPEN",p[p.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",p[p.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",p[p.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",p[p.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",p[p.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",p[p.USER_HAS_DMED=284]="USER_HAS_DMED",p[p.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",p[p.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",p[p.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",p[p.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",p[p.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",p[p.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",p[p.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",p[p.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",p[p.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",p[p.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",p[p.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",p[p.MPIM_MEMBERS=166]="MPIM_MEMBERS",p[p.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",p[p.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",p[p.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",p[p.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",p[p.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",p[p.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",p[p.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",p[p.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",p[p.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",p[p.MPIM_NUM_OTHER_MEMBERS_EQUALS_NUM_QUERY_WORDS=301]="MPIM_NUM_OTHER_MEMBERS_EQUALS_NUM_QUERY_WORDS",p[p.MPIM_ALL_OTHER_MEMBERS_NAMES_HAVE_PREFIX_MATCH=302]="MPIM_ALL_OTHER_MEMBERS_NAMES_HAVE_PREFIX_MATCH",p[p.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",p[p.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",p[p.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",p[p.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",p[p.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",p[p.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",p[p.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",p[p.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",p[p.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",p[p.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",p[p.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",p[p.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",p[p.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",p[p.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",p[p.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",p[p.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",p[p.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",p[p.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",p[p.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",p[p.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",p[p.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",p[p.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",p[p.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",p[p.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",p[p.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",p[p.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",p[p.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",p[p.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",p[p.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",p[p.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",p[p.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",p[p.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",p[p.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",p[p.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",p[p.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",p[p.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",p[p.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",p[p.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",p[p.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",p[p.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",p[p.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",p[p.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",p[p.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",p[p.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",p[p.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",p[p.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",p[p.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",p[p.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",p[p.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",p[p.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",p[p.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",p[p.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",p[p.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",p[p.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",p[p.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",p[p.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",p[p.NUM_RESULTS=192]="NUM_RESULTS",p[p.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",p[p.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",p[p.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",p[p.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",p[p.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",p[p.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",p[p.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",p[p.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",p[p.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",p[p.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",p[p.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",p[p.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",p[p.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",p[p.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",p[p.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",p[p.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",p[p.FILE_USER_CTR=211]="FILE_USER_CTR",p[p.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",p[p.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",p[p.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",p[p.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",p[p.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",p[p.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",p[p.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",p[p.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",p[p.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",p[p.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",p[p.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",p[p.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",p[p.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",p[p.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",p[p.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",p[p.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",p[p.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",p[p.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",p[p.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",p[p.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",p[p.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",p[p.OS_APP_ACTION=228]="OS_APP_ACTION",p[p.TYPE_APP=216]="TYPE_APP",p[p.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",p[p.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",p[p.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",p[p.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",p[p.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",p[p.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",p[p.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",p[p.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",p[p.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",p[p.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",p[p.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",p[p.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",p[p.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",p[p.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",p[p.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",p[p.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",p[p.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",p[p.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",p[p.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",p[p.TEST_FEATURE_2=1001]="TEST_FEATURE_2",p[p.TEST_FEATURE_3=1002]="TEST_FEATURE_3",p[p.TEST_FEATURE_4=1003]="TEST_FEATURE_4",p[p.TEST_FEATURE_5=1004]="TEST_FEATURE_5",p[p.TEST_FEATURE_6=1005]="TEST_FEATURE_6",p[p.TEST_FEATURE_7=1006]="TEST_FEATURE_7",p[p.TEST_FEATURE_8=1007]="TEST_FEATURE_8",p[p.TEST_FEATURE_9=1008]="TEST_FEATURE_9",p[p.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(f||(f={}));var h;(function(p){p[p.NUMERICAL=1]="NUMERICAL",p[p.BINARY=2]="BINARY",p[p.TEXT=3]="TEXT"})(h||(h={}))},9372409576:(B,l,d)=>{"use strict";d.d(l,{$:()=>n});var f=d(4224187311),h=d.n(f);const p=f.Reader,m=f.Writer,a=f.util,s=f.roots.default||(f.roots.default={}),n=s.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const i={};return i.RecvMedia=function(){function o(g){if(g)for(let S=Object.keys(g),u=0;u<S.length;++u)g[S[u]]!=null&&(this[S[u]]=g[S[u]])}r(o,"RecvMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.fractionLost=0,o.prototype.jitter=0,o.prototype.packetsLost=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.userId="",o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let c;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(c=["audioStats","videoStats"]),set:a.oneOfSetter(c)}),o.create=r(function(S){return new o(S)},"create"),o.encode=r(function(S,u){return u||(u=m.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&u.uint32(8).uint64(S.peerId),S.bytesReceived!=null&&Object.hasOwnProperty.call(S,"bytesReceived")&&u.uint32(16).uint64(S.bytesReceived),S.packetsReceived!=null&&Object.hasOwnProperty.call(S,"packetsReceived")&&u.uint32(24).uint64(S.packetsReceived),S.fractionLost!=null&&Object.hasOwnProperty.call(S,"fractionLost")&&u.uint32(33).double(S.fractionLost),S.jitter!=null&&Object.hasOwnProperty.call(S,"jitter")&&u.uint32(41).double(S.jitter),S.packetsLost!=null&&Object.hasOwnProperty.call(S,"packetsLost")&&u.uint32(48).uint64(S.packetsLost),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&u.uint32(56).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&s.slack.calls.analytics.RecvMedia.Audio.encode(S.audioStats,u.uint32(66).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&s.slack.calls.analytics.RecvMedia.Video.encode(S.videoStats,u.uint32(74).fork()).ldelim(),S.userId!=null&&Object.hasOwnProperty.call(S,"userId")&&u.uint32(82).string(S.userId),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&u.uint32(90).string(S.peerIdString),u},"encode"),o.encodeDelimited=r(function(S,u){return this.encode(S,u).ldelim()},"encodeDelimited"),o.decode=r(function(S,u){S instanceof p||(S=p.create(S));let v=u===void 0?S.len:S.pos+u,E=new s.slack.calls.analytics.RecvMedia;for(;S.pos<v;){let b=S.uint32();switch(b>>>3){case 1:{E.peerId=S.uint64();break}case 2:{E.bytesReceived=S.uint64();break}case 3:{E.packetsReceived=S.uint64();break}case 4:{E.fractionLost=S.double();break}case 5:{E.jitter=S.double();break}case 6:{E.packetsLost=S.uint64();break}case 7:{E.codec=S.int32();break}case 10:{E.userId=S.string();break}case 11:{E.peerIdString=S.string();break}case 8:{E.audioStats=s.slack.calls.analytics.RecvMedia.Audio.decode(S,S.uint32());break}case 9:{E.videoStats=s.slack.calls.analytics.RecvMedia.Video.decode(S,S.uint32());break}default:S.skipType(b&7);break}}return E},"decode"),o.decodeDelimited=r(function(S){return S instanceof p||(S=new p(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=r(function(S){if(typeof S!="object"||S===null)return"object expected";let u={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&!a.isInteger(S.bytesReceived)&&!(S.bytesReceived&&a.isInteger(S.bytesReceived.low)&&a.isInteger(S.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&!a.isInteger(S.packetsReceived)&&!(S.packetsReceived&&a.isInteger(S.packetsReceived.low)&&a.isInteger(S.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&typeof S.fractionLost!="number")return"fractionLost: number expected";if(S.jitter!=null&&S.hasOwnProperty("jitter")&&typeof S.jitter!="number")return"jitter: number expected";if(S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&!a.isInteger(S.packetsLost)&&!(S.packetsLost&&a.isInteger(S.packetsLost.low)&&a.isInteger(S.packetsLost.high)))return"packetsLost: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.userId!=null&&S.hasOwnProperty("userId")&&!a.isString(S.userId))return"userId: string expected";if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){u.mediaType=1;{let v=s.slack.calls.analytics.RecvMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(u.mediaType===1)return"mediaType: multiple values";u.mediaType=1;{let v=s.slack.calls.analytics.RecvMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=r(function(S){if(S instanceof s.slack.calls.analytics.RecvMedia)return S;let u=new s.slack.calls.analytics.RecvMedia;switch(S.peerId!=null&&(a.Long?(u.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?u.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?u.peerId=S.peerId:typeof S.peerId=="object"&&(u.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesReceived!=null&&(a.Long?(u.bytesReceived=a.Long.fromValue(S.bytesReceived)).unsigned=!0:typeof S.bytesReceived=="string"?u.bytesReceived=parseInt(S.bytesReceived,10):typeof S.bytesReceived=="number"?u.bytesReceived=S.bytesReceived:typeof S.bytesReceived=="object"&&(u.bytesReceived=new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0))),S.packetsReceived!=null&&(a.Long?(u.packetsReceived=a.Long.fromValue(S.packetsReceived)).unsigned=!0:typeof S.packetsReceived=="string"?u.packetsReceived=parseInt(S.packetsReceived,10):typeof S.packetsReceived=="number"?u.packetsReceived=S.packetsReceived:typeof S.packetsReceived=="object"&&(u.packetsReceived=new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0))),S.fractionLost!=null&&(u.fractionLost=Number(S.fractionLost)),S.jitter!=null&&(u.jitter=Number(S.jitter)),S.packetsLost!=null&&(a.Long?(u.packetsLost=a.Long.fromValue(S.packetsLost)).unsigned=!0:typeof S.packetsLost=="string"?u.packetsLost=parseInt(S.packetsLost,10):typeof S.packetsLost=="number"?u.packetsLost=S.packetsLost:typeof S.packetsLost=="object"&&(u.packetsLost=new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){u.codec=S.codec;break}break;case"UNKNOWN":case 0:u.codec=0;break;case"OPUS":case 1:u.codec=1;break;case"VP8":case 2:u.codec=2;break;case"VP9":case 3:u.codec=3;break;case"H264":case 4:u.codec=4;break}if(S.userId!=null&&(u.userId=String(S.userId)),S.peerIdString!=null&&(u.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");u.audioStats=s.slack.calls.analytics.RecvMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");u.videoStats=s.slack.calls.analytics.RecvMedia.Video.fromObject(S.videoStats)}return u},"fromObject"),o.toObject=r(function(S,u){u||(u={});let v={};if(u.defaults){if(a.Long){let E=new a.Long(0,0,!0);v.peerId=u.longs===String?E.toString():u.longs===Number?E.toNumber():E}else v.peerId=u.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);v.bytesReceived=u.longs===String?E.toString():u.longs===Number?E.toNumber():E}else v.bytesReceived=u.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);v.packetsReceived=u.longs===String?E.toString():u.longs===Number?E.toNumber():E}else v.packetsReceived=u.longs===String?"0":0;if(v.fractionLost=0,v.jitter=0,a.Long){let E=new a.Long(0,0,!0);v.packetsLost=u.longs===String?E.toString():u.longs===Number?E.toNumber():E}else v.packetsLost=u.longs===String?"0":0;v.codec=u.enums===String?"UNKNOWN":0,v.userId="",v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=u.longs===String?String(S.peerId):S.peerId:v.peerId=u.longs===String?a.Long.prototype.toString.call(S.peerId):u.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&(typeof S.bytesReceived=="number"?v.bytesReceived=u.longs===String?String(S.bytesReceived):S.bytesReceived:v.bytesReceived=u.longs===String?a.Long.prototype.toString.call(S.bytesReceived):u.longs===Number?new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0):S.bytesReceived),S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&(typeof S.packetsReceived=="number"?v.packetsReceived=u.longs===String?String(S.packetsReceived):S.packetsReceived:v.packetsReceived=u.longs===String?a.Long.prototype.toString.call(S.packetsReceived):u.longs===Number?new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0):S.packetsReceived),S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&(v.fractionLost=u.json&&!isFinite(S.fractionLost)?String(S.fractionLost):S.fractionLost),S.jitter!=null&&S.hasOwnProperty("jitter")&&(v.jitter=u.json&&!isFinite(S.jitter)?String(S.jitter):S.jitter),S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&(typeof S.packetsLost=="number"?v.packetsLost=u.longs===String?String(S.packetsLost):S.packetsLost:v.packetsLost=u.longs===String?a.Long.prototype.toString.call(S.packetsLost):u.longs===Number?new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0):S.packetsLost),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=u.enums===String?s.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:s.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=s.slack.calls.analytics.RecvMedia.Audio.toObject(S.audioStats,u),u.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=s.slack.calls.analytics.RecvMedia.Video.toObject(S.videoStats,u),u.oneofs&&(v.mediaType="videoStats")),S.userId!=null&&S.hasOwnProperty("userId")&&(v.userId=S.userId),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),o.Audio=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return r(g,"Audio"),g.prototype.audioLevel=0,g.prototype.jitterBufferDelay=0,g.prototype.concealmentEvents=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.concealedSamples=a.Long?a.Long.fromBits(0,0,!0):0,g.create=r(function(u){return new g(u)},"create"),g.encode=r(function(u,v){return v||(v=m.create()),u.audioLevel!=null&&Object.hasOwnProperty.call(u,"audioLevel")&&v.uint32(9).double(u.audioLevel),u.jitterBufferDelay!=null&&Object.hasOwnProperty.call(u,"jitterBufferDelay")&&v.uint32(17).double(u.jitterBufferDelay),u.concealmentEvents!=null&&Object.hasOwnProperty.call(u,"concealmentEvents")&&v.uint32(24).uint64(u.concealmentEvents),u.concealedSamples!=null&&Object.hasOwnProperty.call(u,"concealedSamples")&&v.uint32(32).uint64(u.concealedSamples),v},"encode"),g.encodeDelimited=r(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=r(function(u,v){u instanceof p||(u=p.create(u));let E=v===void 0?u.len:u.pos+v,b=new s.slack.calls.analytics.RecvMedia.Audio;for(;u.pos<E;){let _=u.uint32();switch(_>>>3){case 1:{b.audioLevel=u.double();break}case 2:{b.jitterBufferDelay=u.double();break}case 3:{b.concealmentEvents=u.uint64();break}case 4:{b.concealedSamples=u.uint64();break}default:u.skipType(_&7);break}}return b},"decode"),g.decodeDelimited=r(function(u){return u instanceof p||(u=new p(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=r(function(u){return typeof u!="object"||u===null?"object expected":u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&typeof u.audioLevel!="number"?"audioLevel: number expected":u.jitterBufferDelay!=null&&u.hasOwnProperty("jitterBufferDelay")&&typeof u.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":u.concealmentEvents!=null&&u.hasOwnProperty("concealmentEvents")&&!a.isInteger(u.concealmentEvents)&&!(u.concealmentEvents&&a.isInteger(u.concealmentEvents.low)&&a.isInteger(u.concealmentEvents.high))?"concealmentEvents: integer|Long expected":u.concealedSamples!=null&&u.hasOwnProperty("concealedSamples")&&!a.isInteger(u.concealedSamples)&&!(u.concealedSamples&&a.isInteger(u.concealedSamples.low)&&a.isInteger(u.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),g.fromObject=r(function(u){if(u instanceof s.slack.calls.analytics.RecvMedia.Audio)return u;let v=new s.slack.calls.analytics.RecvMedia.Audio;return u.audioLevel!=null&&(v.audioLevel=Number(u.audioLevel)),u.jitterBufferDelay!=null&&(v.jitterBufferDelay=Number(u.jitterBufferDelay)),u.concealmentEvents!=null&&(a.Long?(v.concealmentEvents=a.Long.fromValue(u.concealmentEvents)).unsigned=!0:typeof u.concealmentEvents=="string"?v.concealmentEvents=parseInt(u.concealmentEvents,10):typeof u.concealmentEvents=="number"?v.concealmentEvents=u.concealmentEvents:typeof u.concealmentEvents=="object"&&(v.concealmentEvents=new a.LongBits(u.concealmentEvents.low>>>0,u.concealmentEvents.high>>>0).toNumber(!0))),u.concealedSamples!=null&&(a.Long?(v.concealedSamples=a.Long.fromValue(u.concealedSamples)).unsigned=!0:typeof u.concealedSamples=="string"?v.concealedSamples=parseInt(u.concealedSamples,10):typeof u.concealedSamples=="number"?v.concealedSamples=u.concealedSamples:typeof u.concealedSamples=="object"&&(v.concealedSamples=new a.LongBits(u.concealedSamples.low>>>0,u.concealedSamples.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=r(function(u,v){v||(v={});let E={};if(v.defaults){if(E.audioLevel=0,E.jitterBufferDelay=0,a.Long){let b=new a.Long(0,0,!0);E.concealmentEvents=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.concealmentEvents=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.concealedSamples=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.concealedSamples=v.longs===String?"0":0}return u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&(E.audioLevel=v.json&&!isFinite(u.audioLevel)?String(u.audioLevel):u.audioLevel),u.jitterBufferDelay!=null&&u.hasOwnProperty("jitterBufferDelay")&&(E.jitterBufferDelay=v.json&&!isFinite(u.jitterBufferDelay)?String(u.jitterBufferDelay):u.jitterBufferDelay),u.concealmentEvents!=null&&u.hasOwnProperty("concealmentEvents")&&(typeof u.concealmentEvents=="number"?E.concealmentEvents=v.longs===String?String(u.concealmentEvents):u.concealmentEvents:E.concealmentEvents=v.longs===String?a.Long.prototype.toString.call(u.concealmentEvents):v.longs===Number?new a.LongBits(u.concealmentEvents.low>>>0,u.concealmentEvents.high>>>0).toNumber(!0):u.concealmentEvents),u.concealedSamples!=null&&u.hasOwnProperty("concealedSamples")&&(typeof u.concealedSamples=="number"?E.concealedSamples=v.longs===String?String(u.concealedSamples):u.concealedSamples:E.concealedSamples=v.longs===String?a.Long.prototype.toString.call(u.concealedSamples):v.longs===Number?new a.LongBits(u.concealedSamples.low>>>0,u.concealedSamples.high>>>0).toNumber(!0):u.concealedSamples),E},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),g}(),o.Video=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return r(g,"Video"),g.prototype.firCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.nackCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.pliCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.sliCount=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesPerSecond=0,g.prototype.framesCorrupted=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesDecoded=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesDropped=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesReceived=a.Long?a.Long.fromBits(0,0,!0):0,g.create=r(function(u){return new g(u)},"create"),g.encode=r(function(u,v){return v||(v=m.create()),u.firCount!=null&&Object.hasOwnProperty.call(u,"firCount")&&v.uint32(8).uint64(u.firCount),u.nackCount!=null&&Object.hasOwnProperty.call(u,"nackCount")&&v.uint32(16).uint64(u.nackCount),u.pliCount!=null&&Object.hasOwnProperty.call(u,"pliCount")&&v.uint32(24).uint64(u.pliCount),u.sliCount!=null&&Object.hasOwnProperty.call(u,"sliCount")&&v.uint32(32).uint64(u.sliCount),u.frameHeight!=null&&Object.hasOwnProperty.call(u,"frameHeight")&&v.uint32(40).uint64(u.frameHeight),u.frameWidth!=null&&Object.hasOwnProperty.call(u,"frameWidth")&&v.uint32(48).uint64(u.frameWidth),u.framesPerSecond!=null&&Object.hasOwnProperty.call(u,"framesPerSecond")&&v.uint32(57).double(u.framesPerSecond),u.framesCorrupted!=null&&Object.hasOwnProperty.call(u,"framesCorrupted")&&v.uint32(64).uint64(u.framesCorrupted),u.framesDecoded!=null&&Object.hasOwnProperty.call(u,"framesDecoded")&&v.uint32(72).uint64(u.framesDecoded),u.framesDropped!=null&&Object.hasOwnProperty.call(u,"framesDropped")&&v.uint32(80).uint64(u.framesDropped),u.framesReceived!=null&&Object.hasOwnProperty.call(u,"framesReceived")&&v.uint32(88).uint64(u.framesReceived),v},"encode"),g.encodeDelimited=r(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=r(function(u,v){u instanceof p||(u=p.create(u));let E=v===void 0?u.len:u.pos+v,b=new s.slack.calls.analytics.RecvMedia.Video;for(;u.pos<E;){let _=u.uint32();switch(_>>>3){case 1:{b.firCount=u.uint64();break}case 2:{b.nackCount=u.uint64();break}case 3:{b.pliCount=u.uint64();break}case 4:{b.sliCount=u.uint64();break}case 5:{b.frameHeight=u.uint64();break}case 6:{b.frameWidth=u.uint64();break}case 7:{b.framesPerSecond=u.double();break}case 8:{b.framesCorrupted=u.uint64();break}case 9:{b.framesDecoded=u.uint64();break}case 10:{b.framesDropped=u.uint64();break}case 11:{b.framesReceived=u.uint64();break}default:u.skipType(_&7);break}}return b},"decode"),g.decodeDelimited=r(function(u){return u instanceof p||(u=new p(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=r(function(u){return typeof u!="object"||u===null?"object expected":u.firCount!=null&&u.hasOwnProperty("firCount")&&!a.isInteger(u.firCount)&&!(u.firCount&&a.isInteger(u.firCount.low)&&a.isInteger(u.firCount.high))?"firCount: integer|Long expected":u.nackCount!=null&&u.hasOwnProperty("nackCount")&&!a.isInteger(u.nackCount)&&!(u.nackCount&&a.isInteger(u.nackCount.low)&&a.isInteger(u.nackCount.high))?"nackCount: integer|Long expected":u.pliCount!=null&&u.hasOwnProperty("pliCount")&&!a.isInteger(u.pliCount)&&!(u.pliCount&&a.isInteger(u.pliCount.low)&&a.isInteger(u.pliCount.high))?"pliCount: integer|Long expected":u.sliCount!=null&&u.hasOwnProperty("sliCount")&&!a.isInteger(u.sliCount)&&!(u.sliCount&&a.isInteger(u.sliCount.low)&&a.isInteger(u.sliCount.high))?"sliCount: integer|Long expected":u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&!a.isInteger(u.frameHeight)&&!(u.frameHeight&&a.isInteger(u.frameHeight.low)&&a.isInteger(u.frameHeight.high))?"frameHeight: integer|Long expected":u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&!a.isInteger(u.frameWidth)&&!(u.frameWidth&&a.isInteger(u.frameWidth.low)&&a.isInteger(u.frameWidth.high))?"frameWidth: integer|Long expected":u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&typeof u.framesPerSecond!="number"?"framesPerSecond: number expected":u.framesCorrupted!=null&&u.hasOwnProperty("framesCorrupted")&&!a.isInteger(u.framesCorrupted)&&!(u.framesCorrupted&&a.isInteger(u.framesCorrupted.low)&&a.isInteger(u.framesCorrupted.high))?"framesCorrupted: integer|Long expected":u.framesDecoded!=null&&u.hasOwnProperty("framesDecoded")&&!a.isInteger(u.framesDecoded)&&!(u.framesDecoded&&a.isInteger(u.framesDecoded.low)&&a.isInteger(u.framesDecoded.high))?"framesDecoded: integer|Long expected":u.framesDropped!=null&&u.hasOwnProperty("framesDropped")&&!a.isInteger(u.framesDropped)&&!(u.framesDropped&&a.isInteger(u.framesDropped.low)&&a.isInteger(u.framesDropped.high))?"framesDropped: integer|Long expected":u.framesReceived!=null&&u.hasOwnProperty("framesReceived")&&!a.isInteger(u.framesReceived)&&!(u.framesReceived&&a.isInteger(u.framesReceived.low)&&a.isInteger(u.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),g.fromObject=r(function(u){if(u instanceof s.slack.calls.analytics.RecvMedia.Video)return u;let v=new s.slack.calls.analytics.RecvMedia.Video;return u.firCount!=null&&(a.Long?(v.firCount=a.Long.fromValue(u.firCount)).unsigned=!0:typeof u.firCount=="string"?v.firCount=parseInt(u.firCount,10):typeof u.firCount=="number"?v.firCount=u.firCount:typeof u.firCount=="object"&&(v.firCount=new a.LongBits(u.firCount.low>>>0,u.firCount.high>>>0).toNumber(!0))),u.nackCount!=null&&(a.Long?(v.nackCount=a.Long.fromValue(u.nackCount)).unsigned=!0:typeof u.nackCount=="string"?v.nackCount=parseInt(u.nackCount,10):typeof u.nackCount=="number"?v.nackCount=u.nackCount:typeof u.nackCount=="object"&&(v.nackCount=new a.LongBits(u.nackCount.low>>>0,u.nackCount.high>>>0).toNumber(!0))),u.pliCount!=null&&(a.Long?(v.pliCount=a.Long.fromValue(u.pliCount)).unsigned=!0:typeof u.pliCount=="string"?v.pliCount=parseInt(u.pliCount,10):typeof u.pliCount=="number"?v.pliCount=u.pliCount:typeof u.pliCount=="object"&&(v.pliCount=new a.LongBits(u.pliCount.low>>>0,u.pliCount.high>>>0).toNumber(!0))),u.sliCount!=null&&(a.Long?(v.sliCount=a.Long.fromValue(u.sliCount)).unsigned=!0:typeof u.sliCount=="string"?v.sliCount=parseInt(u.sliCount,10):typeof u.sliCount=="number"?v.sliCount=u.sliCount:typeof u.sliCount=="object"&&(v.sliCount=new a.LongBits(u.sliCount.low>>>0,u.sliCount.high>>>0).toNumber(!0))),u.frameHeight!=null&&(a.Long?(v.frameHeight=a.Long.fromValue(u.frameHeight)).unsigned=!0:typeof u.frameHeight=="string"?v.frameHeight=parseInt(u.frameHeight,10):typeof u.frameHeight=="number"?v.frameHeight=u.frameHeight:typeof u.frameHeight=="object"&&(v.frameHeight=new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0))),u.frameWidth!=null&&(a.Long?(v.frameWidth=a.Long.fromValue(u.frameWidth)).unsigned=!0:typeof u.frameWidth=="string"?v.frameWidth=parseInt(u.frameWidth,10):typeof u.frameWidth=="number"?v.frameWidth=u.frameWidth:typeof u.frameWidth=="object"&&(v.frameWidth=new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0))),u.framesPerSecond!=null&&(v.framesPerSecond=Number(u.framesPerSecond)),u.framesCorrupted!=null&&(a.Long?(v.framesCorrupted=a.Long.fromValue(u.framesCorrupted)).unsigned=!0:typeof u.framesCorrupted=="string"?v.framesCorrupted=parseInt(u.framesCorrupted,10):typeof u.framesCorrupted=="number"?v.framesCorrupted=u.framesCorrupted:typeof u.framesCorrupted=="object"&&(v.framesCorrupted=new a.LongBits(u.framesCorrupted.low>>>0,u.framesCorrupted.high>>>0).toNumber(!0))),u.framesDecoded!=null&&(a.Long?(v.framesDecoded=a.Long.fromValue(u.framesDecoded)).unsigned=!0:typeof u.framesDecoded=="string"?v.framesDecoded=parseInt(u.framesDecoded,10):typeof u.framesDecoded=="number"?v.framesDecoded=u.framesDecoded:typeof u.framesDecoded=="object"&&(v.framesDecoded=new a.LongBits(u.framesDecoded.low>>>0,u.framesDecoded.high>>>0).toNumber(!0))),u.framesDropped!=null&&(a.Long?(v.framesDropped=a.Long.fromValue(u.framesDropped)).unsigned=!0:typeof u.framesDropped=="string"?v.framesDropped=parseInt(u.framesDropped,10):typeof u.framesDropped=="number"?v.framesDropped=u.framesDropped:typeof u.framesDropped=="object"&&(v.framesDropped=new a.LongBits(u.framesDropped.low>>>0,u.framesDropped.high>>>0).toNumber(!0))),u.framesReceived!=null&&(a.Long?(v.framesReceived=a.Long.fromValue(u.framesReceived)).unsigned=!0:typeof u.framesReceived=="string"?v.framesReceived=parseInt(u.framesReceived,10):typeof u.framesReceived=="number"?v.framesReceived=u.framesReceived:typeof u.framesReceived=="object"&&(v.framesReceived=new a.LongBits(u.framesReceived.low>>>0,u.framesReceived.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=r(function(u,v){v||(v={});let E={};if(v.defaults){if(a.Long){let b=new a.Long(0,0,!0);E.firCount=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.firCount=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.nackCount=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.nackCount=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.pliCount=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.pliCount=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.sliCount=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.sliCount=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.frameHeight=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.frameHeight=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.frameWidth=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.frameWidth=v.longs===String?"0":0;if(E.framesPerSecond=0,a.Long){let b=new a.Long(0,0,!0);E.framesCorrupted=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.framesCorrupted=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.framesDecoded=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.framesDecoded=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.framesDropped=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.framesDropped=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.framesReceived=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.framesReceived=v.longs===String?"0":0}return u.firCount!=null&&u.hasOwnProperty("firCount")&&(typeof u.firCount=="number"?E.firCount=v.longs===String?String(u.firCount):u.firCount:E.firCount=v.longs===String?a.Long.prototype.toString.call(u.firCount):v.longs===Number?new a.LongBits(u.firCount.low>>>0,u.firCount.high>>>0).toNumber(!0):u.firCount),u.nackCount!=null&&u.hasOwnProperty("nackCount")&&(typeof u.nackCount=="number"?E.nackCount=v.longs===String?String(u.nackCount):u.nackCount:E.nackCount=v.longs===String?a.Long.prototype.toString.call(u.nackCount):v.longs===Number?new a.LongBits(u.nackCount.low>>>0,u.nackCount.high>>>0).toNumber(!0):u.nackCount),u.pliCount!=null&&u.hasOwnProperty("pliCount")&&(typeof u.pliCount=="number"?E.pliCount=v.longs===String?String(u.pliCount):u.pliCount:E.pliCount=v.longs===String?a.Long.prototype.toString.call(u.pliCount):v.longs===Number?new a.LongBits(u.pliCount.low>>>0,u.pliCount.high>>>0).toNumber(!0):u.pliCount),u.sliCount!=null&&u.hasOwnProperty("sliCount")&&(typeof u.sliCount=="number"?E.sliCount=v.longs===String?String(u.sliCount):u.sliCount:E.sliCount=v.longs===String?a.Long.prototype.toString.call(u.sliCount):v.longs===Number?new a.LongBits(u.sliCount.low>>>0,u.sliCount.high>>>0).toNumber(!0):u.sliCount),u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&(typeof u.frameHeight=="number"?E.frameHeight=v.longs===String?String(u.frameHeight):u.frameHeight:E.frameHeight=v.longs===String?a.Long.prototype.toString.call(u.frameHeight):v.longs===Number?new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0):u.frameHeight),u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&(typeof u.frameWidth=="number"?E.frameWidth=v.longs===String?String(u.frameWidth):u.frameWidth:E.frameWidth=v.longs===String?a.Long.prototype.toString.call(u.frameWidth):v.longs===Number?new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0):u.frameWidth),u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=v.json&&!isFinite(u.framesPerSecond)?String(u.framesPerSecond):u.framesPerSecond),u.framesCorrupted!=null&&u.hasOwnProperty("framesCorrupted")&&(typeof u.framesCorrupted=="number"?E.framesCorrupted=v.longs===String?String(u.framesCorrupted):u.framesCorrupted:E.framesCorrupted=v.longs===String?a.Long.prototype.toString.call(u.framesCorrupted):v.longs===Number?new a.LongBits(u.framesCorrupted.low>>>0,u.framesCorrupted.high>>>0).toNumber(!0):u.framesCorrupted),u.framesDecoded!=null&&u.hasOwnProperty("framesDecoded")&&(typeof u.framesDecoded=="number"?E.framesDecoded=v.longs===String?String(u.framesDecoded):u.framesDecoded:E.framesDecoded=v.longs===String?a.Long.prototype.toString.call(u.framesDecoded):v.longs===Number?new a.LongBits(u.framesDecoded.low>>>0,u.framesDecoded.high>>>0).toNumber(!0):u.framesDecoded),u.framesDropped!=null&&u.hasOwnProperty("framesDropped")&&(typeof u.framesDropped=="number"?E.framesDropped=v.longs===String?String(u.framesDropped):u.framesDropped:E.framesDropped=v.longs===String?a.Long.prototype.toString.call(u.framesDropped):v.longs===Number?new a.LongBits(u.framesDropped.low>>>0,u.framesDropped.high>>>0).toNumber(!0):u.framesDropped),u.framesReceived!=null&&u.hasOwnProperty("framesReceived")&&(typeof u.framesReceived=="number"?E.framesReceived=v.longs===String?String(u.framesReceived):u.framesReceived:E.framesReceived=v.longs===String?a.Long.prototype.toString.call(u.framesReceived):v.longs===Number?new a.LongBits(u.framesReceived.low>>>0,u.framesReceived.high>>>0).toNumber(!0):u.framesReceived),E},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),g}(),o}(),i.SendMedia=function(){function o(g){if(g)for(let S=Object.keys(g),u=0;u<S.length;++u)g[S[u]]!=null&&(this[S[u]]=g[S[u]])}r(o,"SendMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let c;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(c=["audioStats","videoStats"]),set:a.oneOfSetter(c)}),o.create=r(function(S){return new o(S)},"create"),o.encode=r(function(S,u){return u||(u=m.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&u.uint32(8).uint64(S.peerId),S.bytesSent!=null&&Object.hasOwnProperty.call(S,"bytesSent")&&u.uint32(16).uint64(S.bytesSent),S.packetsSent!=null&&Object.hasOwnProperty.call(S,"packetsSent")&&u.uint32(24).uint64(S.packetsSent),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&u.uint32(32).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&s.slack.calls.analytics.SendMedia.Audio.encode(S.audioStats,u.uint32(42).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&s.slack.calls.analytics.SendMedia.Video.encode(S.videoStats,u.uint32(50).fork()).ldelim(),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&u.uint32(58).string(S.peerIdString),u},"encode"),o.encodeDelimited=r(function(S,u){return this.encode(S,u).ldelim()},"encodeDelimited"),o.decode=r(function(S,u){S instanceof p||(S=p.create(S));let v=u===void 0?S.len:S.pos+u,E=new s.slack.calls.analytics.SendMedia;for(;S.pos<v;){let b=S.uint32();switch(b>>>3){case 1:{E.peerId=S.uint64();break}case 2:{E.bytesSent=S.uint64();break}case 3:{E.packetsSent=S.uint64();break}case 4:{E.codec=S.int32();break}case 7:{E.peerIdString=S.string();break}case 5:{E.audioStats=s.slack.calls.analytics.SendMedia.Audio.decode(S,S.uint32());break}case 6:{E.videoStats=s.slack.calls.analytics.SendMedia.Video.decode(S,S.uint32());break}default:S.skipType(b&7);break}}return E},"decode"),o.decodeDelimited=r(function(S){return S instanceof p||(S=new p(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=r(function(S){if(typeof S!="object"||S===null)return"object expected";let u={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&!a.isInteger(S.bytesSent)&&!(S.bytesSent&&a.isInteger(S.bytesSent.low)&&a.isInteger(S.bytesSent.high)))return"bytesSent: integer|Long expected";if(S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&!a.isInteger(S.packetsSent)&&!(S.packetsSent&&a.isInteger(S.packetsSent.low)&&a.isInteger(S.packetsSent.high)))return"packetsSent: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){u.mediaType=1;{let v=s.slack.calls.analytics.SendMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(u.mediaType===1)return"mediaType: multiple values";u.mediaType=1;{let v=s.slack.calls.analytics.SendMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=r(function(S){if(S instanceof s.slack.calls.analytics.SendMedia)return S;let u=new s.slack.calls.analytics.SendMedia;switch(S.peerId!=null&&(a.Long?(u.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?u.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?u.peerId=S.peerId:typeof S.peerId=="object"&&(u.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesSent!=null&&(a.Long?(u.bytesSent=a.Long.fromValue(S.bytesSent)).unsigned=!0:typeof S.bytesSent=="string"?u.bytesSent=parseInt(S.bytesSent,10):typeof S.bytesSent=="number"?u.bytesSent=S.bytesSent:typeof S.bytesSent=="object"&&(u.bytesSent=new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0))),S.packetsSent!=null&&(a.Long?(u.packetsSent=a.Long.fromValue(S.packetsSent)).unsigned=!0:typeof S.packetsSent=="string"?u.packetsSent=parseInt(S.packetsSent,10):typeof S.packetsSent=="number"?u.packetsSent=S.packetsSent:typeof S.packetsSent=="object"&&(u.packetsSent=new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){u.codec=S.codec;break}break;case"UNKNOWN":case 0:u.codec=0;break;case"OPUS":case 1:u.codec=1;break;case"VP8":case 2:u.codec=2;break;case"VP9":case 3:u.codec=3;break;case"H264":case 4:u.codec=4;break}if(S.peerIdString!=null&&(u.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");u.audioStats=s.slack.calls.analytics.SendMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");u.videoStats=s.slack.calls.analytics.SendMedia.Video.fromObject(S.videoStats)}return u},"fromObject"),o.toObject=r(function(S,u){u||(u={});let v={};if(u.defaults){if(a.Long){let E=new a.Long(0,0,!0);v.peerId=u.longs===String?E.toString():u.longs===Number?E.toNumber():E}else v.peerId=u.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);v.bytesSent=u.longs===String?E.toString():u.longs===Number?E.toNumber():E}else v.bytesSent=u.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);v.packetsSent=u.longs===String?E.toString():u.longs===Number?E.toNumber():E}else v.packetsSent=u.longs===String?"0":0;v.codec=u.enums===String?"UNKNOWN":0,v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=u.longs===String?String(S.peerId):S.peerId:v.peerId=u.longs===String?a.Long.prototype.toString.call(S.peerId):u.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&(typeof S.bytesSent=="number"?v.bytesSent=u.longs===String?String(S.bytesSent):S.bytesSent:v.bytesSent=u.longs===String?a.Long.prototype.toString.call(S.bytesSent):u.longs===Number?new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0):S.bytesSent),S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&(typeof S.packetsSent=="number"?v.packetsSent=u.longs===String?String(S.packetsSent):S.packetsSent:v.packetsSent=u.longs===String?a.Long.prototype.toString.call(S.packetsSent):u.longs===Number?new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0):S.packetsSent),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=u.enums===String?s.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:s.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=s.slack.calls.analytics.SendMedia.Audio.toObject(S.audioStats,u),u.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=s.slack.calls.analytics.SendMedia.Video.toObject(S.videoStats,u),u.oneofs&&(v.mediaType="videoStats")),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),o.Audio=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return r(g,"Audio"),g.prototype.audioLevel=0,g.prototype.echoReturnLoss=0,g.prototype.echoReturnLossEnhancement=0,g.prototype.totalAudioEnergy=0,g.prototype.totalSamplesDuration=0,g.create=r(function(u){return new g(u)},"create"),g.encode=r(function(u,v){return v||(v=m.create()),u.audioLevel!=null&&Object.hasOwnProperty.call(u,"audioLevel")&&v.uint32(9).double(u.audioLevel),u.echoReturnLoss!=null&&Object.hasOwnProperty.call(u,"echoReturnLoss")&&v.uint32(17).double(u.echoReturnLoss),u.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(u,"echoReturnLossEnhancement")&&v.uint32(25).double(u.echoReturnLossEnhancement),u.totalAudioEnergy!=null&&Object.hasOwnProperty.call(u,"totalAudioEnergy")&&v.uint32(33).double(u.totalAudioEnergy),u.totalSamplesDuration!=null&&Object.hasOwnProperty.call(u,"totalSamplesDuration")&&v.uint32(41).double(u.totalSamplesDuration),v},"encode"),g.encodeDelimited=r(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=r(function(u,v){u instanceof p||(u=p.create(u));let E=v===void 0?u.len:u.pos+v,b=new s.slack.calls.analytics.SendMedia.Audio;for(;u.pos<E;){let _=u.uint32();switch(_>>>3){case 1:{b.audioLevel=u.double();break}case 2:{b.echoReturnLoss=u.double();break}case 3:{b.echoReturnLossEnhancement=u.double();break}case 4:{b.totalAudioEnergy=u.double();break}case 5:{b.totalSamplesDuration=u.double();break}default:u.skipType(_&7);break}}return b},"decode"),g.decodeDelimited=r(function(u){return u instanceof p||(u=new p(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=r(function(u){return typeof u!="object"||u===null?"object expected":u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&typeof u.audioLevel!="number"?"audioLevel: number expected":u.echoReturnLoss!=null&&u.hasOwnProperty("echoReturnLoss")&&typeof u.echoReturnLoss!="number"?"echoReturnLoss: number expected":u.echoReturnLossEnhancement!=null&&u.hasOwnProperty("echoReturnLossEnhancement")&&typeof u.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":u.totalAudioEnergy!=null&&u.hasOwnProperty("totalAudioEnergy")&&typeof u.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":u.totalSamplesDuration!=null&&u.hasOwnProperty("totalSamplesDuration")&&typeof u.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),g.fromObject=r(function(u){if(u instanceof s.slack.calls.analytics.SendMedia.Audio)return u;let v=new s.slack.calls.analytics.SendMedia.Audio;return u.audioLevel!=null&&(v.audioLevel=Number(u.audioLevel)),u.echoReturnLoss!=null&&(v.echoReturnLoss=Number(u.echoReturnLoss)),u.echoReturnLossEnhancement!=null&&(v.echoReturnLossEnhancement=Number(u.echoReturnLossEnhancement)),u.totalAudioEnergy!=null&&(v.totalAudioEnergy=Number(u.totalAudioEnergy)),u.totalSamplesDuration!=null&&(v.totalSamplesDuration=Number(u.totalSamplesDuration)),v},"fromObject"),g.toObject=r(function(u,v){v||(v={});let E={};return v.defaults&&(E.audioLevel=0,E.echoReturnLoss=0,E.echoReturnLossEnhancement=0,E.totalAudioEnergy=0,E.totalSamplesDuration=0),u.audioLevel!=null&&u.hasOwnProperty("audioLevel")&&(E.audioLevel=v.json&&!isFinite(u.audioLevel)?String(u.audioLevel):u.audioLevel),u.echoReturnLoss!=null&&u.hasOwnProperty("echoReturnLoss")&&(E.echoReturnLoss=v.json&&!isFinite(u.echoReturnLoss)?String(u.echoReturnLoss):u.echoReturnLoss),u.echoReturnLossEnhancement!=null&&u.hasOwnProperty("echoReturnLossEnhancement")&&(E.echoReturnLossEnhancement=v.json&&!isFinite(u.echoReturnLossEnhancement)?String(u.echoReturnLossEnhancement):u.echoReturnLossEnhancement),u.totalAudioEnergy!=null&&u.hasOwnProperty("totalAudioEnergy")&&(E.totalAudioEnergy=v.json&&!isFinite(u.totalAudioEnergy)?String(u.totalAudioEnergy):u.totalAudioEnergy),u.totalSamplesDuration!=null&&u.hasOwnProperty("totalSamplesDuration")&&(E.totalSamplesDuration=v.json&&!isFinite(u.totalSamplesDuration)?String(u.totalSamplesDuration):u.totalSamplesDuration),E},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),g}(),o.Video=function(){function g(S){if(S)for(let u=Object.keys(S),v=0;v<u.length;++v)S[u[v]]!=null&&(this[u[v]]=S[u[v]])}return r(g,"Video"),g.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesPerSecond=0,g.prototype.framesSent=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.framesEncoded=a.Long?a.Long.fromBits(0,0,!0):0,g.prototype.hugeFramesSent=a.Long?a.Long.fromBits(0,0,!0):0,g.create=r(function(u){return new g(u)},"create"),g.encode=r(function(u,v){return v||(v=m.create()),u.frameHeight!=null&&Object.hasOwnProperty.call(u,"frameHeight")&&v.uint32(8).uint64(u.frameHeight),u.frameWidth!=null&&Object.hasOwnProperty.call(u,"frameWidth")&&v.uint32(16).uint64(u.frameWidth),u.framesPerSecond!=null&&Object.hasOwnProperty.call(u,"framesPerSecond")&&v.uint32(25).double(u.framesPerSecond),u.framesSent!=null&&Object.hasOwnProperty.call(u,"framesSent")&&v.uint32(32).uint64(u.framesSent),u.framesEncoded!=null&&Object.hasOwnProperty.call(u,"framesEncoded")&&v.uint32(40).uint64(u.framesEncoded),u.hugeFramesSent!=null&&Object.hasOwnProperty.call(u,"hugeFramesSent")&&v.uint32(48).uint64(u.hugeFramesSent),v},"encode"),g.encodeDelimited=r(function(u,v){return this.encode(u,v).ldelim()},"encodeDelimited"),g.decode=r(function(u,v){u instanceof p||(u=p.create(u));let E=v===void 0?u.len:u.pos+v,b=new s.slack.calls.analytics.SendMedia.Video;for(;u.pos<E;){let _=u.uint32();switch(_>>>3){case 1:{b.frameHeight=u.uint64();break}case 2:{b.frameWidth=u.uint64();break}case 3:{b.framesPerSecond=u.double();break}case 4:{b.framesSent=u.uint64();break}case 5:{b.framesEncoded=u.uint64();break}case 6:{b.hugeFramesSent=u.uint64();break}default:u.skipType(_&7);break}}return b},"decode"),g.decodeDelimited=r(function(u){return u instanceof p||(u=new p(u)),this.decode(u,u.uint32())},"decodeDelimited"),g.verify=r(function(u){return typeof u!="object"||u===null?"object expected":u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&!a.isInteger(u.frameHeight)&&!(u.frameHeight&&a.isInteger(u.frameHeight.low)&&a.isInteger(u.frameHeight.high))?"frameHeight: integer|Long expected":u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&!a.isInteger(u.frameWidth)&&!(u.frameWidth&&a.isInteger(u.frameWidth.low)&&a.isInteger(u.frameWidth.high))?"frameWidth: integer|Long expected":u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&typeof u.framesPerSecond!="number"?"framesPerSecond: number expected":u.framesSent!=null&&u.hasOwnProperty("framesSent")&&!a.isInteger(u.framesSent)&&!(u.framesSent&&a.isInteger(u.framesSent.low)&&a.isInteger(u.framesSent.high))?"framesSent: integer|Long expected":u.framesEncoded!=null&&u.hasOwnProperty("framesEncoded")&&!a.isInteger(u.framesEncoded)&&!(u.framesEncoded&&a.isInteger(u.framesEncoded.low)&&a.isInteger(u.framesEncoded.high))?"framesEncoded: integer|Long expected":u.hugeFramesSent!=null&&u.hasOwnProperty("hugeFramesSent")&&!a.isInteger(u.hugeFramesSent)&&!(u.hugeFramesSent&&a.isInteger(u.hugeFramesSent.low)&&a.isInteger(u.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),g.fromObject=r(function(u){if(u instanceof s.slack.calls.analytics.SendMedia.Video)return u;let v=new s.slack.calls.analytics.SendMedia.Video;return u.frameHeight!=null&&(a.Long?(v.frameHeight=a.Long.fromValue(u.frameHeight)).unsigned=!0:typeof u.frameHeight=="string"?v.frameHeight=parseInt(u.frameHeight,10):typeof u.frameHeight=="number"?v.frameHeight=u.frameHeight:typeof u.frameHeight=="object"&&(v.frameHeight=new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0))),u.frameWidth!=null&&(a.Long?(v.frameWidth=a.Long.fromValue(u.frameWidth)).unsigned=!0:typeof u.frameWidth=="string"?v.frameWidth=parseInt(u.frameWidth,10):typeof u.frameWidth=="number"?v.frameWidth=u.frameWidth:typeof u.frameWidth=="object"&&(v.frameWidth=new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0))),u.framesPerSecond!=null&&(v.framesPerSecond=Number(u.framesPerSecond)),u.framesSent!=null&&(a.Long?(v.framesSent=a.Long.fromValue(u.framesSent)).unsigned=!0:typeof u.framesSent=="string"?v.framesSent=parseInt(u.framesSent,10):typeof u.framesSent=="number"?v.framesSent=u.framesSent:typeof u.framesSent=="object"&&(v.framesSent=new a.LongBits(u.framesSent.low>>>0,u.framesSent.high>>>0).toNumber(!0))),u.framesEncoded!=null&&(a.Long?(v.framesEncoded=a.Long.fromValue(u.framesEncoded)).unsigned=!0:typeof u.framesEncoded=="string"?v.framesEncoded=parseInt(u.framesEncoded,10):typeof u.framesEncoded=="number"?v.framesEncoded=u.framesEncoded:typeof u.framesEncoded=="object"&&(v.framesEncoded=new a.LongBits(u.framesEncoded.low>>>0,u.framesEncoded.high>>>0).toNumber(!0))),u.hugeFramesSent!=null&&(a.Long?(v.hugeFramesSent=a.Long.fromValue(u.hugeFramesSent)).unsigned=!0:typeof u.hugeFramesSent=="string"?v.hugeFramesSent=parseInt(u.hugeFramesSent,10):typeof u.hugeFramesSent=="number"?v.hugeFramesSent=u.hugeFramesSent:typeof u.hugeFramesSent=="object"&&(v.hugeFramesSent=new a.LongBits(u.hugeFramesSent.low>>>0,u.hugeFramesSent.high>>>0).toNumber(!0))),v},"fromObject"),g.toObject=r(function(u,v){v||(v={});let E={};if(v.defaults){if(a.Long){let b=new a.Long(0,0,!0);E.frameHeight=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.frameHeight=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.frameWidth=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.frameWidth=v.longs===String?"0":0;if(E.framesPerSecond=0,a.Long){let b=new a.Long(0,0,!0);E.framesSent=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.framesSent=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.framesEncoded=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.framesEncoded=v.longs===String?"0":0;if(a.Long){let b=new a.Long(0,0,!0);E.hugeFramesSent=v.longs===String?b.toString():v.longs===Number?b.toNumber():b}else E.hugeFramesSent=v.longs===String?"0":0}return u.frameHeight!=null&&u.hasOwnProperty("frameHeight")&&(typeof u.frameHeight=="number"?E.frameHeight=v.longs===String?String(u.frameHeight):u.frameHeight:E.frameHeight=v.longs===String?a.Long.prototype.toString.call(u.frameHeight):v.longs===Number?new a.LongBits(u.frameHeight.low>>>0,u.frameHeight.high>>>0).toNumber(!0):u.frameHeight),u.frameWidth!=null&&u.hasOwnProperty("frameWidth")&&(typeof u.frameWidth=="number"?E.frameWidth=v.longs===String?String(u.frameWidth):u.frameWidth:E.frameWidth=v.longs===String?a.Long.prototype.toString.call(u.frameWidth):v.longs===Number?new a.LongBits(u.frameWidth.low>>>0,u.frameWidth.high>>>0).toNumber(!0):u.frameWidth),u.framesPerSecond!=null&&u.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=v.json&&!isFinite(u.framesPerSecond)?String(u.framesPerSecond):u.framesPerSecond),u.framesSent!=null&&u.hasOwnProperty("framesSent")&&(typeof u.framesSent=="number"?E.framesSent=v.longs===String?String(u.framesSent):u.framesSent:E.framesSent=v.longs===String?a.Long.prototype.toString.call(u.framesSent):v.longs===Number?new a.LongBits(u.framesSent.low>>>0,u.framesSent.high>>>0).toNumber(!0):u.framesSent),u.framesEncoded!=null&&u.hasOwnProperty("framesEncoded")&&(typeof u.framesEncoded=="number"?E.framesEncoded=v.longs===String?String(u.framesEncoded):u.framesEncoded:E.framesEncoded=v.longs===String?a.Long.prototype.toString.call(u.framesEncoded):v.longs===Number?new a.LongBits(u.framesEncoded.low>>>0,u.framesEncoded.high>>>0).toNumber(!0):u.framesEncoded),u.hugeFramesSent!=null&&u.hasOwnProperty("hugeFramesSent")&&(typeof u.hugeFramesSent=="number"?E.hugeFramesSent=v.longs===String?String(u.hugeFramesSent):u.hugeFramesSent:E.hugeFramesSent=v.longs===String?a.Long.prototype.toString.call(u.hugeFramesSent):v.longs===Number?new a.LongBits(u.hugeFramesSent.low>>>0,u.hugeFramesSent.high>>>0).toNumber(!0):u.hugeFramesSent),E},"toObject"),g.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),g.getTypeUrl=r(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),g}(),o}(),i.MemoryInfo=function(){function o(c){if(c)for(let g=Object.keys(c),S=0;S<g.length;++S)c[g[S]]!=null&&(this[g[S]]=c[g[S]])}return r(o,"MemoryInfo"),o.prototype.workingSetSize=0,o.prototype.peakWorkingSetSize=0,o.create=r(function(g){return new o(g)},"create"),o.encode=r(function(g,S){return S||(S=m.create()),g.workingSetSize!=null&&Object.hasOwnProperty.call(g,"workingSetSize")&&S.uint32(9).double(g.workingSetSize),g.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(g,"peakWorkingSetSize")&&S.uint32(17).double(g.peakWorkingSetSize),S},"encode"),o.encodeDelimited=r(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=r(function(g,S){g instanceof p||(g=p.create(g));let u=S===void 0?g.len:g.pos+S,v=new s.slack.calls.analytics.MemoryInfo;for(;g.pos<u;){let E=g.uint32();switch(E>>>3){case 1:{v.workingSetSize=g.double();break}case 2:{v.peakWorkingSetSize=g.double();break}default:g.skipType(E&7);break}}return v},"decode"),o.decodeDelimited=r(function(g){return g instanceof p||(g=new p(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=r(function(g){return typeof g!="object"||g===null?"object expected":g.workingSetSize!=null&&g.hasOwnProperty("workingSetSize")&&typeof g.workingSetSize!="number"?"workingSetSize: number expected":g.peakWorkingSetSize!=null&&g.hasOwnProperty("peakWorkingSetSize")&&typeof g.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),o.fromObject=r(function(g){if(g instanceof s.slack.calls.analytics.MemoryInfo)return g;let S=new s.slack.calls.analytics.MemoryInfo;return g.workingSetSize!=null&&(S.workingSetSize=Number(g.workingSetSize)),g.peakWorkingSetSize!=null&&(S.peakWorkingSetSize=Number(g.peakWorkingSetSize)),S},"fromObject"),o.toObject=r(function(g,S){S||(S={});let u={};return S.defaults&&(u.workingSetSize=0,u.peakWorkingSetSize=0),g.workingSetSize!=null&&g.hasOwnProperty("workingSetSize")&&(u.workingSetSize=S.json&&!isFinite(g.workingSetSize)?String(g.workingSetSize):g.workingSetSize),g.peakWorkingSetSize!=null&&g.hasOwnProperty("peakWorkingSetSize")&&(u.peakWorkingSetSize=S.json&&!isFinite(g.peakWorkingSetSize)?String(g.peakWorkingSetSize):g.peakWorkingSetSize),u},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),o}(),i.AppMetrics=function(){function o(c){if(c)for(let g=Object.keys(c),S=0;S<g.length;++S)c[g[S]]!=null&&(this[g[S]]=c[g[S]])}return r(o,"AppMetrics"),o.prototype.cpu=0,o.prototype.memory=null,o.create=r(function(g){return new o(g)},"create"),o.encode=r(function(g,S){return S||(S=m.create()),g.cpu!=null&&Object.hasOwnProperty.call(g,"cpu")&&S.uint32(9).double(g.cpu),g.memory!=null&&Object.hasOwnProperty.call(g,"memory")&&s.slack.calls.analytics.MemoryInfo.encode(g.memory,S.uint32(18).fork()).ldelim(),S},"encode"),o.encodeDelimited=r(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=r(function(g,S){g instanceof p||(g=p.create(g));let u=S===void 0?g.len:g.pos+S,v=new s.slack.calls.analytics.AppMetrics;for(;g.pos<u;){let E=g.uint32();switch(E>>>3){case 1:{v.cpu=g.double();break}case 2:{v.memory=s.slack.calls.analytics.MemoryInfo.decode(g,g.uint32());break}default:g.skipType(E&7);break}}return v},"decode"),o.decodeDelimited=r(function(g){return g instanceof p||(g=new p(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=r(function(g){if(typeof g!="object"||g===null)return"object expected";if(g.cpu!=null&&g.hasOwnProperty("cpu")&&typeof g.cpu!="number")return"cpu: number expected";if(g.memory!=null&&g.hasOwnProperty("memory")){let S=s.slack.calls.analytics.MemoryInfo.verify(g.memory);if(S)return"memory."+S}return null},"verify"),o.fromObject=r(function(g){if(g instanceof s.slack.calls.analytics.AppMetrics)return g;let S=new s.slack.calls.analytics.AppMetrics;if(g.cpu!=null&&(S.cpu=Number(g.cpu)),g.memory!=null){if(typeof g.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");S.memory=s.slack.calls.analytics.MemoryInfo.fromObject(g.memory)}return S},"fromObject"),o.toObject=r(function(g,S){S||(S={});let u={};return S.defaults&&(u.cpu=0,u.memory=null),g.cpu!=null&&g.hasOwnProperty("cpu")&&(u.cpu=S.json&&!isFinite(g.cpu)?String(g.cpu):g.cpu),g.memory!=null&&g.hasOwnProperty("memory")&&(u.memory=s.slack.calls.analytics.MemoryInfo.toObject(g.memory,S)),u},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),o}(),i.Codec=function(){const o={},c=Object.create(o);return c[o[0]="UNKNOWN"]=0,c[o[1]="OPUS"]=1,c[o[2]="VP8"]=2,c[o[3]="VP9"]=3,c[o[4]="H264"]=4,c}(),i.Protocol=function(){const o={},c=Object.create(o);return c[o[0]="UDP"]=0,c[o[1]="TCP"]=1,c}(),i.PathType=function(){const o={},c=Object.create(o);return c[o[0]="DIRECT"]=0,c[o[1]="RELAY"]=1,c}(),i.Report=function(){function o(c){if(this.recv=[],this.send=[],c)for(let g=Object.keys(c),S=0;S<g.length;++S)c[g[S]]!=null&&(this[g[S]]=c[g[S]])}return r(o,"Report"),o.prototype.totalBytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalBytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalRoundTripTime=0,o.prototype.currentRoundTripTime=0,o.prototype.availableOutgoingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.protocol=0,o.prototype.pathType=0,o.prototype.recv=a.emptyArray,o.prototype.send=a.emptyArray,o.prototype.clientTime=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.availableIncomingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.appMetrics=null,o.create=r(function(g){return new o(g)},"create"),o.encode=r(function(g,S){if(S||(S=m.create()),g.totalBytesSent!=null&&Object.hasOwnProperty.call(g,"totalBytesSent")&&S.uint32(8).uint64(g.totalBytesSent),g.totalBytesReceived!=null&&Object.hasOwnProperty.call(g,"totalBytesReceived")&&S.uint32(16).uint64(g.totalBytesReceived),g.totalRoundTripTime!=null&&Object.hasOwnProperty.call(g,"totalRoundTripTime")&&S.uint32(25).double(g.totalRoundTripTime),g.currentRoundTripTime!=null&&Object.hasOwnProperty.call(g,"currentRoundTripTime")&&S.uint32(33).double(g.currentRoundTripTime),g.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(g,"availableOutgoingBitrate")&&S.uint32(40).uint64(g.availableOutgoingBitrate),g.protocol!=null&&Object.hasOwnProperty.call(g,"protocol")&&S.uint32(48).int32(g.protocol),g.pathType!=null&&Object.hasOwnProperty.call(g,"pathType")&&S.uint32(56).int32(g.pathType),g.recv!=null&&g.recv.length)for(let u=0;u<g.recv.length;++u)s.slack.calls.analytics.RecvMedia.encode(g.recv[u],S.uint32(66).fork()).ldelim();if(g.send!=null&&g.send.length)for(let u=0;u<g.send.length;++u)s.slack.calls.analytics.SendMedia.encode(g.send[u],S.uint32(74).fork()).ldelim();return g.clientTime!=null&&Object.hasOwnProperty.call(g,"clientTime")&&S.uint32(80).uint64(g.clientTime),g.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(g,"availableIncomingBitrate")&&S.uint32(88).uint64(g.availableIncomingBitrate),g.appMetrics!=null&&Object.hasOwnProperty.call(g,"appMetrics")&&s.slack.calls.analytics.AppMetrics.encode(g.appMetrics,S.uint32(98).fork()).ldelim(),S},"encode"),o.encodeDelimited=r(function(g,S){return this.encode(g,S).ldelim()},"encodeDelimited"),o.decode=r(function(g,S){g instanceof p||(g=p.create(g));let u=S===void 0?g.len:g.pos+S,v=new s.slack.calls.analytics.Report;for(;g.pos<u;){let E=g.uint32();switch(E>>>3){case 1:{v.totalBytesSent=g.uint64();break}case 2:{v.totalBytesReceived=g.uint64();break}case 3:{v.totalRoundTripTime=g.double();break}case 4:{v.currentRoundTripTime=g.double();break}case 5:{v.availableOutgoingBitrate=g.uint64();break}case 6:{v.protocol=g.int32();break}case 7:{v.pathType=g.int32();break}case 8:{v.recv&&v.recv.length||(v.recv=[]),v.recv.push(s.slack.calls.analytics.RecvMedia.decode(g,g.uint32()));break}case 9:{v.send&&v.send.length||(v.send=[]),v.send.push(s.slack.calls.analytics.SendMedia.decode(g,g.uint32()));break}case 10:{v.clientTime=g.uint64();break}case 11:{v.availableIncomingBitrate=g.uint64();break}case 12:{v.appMetrics=s.slack.calls.analytics.AppMetrics.decode(g,g.uint32());break}default:g.skipType(E&7);break}}return v},"decode"),o.decodeDelimited=r(function(g){return g instanceof p||(g=new p(g)),this.decode(g,g.uint32())},"decodeDelimited"),o.verify=r(function(g){if(typeof g!="object"||g===null)return"object expected";if(g.totalBytesSent!=null&&g.hasOwnProperty("totalBytesSent")&&!a.isInteger(g.totalBytesSent)&&!(g.totalBytesSent&&a.isInteger(g.totalBytesSent.low)&&a.isInteger(g.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(g.totalBytesReceived!=null&&g.hasOwnProperty("totalBytesReceived")&&!a.isInteger(g.totalBytesReceived)&&!(g.totalBytesReceived&&a.isInteger(g.totalBytesReceived.low)&&a.isInteger(g.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(g.totalRoundTripTime!=null&&g.hasOwnProperty("totalRoundTripTime")&&typeof g.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(g.currentRoundTripTime!=null&&g.hasOwnProperty("currentRoundTripTime")&&typeof g.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(g.availableOutgoingBitrate!=null&&g.hasOwnProperty("availableOutgoingBitrate")&&!a.isInteger(g.availableOutgoingBitrate)&&!(g.availableOutgoingBitrate&&a.isInteger(g.availableOutgoingBitrate.low)&&a.isInteger(g.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(g.protocol!=null&&g.hasOwnProperty("protocol"))switch(g.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(g.pathType!=null&&g.hasOwnProperty("pathType"))switch(g.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(g.recv!=null&&g.hasOwnProperty("recv")){if(!Array.isArray(g.recv))return"recv: array expected";for(let S=0;S<g.recv.length;++S){let u=s.slack.calls.analytics.RecvMedia.verify(g.recv[S]);if(u)return"recv."+u}}if(g.send!=null&&g.hasOwnProperty("send")){if(!Array.isArray(g.send))return"send: array expected";for(let S=0;S<g.send.length;++S){let u=s.slack.calls.analytics.SendMedia.verify(g.send[S]);if(u)return"send."+u}}if(g.clientTime!=null&&g.hasOwnProperty("clientTime")&&!a.isInteger(g.clientTime)&&!(g.clientTime&&a.isInteger(g.clientTime.low)&&a.isInteger(g.clientTime.high)))return"clientTime: integer|Long expected";if(g.availableIncomingBitrate!=null&&g.hasOwnProperty("availableIncomingBitrate")&&!a.isInteger(g.availableIncomingBitrate)&&!(g.availableIncomingBitrate&&a.isInteger(g.availableIncomingBitrate.low)&&a.isInteger(g.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(g.appMetrics!=null&&g.hasOwnProperty("appMetrics")){let S=s.slack.calls.analytics.AppMetrics.verify(g.appMetrics);if(S)return"appMetrics."+S}return null},"verify"),o.fromObject=r(function(g){if(g instanceof s.slack.calls.analytics.Report)return g;let S=new s.slack.calls.analytics.Report;switch(g.totalBytesSent!=null&&(a.Long?(S.totalBytesSent=a.Long.fromValue(g.totalBytesSent)).unsigned=!0:typeof g.totalBytesSent=="string"?S.totalBytesSent=parseInt(g.totalBytesSent,10):typeof g.totalBytesSent=="number"?S.totalBytesSent=g.totalBytesSent:typeof g.totalBytesSent=="object"&&(S.totalBytesSent=new a.LongBits(g.totalBytesSent.low>>>0,g.totalBytesSent.high>>>0).toNumber(!0))),g.totalBytesReceived!=null&&(a.Long?(S.totalBytesReceived=a.Long.fromValue(g.totalBytesReceived)).unsigned=!0:typeof g.totalBytesReceived=="string"?S.totalBytesReceived=parseInt(g.totalBytesReceived,10):typeof g.totalBytesReceived=="number"?S.totalBytesReceived=g.totalBytesReceived:typeof g.totalBytesReceived=="object"&&(S.totalBytesReceived=new a.LongBits(g.totalBytesReceived.low>>>0,g.totalBytesReceived.high>>>0).toNumber(!0))),g.totalRoundTripTime!=null&&(S.totalRoundTripTime=Number(g.totalRoundTripTime)),g.currentRoundTripTime!=null&&(S.currentRoundTripTime=Number(g.currentRoundTripTime)),g.availableOutgoingBitrate!=null&&(a.Long?(S.availableOutgoingBitrate=a.Long.fromValue(g.availableOutgoingBitrate)).unsigned=!0:typeof g.availableOutgoingBitrate=="string"?S.availableOutgoingBitrate=parseInt(g.availableOutgoingBitrate,10):typeof g.availableOutgoingBitrate=="number"?S.availableOutgoingBitrate=g.availableOutgoingBitrate:typeof g.availableOutgoingBitrate=="object"&&(S.availableOutgoingBitrate=new a.LongBits(g.availableOutgoingBitrate.low>>>0,g.availableOutgoingBitrate.high>>>0).toNumber(!0))),g.protocol){default:if(typeof g.protocol=="number"){S.protocol=g.protocol;break}break;case"UDP":case 0:S.protocol=0;break;case"TCP":case 1:S.protocol=1;break}switch(g.pathType){default:if(typeof g.pathType=="number"){S.pathType=g.pathType;break}break;case"DIRECT":case 0:S.pathType=0;break;case"RELAY":case 1:S.pathType=1;break}if(g.recv){if(!Array.isArray(g.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");S.recv=[];for(let u=0;u<g.recv.length;++u){if(typeof g.recv[u]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");S.recv[u]=s.slack.calls.analytics.RecvMedia.fromObject(g.recv[u])}}if(g.send){if(!Array.isArray(g.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");S.send=[];for(let u=0;u<g.send.length;++u){if(typeof g.send[u]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");S.send[u]=s.slack.calls.analytics.SendMedia.fromObject(g.send[u])}}if(g.clientTime!=null&&(a.Long?(S.clientTime=a.Long.fromValue(g.clientTime)).unsigned=!0:typeof g.clientTime=="string"?S.clientTime=parseInt(g.clientTime,10):typeof g.clientTime=="number"?S.clientTime=g.clientTime:typeof g.clientTime=="object"&&(S.clientTime=new a.LongBits(g.clientTime.low>>>0,g.clientTime.high>>>0).toNumber(!0))),g.availableIncomingBitrate!=null&&(a.Long?(S.availableIncomingBitrate=a.Long.fromValue(g.availableIncomingBitrate)).unsigned=!0:typeof g.availableIncomingBitrate=="string"?S.availableIncomingBitrate=parseInt(g.availableIncomingBitrate,10):typeof g.availableIncomingBitrate=="number"?S.availableIncomingBitrate=g.availableIncomingBitrate:typeof g.availableIncomingBitrate=="object"&&(S.availableIncomingBitrate=new a.LongBits(g.availableIncomingBitrate.low>>>0,g.availableIncomingBitrate.high>>>0).toNumber(!0))),g.appMetrics!=null){if(typeof g.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");S.appMetrics=s.slack.calls.analytics.AppMetrics.fromObject(g.appMetrics)}return S},"fromObject"),o.toObject=r(function(g,S){S||(S={});let u={};if((S.arrays||S.defaults)&&(u.recv=[],u.send=[]),S.defaults){if(a.Long){let v=new a.Long(0,0,!0);u.totalBytesSent=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.totalBytesSent=S.longs===String?"0":0;if(a.Long){let v=new a.Long(0,0,!0);u.totalBytesReceived=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.totalBytesReceived=S.longs===String?"0":0;if(u.totalRoundTripTime=0,u.currentRoundTripTime=0,a.Long){let v=new a.Long(0,0,!0);u.availableOutgoingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.availableOutgoingBitrate=S.longs===String?"0":0;if(u.protocol=S.enums===String?"UDP":0,u.pathType=S.enums===String?"DIRECT":0,a.Long){let v=new a.Long(0,0,!0);u.clientTime=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.clientTime=S.longs===String?"0":0;if(a.Long){let v=new a.Long(0,0,!0);u.availableIncomingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else u.availableIncomingBitrate=S.longs===String?"0":0;u.appMetrics=null}if(g.totalBytesSent!=null&&g.hasOwnProperty("totalBytesSent")&&(typeof g.totalBytesSent=="number"?u.totalBytesSent=S.longs===String?String(g.totalBytesSent):g.totalBytesSent:u.totalBytesSent=S.longs===String?a.Long.prototype.toString.call(g.totalBytesSent):S.longs===Number?new a.LongBits(g.totalBytesSent.low>>>0,g.totalBytesSent.high>>>0).toNumber(!0):g.totalBytesSent),g.totalBytesReceived!=null&&g.hasOwnProperty("totalBytesReceived")&&(typeof g.totalBytesReceived=="number"?u.totalBytesReceived=S.longs===String?String(g.totalBytesReceived):g.totalBytesReceived:u.totalBytesReceived=S.longs===String?a.Long.prototype.toString.call(g.totalBytesReceived):S.longs===Number?new a.LongBits(g.totalBytesReceived.low>>>0,g.totalBytesReceived.high>>>0).toNumber(!0):g.totalBytesReceived),g.totalRoundTripTime!=null&&g.hasOwnProperty("totalRoundTripTime")&&(u.totalRoundTripTime=S.json&&!isFinite(g.totalRoundTripTime)?String(g.totalRoundTripTime):g.totalRoundTripTime),g.currentRoundTripTime!=null&&g.hasOwnProperty("currentRoundTripTime")&&(u.currentRoundTripTime=S.json&&!isFinite(g.currentRoundTripTime)?String(g.currentRoundTripTime):g.currentRoundTripTime),g.availableOutgoingBitrate!=null&&g.hasOwnProperty("availableOutgoingBitrate")&&(typeof g.availableOutgoingBitrate=="number"?u.availableOutgoingBitrate=S.longs===String?String(g.availableOutgoingBitrate):g.availableOutgoingBitrate:u.availableOutgoingBitrate=S.longs===String?a.Long.prototype.toString.call(g.availableOutgoingBitrate):S.longs===Number?new a.LongBits(g.availableOutgoingBitrate.low>>>0,g.availableOutgoingBitrate.high>>>0).toNumber(!0):g.availableOutgoingBitrate),g.protocol!=null&&g.hasOwnProperty("protocol")&&(u.protocol=S.enums===String?s.slack.calls.analytics.Protocol[g.protocol]===void 0?g.protocol:s.slack.calls.analytics.Protocol[g.protocol]:g.protocol),g.pathType!=null&&g.hasOwnProperty("pathType")&&(u.pathType=S.enums===String?s.slack.calls.analytics.PathType[g.pathType]===void 0?g.pathType:s.slack.calls.analytics.PathType[g.pathType]:g.pathType),g.recv&&g.recv.length){u.recv=[];for(let v=0;v<g.recv.length;++v)u.recv[v]=s.slack.calls.analytics.RecvMedia.toObject(g.recv[v],S)}if(g.send&&g.send.length){u.send=[];for(let v=0;v<g.send.length;++v)u.send[v]=s.slack.calls.analytics.SendMedia.toObject(g.send[v],S)}return g.clientTime!=null&&g.hasOwnProperty("clientTime")&&(typeof g.clientTime=="number"?u.clientTime=S.longs===String?String(g.clientTime):g.clientTime:u.clientTime=S.longs===String?a.Long.prototype.toString.call(g.clientTime):S.longs===Number?new a.LongBits(g.clientTime.low>>>0,g.clientTime.high>>>0).toNumber(!0):g.clientTime),g.availableIncomingBitrate!=null&&g.hasOwnProperty("availableIncomingBitrate")&&(typeof g.availableIncomingBitrate=="number"?u.availableIncomingBitrate=S.longs===String?String(g.availableIncomingBitrate):g.availableIncomingBitrate:u.availableIncomingBitrate=S.longs===String?a.Long.prototype.toString.call(g.availableIncomingBitrate):S.longs===Number?new a.LongBits(g.availableIncomingBitrate.low>>>0,g.availableIncomingBitrate.high>>>0).toNumber(!0):g.availableIncomingBitrate),g.appMetrics!=null&&g.hasOwnProperty("appMetrics")&&(u.appMetrics=s.slack.calls.analytics.AppMetrics.toObject(g.appMetrics,S)),u},"toObject"),o.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),o.getTypeUrl=r(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.Report"},"getTypeUrl"),o}(),i}(),t}(),e})()},9240258658:(B,l,d)=>{"use strict";d.d(l,{Y:()=>n});var f=d(4224187311),h=d.n(f);const p=f.Reader,m=f.Writer,a=f.util,s=f.roots.default||(f.roots.default={}),n=s.PeerMessage=(()=>{function e(t){if(t)for(let i=Object.keys(t),o=0;o<i.length;++o)t[i[o]]!=null&&(this[i[o]]=t[i[o]])}return r(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.prototype.recordingStartNotification=null,e.create=r(function(i){return new e(i)},"create"),e.encode=r(function(i,o){return o||(o=m.create()),i.reacji!=null&&Object.hasOwnProperty.call(i,"reacji")&&s.PeerMessage.Reacji.encode(i.reacji,o.uint32(10).fork()).ldelim(),i.draw!=null&&Object.hasOwnProperty.call(i,"draw")&&s.PeerMessage.Draw.encode(i.draw,o.uint32(18).fork()).ldelim(),i.fromPeerId!=null&&Object.hasOwnProperty.call(i,"fromPeerId")&&o.uint32(24).uint64(i.fromPeerId),i.fromPeerIdString!=null&&Object.hasOwnProperty.call(i,"fromPeerIdString")&&o.uint32(34).string(i.fromPeerIdString),i.capabilities!=null&&Object.hasOwnProperty.call(i,"capabilities")&&s.PeerMessage.Capabilities.encode(i.capabilities,o.uint32(42).fork()).ldelim(),i.background!=null&&Object.hasOwnProperty.call(i,"background")&&s.PeerMessage.Background.encode(i.background,o.uint32(50).fork()).ldelim(),i.muteRequest!=null&&Object.hasOwnProperty.call(i,"muteRequest")&&s.PeerMessage.MuteRequest.encode(i.muteRequest,o.uint32(82).fork()).ldelim(),i.awarenessBroadcast!=null&&Object.hasOwnProperty.call(i,"awarenessBroadcast")&&s.PeerMessage.AwarenessBroadcast.encode(i.awarenessBroadcast,o.uint32(90).fork()).ldelim(),i.awarenessQuery!=null&&Object.hasOwnProperty.call(i,"awarenessQuery")&&s.PeerMessage.AwarenessQuery.encode(i.awarenessQuery,o.uint32(98).fork()).ldelim(),i.awarenessClose!=null&&Object.hasOwnProperty.call(i,"awarenessClose")&&s.PeerMessage.AwarenessClose.encode(i.awarenessClose,o.uint32(106).fork()).ldelim(),i.jukeboxRequest!=null&&Object.hasOwnProperty.call(i,"jukeboxRequest")&&s.PeerMessage.JukeboxRequest.encode(i.jukeboxRequest,o.uint32(114).fork()).ldelim(),i.contentShareDetails!=null&&Object.hasOwnProperty.call(i,"contentShareDetails")&&s.PeerMessage.ContentShareDetails.encode(i.contentShareDetails,o.uint32(122).fork()).ldelim(),i.recordingStartNotification!=null&&Object.hasOwnProperty.call(i,"recordingStartNotification")&&s.PeerMessage.RecordingStartNotification.encode(i.recordingStartNotification,o.uint32(130).fork()).ldelim(),o},"encode"),e.encodeDelimited=r(function(i,o){return this.encode(i,o).ldelim()},"encodeDelimited"),e.decode=r(function(i,o){i instanceof p||(i=p.create(i));let c=o===void 0?i.len:i.pos+o,g=new s.PeerMessage;for(;i.pos<c;){let S=i.uint32();switch(S>>>3){case 1:{g.reacji=s.PeerMessage.Reacji.decode(i,i.uint32());break}case 2:{g.draw=s.PeerMessage.Draw.decode(i,i.uint32());break}case 3:{g.fromPeerId=i.uint64();break}case 4:{g.fromPeerIdString=i.string();break}case 5:{g.capabilities=s.PeerMessage.Capabilities.decode(i,i.uint32());break}case 6:{g.background=s.PeerMessage.Background.decode(i,i.uint32());break}case 10:{g.muteRequest=s.PeerMessage.MuteRequest.decode(i,i.uint32());break}case 11:{g.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.decode(i,i.uint32());break}case 12:{g.awarenessQuery=s.PeerMessage.AwarenessQuery.decode(i,i.uint32());break}case 13:{g.awarenessClose=s.PeerMessage.AwarenessClose.decode(i,i.uint32());break}case 14:{g.jukeboxRequest=s.PeerMessage.JukeboxRequest.decode(i,i.uint32());break}case 15:{g.contentShareDetails=s.PeerMessage.ContentShareDetails.decode(i,i.uint32());break}case 16:{g.recordingStartNotification=s.PeerMessage.RecordingStartNotification.decode(i,i.uint32());break}default:i.skipType(S&7);break}}return g},"decode"),e.decodeDelimited=r(function(i){return i instanceof p||(i=new p(i)),this.decode(i,i.uint32())},"decodeDelimited"),e.verify=r(function(i){if(typeof i!="object"||i===null)return"object expected";if(i.reacji!=null&&i.hasOwnProperty("reacji")){let o=s.PeerMessage.Reacji.verify(i.reacji);if(o)return"reacji."+o}if(i.draw!=null&&i.hasOwnProperty("draw")){let o=s.PeerMessage.Draw.verify(i.draw);if(o)return"draw."+o}if(i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&!a.isInteger(i.fromPeerId)&&!(i.fromPeerId&&a.isInteger(i.fromPeerId.low)&&a.isInteger(i.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&!a.isString(i.fromPeerIdString))return"fromPeerIdString: string expected";if(i.capabilities!=null&&i.hasOwnProperty("capabilities")){let o=s.PeerMessage.Capabilities.verify(i.capabilities);if(o)return"capabilities."+o}if(i.background!=null&&i.hasOwnProperty("background")){let o=s.PeerMessage.Background.verify(i.background);if(o)return"background."+o}if(i.muteRequest!=null&&i.hasOwnProperty("muteRequest")){let o=s.PeerMessage.MuteRequest.verify(i.muteRequest);if(o)return"muteRequest."+o}if(i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")){let o=s.PeerMessage.AwarenessBroadcast.verify(i.awarenessBroadcast);if(o)return"awarenessBroadcast."+o}if(i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")){let o=s.PeerMessage.AwarenessQuery.verify(i.awarenessQuery);if(o)return"awarenessQuery."+o}if(i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")){let o=s.PeerMessage.AwarenessClose.verify(i.awarenessClose);if(o)return"awarenessClose."+o}if(i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")){let o=s.PeerMessage.JukeboxRequest.verify(i.jukeboxRequest);if(o)return"jukeboxRequest."+o}if(i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")){let o=s.PeerMessage.ContentShareDetails.verify(i.contentShareDetails);if(o)return"contentShareDetails."+o}if(i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")){let o=s.PeerMessage.RecordingStartNotification.verify(i.recordingStartNotification);if(o)return"recordingStartNotification."+o}return null},"verify"),e.fromObject=r(function(i){if(i instanceof s.PeerMessage)return i;let o=new s.PeerMessage;if(i.reacji!=null){if(typeof i.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");o.reacji=s.PeerMessage.Reacji.fromObject(i.reacji)}if(i.draw!=null){if(typeof i.draw!="object")throw TypeError(".PeerMessage.draw: object expected");o.draw=s.PeerMessage.Draw.fromObject(i.draw)}if(i.fromPeerId!=null&&(a.Long?(o.fromPeerId=a.Long.fromValue(i.fromPeerId)).unsigned=!0:typeof i.fromPeerId=="string"?o.fromPeerId=parseInt(i.fromPeerId,10):typeof i.fromPeerId=="number"?o.fromPeerId=i.fromPeerId:typeof i.fromPeerId=="object"&&(o.fromPeerId=new a.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0))),i.fromPeerIdString!=null&&(o.fromPeerIdString=String(i.fromPeerIdString)),i.capabilities!=null){if(typeof i.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");o.capabilities=s.PeerMessage.Capabilities.fromObject(i.capabilities)}if(i.background!=null){if(typeof i.background!="object")throw TypeError(".PeerMessage.background: object expected");o.background=s.PeerMessage.Background.fromObject(i.background)}if(i.muteRequest!=null){if(typeof i.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");o.muteRequest=s.PeerMessage.MuteRequest.fromObject(i.muteRequest)}if(i.awarenessBroadcast!=null){if(typeof i.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");o.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.fromObject(i.awarenessBroadcast)}if(i.awarenessQuery!=null){if(typeof i.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");o.awarenessQuery=s.PeerMessage.AwarenessQuery.fromObject(i.awarenessQuery)}if(i.awarenessClose!=null){if(typeof i.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");o.awarenessClose=s.PeerMessage.AwarenessClose.fromObject(i.awarenessClose)}if(i.jukeboxRequest!=null){if(typeof i.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");o.jukeboxRequest=s.PeerMessage.JukeboxRequest.fromObject(i.jukeboxRequest)}if(i.contentShareDetails!=null){if(typeof i.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");o.contentShareDetails=s.PeerMessage.ContentShareDetails.fromObject(i.contentShareDetails)}if(i.recordingStartNotification!=null){if(typeof i.recordingStartNotification!="object")throw TypeError(".PeerMessage.recordingStartNotification: object expected");o.recordingStartNotification=s.PeerMessage.RecordingStartNotification.fromObject(i.recordingStartNotification)}return o},"fromObject"),e.toObject=r(function(i,o){o||(o={});let c={};if(o.defaults){if(c.reacji=null,c.draw=null,a.Long){let g=new a.Long(0,0,!0);c.fromPeerId=o.longs===String?g.toString():o.longs===Number?g.toNumber():g}else c.fromPeerId=o.longs===String?"0":0;c.fromPeerIdString="",c.capabilities=null,c.background=null,c.muteRequest=null,c.awarenessBroadcast=null,c.awarenessQuery=null,c.awarenessClose=null,c.jukeboxRequest=null,c.contentShareDetails=null,c.recordingStartNotification=null}return i.reacji!=null&&i.hasOwnProperty("reacji")&&(c.reacji=s.PeerMessage.Reacji.toObject(i.reacji,o)),i.draw!=null&&i.hasOwnProperty("draw")&&(c.draw=s.PeerMessage.Draw.toObject(i.draw,o)),i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&(typeof i.fromPeerId=="number"?c.fromPeerId=o.longs===String?String(i.fromPeerId):i.fromPeerId:c.fromPeerId=o.longs===String?a.Long.prototype.toString.call(i.fromPeerId):o.longs===Number?new a.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0):i.fromPeerId),i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&(c.fromPeerIdString=i.fromPeerIdString),i.capabilities!=null&&i.hasOwnProperty("capabilities")&&(c.capabilities=s.PeerMessage.Capabilities.toObject(i.capabilities,o)),i.background!=null&&i.hasOwnProperty("background")&&(c.background=s.PeerMessage.Background.toObject(i.background,o)),i.muteRequest!=null&&i.hasOwnProperty("muteRequest")&&(c.muteRequest=s.PeerMessage.MuteRequest.toObject(i.muteRequest,o)),i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")&&(c.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.toObject(i.awarenessBroadcast,o)),i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")&&(c.awarenessQuery=s.PeerMessage.AwarenessQuery.toObject(i.awarenessQuery,o)),i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")&&(c.awarenessClose=s.PeerMessage.AwarenessClose.toObject(i.awarenessClose,o)),i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")&&(c.jukeboxRequest=s.PeerMessage.JukeboxRequest.toObject(i.jukeboxRequest,o)),i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")&&(c.contentShareDetails=s.PeerMessage.ContentShareDetails.toObject(i.contentShareDetails,o)),i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")&&(c.recordingStartNotification=s.PeerMessage.RecordingStartNotification.toObject(i.recordingStartNotification,o)),c},"toObject"),e.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),e.getTypeUrl=r(function(i){return i===void 0&&(i="type.googleapis.com"),i+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.prototype.emojiUrl="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.emoji!=null&&Object.hasOwnProperty.call(o,"emoji")&&c.uint32(10).string(o.emoji),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(16).int32(o.type),o.emojiUrl!=null&&Object.hasOwnProperty.call(o,"emojiUrl")&&c.uint32(26).string(o.emojiUrl),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.Reacji;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.emoji=o.string();break}case 2:{S.type=o.int32();break}case 3:{S.emojiUrl=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.emoji!=null&&o.hasOwnProperty("emoji")&&!a.isString(o.emoji))return"emoji: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}return o.emojiUrl!=null&&o.hasOwnProperty("emojiUrl")&&!a.isString(o.emojiUrl)?"emojiUrl: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Reacji)return o;let c=new s.PeerMessage.Reacji;switch(o.emoji!=null&&(c.emoji=String(o.emoji)),o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"Unknown_reaction_type":case 0:c.type=0;break;case"Effect":case 1:c.type=1;break;case"Standard":case 2:c.type=2;break;case"Gif":case 3:c.type=3;break}return o.emojiUrl!=null&&(c.emojiUrl=String(o.emojiUrl)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.emoji="",g.type=c.enums===String?"Unknown_reaction_type":0,g.emojiUrl=""),o.emoji!=null&&o.hasOwnProperty("emoji")&&(g.emoji=o.emoji),o.type!=null&&o.hasOwnProperty("type")&&(g.type=c.enums===String?s.PeerMessage.Reacji.Type[o.type]===void 0?o.type:s.PeerMessage.Reacji.Type[o.type]:o.type),o.emojiUrl!=null&&o.hasOwnProperty("emojiUrl")&&(g.emojiUrl=o.emojiUrl),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="Unknown_reaction_type"]=0,o[i[1]="Effect"]=1,o[i[2]="Standard"]=2,o[i[3]="Gif"]=3,o}(),t}(),e.Point=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&c.uint32(9).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&c.uint32(17).double(o.y),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.Point;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.x=o.double();break}case 2:{S.y=o.double();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Point)return o;let c=new s.PeerMessage.Point;return o.x!=null&&(c.x=Number(o.x)),o.y!=null&&(c.y=Number(o.y)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.x=0,g.y=0),o.x!=null&&o.hasOwnProperty("x")&&(g.x=c.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(g.y=c.json&&!isFinite(o.y)?String(o.y):o.y),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.a!=null&&Object.hasOwnProperty.call(o,"a")&&s.PeerMessage.Point.encode(o.a,c.uint32(10).fork()).ldelim(),o.b!=null&&Object.hasOwnProperty.call(o,"b")&&s.PeerMessage.Point.encode(o.b,c.uint32(18).fork()).ldelim(),o.c!=null&&Object.hasOwnProperty.call(o,"c")&&s.PeerMessage.Point.encode(o.c,c.uint32(26).fork()).ldelim(),o.d!=null&&Object.hasOwnProperty.call(o,"d")&&s.PeerMessage.Point.encode(o.d,c.uint32(34).fork()).ldelim(),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.Segment;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.a=s.PeerMessage.Point.decode(o,o.uint32());break}case 2:{S.b=s.PeerMessage.Point.decode(o,o.uint32());break}case 3:{S.c=s.PeerMessage.Point.decode(o,o.uint32());break}case 4:{S.d=s.PeerMessage.Point.decode(o,o.uint32());break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.a!=null&&o.hasOwnProperty("a")){let c=s.PeerMessage.Point.verify(o.a);if(c)return"a."+c}if(o.b!=null&&o.hasOwnProperty("b")){let c=s.PeerMessage.Point.verify(o.b);if(c)return"b."+c}if(o.c!=null&&o.hasOwnProperty("c")){let c=s.PeerMessage.Point.verify(o.c);if(c)return"c."+c}if(o.d!=null&&o.hasOwnProperty("d")){let c=s.PeerMessage.Point.verify(o.d);if(c)return"d."+c}return null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Segment)return o;let c=new s.PeerMessage.Segment;if(o.a!=null){if(typeof o.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");c.a=s.PeerMessage.Point.fromObject(o.a)}if(o.b!=null){if(typeof o.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");c.b=s.PeerMessage.Point.fromObject(o.b)}if(o.c!=null){if(typeof o.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");c.c=s.PeerMessage.Point.fromObject(o.c)}if(o.d!=null){if(typeof o.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");c.d=s.PeerMessage.Point.fromObject(o.d)}return c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.a=null,g.b=null,g.c=null,g.d=null),o.a!=null&&o.hasOwnProperty("a")&&(g.a=s.PeerMessage.Point.toObject(o.a,c)),o.b!=null&&o.hasOwnProperty("b")&&(g.b=s.PeerMessage.Point.toObject(o.b,c)),o.c!=null&&o.hasOwnProperty("c")&&(g.c=s.PeerMessage.Point.toObject(o.c,c)),o.d!=null&&o.hasOwnProperty("d")&&(g.d=s.PeerMessage.Point.toObject(o.d,c)),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(8).int32(o.type),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&s.PeerMessage.Segment.encode(o.segment,c.uint32(18).fork()).ldelim(),o.hue!=null&&Object.hasOwnProperty.call(o,"hue")&&c.uint32(24).int32(o.hue),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&c.uint32(34).string(o.itemId),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&c.uint32(41).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&c.uint32(49).double(o.y),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.Draw;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.type=o.int32();break}case 2:{S.segment=s.PeerMessage.Segment.decode(o,o.uint32());break}case 3:{S.hue=o.int32();break}case 4:{S.itemId=o.string();break}case 5:{S.x=o.double();break}case 6:{S.y=o.double();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(o.segment!=null&&o.hasOwnProperty("segment")){let c=s.PeerMessage.Segment.verify(o.segment);if(c)return"segment."+c}return o.hue!=null&&o.hasOwnProperty("hue")&&!a.isInteger(o.hue)?"hue: integer expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Draw)return o;let c=new s.PeerMessage.Draw;switch(o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:c.type=0;break;case"NEW":case 1:c.type=1;break;case"EDIT":case 2:c.type=2;break;case"END":case 3:c.type=3;break;case"CHANGE_HUE":case 4:c.type=4;break;case"POSITION":case 5:c.type=5;break}if(o.segment!=null){if(typeof o.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");c.segment=s.PeerMessage.Segment.fromObject(o.segment)}return o.hue!=null&&(c.hue=o.hue|0),o.itemId!=null&&(c.itemId=String(o.itemId)),o.x!=null&&(c.x=Number(o.x)),o.y!=null&&(c.y=Number(o.y)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.type=c.enums===String?"UNKNOWN_DRAW_TYPE":0,g.segment=null,g.hue=0,g.itemId="",g.x=0,g.y=0),o.type!=null&&o.hasOwnProperty("type")&&(g.type=c.enums===String?s.PeerMessage.Draw.Type[o.type]===void 0?o.type:s.PeerMessage.Draw.Type[o.type]:o.type),o.segment!=null&&o.hasOwnProperty("segment")&&(g.segment=s.PeerMessage.Segment.toObject(o.segment,c)),o.hue!=null&&o.hasOwnProperty("hue")&&(g.hue=o.hue),o.itemId!=null&&o.hasOwnProperty("itemId")&&(g.itemId=o.itemId),o.x!=null&&o.hasOwnProperty("x")&&(g.x=c.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(g.y=c.json&&!isFinite(o.y)?String(o.y):o.y),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_DRAW_TYPE"]=0,o[i[1]="NEW"]=1,o[i[2]="EDIT"]=2,o[i[3]="END"]=3,o[i[4]="CHANGE_HUE"]=4,o[i[5]="POSITION"]=5,o}(),t}(),e.Capabilities=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.isDrawEnabled!=null&&Object.hasOwnProperty.call(o,"isDrawEnabled")&&c.uint32(8).bool(o.isDrawEnabled),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.Capabilities;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.isDrawEnabled=o.bool();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&typeof o.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Capabilities)return o;let c=new s.PeerMessage.Capabilities;return o.isDrawEnabled!=null&&(c.isDrawEnabled=Boolean(o.isDrawEnabled)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.isDrawEnabled=!1),o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&(g.isDrawEnabled=o.isDrawEnabled),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.sourceType!=null&&Object.hasOwnProperty.call(o,"sourceType")&&c.uint32(10).string(o.sourceType),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&c.uint32(18).string(o.itemId),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.ContentShareDetails;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.sourceType=o.string();break}case 2:{S.itemId=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.sourceType!=null&&o.hasOwnProperty("sourceType")&&!a.isString(o.sourceType)?"sourceType: string expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.ContentShareDetails)return o;let c=new s.PeerMessage.ContentShareDetails;return o.sourceType!=null&&(c.sourceType=String(o.sourceType)),o.itemId!=null&&(c.itemId=String(o.itemId)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.sourceType="",g.itemId=""),o.sourceType!=null&&o.hasOwnProperty("sourceType")&&(g.sourceType=o.sourceType),o.itemId!=null&&o.hasOwnProperty("itemId")&&(g.itemId=o.itemId),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"Background"),t.prototype.url="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.url!=null&&Object.hasOwnProperty.call(o,"url")&&c.uint32(10).string(o.url),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.Background;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.url=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.url!=null&&o.hasOwnProperty("url")&&!a.isString(o.url)?"url: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.Background)return o;let c=new s.PeerMessage.Background;return o.url!=null&&(c.url=String(o.url)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.url=""),o.url!=null&&o.hasOwnProperty("url")&&(g.url=o.url),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"MuteRequest"),t.prototype.peerId="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.peerId!=null&&Object.hasOwnProperty.call(o,"peerId")&&c.uint32(10).string(o.peerId),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.MuteRequest;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.peerId=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.peerId!=null&&o.hasOwnProperty("peerId")&&!a.isString(o.peerId)?"peerId: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.MuteRequest)return o;let c=new s.PeerMessage.MuteRequest;return o.peerId!=null&&(c.peerId=String(o.peerId)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.peerId=""),o.peerId!=null&&o.hasOwnProperty("peerId")&&(g.peerId=o.peerId),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.songKey!=null&&Object.hasOwnProperty.call(o,"songKey")&&c.uint32(10).string(o.songKey),o.stop!=null&&Object.hasOwnProperty.call(o,"stop")&&c.uint32(16).bool(o.stop),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.JukeboxRequest;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.songKey=o.string();break}case 2:{S.stop=o.bool();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.songKey!=null&&o.hasOwnProperty("songKey")&&!a.isString(o.songKey)?"songKey: string expected":o.stop!=null&&o.hasOwnProperty("stop")&&typeof o.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.JukeboxRequest)return o;let c=new s.PeerMessage.JukeboxRequest;return o.songKey!=null&&(c.songKey=String(o.songKey)),o.stop!=null&&(c.stop=Boolean(o.stop)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.songKey="",g.stop=!1),o.songKey!=null&&o.hasOwnProperty("songKey")&&(g.songKey=o.songKey),o.stop!=null&&o.hasOwnProperty("stop")&&(g.stop=o.stop),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.RecordingStartNotification=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"RecordingStartNotification"),t.prototype.type=0,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(8).int32(o.type),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.RecordingStartNotification;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.type=o.int32();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:break}return null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.RecordingStartNotification)return o;let c=new s.PeerMessage.RecordingStartNotification;switch(o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"UNKNOWN_TYPE":case 0:c.type=0;break;case"SUMMARY":case 1:c.type=1;break}return c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.type=c.enums===String?"UNKNOWN_TYPE":0),o.type!=null&&o.hasOwnProperty("type")&&(g.type=c.enums===String?s.PeerMessage.RecordingStartNotification.Type[o.type]===void 0?o.type:s.PeerMessage.RecordingStartNotification.Type[o.type]:o.type),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.RecordingStartNotification"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_TYPE"]=0,o[i[1]="SUMMARY"]=1,o}(),t}(),e.AwarenessPayload=function(){function t(o){if(o)for(let c=Object.keys(o),g=0;g<c.length;++g)o[c[g]]!=null&&(this[c[g]]=o[c[g]])}r(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let i;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:a.oneOfGetter(i=["fieldTimestampMs"]),set:a.oneOfSetter(i)}),t.create=r(function(c){return new t(c)},"create"),t.encode=r(function(c,g){return g||(g=m.create()),c.fieldName!=null&&Object.hasOwnProperty.call(c,"fieldName")&&g.uint32(10).string(c.fieldName),c.fieldValue!=null&&Object.hasOwnProperty.call(c,"fieldValue")&&g.uint32(18).string(c.fieldValue),c.fieldTimestampMs!=null&&Object.hasOwnProperty.call(c,"fieldTimestampMs")&&g.uint32(24).int64(c.fieldTimestampMs),g},"encode"),t.encodeDelimited=r(function(c,g){return this.encode(c,g).ldelim()},"encodeDelimited"),t.decode=r(function(c,g){c instanceof p||(c=p.create(c));let S=g===void 0?c.len:c.pos+g,u=new s.PeerMessage.AwarenessPayload;for(;c.pos<S;){let v=c.uint32();switch(v>>>3){case 1:{u.fieldName=c.string();break}case 2:{u.fieldValue=c.string();break}case 3:{u.fieldTimestampMs=c.int64();break}default:c.skipType(v&7);break}}return u},"decode"),t.decodeDelimited=r(function(c){return c instanceof p||(c=new p(c)),this.decode(c,c.uint32())},"decodeDelimited"),t.verify=r(function(c){if(typeof c!="object"||c===null)return"object expected";let g={};return c.fieldName!=null&&c.hasOwnProperty("fieldName")&&!a.isString(c.fieldName)?"fieldName: string expected":c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&!a.isString(c.fieldValue)?"fieldValue: string expected":c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(g._fieldTimestampMs=1,!a.isInteger(c.fieldTimestampMs)&&!(c.fieldTimestampMs&&a.isInteger(c.fieldTimestampMs.low)&&a.isInteger(c.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=r(function(c){if(c instanceof s.PeerMessage.AwarenessPayload)return c;let g=new s.PeerMessage.AwarenessPayload;return c.fieldName!=null&&(g.fieldName=String(c.fieldName)),c.fieldValue!=null&&(g.fieldValue=String(c.fieldValue)),c.fieldTimestampMs!=null&&(a.Long?(g.fieldTimestampMs=a.Long.fromValue(c.fieldTimestampMs)).unsigned=!1:typeof c.fieldTimestampMs=="string"?g.fieldTimestampMs=parseInt(c.fieldTimestampMs,10):typeof c.fieldTimestampMs=="number"?g.fieldTimestampMs=c.fieldTimestampMs:typeof c.fieldTimestampMs=="object"&&(g.fieldTimestampMs=new a.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber())),g},"fromObject"),t.toObject=r(function(c,g){g||(g={});let S={};return g.defaults&&(S.fieldName="",S.fieldValue=""),c.fieldName!=null&&c.hasOwnProperty("fieldName")&&(S.fieldName=c.fieldName),c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&(S.fieldValue=c.fieldValue),c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(typeof c.fieldTimestampMs=="number"?S.fieldTimestampMs=g.longs===String?String(c.fieldTimestampMs):c.fieldTimestampMs:S.fieldTimestampMs=g.longs===String?a.Long.prototype.toString.call(c.fieldTimestampMs):g.longs===Number?new a.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber():c.fieldTimestampMs,g.oneofs&&(S._fieldTimestampMs="fieldTimestampMs")),S},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(i){if(this.awarenessState=[],i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=a.emptyArray,t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){if(c||(c=m.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&c.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&c.uint32(18).string(o.user),o.awarenessState!=null&&o.awarenessState.length)for(let g=0;g<o.awarenessState.length;++g)s.PeerMessage.AwarenessPayload.encode(o.awarenessState[g],c.uint32(26).fork()).ldelim();return c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.AwarenessBroadcast;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}case 3:{S.awarenessState&&S.awarenessState.length||(S.awarenessState=[]),S.awarenessState.push(s.PeerMessage.AwarenessPayload.decode(o,o.uint32()));break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel))return"channel: string expected";if(o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user))return"user: string expected";if(o.awarenessState!=null&&o.hasOwnProperty("awarenessState")){if(!Array.isArray(o.awarenessState))return"awarenessState: array expected";for(let c=0;c<o.awarenessState.length;++c){let g=s.PeerMessage.AwarenessPayload.verify(o.awarenessState[c]);if(g)return"awarenessState."+g}}return null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.AwarenessBroadcast)return o;let c=new s.PeerMessage.AwarenessBroadcast;if(o.channel!=null&&(c.channel=String(o.channel)),o.user!=null&&(c.user=String(o.user)),o.awarenessState){if(!Array.isArray(o.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");c.awarenessState=[];for(let g=0;g<o.awarenessState.length;++g){if(typeof o.awarenessState[g]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");c.awarenessState[g]=s.PeerMessage.AwarenessPayload.fromObject(o.awarenessState[g])}}return c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};if((c.arrays||c.defaults)&&(g.awarenessState=[]),c.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),o.awarenessState&&o.awarenessState.length){g.awarenessState=[];for(let S=0;S<o.awarenessState.length;++S)g.awarenessState[S]=s.PeerMessage.AwarenessPayload.toObject(o.awarenessState[S],c)}return g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&c.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&c.uint32(18).string(o.user),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.AwarenessQuery;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.AwarenessQuery)return o;let c=new s.PeerMessage.AwarenessQuery;return o.channel!=null&&(c.channel=String(o.channel)),o.user!=null&&(c.user=String(o.user)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return r(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=r(function(o){return new t(o)},"create"),t.encode=r(function(o,c){return c||(c=m.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&c.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&c.uint32(18).string(o.user),c},"encode"),t.encodeDelimited=r(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=r(function(o,c){o instanceof p||(o=p.create(o));let g=c===void 0?o.len:o.pos+c,S=new s.PeerMessage.AwarenessClose;for(;o.pos<g;){let u=o.uint32();switch(u>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(u&7);break}}return S},"decode"),t.decodeDelimited=r(function(o){return o instanceof p||(o=new p(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=r(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=r(function(o){if(o instanceof s.PeerMessage.AwarenessClose)return o;let c=new s.PeerMessage.AwarenessClose;return o.channel!=null&&(c.channel=String(o.channel)),o.user!=null&&(c.user=String(o.user)),c},"fromObject"),t.toObject=r(function(o,c){c||(c={});let g={};return c.defaults&&(g.channel="",g.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(g.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(g.user=o.user),g},"toObject"),t.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),t.getTypeUrl=r(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},9648131521:(B,l,d)=>{"use strict";d.d(l,{X:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InvalidCursor:"invalid_cursor",InvalidArguments:"invalid_arguments"},n=(0,p.A)("activity.feed generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"activity.feed",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to activity.feed
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcheractivityFeedFetcher",description:"activity.feed generated fetcher"}},4186058919:(B,l,d)=>{"use strict";d.d(l,{$:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={MethodNotSupported:"method_not_supported",AppNotFound:"app_not_found",AppNotInstalled:"app_not_installed",ProviderNotFound:"provider_not_found",UnknownWorkflowId:"unknown_workflow_id",UnknownFunctionId:"unknown_function_id",FunctionBelongsToAnotherApp:"function_belongs_to_another_app",ScopeGroupNotFound:"scope_group_not_found"},n=(0,p.A)("apps.auth.external.start generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"apps.auth.external.start",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to apps.auth.external.start
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherappsAuthExternalStartFetcher",description:"apps.auth.external.start generated fetcher"}},7204143202:(B,l,d)=>{"use strict";d.d(l,{t:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={BadVersionTs:"bad_version_ts",BadBuildVersionTs:"bad_build_version_ts",InvalidToken:"invalid_token"},n=(0,p.A)("client.shouldReload generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"client.shouldReload",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to client.shouldReload
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherclientShouldReloadFetcher",description:"client.shouldReload generated fetcher"}},1605540670:(B,l,d)=>{"use strict";d.d(l,{O:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited"},n=(0,p.A)("connectInvites.list generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"connectInvites.list",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to connectInvites.list
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherconnectInvitesListFetcher",description:"connectInvites.list generated fetcher"}},1614054140:(B,l,d)=>{"use strict";d.d(l,{T:()=>s,W:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},n=(0,p.A)("conversations.acceptSharedInvite generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.acceptSharedInvite",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to conversations.acceptSharedInvite
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},4744405580:(B,l,d)=>{"use strict";d.d(l,{_:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={ChannelNotFound:"channel_not_found",MissingScope:"missing_scope",TeamAccessNotGranted:"team_access_not_granted",UserNotFound:"user_not_found",UserRemovedFromTeam:"user_removed_from_team"},n=(0,p.A)("conversations.info generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.info",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to conversations.info
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsInfoFetcher",description:"conversations.info generated fetcher"}},6639221719:(B,l,d)=>{"use strict";d.d(l,{U:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={FeatureNotEnabled:"feature_not_enabled",ChannelNotFound:"channel_not_found",ErrorFetchingChannelPrefs:"error_fetching_channel_prefs"},n=(0,p.A)("conversations.listPrefs generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"conversations.listPrefs",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to conversations.listPrefs
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherconversationsListPrefsFetcher",description:"conversations.listPrefs generated fetcher"}},4349526263:(B,l,d)=>{"use strict";d.d(l,{Sv:()=>s,a0:()=>e,jB:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},n={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",DomainClaimed:"domain_claimed"},e=(0,p.A)("conversations.sharedInviteAcceptanceEligibility generated fetcher",(t,i,o)=>new f.S((c,g)=>{const{reason:S,...u}=o,v=(0,a.VA)(u);t((0,h.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:v,reason:S})).then(E=>{c(E)}).catch(E=>{(0,m.Ay)({getState:i}).error(`API call to conversations.sharedInviteAcceptanceEligibility
						with reason ${S} failed, initiated by generated fetcher`),g(E)})}));e.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},3456937405:(B,l,d)=>{"use strict";d.d(l,{W:()=>s,l:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorLowerCaseNamesOnly:"error_lower_case_names_only",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",FailedToAddEmoji:"failed_to_add_emoji",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},n=(0,p.A)("emoji.add generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"emoji.add",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to emoji.add
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},7650175331:(B,l,d)=>{"use strict";d.d(l,{$:()=>s,i:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={ConnectorNotFound:"connector_not_found",FunctionDisabled:"function_disabled",NotConnected:"not_connected",FunctionNotFound:"function_not_found",InvalidRecordId:"invalid_record_id"},n=(0,p.A)("enterpriseSearch.getEntity generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"enterpriseSearch.getEntity",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to enterpriseSearch.getEntity
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherenterpriseSearchGetEntityFetcher",description:"enterpriseSearch.getEntity generated fetcher"}},5216556985:(B,l,d)=>{"use strict";d.d(l,{D:()=>n,G:()=>s});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={FeatureNotEnabled:"feature_not_enabled",InviteNotFound:"invite_not_found",WorkspaceNotFound:"workspace_not_found",OperationNotAllowed:"operation_not_allowed",ExternalWorkspaceLimitReached:"external_workspace_limit_reached",FailedToFetchTermsOfService:"failed_to_fetch_terms_of_service",TermsOfServiceNotAccepted:"terms_of_service_not_accepted",GuestUserNotAllowed:"guest_user_not_allowed",EmailDoesNotMatch:"email_does_not_match",InvalidRecipientTeam:"invalid_recipient_team",DomainClaimed:"domain_claimed",NotPaid:"not_paid"},n=(0,p.A)("externalWorkspaces.invites.accept generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"externalWorkspaces.invites.accept",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to externalWorkspaces.invites.accept
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesAcceptFetcher",description:"externalWorkspaces.invites.accept generated fetcher"}},8485081141:(B,l,d)=>{"use strict";d.d(l,{I:()=>s,l:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InviteNotFound:"invite_not_found",InviteInvalid:"invite_invalid",RateLimited:"rate_limited",InviteUsed:"invite_used",FailedGeneratingInviteOutput:"failed_generating_invite_output"},n=(0,p.A)("externalWorkspaces.invites.info generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"externalWorkspaces.invites.info",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to externalWorkspaces.invites.info
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesInfoFetcher",description:"externalWorkspaces.invites.info generated fetcher"}},6801073238:(B,l,d)=>{"use strict";d.d(l,{x:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={FileNotFound:"file_not_found",UnknownMethod:"unknown_method",FiletypeNotSupported:"filetype_not_supported",CannotUpgradeAccess:"cannot_upgrade_access",UpgradeNotSupported:"upgrade_not_supported"},n=(0,p.A)("files.requestPermission generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"files.requestPermission",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to files.requestPermission
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherfilesRequestPermissionFetcher",description:"files.requestPermission generated fetcher"}},8726791251:(B,l,d)=>{"use strict";d.d(l,{I:()=>s});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s=(0,p.A)("help.issues.ticketStats generated fetcher",(n,e,t)=>new f.S((i,o)=>{const{reason:c,...g}=t,S=(0,a.VA)(g);n((0,h.apiCall)({method:"help.issues.ticketStats",args:S,reason:c})).then(u=>{i(u)}).catch(u=>{(0,m.Ay)({getState:e}).error(`API call to help.issues.ticketStats
						with reason ${c} failed, initiated by generated fetcher`),o(u)})}));s.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},930270247:(B,l,d)=>{"use strict";d.d(l,{l:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={},n=(0,p.A)("help.productHelpCard.list generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"help.productHelpCard.list",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to help.productHelpCard.list
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},138202077:(B,l,d)=>{"use strict";d.d(l,{H:()=>s});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s=(0,p.A)("help.getRecommendedArticles generated fetcher",(n,e,t)=>new f.S((i,o)=>{const{reason:c,...g}=t,S=(0,a.VA)(g);n((0,h.apiCall)({method:"help.getRecommendedArticles",args:S,reason:c})).then(u=>{i(u)}).catch(u=>{(0,m.Ay)({getState:e}).error(`API call to help.getRecommendedArticles
						with reason ${c} failed, initiated by generated fetcher`),o(u)})}));s.meta={name:"createFetcher",key:"createFetcherhelpGetRecommendedArticlesFetcher",description:"help.getRecommendedArticles generated fetcher"}},6936450040:(B,l,d)=>{"use strict";d.d(l,{G:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},n=(0,p.A)("helpdesk.categories generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.categories",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to helpdesk.categories
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},3593297427:(B,l,d)=>{"use strict";d.d(l,{w:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={CouldNotFindArticle:"could_not_find_article"},n=(0,p.A)("helpdesk.getArticle generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.getArticle",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to helpdesk.getArticle
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskGetArticleFetcher",description:"helpdesk.getArticle generated fetcher"}},8745755260:(B,l,d)=>{"use strict";d.d(l,{h:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={CouldNotFetchSections:"could_not_fetch_sections"},n=(0,p.A)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},9532047472:(B,l,d)=>{"use strict";d.d(l,{a:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},n=(0,p.A)("helpdesk.get generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"helpdesk.get",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to helpdesk.get
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},3810796320:(B,l,d)=>{"use strict";d.d(l,{V:()=>s,o:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={ChannelNotFound:"channel_not_found",MissingScope:"missing_scope",InvalidApp:"invalid_app",InternalError:"internal_error",UriNotHandledByApp:"uri_not_handled_by_app",UriNotFoundInMessage:"uri_not_found_in_message",EmailNotVerified:"email_not_verified",UnsupportedEmailAddress:"unsupported_email_address",InvalidClientCache:"invalid_client_cache",SsoNotAllowed:"sso_not_allowed"},n=(0,p.A)("links.getTransferPayload generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"links.getTransferPayload",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to links.getTransferPayload
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherlinksGetTransferPayloadFetcher",description:"links.getTransferPayload generated fetcher"}},2694081143:(B,l,d)=>{"use strict";d.d(l,{Q:()=>s,T:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={ListNotFound:"list_not_found",RecordNotFound:"record_not_found",RecordDeleted:"record_deleted",TeamNotFound:"team_not_found",UserNotFound:"user_not_found"},n=(0,p.A)("lists.records.info generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"lists.records.info",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to lists.records.info
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherlistsRecordsInfoFetcher",description:"lists.records.info generated fetcher"}},444762595:(B,l,d)=>{"use strict";d.d(l,{z:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor",SortsNotSupported:"sorts_not_supported",FiltersNotSupported:"filters_not_supported",ArchiveNotSupported:"archive_not_supported",IncludeSuggestedNotSupported:"include_suggested_not_supported"},n=(0,p.A)("lists.records.list generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"lists.records.list",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to lists.records.list
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},6485511687:(B,l,d)=>{"use strict";d.d(l,{a:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},n=(0,p.A)("megaphone.setNotificationAsSeen generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"megaphone.setNotificationAsSeen",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to megaphone.setNotificationAsSeen
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},3048437087:(B,l,d)=>{"use strict";d.d(l,{n:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={NotImplemented:"not_implemented",NoProductSelected:"no_product_selected",InvalidRequest:"invalid_request",UnableToSetProductId:"unable_to_set_product_id",UnableToSetAddonIds:"unable_to_set_addon_ids",InvalidProductId:"invalid_product_id",AddonListTooLong:"addon_list_too_long",InvalidAddonIdInList:"invalid_addon_id_in_list",MultipleAddonsWithSameType:"multiple_addons_with_same_type"},n=(0,p.A)("payments.checkout.config generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"payments.checkout.config",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to payments.checkout.config
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherpaymentsCheckoutConfigFetcher",description:"payments.checkout.config generated fetcher"}},5170073955:(B,l,d)=>{"use strict";d.d(l,{Q:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},n=(0,p.A)("rooms.inviteResponse generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.inviteResponse",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.inviteResponse
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},5142752606:(B,l,d)=>{"use strict";d.d(l,{g:()=>s});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InvalidUser:"invalid_user",ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id",PermissionDenied:"permission_denied",CannotInviteExternal:"cannot_invite_external",InviteFailed:"invite_failed",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",MaxPotentialParticipants:"max_potential_participants",RecipientHuddlesDisabled:"recipient_huddles_disabled",FreemiumMaxParticipants:"freemium_max_participants"},n=(0,p.A)("rooms.notifyMember generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.notifyMember",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.notifyMember
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsNotifyMemberFetcher",description:"rooms.notifyMember generated fetcher"}},727128009:(B,l,d)=>{"use strict";d.d(l,{i:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied",InvalidLocale:"invalid_locale"},n=(0,p.A)("rooms.startTranscription generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.startTranscription",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.startTranscription
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},580220061:(B,l,d)=>{"use strict";d.d(l,{W:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},n=(0,p.A)("rooms.stopTranscription generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"rooms.stopTranscription",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to rooms.stopTranscription
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},5276466411:(B,l,d)=>{"use strict";d.d(l,{z:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={},n=(0,p.A)("search.autocomplete.topEngagedFiles generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"search.autocomplete.topEngagedFiles",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to search.autocomplete.topEngagedFiles
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTopEngagedFilesFetcher",description:"search.autocomplete.topEngagedFiles generated fetcher"}},6494470131:(B,l,d)=>{"use strict";d.d(l,{v:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={AuthError:"auth_error"},n=(0,p.A)("search.autocomplete.triggers generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"search.autocomplete.triggers",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to search.autocomplete.triggers
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},7217613594:(B,l,d)=>{"use strict";d.d(l,{H:()=>n,c:()=>s});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InsufficientRecordAccess:"insufficient_record_access",RecordNotFound:"record_not_found",SalesHomeUserConfigNotFound:"sales_home_user_config_not_found",TokenNotFound:"token_not_found",UnsupportedObject:"unsupported_object",SalesforceTimeout:"salesforce_timeout",AccessTokenExchangeFailed:"access_token_exchange_failed"},n=(0,p.A)("sfdc.getRecordLayoutDetails generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"sfdc.getRecordLayoutDetails",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to sfdc.getRecordLayoutDetails
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchersfdcGetRecordLayoutDetailsFetcher",description:"sfdc.getRecordLayoutDetails generated fetcher"}},8480246703:(B,l,d)=>{"use strict";d.d(l,{k:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={},n=(0,p.A)("sfdc.orgInfo generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"sfdc.orgInfo",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to sfdc.orgInfo
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchersfdcOrgInfoFetcher",description:"sfdc.orgInfo generated fetcher"}},6515569951:(B,l,d)=>{"use strict";d.d(l,{Z:()=>n,q:()=>s});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"},n=(0,p.A)("sharedInvites.accept generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"sharedInvites.accept",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to sharedInvites.accept
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},2276214198:(B,l,d)=>{"use strict";d.d(l,{M:()=>s,b:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={NoEmail:"no_email",NoCode:"no_code",Failed:"failed",Expired:"expired",Ratelimited:"ratelimited",MagicLoginFailed:"magic_login_failed",CaptchaFailed:"captcha_failed"},n=(0,p.A)("signin.confirmCode generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"signin.confirmCode",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to signin.confirmCode
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchersigninConfirmCodeFetcher",description:"signin.confirmCode generated fetcher"}},555314707:(B,l,d)=>{"use strict";d.d(l,{i:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={NoEmail:"no_email",InvalidEmail:"invalid_email",ConfirmEmailFailed:"confirm_email_failed",Ratelimited:"ratelimited",InvalidDeviceId:"invalid_device_id",MissingArgument:"missing_argument",WorkspaceLimitExceeded:"workspace_limit_exceeded",UnsupportedArguments:"unsupported_arguments",BadEmailDomain:"bad_email_domain",CodeRequestLimitReached:"code_request_limit_reached"},n=(0,p.A)("signup.confirmEmail generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"signup.confirmEmail",args:u,reason:g,computeToken:!1})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to signup.confirmEmail
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetchersignupConfirmEmailFetcher",description:"signup.confirmEmail generated fetcher"}},7779511999:(B,l,d)=>{"use strict";d.d(l,{a:()=>s,p:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={NoSelfVip:"no_self_vip",NoBotVip:"no_bot_vip",UserNotFound:"user_not_found",TooManyVips:"too_many_vips"},n=(0,p.A)("users.priority.add generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"users.priority.add",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to users.priority.add
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherusersPriorityAddFetcher",description:"users.priority.add generated fetcher"}},5876398840:(B,l,d)=>{"use strict";d.d(l,{O:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={UserNotFound:"user_not_found"},n=(0,p.A)("users.priority.remove generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"users.priority.remove",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to users.priority.remove
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherusersPriorityRemoveFetcher",description:"users.priority.remove generated fetcher"}},9291336591:(B,l,d)=>{"use strict";d.d(l,{k:()=>s,n:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken",CannotUpdateStatus:"cannot_update_status"},n=(0,p.A)("users.profile.set generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"users.profile.set",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to users.profile.set
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},7330016313:(B,l,d)=>{"use strict";d.d(l,{o:()=>n});var f=d(1545824888),h=d(6439846314),p=d(5257368278),m=d(337319621),a=d(28129577);const s={InvalidEntityId:"invalid_entity_id",InvalidApp:"invalid_app",InvalidAppId:"invalid_app_id",MessageNotFound:"message_not_found",ChannelNotFound:"channel_not_found",InvalidEntityDetails:"invalid_entity_details",EntityNotFound:"entity_not_found",NotImplemented:"not_implemented",InternalError:"internal_error",ConnectorNotFound:"connector_not_found",FunctionDisabled:"function_disabled",NotConnected:"not_connected",FunctionNotFound:"function_not_found",InvalidRecordId:"invalid_record_id",FailedToRequestForEntityDetails:"failed_to_request_for_entity_details"},n=(0,p.A)("workObjects.getEntity generated fetcher",(e,t,i)=>new f.S((o,c)=>{const{reason:g,...S}=i,u=(0,a.VA)(S);e((0,h.apiCall)({method:"workObjects.getEntity",args:u,reason:g})).then(v=>{o(v)}).catch(v=>{(0,m.Ay)({getState:t}).error(`API call to workObjects.getEntity
						with reason ${g} failed, initiated by generated fetcher`),c(v)})}));n.meta={name:"createFetcher",key:"createFetcherworkObjectsGetEntityFetcher",description:"workObjects.getEntity generated fetcher"}},4097827290:(B,l,d)=>{"use strict";d.d(l,{p:()=>f,t:()=>h});const f={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"},h={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"}},2164700852:(B,l,d)=>{"use strict";d.d(l,{k:()=>f});const f={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"}},8804412379:(B,l,d)=>{"use strict";d.r(l),d.d(l,{$Command:()=>Gn,AllowNotifications:()=>fm,AssociateChannelFlowCommand:()=>sc,BadRequestException:()=>jl,BatchChannelMembershipsFilterSensitiveLog:()=>sf,BatchCreateChannelMembershipCommand:()=>sd,BatchCreateChannelMembershipResponseFilterSensitiveLog:()=>af,ChannelAssociatedWithFlowSummaryFilterSensitiveLog:()=>df,ChannelBanFilterSensitiveLog:()=>cf,ChannelBanSummaryFilterSensitiveLog:()=>uf,ChannelFilterSensitiveLog:()=>lf,ChannelFlowCallbackCommand:()=>fs,ChannelFlowCallbackRequestFilterSensitiveLog:()=>pf,ChannelFlowFilterSensitiveLog:()=>ff,ChannelFlowSummaryFilterSensitiveLog:()=>mf,ChannelMembershipFilterSensitiveLog:()=>gf,ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:()=>zc,ChannelMembershipPreferencesFilterSensitiveLog:()=>Zd,ChannelMembershipSummaryFilterSensitiveLog:()=>vf,ChannelMembershipType:()=>hm,ChannelMessageCallbackFilterSensitiveLog:()=>hf,ChannelMessageFilterSensitiveLog:()=>yf,ChannelMessagePersistenceType:()=>bm,ChannelMessageStatus:()=>_m,ChannelMessageSummaryFilterSensitiveLog:()=>Ef,ChannelMessageType:()=>Tm,ChannelMode:()=>gm,ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:()=>$c,ChannelModeratorFilterSensitiveLog:()=>bf,ChannelModeratorSummaryFilterSensitiveLog:()=>_f,ChannelPrivacy:()=>Sm,ChannelSummaryFilterSensitiveLog:()=>td,ChimeSDKMessaging:()=>L,ChimeSDKMessagingClient:()=>zo,ChimeSDKMessagingServiceException:()=>Ho,ConflictException:()=>zl,CreateChannelBanCommand:()=>Za,CreateChannelBanResponseFilterSensitiveLog:()=>Cf,CreateChannelCommand:()=>qa,CreateChannelFlowCommand:()=>ad,CreateChannelFlowRequestFilterSensitiveLog:()=>If,CreateChannelMembershipCommand:()=>Oa,CreateChannelMembershipResponseFilterSensitiveLog:()=>wf,CreateChannelModeratorCommand:()=>el,CreateChannelModeratorResponseFilterSensitiveLog:()=>Df,CreateChannelRequestFilterSensitiveLog:()=>Tf,DeleteChannelBanCommand:()=>ca,DeleteChannelCommand:()=>tl,DeleteChannelFlowCommand:()=>ld,DeleteChannelMembershipCommand:()=>dd,DeleteChannelMessageCommand:()=>cd,DeleteChannelModeratorCommand:()=>ud,DeleteMessagingStreamingConfigurationsCommand:()=>fd,DescribeChannelBanCommand:()=>hd,DescribeChannelBanResponseFilterSensitiveLog:()=>Of,DescribeChannelCommand:()=>ac,DescribeChannelFlowCommand:()=>nl,DescribeChannelFlowResponseFilterSensitiveLog:()=>Mf,DescribeChannelMembershipCommand:()=>il,DescribeChannelMembershipForAppInstanceUserCommand:()=>Zs,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:()=>Pf,DescribeChannelMembershipResponseFilterSensitiveLog:()=>Rf,DescribeChannelModeratedByAppInstanceUserCommand:()=>rl,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>kf,DescribeChannelModeratorCommand:()=>qs,DescribeChannelModeratorResponseFilterSensitiveLog:()=>Nf,DescribeChannelResponseFilterSensitiveLog:()=>Af,DisassociateChannelFlowCommand:()=>ol,ErrorCode:()=>pm,ExpirationCriterion:()=>mm,FallbackAction:()=>ym,ForbiddenException:()=>$l,GetChannelMembershipPreferencesCommand:()=>sl,GetChannelMembershipPreferencesResponseFilterSensitiveLog:()=>Lf,GetChannelMessageCommand:()=>pd,GetChannelMessageResponseFilterSensitiveLog:()=>Ff,GetChannelMessageStatusCommand:()=>al,GetMessagingSessionEndpointCommand:()=>Ma,GetMessagingStreamingConfigurationsCommand:()=>md,IdentityFilterSensitiveLog:()=>go,InvocationType:()=>vm,ListChannelBansCommand:()=>ll,ListChannelBansRequestFilterSensitiveLog:()=>Bf,ListChannelBansResponseFilterSensitiveLog:()=>xf,ListChannelFlowsCommand:()=>dl,ListChannelFlowsRequestFilterSensitiveLog:()=>Uf,ListChannelFlowsResponseFilterSensitiveLog:()=>Vf,ListChannelMembershipsCommand:()=>cl,ListChannelMembershipsForAppInstanceUserCommand:()=>Eo,ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:()=>Gf,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:()=>jf,ListChannelMembershipsRequestFilterSensitiveLog:()=>Hf,ListChannelMembershipsResponseFilterSensitiveLog:()=>Wf,ListChannelMessagesCommand:()=>Ra,ListChannelMessagesRequestFilterSensitiveLog:()=>zf,ListChannelMessagesResponseFilterSensitiveLog:()=>$f,ListChannelModeratorsCommand:()=>ul,ListChannelModeratorsRequestFilterSensitiveLog:()=>Kf,ListChannelModeratorsResponseFilterSensitiveLog:()=>Jf,ListChannelsAssociatedWithChannelFlowCommand:()=>fl,ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:()=>Qf,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:()=>Zf,ListChannelsCommand:()=>ea,ListChannelsModeratedByAppInstanceUserCommand:()=>Pa,ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:()=>qf,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>eh,ListChannelsRequestFilterSensitiveLog:()=>Yf,ListChannelsResponseFilterSensitiveLog:()=>Xf,ListSubChannelsCommand:()=>bs,ListSubChannelsRequestFilterSensitiveLog:()=>th,ListSubChannelsResponseFilterSensitiveLog:()=>nh,ListTagsForResourceCommand:()=>ua,ListTagsForResourceResponseFilterSensitiveLog:()=>ih,MessageAttributeValueFilterSensitiveLog:()=>ed,MessagingDataType:()=>Cm,NotFoundException:()=>Kl,ProcessorFilterSensitiveLog:()=>ql,PushNotificationConfigurationFilterSensitiveLog:()=>jc,PushNotificationPreferencesFilterSensitiveLog:()=>Sf,PushNotificationType:()=>Em,PutChannelExpirationSettingsCommand:()=>Bs,PutChannelMembershipPreferencesCommand:()=>gd,PutChannelMembershipPreferencesRequestFilterSensitiveLog:()=>rh,PutChannelMembershipPreferencesResponseFilterSensitiveLog:()=>oh,PutMessagingStreamingConfigurationsCommand:()=>lc,RedactChannelMessageCommand:()=>Sd,ResourceLimitExceededException:()=>Zl,SearchChannelsCommand:()=>hl,SearchChannelsRequestFilterSensitiveLog:()=>sh,SearchChannelsResponseFilterSensitiveLog:()=>ah,SearchFieldKey:()=>wm,SearchFieldOperator:()=>Dm,SendChannelMessageCommand:()=>vd,SendChannelMessageRequestFilterSensitiveLog:()=>lh,ServiceFailureException:()=>Jl,ServiceUnavailableException:()=>Yl,SortOrder:()=>Im,TagFilterSensitiveLog:()=>nd,TagResourceCommand:()=>pl,TagResourceRequestFilterSensitiveLog:()=>dh,ThrottledClientException:()=>Xl,UnauthorizedClientException:()=>Ql,UntagResourceCommand:()=>fa,UntagResourceRequestFilterSensitiveLog:()=>ch,UpdateChannelCommand:()=>yd,UpdateChannelFlowCommand:()=>Ed,UpdateChannelFlowRequestFilterSensitiveLog:()=>fh,UpdateChannelMessageCommand:()=>bd,UpdateChannelMessageRequestFilterSensitiveLog:()=>hh,UpdateChannelReadMarkerCommand:()=>_d,UpdateChannelRequestFilterSensitiveLog:()=>uh,__Client:()=>an,paginateListChannelBans:()=>U,paginateListChannelFlows:()=>K,paginateListChannelMemberships:()=>fe,paginateListChannelMembershipsForAppInstanceUser:()=>se,paginateListChannelMessages:()=>ae,paginateListChannelModerators:()=>Ce,paginateListChannels:()=>Ke,paginateListChannelsAssociatedWithChannelFlow:()=>Be,paginateListChannelsModeratedByAppInstanceUser:()=>Ne,paginateListSubChannels:()=>ft,paginateSearchChannels:()=>yt});const f=r(y=>{let T=y.httpHandler;return{setHttpHandler(D){T=D},httpHandler(){return T},updateHttpClientConfig(D,M){T.updateHttpClientConfig(D,M)},httpHandlerConfigs(){return T.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),h=r(y=>({httpHandler:y.httpHandler()}),"resolveHttpHandlerRuntimeConfig");var p;(function(y){y.HEADER="header",y.QUERY="query"})(p||(p={}));var m;(function(y){y.HEADER="header",y.QUERY="query"})(m||(m={}));var a;(function(y){y.HTTP="http",y.HTTPS="https"})(a||(a={}));var s;(function(y){y.MD5="md5",y.CRC32="crc32",y.CRC32C="crc32c",y.SHA1="sha1",y.SHA256="sha256"})(s||(s={}));const n=r(y=>{const T=[];return y.sha256!==void 0&&T.push({algorithmId:()=>s.SHA256,checksumConstructor:()=>y.sha256}),y.md5!=null&&T.push({algorithmId:()=>s.MD5,checksumConstructor:()=>y.md5}),{_checksumAlgorithms:T,addChecksumAlgorithm(D){this._checksumAlgorithms.push(D)},checksumAlgorithms(){return this._checksumAlgorithms}}},"checksum_getChecksumConfiguration"),e=r(y=>{const T={};return y.checksumAlgorithms().forEach(D=>{T[D.algorithmId()]=D.checksumConstructor()}),T},"checksum_resolveChecksumRuntimeConfig"),t=r(y=>({...getChecksumConfiguration(y)}),"getDefaultClientConfiguration"),i=r(y=>({...resolveChecksumRuntimeConfig(y)}),"resolveDefaultRuntimeConfig");var o;(function(y){y[y.HEADER=0]="HEADER",y[y.TRAILER=1]="TRAILER"})(o||(o={}));const c="__smithy_context";var g;(function(y){y.PROFILE="profile",y.SSO_SESSION="sso-session",y.SERVICES="services"})(g||(g={}));var S;(function(y){y.HTTP_0_9="http/0.9",y.HTTP_1_0="http/1.0",y.TDS_8_0="tds/8.0"})(S||(S={}));class u{constructor({name:T,kind:D=FieldPosition.HEADER,values:M=[]}){this.name=T,this.kind=D,this.values=M}add(T){this.values.push(T)}set(T){this.values=T}remove(T){this.values=this.values.filter(D=>D!==T)}toString(){return this.values.map(T=>T.includes(",")||T.includes(" ")?`"${T}"`:T).join(", ")}get(){return this.values}}r(u,"Field");class v{constructor(T){this.method=T.method||"GET",this.hostname=T.hostname||"localhost",this.port=T.port,this.query=T.query||{},this.headers=T.headers||{},this.body=T.body,this.protocol=T.protocol?T.protocol.slice(-1)!==":"?`${T.protocol}:`:T.protocol:"https:",this.path=T.path?T.path.charAt(0)!=="/"?`/${T.path}`:T.path:"/",this.username=T.username,this.password=T.password,this.fragment=T.fragment}static clone(T){const D=new v({...T,headers:{...T.headers}});return D.query&&(D.query=E(D.query)),D}static isInstance(T){if(!T)return!1;const D=T;return"method"in D&&"protocol"in D&&"hostname"in D&&"path"in D&&typeof D.query=="object"&&typeof D.headers=="object"}clone(){return v.clone(this)}}r(v,"httpRequest_HttpRequest");function E(y){return Object.keys(y).reduce((T,D)=>{const M=y[D];return{...T,[D]:Array.isArray(M)?[...M]:M}},{})}r(E,"cloneQuery");class b{constructor(T){this.statusCode=T.statusCode,this.reason=T.reason,this.headers=T.headers||{},this.body=T.body}static isInstance(T){if(!T)return!1;const D=T;return typeof D.statusCode=="number"&&typeof D.headers=="object"}}r(b,"HttpResponse");function _(y){return y}r(_,"resolveHostHeaderConfig");const C=r(y=>T=>async D=>{if(!v.isInstance(D.request))return T(D);const{request:M}=D,{handlerProtocol:H=""}=y.requestHandler.metadata||{};if(H.indexOf("h2")>=0&&!M.headers[":authority"])delete M.headers.host,M.headers[":authority"]=M.hostname+(M.port?":"+M.port:"");else if(!M.headers.host){let J=M.hostname;M.port!=null&&(J+=`:${M.port}`),M.headers.host=J}return T(D)},"hostHeaderMiddleware"),I={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},A=r(y=>({applyToStack:T=>{T.add(C(y),I)}}),"getHostHeaderPlugin"),w=r(()=>(y,T)=>async D=>{try{var M;const J=await y(D),{clientName:de,commandName:pe,logger:Oe,dynamoDbDocumentClientOptions:_e={}}=T,{overrideInputFilterSensitiveLog:Qe,overrideOutputFilterSensitiveLog:qe}=_e,St=Qe??T.inputFilterSensitiveLog,_t=qe??T.outputFilterSensitiveLog,{$metadata:dn,...kn}=J.output;return Oe==null||(M=Oe.info)===null||M===void 0||M.call(Oe,{clientName:de,commandName:pe,input:St(D.input),output:_t(kn),metadata:dn}),J}catch(J){var H;const{clientName:de,commandName:pe,logger:Oe,dynamoDbDocumentClientOptions:_e={}}=T,{overrideInputFilterSensitiveLog:Qe}=_e,qe=Qe??T.inputFilterSensitiveLog;throw Oe==null||(H=Oe.error)===null||H===void 0||H.call(Oe,{clientName:de,commandName:pe,input:qe(D.input),error:J,metadata:J.$metadata}),J}},"loggerMiddleware"),O={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},R=r(y=>({applyToStack:T=>{T.add(w(),O)}}),"getLoggerPlugin"),F="X-Amzn-Trace-Id",V="AWS_LAMBDA_FUNCTION_NAME",$="_X_AMZN_TRACE_ID",X=r(y=>T=>async D=>{const{request:M}=D;if(!v.isInstance(M)||y.runtime!=="node"||M.headers.hasOwnProperty(F))return T(D);const H={NODE_ENV:"production"}[V],J={NODE_ENV:"production"}[$],de=r(pe=>typeof pe=="string"&&pe.length>0,"nonEmptyString");return de(H)&&de(J)&&(M.headers[F]=J),T({...D,request:M})},"recursionDetectionMiddleware"),Y={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ne=r(y=>({applyToStack:T=>{T.add(X(y),Y)}}),"getRecursionDetectionPlugin");function ie(y){return{...y,customUserAgent:typeof y.customUserAgent=="string"?[[y.customUserAgent]]:y.customUserAgent}}r(ie,"resolveUserAgentConfig");class ge{constructor({size:T,params:D}){this.data=new Map,this.parameters=[],this.capacity=T??50,D&&(this.parameters=D)}get(T,D){const M=this.hash(T);if(M===!1)return D();if(!this.data.has(M)){if(this.data.size>this.capacity+10){const H=this.data.keys();let J=0;for(;;){const{value:de,done:pe}=H.next();if(this.data.delete(de),pe||++J>10)break}}this.data.set(M,D())}return this.data.get(M)}size(){return this.data.size}hash(T){let D="";const{parameters:M}=this;if(M.length===0)return!1;for(const H of M){const J=String(T[H]??"");if(J.includes("|;"))return!1;D+=J+"|;"}return D}}r(ge,"EndpointCache");const Ie=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),We=r(y=>Ie.test(y)||y.startsWith("[")&&y.endsWith("]"),"isIpAddress"),ct=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ae=r((y,T=!1)=>{if(!T)return ct.test(y);const D=y.split(".");for(const M of D)if(!Ae(M))return!1;return!0},"isValidHostLabel"),Fe={},Xe="endpoints";function Ge(y){return typeof y!="object"||y==null?y:"ref"in y?`$${Ge(y.ref)}`:"fn"in y?`${y.fn}(${(y.argv||[]).map(Ge).join(", ")})`:JSON.stringify(y,null,2)}r(Ge,"toDebugString");class it extends Error{constructor(T){super(T),this.name="EndpointError"}}r(it,"EndpointError");const Dt=r((y,T)=>y===T,"booleanEquals"),wt=r(y=>{const T=y.split("."),D=[];for(const M of T){const H=M.indexOf("[");if(H!==-1){if(M.indexOf("]")!==M.length-1)throw new it(`Path: '${y}' does not end with ']'`);const J=M.slice(H+1,-1);if(Number.isNaN(parseInt(J)))throw new it(`Invalid array index: '${J}' in path: '${y}'`);H!==0&&D.push(M.slice(0,H)),D.push(J)}else D.push(M)}return D},"getAttrPathList"),Pe=r((y,T)=>wt(T).reduce((D,M)=>{if(typeof D!="object")throw new it(`Index '${M}' in '${T}' not found in '${JSON.stringify(y)}'`);return Array.isArray(D)?D[parseInt(M)]:D[M]},y),"getAttr"),xe=r(y=>y!=null,"isSet"),et=r(y=>!y,"not"),rt={[a.HTTP]:80,[a.HTTPS]:443},sn={booleanEquals:Dt,getAttr:Pe,isSet:xe,isValidHostLabel:Ae,not:et,parseURL:r(y=>{const T=(()=>{try{if(y instanceof URL)return y;if(typeof y=="object"&&"hostname"in y){const{hostname:St,port:_t,protocol:dn="",path:kn="",query:un={}}=y,oi=new URL(`${dn}//${St}${_t?`:${_t}`:""}${kn}`);return oi.search=Object.entries(un).map(([Ai,io])=>`${Ai}=${io}`).join("&"),oi}return new URL(y)}catch{return null}})();if(!T)return console.error(`Unable to parse ${JSON.stringify(y)} as a whatwg URL.`),null;const D=T.href,{host:M,hostname:H,pathname:J,protocol:de,search:pe}=T;if(pe)return null;const Oe=de.slice(0,-1);if(!Object.values(a).includes(Oe))return null;const _e=We(H),Qe=D.includes(`${M}:${rt[Oe]}`)||typeof y=="string"&&y.includes(`${M}:${rt[Oe]}`),qe=`${M}${Qe?`:${rt[Oe]}`:""}`;return{scheme:Oe,authority:qe,path:J,normalizedPath:J.endsWith("/")?J:`${J}/`,isIp:_e}},"parseURL"),stringEquals:r((y,T)=>y===T,"stringEquals"),substring:r((y,T,D,M)=>T>=D||y.length<D?null:M?y.substring(y.length-D,y.length-T):y.substring(T,D),"substring"),uriEncode:r(y=>encodeURIComponent(y).replace(/[!*'()]/g,T=>`%${T.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode")},cn=r((y,T)=>{const D=[],M={...T.endpointParams,...T.referenceRecord};let H=0;for(;H<y.length;){const J=y.indexOf("{",H);if(J===-1){D.push(y.slice(H));break}D.push(y.slice(H,J));const de=y.indexOf("}",J);if(de===-1){D.push(y.slice(J));break}y[J+1]==="{"&&y[de+1]==="}"&&(D.push(y.slice(J+1,de)),H=de+2);const pe=y.substring(J+1,de);if(pe.includes("#")){const[Oe,_e]=pe.split("#");D.push(Pe(M[Oe],_e))}else D.push(M[pe]);H=de+1}return D.join("")},"evaluateTemplate"),Bt=r(({ref:y},T)=>({...T.endpointParams,...T.referenceRecord})[y],"getReferenceValue"),gn=r((y,T,D)=>{if(typeof y=="string")return cn(y,D);if(y.fn)return Ci(y,D);if(y.ref)return Bt(y,D);throw new it(`'${T}': ${String(y)} is not a string, function or reference.`)},"evaluateExpression"),Ci=r(({fn:y,argv:T},D)=>{const M=T.map(J=>["boolean","number"].includes(typeof J)?J:gn(J,"arg",D)),H=y.split(".");return H[0]in Fe&&H[1]!=null?Fe[H[0]][H[1]](...M):sn[y](...M)},"callFunction"),$n=r(({assign:y,...T},D)=>{var H,J;if(y&&y in D.referenceRecord)throw new it(`'${y}' is already defined in Reference Record.`);const M=Ci(T,D);return(J=(H=D.logger)==null?void 0:H.debug)==null||J.call(H,`${Xe} evaluateCondition: ${Ge(T)} = ${Ge(M)}`),{result:M===""?!0:!!M,...y!=null&&{toAssign:{name:y,value:M}}}},"evaluateCondition"),Sn=r((y=[],T)=>{var M,H;const D={};for(const J of y){const{result:de,toAssign:pe}=$n(J,{...T,referenceRecord:{...T.referenceRecord,...D}});if(!de)return{result:de};pe&&(D[pe.name]=pe.value,(H=(M=T.logger)==null?void 0:M.debug)==null||H.call(M,`${Xe} assign: ${pe.name} := ${Ge(pe.value)}`))}return{result:!0,referenceRecord:D}},"evaluateConditions"),nn=r((y,T)=>Object.entries(y).reduce((D,[M,H])=>({...D,[M]:H.map(J=>{const de=gn(J,"Header value entry",T);if(typeof de!="string")throw new it(`Header '${M}' value '${de}' is not a string`);return de})}),{}),"getEndpointHeaders"),Vt=r((y,T)=>{if(Array.isArray(y))return y.map(D=>Vt(D,T));switch(typeof y){case"string":return cn(y,T);case"object":if(y===null)throw new it(`Unexpected endpoint property: ${y}`);return Wn(y,T);case"boolean":return y;default:throw new it(`Unexpected endpoint property type: ${typeof y}`)}},"getEndpointProperty"),Wn=r((y,T)=>Object.entries(y).reduce((D,[M,H])=>({...D,[M]:Vt(H,T)}),{}),"getEndpointProperties"),Lt=r((y,T)=>{const D=gn(y,"Endpoint URL",T);if(typeof D=="string")try{return new URL(D)}catch(M){throw console.error(`Failed to construct URL with ${D}`,M),M}throw new it(`Endpoint URL must be a string, got ${typeof D}`)},"getEndpointUrl"),zt=r((y,T)=>{var Qe,qe;const{conditions:D,endpoint:M}=y,{result:H,referenceRecord:J}=Sn(D,T);if(!H)return;const de={...T,referenceRecord:{...T.referenceRecord,...J}},{url:pe,properties:Oe,headers:_e}=M;return(qe=(Qe=T.logger)==null?void 0:Qe.debug)==null||qe.call(Qe,`${Xe} Resolving endpoint from template: ${Ge(M)}`),{..._e!=null&&{headers:nn(_e,de)},...Oe!=null&&{properties:Wn(Oe,de)},url:Lt(pe,de)}},"evaluateEndpointRule"),It=r((y,T)=>{const{conditions:D,error:M}=y,{result:H,referenceRecord:J}=Sn(D,T);if(H)throw new it(gn(M,"Error",{...T,referenceRecord:{...T.referenceRecord,...J}}))},"evaluateErrorRule"),z=r((y,T)=>{const{conditions:D,rules:M}=y,{result:H,referenceRecord:J}=Sn(D,T);if(H)return Ve(M,{...T,referenceRecord:{...T.referenceRecord,...J}})},"evaluateTreeRule"),Ve=r((y,T)=>{for(const D of y)if(D.type==="endpoint"){const M=zt(D,T);if(M)return M}else if(D.type==="error")It(D,T);else if(D.type==="tree"){const M=z(D,T);if(M)return M}else throw new it(`Unknown endpoint rule: ${D}`);throw new it("Rules evaluation failed")},"evaluateRules"),He=r((y,T)=>{var _e,Qe,qe,St;const{endpointParams:D,logger:M}=T,{parameters:H,rules:J}=y;(Qe=(_e=T.logger)==null?void 0:_e.debug)==null||Qe.call(_e,`${Xe} Initial EndpointParams: ${Ge(D)}`);const de=Object.entries(H).filter(([,_t])=>_t.default!=null).map(([_t,dn])=>[_t,dn.default]);if(de.length>0)for(const[_t,dn]of de)D[_t]=D[_t]??dn;const pe=Object.entries(H).filter(([,_t])=>_t.required).map(([_t])=>_t);for(const _t of pe)if(D[_t]==null)throw new it(`Missing required parameter: '${_t}'`);const Oe=Ve(J,{endpointParams:D,logger:M,referenceRecord:{}});return(St=(qe=T.logger)==null?void 0:qe.debug)==null||St.call(qe,`${Xe} Resolved endpoint: ${Ge(Oe)}`),Oe},"resolveEndpoint"),Je=r(function(y){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const D of y.split("."))if(!Je(D))return!1;return!0}return!(!Ae(y)||y.length<3||y.length>63||y!==y.toLowerCase()||We(y))},"isVirtualHostableS3Bucket"),Ye=":",lt="/",le=r(y=>{const T=y.split(Ye);if(T.length<6)return null;const[D,M,H,J,de,...pe]=T;if(D!=="arn"||M===""||H===""||pe.join(Ye)==="")return null;const Oe=pe.map(_e=>_e.split(lt)).flat();return{partition:M,service:H,region:J,accountId:de,resourceId:Oe}},"parseArn");var Ue=d(1209174152),G=d.n(Ue);let Q=G(),ye="";const Ee=r(y=>{const{partitions:T}=Q;for(const M of T){const{regions:H,outputs:J}=M;for(const[de,pe]of Object.entries(H))if(de===y)return{...J,...pe}}for(const M of T){const{regionRegex:H,outputs:J}=M;if(new RegExp(H).test(y))return{...J}}const D=T.find(M=>M.id==="aws");if(!D)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...D.outputs}},"partition"),pt=r(function(y){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";Q=y,ye=T},"setPartitionInfo"),ze=r(()=>{pt(partitionsInfo,"")},"useDefaultPartitionInfo"),st=r(()=>ye,"getUserAgentPrefix"),me={isVirtualHostableS3Bucket:Je,parseArn:le,partition:Ee};Fe.aws=me;const Me="user-agent",k="x-amz-user-agent",Se=" ",be="/",we=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,ee=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,en="-",dt=r(y=>(T,D)=>async M=>{var H,J;const{request:de}=M;if(!v.isInstance(de))return T(M);const{headers:pe}=de,Oe=(D==null||(H=D.userAgent)===null||H===void 0?void 0:H.map(Ct))||[],_e=(await y.defaultUserAgentProvider()).map(Ct),Qe=(y==null||(J=y.customUserAgent)===null||J===void 0?void 0:J.map(Ct))||[],qe=st(),St=(qe?[qe]:[]).concat([..._e,...Oe,...Qe]).join(Se),_t=[..._e.filter(dn=>dn.startsWith("aws-sdk-")),...Qe].join(Se);return y.runtime!=="browser"?(_t&&(pe[k]=pe[k]?`${pe[Me]} ${_t}`:_t),pe[Me]=St):pe[k]=St,T({...M,request:de})},"userAgentMiddleware"),Ct=r(y=>{var T;const D=y[0].split(be).map(pe=>pe.replace(we,en)).join(be),M=(T=y[1])===null||T===void 0?void 0:T.replace(ee,en),H=D.indexOf(be),J=D.substring(0,H);let de=D.substring(H+1);return J==="api"&&(de=de.toLowerCase()),[J,de,M].filter(pe=>pe&&pe.length>0).reduce((pe,Oe,_e)=>{switch(_e){case 0:return Oe;case 1:return`${pe}/${Oe}`;default:return`${pe}#${Oe}`}},"")},"escapeUserAgent"),xn={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Qt=r(y=>({applyToStack:T=>{T.add(dt(y),xn)}}),"getUserAgentPlugin"),Xi=r((y,T,D)=>{if(T in y){if(y[T]==="true")return!0;if(y[T]==="false")return!1;throw new Error(`Cannot load ${D} "${T}". Expected "true" or "false", got ${y[T]}.`)}},"booleanSelector");var Pi;(function(y){y.ENV="env",y.CONFIG="shared config entry"})(Pi||(Pi={}));const Kn="AWS_USE_DUALSTACK_ENDPOINT",ni="use_dualstack_endpoint",Mn=!1,qn={environmentVariableSelector:y=>Xi(y,Kn,Pi.ENV),configFileSelector:y=>Xi(y,ni,Pi.CONFIG),default:!1},bi="AWS_USE_FIPS_ENDPOINT",xr="use_fips_endpoint",Zt=!1,Nt={environmentVariableSelector:y=>Xi(y,bi,Pi.ENV),configFileSelector:y=>Xi(y,xr,Pi.CONFIG),default:!1},On=r(y=>y[c]||(y[c]={}),"getSmithyContext"),_n=r(y=>{if(typeof y=="function")return y;const T=Promise.resolve(y);return()=>T},"normalizeProvider_normalizeProvider"),si=r(y=>{const{endpoint:T,urlParser:D}=y;return{...y,tls:y.tls??!0,endpoint:normalizeProvider(typeof T=="string"?D(T):T),isCustomEndpoint:!0,useDualstackEndpoint:normalizeProvider(y.useDualstackEndpoint??!1)}},"resolveCustomEndpointsConfig"),vi=r(y=>{const T=normalizeProvider(y.useDualstackEndpoint??!1),{endpoint:D,useFipsEndpoint:M,urlParser:H}=y;return{...y,tls:y.tls??!0,endpoint:D?normalizeProvider(typeof D=="string"?H(D):D):()=>getEndpointFromRegion({...y,useDualstackEndpoint:T,useFipsEndpoint:M}),isCustomEndpoint:!!D,useDualstackEndpoint:T}},"resolveEndpointsConfig"),Mi="AWS_REGION",ui="region",Ii={environmentVariableSelector:y=>y[Mi],configFileSelector:y=>y[ui],default:()=>{throw new Error("Region is missing")}},wi={preferredFile:"credentials"},Ui=r(y=>typeof y=="string"&&(y.startsWith("fips-")||y.endsWith("-fips")),"isFipsRegion"),ii=r(y=>Ui(y)?["fips-aws-global","aws-fips"].includes(y)?"us-east-1":y.replace(/fips-(dkr-|prod-)?|-fips/,""):y,"getRealRegion"),fr=r(y=>{const{region:T,useFipsEndpoint:D}=y;if(!T)throw new Error("Region is missing");return{...y,region:async()=>{if(typeof T=="string")return ii(T);const M=await T();return ii(M)},useFipsEndpoint:async()=>{const M=typeof T=="string"?T:await T();return Ui(M)?!0:typeof D!="function"?Promise.resolve(!!D):D()}}},"resolveRegionConfig");function Li(y){const T=new Map;for(const D of y)T.set(D.schemeId,D);return T}r(Li,"convertHttpAuthSchemesToMap");const Ar=r((y,T)=>(D,M)=>async H=>{var _e;const J=y.httpAuthSchemeProvider(await T.httpAuthSchemeParametersProvider(y,M,H.input)),de=Li(y.httpAuthSchemes),pe=On(M),Oe=[];for(const Qe of J){const qe=de.get(Qe.schemeId);if(!qe){Oe.push(`HttpAuthScheme \`${Qe.schemeId}\` was not enabled for this service.`);continue}const St=qe.identityProvider(await T.identityProviderConfigProvider(y));if(!St){Oe.push(`HttpAuthScheme \`${Qe.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:_t={},signingProperties:dn={}}=((_e=Qe.propertiesExtractor)==null?void 0:_e.call(Qe,y,M))||{};Qe.identityProperties=Object.assign(Qe.identityProperties||{},_t),Qe.signingProperties=Object.assign(Qe.signingProperties||{},dn),pe.selectedHttpAuthScheme={httpAuthOption:Qe,identity:await St(Qe.identityProperties),signer:qe.signer};break}if(!pe.selectedHttpAuthScheme)throw new Error(Oe.join(`
`));return D(H)},"httpAuthSchemeMiddleware_httpAuthSchemeMiddleware"),Zn=r(async y=>{const T=(y==null?void 0:y.Bucket)||"";if(typeof y.Bucket=="string"&&(y.Bucket=T.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),wn(T)){if(y.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!En(T)||T.indexOf(".")!==-1&&!String(y.Endpoint).startsWith("http:")||T.toLowerCase()!==T||T.length<3)&&(y.ForcePathStyle=!0);return y.DisableMultiRegionAccessPoints&&(y.disableMultiRegionAccessPoints=!0,y.DisableMRAP=!0),y},"resolveParamsForS3"),N=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,oe=/(\d+\.){3}\d+/,Re=/\.\./,nt=/\./,Pt=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,En=r(y=>N.test(y)&&!oe.test(y)&&!Re.test(y),"isDnsCompatibleBucketName"),wn=r(y=>{const[T,D,M,,,H]=y.split(":"),J=T==="arn"&&y.split(":").length>=6,de=Boolean(J&&D&&M&&H);if(J&&!de)throw new Error(`Invalid ARN: ${y} was an invalid ARN.`);return de},"isArnBucketName"),vn=r((y,T,D)=>{const M=r(async()=>{const H=D[y]??D[T];return typeof H=="function"?H():H},"configProvider");return y==="credentialScope"||T==="CredentialScope"?async()=>{const H=typeof D.credentials=="function"?await D.credentials():D.credentials;return(H==null?void 0:H.credentialScope)??(H==null?void 0:H.CredentialScope)}:y==="accountId"||T==="AccountId"?async()=>{const H=typeof D.credentials=="function"?await D.credentials():D.credentials;return(H==null?void 0:H.accountId)??(H==null?void 0:H.AccountId)}:y==="endpoint"||T==="endpoint"?async()=>{const H=await M();if(H&&typeof H=="object"){if("url"in H)return H.url.href;if("hostname"in H){const{protocol:J,hostname:de,port:pe,path:Oe}=H;return`${J}//${de}${pe?":"+pe:""}${Oe}`}}return H}:M},"createConfigValueProvider"),yn=r(async y=>{},"getEndpointFromConfig");function Rn(y){const T={};if(y=y.replace(/^\?/,""),y)for(const D of y.split("&")){let[M,H=null]=D.split("=");M=decodeURIComponent(M),H&&(H=decodeURIComponent(H)),M in T?Array.isArray(T[M])?T[M].push(H):T[M]=[T[M],H]:T[M]=H}return T}r(Rn,"parseQueryString");const Fn=r(y=>{if(typeof y=="string")return Fn(new URL(y));const{hostname:T,pathname:D,port:M,protocol:H,search:J}=y;let de;return J&&(de=Rn(J)),{hostname:T,port:M?parseInt(M):void 0,protocol:H,path:D,query:de}},"parseUrl"),yi=r(y=>typeof y=="object"?"url"in y?Fn(y.url):y:Fn(y),"toEndpointV1"),fi=r(async(y,T,D,M)=>{if(!D.endpoint){let de;D.serviceConfiguredEndpoint?de=await D.serviceConfiguredEndpoint():de=await yn(D.serviceId),de&&(D.endpoint=()=>Promise.resolve(yi(de)))}const H=await Wi(y,T,D);if(typeof D.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return D.endpointProvider(H,M)},"getEndpointFromInstructions"),Wi=r(async(y,T,D)=>{var J;const M={},H=((J=T==null?void 0:T.getEndpointParameterInstructions)==null?void 0:J.call(T))||{};for(const[de,pe]of Object.entries(H))switch(pe.type){case"staticContextParams":M[de]=pe.value;break;case"contextParams":M[de]=y[pe.name];break;case"clientContextParams":case"builtInParams":M[de]=await vn(pe.name,de,D)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(pe))}return Object.keys(H).length===0&&Object.assign(M,D),String(D.serviceId).toLowerCase()==="s3"&&await Zn(M),M},"resolveParams"),Zr=r(({config:y,instructions:T})=>(D,M)=>async H=>{var pe,Oe,_e;const J=await fi(H.input,{getEndpointParameterInstructions(){return T}},{...y},M);M.endpointV2=J,M.authSchemes=(pe=J.properties)==null?void 0:pe.authSchemes;const de=(Oe=M.authSchemes)==null?void 0:Oe[0];if(de){M.signing_region=de.signingRegion,M.signing_service=de.signingName;const Qe=On(M),qe=(_e=Qe==null?void 0:Qe.selectedHttpAuthScheme)==null?void 0:_e.httpAuthOption;qe&&(qe.signingProperties=Object.assign(qe.signingProperties||{},{signing_region:de.signingRegion,signingRegion:de.signingRegion,signing_service:de.signingName,signingName:de.signingName,signingRegionSet:de.signingRegionSet},de.properties))}return D({...H})},"endpointMiddleware"),gr=r((y,T)=>D=>async M=>{const{response:H}=await D(M);try{const J=await T(H,y);return{response:H,output:J}}catch(J){if(Object.defineProperty(J,"$response",{value:H}),!("$metadata"in J)){const de="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";J.message+=`
  `+de,typeof J.$responseBodyText<"u"&&J.$response&&(J.$response.body=J.$responseBodyText)}throw J}},"deserializerMiddleware"),Un=r((y,T)=>(D,M)=>async H=>{var pe;const J=(pe=M.endpointV2)!=null&&pe.url&&y.urlParser?async()=>y.urlParser(M.endpointV2.url):y.endpoint;if(!J)throw new Error("No valid endpoint provider available.");const de=await T(H.input,{...y,endpoint:J});return D({...H,request:de})},"serializerMiddleware"),hr={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ar={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function pn(y,T,D){return{applyToStack:M=>{M.add(gr(y,D),hr),M.add(Un(y,T),ar)}}}r(pn,"getSerdePlugin");const Sr={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ar.name},Pn=r((y,T)=>({applyToStack:D=>{D.addRelativeTo(Zr({config:y,instructions:T}),Sr)}}),"getEndpointPlugin"),so=r(y=>{const T=y.tls??!0,{endpoint:D}=y,M=D!=null?async()=>yi(await _n(D)()):void 0,J={...y,endpoint:M,tls:T,isCustomEndpoint:!!D,useDualstackEndpoint:_n(y.useDualstackEndpoint??!1),useFipsEndpoint:_n(y.useFipsEndpoint??!1)};let de;return J.serviceConfiguredEndpoint=async()=>(y.serviceId&&!de&&(de=yn(y.serviceId)),de),J},"resolveEndpointConfig"),Wr={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Sr.name},$r=r((y,{httpAuthSchemeParametersProvider:T,identityProviderConfigProvider:D})=>({applyToStack:M=>{M.addRelativeTo(Ar(y,{httpAuthSchemeParametersProvider:T,identityProviderConfigProvider:D}),Wr)}}),"getHttpAuthSchemeEndpointRuleSetPlugin"),yo={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:ar.name},ue=r((y,{httpAuthSchemeParametersProvider:T,identityProviderConfigProvider:D})=>({applyToStack:M=>{M.addRelativeTo(httpAuthSchemeMiddleware(y,{httpAuthSchemeParametersProvider:T,identityProviderConfigProvider:D}),yo)}}),"getHttpAuthSchemePlugin"),ve=r(y=>T=>{throw T},"defaultErrorHandler"),Le=r((y,T)=>{},"defaultSuccessHandler"),at=r(y=>(T,D)=>async M=>{if(!v.isInstance(M.request))return T(M);const J=On(D).selectedHttpAuthScheme;if(!J)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:de={}},identity:pe,signer:Oe}=J,_e=await T({...M,request:await Oe.sign(M.request,pe,de)}).catch((Oe.errorHandler||ve)(de));return(Oe.successHandler||Le)(_e.response,de),_e},"httpSigningMiddleware");var gt;(function(y){y.STANDARD="standard",y.ADAPTIVE="adaptive"})(gt||(gt={}));const Tt=3,rn=gt.STANDARD,bn=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Tn=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ln=["TimeoutError","RequestTimeout","RequestTimeoutException"],Vn=[500,502,503,504],Ut=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],hi=r(y=>y.$retryable!==void 0,"isRetryableByTrait"),An=r(y=>bn.includes(y.name),"isClockSkewError"),Fi=r(y=>{var T;return(T=y.$metadata)==null?void 0:T.clockSkewCorrected},"isClockSkewCorrectedError"),Qi=r(y=>{var T,D;return((T=y.$metadata)==null?void 0:T.httpStatusCode)===429||Tn.includes(y.name)||((D=y.$retryable)==null?void 0:D.throttling)==!0},"isThrottlingError"),Zi=r(y=>{var T;return Fi(y)||ln.includes(y.name)||Ut.includes((y==null?void 0:y.code)||"")||Vn.includes(((T=y.$metadata)==null?void 0:T.httpStatusCode)||0)},"isTransientError"),Hn=r(y=>{var T;if(((T=y.$metadata)==null?void 0:T.httpStatusCode)!==void 0){const D=y.$metadata.httpStatusCode;return 500<=D&&D<=599&&!Zi(y)}return!1},"isServerError");class Jn{constructor(T){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(T==null?void 0:T.beta)??.7,this.minCapacity=(T==null?void 0:T.minCapacity)??1,this.minFillRate=(T==null?void 0:T.minFillRate)??.5,this.scaleConstant=(T==null?void 0:T.scaleConstant)??.4,this.smooth=(T==null?void 0:T.smooth)??.8;const D=this.getCurrentTimeInSeconds();this.lastThrottleTime=D,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(T){if(this.enabled){if(this.refillTokenBucket(),T>this.currentCapacity){const D=(T-this.currentCapacity)/this.fillRate*1e3;await new Promise(M=>setTimeout(M,D))}this.currentCapacity=this.currentCapacity-T}}refillTokenBucket(){const T=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=T;return}const D=(T-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+D),this.lastTimestamp=T}updateClientSendingRate(T){let D;if(this.updateMeasuredRate(),Qi(T)){const H=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=H,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),D=this.cubicThrottle(H),this.enableTokenBucket()}else this.calculateTimeWindow(),D=this.cubicSuccess(this.getCurrentTimeInSeconds());const M=Math.min(D,2*this.measuredTxRate);this.updateTokenBucketRate(M)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(T){return this.getPrecise(T*this.beta)}cubicSuccess(T){return this.getPrecise(this.scaleConstant*Math.pow(T-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(T){this.refillTokenBucket(),this.fillRate=Math.max(T,this.minFillRate),this.maxCapacity=Math.max(T,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const T=this.getCurrentTimeInSeconds(),D=Math.floor(T*2)/2;if(this.requestCount++,D>this.lastTxRateBucket){const M=this.requestCount/(D-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(M*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=D}}getPrecise(T){return parseFloat(T.toFixed(8))}}r(Jn,"DefaultRateLimiter");const ai=100,Ri=20*1e3,Cr=500,Ur=500,li=5,Kr=10,Ji=1,Or="amz-sdk-invocation-id",xo="amz-sdk-request",Go=r(()=>{let y=ai;return{computeNextBackoffDelay:r(M=>Math.floor(Math.min(Ri,Math.random()*2**M*y)),"computeNextBackoffDelay"),setDelayBase:r(M=>{y=M},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),Po=r(({retryDelay:y,retryCount:T,retryCost:D})=>({getRetryCount:r(()=>T,"getRetryCount"),getRetryDelay:r(()=>Math.min(Ri,y),"getRetryDelay"),getRetryCost:r(()=>D,"getRetryCost")}),"createDefaultRetryToken");class ko{constructor(T){this.maxAttempts=T,this.mode=gt.STANDARD,this.capacity=Ur,this.retryBackoffStrategy=Go(),this.maxAttemptsProvider=typeof T=="function"?T:async()=>T}async acquireInitialRetryToken(T){return Po({retryDelay:ai,retryCount:0})}async refreshRetryTokenForRetry(T,D){const M=await this.getMaxAttempts();if(this.shouldRetry(T,D,M)){const H=D.errorType;this.retryBackoffStrategy.setDelayBase(H==="THROTTLING"?Cr:ai);const J=this.retryBackoffStrategy.computeNextBackoffDelay(T.getRetryCount()),de=D.retryAfterHint?Math.max(D.retryAfterHint.getTime()-Date.now()||0,J):J,pe=this.getCapacityCost(H);return this.capacity-=pe,Po({retryDelay:de,retryCount:T.getRetryCount()+1,retryCost:pe})}throw new Error("No retry token available")}recordSuccess(T){this.capacity=Math.max(Ur,this.capacity+(T.getRetryCost()??Ji))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Tt}`),Tt}}shouldRetry(T,D,M){return T.getRetryCount()+1<M&&this.capacity>=this.getCapacityCost(D.errorType)&&this.isRetryableError(D.errorType)}getCapacityCost(T){return T==="TRANSIENT"?Kr:li}isRetryableError(T){return T==="THROTTLING"||T==="TRANSIENT"}}r(ko,"StandardRetryStrategy");class Uo{constructor(T,D){this.maxAttemptsProvider=T,this.mode=gt.ADAPTIVE;const{rateLimiter:M}=D??{};this.rateLimiter=M??new Jn,this.standardRetryStrategy=new ko(T)}async acquireInitialRetryToken(T){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(T)}async refreshRetryTokenForRetry(T,D){return this.rateLimiter.updateClientSendingRate(D),this.standardRetryStrategy.refreshRetryTokenForRetry(T,D)}recordSuccess(T){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(T)}}r(Uo,"AdaptiveRetryStrategy");class To extends ko{constructor(T,D=ai){super(typeof T=="function"?T:async()=>T),typeof D=="number"?this.computeNextBackoffDelay=()=>D:this.computeNextBackoffDelay=D}async refreshRetryTokenForRetry(T,D){const M=await super.refreshRetryTokenForRetry(T,D);return M.getRetryDelay=()=>this.computeNextBackoffDelay(M.getRetryCount()),M}}r(To,"ConfiguredRetryStrategy");const ao={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Io;const Gr=new Uint8Array(16);function lo(){if(!Io&&(Io=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Io))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Io(Gr)}r(lo,"rng");const vr=[];for(let y=0;y<256;++y)vr.push((y+256).toString(16).slice(1));function co(y,T=0){return vr[y[T+0]]+vr[y[T+1]]+vr[y[T+2]]+vr[y[T+3]]+"-"+vr[y[T+4]]+vr[y[T+5]]+"-"+vr[y[T+6]]+vr[y[T+7]]+"-"+vr[y[T+8]]+vr[y[T+9]]+"-"+vr[y[T+10]]+vr[y[T+11]]+vr[y[T+12]]+vr[y[T+13]]+vr[y[T+14]]+vr[y[T+15]]}r(co,"unsafeStringify");function ws(y,T=0){const D=co(y,T);if(!validate(D))throw TypeError("Stringified UUID is invalid");return D}r(ws,"stringify");const Ds=null;function Yr(y,T,D){if(ao.randomUUID&&!T&&!y)return ao.randomUUID();y=y||{};const M=y.random||(y.rng||lo)();if(M[6]=M[6]&15|64,M[8]=M[8]&63|128,T){D=D||0;for(let H=0;H<16;++H)T[D+H]=M[H];return T}return co(M)}r(Yr,"v4");const Co=Yr,pr=r((y,T)=>{const D=y,M=(T==null?void 0:T.noRetryIncrement)??Ji,H=(T==null?void 0:T.retryCost)??li,J=(T==null?void 0:T.timeoutRetryCost)??Kr;let de=y;const pe=r(qe=>qe.name==="TimeoutError"?J:H,"getCapacityAmount"),Oe=r(qe=>pe(qe)<=de,"hasRetryTokens");return Object.freeze({hasRetryTokens:Oe,retrieveRetryTokens:r(qe=>{if(!Oe(qe))throw new Error("No retry token available");const St=pe(qe);return de-=St,St},"retrieveRetryTokens"),releaseRetryTokens:r(qe=>{de+=qe??M,de=Math.min(de,D)},"releaseRetryTokens")})},"getDefaultRetryQuota"),Mr=r((y,T)=>Math.floor(Math.min(Ri,Math.random()*2**T*y)),"defaultDelayDecider"),wr=r(y=>y?hi(y)||An(y)||Qi(y)||Zi(y):!1,"defaultRetryDecider"),jr=r(y=>y instanceof Error?y:y instanceof Object?Object.assign(new Error,y):typeof y=="string"?new Error(y):new Error(`AWS SDK error wrapper for ${y}`),"asSdkError");class Vr{constructor(T,D){this.maxAttemptsProvider=T,this.mode=gt.STANDARD,this.retryDecider=(D==null?void 0:D.retryDecider)??wr,this.delayDecider=(D==null?void 0:D.delayDecider)??Mr,this.retryQuota=(D==null?void 0:D.retryQuota)??pr(Ur)}shouldRetry(T,D,M){return D<M&&this.retryDecider(T)&&this.retryQuota.hasRetryTokens(T)}async getMaxAttempts(){let T;try{T=await this.maxAttemptsProvider()}catch{T=Tt}return T}async retry(T,D,M){let H,J=0,de=0;const pe=await this.getMaxAttempts(),{request:Oe}=D;for(v.isInstance(Oe)&&(Oe.headers[Or]=Co());;)try{v.isInstance(Oe)&&(Oe.headers[xo]=`attempt=${J+1}; max=${pe}`),M!=null&&M.beforeRequest&&await M.beforeRequest();const{response:_e,output:Qe}=await T(D);return M!=null&&M.afterRequest&&M.afterRequest(_e),this.retryQuota.releaseRetryTokens(H),Qe.$metadata.attempts=J+1,Qe.$metadata.totalRetryDelay=de,{response:_e,output:Qe}}catch(_e){const Qe=jr(_e);if(J++,this.shouldRetry(Qe,J,pe)){H=this.retryQuota.retrieveRetryTokens(Qe);const qe=this.delayDecider(Qi(Qe)?Cr:ai,J),St=rs(Qe.$response),_t=Math.max(St||0,qe);de+=_t,await new Promise(dn=>setTimeout(dn,_t));continue}throw Qe.$metadata||(Qe.$metadata={}),Qe.$metadata.attempts=J,Qe.$metadata.totalRetryDelay=de,Qe}}}r(Vr,"StandardRetryStrategy_StandardRetryStrategy");const rs=r(y=>{if(!b.isInstance(y))return;const T=Object.keys(y.headers).find(J=>J.toLowerCase()==="retry-after");if(!T)return;const D=y.headers[T],M=Number(D);return Number.isNaN(M)?new Date(D).getTime()-Date.now():M*1e3},"getDelayFromRetryAfterHeader");class q extends Vr{constructor(T,D){const{rateLimiter:M,...H}=D??{};super(T,H),this.rateLimiter=M??new Jn,this.mode=gt.ADAPTIVE}async retry(T,D){return super.retry(T,D,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:M=>{this.rateLimiter.updateClientSendingRate(M)}})}}r(q,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");const re="AWS_MAX_ATTEMPTS",he="max_attempts",Te={environmentVariableSelector:y=>{const T=y[re];if(!T)return;const D=parseInt(T);if(Number.isNaN(D))throw new Error(`Environment variable ${re} mast be a number, got "${T}"`);return D},configFileSelector:y=>{const T=y[he];if(!T)return;const D=parseInt(T);if(Number.isNaN(D))throw new Error(`Shared config file entry ${he} mast be a number, got "${T}"`);return D},default:Tt},ke=r(y=>{const{retryStrategy:T}=y,D=_n(y.maxAttempts??Tt);return{...y,maxAttempts:D,retryStrategy:async()=>T||(await _n(y.retryMode)()===gt.ADAPTIVE?new Uo(D):new ko(D))}},"resolveRetryConfig"),ot="AWS_RETRY_MODE",Ze="retry_mode",Mt={environmentVariableSelector:y=>y[ot],configFileSelector:y=>y[Ze],default:rn},Rt=r(()=>y=>async T=>{const{request:D}=T;return HttpRequest.isInstance(D)&&(delete D.headers[INVOCATION_ID_HEADER],delete D.headers[REQUEST_HEADER]),y(T)},"omitRetryHeadersMiddleware"),xt={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},kt=r(y=>({applyToStack:T=>{T.addRelativeTo(Rt(),xt)}}),"getOmitRetryHeadersPlugin"),Jt=r((y,T)=>{const D=[];if(y&&D.push(y),T)for(const M of T)D.push(M);return D},"getAllAliases"),Yt=r((y,T)=>`${y||"anonymous"}${T&&T.length>0?` (a.k.a. ${T.join(",")})`:""}`,"getMiddlewareNameWithAliases"),tn=r(()=>{let y=[],T=[],D=!1;const M=new Set,H=r(qe=>qe.sort((St,_t)=>mn[_t.step]-mn[St.step]||hn[_t.priority||"normal"]-hn[St.priority||"normal"]),"sort"),J=r(qe=>{let St=!1;const _t=r(dn=>{const kn=Jt(dn.name,dn.aliases);if(kn.includes(qe)){St=!0;for(const un of kn)M.delete(un);return!1}return!0},"filterCb");return y=y.filter(_t),T=T.filter(_t),St},"removeByName"),de=r(qe=>{let St=!1;const _t=r(dn=>{if(dn.middleware===qe){St=!0;for(const kn of Jt(dn.name,dn.aliases))M.delete(kn);return!1}return!0},"filterCb");return y=y.filter(_t),T=T.filter(_t),St},"removeByReference"),pe=r(qe=>{var St;return y.forEach(_t=>{qe.add(_t.middleware,{..._t})}),T.forEach(_t=>{qe.addRelativeTo(_t.middleware,{..._t})}),(St=qe.identifyOnResolve)==null||St.call(qe,Qe.identifyOnResolve()),qe},"cloneTo"),Oe=r(qe=>{const St=[];return qe.before.forEach(_t=>{_t.before.length===0&&_t.after.length===0?St.push(_t):St.push(...Oe(_t))}),St.push(qe),qe.after.reverse().forEach(_t=>{_t.before.length===0&&_t.after.length===0?St.push(_t):St.push(...Oe(_t))}),St},"expandRelativeMiddlewareList"),_e=r((qe=!1)=>{const St=[],_t=[],dn={};return y.forEach(un=>{const oi={...un,before:[],after:[]};for(const Ai of Jt(oi.name,oi.aliases))dn[Ai]=oi;St.push(oi)}),T.forEach(un=>{const oi={...un,before:[],after:[]};for(const Ai of Jt(oi.name,oi.aliases))dn[Ai]=oi;_t.push(oi)}),_t.forEach(un=>{if(un.toMiddleware){const oi=dn[un.toMiddleware];if(oi===void 0){if(qe)return;throw new Error(`${un.toMiddleware} is not found when adding ${Yt(un.name,un.aliases)} middleware ${un.relation} ${un.toMiddleware}`)}un.relation==="after"&&oi.after.push(un),un.relation==="before"&&oi.before.push(un)}}),H(St).map(Oe).reduce((un,oi)=>(un.push(...oi),un),[])},"getMiddlewareList"),Qe={add:(qe,St={})=>{const{name:_t,override:dn,aliases:kn}=St,un={step:"initialize",priority:"normal",middleware:qe,...St},oi=Jt(_t,kn);if(oi.length>0){if(oi.some(Ai=>M.has(Ai))){if(!dn)throw new Error(`Duplicate middleware name '${Yt(_t,kn)}'`);for(const Ai of oi){const io=y.findIndex(is=>{var hs;return is.name===Ai||((hs=is.aliases)==null?void 0:hs.some(Td=>Td===Ai))});if(io===-1)continue;const Br=y[io];if(Br.step!==un.step||un.priority!==Br.priority)throw new Error(`"${Yt(Br.name,Br.aliases)}" middleware with ${Br.priority} priority in ${Br.step} step cannot be overridden by "${Yt(_t,kn)}" middleware with ${un.priority} priority in ${un.step} step.`);y.splice(io,1)}}for(const Ai of oi)M.add(Ai)}y.push(un)},addRelativeTo:(qe,St)=>{const{name:_t,override:dn,aliases:kn}=St,un={middleware:qe,...St},oi=Jt(_t,kn);if(oi.length>0){if(oi.some(Ai=>M.has(Ai))){if(!dn)throw new Error(`Duplicate middleware name '${Yt(_t,kn)}'`);for(const Ai of oi){const io=T.findIndex(is=>{var hs;return is.name===Ai||((hs=is.aliases)==null?void 0:hs.some(Td=>Td===Ai))});if(io===-1)continue;const Br=T[io];if(Br.toMiddleware!==un.toMiddleware||Br.relation!==un.relation)throw new Error(`"${Yt(Br.name,Br.aliases)}" middleware ${Br.relation} "${Br.toMiddleware}" middleware cannot be overridden by "${Yt(_t,kn)}" middleware ${un.relation} "${un.toMiddleware}" middleware.`);T.splice(io,1)}}for(const Ai of oi)M.add(Ai)}T.push(un)},clone:()=>pe(tn()),use:qe=>{qe.applyToStack(Qe)},remove:qe=>typeof qe=="string"?J(qe):de(qe),removeByTag:qe=>{let St=!1;const _t=r(dn=>{const{tags:kn,name:un,aliases:oi}=dn;if(kn&&kn.includes(qe)){const Ai=Jt(un,oi);for(const io of Ai)M.delete(io);return St=!0,!1}return!0},"filterCb");return y=y.filter(_t),T=T.filter(_t),St},concat:qe=>{var _t;const St=pe(tn());return St.use(qe),St.identifyOnResolve(D||St.identifyOnResolve()||(((_t=qe.identifyOnResolve)==null?void 0:_t.call(qe))??!1)),St},applyToStack:pe,identify:()=>_e(!0).map(qe=>{const St=qe.step??qe.relation+" "+qe.toMiddleware;return Yt(qe.name,qe.aliases)+" - "+St}),identifyOnResolve(qe){return typeof qe=="boolean"&&(D=qe),D},resolve:(qe,St)=>{for(const _t of _e().map(dn=>dn.middleware).reverse())qe=_t(qe,St);return D&&console.log(Qe.identify()),qe}};return Qe},"constructStack"),mn={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},hn={high:3,normal:2,low:1};class an{constructor(T){this.config=T,this.middlewareStack=tn()}send(T,D,M){const H=typeof D!="function"?D:void 0,J=typeof D=="function"?D:M,de=H===void 0&&this.config.cacheMiddleware===!0;let pe;if(de){this.handlers||(this.handlers=new WeakMap);const Oe=this.handlers;Oe.has(T.constructor)?pe=Oe.get(T.constructor):(pe=T.resolveMiddleware(this.middlewareStack,this.config,H),Oe.set(T.constructor,pe))}else delete this.handlers,pe=T.resolveMiddleware(this.middlewareStack,this.config,H);if(J)pe(T).then(Oe=>J(null,Oe.output),Oe=>J(Oe)).catch(()=>{});else return pe(T).then(Oe=>Oe.output)}destroy(){var T,D,M;(M=(D=(T=this.config)==null?void 0:T.requestHandler)==null?void 0:D.destroy)==null||M.call(D),delete this.handlers}}r(an,"Client");const $t={},Bn=new Array(64);for(let y=0,T="A".charCodeAt(0),D="Z".charCodeAt(0);y+T<=D;y++){const M=String.fromCharCode(y+T);$t[M]=y,Bn[y]=M}for(let y=0,T="a".charCodeAt(0),D="z".charCodeAt(0);y+T<=D;y++){const M=String.fromCharCode(y+T),H=y+26;$t[M]=H,Bn[H]=M}for(let y=0;y<10;y++){$t[y.toString(10)]=y+52;const T=y.toString(10),D=y+52;$t[T]=D,Bn[D]=T}$t["+"]=62,Bn[62]="+",$t["/"]=63,Bn[63]="/";const Ei=6,Bi=8,qi=63,Et=r(y=>{let T=y.length/4*3;y.slice(-2)==="=="?T-=2:y.slice(-1)==="="&&T--;const D=new ArrayBuffer(T),M=new DataView(D);for(let H=0;H<y.length;H+=4){let J=0,de=0;for(let _e=H,Qe=H+3;_e<=Qe;_e++)if(y[_e]!=="="){if(!(y[_e]in $t))throw new TypeError(`Invalid character ${y[_e]} in base64 string.`);J|=$t[y[_e]]<<(Qe-_e)*Ei,de+=Ei}else J>>=Ei;const pe=H/4*3;J>>=de%Bi;const Oe=Math.floor(de/Bi);for(let _e=0;_e<Oe;_e++){const Qe=(Oe-_e-1)*Bi;M.setUint8(pe+_e,(J&255<<Qe)>>Qe)}}return new Uint8Array(D)},"fromBase64"),Vi=r(y=>new TextEncoder().encode(y),"fromUtf8");function Hi(y){let T;typeof y=="string"?T=Vi(y):T=y;const D=typeof T=="object"&&typeof T.length=="number",M=typeof T=="object"&&typeof T.byteOffset=="number"&&typeof T.byteLength=="number";if(!D&&!M)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let H="";for(let J=0;J<T.length;J+=3){let de=0,pe=0;for(let _e=J,Qe=Math.min(J+3,T.length);_e<Qe;_e++)de|=T[_e]<<(Qe-_e-1)*Bi,pe+=Bi;const Oe=Math.ceil(pe/Ei);de<<=Oe*Ei-pe;for(let _e=1;_e<=Oe;_e++){const Qe=(Oe-_e)*Ei;H+=Bn[(de&qi<<Qe)>>Qe]}H+="==".slice(0,4-Oe)}return H}r(Hi,"toBase64_browser_toBase64");const Ti=r(y=>{if(typeof y=="string")return y;if(typeof y!="object"||typeof y.byteOffset!="number"||typeof y.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(y)},"toUtf8_browser_toUtf8");function Rr(y,T="utf-8"){return T==="base64"?Hi(y):Ti(y)}r(Rr,"transformToString");function uo(y,T){return T==="base64"?Ir.mutate(Et(y)):Ir.mutate(Vi(y))}r(uo,"transformFromString");class Ir extends Uint8Array{static fromString(T,D="utf-8"){switch(typeof T){case"string":return uo(T,D);default:throw new Error(`Unsupported conversion from ${typeof T} to Uint8ArrayBlobAdapter.`)}}static mutate(T){return Object.setPrototypeOf(T,Ir.prototype),T}transformToString(T="utf-8"){return Rr(this,T)}}r(Ir,"Uint8ArrayBlobAdapter");const qr=r(y=>encodeURIComponent(y).replace(/[!'()*]/g,eo),"escapeUri"),eo=r(y=>`%${y.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode");function Vs(y){const T=[];for(let D of Object.keys(y).sort()){const M=y[D];if(D=qr(D),Array.isArray(M))for(let H=0,J=M.length;H<J;H++)T.push(`${D}=${qr(M[H])}`);else{let H=D;(M||typeof M=="string")&&(H+=`=${qr(M)}`),T.push(H)}}return T.join("&")}r(Vs,"buildQueryString");function Hs(y=0){return new Promise((T,D)=>{y&&setTimeout(()=>{const M=new Error(`Request did not complete within ${y} ms`);M.name="TimeoutError",D(M)},y)})}r(Hs,"requestTimeout");const Pr={supported:void 0};class ps{static create(T){return typeof(T==null?void 0:T.handle)=="function"?T:new ps(T)}constructor(T){typeof T=="function"?this.configProvider=T().then(D=>D||{}):(this.config=T??{},this.configProvider=Promise.resolve(this.config)),Pr.supported===void 0&&(Pr.supported=Boolean(typeof Request<"u"&&"keepalive"in new Request("https://[::1]")))}destroy(){}async handle(T,{abortSignal:D}={}){var oi;this.config||(this.config=await this.configProvider);const M=this.config.requestTimeout,H=this.config.keepAlive===!0,J=this.config.credentials;if(D!=null&&D.aborted){const Ai=new Error("Request aborted");return Ai.name="AbortError",Promise.reject(Ai)}let de=T.path;const pe=Vs(T.query||{});pe&&(de+=`?${pe}`),T.fragment&&(de+=`#${T.fragment}`);let Oe="";if(T.username!=null||T.password!=null){const Ai=T.username??"",io=T.password??"";Oe=`${Ai}:${io}@`}const{port:_e,method:Qe}=T,qe=`${T.protocol}//${Oe}${T.hostname}${_e?`:${_e}`:""}${de}`,St=Qe==="GET"||Qe==="HEAD"?void 0:T.body,_t={body:St,headers:new Headers(T.headers),method:Qe,credentials:J};(oi=this.config)!=null&&oi.cache&&(_t.cache=this.config.cache),St&&(_t.duplex="half"),typeof AbortController<"u"&&(_t.signal=D),Pr.supported&&(_t.keepalive=H),typeof this.config.requestInit=="function"&&Object.assign(_t,this.config.requestInit(T));let dn=r(()=>{},"removeSignalEventListener");const kn=new Request(qe,_t),un=[fetch(kn).then(Ai=>{const io=Ai.headers,Br={};for(const hs of io.entries())Br[hs[0]]=hs[1];return Ai.body!=null?{response:new b({headers:Br,reason:Ai.statusText,statusCode:Ai.status,body:Ai.body})}:Ai.blob().then(hs=>({response:new b({headers:Br,reason:Ai.statusText,statusCode:Ai.status,body:hs})}))}),Hs(M)];return D&&un.push(new Promise((Ai,io)=>{const Br=r(()=>{const is=new Error("Request aborted");is.name="AbortError",io(is)},"onAbort");if(typeof D.addEventListener=="function"){const is=D;is.addEventListener("abort",Br,{once:!0}),dn=r(()=>is.removeEventListener("abort",Br),"removeSignalEventListener")}else D.onabort=Br})),Promise.race(un).finally(dn)}updateHttpClientConfig(T,D){this.config=void 0,this.configProvider=this.configProvider.then(M=>(M[T]=D,M))}httpHandlerConfigs(){return this.config??{}}}r(ps,"FetchHttpHandler");const Ws=r(y=>typeof Blob=="function"&&y instanceof Blob?os(y):Jo(y),"stream_collector_streamCollector");async function os(y){const T=await As(y),D=Et(T);return new Uint8Array(D)}r(os,"collectBlob");async function Jo(y){const T=[],D=y.getReader();let M=!1,H=0;for(;!M;){const{done:pe,value:Oe}=await D.read();Oe&&(T.push(Oe),H+=Oe.length),M=pe}const J=new Uint8Array(H);let de=0;for(const pe of T)J.set(pe,de),de+=pe.length;return J}r(Jo,"collectStream");function As(y){return new Promise((T,D)=>{const M=new FileReader;M.onloadend=()=>{if(M.readyState!==2)return D(new Error("Reader aborted too early"));const H=M.result??"",J=H.indexOf(","),de=J>-1?J+1:H.length;T(H.substring(de))},M.onabort=()=>D(new Error("Read aborted")),M.onerror=()=>D(M.error),M.readAsDataURL(y)})}r(As,"readToBase64");const ms={},No={};for(let y=0;y<256;y++){let T=y.toString(16).toLowerCase();T.length===1&&(T=`0${T}`),ms[y]=T,No[T]=y}function Yo(y){if(y.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const T=new Uint8Array(y.length/2);for(let D=0;D<y.length;D+=2){const M=y.slice(D,D+2).toLowerCase();if(M in No)T[D/2]=No[M];else throw new Error(`Cannot decode unrecognized sequence ${M} as hexadecimal`)}return T}r(Yo,"fromHex");function wo(y){let T="";for(let D=0;D<y.byteLength;D++)T+=ms[y[D]];return T}r(wo,"dist_es_toHex");const Gs="The stream has already been transformed.",Ld=r(y=>{var H,J;if(!oa(y)&&!isReadableStream(y)){const de=((J=(H=y==null?void 0:y.__proto__)==null?void 0:H.constructor)==null?void 0:J.name)||y;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${de}`)}let T=!1;const D=r(async()=>{if(T)throw new Error(Gs);return T=!0,await streamCollector(y)},"transformToByteArray"),M=r(de=>{if(typeof de.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return de.stream()},"blobToWebStream");return Object.assign(y,{transformToByteArray:D,transformToString:async de=>{const pe=await D();if(de==="base64")return toBase64(pe);if(de==="hex")return toHex(pe);if(de===void 0||de==="utf8"||de==="utf-8")return toUtf8(pe);if(typeof TextDecoder=="function")return new TextDecoder(de).decode(pe);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(T)throw new Error(Gs);if(T=!0,oa(y))return M(y);if(isReadableStream(y))return y;throw new Error(`Cannot transform payload to web stream, got ${y}`)}})},"sdkStreamMixin"),oa=r(y=>typeof Blob=="function"&&y instanceof Blob,"isBlobInstance"),Do=r(async(y=new Uint8Array,T)=>{if(y instanceof Uint8Array)return Ir.mutate(y);if(!y)return Ir.mutate(new Uint8Array);const D=T.streamCollector(y);return Ir.mutate(await D)},"collect_stream_body_collectBody");class Gn{constructor(){this.middlewareStack=tn()}static classBuilder(){return new ss}resolveMiddlewareWithContext(T,D,M,{middlewareFn:H,clientName:J,commandName:de,inputFilterSensitiveLog:pe,outputFilterSensitiveLog:Oe,smithyContext:_e,additionalContext:Qe,CommandCtor:qe}){for(const un of H.bind(this)(qe,T,D,M))this.middlewareStack.use(un);const St=T.concat(this.middlewareStack),{logger:_t}=D,dn={logger:_t,clientName:J,commandName:de,inputFilterSensitiveLog:pe,outputFilterSensitiveLog:Oe,[c]:{commandInstance:this,..._e},...Qe},{requestHandler:kn}=D;return St.resolve(un=>kn.handle(un.request,M||{}),dn)}}r(Gn,"Command");class ss{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=T=>T,this._outputFilterSensitiveLog=T=>T,this._serializer=null,this._deserializer=null}init(T){this._init=T}ep(T){return this._ep=T,this}m(T){return this._middlewareFn=T,this}s(T,D,M={}){return this._smithyContext={service:T,operation:D,...M},this}c(T={}){return this._additionalContext=T,this}n(T,D){return this._clientName=T,this._commandName=D,this}f(T=M=>M,D=M=>M){return this._inputFilterSensitiveLog=T,this._outputFilterSensitiveLog=D,this}ser(T){return this._serializer=T,this}de(T){return this._deserializer=T,this}build(){const T=this;let D;return D=r(class extends Gn{static getEndpointParameterInstructions(){return T._ep}constructor(...[M]){super(),this.serialize=T._serializer,this.deserialize=T._deserializer,this.input=M??{},T._init(this)}resolveMiddleware(M,H,J){return this.resolveMiddlewareWithContext(M,H,J,{CommandCtor:D,middlewareFn:T._middlewareFn,clientName:T._clientName,commandName:T._commandName,inputFilterSensitiveLog:T._inputFilterSensitiveLog,outputFilterSensitiveLog:T._outputFilterSensitiveLog,smithyContext:T._smithyContext,additionalContext:T._additionalContext})}},"CommandRef")}}r(ss,"ClassBuilder");const Yn="***SensitiveInformation***",ma=r((y,T)=>{for(const D of Object.keys(y)){const M=y[D],H=r(async function(de,pe,Oe){const _e=new M(de);if(typeof pe=="function")this.send(_e,pe);else if(typeof Oe=="function"){if(typeof pe!="object")throw new Error(`Expected http options but got ${typeof pe}`);this.send(_e,pe||{},Oe)}else return this.send(_e,pe)},"methodImpl"),J=(D[0].toLowerCase()+D.slice(1)).replace(/Command$/,"");T.prototype[J]=H}},"createAggregatedClient"),Os=r(y=>{switch(y){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${y}"`)}},"parseBoolean"),ga=r(y=>{if(y!=null){if(typeof y=="number"){if((y===0||y===1)&&zn.warn(Cn(`Expected boolean, got ${typeof y}: ${y}`)),y===0)return!1;if(y===1)return!0}if(typeof y=="string"){const T=y.toLowerCase();if((T==="false"||T==="true")&&zn.warn(Cn(`Expected boolean, got ${typeof y}: ${y}`)),T==="false")return!1;if(T==="true")return!0}if(typeof y=="boolean")return y;throw new TypeError(`Expected boolean, got ${typeof y}: ${y}`)}},"expectBoolean"),kr=r(y=>{if(y!=null){if(typeof y=="string"){const T=parseFloat(y);if(!Number.isNaN(T))return String(T)!==String(y)&&zn.warn(Cn(`Expected number but observed string: ${y}`)),T}if(typeof y=="number")return y;throw new TypeError(`Expected number, got ${typeof y}: ${y}`)}},"expectNumber"),Tl=Math.ceil(2**127*(2-2**-23)),js=r(y=>{const T=kr(y);if(T!==void 0&&!Number.isNaN(T)&&T!==1/0&&T!==-1/0&&Math.abs(T)>Tl)throw new TypeError(`Expected 32-bit float, got ${y}`);return T},"expectFloat32"),zs=r(y=>{if(y!=null){if(Number.isInteger(y)&&!Number.isNaN(y))return y;throw new TypeError(`Expected integer, got ${typeof y}: ${y}`)}},"expectLong"),sa=null,aa=r(y=>gs(y,32),"expectInt32"),la=r(y=>gs(y,16),"expectShort"),Xo=r(y=>gs(y,8),"expectByte"),gs=r((y,T)=>{const D=zs(y);if(D!==void 0&&xa(D,T)!==D)throw new TypeError(`Expected ${T}-bit integer, got ${y}`);return D},"expectSizedInt"),xa=r((y,T)=>{switch(T){case 32:return Int32Array.of(y)[0];case 16:return Int16Array.of(y)[0];case 8:return Int8Array.of(y)[0]}},"castInt"),jn=r((y,T)=>{if(y==null)throw T?new TypeError(`Expected a non-null value for ${T}`):new TypeError("Expected a non-null value");return y},"expectNonNull"),ki=r(y=>{if(y==null)return;if(typeof y=="object"&&!Array.isArray(y))return y;const T=Array.isArray(y)?"array":typeof y;throw new TypeError(`Expected object, got ${T}: ${y}`)},"expectObject"),on=r(y=>{if(y!=null){if(typeof y=="string")return y;if(["boolean","number","bigint"].includes(typeof y))return zn.warn(Cn(`Expected string, got ${typeof y}: ${y}`)),String(y);throw new TypeError(`Expected string, got ${typeof y}: ${y}`)}},"expectString"),Cl=r(y=>{if(y==null)return;const T=ki(y),D=Object.entries(T).filter(([,M])=>M!=null).map(([M])=>M);if(D.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(D.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${D} were not null.`);return T},"expectUnion"),Ua=r(y=>kr(typeof y=="string"?Qo(y):y),"strictParseDouble"),Va=null,Fd=r(y=>js(typeof y=="string"?Qo(y):y),"parse_utils_strictParseFloat32"),Ha=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Qo=r(y=>{const T=y.match(Ha);if(T===null||T[0].length!==y.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(y)},"parseNumber"),Il=r(y=>typeof y=="string"?Wa(y):kr(y),"limitedParseDouble"),$s=null,Bd=null,wl=r(y=>typeof y=="string"?Wa(y):js(y),"limitedParseFloat32"),Wa=r(y=>{switch(y){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${y}`)}},"parseFloatString"),Ga=r(y=>zs(typeof y=="string"?Qo(y):y),"strictParseLong"),Sa=null,mt=r(y=>aa(typeof y=="string"?Qo(y):y),"strictParseInt32"),At=r(y=>la(typeof y=="string"?Qo(y):y),"parse_utils_strictParseShort"),jt=r(y=>Xo(typeof y=="string"?Qo(y):y),"parse_utils_strictParseByte"),Cn=r(y=>String(new TypeError(y).stack||y).split(`
`).slice(0,5).filter(T=>!T.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),zn={warn:console.warn},Di=null,pi=null;function mi(y){const T=y.getUTCFullYear(),D=y.getUTCMonth(),M=y.getUTCDay(),H=y.getUTCDate(),J=y.getUTCHours(),de=y.getUTCMinutes(),pe=y.getUTCSeconds(),Oe=H<10?`0${H}`:`${H}`,_e=J<10?`0${J}`:`${J}`,Qe=de<10?`0${de}`:`${de}`,qe=pe<10?`0${pe}`:`${pe}`;return`${Di[M]}, ${Oe} ${pi[D]} ${T} ${_e}:${Qe}:${qe} GMT`}r(mi,"dateToUtcString");const di=null,er=r(y=>{if(y==null)return;if(typeof y!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const T=di.exec(y);if(!T)throw new TypeError("Invalid RFC-3339 date-time value");const[D,M,H,J,de,pe,Oe,_e]=T,Qe=strictParseShort(Xr(M)),qe=Oo(H,"month",1,12),St=Oo(J,"day",1,31);return Ss(Qe,qe,St,{hours:de,minutes:pe,seconds:Oe,fractionalMilliseconds:_e})},"parseRfc3339DateTime"),Hr=null,xi=r(y=>{if(y==null)return;if(typeof y!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const T=Hr.exec(y);if(!T)throw new TypeError("Invalid RFC-3339 date-time value");const[D,M,H,J,de,pe,Oe,_e,Qe]=T,qe=strictParseShort(Xr(M)),St=Oo(H,"month",1,12),_t=Oo(J,"day",1,31),dn=Ss(qe,St,_t,{hours:de,minutes:pe,seconds:Oe,fractionalMilliseconds:_e});return Qe.toUpperCase()!="Z"&&dn.setTime(dn.getTime()-mr(Qe)),dn},"parseRfc3339DateTimeWithOffset"),Er=null,fo=null,Ao=null,ho=r(y=>{if(y==null)return;if(typeof y!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let T=Er.exec(y);if(T){const[D,M,H,J,de,pe,Oe,_e]=T;return Ss(strictParseShort(Xr(J)),Ks(H),Oo(M,"day",1,31),{hours:de,minutes:pe,seconds:Oe,fractionalMilliseconds:_e})}if(T=fo.exec(y),T){const[D,M,H,J,de,pe,Oe,_e]=T;return as(Ss(Ms(J),Ks(H),Oo(M,"day",1,31),{hours:de,minutes:pe,seconds:Oe,fractionalMilliseconds:_e}))}if(T=Ao.exec(y),T){const[D,M,H,J,de,pe,Oe,_e]=T;return Ss(strictParseShort(Xr(_e)),Ks(M),Oo(H.trimLeft(),"day",1,31),{hours:J,minutes:de,seconds:pe,fractionalMilliseconds:Oe})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),Nr=r(y=>{if(y==null)return;let T;if(typeof y=="number")T=y;else if(typeof y=="string")T=Ua(y);else if(typeof y=="object"&&y.tag===1)T=y.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(T)||T===1/0||T===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(T*1e3))},"parseEpochTimestamp"),Ss=r((y,T,D,M)=>{const H=T-1;return va(y,H,D),new Date(Date.UTC(y,H,D,Oo(M.hours,"hour",0,23),Oo(M.minutes,"minute",0,59),Oo(M.seconds,"seconds",0,60),rr(M.fractionalMilliseconds)))},"buildDate"),Ms=r(y=>{const T=new Date().getUTCFullYear(),D=Math.floor(T/100)*100+strictParseShort(Xr(y));return D<T?D+100:D},"parseTwoDigitYear"),Zo=null,as=r(y=>y.getTime()-new Date().getTime()>Zo?new Date(Date.UTC(y.getUTCFullYear()-100,y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds())):y,"adjustRfc850Year"),Ks=r(y=>{const T=pi.indexOf(y);if(T<0)throw new TypeError(`Invalid month: ${y}`);return T+1},"parseMonthByShortName"),Rs=null,va=r((y,T,D)=>{let M=Rs[T];if(T===1&&Ps(y)&&(M=29),D>M)throw new TypeError(`Invalid day for ${pi[T]} in ${y}: ${D}`)},"validateDayOfMonth"),Ps=r(y=>y%4===0&&(y%100!==0||y%400===0),"isLeapYear"),Oo=r((y,T,D,M)=>{const H=strictParseByte(Xr(y));if(H<D||H>M)throw new TypeError(`${T} must be between ${D} and ${M}, inclusive`);return H},"parseDateValue"),rr=r(y=>y==null?0:strictParseFloat32("0."+y)*1e3,"parseMilliseconds"),mr=r(y=>{const T=y[0];let D=1;if(T=="+")D=1;else if(T=="-")D=-1;else throw new TypeError(`Offset direction, ${T}, must be "+" or "-"`);const M=Number(y.substring(1,3)),H=Number(y.substring(4,6));return D*(M*60+H)*60*1e3},"parseOffsetToMilliseconds"),Xr=r(y=>{let T=0;for(;T<y.length-1&&y.charAt(T)==="0";)T++;return T===0?y:y.slice(T)},"stripLeadingZeroes");class vs extends Error{constructor(T){super(T.message),Object.setPrototypeOf(this,vs.prototype),this.name=T.name,this.$fault=T.$fault,this.$metadata=T.$metadata}}r(vs,"ServiceException");const jo=r((y,T={})=>{Object.entries(T).filter(([,M])=>M!==void 0).forEach(([M,H])=>{(y[M]==null||y[M]==="")&&(y[M]=H)});const D=y.message||y.Message||"UnknownError";return y.message=D,delete y.Message,y},"decorateServiceException"),gc=r(({output:y,parsedBody:T,exceptionCtor:D,errorCode:M})=>{const H=vc(y),J=H.httpStatusCode?H.httpStatusCode+"":void 0,de=new D({name:(T==null?void 0:T.code)||(T==null?void 0:T.Code)||M||J||"UnknownError",$fault:"client",$metadata:H});throw jo(de,T)},"throwDefaultError"),Sc=r(y=>({output:T,parsedBody:D,errorCode:M})=>{gc({output:T,parsedBody:D,exceptionCtor:y,errorCode:M})},"withBaseException"),vc=r(y=>({httpStatusCode:y.statusCode,requestId:y.headers["x-amzn-requestid"]??y.headers["x-amzn-request-id"]??y.headers["x-amz-request-id"],extendedRequestId:y.headers["x-amz-id-2"],cfId:y.headers["x-amz-cf-id"]}),"deserializeMetadata"),yc=r(y=>{switch(y){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),Ec=r(y=>{const T=[];for(const D in s){const M=s[D];y[M]!==void 0&&T.push({algorithmId:()=>M,checksumConstructor:()=>y[M]})}return{_checksumAlgorithms:T,addChecksumAlgorithm(D){this._checksumAlgorithms.push(D)},checksumAlgorithms(){return this._checksumAlgorithms}}},"extensions_checksum_getChecksumConfiguration"),bc=r(y=>{const T={};return y.checksumAlgorithms().forEach(D=>{T[D.algorithmId()]=D.checksumConstructor()}),T},"extensions_checksum_resolveChecksumRuntimeConfig"),_c=r(y=>{let T=y.retryStrategy;return{setRetryStrategy(D){T=D},retryStrategy(){return T}}},"getRetryConfiguration"),Tc=r(y=>{const T={};return T.retryStrategy=y.retryStrategy(),T},"resolveRetryRuntimeConfig"),Cc=r(y=>({...Ec(y),..._c(y)}),"getDefaultExtensionConfiguration"),Ou=null,Ic=r(y=>({...bc(y),...Tc(y)}),"defaultExtensionConfiguration_resolveDefaultRuntimeConfig"),Yi=r(y=>y!=null,"isSerializableHeaderValue"),Dl=r(function(){const y=Object.getPrototypeOf(this).constructor,T=Function.bind.apply(String,[null,...arguments]),D=new T;return Object.setPrototypeOf(D,y.prototype),D},"StringWrapper");Dl.prototype=Object.create(String.prototype,{constructor:{value:Dl,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Dl,String);class ya extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(T){return T instanceof ya?T:T instanceof String||typeof T=="string"?new ya(T):new ya(JSON.stringify(T))}}r(ya,"LazyJsonString");class Al{trace(){}debug(){}info(){}warn(){}error(){}}r(Al,"NoOpLogger");function Ht(y,T,D){let M,H,J;if(typeof T>"u"&&typeof D>"u")M={},J=y;else{if(M=y,typeof T=="function")return H=T,J=D,wc(M,H,J);J=T}for(const de of Object.keys(J)){if(!Array.isArray(J[de])){M[de]=J[de];continue}ja(M,null,J,de)}return M}r(Ht,"map");const Mu=r(y=>{const T={};for(const[D,M]of Object.entries(y||{}))T[D]=[,M];return T},"convertMap"),Dn=r((y,T)=>{const D={};for(const M in T)ja(D,y,T,M);return D},"take"),wc=r((y,T,D)=>Ht(y,Object.entries(D).reduce((M,[H,J])=>(Array.isArray(J)?M[H]=J:typeof J=="function"?M[H]=[T,J()]:M[H]=[T,J],M),{})),"mapWithFilter"),ja=r((y,T,D,M)=>{if(T!==null){let de=D[M];typeof de=="function"&&(de=[,de]);const[pe=Ol,Oe=xd,_e=M]=de;(typeof pe=="function"&&pe(T[_e])||typeof pe!="function"&&pe)&&(y[M]=Oe(T[_e]));return}let[H,J]=D[M];if(typeof J=="function"){let de;const pe=H===void 0&&(de=J())!=null,Oe=typeof H=="function"&&!!H(void 0)||typeof H!="function"&&!!H;pe?y[M]=de:Oe&&(y[M]=J())}else{const de=H===void 0&&J!=null,pe=typeof H=="function"&&!!H(J)||typeof H!="function"&&!!H;(de||pe)&&(y[M]=J)}},"applyInstruction"),Ol=r(y=>y!=null,"nonNullish"),xd=r(y=>y,"pass");function Ml(y){return encodeURIComponent(y).replace(/[!'()*]/g,function(T){return"%"+T.charCodeAt(0).toString(16).toUpperCase()})}r(Ml,"extendedEncodeURIComponent");const Dc=r((y,T,D,M,H,J)=>{if(T!=null&&T[D]!==void 0){const de=M();if(de.length<=0)throw new Error("Empty value provided for input HTTP label: "+D+".");y=y.replace(H,J?de.split("/").map(pe=>Ml(pe)).join("/"):Ml(de))}else throw new Error("No value provided for input HTTP label: "+D+".");return y},"resolvedPath"),Ru=r(y=>{if(y!==y)return"NaN";switch(y){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return y}},"serializeFloat"),ls=r(y=>y.toISOString().replace(".000Z","Z"),"serializeDateTime"),Xn=r(y=>{if(y==null)return{};if(Array.isArray(y))return y.filter(T=>T!=null).map(Xn);if(typeof y=="object"){const T={};for(const D of Object.keys(y))y[D]!=null&&(T[D]=Xn(y[D]));return T}return y},"_json"),Ac=r(y=>(y==null?void 0:y.body)instanceof ReadableStream,"isStreamingPayload"),Oc=r(y=>(T,D)=>async M=>{var de;let H=await y.retryStrategy();const J=await y.maxAttempts();if(Ud(H)){H=H;let pe=await H.acquireInitialRetryToken(D.partition_id),Oe=new Error,_e=0,Qe=0;const{request:qe}=M,St=v.isInstance(qe);for(St&&(qe.headers[Or]=Co());;)try{St&&(qe.headers[xo]=`attempt=${_e+1}; max=${J}`);const{response:_t,output:dn}=await T(M);return H.recordSuccess(pe),dn.$metadata.attempts=_e+1,dn.$metadata.totalRetryDelay=Qe,{response:_t,output:dn}}catch(_t){const dn=Mc(_t);if(Oe=jr(_t),St&&Ac(qe))throw(de=D.logger instanceof Al?console:D.logger)==null||de.warn("An error was encountered in a non-retryable streaming request."),Oe;try{pe=await H.refreshRetryTokenForRetry(pe,dn)}catch{throw Oe.$metadata||(Oe.$metadata={}),Oe.$metadata.attempts=_e+1,Oe.$metadata.totalRetryDelay=Qe,Oe}_e=pe.getRetryCount();const kn=pe.getRetryDelay();Qe+=kn,await new Promise(un=>setTimeout(un,kn))}}else return H=H,H!=null&&H.mode&&(D.userAgent=[...D.userAgent||[],["cfg/retry-mode",H.mode]]),H.retry(T,M)},"retryMiddleware"),Ud=r(y=>typeof y.acquireInitialRetryToken<"u"&&typeof y.refreshRetryTokenForRetry<"u"&&typeof y.recordSuccess<"u","isRetryStrategyV2"),Mc=r(y=>{const T={error:y,errorType:Vd(y)},D=Rc(y.$response);return D&&(T.retryAfterHint=D),T},"getRetryErrorInfo"),Vd=r(y=>Qi(y)?"THROTTLING":Zi(y)?"TRANSIENT":Hn(y)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),Hd={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ea=r(y=>({applyToStack:T=>{T.add(Oc(y),Hd)}}),"getRetryPlugin"),Rc=r(y=>{if(!b.isInstance(y))return;const T=Object.keys(y.headers).find(J=>J.toLowerCase()==="retry-after");if(!T)return;const D=y.headers[T],M=Number(D);return Number.isNaN(M)?new Date(D):new Date(M*1e3)},"getRetryAfterHint"),Wd={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:Hd.name},Pc=r(y=>({applyToStack:T=>{T.addRelativeTo(at(y),Wd)}}),"getHttpSigningPlugin");class P{constructor(T){this.authSchemes=new Map;for(const[D,M]of Object.entries(T))M!==void 0&&this.authSchemes.set(D,M)}getIdentityProvider(T){return this.authSchemes.get(T)}}r(P,"DefaultIdentityProviderConfig");class x{async sign(T,D,M){if(!M)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!M.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!M.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!D.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");const H=HttpRequest.clone(T);if(M.in===HttpApiKeyAuthLocation.QUERY)H.query[M.name]=D.apiKey;else if(M.in===HttpApiKeyAuthLocation.HEADER)H.headers[M.name]=M.scheme?`${M.scheme} ${D.apiKey}`:D.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+M.in+"`");return H}}r(x,"HttpApiKeyAuthSigner");class W{async sign(T,D,M){const H=HttpRequest.clone(T);if(!D.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return H.headers.Authorization=`Bearer ${D.token}`,H}}r(W,"HttpBearerAuthSigner");const De=r(y=>T=>$e(T)&&T.expiration.getTime()-Date.now()<y,"createIsIdentityExpiredFunction")(3e5),$e=r(y=>y.expiration!==void 0,"doesIdentityRequireRefresh"),ut=r((y,T,D)=>{if(y===void 0)return;const M=typeof y!="function"?async()=>Promise.resolve(y):y;let H,J,de,pe=!1;const Oe=r(async _e=>{J||(J=M(_e));try{H=await J,de=!0,pe=!1}finally{J=void 0}return H},"coalesceProvider");return T===void 0?async _e=>((!de||_e!=null&&_e.forceRefresh)&&(H=await Oe(_e)),H):async _e=>((!de||_e!=null&&_e.forceRefresh)&&(H=await Oe(_e)),pe?H:D(H)?(T(H)&&await Oe(_e),H):(pe=!0,H))},"memoizeIdentityProvider"),tt=r(y=>y[SMITHY_CONTEXT_KEY]||(y[SMITHY_CONTEXT_KEY]={}),"getSmithyContext_getSmithyContext"),Ot=r(y=>{if(typeof y=="function")return y;const T=Promise.resolve(y);return()=>T},"dist_es_normalizeProvider_normalizeProvider");function vt(y,T){return new Wt(y,T)}r(vt,"requestBuilder");class Wt{constructor(T,D){this.input=T,this.context=D,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:T,protocol:D="https",port:M,path:H}=await this.context.endpoint();this.path=H;for(const J of this.resolvePathStack)J(this.path);return new v({protocol:D,hostname:this.hostname||T,port:M,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(T){return this.hostname=T,this}bp(T){return this.resolvePathStack.push(D=>{this.path=`${D!=null&&D.endsWith("/")?D.slice(0,-1):D||""}`+T}),this}p(T,D,M,H){return this.resolvePathStack.push(J=>{this.path=Dc(J,this.input,T,D,M,H)}),this}h(T){return this.headers=T,this}q(T){return this.query=T,this}b(T){return this.body=T,this}m(T){return this.method=T,this}}r(Wt,"RequestBuilder");const qt=r(async(y,T,D,...M)=>await T.send(new y(D),...M),"makePagedClientRequest");function fn(y,T,D,M,H){return r(async function*(de,pe,...Oe){let _e=de.startingToken||void 0,Qe=!0,qe;for(;Qe;){if(pe[D]=_e,H&&(pe[H]=pe[H]??de.pageSize),de.client instanceof y)qe=await qt(T,de.client,pe,...Oe);else throw new Error(`Invalid client, expected instance of ${y.name}`);yield qe;const St=_e;_e=In(qe,M),Qe=!!(_e&&(!de.stopOnSameToken||_e!==St))}return void 0},"paginateOperation")}r(fn,"createPaginator");const In=r((y,T)=>{let D=y;const M=T.split(".");for(const H of M){if(!D||typeof D!="object")return;D=D[H]}return D},"get"),Qn="content-length";function Oi(y){return T=>async D=>{const M=D.request;if(v.isInstance(M)){const{body:H,headers:J}=M;if(H&&Object.keys(J).map(de=>de.toLowerCase()).indexOf(Qn)===-1)try{const de=y(H);M.headers={...M.headers,[Qn]:String(de)}}catch{}}return T({...D,request:M})}}r(Oi,"contentLengthMiddleware");const ri={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Gi=r(y=>({applyToStack:T=>{T.add(Oi(y.bodyLengthChecker),ri)}}),"getContentLengthPlugin"),lr=r(y=>typeof y=="string"?Vi(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y),"toUint8Array"),dr="X-Amz-Algorithm",Lr="X-Amz-Credential",Ni="X-Amz-Date",ei="X-Amz-SignedHeaders",tr="X-Amz-Expires",zr="X-Amz-Signature",ti="X-Amz-Security-Token",ji="X-Amz-Region-Set",Dr="authorization",to=Ni.toLowerCase(),Mo=[Dr,to,"date"],br=zr.toLowerCase(),Lo="x-amz-content-sha256",mo=ti.toLowerCase(),qo="host",ys={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},kc=/^proxy-/,Rl=/^sec-/,Pl=null,ba="AWS4-HMAC-SHA256",Gd="AWS4-ECDSA-P256-SHA256",kl="AWS4-HMAC-SHA256-PAYLOAD",Nl="UNSIGNED-PAYLOAD",jd=50,_a="aws4_request",zd=60*60*24*7,da={},za=[],Es=r((y,T,D)=>`${y}/${T}/${D}/${_a}`,"createScope"),Js=r(async(y,T,D,M,H)=>{const J=await Ll(y,T.secretAccessKey,T.accessKeyId),de=`${D}:${M}:${H}:${wo(J)}:${T.sessionToken}`;if(de in da)return da[de];for(za.push(de);za.length>jd;)delete da[za.shift()];let pe=`AWS4${T.secretAccessKey}`;for(const Oe of[D,M,H,_a])pe=await Ll(y,pe,Oe);return da[de]=pe},"getSigningKey"),$d=r(()=>{za.length=0,Object.keys(da).forEach(y=>{delete da[y]})},"clearCredentialCache"),Ll=r((y,T,D)=>{const M=new y(T);return M.update(lr(D)),M.digest()},"hmac"),Ta=r(({headers:y},T,D)=>{const M={};for(const H of Object.keys(y).sort()){if(y[H]==null)continue;const J=H.toLowerCase();(J in ys||T!=null&&T.has(J)||kc.test(J)||Rl.test(J))&&(!D||D&&!D.has(J))||(M[J]=y[H].trim().replace(/\s+/g," "))}return M},"getCanonicalHeaders"),Fl=r(({query:y={}})=>{const T=[],D={};for(const M of Object.keys(y)){if(M.toLowerCase()===br)continue;const H=qr(M);T.push(H);const J=y[M];typeof J=="string"?D[H]=`${H}=${qr(J)}`:Array.isArray(J)&&(D[H]=J.slice(0).reduce((de,pe)=>de.concat([`${H}=${qr(pe)}`]),[]).sort().join("&"))}return T.sort().map(M=>D[M]).filter(M=>M).join("&")},"getCanonicalQuery"),cr=r(y=>typeof ArrayBuffer=="function"&&y instanceof ArrayBuffer||Object.prototype.toString.call(y)==="[object ArrayBuffer]","isArrayBuffer"),Vo=r(async({headers:y,body:T},D)=>{for(const M of Object.keys(y))if(M.toLowerCase()===Lo)return y[M];if(T==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof T=="string"||ArrayBuffer.isView(T)||cr(T)){const M=new D;return M.update(lr(T)),wo(await M.digest())}return Nl},"getPayloadHash");class or{format(T){const D=[];for(const J of Object.keys(T)){const de=Vi(J);D.push(Uint8Array.from([de.byteLength]),de,this.formatHeaderValue(T[J]))}const M=new Uint8Array(D.reduce((J,de)=>J+de.byteLength,0));let H=0;for(const J of D)M.set(J,H),H+=J.byteLength;return M}formatHeaderValue(T){switch(T.type){case"boolean":return Uint8Array.from([T.value?0:1]);case"byte":return Uint8Array.from([2,T.value]);case"short":const D=new DataView(new ArrayBuffer(3));return D.setUint8(0,3),D.setInt16(1,T.value,!1),new Uint8Array(D.buffer);case"integer":const M=new DataView(new ArrayBuffer(5));return M.setUint8(0,4),M.setInt32(1,T.value,!1),new Uint8Array(M.buffer);case"long":const H=new Uint8Array(9);return H[0]=5,H.set(T.value.bytes,1),H;case"binary":const J=new DataView(new ArrayBuffer(3+T.value.byteLength));J.setUint8(0,6),J.setUint16(1,T.value.byteLength,!1);const de=new Uint8Array(J.buffer);return de.set(T.value,3),de;case"string":const pe=Vi(T.value),Oe=new DataView(new ArrayBuffer(3+pe.byteLength));Oe.setUint8(0,7),Oe.setUint16(1,pe.byteLength,!1);const _e=new Uint8Array(Oe.buffer);return _e.set(pe,3),_e;case"timestamp":const Qe=new Uint8Array(9);return Qe[0]=8,Qe.set(ds.fromNumber(T.value.valueOf()).bytes,1),Qe;case"uuid":if(!ur.test(T.value))throw new Error(`Invalid UUID received: ${T.value}`);const qe=new Uint8Array(17);return qe[0]=9,qe.set(Yo(T.value.replace(/\-/g,"")),1),qe}}}r(or,"HeaderFormatter");var Fr;(function(y){y[y.boolTrue=0]="boolTrue",y[y.boolFalse=1]="boolFalse",y[y.byte=2]="byte",y[y.short=3]="short",y[y.integer=4]="integer",y[y.long=5]="long",y[y.byteArray=6]="byteArray",y[y.string=7]="string",y[y.timestamp=8]="timestamp",y[y.uuid=9]="uuid"})(Fr||(Fr={}));const ur=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class ds{constructor(T){if(this.bytes=T,T.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(T){if(T>9223372036854776e3||T<-9223372036854776e3)throw new Error(`${T} is too large (or, if negative, too small) to represent as an Int64`);const D=new Uint8Array(8);for(let M=7,H=Math.abs(Math.round(T));M>-1&&H>0;M--,H/=256)D[M]=H;return T<0&&Kd(D),new ds(D)}valueOf(){const T=this.bytes.slice(0),D=T[0]&128;return D&&Kd(T),parseInt(wo(T),16)*(D?-1:1)}toString(){return String(this.valueOf())}}r(ds,"Int64");function Kd(y){for(let T=0;T<8;T++)y[T]^=255;for(let T=7;T>-1&&(y[T]++,y[T]===0);T--);}r(Kd,"negate");const Kh=r((y,T)=>{y=y.toLowerCase();for(const D of Object.keys(T))if(y===D.toLowerCase())return!0;return!1},"hasHeader"),VS=r((y,T)=>{y=y.toLowerCase();for(const D of Object.keys(T))if(y===D.toLowerCase())return T[D]},"getHeaderValue"),HS=r((y,T)=>{y=y.toLowerCase();for(const D of Object.keys(T))y===D.toLowerCase()&&delete T[D]},"deleteHeader"),Jh=r((y,T={})=>{var H,J;const{headers:D,query:M={}}=v.clone(y);for(const de of Object.keys(D)){const pe=de.toLowerCase();(pe.slice(0,6)==="x-amz-"&&!((H=T.unhoistableHeaders)!=null&&H.has(pe))||(J=T.hoistableHeaders)!=null&&J.has(pe))&&(M[de]=D[de],delete D[de])}return{...y,headers:D,query:M}},"moveHeadersToQuery"),Pu=r(y=>{y=v.clone(y);for(const T of Object.keys(y.headers))Mo.indexOf(T.toLowerCase())>-1&&delete y.headers[T];return y},"prepareRequest"),Yh=r(y=>Xh(y).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),Xh=r(y=>typeof y=="number"?new Date(y*1e3):typeof y=="string"?Number(y)?new Date(Number(y)*1e3):new Date(y):y,"toDate");class Nc{constructor({applyChecksum:T,credentials:D,region:M,service:H,sha256:J,uriEscapePath:de=!0}){this.headerFormatter=new or,this.service=H,this.sha256=J,this.uriEscapePath=de,this.applyChecksum=typeof T=="boolean"?T:!0,this.regionProvider=_n(M),this.credentialProvider=_n(D)}async presign(T,D={}){const{signingDate:M=new Date,expiresIn:H=3600,unsignableHeaders:J,unhoistableHeaders:de,signableHeaders:pe,hoistableHeaders:Oe,signingRegion:_e,signingService:Qe}=D,qe=await this.credentialProvider();this.validateResolvedCredentials(qe);const St=_e??await this.regionProvider(),{longDate:_t,shortDate:dn}=Jd(M);if(H>zd)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const kn=Es(dn,St,Qe??this.service),un=Jh(Pu(T),{unhoistableHeaders:de,hoistableHeaders:Oe});qe.sessionToken&&(un.query[ti]=qe.sessionToken),un.query[dr]=ba,un.query[Lr]=`${qe.accessKeyId}/${kn}`,un.query[Ni]=_t,un.query[tr]=H.toString(10);const oi=Ta(un,J,pe);return un.query[ei]=ku(oi),un.query[zr]=await this.getSignature(_t,kn,this.getSigningKey(qe,St,dn,Qe),this.createCanonicalRequest(un,oi,await Vo(T,this.sha256))),un}async sign(T,D){return typeof T=="string"?this.signString(T,D):T.headers&&T.payload?this.signEvent(T,D):T.message?this.signMessage(T,D):this.signRequest(T,D)}async signEvent({headers:T,payload:D},{signingDate:M=new Date,priorSignature:H,signingRegion:J,signingService:de}){const pe=J??await this.regionProvider(),{shortDate:Oe,longDate:_e}=Jd(M),Qe=Es(Oe,pe,de??this.service),qe=await Vo({headers:{},body:D},this.sha256),St=new this.sha256;St.update(T);const _t=wo(await St.digest()),dn=[kl,_e,Qe,H,_t,qe].join(`
`);return this.signString(dn,{signingDate:M,signingRegion:pe,signingService:de})}async signMessage(T,{signingDate:D=new Date,signingRegion:M,signingService:H}){return this.signEvent({headers:this.headerFormatter.format(T.message.headers),payload:T.message.body},{signingDate:D,signingRegion:M,signingService:H,priorSignature:T.priorSignature}).then(de=>({message:T.message,signature:de}))}async signString(T,{signingDate:D=new Date,signingRegion:M,signingService:H}={}){const J=await this.credentialProvider();this.validateResolvedCredentials(J);const de=M??await this.regionProvider(),{shortDate:pe}=Jd(D),Oe=new this.sha256(await this.getSigningKey(J,de,pe,H));return Oe.update(lr(T)),wo(await Oe.digest())}async signRequest(T,{signingDate:D=new Date,signableHeaders:M,unsignableHeaders:H,signingRegion:J,signingService:de}={}){const pe=await this.credentialProvider();this.validateResolvedCredentials(pe);const Oe=J??await this.regionProvider(),_e=Pu(T),{longDate:Qe,shortDate:qe}=Jd(D),St=Es(qe,Oe,de??this.service);_e.headers[to]=Qe,pe.sessionToken&&(_e.headers[mo]=pe.sessionToken);const _t=await Vo(_e,this.sha256);!Kh(Lo,_e.headers)&&this.applyChecksum&&(_e.headers[Lo]=_t);const dn=Ta(_e,H,M),kn=await this.getSignature(Qe,St,this.getSigningKey(pe,Oe,qe,de),this.createCanonicalRequest(_e,dn,_t));return _e.headers[Dr]=`${ba} Credential=${pe.accessKeyId}/${St}, SignedHeaders=${ku(dn)}, Signature=${kn}`,_e}createCanonicalRequest(T,D,M){const H=Object.keys(D).sort();return`${T.method}
${this.getCanonicalPath(T)}
${Fl(T)}
${H.map(J=>`${J}:${D[J]}`).join(`
`)}

${H.join(";")}
${M}`}async createStringToSign(T,D,M){const H=new this.sha256;H.update(lr(M));const J=await H.digest();return`${ba}
${T}
${D}
${wo(J)}`}getCanonicalPath({path:T}){if(this.uriEscapePath){const D=[];for(const J of T.split("/"))(J==null?void 0:J.length)!==0&&J!=="."&&(J===".."?D.pop():D.push(J));const M=`${T!=null&&T.startsWith("/")?"/":""}${D.join("/")}${D.length>0&&(T!=null&&T.endsWith("/"))?"/":""}`;return qr(M).replace(/%2F/g,"/")}return T}async getSignature(T,D,M,H){const J=await this.createStringToSign(T,D,H),de=new this.sha256(await M);return de.update(lr(J)),wo(await de.digest())}getSigningKey(T,D,M,H){return Js(this.sha256,T,M,D,H||this.service)}validateResolvedCredentials(T){if(typeof T!="object"||typeof T.accessKeyId!="string"||typeof T.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}r(Nc,"SignatureV4");const Jd=r(y=>{const T=Yh(y).replace(/[\-:]/g,"");return{longDate:T,shortDate:T.slice(0,8)}},"formatDate"),ku=r(y=>Object.keys(y).sort().join(";"),"getCanonicalHeaderList"),Qh=r(y=>{let T;y.credentials&&(T=ut(y.credentials,De,$e)),T||(y.credentialDefaultProvider?T=Ot(y.credentialDefaultProvider(Object.assign({},y,{parentClientConfig:y}))):T=r(async()=>{throw new Error("`credentials` is missing")},"normalizedCreds"));const{signingEscapePath:D=!0,systemClockOffset:M=y.systemClockOffset||0,sha256:H}=y;let J;return y.signer?J=Ot(y.signer):y.regionInfoProvider?J=r(()=>Ot(y.region)().then(async de=>[await y.regionInfoProvider(de,{useFipsEndpoint:await y.useFipsEndpoint(),useDualstackEndpoint:await y.useDualstackEndpoint()})||{},de]).then(de=>{let[pe,Oe]=de;const{signingRegion:_e,signingService:Qe}=pe;y.signingRegion=y.signingRegion||_e||Oe,y.signingName=y.signingName||Qe||y.serviceId;const qe={...y,credentials:T,region:y.signingRegion,service:y.signingName,sha256:H,uriEscapePath:D},St=y.signerConstructor||Nc;return new St(qe)}),"signer"):J=r(async de=>{de=Object.assign({},{name:"sigv4",signingName:y.signingName||y.defaultSigningName,signingRegion:await Ot(y.region)(),properties:{}},de);const pe=de.signingRegion,Oe=de.signingName;y.signingRegion=y.signingRegion||pe,y.signingName=y.signingName||Oe||y.serviceId;const _e={...y,credentials:T,region:y.signingRegion,service:y.signingName,sha256:H,uriEscapePath:D},Qe=y.signerConstructor||Nc;return new Qe(_e)},"signer"),{...y,systemClockOffset:M,signingEscapePath:D,credentials:T,signer:J}},"resolveAwsSdkSigV4Config"),WS=null,Zh=r(async(y,T,D)=>({operation:On(T).operation,region:await _n(y.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),"defaultChimeSDKMessagingHttpAuthSchemeParametersProvider");function qh(y){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"chime",region:y.region},propertiesExtractor:(T,D)=>({signingProperties:{config:T,context:D}})}}r(qh,"createAwsAuthSigv4HttpAuthOption");const ep=r(y=>{const T=[];switch(y.operation){default:T.push(qh(y))}return T},"defaultChimeSDKMessagingHttpAuthSchemeProvider"),tp=r(y=>({...Qh(y)}),"resolveHttpAuthSchemeConfig"),np=r(y=>{var T,D;return{...y,useDualstackEndpoint:(T=y.useDualstackEndpoint)!==null&&T!==void 0?T:!1,useFipsEndpoint:(D=y.useFipsEndpoint)!==null&&D!==void 0?D:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters"),_i={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var ip=d(7229287800),rp=d.n(ip);const op=r(y=>new TextEncoder().encode(y),"fromUtf8_browser_fromUtf8");var sp=typeof Buffer<"u"&&Buffer.from?function(y){return Buffer.from(y,"utf8")}:op;function Bl(y){return y instanceof Uint8Array?y:typeof y=="string"?sp(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}r(Bl,"convertToBuffer");function Lc(y){return typeof y=="string"?y.length===0:y.byteLength===0}r(Lc,"isEmptyData");var Nu={name:"SHA-256"},Lu={name:"HMAC",hash:Nu},ap=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const lp={};function Yd(){return typeof window<"u"?window:typeof self<"u"?self:lp}r(Yd,"locateWindow");var dp=function(){function y(T){this.toHash=new Uint8Array(0),this.secret=T,this.reset()}return r(y,"Sha256"),y.prototype.update=function(T){if(!Lc(T)){var D=Bl(T),M=new Uint8Array(this.toHash.byteLength+D.byteLength);M.set(this.toHash,0),M.set(D,this.toHash.byteLength),this.toHash=M}},y.prototype.digest=function(){var T=this;return this.key?this.key.then(function(D){return Yd().crypto.subtle.sign(Lu,D,T.toHash).then(function(M){return new Uint8Array(M)})}):Lc(this.toHash)?Promise.resolve(ap):Promise.resolve().then(function(){return Yd().crypto.subtle.digest(Nu,T.toHash)}).then(function(D){return Promise.resolve(new Uint8Array(D))})},y.prototype.reset=function(){var T=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(D,M){Yd().crypto.subtle.importKey("raw",Bl(T.secret),Lu,!1,["sign"]).then(D,M)}),this.key.catch(function(){}))},y}(),Fc=r(function(y,T){return Fc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,M){D.__proto__=M}||function(D,M){for(var H in M)Object.prototype.hasOwnProperty.call(M,H)&&(D[H]=M[H])},Fc(y,T)},"extendStatics");function cp(y,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");Fc(y,T);function D(){this.constructor=y}r(D,"__"),y.prototype=T===null?Object.create(T):(D.prototype=T.prototype,new D)}r(cp,"__extends");var Bc=r(function(){return Bc=Object.assign||r(function(T){for(var D,M=1,H=arguments.length;M<H;M++){D=arguments[M];for(var J in D)Object.prototype.hasOwnProperty.call(D,J)&&(T[J]=D[J])}return T},"__assign"),Bc.apply(this,arguments)},"__assign");function up(y,T){var D={};for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&T.indexOf(M)<0&&(D[M]=y[M]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,M=Object.getOwnPropertySymbols(y);H<M.length;H++)T.indexOf(M[H])<0&&Object.prototype.propertyIsEnumerable.call(y,M[H])&&(D[M[H]]=y[M[H]]);return D}r(up,"__rest");function fp(y,T,D,M){var H=arguments.length,J=H<3?T:M===null?M=Object.getOwnPropertyDescriptor(T,D):M,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(y,T,D,M);else for(var pe=y.length-1;pe>=0;pe--)(de=y[pe])&&(J=(H<3?de(J):H>3?de(T,D,J):de(T,D))||J);return H>3&&J&&Object.defineProperty(T,D,J),J}r(fp,"__decorate");function hp(y,T){return function(D,M){T(D,M,y)}}r(hp,"__param");function GS(y,T,D,M,H,J){function de(oi){if(oi!==void 0&&typeof oi!="function")throw new TypeError("Function expected");return oi}r(de,"accept");for(var pe=M.kind,Oe=pe==="getter"?"get":pe==="setter"?"set":"value",_e=!T&&y?M.static?y:y.prototype:null,Qe=T||(_e?Object.getOwnPropertyDescriptor(_e,M.name):{}),qe,St=!1,_t=D.length-1;_t>=0;_t--){var dn={};for(var kn in M)dn[kn]=kn==="access"?{}:M[kn];for(var kn in M.access)dn.access[kn]=M.access[kn];dn.addInitializer=function(oi){if(St)throw new TypeError("Cannot add initializers after decoration has completed");J.push(de(oi||null))};var un=(0,D[_t])(pe==="accessor"?{get:Qe.get,set:Qe.set}:Qe[Oe],dn);if(pe==="accessor"){if(un===void 0)continue;if(un===null||typeof un!="object")throw new TypeError("Object expected");(qe=de(un.get))&&(Qe.get=qe),(qe=de(un.set))&&(Qe.set=qe),(qe=de(un.init))&&H.unshift(qe)}else(qe=de(un))&&(pe==="field"?H.unshift(qe):Qe[Oe]=qe)}_e&&Object.defineProperty(_e,M.name,Qe),St=!0}r(GS,"__esDecorate");function jS(y,T,D){for(var M=arguments.length>2,H=0;H<T.length;H++)D=M?T[H].call(y,D):T[H].call(y);return M?D:void 0}r(jS,"__runInitializers");function zS(y){return typeof y=="symbol"?y:"".concat(y)}r(zS,"__propKey");function $S(y,T,D){return typeof T=="symbol"&&(T=T.description?"[".concat(T.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:D?"".concat(D," ",T):T})}r($S,"__setFunctionName");function pp(y,T){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(y,T)}r(pp,"__metadata");function Fu(y,T,D,M){function H(J){return J instanceof D?J:new D(function(de){de(J)})}return r(H,"adopt"),new(D||(D=Promise))(function(J,de){function pe(Qe){try{_e(M.next(Qe))}catch(qe){de(qe)}}r(pe,"fulfilled");function Oe(Qe){try{_e(M.throw(Qe))}catch(qe){de(qe)}}r(Oe,"rejected");function _e(Qe){Qe.done?J(Qe.value):H(Qe.value).then(pe,Oe)}r(_e,"step"),_e((M=M.apply(y,T||[])).next())})}r(Fu,"tslib_es6_awaiter");function Bu(y,T){var D={label:0,sent:function(){if(J[0]&1)throw J[1];return J[1]},trys:[],ops:[]},M,H,J,de;return de={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function pe(_e){return function(Qe){return Oe([_e,Qe])}}function Oe(_e){if(M)throw new TypeError("Generator is already executing.");for(;de&&(de=0,_e[0]&&(D=0)),D;)try{if(M=1,H&&(J=_e[0]&2?H.return:_e[0]?H.throw||((J=H.return)&&J.call(H),0):H.next)&&!(J=J.call(H,_e[1])).done)return J;switch(H=0,J&&(_e=[_e[0]&2,J.value]),_e[0]){case 0:case 1:J=_e;break;case 4:return D.label++,{value:_e[1],done:!1};case 5:D.label++,H=_e[1],_e=[0];continue;case 7:_e=D.ops.pop(),D.trys.pop();continue;default:if(J=D.trys,!(J=J.length>0&&J[J.length-1])&&(_e[0]===6||_e[0]===2)){D=0;continue}if(_e[0]===3&&(!J||_e[1]>J[0]&&_e[1]<J[3])){D.label=_e[1];break}if(_e[0]===6&&D.label<J[1]){D.label=J[1],J=_e;break}if(J&&D.label<J[2]){D.label=J[2],D.ops.push(_e);break}J[2]&&D.ops.pop(),D.trys.pop();continue}_e=T.call(y,D)}catch(Qe){_e=[6,Qe],H=0}finally{M=J=0}if(_e[0]&5)throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}}r(Bu,"tslib_es6_generator");var xc=Object.create?function(y,T,D,M){M===void 0&&(M=D);var H=Object.getOwnPropertyDescriptor(T,D);(!H||("get"in H?!T.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return T[D]}}),Object.defineProperty(y,M,H)}:function(y,T,D,M){M===void 0&&(M=D),y[M]=T[D]};function mp(y,T){for(var D in y)D!=="default"&&!Object.prototype.hasOwnProperty.call(T,D)&&xc(T,y,D)}r(mp,"__exportStar");function Uc(y){var T=typeof Symbol=="function"&&Symbol.iterator,D=T&&y[T],M=0;if(D)return D.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&M>=y.length&&(y=void 0),{value:y&&y[M++],done:!y}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}r(Uc,"__values");function xu(y,T){var D=typeof Symbol=="function"&&y[Symbol.iterator];if(!D)return y;var M=D.call(y),H,J=[],de;try{for(;(T===void 0||T-- >0)&&!(H=M.next()).done;)J.push(H.value)}catch(pe){de={error:pe}}finally{try{H&&!H.done&&(D=M.return)&&D.call(M)}finally{if(de)throw de.error}}return J}r(xu,"__read");function gp(){for(var y=[],T=0;T<arguments.length;T++)y=y.concat(xu(arguments[T]));return y}r(gp,"__spread");function Sp(){for(var y=0,T=0,D=arguments.length;T<D;T++)y+=arguments[T].length;for(var M=Array(y),H=0,T=0;T<D;T++)for(var J=arguments[T],de=0,pe=J.length;de<pe;de++,H++)M[H]=J[de];return M}r(Sp,"__spreadArrays");function vp(y,T,D){if(D||arguments.length===2)for(var M=0,H=T.length,J;M<H;M++)(J||!(M in T))&&(J||(J=Array.prototype.slice.call(T,0,M)),J[M]=T[M]);return y.concat(J||Array.prototype.slice.call(T))}r(vp,"__spreadArray");function xl(y){return this instanceof xl?(this.v=y,this):new xl(y)}r(xl,"__await");function yp(y,T,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=D.apply(y,T||[]),H,J=[];return H={},de("next"),de("throw"),de("return"),H[Symbol.asyncIterator]=function(){return this},H;function de(St){M[St]&&(H[St]=function(_t){return new Promise(function(dn,kn){J.push([St,_t,dn,kn])>1||pe(St,_t)})})}function pe(St,_t){try{Oe(M[St](_t))}catch(dn){qe(J[0][3],dn)}}function Oe(St){St.value instanceof xl?Promise.resolve(St.value.v).then(_e,Qe):qe(J[0][2],St)}function _e(St){pe("next",St)}function Qe(St){pe("throw",St)}function qe(St,_t){St(_t),J.shift(),J.length&&pe(J[0][0],J[0][1])}}r(yp,"__asyncGenerator");function Ep(y){var T,D;return T={},M("next"),M("throw",function(H){throw H}),M("return"),T[Symbol.iterator]=function(){return this},T;function M(H,J){T[H]=y[H]?function(de){return(D=!D)?{value:xl(y[H](de)),done:!1}:J?J(de):de}:J}}r(Ep,"__asyncDelegator");function bp(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T=y[Symbol.asyncIterator],D;return T?T.call(y):(y=typeof Uc=="function"?Uc(y):y[Symbol.iterator](),D={},M("next"),M("throw"),M("return"),D[Symbol.asyncIterator]=function(){return this},D);function M(J){D[J]=y[J]&&function(de){return new Promise(function(pe,Oe){de=y[J](de),H(pe,Oe,de.done,de.value)})}}function H(J,de,pe,Oe){Promise.resolve(Oe).then(function(_e){J({value:_e,done:pe})},de)}}r(bp,"__asyncValues");function _p(y,T){return Object.defineProperty?Object.defineProperty(y,"raw",{value:T}):y.raw=T,y}r(_p,"__makeTemplateObject");var Tp=Object.create?function(y,T){Object.defineProperty(y,"default",{enumerable:!0,value:T})}:function(y,T){y.default=T};function Cp(y){if(y&&y.__esModule)return y;var T={};if(y!=null)for(var D in y)D!=="default"&&Object.prototype.hasOwnProperty.call(y,D)&&xc(T,y,D);return Tp(T,y),T}r(Cp,"__importStar");function Ip(y){return y&&y.__esModule?y:{default:y}}r(Ip,"__importDefault");function wp(y,T,D,M){if(D==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof T=="function"?y!==T||!M:!T.has(y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return D==="m"?M:D==="a"?M.call(y):M?M.value:T.get(y)}r(wp,"__classPrivateFieldGet");function Dp(y,T,D,M,H){if(M==="m")throw new TypeError("Private method is not writable");if(M==="a"&&!H)throw new TypeError("Private accessor was defined without a setter");if(typeof T=="function"?y!==T||!H:!T.has(y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return M==="a"?H.call(y,D):H?H.value=D:T.set(y,D),D}r(Dp,"__classPrivateFieldSet");function Ap(y,T){if(T===null||typeof T!="object"&&typeof T!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof y=="function"?T===y:y.has(T)}r(Ap,"__classPrivateFieldIn");function Op(y,T,D){if(T!=null){if(typeof T!="object"&&typeof T!="function")throw new TypeError("Object expected.");var M;if(D){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");M=T[Symbol.asyncDispose]}if(M===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");M=T[Symbol.dispose]}if(typeof M!="function")throw new TypeError("Object not disposable.");y.stack.push({value:T,dispose:M,async:D})}else D&&y.stack.push({async:!0});return T}r(Op,"__addDisposableResource");var Mp=typeof SuppressedError=="function"?SuppressedError:function(y,T,D){var M=new Error(D);return M.name="SuppressedError",M.error=y,M.suppressed=T,M};function Rp(y){function T(M){y.error=y.hasError?new Mp(M,y.error,"An error was suppressed during disposal."):M,y.hasError=!0}r(T,"fail");function D(){for(;y.stack.length;){var M=y.stack.pop();try{var H=M.dispose&&M.dispose.call(M.value);if(M.async)return Promise.resolve(H).then(D,function(J){return T(J),D()})}catch(J){T(J)}}if(y.hasError)throw y.error}return r(D,"next"),D()}r(Rp,"__disposeResources");const KS={__extends:cp,__assign:Bc,__rest:up,__decorate:fp,__param:hp,__metadata:pp,__awaiter:Fu,__generator:Bu,__createBinding:xc,__exportStar:mp,__values:Uc,__read:xu,__spread:gp,__spreadArrays:Sp,__spreadArray:vp,__await:xl,__asyncGenerator:yp,__asyncDelegator:Ep,__asyncValues:bp,__makeTemplateObject:_p,__importStar:Cp,__importDefault:Ip,__classPrivateFieldGet:wp,__classPrivateFieldSet:Dp,__classPrivateFieldIn:Ap,__addDisposableResource:Op,__disposeResources:Rp};var cs=64,Pp=32,kp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Np=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Lp=Math.pow(2,53)-1,Xd=function(){function y(){this.state=Int32Array.from(Np),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r(y,"RawSha256"),y.prototype.update=function(T){if(this.finished)throw new Error("Attempted to update an already finished hash.");var D=0,M=T.byteLength;if(this.bytesHashed+=M,this.bytesHashed*8>Lp)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;M>0;)this.buffer[this.bufferLength++]=T[D++],M--,this.bufferLength===cs&&(this.hashBuffer(),this.bufferLength=0)},y.prototype.digest=function(){if(!this.finished){var T=this.bytesHashed*8,D=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),M=this.bufferLength;if(D.setUint8(this.bufferLength++,128),M%cs>=cs-8){for(var H=this.bufferLength;H<cs;H++)D.setUint8(H,0);this.hashBuffer(),this.bufferLength=0}for(var H=this.bufferLength;H<cs-8;H++)D.setUint8(H,0);D.setUint32(cs-8,Math.floor(T/4294967296),!0),D.setUint32(cs-4,T),this.hashBuffer(),this.finished=!0}for(var J=new Uint8Array(Pp),H=0;H<8;H++)J[H*4]=this.state[H]>>>24&255,J[H*4+1]=this.state[H]>>>16&255,J[H*4+2]=this.state[H]>>>8&255,J[H*4+3]=this.state[H]>>>0&255;return J},y.prototype.hashBuffer=function(){for(var T=this,D=T.buffer,M=T.state,H=M[0],J=M[1],de=M[2],pe=M[3],Oe=M[4],_e=M[5],Qe=M[6],qe=M[7],St=0;St<cs;St++){if(St<16)this.temp[St]=(D[St*4]&255)<<24|(D[St*4+1]&255)<<16|(D[St*4+2]&255)<<8|D[St*4+3]&255;else{var _t=this.temp[St-2],dn=(_t>>>17|_t<<15)^(_t>>>19|_t<<13)^_t>>>10;_t=this.temp[St-15];var kn=(_t>>>7|_t<<25)^(_t>>>18|_t<<14)^_t>>>3;this.temp[St]=(dn+this.temp[St-7]|0)+(kn+this.temp[St-16]|0)}var un=(((Oe>>>6|Oe<<26)^(Oe>>>11|Oe<<21)^(Oe>>>25|Oe<<7))+(Oe&_e^~Oe&Qe)|0)+(qe+(kp[St]+this.temp[St]|0)|0)|0,oi=((H>>>2|H<<30)^(H>>>13|H<<19)^(H>>>22|H<<10))+(H&J^H&de^J&de)|0;qe=Qe,Qe=_e,_e=Oe,Oe=pe+un|0,pe=de,de=J,J=H,H=un+oi|0}M[0]+=H,M[1]+=J,M[2]+=de,M[3]+=pe,M[4]+=Oe,M[5]+=_e,M[6]+=Qe,M[7]+=qe},y}(),Fp=function(){function y(T){this.secret=T,this.hash=new Xd,this.reset()}return r(y,"Sha256"),y.prototype.update=function(T){if(!(Lc(T)||this.error))try{this.hash.update(Bl(T))}catch(D){this.error=D}},y.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},y.prototype.digest=function(){return Fu(this,void 0,void 0,function(){return Bu(this,function(T){return[2,this.digestSync()]})})},y.prototype.reset=function(){if(this.hash=new Xd,this.secret){this.outer=new Xd;var T=Bp(this.secret),D=new Uint8Array(cs);D.set(T);for(var M=0;M<cs;M++)T[M]^=54,D[M]^=92;this.hash.update(T),this.outer.update(D);for(var M=0;M<T.byteLength;M++)T[M]=0}},y}();function Bp(y){var T=Bl(y);if(T.byteLength>cs){var D=new Xd;D.update(T),T=D.digest()}var M=new Uint8Array(cs);return M.set(T),M}r(Bp,"bufferFromSecret");var xp=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Up(y){if(Vp(y)&&typeof y.crypto.subtle=="object"){var T=y.crypto.subtle;return Uu(T)}return!1}r(Up,"supportsWebCrypto");function Vp(y){if(typeof y=="object"&&typeof y.crypto=="object"){var T=y.crypto.getRandomValues;return typeof T=="function"}return!1}r(Vp,"supportsSecureRandom");function Uu(y){return y&&xp.every(function(T){return typeof y[T]=="function"})}r(Uu,"supportsSubtleCrypto");function JS(y){return __awaiter(this,void 0,void 0,function(){var T,D,M;return __generator(this,function(H){switch(H.label){case 0:if(!Uu(y))return[2,!1];H.label=1;case 1:return H.trys.push([1,4,,5]),[4,y.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return T=H.sent(),[4,y.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},T,new Uint8Array(0))];case 3:return D=H.sent(),[2,D.byteLength===16];case 4:return M=H.sent(),[2,!1];case 5:return[2]}})})}r(JS,"supportsZeroByteGCM");var Hp=function(){function y(T){Up(Yd())?this.hash=new dp(T):this.hash=new Fp(T)}return r(y,"Sha256"),y.prototype.update=function(T,D){this.hash.update(Bl(T))},y.prototype.digest=function(){return this.hash.digest()},y.prototype.reset=function(){this.hash.reset()},y}(),Wp=d(1874409785),Vu=d.n(Wp);const Gp=r(y=>{let{serviceId:T,clientVersion:D}=y;return async()=>{var M,H,J,de,pe;const Oe=typeof window<"u"&&(!(window==null||(M=window.navigator)===null||M===void 0)&&M.userAgent)?Vu().parse(window.navigator.userAgent):void 0;var _e,Qe;const qe=[["aws-sdk-js",D],["ua","2.0"],[`os/${(Oe==null||(H=Oe.os)===null||H===void 0?void 0:H.name)||"other"}`,Oe==null||(J=Oe.os)===null||J===void 0?void 0:J.version],["lang/js"],["md/browser",`${(_e=Oe==null||(de=Oe.browser)===null||de===void 0?void 0:de.name)!==null&&_e!==void 0?_e:"unknown"}_${(Qe=Oe==null||(pe=Oe.browser)===null||pe===void 0?void 0:pe.version)!==null&&Qe!==void 0?Qe:"unknown"}`]];return T&&qe.push([`api/${T}`,D]),qe}},"defaultUserAgent"),jp=r(y=>()=>Promise.reject(y),"invalidProvider"),Hu=typeof TextEncoder=="function"?new TextEncoder:null,zp=r(y=>{if(typeof y=="string"){if(Hu)return Hu.encode(y).byteLength;let T=y.length;for(let D=T-1;D>=0;D--){const M=y.charCodeAt(D);M>127&&M<=2047?T++:M>2047&&M<=65535&&(T+=2),M>=56320&&M<=57343&&D--}return T}else{if(typeof y.byteLength=="number")return y.byteLength;if(typeof y.size=="number")return y.size}throw new Error(`Body Length computation failed for ${y}`)},"calculateBodyLength"),Wu=r(y=>new Date(Date.now()+y),"getSkewCorrectedDate");var Vc;const Gu=r(y=>{var T,D;return b.isInstance(y)?(Vc=(T=y.headers)===null||T===void 0?void 0:T.date)!==null&&Vc!==void 0?Vc:(D=y.headers)===null||D===void 0?void 0:D.Date:void 0},"getDateHeader"),$p=r((y,T)=>Math.abs(Wu(T).getTime()-y)>=3e5,"isClockSkewed"),ju=r((y,T)=>{const D=Date.parse(y);return $p(D,T)?D-Date.now():T},"getUpdatedSystemClockOffset"),Ul=r((y,T)=>{if(!T)throw new Error(`Property \`${y}\` is not resolved for AWS SDK SigV4Auth`);return T},"throwSigningPropertyError"),Kp=r(async y=>{var T,D,M;const H=Ul("context",y.context),J=Ul("config",y.config),de=(T=H.endpointV2)===null||T===void 0||(D=T.properties)===null||D===void 0||(M=D.authSchemes)===null||M===void 0?void 0:M[0],Oe=await Ul("signer",J.signer)(de),_e=y==null?void 0:y.signingRegion,Qe=y==null?void 0:y.signingRegionSet,qe=y==null?void 0:y.signingName;return{config:J,signer:Oe,signingRegion:_e,signingRegionSet:Qe,signingName:qe}},"validateSigningProperties");class zu{async sign(T,D,M){var H;if(!v.isInstance(T))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const J=await Kp(M),{config:de,signer:pe}=J;let{signingRegion:Oe,signingName:_e}=J;const Qe=M.context;var qe;if((qe=Qe==null||(H=Qe.authSchemes)===null||H===void 0?void 0:H.length)!==null&&qe!==void 0?qe:0>1){const[kn,un]=Qe.authSchemes;if((kn==null?void 0:kn.name)==="sigv4a"&&(un==null?void 0:un.name)==="sigv4"){var St;Oe=(St=un==null?void 0:un.signingRegion)!==null&&St!==void 0?St:Oe;var _t;_e=(_t=un==null?void 0:un.signingName)!==null&&_t!==void 0?_t:_e}}return await pe.sign(T,{signingDate:Wu(de.systemClockOffset),signingRegion:Oe,signingService:_e})}errorHandler(T){return D=>{var M;const H=(M=D.ServerTime)!==null&&M!==void 0?M:Gu(D.$response);if(H){const J=Ul("config",T.config),de=J.systemClockOffset;J.systemClockOffset=ju(H,J.systemClockOffset),J.systemClockOffset!==de&&D.$metadata&&(D.$metadata.clockSkewCorrected=!0)}throw D}}successHandler(T,D){const M=Gu(T);if(M){const H=Ul("config",D.config);H.systemClockOffset=ju(M,H.systemClockOffset)}}}r(zu,"AwsSdkSigV4Signer");const YS=null,$u="required",ks="fn",Ns="argv",$a="ref",Ku=!0,Ju="isSet",Vl="booleanEquals",Ka="error",Hl="endpoint",Ys="tree",Hc="PartitionResult",Yu={[$u]:!1,type:"String"},Xu={[$u]:!0,default:!1,type:"Boolean"},Qu={[$a]:"Endpoint"},Zu={[ks]:Vl,[Ns]:[{[$a]:"UseFIPS"},!0]},qu={[ks]:Vl,[Ns]:[{[$a]:"UseDualStack"},!0]},Ls={},ef={[ks]:"getAttr",[Ns]:[{[$a]:Hc},"supportsFIPS"]},tf={[ks]:Vl,[Ns]:[!0,{[ks]:"getAttr",[Ns]:[{[$a]:Hc},"supportsDualStack"]}]},nf=[Zu],rf=[qu],of=[{[$a]:"Region"}],Jp={version:"1.0",parameters:{Region:Yu,UseDualStack:Xu,UseFIPS:Xu,Endpoint:Yu},rules:[{conditions:[{[ks]:Ju,[Ns]:[Qu]}],rules:[{conditions:nf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ka},{conditions:rf,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ka},{endpoint:{url:Qu,properties:Ls,headers:Ls},type:Hl}],type:Ys},{conditions:[{[ks]:Ju,[Ns]:of}],rules:[{conditions:[{[ks]:"aws.partition",[Ns]:of,assign:Hc}],rules:[{conditions:[Zu,qu],rules:[{conditions:[{[ks]:Vl,[Ns]:[Ku,ef]},tf],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ls,headers:Ls},type:Hl}],type:Ys},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ka}],type:Ys},{conditions:nf,rules:[{conditions:[{[ks]:Vl,[Ns]:[ef,Ku]}],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ls,headers:Ls},type:Hl}],type:Ys},{error:"FIPS is enabled but this partition does not support FIPS",type:Ka}],type:Ys},{conditions:rf,rules:[{conditions:[tf],rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ls,headers:Ls},type:Hl}],type:Ys},{error:"DualStack is enabled but this partition does not support DualStack",type:Ka}],type:Ys},{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:Ls,headers:Ls},type:Hl}],type:Ys}],type:Ys},{error:"Invalid Configuration: Missing Region",type:Ka}]},Yp=new ge({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Xp=r(function(y){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yp.get(y,()=>He(Jp,{endpointParams:y,logger:T.logger}))},"defaultEndpointResolver");Fe.aws=me;const Qp=r(y=>{var T,D,M,H,J,de,pe,Oe,_e,Qe,qe,St;return{apiVersion:"2021-05-15",base64Decoder:(T=y==null?void 0:y.base64Decoder)!==null&&T!==void 0?T:Et,base64Encoder:(D=y==null?void 0:y.base64Encoder)!==null&&D!==void 0?D:Hi,disableHostPrefix:(M=y==null?void 0:y.disableHostPrefix)!==null&&M!==void 0?M:!1,endpointProvider:(H=y==null?void 0:y.endpointProvider)!==null&&H!==void 0?H:Xp,extensions:(J=y==null?void 0:y.extensions)!==null&&J!==void 0?J:[],httpAuthSchemeProvider:(de=y==null?void 0:y.httpAuthSchemeProvider)!==null&&de!==void 0?de:ep,httpAuthSchemes:(pe=y==null?void 0:y.httpAuthSchemes)!==null&&pe!==void 0?pe:[{schemeId:"aws.auth#sigv4",identityProvider:_t=>_t.getIdentityProvider("aws.auth#sigv4"),signer:new zu}],logger:(Oe=y==null?void 0:y.logger)!==null&&Oe!==void 0?Oe:new Al,serviceId:(_e=y==null?void 0:y.serviceId)!==null&&_e!==void 0?_e:"Chime SDK Messaging",urlParser:(Qe=y==null?void 0:y.urlParser)!==null&&Qe!==void 0?Qe:Fn,utf8Decoder:(qe=y==null?void 0:y.utf8Decoder)!==null&&qe!==void 0?qe:Vi,utf8Encoder:(St=y==null?void 0:y.utf8Encoder)!==null&&St!==void 0?St:Ti}},"getRuntimeConfig");class Wl extends Error{constructor(T,D=!0){var J;let M,H=!0;typeof D=="boolean"?(M=void 0,H=D):D!=null&&typeof D=="object"&&(M=D.logger,H=D.tryNextLink??!0),super(T),this.name="ProviderError",this.tryNextLink=H,Object.setPrototypeOf(this,Wl.prototype),(J=M==null?void 0:M.debug)==null||J.call(M,`@smithy/property-provider ${H?"->":"(!)"} ${T}`)}static from(T,D=!0){return Object.assign(new this(T.message,D),T)}}r(Wl,"ProviderError_ProviderError");class Wc extends Wl{constructor(T,D=!0){super(T,D),this.name="CredentialsProviderError",Object.setPrototypeOf(this,Wc.prototype)}}r(Wc,"CredentialsProviderError");class Gc extends Wl{constructor(T,D=!0){super(T,D),this.name="TokenProviderError",Object.setPrototypeOf(this,Gc.prototype)}}r(Gc,"TokenProviderError");const QS=r((...y)=>async()=>{if(y.length===0)throw new ProviderError("No providers in chain");let T;for(const D of y)try{return await D()}catch(M){if(T=M,M!=null&&M.tryNextLink)continue;throw M}throw T},"chain"),Zp=r((y,T,D)=>{let M,H,J,de=!1;const pe=r(async()=>{H||(H=y());try{M=await H,J=!0,de=!1}finally{H=void 0}return M},"coalesceProvider");return T===void 0?async Oe=>((!J||Oe!=null&&Oe.forceRefresh)&&(M=await pe()),M):async Oe=>((!J||Oe!=null&&Oe.forceRefresh)&&(M=await pe()),de?M:D&&!D(M)?(de=!0,M):(T(M)&&await pe(),M))},"memoize"),qp=["in-region","cross-region","mobile","standard","legacy"],em=r(({defaultsMode:y}={})=>Zp(async()=>{const T=typeof y=="function"?await y():y;switch(T==null?void 0:T.toLowerCase()){case"auto":return Promise.resolve(tm()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(T==null?void 0:T.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${qp.join(", ")}, got ${T}`)}}),"resolveDefaultsModeConfig"),tm=r(()=>{var D,M;const y=typeof window<"u"&&((D=window==null?void 0:window.navigator)!=null&&D.userAgent)?Vu().parse(window.navigator.userAgent):void 0,T=(M=y==null?void 0:y.platform)==null?void 0:M.type;return T==="tablet"||T==="mobile"},"isMobileBrowser"),nm=r(y=>{const T=em(y),D=r(()=>T().then(yc),"defaultConfigProvider"),M=Qp(y);var H,J,de,pe,Oe,_e,Qe,qe,St,_t,dn;return{...M,...y,runtime:"browser",defaultsMode:T,bodyLengthChecker:(H=y==null?void 0:y.bodyLengthChecker)!==null&&H!==void 0?H:zp,credentialDefaultProvider:(J=y==null?void 0:y.credentialDefaultProvider)!==null&&J!==void 0?J:kn=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(de=y==null?void 0:y.defaultUserAgentProvider)!==null&&de!==void 0?de:Gp({serviceId:M.serviceId,clientVersion:rp().version}),maxAttempts:(pe=y==null?void 0:y.maxAttempts)!==null&&pe!==void 0?pe:Tt,region:(Oe=y==null?void 0:y.region)!==null&&Oe!==void 0?Oe:jp("Region is missing"),requestHandler:ps.create((_e=y==null?void 0:y.requestHandler)!==null&&_e!==void 0?_e:D),retryMode:(Qe=y==null?void 0:y.retryMode)!==null&&Qe!==void 0?Qe:async()=>(await D()).retryMode||rn,sha256:(qe=y==null?void 0:y.sha256)!==null&&qe!==void 0?qe:Hp,streamCollector:(St=y==null?void 0:y.streamCollector)!==null&&St!==void 0?St:Ws,useDualstackEndpoint:(_t=y==null?void 0:y.useDualstackEndpoint)!==null&&_t!==void 0?_t:()=>Promise.resolve(Mn),useFipsEndpoint:(dn=y==null?void 0:y.useFipsEndpoint)!==null&&dn!==void 0?dn:()=>Promise.resolve(Zt)}},"runtimeConfig_browser_getRuntimeConfig"),im=r(y=>{let T=r(async()=>{if(y.region===void 0)throw new Error("Region is missing from runtimeConfig");const D=y.region;return typeof D=="string"?D:D()},"runtimeConfigRegion");return{setRegion(D){T=D},region(){return T}}},"getAwsRegionExtensionConfiguration"),rm=r(y=>({region:y.region()}),"resolveAwsRegionExtensionConfiguration"),om="AWS_REGION",sm="region",ZS={environmentVariableSelector:y=>y[om],configFileSelector:y=>y[sm],default:()=>{throw new Error("Region is missing")}},qS={preferredFile:"credentials"},am=r(y=>{const T=y.httpAuthSchemes;let D=y.httpAuthSchemeProvider,M=y.credentials;return{setHttpAuthScheme(H){const J=T.findIndex(de=>de.schemeId===H.schemeId);J===-1?T.push(H):T.splice(J,1,H)},httpAuthSchemes(){return T},setHttpAuthSchemeProvider(H){D=H},httpAuthSchemeProvider(){return D},setCredentials(H){M=H},credentials(){return M}}},"getHttpAuthExtensionConfiguration"),lm=r(y=>({httpAuthSchemes:y.httpAuthSchemes(),httpAuthSchemeProvider:y.httpAuthSchemeProvider(),credentials:y.credentials()}),"resolveHttpAuthRuntimeConfig"),Qd=r(y=>y,"asPartial"),Gl=r((y,T)=>{const D={...Qd(im(y)),...Qd(Cc(y)),...Qd(f(y)),...Qd(am(y))};return T.forEach(M=>M.configure(D)),{...y,...rm(D),...Ic(D),...h(D),...lm(D)}},"resolveRuntimeExtensions");class zo extends an{destroy(){super.destroy()}constructor(...[T]){const D=nm(T||{}),M=np(D),H=ie(M),J=ke(H),de=fr(J),pe=de,Oe=so(pe),_e=tp(Oe),Qe=Gl(_e,(T==null?void 0:T.extensions)||[]);super(Qe),this.config=Qe,this.middlewareStack.use(Qt(this.config)),this.middlewareStack.use(Ea(this.config)),this.middlewareStack.use(Gi(this.config)),this.middlewareStack.use(A(this.config)),this.middlewareStack.use(R(this.config)),this.middlewareStack.use(ne(this.config)),this.middlewareStack.use($r(this.config,{httpAuthSchemeParametersProvider:Zh,identityProviderConfigProvider:async qe=>new P({"aws.auth#sigv4":qe.credentials})})),this.middlewareStack.use(Pc(this.config))}}r(zo,"ChimeSDKMessagingClient");const dm=r((y,T)=>Do(y,T).then(D=>T.utf8Encoder(D)),"collectBodyString"),zi=r((y,T)=>dm(y,T).then(D=>{if(D.length)try{return JSON.parse(D)}catch(M){throw(M==null?void 0:M.name)==="SyntaxError"&&Object.defineProperty(M,"$responseBodyText",{value:D}),M}return{}}),"parseJsonBody"),cm=r(async(y,T)=>{const D=await zi(y,T);var M;return D.message=(M=D.message)!==null&&M!==void 0?M:D.Message,D},"parseJsonErrorBody"),um=r((y,T)=>{const D=r((J,de)=>Object.keys(J).find(pe=>pe.toLowerCase()===de.toLowerCase()),"findKey"),M=r(J=>{let de=J;return typeof de=="number"&&(de=de.toString()),de.indexOf(",")>=0&&(de=de.split(",")[0]),de.indexOf(":")>=0&&(de=de.split(":")[0]),de.indexOf("#")>=0&&(de=de.split("#")[1]),de},"sanitizeErrorCode"),H=D(y.headers,"x-amzn-errortype");if(H!==void 0)return M(y.headers[H]);if(T.code!==void 0)return M(T.code);if(T.__type!==void 0)return M(T.__type)},"loadRestJsonErrorCode");class Ho extends vs{constructor(T){super(T),Object.setPrototypeOf(this,Ho.prototype)}}r(Ho,"ChimeSDKMessagingServiceException");const fm={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},hm={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},pm={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class jl extends Ho{constructor(T){super({name:"BadRequestException",$fault:"client",...T}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,jl.prototype),this.Code=T.Code,this.Message=T.Message}}r(jl,"BadRequestException");class zl extends Ho{constructor(T){super({name:"ConflictException",$fault:"client",...T}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,zl.prototype),this.Code=T.Code,this.Message=T.Message}}r(zl,"ConflictException");class $l extends Ho{constructor(T){super({name:"ForbiddenException",$fault:"client",...T}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,$l.prototype),this.Code=T.Code,this.Message=T.Message}}r($l,"ForbiddenException");class Kl extends Ho{constructor(T){super({name:"NotFoundException",$fault:"client",...T}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,Kl.prototype),this.Code=T.Code,this.Message=T.Message}}r(Kl,"NotFoundException");class Jl extends Ho{constructor(T){super({name:"ServiceFailureException",$fault:"server",...T}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,Jl.prototype),this.Code=T.Code,this.Message=T.Message}}r(Jl,"ServiceFailureException");class Yl extends Ho{constructor(T){super({name:"ServiceUnavailableException",$fault:"server",...T}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,Yl.prototype),this.Code=T.Code,this.Message=T.Message}}r(Yl,"ServiceUnavailableException");class Xl extends Ho{constructor(T){super({name:"ThrottledClientException",$fault:"client",...T}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,Xl.prototype),this.Code=T.Code,this.Message=T.Message}}r(Xl,"ThrottledClientException");class Ql extends Ho{constructor(T){super({name:"UnauthorizedClientException",$fault:"client",...T}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Ql.prototype),this.Code=T.Code,this.Message=T.Message}}r(Ql,"UnauthorizedClientException");class Zl extends Ho{constructor(T){super({name:"ResourceLimitExceededException",$fault:"client",...T}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,Zl.prototype),this.Code=T.Code,this.Message=T.Message}}r(Zl,"ResourceLimitExceededException");const mm={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},gm={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},Sm={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},vm={ASYNC:"ASYNC"},ym={ABORT:"ABORT",CONTINUE:"CONTINUE"},Em={DEFAULT:"DEFAULT",VOIP:"VOIP"},bm={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},_m={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},Tm={CONTROL:"CONTROL",STANDARD:"STANDARD"},Cm={Channel:"Channel",ChannelMessage:"ChannelMessage"},Im={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},wm={MEMBERS:"MEMBERS"},Dm={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},go=r(y=>({...y,...y.Name&&{Name:Yn}}),"IdentityFilterSensitiveLog"),sf=r(y=>({...y,...y.InvitedBy&&{InvitedBy:go(y.InvitedBy)},...y.Members&&{Members:y.Members.map(T=>go(T))}}),"BatchChannelMembershipsFilterSensitiveLog"),af=r(y=>({...y,...y.BatchChannelMemberships&&{BatchChannelMemberships:sf(y.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),lf=r(y=>({...y,...y.Name&&{Name:Yn},...y.Metadata&&{Metadata:Yn},...y.CreatedBy&&{CreatedBy:go(y.CreatedBy)}}),"ChannelFilterSensitiveLog"),df=r(y=>({...y,...y.Name&&{Name:Yn},...y.Metadata&&{Metadata:Yn}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),cf=r(y=>({...y,...y.Member&&{Member:go(y.Member)},...y.CreatedBy&&{CreatedBy:go(y.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),uf=r(y=>({...y,...y.Member&&{Member:go(y.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),ql=r(y=>({...y,...y.Name&&{Name:Yn}}),"ProcessorFilterSensitiveLog"),ff=r(y=>({...y,...y.Processors&&{Processors:y.Processors.map(T=>ql(T))},...y.Name&&{Name:Yn}}),"ChannelFlowFilterSensitiveLog"),ed=r(y=>({...y,...y.StringValues&&{StringValues:Yn}}),"MessageAttributeValueFilterSensitiveLog"),jc=r(y=>({...y,...y.Title&&{Title:Yn},...y.Body&&{Body:Yn}}),"PushNotificationConfigurationFilterSensitiveLog"),hf=r(y=>({...y,...y.Content&&{Content:Yn},...y.Metadata&&{Metadata:Yn},...y.PushNotification&&{PushNotification:jc(y.PushNotification)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((T,D)=>{let[M,H]=D;return T[M]=ed(H),T},{})},...y.ContentType&&{ContentType:Yn}}),"ChannelMessageCallbackFilterSensitiveLog"),pf=r(y=>({...y,...y.ChannelMessage&&{ChannelMessage:hf(y.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),mf=r(y=>({...y,...y.Name&&{Name:Yn},...y.Processors&&{Processors:y.Processors.map(T=>ql(T))}}),"ChannelFlowSummaryFilterSensitiveLog"),gf=r(y=>({...y,...y.InvitedBy&&{InvitedBy:go(y.InvitedBy)},...y.Member&&{Member:go(y.Member)}}),"ChannelMembershipFilterSensitiveLog"),td=r(y=>({...y,...y.Name&&{Name:Yn},...y.Metadata&&{Metadata:Yn}}),"ChannelSummaryFilterSensitiveLog"),zc=r(y=>({...y,...y.ChannelSummary&&{ChannelSummary:td(y.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),Sf=r(y=>({...y,...y.FilterRule&&{FilterRule:Yn}}),"PushNotificationPreferencesFilterSensitiveLog"),Zd=r(y=>({...y,...y.PushNotifications&&{PushNotifications:Sf(y.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),vf=r(y=>({...y,...y.Member&&{Member:go(y.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),yf=r(y=>({...y,...y.Content&&{Content:Yn},...y.Metadata&&{Metadata:Yn},...y.Sender&&{Sender:go(y.Sender)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((T,D)=>{let[M,H]=D;return T[M]=ed(H),T},{})},...y.ContentType&&{ContentType:Yn}}),"ChannelMessageFilterSensitiveLog"),Ef=r(y=>({...y,...y.Content&&{Content:Yn},...y.Metadata&&{Metadata:Yn},...y.Sender&&{Sender:go(y.Sender)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((T,D)=>{let[M,H]=D;return T[M]=ed(H),T},{})},...y.ContentType&&{ContentType:Yn}}),"ChannelMessageSummaryFilterSensitiveLog"),$c=r(y=>({...y,...y.ChannelSummary&&{ChannelSummary:td(y.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),bf=r(y=>({...y,...y.Moderator&&{Moderator:go(y.Moderator)},...y.CreatedBy&&{CreatedBy:go(y.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),_f=r(y=>({...y,...y.Moderator&&{Moderator:go(y.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),nd=r(y=>({...y,...y.Key&&{Key:Yn},...y.Value&&{Value:Yn}}),"TagFilterSensitiveLog"),Tf=r(y=>({...y,...y.Name&&{Name:Yn},...y.Metadata&&{Metadata:Yn},...y.ClientRequestToken&&{ClientRequestToken:Yn},...y.Tags&&{Tags:y.Tags.map(T=>nd(T))},...y.ChannelId&&{ChannelId:Yn}}),"CreateChannelRequestFilterSensitiveLog"),Cf=r(y=>({...y,...y.Member&&{Member:go(y.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),If=r(y=>({...y,...y.Processors&&{Processors:y.Processors.map(T=>ql(T))},...y.Name&&{Name:Yn},...y.Tags&&{Tags:y.Tags.map(T=>nd(T))},...y.ClientRequestToken&&{ClientRequestToken:Yn}}),"CreateChannelFlowRequestFilterSensitiveLog"),wf=r(y=>({...y,...y.Member&&{Member:go(y.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),Df=r(y=>({...y,...y.ChannelModerator&&{ChannelModerator:go(y.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),Af=r(y=>({...y,...y.Channel&&{Channel:lf(y.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),Of=r(y=>({...y,...y.ChannelBan&&{ChannelBan:cf(y.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),Mf=r(y=>({...y,...y.ChannelFlow&&{ChannelFlow:ff(y.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),Rf=r(y=>({...y,...y.ChannelMembership&&{ChannelMembership:gf(y.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),Pf=r(y=>({...y,...y.ChannelMembership&&{ChannelMembership:zc(y.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),kf=r(y=>({...y,...y.Channel&&{Channel:$c(y.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),Nf=r(y=>({...y,...y.ChannelModerator&&{ChannelModerator:bf(y.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),Lf=r(y=>({...y,...y.Member&&{Member:go(y.Member)},...y.Preferences&&{Preferences:Zd(y.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),Ff=r(y=>({...y,...y.ChannelMessage&&{ChannelMessage:yf(y.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),Bf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelBansRequestFilterSensitiveLog"),xf=r(y=>({...y,...y.NextToken&&{NextToken:Yn},...y.ChannelBans&&{ChannelBans:y.ChannelBans.map(T=>uf(T))}}),"ListChannelBansResponseFilterSensitiveLog"),Uf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelFlowsRequestFilterSensitiveLog"),Vf=r(y=>({...y,...y.ChannelFlows&&{ChannelFlows:y.ChannelFlows.map(T=>mf(T))},...y.NextToken&&{NextToken:Yn}}),"ListChannelFlowsResponseFilterSensitiveLog"),Hf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelMembershipsRequestFilterSensitiveLog"),Wf=r(y=>({...y,...y.ChannelMemberships&&{ChannelMemberships:y.ChannelMemberships.map(T=>vf(T))},...y.NextToken&&{NextToken:Yn}}),"ListChannelMembershipsResponseFilterSensitiveLog"),Gf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),jf=r(y=>({...y,...y.ChannelMemberships&&{ChannelMemberships:y.ChannelMemberships.map(T=>zc(T))},...y.NextToken&&{NextToken:Yn}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),zf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelMessagesRequestFilterSensitiveLog"),$f=r(y=>({...y,...y.NextToken&&{NextToken:Yn},...y.ChannelMessages&&{ChannelMessages:y.ChannelMessages.map(T=>Ef(T))}}),"ListChannelMessagesResponseFilterSensitiveLog"),Kf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelModeratorsRequestFilterSensitiveLog"),Jf=r(y=>({...y,...y.NextToken&&{NextToken:Yn},...y.ChannelModerators&&{ChannelModerators:y.ChannelModerators.map(T=>_f(T))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),Yf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelsRequestFilterSensitiveLog"),Xf=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(T=>td(T))},...y.NextToken&&{NextToken:Yn}}),"ListChannelsResponseFilterSensitiveLog"),Qf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),Zf=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(T=>df(T))},...y.NextToken&&{NextToken:Yn}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),qf=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),eh=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(T=>$c(T))},...y.NextToken&&{NextToken:Yn}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),th=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListSubChannelsRequestFilterSensitiveLog"),nh=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"ListSubChannelsResponseFilterSensitiveLog"),ih=r(y=>({...y,...y.Tags&&{Tags:y.Tags.map(T=>nd(T))}}),"ListTagsForResourceResponseFilterSensitiveLog"),rh=r(y=>({...y,...y.Preferences&&{Preferences:Zd(y.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),oh=r(y=>({...y,...y.Member&&{Member:go(y.Member)},...y.Preferences&&{Preferences:Zd(y.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),sh=r(y=>({...y,...y.NextToken&&{NextToken:Yn}}),"SearchChannelsRequestFilterSensitiveLog"),ah=r(y=>({...y,...y.Channels&&{Channels:y.Channels.map(T=>td(T))},...y.NextToken&&{NextToken:Yn}}),"SearchChannelsResponseFilterSensitiveLog"),lh=r(y=>({...y,...y.Content&&{Content:Yn},...y.Metadata&&{Metadata:Yn},...y.ClientRequestToken&&{ClientRequestToken:Yn},...y.PushNotification&&{PushNotification:jc(y.PushNotification)},...y.MessageAttributes&&{MessageAttributes:Object.entries(y.MessageAttributes).reduce((T,D)=>{let[M,H]=D;return T[M]=ed(H),T},{})},...y.ContentType&&{ContentType:Yn}}),"SendChannelMessageRequestFilterSensitiveLog"),dh=r(y=>({...y,...y.Tags&&{Tags:y.Tags.map(T=>nd(T))}}),"TagResourceRequestFilterSensitiveLog"),ch=r(y=>({...y,...y.TagKeys&&{TagKeys:Yn}}),"UntagResourceRequestFilterSensitiveLog"),uh=r(y=>({...y,...y.Name&&{Name:Yn},...y.Metadata&&{Metadata:Yn}}),"UpdateChannelRequestFilterSensitiveLog"),fh=r(y=>({...y,...y.Processors&&{Processors:y.Processors.map(T=>ql(T))},...y.Name&&{Name:Yn}}),"UpdateChannelFlowRequestFilterSensitiveLog"),hh=r(y=>({...y,...y.Content&&{Content:Yn},...y.Metadata&&{Metadata:Yn},...y.ContentType&&{ContentType:Yn}}),"UpdateChannelMessageRequestFilterSensitiveLog"),Am=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/channel-flow"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return H=JSON.stringify(Dn(y,{ChannelFlowArn:[]})),D.m("PUT").h(M).b(H),D.build()},"se_AssociateChannelFlowCommand"),Om=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/memberships"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[wa]:[,"batch-create"]});let J;return J=JSON.stringify(Dn(y,{MemberArns:de=>Xn(de),SubChannelId:[],Type:[]})),D.m("POST").h(M).q(H).b(J),D.build()},"se_BatchCreateChannelMembershipCommand"),Mm=r(async(y,T)=>{const D=vt(y,T),M={"content-type":"application/json"};D.bp("/channels/{ChannelArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[wa]:[,"channel-flow-callback"]});let J;return J=JSON.stringify(Dn(y,{CallbackId:[!0,de=>de??Co()],ChannelMessage:de=>Xn(de),DeleteResource:[]})),D.m("POST").h(M).q(H).b(J),D.build()},"se_ChannelFlowCallbackCommand"),Rm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels");let H;return H=JSON.stringify(Dn(y,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,J=>J??Co()],ElasticChannelConfiguration:J=>Xn(J),ExpirationSettings:J=>Xn(J),MemberArns:J=>Xn(J),Metadata:[],Mode:[],ModeratorArns:J=>Xn(J),Name:[],Privacy:[],Tags:J=>Xn(J)})),D.m("POST").h(M).b(H),D.build()},"se_CreateChannelCommand"),Pm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/bans"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return H=JSON.stringify(Dn(y,{MemberArn:[]})),D.m("POST").h(M).b(H),D.build()},"se_CreateChannelBanCommand"),km=r(async(y,T)=>{const D=vt(y,T),M={"content-type":"application/json"};D.bp("/channel-flows");let H;return H=JSON.stringify(Dn(y,{AppInstanceArn:[],ClientRequestToken:[!0,J=>J??Co()],Name:[],Processors:J=>Xn(J),Tags:J=>Xn(J)})),D.m("POST").h(M).b(H),D.build()},"se_CreateChannelFlowCommand"),Nm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/memberships"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return H=JSON.stringify(Dn(y,{MemberArn:[],SubChannelId:[],Type:[]})),D.m("POST").h(M).b(H),D.build()},"se_CreateChannelMembershipCommand"),Lm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/moderators"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return H=JSON.stringify(Dn(y,{ChannelModeratorArn:[]})),D.m("POST").h(M).b(H),D.build()},"se_CreateChannelModeratorCommand"),Fm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return D.m("DELETE").h(M).b(H),D.build()},"se_DeleteChannelCommand"),Bm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/bans/{MemberArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let H;return D.m("DELETE").h(M).b(H),D.build()},"se_DeleteChannelBanCommand"),xm=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/channel-flows/{ChannelFlowArn}"),D.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let H;return D.m("DELETE").h(M).b(H),D.build()},"se_DeleteChannelFlowCommand"),Um=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);const H=Ht({[Qs]:[,y[Xs]]});let J;return D.m("DELETE").h(M).q(H).b(J),D.build()},"se_DeleteChannelMembershipCommand"),Vm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/messages/{MessageId}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const H=Ht({[Qs]:[,y[Xs]]});let J;return D.m("DELETE").h(M).q(H).b(J),D.build()},"se_DeleteChannelMessageCommand"),Hm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("ChannelModeratorArn",()=>y.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let H;return D.m("DELETE").h(M).b(H),D.build()},"se_DeleteChannelModeratorCommand"),Wm=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),D.p("AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let H;return D.m("DELETE").h(M).b(H),D.build()},"se_DeleteMessagingStreamingConfigurationsCommand"),Gm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return D.m("GET").h(M).b(H),D.build()},"se_DescribeChannelCommand"),jm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/bans/{MemberArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let H;return D.m("GET").h(M).b(H),D.build()},"se_DescribeChannelBanCommand"),zm=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/channel-flows/{ChannelFlowArn}"),D.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let H;return D.m("GET").h(M).b(H),D.build()},"se_DescribeChannelFlowCommand"),$m=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);const H=Ht({[Qs]:[,y[Xs]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_DescribeChannelMembershipCommand"),Km=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[Da]:[,"app-instance-user-membership"],[od]:[,jn(y[Fs],"AppInstanceUserArn")]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_DescribeChannelMembershipForAppInstanceUserCommand"),Jm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[Da]:[,"app-instance-user-moderated-channel"],[od]:[,jn(y[Fs],"AppInstanceUserArn")]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_DescribeChannelModeratedByAppInstanceUserCommand"),Ym=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("ChannelModeratorArn",()=>y.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let H;return D.m("GET").h(M).b(H),D.build()},"se_DescribeChannelModeratorCommand"),Xm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let H;return D.m("DELETE").h(M).b(H),D.build()},"se_DisassociateChannelFlowCommand"),Qm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let H;return D.m("GET").h(M).b(H),D.build()},"se_GetChannelMembershipPreferencesCommand"),Zm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/messages/{MessageId}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const H=Ht({[Qs]:[,y[Xs]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_GetChannelMessageCommand"),qm=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/messages/{MessageId}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const H=Ht({[Da]:[,"message-status"],[Qs]:[,y[Xs]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_GetChannelMessageStatusCommand"),eg=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/endpoints/messaging-session");let H;return D.m("GET").h(M).b(H),D.build()},"se_GetMessagingSessionEndpointCommand"),tg=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),D.p("AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let H;return D.m("GET").h(M).b(H),D.build()},"se_GetMessagingStreamingConfigurationsCommand"),ng=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/bans"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelBansCommand"),ig=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/channel-flows");const H=Ht({[Ko]:[,jn(y[es],"AppInstanceArn")],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelFlowsCommand"),rg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/memberships"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[Aa]:[,y[du]],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]],[Qs]:[,y[Xs]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelMembershipsCommand"),og=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels");const H=Ht({[Da]:[,"app-instance-user-memberships"],[od]:[,y[Fs]],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelMembershipsForAppInstanceUserCommand"),sg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/messages"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[Dh]:[,y[oc]],[fu]:[()=>y.NotBefore!==void 0,()=>ls(y[Qa]).toString()],[uu]:[()=>y.NotAfter!==void 0,()=>ls(y[_h]).toString()],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]],[Qs]:[,y[Xs]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelMessagesCommand"),ag=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/moderators"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelModeratorsCommand"),lg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels");const H=Ht({[Ko]:[,jn(y[es],"AppInstanceArn")],[wh]:[,y[Th]],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelsCommand"),dg=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/channels");const H=Ht({[Da]:[,"channel-flow-associations"],[Ih]:[,jn(y[bh],"ChannelFlowArn")],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelsAssociatedWithChannelFlowCommand"),cg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels");const H=Ht({[Da]:[,"app-instance-user-moderated-channels"],[od]:[,y[Fs]],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListChannelsModeratedByAppInstanceUserCommand"),ug=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/subchannels"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const H=Ht({[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListSubChannelsCommand"),fg=r(async(y,T)=>{const D=vt(y,T),M={};D.bp("/tags");const H=Ht({[cu]:[,jn(y[Ch],"ResourceARN")]});let J;return D.m("GET").h(M).q(H).b(J),D.build()},"se_ListTagsForResourceCommand"),hg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/expiration-settings"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return H=JSON.stringify(Dn(y,{ExpirationSettings:J=>Xn(J)})),D.m("PUT").h(M).b(H),D.build()},"se_PutChannelExpirationSettingsCommand"),ph=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let H;return H=JSON.stringify(Dn(y,{Preferences:J=>Xn(J)})),D.m("PUT").h(M).b(H),D.build()},"se_PutChannelMembershipPreferencesCommand"),pg=r(async(y,T)=>{const D=vt(y,T),M={"content-type":"application/json"};D.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),D.p("AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let H;return H=JSON.stringify(Dn(y,{StreamingConfigurations:J=>Xn(J)})),D.m("PUT").h(M).b(H),D.build()},"se_PutMessagingStreamingConfigurationsCommand"),mg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/messages/{MessageId}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MessageId",()=>y.MessageId,"{MessageId}",!1);const H=Ht({[wa]:[,"redact"]});let J;return J=JSON.stringify(Dn(y,{SubChannelId:[]})),D.m("POST").h(M).q(H).b(J),D.build()},"se_RedactChannelMessageCommand"),gg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels");const H=Ht({[wa]:[,"search"],[ts]:[()=>y.MaxResults!==void 0,()=>y[$o].toString()],[ns]:[,y[Wo]]});let J;return J=JSON.stringify(Dn(y,{Fields:de=>Xn(de)})),D.m("POST").h(M).q(H).b(J),D.build()},"se_SearchChannelsCommand"),Sg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/messages"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return H=JSON.stringify(Dn(y,{ClientRequestToken:[!0,J=>J??Co()],Content:[],ContentType:[],MessageAttributes:J=>Xn(J),Metadata:[],Persistence:[],PushNotification:J=>Xn(J),SubChannelId:[],Target:J=>Xn(J),Type:[]})),D.m("POST").h(M).b(H),D.build()},"se_SendChannelMessageCommand"),vg=r(async(y,T)=>{const D=vt(y,T),M={"content-type":"application/json"};D.bp("/tags");const H=Ht({[wa]:[,"tag-resource"]});let J;return J=JSON.stringify(Dn(y,{ResourceARN:[],Tags:de=>Xn(de)})),D.m("POST").h(M).q(H).b(J),D.build()},"se_TagResourceCommand"),yg=r(async(y,T)=>{const D=vt(y,T),M={"content-type":"application/json"};D.bp("/tags");const H=Ht({[wa]:[,"untag-resource"]});let J;return J=JSON.stringify(Dn(y,{ResourceARN:[],TagKeys:de=>Xn(de)})),D.m("POST").h(M).q(H).b(J),D.build()},"se_UntagResourceCommand"),Eg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return H=JSON.stringify(Dn(y,{Metadata:[],Mode:[],Name:[]})),D.m("PUT").h(M).b(H),D.build()},"se_UpdateChannelCommand"),bg=r(async(y,T)=>{const D=vt(y,T),M={"content-type":"application/json"};D.bp("/channel-flows/{ChannelFlowArn}"),D.p("ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let H;return H=JSON.stringify(Dn(y,{Name:[],Processors:J=>Xn(J)})),D.m("PUT").h(M).b(H),D.build()},"se_UpdateChannelFlowCommand"),_g=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{"content-type":"application/json",[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/messages/{MessageId}"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),D.p("MessageId",()=>y.MessageId,"{MessageId}",!1);let H;return H=JSON.stringify(Dn(y,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),D.m("PUT").h(M).b(H),D.build()},"se_UpdateChannelMessageCommand"),Tg=r(async(y,T)=>{const D=vt(y,T),M=Ht({},Yi,{[Ki]:y[$i]});D.bp("/channels/{ChannelArn}/readMarker"),D.p("ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let H;return D.m("PUT").h(M).b(H),D.build()},"se_UpdateChannelReadMarkerCommand"),Cg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_AssociateChannelFlowCommand"),Ig=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{BatchChannelMemberships:Xn,Errors:Xn});return Object.assign(D,H),D},"de_BatchCreateChannelMembershipCommand"),wg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{CallbackId:on,ChannelArn:on});return Object.assign(D,H),D},"de_ChannelFlowCallbackCommand"),Dg=r(async(y,T)=>{if(y.statusCode!==201&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on});return Object.assign(D,H),D},"de_CreateChannelCommand"),Ag=r(async(y,T)=>{if(y.statusCode!==201&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,Member:Xn});return Object.assign(D,H),D},"de_CreateChannelBanCommand"),Og=r(async(y,T)=>{if(y.statusCode!==201&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelFlowArn:on});return Object.assign(D,H),D},"de_CreateChannelFlowCommand"),Mg=r(async(y,T)=>{if(y.statusCode!==201&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,Member:Xn,SubChannelId:on});return Object.assign(D,H),D},"de_CreateChannelMembershipCommand"),Rg=r(async(y,T)=>{if(y.statusCode!==201&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,ChannelModerator:Xn});return Object.assign(D,H),D},"de_CreateChannelModeratorCommand"),Pg=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DeleteChannelCommand"),kg=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DeleteChannelBanCommand"),Ng=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DeleteChannelFlowCommand"),Lg=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DeleteChannelMembershipCommand"),Fg=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DeleteChannelMessageCommand"),Bg=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DeleteChannelModeratorCommand"),xg=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DeleteMessagingStreamingConfigurationsCommand"),Ug=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Channel:J=>yr(J,T)});return Object.assign(D,H),D},"de_DescribeChannelCommand"),Vg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelBan:J=>nu(J,T)});return Object.assign(D,H),D},"de_DescribeChannelBanCommand"),Hg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelFlow:J=>iu(J,T)});return Object.assign(D,H),D},"de_DescribeChannelFlowCommand"),j=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelMembership:J=>yh(J,T)});return Object.assign(D,H),D},"de_DescribeChannelMembershipCommand"),Wg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelMembership:J=>ru(J,T)});return Object.assign(D,H),D},"de_DescribeChannelMembershipForAppInstanceUserCommand"),Gg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Channel:J=>ou(J,T)});return Object.assign(D,H),D},"de_DescribeChannelModeratedByAppInstanceUserCommand"),jg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelModerator:J=>Xa(J,T)});return Object.assign(D,H),D},"de_DescribeChannelModeratorCommand"),zg=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_DisassociateChannelFlowCommand"),$g=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,Member:Xn,Preferences:Xn});return Object.assign(D,H),D},"de_GetChannelMembershipPreferencesCommand"),Kg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelMessage:J=>Eh(J,T)});return Object.assign(D,H),D},"de_GetChannelMessageCommand"),Jg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Status:Xn});return Object.assign(D,H),D},"de_GetChannelMessageStatusCommand"),Yg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Endpoint:Xn});return Object.assign(D,H),D},"de_GetMessagingSessionEndpointCommand"),Xg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{StreamingConfigurations:Xn});return Object.assign(D,H),D},"de_GetMessagingStreamingConfigurationsCommand"),Qg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,ChannelBans:Xn,NextToken:on});return Object.assign(D,H),D},"de_ListChannelBansCommand"),Zg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelFlows:Xn,NextToken:on});return Object.assign(D,H),D},"de_ListChannelFlowsCommand"),qg=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,ChannelMemberships:Xn,NextToken:on});return Object.assign(D,H),D},"de_ListChannelMembershipsCommand"),_r=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelMemberships:J=>nc(J,T),NextToken:on});return Object.assign(D,H),D},"de_ListChannelMembershipsForAppInstanceUserCommand"),ci=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,ChannelMessages:J=>ic(J,T),NextToken:on,SubChannelId:on});return Object.assign(D,H),D},"de_ListChannelMessagesCommand"),qd=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,ChannelModerators:Xn,NextToken:on});return Object.assign(D,H),D},"de_ListChannelModeratorsCommand"),Kc=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Channels:J=>au(J,T),NextToken:on});return Object.assign(D,H),D},"de_ListChannelsCommand"),Qr=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Channels:Xn,NextToken:on});return Object.assign(D,H),D},"de_ListChannelsAssociatedWithChannelFlowCommand"),Jc=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Channels:J=>su(J,T),NextToken:on});return Object.assign(D,H),D},"de_ListChannelsModeratedByAppInstanceUserCommand"),no=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,NextToken:on,SubChannels:Xn});return Object.assign(D,H),D},"de_ListSubChannelsCommand"),bt=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Tags:Xn});return Object.assign(D,H),D},"de_ListTagsForResourceCommand"),us=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,ExpirationSettings:Xn});return Object.assign(D,H),D},"de_PutChannelExpirationSettingsCommand"),Yc=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,Member:Xn,Preferences:Xn});return Object.assign(D,H),D},"de_PutChannelMembershipPreferencesCommand"),sr=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{StreamingConfigurations:Xn});return Object.assign(D,H),D},"de_PutMessagingStreamingConfigurationsCommand"),Fo=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,MessageId:on,SubChannelId:on});return Object.assign(D,H),D},"de_RedactChannelMessageCommand"),Ro=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{Channels:J=>au(J,T),NextToken:on});return Object.assign(D,H),D},"de_SearchChannelsCommand"),Xc=r(async(y,T)=>{if(y.statusCode!==201&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,MessageId:on,Status:Xn,SubChannelId:on});return Object.assign(D,H),D},"de_SendChannelMessageCommand"),Ja=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_TagResourceCommand"),Kt=r(async(y,T)=>{if(y.statusCode!==204&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)});return await Do(y.body,T),D},"de_UntagResourceCommand"),Bo=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on});return Object.assign(D,H),D},"de_UpdateChannelCommand"),mh=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelFlowArn:on});return Object.assign(D,H),D},"de_UpdateChannelFlowCommand"),gh=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on,MessageId:on,Status:Xn,SubChannelId:on});return Object.assign(D,H),D},"de_UpdateChannelMessageCommand"),Qc=r(async(y,T)=>{if(y.statusCode!==200&&y.statusCode>=300)return gi(y,T);const D=Ht({$metadata:ht(y)}),M=jn(ki(await zi(y.body,T)),"body"),H=Dn(M,{ChannelArn:on});return Object.assign(D,H),D},"de_UpdateChannelReadMarkerCommand"),gi=r(async(y,T)=>{const D={...y,body:await cm(y.body,T)},M=um(y,D.body);switch(M){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Ya(D,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await ec(D,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await qc(D,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await eu(D,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Sh(D,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await vh(D,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await tu(D,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await id(D,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await tc(D,T);default:const H=D.body;return Zc({output:y,parsedBody:H,errorCode:M})}},"de_CommandError"),Zc=Sc(Ho),Ya=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new jl({$metadata:ht(y),...D});return jo(J,y.body)},"de_BadRequestExceptionRes"),ec=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new zl({$metadata:ht(y),...D});return jo(J,y.body)},"de_ConflictExceptionRes"),qc=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new $l({$metadata:ht(y),...D});return jo(J,y.body)},"de_ForbiddenExceptionRes"),eu=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new Kl({$metadata:ht(y),...D});return jo(J,y.body)},"de_NotFoundExceptionRes"),tc=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new Zl({$metadata:ht(y),...D});return jo(J,y.body)},"de_ResourceLimitExceededExceptionRes"),Sh=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new Jl({$metadata:ht(y),...D});return jo(J,y.body)},"de_ServiceFailureExceptionRes"),vh=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new Yl({$metadata:ht(y),...D});return jo(J,y.body)},"de_ServiceUnavailableExceptionRes"),tu=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new Xl({$metadata:ht(y),...D});return jo(J,y.body)},"de_ThrottledClientExceptionRes"),id=r(async(y,T)=>{const D=Ht({}),M=y.body,H=Dn(M,{Code:on,Message:on});Object.assign(D,H);const J=new Ql({$metadata:ht(y),...D});return jo(J,y.body)},"de_UnauthorizedClientExceptionRes"),Tr=r((y,T)=>Dn(y,{ReadMarkerTimestamp:D=>jn(Nr(kr(D))),SubChannelId:on,Type:on}),"de_AppInstanceUserMembershipSummary"),yr=r((y,T)=>Dn(y,{ChannelArn:on,ChannelFlowArn:on,CreatedBy:Xn,CreatedTimestamp:D=>jn(Nr(kr(D))),ElasticChannelConfiguration:Xn,ExpirationSettings:Xn,LastMessageTimestamp:D=>jn(Nr(kr(D))),LastUpdatedTimestamp:D=>jn(Nr(kr(D))),Metadata:on,Mode:on,Name:on,Privacy:on}),"de_Channel"),nu=r((y,T)=>Dn(y,{ChannelArn:on,CreatedBy:Xn,CreatedTimestamp:D=>jn(Nr(kr(D))),Member:Xn}),"de_ChannelBan"),iu=r((y,T)=>Dn(y,{ChannelFlowArn:on,CreatedTimestamp:D=>jn(Nr(kr(D))),LastUpdatedTimestamp:D=>jn(Nr(kr(D))),Name:on,Processors:Xn}),"de_ChannelFlow"),yh=r((y,T)=>Dn(y,{ChannelArn:on,CreatedTimestamp:D=>jn(Nr(kr(D))),InvitedBy:Xn,LastUpdatedTimestamp:D=>jn(Nr(kr(D))),Member:Xn,SubChannelId:on,Type:on}),"de_ChannelMembership"),ru=r((y,T)=>Dn(y,{AppInstanceUserMembershipSummary:D=>Tr(D,T),ChannelSummary:D=>rd(D,T)}),"de_ChannelMembershipForAppInstanceUserSummary"),nc=r((y,T)=>(y||[]).filter(M=>M!=null).map(M=>ru(M,T)),"de_ChannelMembershipForAppInstanceUserSummaryList"),Eh=r((y,T)=>Dn(y,{ChannelArn:on,Content:on,ContentType:on,CreatedTimestamp:D=>jn(Nr(kr(D))),LastEditedTimestamp:D=>jn(Nr(kr(D))),LastUpdatedTimestamp:D=>jn(Nr(kr(D))),MessageAttributes:Xn,MessageId:on,Metadata:on,Persistence:on,Redacted:ga,Sender:Xn,Status:Xn,SubChannelId:on,Target:Xn,Type:on}),"de_ChannelMessage"),Ca=r((y,T)=>Dn(y,{Content:on,ContentType:on,CreatedTimestamp:D=>jn(Nr(kr(D))),LastEditedTimestamp:D=>jn(Nr(kr(D))),LastUpdatedTimestamp:D=>jn(Nr(kr(D))),MessageAttributes:Xn,MessageId:on,Metadata:on,Redacted:ga,Sender:Xn,Status:Xn,Target:Xn,Type:on}),"de_ChannelMessageSummary"),ic=r((y,T)=>(y||[]).filter(M=>M!=null).map(M=>Ca(M,T)),"de_ChannelMessageSummaryList"),ou=r((y,T)=>Dn(y,{ChannelSummary:D=>rd(D,T)}),"de_ChannelModeratedByAppInstanceUserSummary"),su=r((y,T)=>(y||[]).filter(M=>M!=null).map(M=>ou(M,T)),"de_ChannelModeratedByAppInstanceUserSummaryList"),Xa=r((y,T)=>Dn(y,{ChannelArn:on,CreatedBy:Xn,CreatedTimestamp:D=>jn(Nr(kr(D))),Moderator:Xn}),"de_ChannelModerator"),rd=r((y,T)=>Dn(y,{ChannelArn:on,LastMessageTimestamp:D=>jn(Nr(kr(D))),Metadata:on,Mode:on,Name:on,Privacy:on}),"de_ChannelSummary"),au=r((y,T)=>(y||[]).filter(M=>M!=null).map(M=>rd(M,T)),"de_ChannelSummaryList");var Ia,rc;const ht=r(y=>({httpStatusCode:y.statusCode,requestId:(rc=(Ia=y.headers["x-amzn-requestid"])!==null&&Ia!==void 0?Ia:y.headers["x-amzn-request-id"])!==null&&rc!==void 0?rc:y.headers["x-amz-request-id"],extendedRequestId:y.headers["x-amz-id-2"],cfId:y.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),lu=r((y,T)=>collectBody(y,T).then(D=>T.utf8Encoder(D)),"Aws_restJson1_collectBodyString"),es="AppInstanceArn",Fs="AppInstanceUserArn",$i="ChimeBearer",bh="ChannelFlowArn",$o="MaxResults",_h="NotAfter",Qa="NotBefore",Wo="NextToken",Th="Privacy",Ch="ResourceARN",Xs="SubChannelId",oc="SortOrder",du="Type",cu="arn",Ko="app-instance-arn",od="app-instance-user-arn",Ih="channel-flow-arn",ts="max-results",uu="not-after",fu="not-before",ns="next-token",wa="operation",wh="privacy",Da="scope",Qs="sub-channel-id",Dh="sort-order",Aa="type",Ki="x-amz-chime-bearer";class sc extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","AssociateChannelFlow",{}).n("ChimeSDKMessagingClient","AssociateChannelFlowCommand").f(void 0,void 0).ser(Am).de(Cg).build(){}r(sc,"AssociateChannelFlowCommand");class sd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","BatchCreateChannelMembership",{}).n("ChimeSDKMessagingClient","BatchCreateChannelMembershipCommand").f(void 0,af).ser(Om).de(Ig).build(){}r(sd,"BatchCreateChannelMembershipCommand");class fs extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ChannelFlowCallback",{}).n("ChimeSDKMessagingClient","ChannelFlowCallbackCommand").f(pf,void 0).ser(Mm).de(wg).build(){}r(fs,"ChannelFlowCallbackCommand");class Za extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelBan",{}).n("ChimeSDKMessagingClient","CreateChannelBanCommand").f(void 0,Cf).ser(Pm).de(Ag).build(){}r(Za,"CreateChannelBanCommand");class qa extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannel",{}).n("ChimeSDKMessagingClient","CreateChannelCommand").f(Tf,void 0).ser(Rm).de(Dg).build(){}r(qa,"CreateChannelCommand");class ad extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelFlow",{}).n("ChimeSDKMessagingClient","CreateChannelFlowCommand").f(If,void 0).ser(km).de(Og).build(){}r(ad,"CreateChannelFlowCommand");class Oa extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelMembership",{}).n("ChimeSDKMessagingClient","CreateChannelMembershipCommand").f(void 0,wf).ser(Nm).de(Mg).build(){}r(Oa,"CreateChannelMembershipCommand");class el extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","CreateChannelModerator",{}).n("ChimeSDKMessagingClient","CreateChannelModeratorCommand").f(void 0,Df).ser(Lm).de(Rg).build(){}r(el,"CreateChannelModeratorCommand");class ca extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelBan",{}).n("ChimeSDKMessagingClient","DeleteChannelBanCommand").f(void 0,void 0).ser(Bm).de(kg).build(){}r(ca,"DeleteChannelBanCommand");class tl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannel",{}).n("ChimeSDKMessagingClient","DeleteChannelCommand").f(void 0,void 0).ser(Fm).de(Pg).build(){}r(tl,"DeleteChannelCommand");class ld extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelFlow",{}).n("ChimeSDKMessagingClient","DeleteChannelFlowCommand").f(void 0,void 0).ser(xm).de(Ng).build(){}r(ld,"DeleteChannelFlowCommand");class dd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelMembership",{}).n("ChimeSDKMessagingClient","DeleteChannelMembershipCommand").f(void 0,void 0).ser(Um).de(Lg).build(){}r(dd,"DeleteChannelMembershipCommand");class cd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelMessage",{}).n("ChimeSDKMessagingClient","DeleteChannelMessageCommand").f(void 0,void 0).ser(Vm).de(Fg).build(){}r(cd,"DeleteChannelMessageCommand");class ud extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteChannelModerator",{}).n("ChimeSDKMessagingClient","DeleteChannelModeratorCommand").f(void 0,void 0).ser(Hm).de(Bg).build(){}r(ud,"DeleteChannelModeratorCommand");class fd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DeleteMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","DeleteMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(Wm).de(xg).build(){}r(fd,"DeleteMessagingStreamingConfigurationsCommand");class hd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelBan",{}).n("ChimeSDKMessagingClient","DescribeChannelBanCommand").f(void 0,Of).ser(jm).de(Vg).build(){}r(hd,"DescribeChannelBanCommand");class ac extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannel",{}).n("ChimeSDKMessagingClient","DescribeChannelCommand").f(void 0,Af).ser(Gm).de(Ug).build(){}r(ac,"DescribeChannelCommand");class nl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelFlow",{}).n("ChimeSDKMessagingClient","DescribeChannelFlowCommand").f(void 0,Mf).ser(zm).de(Hg).build(){}r(nl,"DescribeChannelFlowCommand");class il extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelMembership",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipCommand").f(void 0,Rf).ser($m).de(j).build(){}r(il,"DescribeChannelMembershipCommand");class Zs extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelMembershipForAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipForAppInstanceUserCommand").f(void 0,Pf).ser(Km).de(Wg).build(){}r(Zs,"DescribeChannelMembershipForAppInstanceUserCommand");class rl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratedByAppInstanceUserCommand").f(void 0,kf).ser(Jm).de(Gg).build(){}r(rl,"DescribeChannelModeratedByAppInstanceUserCommand");class qs extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DescribeChannelModerator",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratorCommand").f(void 0,Nf).ser(Ym).de(jg).build(){}r(qs,"DescribeChannelModeratorCommand");class ol extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","DisassociateChannelFlow",{}).n("ChimeSDKMessagingClient","DisassociateChannelFlowCommand").f(void 0,void 0).ser(Xm).de(zg).build(){}r(ol,"DisassociateChannelFlowCommand");class sl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","GetChannelMembershipPreferencesCommand").f(void 0,Lf).ser(Qm).de($g).build(){}r(sl,"GetChannelMembershipPreferencesCommand");class pd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMessage",{}).n("ChimeSDKMessagingClient","GetChannelMessageCommand").f(void 0,Ff).ser(Zm).de(Kg).build(){}r(pd,"GetChannelMessageCommand");class al extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetChannelMessageStatus",{}).n("ChimeSDKMessagingClient","GetChannelMessageStatusCommand").f(void 0,void 0).ser(qm).de(Jg).build(){}r(al,"GetChannelMessageStatusCommand");class Ma extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetMessagingSessionEndpoint",{}).n("ChimeSDKMessagingClient","GetMessagingSessionEndpointCommand").f(void 0,void 0).ser(eg).de(Yg).build(){}r(Ma,"GetMessagingSessionEndpointCommand");class md extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","GetMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","GetMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(tg).de(Xg).build(){}r(md,"GetMessagingStreamingConfigurationsCommand");class ll extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelBans",{}).n("ChimeSDKMessagingClient","ListChannelBansCommand").f(Bf,xf).ser(ng).de(Qg).build(){}r(ll,"ListChannelBansCommand");class dl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelFlows",{}).n("ChimeSDKMessagingClient","ListChannelFlowsCommand").f(Uf,Vf).ser(ig).de(Zg).build(){}r(dl,"ListChannelFlowsCommand");class cl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMemberships",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsCommand").f(Hf,Wf).ser(rg).de(qg).build(){}r(cl,"ListChannelMembershipsCommand");class Eo extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMembershipsForAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsForAppInstanceUserCommand").f(Gf,jf).ser(og).de(_r).build(){}r(Eo,"ListChannelMembershipsForAppInstanceUserCommand");class Ra extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelMessages",{}).n("ChimeSDKMessagingClient","ListChannelMessagesCommand").f(zf,$f).ser(sg).de(ci).build(){}r(Ra,"ListChannelMessagesCommand");class ul extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelModerators",{}).n("ChimeSDKMessagingClient","ListChannelModeratorsCommand").f(Kf,Jf).ser(ag).de(qd).build(){}r(ul,"ListChannelModeratorsCommand");class fl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelsAssociatedWithChannelFlow",{}).n("ChimeSDKMessagingClient","ListChannelsAssociatedWithChannelFlowCommand").f(Qf,Zf).ser(dg).de(Qr).build(){}r(fl,"ListChannelsAssociatedWithChannelFlowCommand");class ea extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannels",{}).n("ChimeSDKMessagingClient","ListChannelsCommand").f(Yf,Xf).ser(lg).de(Kc).build(){}r(ea,"ListChannelsCommand");class Pa extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListChannelsModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelsModeratedByAppInstanceUserCommand").f(qf,eh).ser(cg).de(Jc).build(){}r(Pa,"ListChannelsModeratedByAppInstanceUserCommand");class bs extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListSubChannels",{}).n("ChimeSDKMessagingClient","ListSubChannelsCommand").f(th,nh).ser(ug).de(no).build(){}r(bs,"ListSubChannelsCommand");class ua extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","ListTagsForResource",{}).n("ChimeSDKMessagingClient","ListTagsForResourceCommand").f(void 0,ih).ser(fg).de(bt).build(){}r(ua,"ListTagsForResourceCommand");class Bs extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutChannelExpirationSettings",{}).n("ChimeSDKMessagingClient","PutChannelExpirationSettingsCommand").f(void 0,void 0).ser(hg).de(us).build(){}r(Bs,"PutChannelExpirationSettingsCommand");class gd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","PutChannelMembershipPreferencesCommand").f(rh,oh).ser(ph).de(Yc).build(){}r(gd,"PutChannelMembershipPreferencesCommand");class lc extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","PutMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","PutMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(pg).de(sr).build(){}r(lc,"PutMessagingStreamingConfigurationsCommand");class Sd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","RedactChannelMessage",{}).n("ChimeSDKMessagingClient","RedactChannelMessageCommand").f(void 0,void 0).ser(mg).de(Fo).build(){}r(Sd,"RedactChannelMessageCommand");class hl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","SearchChannels",{}).n("ChimeSDKMessagingClient","SearchChannelsCommand").f(sh,ah).ser(gg).de(Ro).build(){}r(hl,"SearchChannelsCommand");class vd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","SendChannelMessage",{}).n("ChimeSDKMessagingClient","SendChannelMessageCommand").f(lh,void 0).ser(Sg).de(Xc).build(){}r(vd,"SendChannelMessageCommand");class pl extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","TagResource",{}).n("ChimeSDKMessagingClient","TagResourceCommand").f(dh,void 0).ser(vg).de(Ja).build(){}r(pl,"TagResourceCommand");class fa extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UntagResource",{}).n("ChimeSDKMessagingClient","UntagResourceCommand").f(ch,void 0).ser(yg).de(Kt).build(){}r(fa,"UntagResourceCommand");class yd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannel",{}).n("ChimeSDKMessagingClient","UpdateChannelCommand").f(uh,void 0).ser(Eg).de(Bo).build(){}r(yd,"UpdateChannelCommand");class Ed extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelFlow",{}).n("ChimeSDKMessagingClient","UpdateChannelFlowCommand").f(fh,void 0).ser(bg).de(mh).build(){}r(Ed,"UpdateChannelFlowCommand");class bd extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelMessage",{}).n("ChimeSDKMessagingClient","UpdateChannelMessageCommand").f(hh,void 0).ser(_g).de(gh).build(){}r(bd,"UpdateChannelMessageCommand");class _d extends Gn.classBuilder().ep(_i).m(function(T,D,M,H){return[pn(M,this.serialize,this.deserialize),Pn(M,T.getEndpointParameterInstructions())]}).s("ChimeMessagingService","UpdateChannelReadMarker",{}).n("ChimeSDKMessagingClient","UpdateChannelReadMarkerCommand").f(void 0,void 0).ser(Tg).de(Qc).build(){}r(_d,"UpdateChannelReadMarkerCommand");const te={AssociateChannelFlowCommand:sc,BatchCreateChannelMembershipCommand:sd,ChannelFlowCallbackCommand:fs,CreateChannelCommand:qa,CreateChannelBanCommand:Za,CreateChannelFlowCommand:ad,CreateChannelMembershipCommand:Oa,CreateChannelModeratorCommand:el,DeleteChannelCommand:tl,DeleteChannelBanCommand:ca,DeleteChannelFlowCommand:ld,DeleteChannelMembershipCommand:dd,DeleteChannelMessageCommand:cd,DeleteChannelModeratorCommand:ud,DeleteMessagingStreamingConfigurationsCommand:fd,DescribeChannelCommand:ac,DescribeChannelBanCommand:hd,DescribeChannelFlowCommand:nl,DescribeChannelMembershipCommand:il,DescribeChannelMembershipForAppInstanceUserCommand:Zs,DescribeChannelModeratedByAppInstanceUserCommand:rl,DescribeChannelModeratorCommand:qs,DisassociateChannelFlowCommand:ol,GetChannelMembershipPreferencesCommand:sl,GetChannelMessageCommand:pd,GetChannelMessageStatusCommand:al,GetMessagingSessionEndpointCommand:Ma,GetMessagingStreamingConfigurationsCommand:md,ListChannelBansCommand:ll,ListChannelFlowsCommand:dl,ListChannelMembershipsCommand:cl,ListChannelMembershipsForAppInstanceUserCommand:Eo,ListChannelMessagesCommand:Ra,ListChannelModeratorsCommand:ul,ListChannelsCommand:ea,ListChannelsAssociatedWithChannelFlowCommand:fl,ListChannelsModeratedByAppInstanceUserCommand:Pa,ListSubChannelsCommand:bs,ListTagsForResourceCommand:ua,PutChannelExpirationSettingsCommand:Bs,PutChannelMembershipPreferencesCommand:gd,PutMessagingStreamingConfigurationsCommand:lc,RedactChannelMessageCommand:Sd,SearchChannelsCommand:hl,SendChannelMessageCommand:vd,TagResourceCommand:pl,UntagResourceCommand:fa,UpdateChannelCommand:yd,UpdateChannelFlowCommand:Ed,UpdateChannelMessageCommand:bd,UpdateChannelReadMarkerCommand:_d};class L extends zo{}r(L,"ChimeSDKMessaging"),ma(te,L);const U=fn(zo,ll,"NextToken","NextToken","MaxResults"),K=fn(zo,dl,"NextToken","NextToken","MaxResults"),se=fn(zo,Eo,"NextToken","NextToken","MaxResults"),fe=fn(zo,cl,"NextToken","NextToken","MaxResults"),ae=fn(zo,Ra,"NextToken","NextToken","MaxResults"),Ce=fn(zo,ul,"NextToken","NextToken","MaxResults"),Be=fn(zo,fl,"NextToken","NextToken","MaxResults"),Ne=fn(zo,Pa,"NextToken","NextToken","MaxResults"),Ke=fn(zo,ea,"NextToken","NextToken","MaxResults"),ft=fn(zo,bs,"NextToken","NextToken","MaxResults"),yt=fn(zo,hl,"NextToken","NextToken","MaxResults")},9111664378:(B,l,d)=>{"use strict";d.r(l),d.d(l,{fromHex:()=>p,toHex:()=>m});const f={},h={};for(let a=0;a<256;a++){let s=a.toString(16).toLowerCase();s.length===1&&(s=`0${s}`),f[a]=s,h[s]=a}function p(a){if(a.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const s=new Uint8Array(a.length/2);for(let n=0;n<a.length;n+=2){const e=a.slice(n,n+2).toLowerCase();if(e in h)s[n/2]=h[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return s}r(p,"fromHex");function m(a){let s="";for(let n=0;n<a.byteLength;n++)s+=f[a[n]];return s}r(m,"toHex")},2412280125:(B,l,d)=>{"use strict";d.r(l),d.d(l,{fromUtf8:()=>a,toUtf8:()=>s});const f=r(n=>{const e=[];for(let t=0,i=n.length;t<i;t++){const o=n.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<n.length&&(o&64512)===55296&&(n.charCodeAt(t+1)&64512)===56320){const c=65536+((o&1023)<<10)+(n.charCodeAt(++t)&1023);e.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},"fromUtf8"),h=r(n=>{let e="";for(let t=0,i=n.length;t<i;t++){const o=n[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){const c=n[++t];e+=String.fromCharCode((o&31)<<6|c&63)}else if(240<=o&&o<365){const g="%"+[o,n[++t],n[++t],n[++t]].map(S=>S.toString(16)).join("%");e+=decodeURIComponent(g)}else e+=String.fromCharCode((o&15)<<12|(n[++t]&63)<<6|n[++t]&63)}return e},"toUtf8");function p(n){return new TextEncoder().encode(n)}r(p,"whatwgEncodingApi_fromUtf8");function m(n){return new TextDecoder("utf-8").decode(n)}r(m,"whatwgEncodingApi_toUtf8");const a=r(n=>typeof TextEncoder=="function"?p(n):f(n),"dist_es_fromUtf8"),s=r(n=>typeof TextDecoder=="function"?m(n):h(n),"dist_es_toUtf8")},7581324406:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9877075638));let m=r(class{needUpdate(s){return this.activeSpeakers?this.speakerScores[s]===0&&this.activeSpeakers.includes(s)||this.speakerScores[s]>0&&!this.activeSpeakers.includes(s):!0}updateActiveSpeakers(s,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let u=0;u<i.length;u++){const v=i[u];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((u,v)=>v.activeScore-u.activeScore).filter(function(u){return u.activeScore>0}).map(function(u){return u.attendeeId});this.activeSpeakers=o,n(o);const g=o.length>0&&o[0]===this.selfAttendeeId&&s.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==g&&(this.hasBandwidthPriority=g,this.hasBandwidthPriorityCallback(g))}updateScore(s,n,e,t,i){const o=s.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(s,n,e))}subscribe(s,n,e,t){const i=r((c,g)=>{if(!g){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(s,n,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(S,u,v,E)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(s,n,S,u,v)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new p.default(this.updateIntervalMs);if(o.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(s,n,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const c=new p.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(s){const n=this.detectorCallbackToHandler.get(s);this.detectorCallbackToHandler.delete(s),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(s);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(s));const t=this.detectorCallbackToScoresTimer.get(s);t&&(t.stop(),this.detectorCallbackToHandler.delete(s))}destroy(){return f(this,void 0,void 0,function*(){for(const s of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s);for(const s of this.detectorCallbackToActivityTimer.values())s.stop();for(const s of this.detectorCallbackToScoresTimer.values())s.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(s,n,e,t=1e3,i=200){this.realtimeController=s,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=m},1473791890:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{calculateScore(h,p,m){(m||p===null)&&(p=0),this.volumes.hasOwnProperty(h)||(this.volumes[h]=0),p>this.silenceThreshold?p=1:p=0;const a=this.volumes[h]*this.speakerWeight+p*(1-this.speakerWeight);this.volumes[h]=a;for(const s in this.volumes)s!==h&&(this.volumes[s]=Math.max(this.volumes[s]-this.takeoverRate*p,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(h=.9,p=.01,m=.2,a=.2){this.speakerWeight=h,this.cutoffThreshold=p,this.silenceThreshold=m,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=d},1035256489:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class nS{static create(h,p){const m=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!h||h.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!m.test(h))throw new Error(`appName must satisfy ${m} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!p||p.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(p))throw new Error("appVersion must satisfy Semantic Versioning format");return new nS(h,p)}constructor(h,p){this.appName=h,this.appVersion=p}},"ApplicationMetadata");l.default=d},9898009183:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Attendee");l.default=d},9598694912:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5546774952)),m=h(d(9649641385));let a=r(class{bindAudioElement(n){return f(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return f(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return f(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)m.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return f(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(u=>{t&&u.meetingAudioStreamBecameInactive(t),this.audioStream&&u.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(o===c)return;const g=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=null),i)try{yield g.setSinkId(o)}catch(u){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${u}`),u}this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=S)})}getCurrentMeetingAudioStream(){return f(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return f(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return f(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return f(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new p.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},5983965185:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5546774952));let p=r(class mu{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new mu(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new mu(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new mu(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,s=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new h.default().supportsAudioRedundancy()&&s}},"AudioProfile");l.default=p},4610074022:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let d=r(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null,this.isSessionConnected=!1}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null,this.isSessionConnected=!1}},"AudioVideoControllerState");l.default=d},1833994912:function(B,l,d){"use strict";var f=this&&this.__createBinding||(Object.create?function(G,Q,ye,Ee){Ee===void 0&&(Ee=ye),Object.defineProperty(G,Ee,{enumerable:!0,get:function(){return Q[ye]}})}:function(G,Q,ye,Ee){Ee===void 0&&(Ee=ye),G[Ee]=Q[ye]}),h=this&&this.__setModuleDefault||(Object.create?function(G,Q){Object.defineProperty(G,"default",{enumerable:!0,value:Q})}:function(G,Q){G.default=Q}),p=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var Q={};if(G!=null)for(var ye in G)ye!=="default"&&Object.prototype.hasOwnProperty.call(G,ye)&&f(Q,G,ye);return h(Q,G),Q},m=this&&this.__awaiter||function(G,Q,ye,Ee){function pt(ze){return ze instanceof ye?ze:new ye(function(st){st(ze)})}return r(pt,"adopt"),new(ye||(ye=Promise))(function(ze,st){function me(Se){try{k(Ee.next(Se))}catch(be){st(be)}}r(me,"fulfilled");function Me(Se){try{k(Ee.throw(Se))}catch(be){st(be)}}r(Me,"rejected");function k(Se){Se.done?ze(Se.value):pt(Se.value).then(me,Me)}r(k,"step"),k((Ee=Ee.apply(G,Q||[])).next())})},a=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(7581324406)),n=a(d(9598694912)),e=a(d(5983965185)),t=a(d(5546774952)),i=a(d(9200233701)),o=a(d(8619504925)),c=a(d(1197017824)),g=a(d(7551081659)),S=a(d(9447989038)),u=a(d(488357679)),v=a(d(8006173476)),E=a(d(6348496904)),b=a(d(7692233712)),_=a(d(9649641385)),C=a(d(6900744364)),I=a(d(3795683579)),A=a(d(2092275410)),w=a(d(583806999)),O=a(d(7570945794)),R=p(d(5393388022)),F=a(d(7969706599)),V=a(d(4804743313)),$=d(4136617125),X=a(d(4562177071)),Y=a(d(4713678292)),ne=a(d(9089081530)),ie=a(d(5703332651)),ge=a(d(9049733277)),Ie=a(d(4708498556)),We=a(d(2635066756)),ct=a(d(9488451395)),Ae=a(d(9638153336)),Fe=a(d(7966229607)),Xe=a(d(1614136239)),Ge=a(d(3292077469)),it=a(d(6085879951)),Dt=a(d(9588672479)),wt=a(d(9531998674)),Pe=a(d(587698570)),xe=a(d(86955145)),et=a(d(8297256329)),rt=a(d(7680112541)),je=a(d(8872868578)),Ft=a(d(5976676062)),Gt=a(d(339097629)),Xt=a(d(3248483798)),sn=a(d(7638277718)),cn=a(d(4098780146)),Bt=a(d(2392158736)),gn=a(d(8213452704)),Ci=a(d(372560720)),$n=a(d(161472916)),Sn=d(6527539809),nn=a(d(1695739824)),Vt=a(d(9677745702)),Wn=a(d(3368465086)),Lt=d(8071414974),zt=a(d(1865309432)),It=a(d(2469210420)),z=a(d(8697249276)),Ve=a(d(4675986794)),He=a(d(1309535200)),Je=a(d(1604549269)),Ye=a(d(9136055221)),lt=a(d(8058016368)),le=a(d(4610074022));let Ue=r(class gu{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new s.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(Q){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(Q):null}setAudioProfile(Q){this._audioProfile=Q}addObserver(Q){this.logger.info("adding meeting observer"),this.observerQueue.add(Q)}removeObserver(Q){this.logger.info("removing meeting observer"),this.observerQueue.delete(Q)}forEachObserver(Q){for(const ye of this.observerQueue)_.default.nextTick(()=>{this.observerQueue.has(ye)&&Q(ye)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new le.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new O.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const Q=r(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(ye){ye.type===F.default.WebSocketClosed&&Q()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(Q=>{this.logger.error(`Signaling task pre-start failed: ${Q}`),this.signalingTask=void 0})}start(Q){this.startReturningPromise(Q).then(()=>{this.logger.info("start completed")}).catch(ye=>{this.logger.error(`start failed: ${ye}`)})}startReturningPromise(Q){return(Q==null?void 0:Q.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((ye,Ee)=>{this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!1).then(ye).catch(Ee)})}))}connectWithPromises(Q){const ye=this.meetingSessionContext,Ee=r((ee,en)=>new sn.default(this.logger,en,ee),"timeout");this.monitorTask=new Xe.default(ye,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const pt=this.monitorTask.once(),ze=new wt.default(ye).once();this.receiveIndexTask=new et.default(ye),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const st=new je.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Fe.default(ye),new rt.default(ye),new ct.default(ye),this.receiveIndexTask]).once(),me=new ge.default(ye).once(st),Me=new Y.default(ye).once(me,ze),k=new Ie.default(ye).once(Me),Se=new Ft.default(ye).once(k),be=new We.default(ye).once(Se),we=new Xt.default(ye).once(be);return this.receiveRemotePauseResumeTask=new Pe.default(ye),this.receiveRemotePauseResumeTask.once(we),new je.default(this.logger,this.wrapTaskName("AudioVideoStart"),[pt,Ee(this.configuration.connectionTimeoutMs,new je.default(this.logger,"Peer",[we,this.receiveRemotePauseResumeTask,Q?new sn.default(this.logger,new it.default(this.logger,"FinalizeConnection",[new cn.default(ye),new Gt.default(ye)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new Gt.default(ye)]))])}actionConnect(Q){var ye;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const Ee=!!this.configuration.urls.audioHostURL;if(Ee?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new gn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Ci.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Bt.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new $n.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new lt.default(this.logger,this._realtimeController,gu.MIN_VOLUME_DECIBELS,gu.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let st=this.meetingSessionContext.videoUplinkBandwidthPolicy;st||(st=new Je.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=st),st.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Wn.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new z.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new It.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new Ye.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Vt.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const st=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;st&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(st)}else{const st=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(st)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new u.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new nn.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new zt.default,this.meetingSessionContext.videosPaused=new zt.default,this.meetingSessionContext.statsCollector=new X.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,gu.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},this._videoTileController.registerVideoTileResolutionObserver(this.meetingSessionContext.statsCollector),Q||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(st=>{Sn.Maybe.of(st.audioVideoDidStartConnecting).map(me=>me.bind(st)(!1))}),(ye=this.eventController)===null||ye===void 0||ye.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const pt=Ee&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+pt);const ze=this.connectWithPromises(pt);try{yield ze.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(st){this.signalingTask=void 0;const me=new g.default(this.getMeetingStatusCode(st)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${me} due to error ${st}.`),this.sessionStateController.state()===A.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(I.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(me,!0,st),this.handleMeetingSessionStatus(me,st)||this.notifyStop(me,st)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new sn.default(this.logger,new Ge.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=$.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.meetingSessionContext.isSessionConnected=!0,this.forEachObserver(Q=>{Sn.Maybe.of(Q.audioVideoDidStart).map(ye=>ye.bind(Q)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var Q;return this._reconnectController.disableReconnect(),this.sessionStateController.state()===A.default.NotConnected?((Q=this.meetingSessionContext.signalingClient)===null||Q===void 0||Q.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((ye,Ee)=>{this.sessionStateController.perform(I.default.Disconnect,()=>{this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new g.default(S.default.Left),!1,null).then(ye).catch(Ee)})})}stop(){this.stopReturningPromise()}actionDisconnect(Q,ye,Ee){return m(this,void 0,void 0,function*(){try{yield new je.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new sn.default(this.logger,new Ae.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const pt=[new sn.default(this.logger,new ie.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new je.default(this.logger,this.wrapTaskName("AudioVideoClean"),pt).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(I.default.FinishDisconnecting,()=>{ye||this.notifyStop(Q,Ee)}),this._videoTileController.removeVideoTileResolutionObserver(this.meetingSessionContext.statsCollector)})}update(){let ye=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(ye||(ye=this.meetingSessionContext.peer===void 0),ye||(ye=!this.updateRemoteVideosFromPolicy()),ye||(ye=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!ye)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const Ee=this.sessionStateController.perform(I.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return Ee===w.default.Transitioned||Ee===w.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!R.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===R.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const Q=this.detectChangesInVideosToReceive();if(Q===void 0)return!1;const ye=Q.added,Ee=Q.simulcastStreamUpdates,pt=Q.removed,ze=this.meetingSessionContext,st=[];for(const[me,Me]of Ee.entries()){const k=new V.default;if(k.streamId=Me,k.attendeeId=ze.videoStreamIndex.attendeeIdForStreamId(Me),k.mid=ze.transceiverController.getMidForStreamId(me),k.mid===void 0)return this.logger.info(`No MID found for stream ID ${me}, cannot update stream without renegotiation`),!1;if(st.push(k),ze.transceiverController.setStreamIdForMid(k.mid,Me),ze.videoStreamIndex.overrideStreamIdMappings(me,Me),ze.videoTileController.haveVideoTileForAttendeeId(k.attendeeId)){const Se=ze.videoTileController.getVideoTileForAttendeeId(k.attendeeId);if(!Se.setStreamId)return!1;Se.setStreamId(Me)}}return st.length!==0&&ze.signalingClient.remoteVideoUpdate(st,[]),ye.length!==0||pt.length!==0?!1:(ze.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const Q=this.meetingSessionContext;if(Q.videosToReceive===null||!Q.transceiverController||!Q.transceiverController.getMidForStreamId||!Q.transceiverController.setStreamIdForMid||!Q.videosToReceive.forEach||!Q.signalingClient.remoteVideoUpdate||!Q.videoStreamIndex.overrideStreamIdMappings)return;let ye=[];const Ee=new Map;let pt=[];if(Q.lastVideosToReceive===null)ye=Q.videosToReceive.array();else{const ze=Q.videoStreamIndex;Q.videosToReceive.forEach(st=>{if(Q.lastVideosToReceive.contain(st))return;let me=!1;Q.lastVideosToReceive.forEach(Me=>{me||ze.StreamIdsInSameGroup(Me,st)&&(Ee.set(Me,st),me=!0)}),me||ye.push(st)}),pt=Q.lastVideosToReceive.array().filter(st=>{const me=Q.videosToReceive.contain(st),Me=Ee.has(st);return!me&&!Me})}return this.logger.info(`Request to update remote videos with added: [${ye}], updated: [${Array.from(Ee.entries()).map(ze=>{let[st,me]=ze;return`${st}->${me}`}).join(",")}], removed: [${pt}]`),{added:ye,removed:pt,simulcastStreamUpdates:Ee}}isNotAddingOrRemovingStreams(){const Q=this.detectChangesInVideosToReceive();if(Q===void 0)return!1;const ye=Q.added,Ee=Q.removed;return ye.length!==0||Ee.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const Q=this.meetingSessionContext;if(Q.videosToReceive===null)return!1;const ye=Q.videosToReceive.array().map(me=>Q.videoStreamIndex.groupIdForStreamId(me));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(ye));const Ee=Lt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(Q,ye,Q.videoDownlinkBandwidthPolicy.getVideoPreferences()),pt=new Map,ze=[];for(const me of Ee){let Me=!1;if(!Q.lastVideoSubscriptionConfiguration.has(me.groupId))Me=!0;else{const k=Q.lastVideoSubscriptionConfiguration.get(me.groupId);me.equals(k)||(this.logger.debug(`${JSON.stringify(me)} does not equal ${JSON.stringify(k)}, sending update`),Me=!0)}pt.set(me.groupId,me),Me&&ze.push(me)}Q.lastVideoSubscriptionConfiguration=pt;const st=[];if(Q.lastVideosToReceive!==null){const me=new Set(ye);for(const Me of Q.lastVideosToReceive.array()){const k=Q.videoStreamIndex.groupIdForStreamId(Me);if(!me.has(k)){const Se=Q.transceiverController.getMidForGroupId(k);if(Se===void 0){Q.logger.warn(`Could not find MID for group ID to remove: ${k}`);continue}st.push(Se)}}}return(ze.length!==0||st.length!==0)&&Q.signalingClient.remoteVideoUpdate(ze,st),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const Q=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(Q)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const Q=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!Q||!Q.headerExtensions?!1:Q.headerExtensions.some(ye=>ye.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(Q){const ye=r(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),Q()}),"restartVideo"),Ee=this.sessionStateController.perform(I.default.Update,()=>{ye()});return Ee===w.default.Transitioned||Ee===w.default.DeferredTransition}replaceLocalVideo(Q){return m(this,void 0,void 0,function*(){if(!Q||Q.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const ye=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(ye){const Ee=ye.state(),pt=Q.getVideoTracks()[0].getSettings();ye.bindVideoStream(Ee.boundAttendeeId,!0,Q,pt.width,pt.height,Ee.streamId,Ee.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(Q.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=Q,this.logger.info("Local video input is updated")})}replaceLocalAudio(Q){return m(this,void 0,void 0,function*(){if(!Q||Q.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(Q.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=Q,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(Q){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new je.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new xe.default(this.meetingSessionContext),new sn.default(this.logger,new je.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ie.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new We.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext),new Gt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),Q&&this.sessionStateController.perform(I.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(ye){this.sessionStateController.perform(I.default.FinishUpdating,()=>{const Ee=new g.default(this.getMeetingStatusCode(ye)||S.default.TaskFailed);Ee.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(Ee,ye)})}})}notifyStop(Q,ye){var Ee;if(this.forEachObserver(pt=>{Sn.Maybe.of(pt.audioVideoDidStop).map(ze=>ze.bind(pt)(Q))}),this.eventController){const{signalingOpenDurationMs:pt,poorConnectionCount:ze,startTimeMs:st,iceGatheringDurationMs:me,attendeePresenceDurationMs:Me,meetingStartDurationMs:k}=this.meetingSessionContext,Se={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:st===null?0:Math.round(Date.now()-st),meetingStatus:S.default[Q.statusCode()],signalingOpenDurationMs:pt,iceGatheringDurationMs:me,attendeePresenceDurationMs:Me,poorConnectionCount:ze,meetingStartDurationMs:k,retryCount:this.totalRetryCount},be=ye&&ye.message||((Ee=Q.toString)===null||Ee===void 0?void 0:Ee.call(Q))||"";Se.meetingDurationMs===0?(Se.meetingErrorMessage=be,delete Se.meetingDurationMs,delete Se.attendeePresenceDurationMs,delete Se.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Se)):Q.isFailure()||Q.isAudioConnectionFailure()?(Se.meetingErrorMessage=be,this.eventController.publishEvent("meetingFailed",Se)):this.eventController.publishEvent("meetingEnded",Se)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const Q=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(Q)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(Q,ye){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(pt=>{Sn.Maybe.of(pt.audioVideoWasDemotedFromPrimaryMeeting).map(ze=>ze.bind(pt)(new g.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const Ee=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===A.default.NotConnected?this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(I.default.Reconnect,()=>{this.actionReconnect(Q)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return Ee||this.sessionStateController.perform(I.default.Fail,()=>{this.actionDisconnect(Q,!1,ye)}),Ee}actionReconnect(Q){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(ye=>{Sn.Maybe.of(ye.audioVideoDidStartConnecting).map(Ee=>Ee.bind(ye)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Pe.default(this.meetingSessionContext);try{yield new je.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new sn.default(this.logger,new je.default(this.logger,"Media",[new ne.default(this.meetingSessionContext),new je.default(this.logger,"Signaling",[new Ge.default(this.meetingSessionContext),new ct.default(this.meetingSessionContext)]),new ge.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new xe.default(this.meetingSessionContext),new sn.default(this.logger,new je.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ie.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new We.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext),new Gt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(I.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:ye,poorConnectionCount:Ee,startTimeMs:pt,iceGatheringDurationMs:ze,attendeePresenceDurationMs:st,meetingStartDurationMs:me}=this.meetingSessionContext,Me={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-pt),meetingStatus:S.default[Q.statusCode()],signalingOpenDurationMs:ye,iceGatheringDurationMs:ze,attendeePresenceDurationMs:st,poorConnectionCount:Ee,meetingStartDurationMs:me,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Me)}this.actionFinishConnecting()})}catch(ye){this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const Ee=new g.default(this.getMeetingStatusCode(ye)||S.default.TaskFailed);this.handleMeetingSessionStatus(Ee,ye)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(Q){return`${Q}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(Q){const ye=/the meeting status code: (\d+)/.exec(Q&&Q.message);return ye&&ye.length>1?Number.parseInt(ye[1],10):null}enforceBandwidthLimitationForSender(Q){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(Q)})}handleMeetingSessionStatus(Q,ye){if(this.logger.info(`handling status: ${S.default[Q.statusCode()]}`),Q.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(Q),Q.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(Q.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(Ee=>{Sn.Maybe.of(Ee.videoSendDidBecomeUnavailable).map(pt=>pt.bind(Ee)())}),!1;if(Q.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(Ee=>{Sn.Maybe.of(Ee.audioVideoWasDemotedFromPrimaryMeeting).map(pt=>pt.bind(Ee)(Q))}),!1;if(Q.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(Q.isFailure()||Q.isTerminal())&&this.meetingSessionContext.reconnectController){const Ee=this.reconnect(Q,ye);return Ee?this.logger.warn(`The audio video controller will reconnect due to status code ${S.default[Q.statusCode()]}${ye?` and error: ${ye.message}`:""}`):this.logger.error(`The audio video controller failed with status code ${S.default[Q.statusCode()]}${ye?` and error: ${ye.message}`:""}`),Ee}return!1}setVideoMaxBandwidthKbps(Q){if(Q<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${Q} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(Q)),this.maxUplinkBandwidthKbps=Q}handleHasBandwidthPriority(Q){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Q),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const ye=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Q);const Ee=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();ye!==Ee&&(this.logger.info(`video send bandwidth priority ${Q} max has changed from ${ye} kbps to ${Ee} kbps`),yield this.enforceBandwidthLimitationForSender(Ee))}})}pauseReceivingStream(Q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([Q])}resumeReceivingStream(Q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([Q])}setVideoCodecSendPreferences(Q){this.videoSendCodecPreferences=Q,this.meetingSessionContext.videoSendCodecPreferences=Q,this.sessionStateController.state()!==A.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:Q}=this.meetingSessionContext;if(!Q)return this.logger.info("meeting has not started"),[];const ye=this.configuration.credentials.attendeeId;return Q.allVideoSendingSourcesExcludingSelf(ye)}encodingSimulcastLayersDidChange(Q){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(ye=>{Sn.Maybe.of(ye.encodingSimulcastLayersDidChange).map(Ee=>Ee.bind(ye)(Q))})}promoteToPrimaryMeeting(Q){return this.actionPromoteToPrimaryMeeting(Q)}actionPromoteToPrimaryMeeting(Q){return m(this,void 0,void 0,function*(){let ye=new g.default(S.default.SignalingRequestFailed);return yield new je.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new sn.default(this.logger,new Dt.default(this.meetingSessionContext,Q,Ee=>{ye=Ee}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=ye.statusCode()===S.default.OK,ye})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(Q=>{Sn.Maybe.of(Q.audioVideoWasDemotedFromPrimaryMeeting).map(ye=>ye.bind(Q)(new g.default(S.default.OK)))})}videoInputDidChange(Q){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(Q?yield this.replaceLocalVideo(Q):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(Q){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!Q)try{Q=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(Q)})}constructor(Q,ye,Ee,pt,ze,st){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new le.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=ye,this.sessionStateController=new C.default(this._logger),this._configuration=Q,this._webSocketAdapter=Ee,this._realtimeController=new b.default(pt),this._realtimeController.realtimeSetLocalAttendeeId(Q.credentials.attendeeId,Q.credentials.externalUserId),this._mediaStreamBroker=pt,this._reconnectController=ze,this._videoTileController=new Ve.default(new He.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=st}},"DefaultAudioVideoController");l.default=Ue,Ue.MIN_VOLUME_DECIBELS=-42,Ue.MAX_VOLUME_DECIBELS=-14,Ue.PING_PONG_INTERVAL_MS=1e4},8589145157:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(4571447548)),p=f(d(913629600)),m=f(d(5047661014)),a=f(d(9437918857)),s=f(d(6226061697)),n=f(d(8023404193)),e=f(d(7551081659)),t=f(d(9447989038)),i=f(d(803810435)),o=f(d(2114525466)),c=f(d(7880459944)),g=f(d(1833994912));let S=r(class extends g.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const E=new s.default;E.meetingId="",E.externalMeetingId="",E.credentials=new n.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new i.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const b=new m.default;super(v||E,b,new c.default(new m.default),new a.default,new o.default(0,new h.default(0,0,0)),new p.default(v||E,b))}},"NoOpAudioVideoController");l.default=S},9305916160:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(m,a,s,n){function e(t){return t instanceof s?t:new s(function(i){i(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}r(o,"fulfilled");function c(S){try{g(n.throw(S))}catch(u){i(u)}}r(c,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,c)}r(g,"step"),g((n=n.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7952414906);let p=r(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const s=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,s),s}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,s){this.videoTileController.bindVideoElement(a,s),this.trace("bindVideoElement",{tileId:a,videoElementId:s.id})}unbindVideoElement(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,s),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:s})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const s=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),s}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const s=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,s),s}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const s=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),s}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,s){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,s),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,s){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,s),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,s)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,s,n){this.realtimeController.realtimeSendDataMessage(a,s,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,s){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,s),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,s,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,s,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,s),s})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const s=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,s),s})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,s),s})}startAudioInput(a){return f(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return f(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return f(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return f(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const s=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),s}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const s=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),s}chooseVideoInputQuality(a,s,n){this.deviceController.chooseVideoInputQuality(a,s,n),this.trace("chooseVideoInputQuality",{width:a,height:s,frameRate:n})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,s){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,s)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const s=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),s}startContentShareFromScreenCapture(a,s){const n=this.contentShareController.startContentShareFromScreenCapture(a,s);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,s,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof s<"u"&&(i+=` ${JSON.stringify(s)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const s=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,s),s}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,s,n,e,t,i){this.audioVideoController=a,this.videoTileController=s,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");l.default=p},5281791356:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(890779530)),m=d(1174868230);let a=r(class extends p.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:c,height:g}=o;if(!e||!t){i.clearRect(0,0,c,g);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,c,g),i.drawImage(this.scaledCanvas,0,0,c,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,g),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,c,g),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return f(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},890779530:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5407648653)),m=d(1174868230),a=h(d(3724840282));let s=r(class extends p.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:c}=this,{width:g,height:S}=c;o.save(),o.clearRect(0,0,g,S),o.drawImage(this.scaledCanvas,0,0,g,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,g,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,c.width,c.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return f(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: { blurStrength: ${t.blurStrength}, filterCPUUtilization: ${t.filterCPUUtilization}, reportingPeriodMillis: ${t.reportingPeriodMillis}}`)}},"BackgroundBlurProcessorProvided");l.default=s},1174868230:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const d={LOW:7,MEDIUM:15,HIGH:30};let f=r(class{static getBlurAmount(p,m){if(p<=0)throw new Error(`invalid value for blur strength: ${p}`);return Math.round(p*m.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=f,f.BLUR_STRENGTH_DIVISOR=540,l.default=d},3437938989:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(c,g,S,u){function v(E){return E instanceof S?E:new S(function(b){b(E)})}return r(v,"adopt"),new(S||(S=Promise))(function(E,b){function _(A){try{I(u.next(A))}catch(w){b(w)}}r(_,"fulfilled");function C(A){try{I(u.throw(A))}catch(w){b(w)}}r(C,"rejected");function I(A){A.done?E(A.value):v(A.value).then(_,C)}r(I,"step"),I((u=u.apply(c,g||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6828608641)),m=h(d(3714104304)),a=h(d(1370928943)),s=h(d(3814682321)),n=h(d(5281791356)),e=h(d(890779530)),t=h(d(1174868230));let i=r(class extends s.default{setBlurStrength(){}loadAssets(){return f(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=r(class Id extends p.default{static create(g,S){return f(this,void 0,void 0,function*(){g=Id.resolveSpec(g),S=Id.resolveOptions(S);const{logger:u}=S,v=yield Id.isSupported(g,S);if(u.info(`processor is ${v?"":"not"} supported`),!v)return u.warn("Using no-op processor because background blur is not supported"),new i;let E;return(yield e.default.isSupported())?(u.info("Using browser-provided background blur"),E=new e.default(g,S)):(u.info("Using built-in background blur"),E=new n.default(g,S)),yield E.loadAssets(),E})}static resolveOptions(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},g);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new m.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(g,S){return g=Id.resolveSpec(g),S=Id.resolveOptions(S),super.isSupported(g,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},3724840282:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5703733606));let p=r(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=p},3051230507:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class iS{static builder(){return new iS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const h={height:144,width:256,range:[0,1],channels:3},p={height:144,width:256,range:[0,1],channels:1},m="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=m,this.input=h,this.output=p,this}withPath(h){return this.path=h,this}withInput(h){return this.input=h,this}withOutput(h){return this.output=h,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=d},3522273832:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=.8;let f=r(class{reportEvent(p){const m=p-this.lastReportedEventTimestamp;if(m>=this.reportingPeriodMillis){const a=this.filterCount,s=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=p,this.framerate===0||a===0)return;const n=Math.round(s/a),e=Math.round(this.framerate*(m/1e3))-a,t=Math.round(100*s/m);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:m}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:s,periodMillis:m})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*d)}frameReceived(p){p!==this.framerate&&(this.framerate=p,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const m=Date.now();this.reportEvent(m)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(p,m,a,s){this.delegate=p,this.reportingPeriodMillis=m,this.filterCPUUtilization=a,this.logger=s,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=f},5407648653:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(t,i,o,c){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(_){try{b(c.next(_))}catch(C){u(C)}}r(v,"fulfilled");function E(_){try{b(c.throw(_))}catch(C){u(C)}}r(E,"rejected");function b(_){_.done?S(_.value):g(_.value).then(v,E)}r(b,"step"),b((c=c.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const p=d(5963876428),m=h(d(1458156729)),a=h(d(3522273832));let s=r(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=r(class Oh{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,c)=>{i.resolve=o,i.reject=c}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return f(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield p.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return f(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const c=o.width,g=o.height;if(c===0||g===0)return i;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==g)&&(this.sourceWidth=c,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const u=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(u,v),E.drawImage(o,0,0),E.restore();const b=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const _=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:b},[b.data.buffer]),S=yield _}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,c,g;return f(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(g=this.scaledCanvas)===null||g===void 0||g.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,c,g,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new s,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Oh.createWorkerPromise(),this.loadModelPromise=Oh.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(c),this.spec=o,this.logger=c.logger,this.delegate=g,this.initCPUMonitor(c),this.eventController=S}},"BackgroundFilterProcessor");l.default=n;let e=r(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},6828608641:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(c,g,S,u){function v(E){return E instanceof S?E:new S(function(b){b(E)})}return r(v,"adopt"),new(S||(S=Promise))(function(E,b){function _(A){try{I(u.next(A))}catch(w){b(w)}}r(_,"fulfilled");function C(A){try{I(u.throw(A))}catch(w){b(w)}}r(C,"rejected");function I(A){A.done?E(A.value):v(A.value).then(_,C)}r(I,"step"),I((u=u.apply(c,g||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(5963876428),m=d(7984036634),a=h(d(3051230507)),s=h(d(5546774952)),n=h(d(6885109343)),e=r(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=r(class{static defaultAssetSpec(){const g=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${g.major}.${g.minor}`}}static createUrlWithParams(g,S){const u=new URL(g),v=Object.keys(S);for(const E of v)S[E]!==void 0&&u.searchParams.set(E,S[E]);return u.toString()}static resolveSpec(g){const{paths:S=i,model:u=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=g||{},b={assetGroup:v,revisionID:E,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,b),S.wasm=this.createUrlWithParams(S.wasm,b),S.simd=this.createUrlWithParams(S.simd,b),u.path=this.createUrlWithParams(u.path,b),{paths:S,model:u,assetGroup:v,revisionID:E}}static resolveOptions(g){g.reportingPeriodMillis||(g.reportingPeriodMillis=1e3);const S=30;return g.filterCPUUtilization?(g.filterCPUUtilization<0||g.filterCPUUtilization>100)&&(g.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),g.filterCPUUtilization=S):g.filterCPUUtilization=S,g}static isSupported(g,S){const{logger:u}=S;return typeof globalThis>"u"?(u.info("Browser does not have globalThis."),Promise.resolve(!1)):new s.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,u)?this.supportsBackgroundFilter(globalThis,g,u):(u.info("Browser does not support WASM."),Promise.resolve(!1)):(u.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,u=arguments.length>2?arguments[2]:void 0;return f(this,void 0,void 0,function*(){if(!m.supportsWorker(g,u))return u.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const E=yield p.loadWorker(v,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(b){u.info(`Failed to terminate worker. ${b.message}`)}return!0}catch(E){return u.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},5703733606:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}filterFrameDurationHigh(h){var p;for(const m of this.observers)(p=m.filterFrameDurationHigh)===null||p===void 0||p.call(m,h)}filterCPUUtilizationHigh(h){var p;for(const m of this.observers)(p=m.filterCPUUtilizationHigh)===null||p===void 0||p.call(m,h)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=d},4950936447:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5407648653)),m=h(d(2254148388));let a=r(class Mh extends p.default{setImageBlob(n){return f(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield Mh.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:c,height:g}=o;i.save(),i.clearRect(0,0,c,g),i.drawImage(this.scaledCanvas,0,0,c,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,g),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return f(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return f(this,void 0,void 0,function*(){this.replacementImage=yield Mh.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return f(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: { filterCPUUtilization: ${e.filterCPUUtilization}, reportingPeriodMillis: ${e.reportingPeriodMillis}}`)}},"BackgroundReplacementFilter");l.default=a},3561775467:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(i,o,c,g){function S(u){return u instanceof c?u:new c(function(v){v(u)})}return r(S,"adopt"),new(c||(c=Promise))(function(u,v){function E(C){try{_(g.next(C))}catch(I){v(I)}}r(E,"fulfilled");function b(C){try{_(g.throw(C))}catch(I){v(I)}}r(b,"rejected");function _(C){C.done?u(C.value):S(C.value).then(E,b)}r(_,"step"),_((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6828608641)),m=h(d(3714104304)),a=h(d(1370928943)),s=h(d(3814682321)),n=h(d(4950936447));let e=r(class extends s.default{loadAssets(){return f(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return f(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=r(class rS extends p.default{static create(o,c){return f(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:g}=c;if(!(yield rS.isSupported(o,c)))return g.warn("Using no-op processor because background replacement is not supported"),new e;g.info("Using background replacement filter");const u=new n.default(o,c);return yield u.loadAssets(),u})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},o);return c.logger||(c.logger=new m.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(o){return f(this,void 0,void 0,function*(){if(!o.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const g=c.getContext("2d");g.fillStyle="blue",g.fillRect(0,0,100,100);const S=yield new Promise(u=>{c.toBlob(u)});o.imageBlob=S}})}static isSupported(o,c){const g=Object.create(null,{isSupported:{get:()=>super.isSupported}});return f(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const S=c.imageBlob,u=URL.createObjectURL(S);try{yield n.default.loadImage(u)}catch(v){return c.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(u)}return g.isSupported.call(this,o,c)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},2254148388:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5703733606));let p=r(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=p},4571447548:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const h=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,h}constructor(h,p,m){this.fixedWaitMs=h,this.shortBackoffMs=p,this.longBackoffMs=m,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=d},4692955950:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(4571447548)),p=f(d(1733276918));let m=r(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(s){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,s)}constructor(s,n,e){this.fixedWaitMs=s,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=m},1733276918:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(4571447548));let p=r(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,s,n,e){super(a,s,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=p},5546774952:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(585669709),p=d(3277712452);let m=r(class Rh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const s of this.chromeLike)if(s===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const s of this.webkitBrowsers)if(s===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Rh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Rh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(s,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(s/64)*64,Math.ceil(n/64)*64]:[s,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const s=[];for(const n in this.browserSupport)s.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return s.join(", ")}supportedVideoCodecs(){return f(this,void 0,void 0,function*(){const s=new RTCPeerConnection;return s.addTransceiver("video",{direction:"inactive",streams:[]}),(yield s.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return this.isIOS()&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}requiresAudioContextResetOnDeviceFailureForWebAudio(){return this.isIOS()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}isIOS(){return this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox()}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},9029233041:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),p=f(d(6502873558)),m=f(d(6132421099)),a=f(d(7966078085));let s=r(class oS{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case p.default.UPSTREAM:return this.audioUpstreamMetricMap;case p.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case p.default.UPSTREAM:return this.videoUpstreamMetricMap;case p.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:g}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const u=this.streamMetricReports[S];if(u.direction===t.dir&&u.mediaType===t.media)return c(g||t.source,Number(S))}else return c(g||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],c=this.getMetricMap(i.media,i.dir)[i.source],{transform:g,source:S}=c;return g(S||i.source,t)}getVideoUpstreamSsrcs(){const e=[];for(const t in this.streamMetricReports)this.streamMetricReports[t].mediaType===m.default.VIDEO&&this.streamMetricReports[t].direction===p.default.UPSTREAM&&e.push(Number(t));return e}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const u=this.getObservableVideoMetricValue(S,Number(t));isNaN(u)||(i[S]=u)}const o=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let g="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?g=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:g=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[g]=e[g]?e[g]:{},e[g][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new oS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(g.currentMetrics[o])},this.decoderLossPercent=(o,c)=>{const g=this.streamMetricReports[c],S=g.currentMetrics.concealedSamples-(g.previousMetrics.concealedSamples||0),u=g.currentMetrics.totalSamplesReceived-(g.previousMetrics.totalSamplesReceived||0);return u<=0||u-S<=0?0:S/u*100},this.packetLossPercent=(o,c)=>{const g=this.streamMetricReports[c],S=g.currentMetrics[o]-(g.previousMetrics[o]||0),u=g.currentMetrics.packetsLost-(g.previousMetrics.packetsLost||0),v=S+u;return v<=0||u<=0?0:u*100/v},this.jitterBufferMs=(o,c)=>{const g=this.streamMetricReports[c],S=g.currentMetrics.jitterBufferDelay-(g.previousMetrics.jitterBufferDelay||0),u=g.currentMetrics.jitterBufferEmittedCount-(g.previousMetrics.jitterBufferEmittedCount||0);return S<=0||u<=0?0:S/u*1e3},this.countPerSecond=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:Math.trunc(u/S)},this.bitsPerSecond=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=(g.currentMetrics[o]-(g.previousMetrics[o]||0))*8;return u<=0?0:Math.trunc(u/S)},this.secondsToMilliseconds=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(g.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:u*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,c)=>{const g=this.streamMetricReports[c];if(g.previousObjectMetrics[o]===void 0||g.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let u=0,v=0;for(const[b,_]of Object.entries(g.previousObjectMetrics[o]))b==="cpu"&&(u=_);for(const[b,_]of Object.entries(g.currentObjectMetrics[o]))b==="cpu"&&(v=_);const E=v-u;return E<=0?0:E*1e3/S},this.isHardwareImplementation=(o,c)=>{const g=this.streamMetricReports[c];if(g.currentStringMetrics[o]===void 0)return NaN;const S=String(g.currentStringMetrics[o]),u=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return u&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_JITTER_MS},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE},videoInputWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_WIDTH},videoInputHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_HEIGHT}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS},videoRenderWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_WIDTH},videoRenderHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_HEIGHT}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:p.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:p.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:p.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=s},6502873558:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var d;(function(f){f[f.UPSTREAM=0]="UPSTREAM",f[f.DOWNSTREAM=1]="DOWNSTREAM"})(d=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=d},6132421099:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var d;(function(f){f[f.AUDIO=0]="AUDIO",f[f.VIDEO=1]="VIDEO"})(d=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=d},863418510:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"ClientVideoStreamReceivingReport");l.default=d},7966078085:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=d},3237015968:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=d},6172292806:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=d},1516469294:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(h){this.currentData=h}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const h=this.health();return h!==this.currentHealth?(this.currentHealth=h,h):null}constructor(h,p,m){this.minHealth=h.minHealth,this.maxHealth=h.maxHealth,this.currentHealth=h.initialHealth,this.currentData=p.clone(),this.name=m}},"BaseConnectionHealthPolicy");l.default=d},9200233701:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class ml{static isTimestampRecent(h,p){return Date.now()<h+p}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(h){return ml.isTimestampRecent(this.connectionStartTimestampMs,h)}isLastPacketLossRecent(h){return ml.isTimestampRecent(this.lastPacketLossInboundTimestampMs,h)}isGoodSignalRecent(h){return ml.isTimestampRecent(this.lastGoodSignalTimestampMs,h)}isWeakSignalRecent(h){return ml.isTimestampRecent(this.lastWeakSignalTimestampMs,h)}isNoSignalRecent(h){return ml.isTimestampRecent(this.lastNoSignalTimestampMs,h)}clone(){const h=new ml;return h.connectionStartTimestampMs=this.connectionStartTimestampMs,h.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,h.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,h.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,h.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,h.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,h.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,h.consecutiveMissedPongs=this.consecutiveMissedPongs,h.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),h.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),h.audioSpeakerDelayMs=this.audioSpeakerDelayMs,h.isVideoEncoderHardware=this.isVideoEncoderHardware,h.videoEncodingTimeInMs=this.videoEncodingTimeInMs,h.videoEncodingTimePerFrameInMs=this.videoEncodingTimePerFrameInMs,h.cpuLimitationDuration=this.cpuLimitationDuration,h.videoInputFps=this.videoInputFps,h.videoEncodeFps=this.videoEncodeFps,h}setConsecutiveMissedPongs(h){this.consecutiveMissedPongs=h}setConsecutiveStatsWithNoPackets(h){this.consecutiveStatsWithNoPackets=h}setConsecutiveStatsWithNoAudioPacketsSent(h){this.consecutiveStatsWithNoAudioPacketsSent=h}setLastPacketLossInboundTimestampMs(h){this.lastPacketLossInboundTimestampMs=h}setLastNoSignalTimestampMs(h){this.lastNoSignalTimestampMs=h}setLastWeakSignalTimestampMs(h){this.lastWeakSignalTimestampMs=h}setLastGoodSignalTimestampMs(h){this.lastGoodSignalTimestampMs=h}setAudioSpeakerDelayMs(h){this.audioSpeakerDelayMs=h}setIsVideoEncoderHardware(h){this.isVideoEncoderHardware=h}setVideoEncodingTimeInMs(h){this.videoEncodingTimeInMs=h}setVideoEncodingTimePerFrameInMs(h){this.videoEncodingTimePerFrameInMs=h}setCpuLimitationDuration(h){this.cpuLimitationDuration=h}setVideoInputFps(h){this.videoInputFps=h}setVideoEncodeFps(h){this.videoEncodeFps=h}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=d},8692068971:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6661072615)),p=f(d(1502393534));let m=r(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[h.default,p.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.highEncodeCpuMsPerFrameThreshold=15,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=m},5850044630:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1516469294));let p=r(class xs extends h.default{health(){if(this.currentData.isConnectionStartRecent(xs.CONNECTION_WAIT_TIME_MS))return 1;const s=this.currentData.consecutiveStatsWithNoPackets>=xs.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=xs.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>xs.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>xs.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),s||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${s}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(a,s,n){super(s,n,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,xs.CONNECTION_UNHEALTHY_THRESHOLD=s.connectionUnhealthyThreshold,xs.CONNECTION_WAIT_TIME_MS=s.connectionWaitTimeMs,xs.MISSED_PONGS_THRESHOLD=s.missedPongsUpperThreshold,xs.MAXIMUM_AUDIO_DELAY_MS=s.maximumAudioDelayMs,xs.MAXIMUM_AUDIO_DELAY_DATA_POINTS=s.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=p},4866586987:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1516469294));let p=r(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),s=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&s}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,s,n){super(s,n,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=s.sendingAudioFailureSamplesToConsider>0?s.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=s.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=s.maximumTimesToWarn,this.coolDownTimeMs=s.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=p},174963938:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1516469294));let p=r(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,s=a*this.packetsExpected;let n=0;for(let e=0;e<a;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/s,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,s){super(a,s,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=p},3334420728:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var d;(function(f){f.VideoEncodingCpuHealth="Video Encoding CPU Health",f.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(d=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=d},6661072615:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1516469294)),p=f(d(3334420728));let m=r(class extends h.default{health(){const s=this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold&&this.currentData.videoEncodingTimePerFrameInMs>=this.highEncodeCpuMsPerFrameThreshold;if(!this.currentData.isVideoEncoderHardware&&(s||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(s,n){super(s,n,p.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=s.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=s.highEncodeCpuMsThreshold,this.highEncodeCpuMsPerFrameThreshold=s.highEncodeCpuMsPerFrameThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=m},1502393534:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1516469294)),p=f(d(3334420728));let m=r(class extends h.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(s,n){super(s,n,p.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=s.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=m},8619504925:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(6527539809);let h=r(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,a,s){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",s),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let a=0,s=0;const n=m.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=m.getRTCStatsReport();let c=0,g=0;o.forEach(v=>{v.type==="candidate-pair"&&(v.bytesReceived&&(c+=v.bytesReceived),v.requestsReceived&&(g+=v.requestsReceived),v.responsesReceived&&(g+=v.responsesReceived))});const S=c-this.lastTotalBytesReceived;this.lastTotalBytesReceived=c;const u=g-this.lastTotalStunMessagesReceived;if(this.lastTotalStunMessagesReceived=g,typeof e=="number"&&typeof t=="number"){if(a=e,s=t,a<0||s<0||S<0||u<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,s),S>0||u>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||s>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateVideoEncodingHealth(m),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(m){const a=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),s=m.getVideoUpstreamSsrcs();if(!a||s.length===0){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}let n=!1,e=0,t=0,i=0,o=0;for(const g of s)n||(n=Boolean(m.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",g))),e+=m.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",g),t+=m.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",g),i+=m.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",g),o+=m.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",g);const c=o>0?e/o:0;this.connectionHealthData.setIsVideoEncoderHardware(Boolean(n)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(c),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(i),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(m,a){m.unshift(a),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{f.Maybe.of(m.connectionHealthDidChange).map(a=>a.bind(m)(this.connectionHealthData.clone()))})}constructor(m,a,s,n,e){this.audioVideoController=m,this.realtimeController=a,this.connectionHealthData=s,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.lastTotalStunMessagesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},805846668:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.Modality="#content"})(d||(d={})),l.default=d},220809536:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5546774952)),m=h(d(8503424008));let a=r(class Ph{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return f(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return f(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return f(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return f(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new p.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||Ph.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||Ph.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},7050079116:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(g,S,u,v){function E(b){return b instanceof u?b:new u(function(_){_(b)})}return r(E,"adopt"),new(u||(u=Promise))(function(b,_){function C(w){try{A(v.next(w))}catch(O){_(O)}}r(C,"fulfilled");function I(w){try{A(v.throw(w))}catch(O){_(O)}}r(I,"rejected");function A(w){w.done?b(w.value):E(w.value).then(C,I)}r(A,"step"),A((v=v.apply(g,S||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1197017824)),m=h(d(6226061697)),a=h(d(8023404193)),s=h(d(8006173476)),n=h(d(9649641385)),e=d(6527539809),t=h(d(681222244)),i=h(d(4499376852)),o=h(d(805846668));let c=r(class{static createContentShareMeetingSessionConfigure(S){const u=new m.default;return u.meetingId=S.meetingId,u.externalMeetingId=S.externalMeetingId,u.urls=S.urls,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.credentials=new a.default,u.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,u.credentials.externalUserId=S.credentials.externalUserId,u.credentials.joinToken=S.credentials.joinToken+o.default.Modality,u.meetingFeatures=S.meetingFeatures.clone(),u.videoDownlinkBandwidthPolicy=new t.default,u}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,u){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,u)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return f(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===p.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let u=0;u<this.mediaStreamBroker.mediaStream.getTracks().length;u++)this.mediaStreamBroker.mediaStream.getTracks()[u].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,u){return f(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,u);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(u=>u.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(u=>u.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return f(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const u of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(u)&&S(u)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(u=>{e.Maybe.of(u.contentShareDidStop).map(v=>v.call(u))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,u,v,E)=>{const b=new s.default(S).hasModality(s.default.MODALITY_CONTENT),_=new s.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!b||!_||!u||this.contentShareTile)return;const C=this.mediaStreamBroker.mediaStream;if(C!=null&&C.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const I=C.getVideoTracks()[0];let A,w;if(I.getSettings){const O=I.getSettings();A=O.width,w=O.height}else{const O=I.getCapabilities();A=O.width,w=O.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,C,A,w,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(I=>{e.Maybe.of(I.contentShareDidStart).map(A=>A.call(I))})})}constructor(S,u,v){this.mediaStreamBroker=S,this.contentAudioVideo=u,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=c},8207737579:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=r(class _s{static register(){!("document"in d.g)||!document.addEventListener||_s.shouldRegisterCSPMonitor&&(_s.added||(document.addEventListener("securitypolicyviolation",_s.listener),_s.added=!0))}static unregister(){!("document"in d.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",_s.listener),_s.loggers=new Set,_s.added=!1)}static disable(){_s.shouldRegisterCSPMonitor=!1,_s.unregister()}static addLogger(p){p&&_s.loggers.add(p)}static removeLogger(p){p&&_s.loggers.delete(p)}},"CSPMonitor");l.default=f,f.loggers=new Set,f.shouldRegisterCSPMonitor=!0,f.added=!1,f.listener=h=>{const p=`Security Policy Violation
Blocked URI: ${h.blockedURI}
Violated Directive: ${h.violatedDirective}
Original Policy: ${h.originalPolicy}
Document URI: ${h.documentURI}
Source File: ${h.sourceFile}
Line No.: ${h.lineNumber}
`;for(const m of f.loggers)m.error(p);f.loggers.size===0&&console.error(p)}},9091803745:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(h,p,m,a,s,n){this.timestampMs=h,this.topic=p,this.data=m,this.senderAttendeeId=a,this.senderExternalUserId=s,this.throttled=!!n}},"DataMessage");l.default=d},4236152345:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function d(f){return f&&"destroy"in f}r(d,"isDestroyable"),l.isDestroyable=d},9678458173:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function d(f){return!!f&&typeof f=="object"&&"mute"in f&&"stop"in f&&"intrinsicDevice"in f}r(d,"isAudioTransformDevice"),l.isAudioTransformDevice=d},8503424008:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(A,w,O,R){function F(V){return V instanceof O?V:new O(function($){$(V)})}return r(F,"adopt"),new(O||(O=Promise))(function(V,$){function X(ie){try{ne(R.next(ie))}catch(ge){$(ge)}}r(X,"fulfilled");function Y(ie){try{ne(R.throw(ie))}catch(ge){$(ge)}}r(Y,"rejected");function ne(ie){ie.done?V(ie.value):F(ie.value).then(X,Y)}r(ne,"step"),ne((R=R.apply(A,w||[])).next())})},h=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5546774952)),m=h(d(1716952340)),a=h(d(9649641385)),s=h(d(3054351868)),n=d(6527539809),e=h(d(7309008175)),t=h(d(8089299542)),i=d(9678458173),o=h(d(1869028663)),c=h(d(7754931014)),g=h(d(1823340272)),S=h(d(566402552)),u=h(d(5336609685)),v=h(d(763542717)),E=h(d(9398215393)),b=h(d(1197017824)),_=d(7952414906);let C=r(class nr{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(w=this.mediaDeviceWrapper)===null||w===void 0||w.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(w=this.mediaDeviceWrapper)===null||w===void 0||w.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return f(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const O=yield this.listDevicesOfKind("audioinput",w);return this.trace("listAudioInputDevices",w,O),O})}listVideoInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const O=yield this.listDevicesOfKind("videoinput",w);return this.trace("listVideoInputDevices",w,O),O})}listAudioOutputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const O=yield this.listDevicesOfKind("audiooutput",w);return this.trace("listAudioOutputDevices",w,O),O})}pushAudioMeetingStateForPermissions(w){var O;(O=this.eventController)===null||O===void 0||O.publishEvent(w===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(w){var O;(O=this.eventController)===null||O===void 0||O.publishEvent(w===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(w){return f(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(w))})}startAudioInputTask(w){var O;return f(this,void 0,void 0,function*(){if(w===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(w)?(this.logger.info(`Choosing transform input device ${w}`),yield this.chooseAudioTransformInputDevice(w)):(this.logger.info(`Choosing intrinsic audio input device ${w}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",w)),this.trace("startAudioInputDevice",w,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(O=this.transform)===null||O===void 0?void 0:O.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(R){throw R}})}stopAudioInput(){return f(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return f(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(w){var O;return f(this,void 0,void 0,function*(){if(((O=this.transform)===null||O===void 0?void 0:O.device)===w)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const R=nr.getAudioContext();if(!(R instanceof OfflineAudioContext))switch(R.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield R.resume()}let F;try{F=yield w.createAudioNode(R)}catch($){throw this.logger.error(`Unable to create transform device node: ${$}.`),$}const V=yield w.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",V),this.logger.debug(`Got inner stream: ${V}.`),this.setTransform(w,F)})}chooseVideoTransformInputDevice(w){var O;return f(this,void 0,void 0,function*(){if(this.eventController&&w instanceof e.default&&w.passEventControllerToProcessors(this.eventController),w===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const R=this.chosenVideoTransformDevice;R&&this.logger.info("Switched from previous VideoTransformDevice");const F=!!R,V=yield w.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((O=this.activeDevices.video)===null||O===void 0?void 0:O.stream,V)){this.logger.info("video transform device needs new intrinsic device"),F&&R.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=w,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",V),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=w,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield w.transformStream(this.activeDevices.video.stream)})}startVideoInput(w){return f(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(w))})}startVideoInputTask(w){return f(this,void 0,void 0,function*(){if(!w){this.logger.error("Invalid video input device");return}try{return _.isVideoTransformDevice(w)?(this.logger.info(`Choosing video transform device ${w}`),yield this.chooseVideoTransformInputDevice(w),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",w),this.trace("startVideoInputDevice",w),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(O){throw O}})}stopVideoInput(){return f(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return f(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(w){return f(this,void 0,void 0,function*(){this.audioOutputDeviceId=w,this.watchForDeviceChangesIfNecessary();const O=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(O),this.trace("chooseAudioOutput",w,null)})}addDeviceChangeObserver(w){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(w),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(w){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(w),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var w,O;if(!this.activeDevices.audio)return null;const R=(O=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||O===void 0?void 0:O.end;if(R){const F=R.context.createAnalyser();return F.removeOriginalInputs=()=>{try{R.disconnect(F)}catch{}},R.connect(F),F}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(w){const O=nr.getAudioContext(),R=O.createAnalyser(),F=O.createMediaStreamSource(w);return F.connect(R),this.trace("createAnalyserNodeForAudioInput"),R.removeOriginalInputs=()=>{try{F.disconnect(R)}catch{}},R}startVideoPreviewForVideoInput(w){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",w.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,w,!0),this.trace("startVideoPreviewForVideoInput",w.id)}stopVideoPreviewForVideoInput(w){t.default.disconnectVideoStreamFromVideoElement(w,!1),this.trace("stopVideoPreviewForVideoInput",w.id)}setDeviceLabelTrigger(w){if(this.deviceInfoCache){for(const O of this.deviceInfoCache)if(!O.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=w,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(w){let O=null;return this.useWebAudio?(O=nr.getAudioContext().createMediaStreamSource(w),O.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",w.id),O}chooseVideoInputQuality(w,O,R){const F=this.browserBehavior.requiresResolutionAlignment(w,O);this.videoInputQualitySettings=new b.default(F[0],F[1],R)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return f(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return f(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(w){return f(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(w){const O=this.activeDevices[w];if(!O)return;const R=O.endedCallback,F=O.trackMuteCallback,V=O.trackUnmuteCallback;for(const $ of O.stream.getTracks())$.stop(),R&&$.removeEventListener("ended",R),F&&$.removeEventListener("mute",F),V&&$.removeEventListener("unmute",V),delete O.endedCallback,delete O.trackMuteCallback,delete O.trackUnmuteCallback,delete this.activeDevices[w]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(w){var O;let R=this.activeDevices.audio;if(this.useWebAudio&&(R=this.getMediaStreamDestinationNode()),!!R){for(const F of R.stream.getTracks())F.enabled!==w&&(F.enabled=w);this.muted!==!w&&(this.muted=!w,(O=this.transform)===null||O===void 0||O.device.mute(this.muted))}}static getIntrinsicDeviceId(w){if(!w)return;if(typeof w=="string")return w;if(w.id)return w.id;const R=w.deviceId;if(!R)return;if(typeof R=="string"||Array.isArray(R))return R;const F=R;if(typeof F.exact=="string"||Array.isArray(F.exact))return F.exact}static createEmptyAudioDevice(){return nr.synthesizeAudioDevice(0)}static synthesizeAudioDevice(w){const O=nr.getAudioContext(),R=O.createMediaStreamDestination();if(w){const F=O.createGain();F.gain.value=.1,F.connect(R);const V=O.createOscillator();V.frequency.value=w,V.connect(F),V.start()}else{const F=O.createBufferSource();try{F.buffer=O.createBuffer(1,O.sampleRate*5,O.sampleRate)}catch(V){if(V&&V.name==="NotSupportedError")F.buffer=O.createBuffer(1,nr.defaultSampleRate*5,nr.defaultSampleRate);else throw V}F.buffer.getChannelData(0)[0]=3e-4,F.loop=!0,F.connect(R),F.start()}return R.stream}listDevicesOfKind(w,O){return f(this,void 0,void 0,function*(){return(O||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(w)})}updateDeviceInfoCacheFromBrowser(){var w;return f(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let R=yield navigator.mediaDevices.enumerateDevices(),F=!0;for(const V of R)if(!V.label){F=!1;break}if(!F)try{this.logger.info("attempting to trigger media device labels since they are hidden");const V=yield this.deviceLabelTrigger();R=yield navigator.mediaDevices.enumerateDevices();for(const $ of V.getTracks())$.stop()}catch(V){this.logger.info("unable to get media device labels"),(w=this.eventController)===null||w===void 0||w.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(V)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(R)}`),this.deviceInfoCache=R})}listCachedDevicesOfKind(w){const O=[];if(this.deviceInfoCache)for(const R of this.deviceInfoCache)R.kind===w&&O.push(R);return O}handleDeviceChange(){return f(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const w=this.listCachedDevicesOfKind("audioinput"),O=this.listCachedDevicesOfKind("videoinput"),R=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const F=this.listCachedDevicesOfKind("audioinput"),V=this.listCachedDevicesOfKind("videoinput"),$=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(X=>{this.areDeviceListsEqual(w,F)||n.Maybe.of(X.audioInputsChanged).map(Y=>Y.bind(X)(F)),this.areDeviceListsEqual(O,V)||n.Maybe.of(X.videoInputsChanged).map(Y=>Y.bind(X)(V)),this.areDeviceListsEqual(R,$)||n.Maybe.of(X.audioOutputsChanged).map(Y=>Y.bind(X)($))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(w,O){return f(this,void 0,void 0,function*(){try{w==="audio"?(this.useWebAudio&&this.browserBehavior.requiresAudioContextResetOnDeviceFailureForWebAudio()?(this.logger.warn("Audio input device which was active is no longer available, suspending and resuming audio context before resetting to empty device to ensure packets are sent"),yield this.stopAudioInput(),nr.suspendAudioContext(),nr.resumeAudioContext()):this.logger.warn("Audio input device which was active is no longer available, resetting to empty device to ensure packets are sent"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}w==="audio"?this.forEachObserver(R=>{n.Maybe.of(R.audioInputStreamEnded).map(F=>F.bind(R)(O))}):this.forEachObserver(R=>{n.Maybe.of(R.videoInputStreamEnded).map(F=>F.bind(R)(O))})})}forEachObserver(w){for(const O of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(O)&&w(O)})}forEachMediaStreamBrokerObserver(w){for(const O of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(O)&&w(O)})}areDeviceListsEqual(w,O){return JSON.stringify(w.map(R=>JSON.stringify(R)).sort())===JSON.stringify(O.map(R=>JSON.stringify(R)).sort())}intrinsicDeviceAsMediaStream(w){return w&&w.id?w:null}hasSameMediaStreamId(w,O,R){var F,V,$,X;let Y;return w==="audio"?(Y=R==null?void 0:R.audio.streamId,!!Y&&Y===((V=(F=O.constraints)===null||F===void 0?void 0:F.audio)===null||V===void 0?void 0:V.streamId)):(Y=R==null?void 0:R.video.streamId,!!Y&&Y===((X=($=O==null?void 0:O.constraints)===null||$===void 0?void 0:$.video)===null||X===void 0?void 0:X.streamId))}hasSameGroupId(w,O,R){if(w==="")return!0;const F=nr.getIntrinsicDeviceId(R);return this.logger.debug(`Checking deviceIds ${F} of type ${typeof F} with groupId ${w}`),typeof F=="string"&&w===this.getGroupIdFromDeviceId(O,F)}getGroupIdFromDeviceId(w,O){if(this.deviceInfoCache!==null){const R=this.listCachedDevicesOfKind(`${w}input`).find(F=>F.deviceId===O);if(R&&R.groupId)return this.logger.debug(`GroupId of deviceId ${O} found in cache is ${R.groupId}`),R.groupId}return this.logger.debug(`GroupId of deviceId ${O} found in cache is empty`),""}handleGetUserMediaError(w,O){if(!w)throw new c.default(w);switch(w.name){case"NotReadableError":case"TrackStartError":throw new S.default(w);case"NotFoundError":case"DevicesNotFoundError":throw new g.default(w);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw O&&O<nr.permissionDeniedOriginDetectionThresholdMs?new v.default(w,"Permission denied by browser"):new v.default(w,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new u.default(w);case"TypeError":throw new E.default(w);case"AbortError":default:throw new c.default(w)}}matchesDeviceSelection(w,O,R,F){return R&&R.stream.active&&(this.hasSameMediaStreamId(w,R,F)||R.groupId!==null&&this.hasSameGroupId(R.groupId,w,O))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(R.constraints)} to proposed constraints ${JSON.stringify(F)}`),R.matchesConstraints(F)):!1}chooseInputIntrinsicDevice(w,O){var R,F;return f(this,void 0,void 0,function*(){const V=this.getMediaStreamConstraints(w,O);if(this.matchesDeviceSelection(w,O,this.activeDevices[w],V)){this.logger.info(`reusing existing ${w} input device`);return}this.activeDevices[w]&&this.activeDevices[w].stream&&this.stopTracksAndRemoveCallbacks(w);const $=Date.now(),X=new o.default;try{this.logger.info(`requesting new ${w} device with constraint ${JSON.stringify(V)}`);const Y=this.intrinsicDeviceAsMediaStream(O);w==="audio"&&O===null?(X.stream=nr.createEmptyAudioDevice(),X.constraints=null):Y?(this.logger.info(`using media stream ${Y.id} for ${w} device`),X.stream=Y,X.constraints=V):(X.stream=yield navigator.mediaDevices.getUserMedia(V),X.constraints=V),yield this.handleNewInputDevice(w,X)}catch(Y){const ne=this.getErrorMessage(Y);w==="audio"?(R=this.eventController)===null||R===void 0||R.publishEvent("audioInputFailed",{audioInputErrorMessage:ne}):(F=this.eventController)===null||F===void 0||F.publishEvent("videoInputFailed",{videoInputErrorMessage:ne}),this.logger.error(`failed to get ${w} device for constraints ${JSON.stringify(V)}: ${ne}`);let ie=!0;if(Y&&"constraint"in Y&&(this.logger.error(`Over-constrained by constraint: ${Y.constraint}`),this.useMediaConstraintsFallback)){const ge=this.getMediaStreamConstraints(w,O,!0),Ie=JSON.stringify(ge);if(Ie!==JSON.stringify(V)){this.logger.info(`retry requesting new ${w} device with minimal constraint ${Ie}`);try{X.stream=yield navigator.mediaDevices.getUserMedia(ge),X.constraints=ge,yield this.handleNewInputDevice(w,X),ie=!1}catch(We){this.logger.error(`failed to get ${w} device for constraints ${Ie}: ${this.getErrorMessage(We)}`)}}}if(ie){if(w==="audio"){this.logger.info(`choosing null ${w} device instead`);try{X.stream=nr.createEmptyAudioDevice(),X.constraints=null,yield this.handleNewInputDevice(w,X)}catch(ge){this.logger.error(`failed to choose null ${w} device. ${ge.name}: ${ge.message}`)}}this.handleGetUserMediaError(Y,Date.now()-$)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(w){return w?w.name&&w.message?`${w.name}: ${w.message}`:w.name?w.name:w.message?w.message:"UnknownError":"UnknownError"}handleNewInputDevice(w,O){var R;return f(this,void 0,void 0,function*(){this.logger.info(`got ${w} device for constraints ${JSON.stringify(O.constraints)}`);const F=(R=this.getMediaTrackSettings(O.stream))===null||R===void 0?void 0:R.deviceId;O.groupId=F?this.getGroupIdFromDeviceId(w,F):"",this.activeDevices[w]=O,this.logger.debug(`Set activeDevice to ${JSON.stringify(O)}`),this.watchForDeviceChangesIfNecessary();const V=O.stream.getTracks()[0];if(V&&(O.endedCallback=()=>{this.activeDevices[w]&&this.activeDevices[w].stream===O.stream&&(this.handleDeviceStreamEnded(w,F),delete O.endedCallback)},V.addEventListener("ended",O.endedCallback,{once:!0})),w==="audio"){const $=O.stream.getAudioTracks()[0];if($){const X=$.getSettings().deviceId||O.stream;O.trackMuteCallback=()=>{this.mediaStreamMuteObserver(X,!0)},O.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(X,!1)},$.addEventListener("mute",O.trackMuteCallback,{once:!1}),$.addEventListener("unmute",O.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),$.muted?O.trackMuteCallback():O.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(w,O,R,F){if(F&&this.listCachedDevicesOfKind(`${w}input`).length===1)return!0;const V={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?V.deviceId=O:V.deviceId={exact:O},R&&(V.groupId=R),F?V:w==="video"?(V.width={ideal:this.videoInputQualitySettings.videoWidth},V.height={ideal:this.videoInputQualitySettings.videoHeight},V.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},V):(this.supportSampleRateConstraint()&&(V.sampleRate={ideal:nr.defaultSampleRate}),this.supportSampleSizeConstraint()&&(V.sampleSize={ideal:nr.defaultSampleSize}),this.supportChannelCountConstraint()&&(V.channelCount={ideal:nr.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},V))}getMediaStreamConstraintsFromTrackConstraints(w,O){return w==="audio"?{audio:O}:{video:O}}getMediaStreamConstraints(w,O){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F={};if(!O)return null;const V=this.intrinsicDeviceAsMediaStream(O);if(V)return F.streamId=V.id,this.getMediaStreamConstraintsFromTrackConstraints(w,F);if(typeof O=="string"){let $="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?$=this.getGroupIdFromDeviceId(w,O):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),F=this.calculateMediaStreamConstraints(w,O,$,R),this.getMediaStreamConstraintsFromTrackConstraints(w,F)}return I(O)?(F=this.calculateMediaStreamConstraints(w,O.deviceId,O.groupId,R),this.getMediaStreamConstraintsFromTrackConstraints(w,F)):(F=O,this.getMediaStreamConstraintsFromTrackConstraints(w,F))}deviceInfoFromDeviceId(w,O){if(this.deviceInfoCache===null)return null;for(const R of this.deviceInfoCache)if(R.kind===w&&R.deviceId===O)return R;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(w,O){if(!w||!w.active||!O)return!1;if(O.id)return w.id===O.id;const R=this.getMediaTrackSettings(w);if(!R.deviceId)return!1;const F=nr.getIntrinsicDeviceId(O);return typeof F=="string"?R.deviceId===F:!1}getMediaTrackSettings(w){var O;return(O=w.getTracks()[0])===null||O===void 0?void 0:O.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const w=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(w)}setTransform(w,O){var R,F;(F=(R=this.transform)===null||R===void 0?void 0:R.nodes)===null||F===void 0||F.end.disconnect(),this.transform={nodes:O,device:w};const V=O==null?void 0:O.end,$=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${V} to destination ${$}.`),V==null||V.connect($),this.reconnectAudioInputs()}removeTransform(){var w;const O=this.transform;if(O)return(w=this.transform.nodes)===null||w===void 0||w.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),O}attachAudioInputStreamToAudioContext(w){var O;(O=this.audioInputSourceNode)===null||O===void 0||O.disconnect(),this.audioInputSourceNode=nr.getAudioContext().createMediaStreamSource(w);const R=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(R)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=nr.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var w,O;return((O=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||O===void 0?void 0:O.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(w){nr.defaultLatencyHint=w}static getAudioContext(){if(!nr.audioContext){const w={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(w.sampleRate=nr.defaultSampleRate),new p.default().requiresPlaybackLatencyHintForAudioContext()&&(w.latencyHint="playback"),nr.defaultLatencyHint&&(w.latencyHint=nr.defaultLatencyHint),nr.audioContext=new(window.AudioContext||window.webkitAudioContext)(w)}return nr.audioContext}static suspendAudioContext(){return f(this,void 0,void 0,function*(){return nr.audioContext?nr.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return f(this,void 0,void 0,function*(){return nr.audioContext?nr.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(nr.audioContext)try{nr.audioContext.close()}catch{}nr.audioContext=null}addMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.add(w)}removeMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.delete(w)}publishVideoInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(O=>{O.videoInputDidChange&&O.videoInputDidChange(w)}),this.pushVideoMeetingStateForPermissions(w)}publishAudioInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(O=>{O.audioInputDidChange&&O.audioInputDidChange(w)}),this.pushAudioMeetingStateForPermissions(w)}publishAudioOutputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(O=>{O.audioOutputDidChange&&O.audioOutputDidChange(w)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(w,O,R){let F=`API/DefaultDeviceController/${w}`;typeof O<"u"&&(F+=` ${JSON.stringify(O)}`),typeof R<"u"&&(F+=` -> ${JSON.stringify(R)}`),this.logger.info(F)}constructor(w,O,R=new p.default,F){this.logger=w,this.browserBehavior=R,this.eventController=F,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new s.default,this.videoInputTaskQueue=new s.default,this.muted=!1,this.mediaStreamMuteObserver=(Y,ne)=>{for(const ie of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(ie)&&ie.audioInputMuteStateChanged&&ie.audioInputMuteStateChanged(Y,ne)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:V=!1,useMediaConstraintsFallback:$=!0}=O||{};this.useWebAudio=V,this.useMediaConstraintsFallback=$,this.videoInputQualitySettings=new b.default(nr.defaultVideoWidth,nr.defaultVideoHeight,nr.defaultVideoFrameRate);const X=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=X[0],this.videoInputQualitySettings.videoHeight=X[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const Y=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(Y)}`)}catch(Y){w.error(Y.message)}}},"DefaultDeviceController");l.default=C,C.permissionDeniedOriginDetectionThresholdMs=500,C.defaultVideoWidth=960,C.defaultVideoHeight=540,C.defaultVideoFrameRate=15,C.defaultSampleRate=48e3,C.defaultSampleSize=16,C.defaultChannelCount=1,C.audioContext=null;function I(A){return typeof A=="object"&&"deviceId"in A&&"groupId"in A&&"kind"in A&&"label"in A}r(I,"isMediaDeviceInfo")},1869028663:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{matchesConstraints(h){return JSON.stringify(this.constraints)===JSON.stringify(h)}constructor(){this.groupId=""}},"DeviceSelection");l.default=d},7754931014:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class extends Error{constructor(h,p){super(p||"Error fetching device."),this.cause=h,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=d},8082139119:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const p=h(d(9437918857)),m=h(d(1197017824));let a=r(class extends p.default{destroy(){return f(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let s=r(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=s},1823340272:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7754931014));let p=r(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=p},566402552:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7754931014));let p=r(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=p},5336609685:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7754931014));let p=r(class extends h.default{constructor(a,s){super(a),this.constraint=s,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=p},763542717:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7754931014));let p=r(class extends h.default{constructor(a,s){super(a,s),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=p},2847388805:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{mute(p){return d(this,void 0,void 0,function*(){})}stop(){var p;return d(this,void 0,void 0,function*(){(p=this.node)===null||p===void 0||p.disconnect()})}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.inner})}createAudioNode(p){var m;return d(this,void 0,void 0,function*(){return(m=this.node)===null||m===void 0||m.disconnect(),this.node=yield this.createSingleAudioNode(p),{start:this.node,end:this.node}})}constructor(p){this.inner=p}},"SingleNodeAudioTransformDevice");l.default=f},9398215393:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7754931014));let p=r(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=p},1197017824:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return this.videoWidth===h.videoWidth&&this.videoHeight===h.videoHeight&&this.videoFrameRate===h.videoFrameRate}constructor(h,p,m){this.videoWidth=h,this.videoHeight=p,this.videoFrameRate=m}},"VideoQualitySettings");l.default=d,d.VideoDisabled=new d(0,0,0),d.VideoResolutionHD=new d(1280,720,30),d.VideoResolutionFHD=new d(1920,1080,30),d.VideoResolutionUHD=new d(3840,2160,30)},7952414906:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function d(f){return!!f&&typeof f=="object"&&"transformStream"in f&&"stop"in f&&"intrinsicDevice"in f}r(d,"isVideoTransformDevice"),l.isVideoTransformDevice=d},5163444346:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{destroy(){return d(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(p){this.observerQueue.add(p),p.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(p){this.observerQueue.delete(p)}constructor(p,m){if(this.devicePixelRatioSource=p,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(s=>{s.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):m.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=f},3563909523:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=d},9004346135:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(t,i,o,c){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(_){try{b(c.next(_))}catch(C){u(C)}}r(v,"fulfilled");function E(_){try{b(c.throw(_))}catch(C){u(C)}}r(E,"rejected");function b(_){_.done?S(_.value):g(_.value).then(v,E)}r(b,"step"),b((c=c.apply(t,i||[])).next())})},h=this&&this.__rest||function(t,i){var o={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&i.indexOf(c)<0&&(o[c]=t[c]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,c=Object.getOwnPropertySymbols(t);g<c.length;g++)i.indexOf(c[g])<0&&Object.prototype.propertyIsEnumerable.call(t,c[g])&&(o[c[g]]=t[c[g]]);return o},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=p(d(4571447548)),a=p(d(9877075638)),s=p(d(3894274294)),n=d(5685319565);let e=r(class Na{addEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.addEventListener||!("document"in d.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.removeEventListener||!("document"in d.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return f(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:g}=i,S=g&&this.filterAttributes(g,this.attributesToFilter),u=Object.assign({name:o,ts:c},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(u)}`);const v=this.getSize(u);if(v>Na.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${Na.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(u)}`),this.sendEventImmediately({name:o,ts:c,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(u),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const E=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(E),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const c=new Set(o);return Object.keys(i).filter(S=>c.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Na.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[c,g]of Object.entries(i))o+=this.getPrimitiveSize(c),o+=this.getSize(g);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return f(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:g}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:c},g)]};let u=!1,v=null;const E=this.makeRequestBody([S]);try{if(v=yield this.send(E),v.ok){try{const b=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${E}, message: ${JSON.stringify(b)}`)}catch(b){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${b} for event ${E}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${E} with response status ${v.status}`),u=!0}catch(b){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${E} to the ingestion endpoint ${b}.`),u=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const _=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${_}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,_)?u=!1:u=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${E}`),u=!0}}u&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${E}`),this.failedIngestionEvents.push(S))})}send(i){return f(this,void 0,void 0,function*(){const o=new m.default(Na.RETRY_FIXED_BACKOFF_WAIT_MS,Na.RETRY_SHORT_BACKOFF_MS,Na.RETRY_LONG_BACKOFF_MS);try{let c=0;for(;c<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(g.ok||!Na.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${g.status}.`),c++,c<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(c===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(c){throw c}})}sendBeacon(){return f(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const c=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(c)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const c=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(c)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(c=>{i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(c)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(c){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${c}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return f(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,c,g,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=V=>({type:V.type,v:V.v,payloads:[...V.payloads]}),this.sendEvents=()=>f(this,void 0,void 0,function*(){if(this.lock)return;const V=this.getItems(this.flushSize);if(V.length===0)return;this.lock=!0;const $=this.makeRequestBody(V);let X=!1;const Y=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(Y,V);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${$}`);const ne=yield this.send($);if(this.cancellableEvents.delete(Y),!ne.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${$} with response status ${ne.status}`),X=!0;else try{const ie=yield ne.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${$} message: ${JSON.stringify(ie)}`)}catch(ie){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ie} for events ${$}`)}}catch(ne){X=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${$} to the ingestion endpoint ${ne}`)}finally{this.lock=!1}X&&(this.cancellableEvents.delete(Y),this.failedIngestionEvents.push(...V))});const u=new s.default(S).getParserResult(),{browserMajorVersion:v}=u,E=h(u,["browserMajorVersion"]),b=o.toJSON(),{type:_,v:C}=b,I=h(b,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},E),I),Object.keys(this.metadata).forEach(V=>this.attributesToFilter.push(V)),this.type=_,this.v=C,this.ingestionURL=c,this.logger=S,this.importantEvents=new Set(g);const{maxBufferCapacityKb:A,totalBufferItems:w,flushSize:O,flushIntervalMs:R,retryCountLimit:F}=i;this.maxBufferCapacityBytes=A*1024,this.totalBufferItems=w,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/w),this.flushIntervalMs=R,this.flushSize=O,this.retryCountLimit=F,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=V=>this.beaconEventHandler(V),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},666910387:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h=5e3,p=2,m=64,a=100,s=15){this.flushIntervalMs=h,this.flushSize=p,this.maxBufferCapacityKb=m,this.totalBufferItems=a,this.retryCountLimit=s}},"EventBufferConfiguration");l.default=d},913629600:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(c,g,S,u){function v(E){return E instanceof S?E:new S(function(b){b(E)})}return r(v,"adopt"),new(S||(S=Promise))(function(E,b){function _(A){try{I(u.next(A))}catch(w){b(w)}}r(_,"fulfilled");function C(A){try{I(u.throw(A))}catch(w){b(w)}}r(C,"rejected");function I(A){A.done?E(A.value):v(A.value).then(_,C)}r(I,"step"),I((u=u.apply(c,g||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(3277712452),m=d(4236152345),a=h(d(8302308181)),s=h(d(7733481723)),n=h(d(2864685592)),e=h(d(9649641385)),t=h(d(6885109343)),i=h(d(7750779956));let o=r(class gl{addObserver(g){this.observerSet.add(g)}removeObserver(g){this.observerSet.delete(g)}forEachObserver(g){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&g(S)})}publishEvent(g,S){return f(this,void 0,void 0,function*(){const u=Date.now();this.meetingHistoryStates.push({name:g,timestampMs:u});const v=Object.freeze(Object.assign(this.getAttributes(u),S));this.forEachObserver(E=>{E.eventDidReceive(g,v)}),this.reportEvent(g,u,S)})}reportEvent(g,S,u){var v;return f(this,void 0,void 0,function*(){let E;try{u&&(E=i.default(u)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,g,E)}catch(b){this.logger.error(`Error reporting event ${b}`)}})}setupEventReporter(g,S,u){if(u)this._eventReporter=u;else if(g.urls){const v=g.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:b,joinToken:_}}=g,C=new n.default(E,b,_),I=new a.default(C,v);this._eventReporter=new s.default(I,S)}}}getAttributes(g){var S,u;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||gl.UNAVAILABLE,osVersion:((u=this.parserResult)===null||u===void 0?void 0:u.os.version)||gl.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:g}}get eventReporter(){return this._eventReporter}destroy(){return f(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(g,S,u){var v,E,b,_,C,I,A;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=g,this.setupEventReporter(g,S,u);try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null}catch(w){this.logger.error(w.message)}this.browserMajorVersion=((b=(E=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||E===void 0?void 0:E.version)===null||b===void 0?void 0:b.split(".")[0])||gl.UNAVAILABLE,this.browserName=((_=this.parserResult)===null||_===void 0?void 0:_.browser.name)||gl.UNAVAILABLE,this.browserVersion=((C=this.parserResult)===null||C===void 0?void 0:C.browser.version)||gl.UNAVAILABLE,this.deviceName=[((I=this.parserResult)===null||I===void 0?void 0:I.device.vendor)||"",((A=this.parserResult)===null||A===void 0?void 0:A.device.model)||""].join(" ").trim()||gl.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},7750779956:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=r(f=>{const h={};for(const[p,m]of Object.entries(f))if(!(m==null||m===""))if(typeof m=="number"||typeof m=="string")h[p]=m;else throw new TypeError("Unhandled type received while flattening attributes.");return h},"flattenEventAttributes");l.default=d},8302308181:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(666910387));let p=r(class{constructor(a,s,n=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=s,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");l.default=p},7733481723:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(4236152345),m=h(d(9004346135));let a=r(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return f(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return f(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),p.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:c}=t;this.eventBuffer=new m.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");l.default=a},9931580517:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reportEvent(h,p,m){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=d},2864685592:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const h={};return h.type=this.type,h.v=this.v,h.meetingId=this.meetingId,h.attendeeId=this.attendeeId,h}constructor(h,p,m,a=[]){this.type="Meet",this.v=1,this.meetingId=h,this.attendeeId=p,this.eventsToIgnore=a,this.authenticationToken=m}},"MeetingEventsClientConfiguration");l.default=d},3305135794:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(eo){return eo&&eo.__esModule?eo:{default:eo}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoElementResolutionMonitor=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=l.MeetingReadinessCheckerConfiguration=void 0,l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=l.RedundantAudioEncoderWorkerCode=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=l.VideoEncodingCpuConnectionHealthPolicy=void 0;const h=f(d(9677745702));l.AllHighestVideoBandwidthPolicy=h.default;const p=f(d(1035256489));l.ApplicationMetadata=p.default;const m=f(d(9649641385));l.AsyncScheduler=m.default;const a=f(d(4713678292));l.AttachMediaInputTask=a.default;const s=f(d(9898009183));l.Attendee=s.default;const n=f(d(4882678815));l.AudioLogEvent=n.default;const e=f(d(5983965185));l.AudioProfile=e.default;const t=f(d(4610074022));l.AudioVideoControllerState=t.default;const i=f(d(1174868230));l.BackgroundBlurStrength=i.default;const o=f(d(3437938989));l.BackgroundBlurVideoFrameProcessor=o.default;const c=f(d(6828608641));l.BackgroundFilterVideoFrameProcessor=c.default;const g=f(d(3561775467));l.BackgroundReplacementVideoFrameProcessor=g.default;const S=f(d(1516469294));l.BaseConnectionHealthPolicy=S.default;const u=f(d(5009059128));l.BaseTask=u.default;const v=f(d(4207915265));l.BitrateParameters=v.default;const E=f(d(8207737579));l.CSPMonitor=E.default;const b=f(d(1458156729));l.CanvasVideoFrameBuffer=b.default;const _=f(d(5131738647));l.CheckAudioConnectivityFeedback=_.default;const C=f(d(5912013634));l.CheckAudioInputFeedback=C.default;const I=f(d(5266008321));l.CheckAudioOutputFeedback=I.default;const A=f(d(492984661));l.CheckCameraResolutionFeedback=A.default;const w=f(d(1012711751));l.CheckContentShareConnectivityFeedback=w.default;const O=f(d(1711209018));l.CheckNetworkTCPConnectivityFeedback=O.default;const R=f(d(1519813406));l.CheckNetworkUDPConnectivityFeedback=R.default;const F=f(d(5425713910));l.CheckVideoConnectivityFeedback=F.default;const V=f(d(2656423953));l.CheckVideoInputFeedback=V.default;const $=f(d(9089081530));l.CleanRestartedSessionTask=$.default;const X=f(d(5703332651));l.CleanStoppedSessionTask=X.default;const Y=f(d(9029233041));l.ClientMetricReport=Y.default;const ne=f(d(6502873558));l.ClientMetricReportDirection=ne.default;const ie=f(d(6132421099));l.ClientMetricReportMediaType=ie.default;const ge=f(d(863418510));l.ClientVideoStreamReceivingReport=ge.default;const Ie=f(d(9200233701));l.ConnectionHealthData=Ie.default;const We=f(d(8692068971));l.ConnectionHealthPolicyConfiguration=We.default;const ct=f(d(3714104304));l.ConsoleLogger=ct.default;const Ae=f(d(805846668));l.ContentShareConstants=Ae.default;const Fe=f(d(220809536));l.ContentShareMediaStreamBroker=Fe.default;const Xe=f(d(9049733277));l.CreatePeerConnectionTask=Xe.default;const Ge=f(d(4708498556));l.CreateSDPTask=Ge.default;const it=f(d(9091803745));l.DataMessage=it.default;const Dt=f(d(7581324406));l.DefaultActiveSpeakerDetector=Dt.default;const wt=f(d(1473791890));l.DefaultActiveSpeakerPolicy=wt.default;const Pe=f(d(9598694912));l.DefaultAudioMixController=Pe.default;const xe=f(d(1833994912));l.DefaultAudioVideoController=xe.default;const et=f(d(9305916160));l.DefaultAudioVideoFacade=et.default;const rt=f(d(5546774952));l.DefaultBrowserBehavior=rt.default;const je=f(d(7050079116));l.DefaultContentShareController=je.default;const Ft=f(d(8503424008));l.DefaultDeviceController=Ft.default;const Gt=f(d(5163444346));l.DefaultDevicePixelRatioMonitor=Gt.default;const Xt=f(d(913629600));l.DefaultEventController=Xt.default;const sn=f(d(1716952340));l.DefaultMediaDeviceFactory=sn.default;const cn=f(d(7733481723));l.DefaultMeetingEventReporter=cn.default;const Bt=f(d(5346911216));l.DefaultMeetingReadinessChecker=Bt.default;const gn=f(d(6643608480));l.DefaultMeetingSession=gn.default;const Ci=f(d(9331325908));l.DefaultMessagingSession=Ci.default;const $n=f(d(8006173476));l.DefaultModality=$n.default;const Sn=f(d(6348496904));l.DefaultPingPong=Sn.default;const nn=f(d(7692233712));l.DefaultRealtimeController=nn.default;const Vt=f(d(2114525466));l.DefaultReconnectController=Vt.default;const Wn=f(d(6900744364));l.DefaultSessionStateController=Wn.default;const Lt=f(d(7924674822));l.DefaultSigV4=Lt.default;const zt=f(d(7570945794));l.DefaultSignalingClient=zt.default;const It=f(d(1604549269));l.DefaultSimulcastUplinkPolicy=It.default;const z=f(d(4499376852));l.DefaultSimulcastUplinkPolicyForContentShare=z.default;const Ve=f(d(2392158736));l.DefaultTransceiverController=Ve.default;const He=f(d(6391477986));l.DefaultTranscriptionController=He.default;const Je=f(d(3894274294));l.DefaultUserAgentParser=Je.default;const Ye=f(d(1695739824));l.DefaultVideoCaptureAndEncodeParameter=Ye.default;const lt=f(d(3528154542));l.DefaultVideoElementResolutionMonitor=lt.default;const le=f(d(4353575046));l.DefaultVideoFrameProcessorPipeline=le.default;const Ue=f(d(4223139537));l.DefaultVideoFrameProcessorTimer=Ue.default;const G=f(d(1865309432));l.DefaultVideoStreamIdSet=G.default;const Q=f(d(2469210420));l.DefaultVideoStreamIndex=Q.default;const ye=f(d(8089299542));l.DefaultVideoTile=ye.default;const Ee=f(d(4675986794));l.DefaultVideoTileController=Ee.default;const pt=f(d(1309535200));l.DefaultVideoTileFactory=pt.default;const ze=f(d(7309008175));l.DefaultVideoTransformDevice=ze.default;const st=f(d(8058016368));l.DefaultVolumeIndicatorAdapter=st.default;const me=f(d(7880459944));l.DefaultWebSocketAdapter=me.default;const Me=f(d(3563909523));l.DevicePixelRatioWindowSource=Me.default;const k=f(d(1869028663));l.DeviceSelection=k.default;const Se=f(d(666910387));l.EventBufferConfiguration=Se.default;const be=f(d(8302308181));l.EventIngestionConfiguration=be.default;const we=f(d(2635066756));l.FinishGatheringICECandidatesTask=we.default;const ee=f(d(4571447548));l.FullJitterBackoff=ee.default;const en=f(d(4692955950));l.FullJitterBackoffFactory=en.default;const dt=f(d(1733276918));l.FullJitterLimitedBackoff=dt.default;const Ct=f(d(7754931014));l.GetUserMediaError=Ct.default;const xn=f(d(7966078085));l.GlobalMetricReport=xn.default;const Qt=f(d(9004346135));l.InMemoryJSONEventBuffer=Qt.default;const Xi=f(d(9877075638));l.IntervalScheduler=Xi.default;const Pi=f(d(9488451395));l.JoinAndReceiveIndexTask=Pi.default;const Kn=f(d(9638153336));l.LeaveAndReceiveLeaveAckTask=Kn.default;const ni=f(d(7966229607));l.ListenForVolumeIndicatorsTask=ni.default;const Mn=f(d(4153358599));l.Log=Mn.default;const qn=f(d(1370928943));l.LogLevel=qn.default;const bi=f(d(7632020355));l.MediaDeviceProxyHandler=bi.default;const xr=f(d(2864685592));l.MeetingEventsClientConfiguration=xr.default;const Zt=f(d(2612255336));l.MeetingFeatures=Zt.default;const Nt=f(d(898490693));l.MeetingReadinessCheckerConfiguration=Nt.default;const On=f(d(6226061697));l.MeetingSessionConfiguration=On.default;const _n=f(d(8023404193));l.MeetingSessionCredentials=_n.default;const si=f(d(2234819701));l.MeetingSessionLifecycleEvent=si.default;const vi=f(d(546597810));l.MeetingSessionLifecycleEventCondition=vi.default;const Mi=f(d(7551081659));l.MeetingSessionStatus=Mi.default;const ui=f(d(9447989038));l.MeetingSessionStatusCode=ui.default;const Ii=f(d(4943767904));l.MeetingSessionTURNCredentials=Ii.default;const wi=f(d(803810435));l.MeetingSessionURLs=wi.default;const Ui=f(d(488357679));l.MeetingSessionVideoAvailability=Ui.default;const ii=f(d(1261307249));l.Message=ii.default;const fr=f(d(6589808043));l.MessagingSessionConfiguration=fr.default;const Li=f(d(3051230507));l.ModelSpecBuilder=Li.default;const Ar=f(d(1614136239));l.MonitorTask=Ar.default;const Zn=f(d(23593200));l.MultiLogger=Zn.default;const N=f(d(9136055221));l.NScaleVideoUplinkBandwidthPolicy=N.default;const oe=f(d(8589145157));l.NoOpAudioVideoController=oe.default;const Re=f(d(5047661014));l.NoOpDebugLogger=Re.default;const nt=f(d(8082139119));l.NoOpDeviceController=nt.default;const Pt=f(d(9931580517));l.NoOpEventReporter=Pt.default;const En=f(d(1831006443));l.NoOpLogger=En.default;const wn=f(d(9437918857));l.NoOpMediaStreamBroker=wn.default;const vn=f(d(5628139313));l.NoOpTask=vn.default;const yn=f(d(3718889761));l.NoOpVideoElementFactory=yn.default;const Rn=f(d(3814682321));l.NoOpVideoFrameProcessor=Rn.default;const Fn=f(d(681222244));l.NoVideoDownlinkBandwidthPolicy=Fn.default;const yi=f(d(9871896518));l.NoVideoUplinkBandwidthPolicy=yi.default;const fi=f(d(1823340272));l.NotFoundError=fi.default;const Wi=f(d(566402552));l.NotReadableError=Wi.default;const Zr=f(d(7537135456));l.OnceTask=Zr.default;const gr=f(d(3292077469));l.OpenSignalingConnectionTask=gr.default;const Un=f(d(5336609685));l.OverconstrainedError=Un.default;const hr=f(d(7722414101));l.POSTLogger=hr.default;const ar=f(d(6085879951));l.ParallelGroupTask=ar.default;const pn=f(d(763542717));l.PermissionDeniedError=pn.default;const Sr=f(d(4741303625));l.PrefetchOn=Sr.default;const Pn=f(d(2097622617));l.PrefetchSortBy=Pn.default;const so=f(d(3054351868));l.PromiseQueue=so.default;const Wr=f(d(9588672479));l.PromoteToPrimaryMeetingTask=Wr.default;const $r=f(d(3171391796));l.RealtimeAttendeePositionInFrame=$r.default;const yo=f(d(7618200138));l.RealtimeState=yo.default;const ue=f(d(7832597620));l.RealtimeVolumeIndicator=ue.default;const ve=f(d(9531998674));l.ReceiveAudioInputTask=ve.default;const Le=f(d(587698570));l.ReceiveRemoteVideoPauseResumeTask=Le.default;const at=f(d(86955145));l.ReceiveVideoInputTask=at.default;const gt=f(d(8297256329));l.ReceiveVideoStreamIndexTask=gt.default;const Tt=f(d(5850044630));l.ReconnectionHealthPolicy=Tt.default;const rn=f(d(3937896393));l.RedundantAudioEncoder=rn.default;const bn=f(d(9337558969));l.RedundantAudioEncoderWorkerCode=bn.default;const Tn=f(d(3237015968));l.RedundantAudioRecoveryMetricReport=Tn.default;const ln=f(d(457099596));l.RunnableTask=ln.default;const Vn=f(d(182939685));l.SDP=Vn.default;const Ut=f(d(9489740826));l.SDPCandidateType=Ut.default;const hi=f(d(6818892922));l.SDPMediaSection=hi.default;const An=f(d(7680112541));l.SendAndReceiveDataMessagesTask=An.default;const Fi=f(d(4866586987));l.SendingAudioFailureConnectionHealthPolicy=Fi.default;const Qi=f(d(8872868578));l.SerialGroupTask=Qi.default;const Zi=f(d(5393388022));l.ServerSideNetworkAdaption=Zi.default;const Hn=f(d(3795683579));l.SessionStateControllerAction=Hn.default;const Jn=f(d(7012117651));l.SessionStateControllerDeferPriority=Jn.default;const ai=f(d(2092275410));l.SessionStateControllerState=ai.default;const Ri=f(d(583806999));l.SessionStateControllerTransitionResult=Ri.default;const Cr=f(d(5976676062));l.SetLocalDescriptionTask=Cr.default;const Ur=f(d(339097629));l.SetRemoteDescriptionTask=Ur.default;const li=f(d(8619504925));l.SignalingAndMetricsConnectionMonitor=li.default;const Kr=f(d(7263318766));l.SignalingClientConnectionRequest=Kr.default;const Ji=f(d(1578897375));l.SignalingClientEvent=Ji.default;const Or=f(d(7969706599));l.SignalingClientEventType=Or.default;const xo=f(d(3867485289));l.SignalingClientJoin=xo.default;const Go=f(d(3735795291));l.SignalingClientSubscribe=Go.default;const Po=f(d(4804743313));l.SignalingClientVideoSubscriptionConfiguration=Po.default;const ko=f(d(8213452704));l.SimulcastContentShareTransceiverController=ko.default;const Uo=f(d(9131051489));l.SimulcastLayers=Uo.default;const To=f(d(372560720));l.SimulcastTransceiverController=To.default;const Jr=f(d(8697249276));l.SimulcastVideoStreamIndex=Jr.default;const ao=f(d(2847388805));l.SingleNodeAudioTransformDevice=ao.default;const Io=f(d(6172292806));l.StreamMetricReport=Io.default;const Gr=f(d(3248483798));l.SubscribeAndReceiveSubscribeAckTask=Gr.default;const lo=f(d(2178339051));l.TargetDisplaySize=lo.default;const vr=f(d(6013191119));l.TaskStatus=vr.default;const co=f(d(5824864644));l.TimeoutScheduler=co.default;const ws=f(d(7638277718));l.TimeoutTask=ws.default;const Ds=f(d(4042214483));l.Transcript=Ds.default;const Yr=f(d(8928051514));l.TranscriptAlternative=Yr.default;const Co=f(d(3886666628));l.TranscriptEntity=Co.default;const pr=f(d(6128278192));l.TranscriptItem=pr.default;const Mr=f(d(2855080400));l.TranscriptItemType=Mr.default;const wr=f(d(2600940909));l.TranscriptLanguageWithScore=wr.default;const jr=f(d(3373821534));l.TranscriptResult=jr.default;const Vr=f(d(2832046333));l.TranscriptionStatus=Vr.default;const rs=f(d(8532168277));l.TranscriptionStatusType=rs.default;const q=f(d(9398215393));l.TypeError=q.default;const re=f(d(174963938));l.UnusableAudioWarningConnectionHealthPolicy=re.default;const he=f(d(6885109343));l.Versioning=he.default;const Te=f(d(3368465086));l.VideoAdaptiveProbePolicy=Te.default;const ke=f(d(8804723777));l.VideoCodecCapability=ke.default;const ot=f(d(3334420728));l.VideoEncodingConnectionHealthPolicyName=ot.default;const Ze=f(d(6661072615));l.VideoEncodingCpuConnectionHealthPolicy=Ze.default;const Mt=f(d(1502393534));l.VideoEncodingFramerateConnectionHealthPolicy=Mt.default;const Rt=f(d(1314104503));l.VideoFxProcessor=Rt.default;const xt=f(d(1404048602));l.VideoLogEvent=xt.default;const kt=f(d(161472916));l.VideoOnlyTransceiverController=kt.default;const Jt=f(d(3803169181));l.VideoPreference=Jt.default;const Yt=f(d(8071414974));l.VideoPreferences=Yt.default;const tn=f(d(8681774825));l.VideoPriorityBasedPolicy=tn.default;const mn=f(d(3348721919));l.VideoPriorityBasedPolicyConfig=mn.default;const hn=f(d(4829581265));l.VideoQualityAdaptationPreference=hn.default;const an=f(d(1197017824));l.VideoQualitySettings=an.default;const $t=f(d(8050111605));l.VideoSource=$t.default;const Bn=f(d(6105894327));l.VideoStreamDescription=Bn.default;const Ei=f(d(6345807038));l.VideoTileState=Ei.default;const Bi=f(d(1644756024));l.VoiceFocusDeviceTransformer=Bi.default;const qi=f(d(7141525823));l.VoiceFocusTransformDevice=qi.default;const Et=f(d(4098780146));l.WaitForAttendeePresenceTask=Et.default;const Vi=f(d(5638612424));l.WebSocketReadyState=Vi.default;const Hi=f(d(3475297719));l.ZLIBTextCompressor=Hi.default;const Ti=d(8071414974);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return Ti.MutableVideoPreferences}});const Rr=d(6527539809);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return Rr.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return Rr.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return Rr.Maybe}});const uo=d(9678458173);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return uo.isAudioTransformDevice}});const Ir=d(4236152345);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return Ir.isDestroyable}});const qr=d(7952414906);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return qr.isVideoTransformDevice}})},3714104304:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1370928943));let p=r(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,s){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${s}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,s=h.default.WARN){this.name=a,this.level=s}},"ConsoleLogger");l.default=p},4153358599:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a){this.sequenceNumber=h,this.message=p,this.timestampMs=m,this.logLevel=a}},"Log");l.default=d},1370928943:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var d;(function(f){f[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR",f[f.OFF=4]="OFF"})(d=l.LogLevel||(l.LogLevel={})),l.default=d},23593200:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1370928943));let p=r(class{info(a){for(const s of this._loggers)s.info(a)}warn(a){for(const s of this._loggers)s.warn(a)}error(a){for(const s of this._loggers)s.error(a)}debug(a){let s,n;typeof a=="string"?n=a:a?n=r(()=>(s||(s=a()),s),"memoized"):n=""+a;for(const e of this._loggers)e.debug(n)}setLogLevel(a){for(const s of this._loggers)s.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=p},5047661014:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1370928943)),p=f(d(1831006443));let m=r(class extends p.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=m},1831006443:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1370928943));let p=r(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=p},7722414101:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9877075638)),m=h(d(4153358599)),a=h(d(1370928943));let s=r(class kh{addEventListener(){!this.eventListener||!("window"in d.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in d.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new p.default(this.intervalMs),this.intervalScheduler.start(()=>f(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return f(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new m.default(this.sequenceNumber,t,i,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=kh.BATCH_SIZE,intervalMs:o=kh.INTERVAL_MS,logLevel:c=a.default.WARN,metadata:g,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=c,this.metadata=g,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=s,s.BATCH_SIZE=85,s.INTERVAL_MS=2e3},1716952340:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7632020355));let p=r(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=p},7632020355:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9649641385)),m=h(d(9877075638));let a=r(class sS{sortedDeviceList(){return f(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)p.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,g)=>{if(o==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new m.default(sS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,c,g])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,g)=>{if(o==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,c,g])}},this.pollDeviceLists=()=>f(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},9437918857:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(h){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(h){}removeMediaStreamBrokerObserver(h){}},"NoOpMediaStreamBroker");l.default=d},5131738647:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.AudioInputRequestFailed=1]="AudioInputRequestFailed",f[f.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",f[f.ConnectionFailed=3]="ConnectionFailed",f[f.AudioNotReceived=4]="AudioNotReceived"})(d=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=d},5912013634:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.PermissionDenied=2]="PermissionDenied"})(d=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=d},5266008321:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed"})(d=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=d},492984661:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.ResolutionNotSupported=2]="ResolutionNotSupported",f[f.PermissionDenied=3]="PermissionDenied"})(d=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=d},1012711751:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.PermissionDenied=2]="PermissionDenied",f[f.TimedOut=3]="TimedOut",f[f.ConnectionFailed=4]="ConnectionFailed"})(d=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=d},1711209018:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",f[f.ConnectionFailed=2]="ConnectionFailed",f[f.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=d},1519813406:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",f[f.ConnectionFailed=2]="ConnectionFailed",f[f.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=d},5425713910:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.VideoInputRequestFailed=1]="VideoInputRequestFailed",f[f.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",f[f.ConnectionFailed=3]="ConnectionFailed",f[f.VideoNotSent=4]="VideoNotSent"})(d=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=d},2656423953:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.PermissionDenied=2]="PermissionDenied"})(d=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=d},5346911216:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(C,I,A,w){function O(R){return R instanceof A?R:new A(function(F){F(R)})}return r(O,"adopt"),new(A||(A=Promise))(function(R,F){function V(Y){try{X(w.next(Y))}catch(ne){F(ne)}}r(V,"fulfilled");function $(Y){try{X(w.throw(Y))}catch(ne){F(ne)}}r($,"rejected");function X(Y){Y.done?R(Y.value):O(Y.value).then(V,$)}r(X,"step"),X((w=w.apply(C,I||[])).next())})},h=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9598694912)),m=h(d(5546774952)),a=h(d(8503424008)),s=h(d(763542717)),n=h(d(5009059128)),e=h(d(7638277718)),t=h(d(5131738647)),i=h(d(5912013634)),o=h(d(5266008321)),c=h(d(492984661)),g=h(d(1012711751)),S=h(d(1711209018)),u=h(d(1519813406)),v=h(d(5425713910)),E=h(d(2656423953)),b=h(d(898490693));let _=r(class aS{static delay(I){return f(this,void 0,void 0,function*(){return new Promise(A=>setTimeout(A,I))})}checkAudioInput(I){return f(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(I),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(A){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${A}`),A instanceof s.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(I,A){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return f(this,void 0,void 0,function*(){try{const O=I?a.default.getIntrinsicDeviceId(I):"";return yield this.playTone(O,this.configuration.audioOutputFrequency,w),(yield A())?o.default.Succeeded:o.default.Failed}catch(O){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${O}`),o.default.Failed}finally{this.stopTone()}})}playTone(I,A,w){return f(this,void 0,void 0,function*(){const R=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=A,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const V=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,V),this.gainNode.gain.linearRampToValueAtTime(R,V+.1),this.oscillatorNode.start();const $=new p.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield $.bindAudioDevice({deviceId:I}))}catch(X){this.logger.error(`Failed to bind audio device: ${X}`)}try{yield $.bindAudioElement(w||new Audio)}catch(X){this.logger.error(`Failed to bind audio element: ${X}`)}yield $.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const I=1,A=.1,w=this.configuration.audioOutputGain,O=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(w,O+A+I),this.gainNode.gain.linearRampToValueAtTime(0,O+A*2+I),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(I){return f(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(I),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(A){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${A}`),A instanceof s.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(I,A,w){return f(this,void 0,void 0,function*(){let O;try{const R=a.default.getIntrinsicDeviceId(I),F={video:this.calculateVideoConstraint(R,A,w)};O=yield navigator.mediaDevices.getUserMedia(F)}catch(R){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${A} height ${w} failed with error ${R}`),R&&R.name==="OverconstrainedError"?c.default.ResolutionNotSupported:R&&R.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{O&&O.getTracks().forEach(function(R){R.stop()})}return c.default.Succeeded})}calculateVideoConstraint(I,A,w){const O=this.browserBehavior.requiresResolutionAlignment(A,w),R={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(R.deviceId=I,R.width=A,R.height=w):(R.deviceId={exact:I},R.width={exact:O[0]},R.height={exact:O[1]}),R}checkContentShareConnectivity(I){return f(this,void 0,void 0,function*(){let A=!1,w=!1;const O={contentShareDidStart:()=>{A=!0}},R={audioVideoDidStart:()=>{w=!0}};try{return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(O),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(I),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return w&&A})),w?(yield this.stopMeeting(),A?g.default.Succeeded:g.default.TimedOut):g.default.ConnectionFailed}catch(F){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${F}`),F.name==="NotAllowedError"?g.default.PermissionDenied:g.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(R),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(O)}})}checkAudioConnectivity(I){return f(this,void 0,void 0,function*(){let A=!1;const w={packetsReceived:0},O=this.meetingSession.audioVideo,R={metricsDidReceive(V){V.getRTCStatsReport().forEach($=>{$.type==="inbound-rtp"&&($.mediaType==="audio"||$.kind==="audio")&&(w.packetsReceived=$.packetsReceived)})}},F=r((V,$,X,Y)=>{V===this.meetingSession.configuration.credentials.attendeeId&&$&&(A=!0)},"attendeePresenceHandler");try{yield O.startAudioInput(I)}catch(V){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${V}`),V instanceof s.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return O.realtimeSubscribeToAttendeeIdPresence(F),O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(A,w)})),O.removeObserver(R),O.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(A,w)?t.default.Succeeded:t.default.AudioNotReceived):(O.removeObserver(R),O.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(I){return f(this,void 0,void 0,function*(){const A=this.meetingSession.audioVideo;let w=0;const O={metricsDidReceive(R){R.getRTCStatsReport().forEach(V=>{V.type==="outbound-rtp"&&(V.mediaType==="video"||V.kind==="video")&&(w=V.packetsSent)})}};try{yield A.startVideoInput(I)}catch(R){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${R}`),R instanceof s.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return A.addObserver(O),(yield this.startMeeting())?(A.startLocalVideoTile(),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return w>0})),yield A.stopVideoInput(),yield this.stopMeeting(),A.removeObserver(O),w<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return f(this,void 0,void 0,function*(){let I=!1;const A={metricsDidReceive(O){O.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(O){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${O}`),u.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=O=>{const R=this.originalURLRewriter(O);return R.includes("transport=tcp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(A),I?u.default.Succeeded:u.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,u.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return f(this,void 0,void 0,function*(){let I=!1;const A={metricsDidReceive(O){O.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(O){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${O}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=O=>{const R=this.originalURLRewriter(O);return R.includes("transport=udp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(A),I?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return f(this,void 0,void 0,function*(){let I=!1;const A={audioVideoDidStart:()=>{I=!0}};return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(A),I})}stopMeeting(){return f(this,void 0,void 0,function*(){let I=!1;const A={audioVideoDidStop:w=>{I=!0}};return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(A),I})}executeTimeoutTask(I){return f(this,void 0,void 0,function*(){let A=!1,w=r(class extends n.default{cancel(){this.isCancelled=!0}run(){return f(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield I()){A=!0;break}yield aS.delay(this.waitDurationMs)}})}constructor(F,V){super(F),this.waitDurationMs=V,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new w(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),A})}isAudioConnectionSuccessful(I,A){return I&&A.packetsReceived>0}constructor(I,A,w=new b.default){this.logger=I,this.meetingSession=A,this.configuration=w,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");l.default=_},898490693:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=d},6643608480:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(u,v,E,b){function _(C){return C instanceof E?C:new E(function(I){I(C)})}return r(_,"adopt"),new(E||(E=Promise))(function(C,I){function A(R){try{O(b.next(R))}catch(F){I(F)}}r(A,"fulfilled");function w(R){try{O(b.throw(R))}catch(F){I(F)}}r(w,"rejected");function O(R){R.done?C(R.value):_(R.value).then(A,w)}r(O,"step"),O((b=b.apply(u,v||[])).next())})},h=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1833994912)),m=h(d(9305916160)),a=h(d(4571447548)),s=h(d(5546774952)),n=h(d(220809536)),e=h(d(7050079116)),t=h(d(8207737579)),i=d(4236152345),o=h(d(913629600)),c=h(d(2114525466)),g=h(d(7880459944));let S=r(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return f(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new s.default,E=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${E}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,E,b,_){this._eventController=_,this._configuration=v,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,E)),b.eventController||(b.eventController=this.eventController),this.audioVideoController=new p.default(this._configuration,this._logger,new g.default(this._logger),b,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=b,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const C=new n.default(this._logger);this.contentShareController=new e.default(C,new p.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new g.default(this._logger),C,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},2612255336:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1197017824));let p=r(class lS{clone(){return new lS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,s=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=s}},"MeetingFeatures");l.default=p},6226061697:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8692068971)),p=f(d(1197017824)),m=d(5685319565),a=f(d(2612255336)),s=f(d(8023404193)),n=f(d(803810435));let e=r(class{constructor(i,o){var c,g;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,i){i=m.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=r((u,v)=>{switch(u){case"None":return p.default.VideoDisabled;case"HD":return p.default.VideoResolutionHD;case"FHD":return p.default.VideoResolutionFHD;case"UHD":return p.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((c=i.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((g=i.meetingfeatures)===null||g===void 0?void 0:g.content)!==void 0){const u=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,v=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(u,p.default.VideoResolutionHD),S(v,p.default.VideoResolutionFHD))}}o&&(o=m.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new s.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},8023404193:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=d},2234819701:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var d;(function(f){f[f.Connecting=0]="Connecting",f[f.Started=1]="Started",f[f.Stopped=2]="Stopped"})(d=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=d},546597810:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var d;(function(f){f[f.ConnectingNew=0]="ConnectingNew",f[f.ReconnectingExisting=1]="ReconnectingExisting",f[f.StartedNew=2]="StartedNew",f[f.StartedExisting=3]="StartedExisting",f[f.StartedAfterReconnect=4]="StartedAfterReconnect",f[f.StoppedCleanly=5]="StoppedCleanly",f[f.StoppedWithFailure=6]="StoppedWithFailure"})(d=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=d},7551081659:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),p=f(d(9447989038));let m=r(class ro{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:case p.default.VideoCallAtSourceCapacity:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.ICEGatheringTimeoutWorkaround:case p.default.ConnectionHealthReconnect:case p.default.RealtimeApiFailed:case p.default.TaskFailed:case p.default.NoAttendeePresent:case p.default.SignalingChannelClosedUnexpectedly:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case p.default.Left:case p.default.AudioJoinedFromAnotherDevice:case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.MeetingEnded:case p.default.AudioDisconnected:case p.default.TURNCredentialsForbidden:case p.default.SignalingBadRequest:case p.default.SignalingRequestFailed:case p.default.VideoCallAtSourceCapacity:case p.default.RealtimeApiFailed:case p.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.ICEGatheringTimeoutWorkaround:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.RealtimeApiFailed:case p.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case p.default.OK:return"Everything is OK so far.";case p.default.Left:return"The attendee left the meeting.";case p.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case p.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case p.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case p.default.MeetingEnded:return"The meeting ended.";case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:return"The audio connection failed.";case p.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case p.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:return"The signaling connection failed.";case p.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case p.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case p.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case p.default.TaskFailed:return"The connection failed. See the error message for more details.";case p.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case p.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case p.default.NoAttendeePresent:return"The attendee was not present.";case p.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case p.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case p.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case p.default.AudioDisconnectAudio:return"The audio connection failed.";case p.default.SignalingChannelClosedUnexpectedly:return"The signaling channel was closed unexpectedly. This may be due to a network change or backend detected failure.";default:{const s=this._statusCode;throw new Error(`Unhandled case: ${s}`)}}}static fromSignalFrame(s){return s.error&&s.error.status?this.fromSignalingStatus(s.error.status):s.type===h.SdkSignalFrame.Type.AUDIO_STATUS?s.audioStatus?this.fromAudioStatus(s.audioStatus.audioStatus):new ro(p.default.SignalingRequestFailed):s.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new ro(p.default.AudioVideoWasRemovedFromPrimaryMeeting):new ro(p.default.OK)}static fromAudioStatus(s){switch(s){case 200:return new ro(p.default.OK);case 301:return new ro(p.default.AudioJoinedFromAnotherDevice);case 302:return new ro(p.default.AudioDisconnectAudio);case 403:return new ro(p.default.AudioAuthenticationRejected);case 409:return new ro(p.default.AudioCallAtCapacity);case 410:return new ro(p.default.MeetingEnded);case 411:return new ro(p.default.AudioAttendeeRemoved);case 500:return new ro(p.default.AudioInternalServerError);case 503:return new ro(p.default.AudioServiceUnavailable);default:switch(Math.floor(s/100)){case 2:return new ro(p.default.OK);default:return new ro(p.default.AudioDisconnected)}}}static fromSignalingStatus(s){switch(s){case 206:return new ro(p.default.VideoCallSwitchToViewOnly);case 509:return new ro(p.default.VideoCallAtSourceCapacity);case 403:return new ro(p.default.AudioAuthenticationRejected);case 409:return new ro(p.default.AudioCallAtCapacity);default:switch(Math.floor(s/100)){case 2:return new ro(p.default.OK);case 4:return new ro(p.default.SignalingBadRequest);case 5:return new ro(p.default.SignalingInternalServerError);default:return new ro(p.default.SignalingRequestFailed)}}}constructor(s){this._statusCode=s}},"MeetingSessionStatus");l.default=m},9447989038:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var d;(function(f){f[f.OK=0]="OK",f[f.Left=1]="Left",f[f.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",f[f.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",f[f.AudioCallAtCapacity=4]="AudioCallAtCapacity",f[f.MeetingEnded=5]="MeetingEnded",f[f.AudioInternalServerError=6]="AudioInternalServerError",f[f.AudioServiceUnavailable=7]="AudioServiceUnavailable",f[f.AudioDisconnected=8]="AudioDisconnected",f[f.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",f[f.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",f[f.SignalingBadRequest=11]="SignalingBadRequest",f[f.SignalingInternalServerError=12]="SignalingInternalServerError",f[f.SignalingRequestFailed=13]="SignalingRequestFailed",f[f.SignalingChannelClosedUnexpectedly=14]="SignalingChannelClosedUnexpectedly",f[f.ICEGatheringTimeoutWorkaround=15]="ICEGatheringTimeoutWorkaround",f[f.ConnectionHealthReconnect=16]="ConnectionHealthReconnect",f[f.RealtimeApiFailed=17]="RealtimeApiFailed",f[f.TaskFailed=18]="TaskFailed",f[f.IncompatibleSDP=19]="IncompatibleSDP",f[f.TURNCredentialsForbidden=20]="TURNCredentialsForbidden",f[f.NoAttendeePresent=21]="NoAttendeePresent",f[f.AudioAttendeeRemoved=22]="AudioAttendeeRemoved",f[f.AudioVideoWasRemovedFromPrimaryMeeting=23]="AudioVideoWasRemovedFromPrimaryMeeting",f[f.AudioVideoDisconnectedWhilePromoted=24]="AudioVideoDisconnectedWhilePromoted",f[f.AudioDisconnectAudio=25]="AudioDisconnectAudio"})(d=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=d},4943767904:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=d},803810435:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(h){this._audioHostURL=h}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(h){this._signalingURL=h}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(h){this._turnControlURL=h}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(h){this._eventIngestionURL=h}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=h=>h}},"MeetingSessionURLs");l.default=d},488357679:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class dS{equal(h){return this.remoteVideoAvailable===h.remoteVideoAvailable&&this.canStartLocalVideo===h.canStartLocalVideo}clone(){const h=new dS;return h.remoteVideoAvailable=this.remoteVideoAvailable,h.canStartLocalVideo=this.canStartLocalVideo,h}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=d},1261307249:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m){this.type=h,this.headers=p,this.payload=m}},"Message");l.default=d},9331325908:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(S,u,v,E){function b(_){return _ instanceof v?_:new v(function(C){C(_)})}return r(b,"adopt"),new(v||(v=Promise))(function(_,C){function I(O){try{w(E.next(O))}catch(R){C(R)}}r(I,"fulfilled");function A(O){try{w(E.throw(O))}catch(R){C(R)}}r(A,"rejected");function w(O){O.done?_(O.value):b(O.value).then(I,A)}r(w,"step"),w((E=E.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(8804412379),m=h(d(4571447548)),a=h(d(8207737579)),s=h(d(1261307249)),n=h(d(2114525466)),e=h(d(9649641385)),t=h(d(7924674822)),i=h(d(7880459944)),o=h(d(5638612424)),c=h(d(4741303625));let g=r(class{addObserver(u){this.logger.info("adding messaging observer"),this.observerQueue.add(u)}removeObserver(u){this.logger.info("removing messaging observer"),this.observerQueue.delete(u)}start(){return f(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(u){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&u(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",u=>{this.receiveMessageHandler(u.data)}),this.webSocket.addEventListener("close",u=>{this.closeEventHandler(u)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(u){return f(this,void 0,void 0,function*(){return yield this.startConnectingInternal(u),yield new Promise((v,E)=>{this.bootstrapResolved=v,this.bootstrapRejected=E})})}startConnectingInternal(u){var v;return f(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),u||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const _=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=_.Endpoint)===null||v===void 0)&&v.Url?E=_.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new p.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(_){this.logger.error(`Messaging Session failed to resolve endpoint: ${_}`);const C=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(C);return}const b=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${b}`),u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(b,[],!0),this.forEachObserver(_=>{_.messagingSessionDidStartConnecting&&_.messagingSessionDidStartConnecting(u)}),this.setUpEventListeners()})}prepareWebSocketUrl(u){return f(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&v.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",u,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(u){try{const v=JSON.parse(u),E=v.Headers["x-amz-chime-event-type"],b=new s.default(E,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(C=>{C.messagingSessionDidStart&&C.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const _=this.preBootstrapMessages.length;for(let C=0;C<_;C++){const I=this.preBootstrapMessages.shift();this.forEachObserver(A=>{this.sendMessageToObserver(A,I)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(b);return}this.forEachObserver(_=>{this.sendMessageToObserver(_,b)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(u,v){u.messagingSessionDidReceiveMessage&&u.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>f(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(u){this.logger.info(`WebSocket close: ${u.code} ${u.reason}`),u.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(u.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(u)}):this.bootstrapRejected(u))}canReconnect(u){return u===1001||u===1006||u>=1011&&u<=1014||u>4e3&&u!==4002&&u!==4003&&u!==4401}constructor(u,v,E,b,_){this.configuration=u,this.logger=v,this.webSocket=E,this.reconnectController=b,this.sigV4=_,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(u.reconnectTimeoutMs,new m.default(u.reconnectFixedWaitMs,u.reconnectShortBackoffMs,u.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=g},6589808043:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(5685319565);let h=r(class{generateSessionId(){const m=new Uint32Array(1);return f.getRandomValues(m),m[0].toString()}constructor(m,a,s,n){this.userArn=m,this.messagingSessionId=a,this.endpointUrl=s,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=h},4741303625:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.Connect="connect"})(d||(d={})),l.default=d},2097622617:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.Unread="unread",f.LastMessageTimestamp="last-message-timestamp"})(d||(d={})),l.default=d},8006173476:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(805846668));let p=r(class Sl{id(){return this._id}base(){return this._id?this._id.split(Sl.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Sl.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const s=new Sl(this.base()+Sl.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Sl(s._id).modality()!==a?new Sl(this.base()):s}constructor(a){this._id=a}},"DefaultModality");l.default=p,p.MODALITY_SEPARATOR=h.default.Modality[0],p.MODALITY_CONTENT=h.default.Modality.substring(1)},6348496904:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(9649641385)),p=f(d(9877075638)),m=f(d(7969706599)),a=d(4136617125),s=d(6527539809);let n=r(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{s.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=a.SdkPingPongFrame.create();i.pingId=t,i.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const g=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-g/2),u=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${u}ms from ping-pong time=${g}ms`),this.forEachObserver(v=>{s.Maybe.of(v.didReceivePong).map(E=>E.bind(v)(i,u,g))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new p.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=n},7692233712:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6391477986)),p=d(5685319565),m=f(d(7618200138)),a=f(d(7832597620));let s=r(class{realtimeSetLocalAttendeeId(e,t){this.state.localAttendeeId=e,this.state.localExternalUserId=t}realtimeSetAttendeeIdPresence(e,t,i,o,c){try{t&&(this.state.attendeeIdToExternalUserId[e]=i);for(const g of this.state.attendeeIdChangesCallbacks)g(e,t,i,o,c)}catch(g){this.onError(g)}}realtimeSubscribeToAttendeeIdPresence(e){try{this.state.attendeeIdChangesCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToAttendeeIdPresence(e){try{const t=this.state.attendeeIdChangesCallbacks.indexOf(e);t!==-1&&this.state.attendeeIdChangesCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSetCanUnmuteLocalAudio(e){try{if(this.state.canUnmute===e)return;this.state.canUnmute=e;for(const t of this.state.setCanUnmuteLocalAudioCallbacks)t(e)}catch(t){this.onError(t)}}realtimeSubscribeToSetCanUnmuteLocalAudio(e){try{this.state.setCanUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){try{const t=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!0)}catch(e){this.onError(e)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!1);return!0}catch(e){return this.onError(e),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){try{const t=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(e,t){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(e)||(this.state.volumeIndicatorCallbacks[e]=[]),this.state.volumeIndicatorCallbacks[e].push(t),this.sendVolumeIndicatorChange(e,!0,!0,!0,this.state.attendeeIdToExternalUserId[e])}catch(i){this.onError(i)}}realtimeUnsubscribeFromVolumeIndicator(e,t){if(this.state.volumeIndicatorCallbacks[e])if(t){const o=this.state.volumeIndicatorCallbacks[e].indexOf(t);o>=0&&this.state.volumeIndicatorCallbacks[e].splice(o,1)}else delete this.state.volumeIndicatorCallbacks[e]}realtimeUpdateVolumeIndicator(e,t,i,o,c){try{i=this.applyLocalMuteOverride(e,i);const g=this.getVolumeIndicatorState(e);let S=!1,u=!1,v=!1;i!==null&&g.muted!==i&&(g.muted=i,u=!0,g.muted&&g.volume!==0&&(g.volume=0,S=!0)),!g.muted&&t!==null&&(g.volume!==t&&(g.volume=t,S=!0),g.muted===null&&(g.muted=!1,u=!0)),o!==null&&g.signalStrength!==o&&(g.signalStrength=o,v=!0),this.sendVolumeIndicatorChange(e,S,u,v,c)}catch(g){this.onError(g)}}realtimeSubscribeToLocalSignalStrengthChange(e){try{if(this.state.localSignalStrengthChangeCallbacks.push(e),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(t){this.onError(t)}}realtimeUnsubscribeToLocalSignalStrengthChange(e){try{const t=this.state.localSignalStrengthChangeCallbacks.indexOf(e);t!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSubscribeToSendDataMessage(e){try{this.state.sendDataMessageCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeFromSendDataMessage(e){try{const t=this.state.sendDataMessageCallbacks.indexOf(e);t!==-1&&this.state.sendDataMessageCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSendDataMessage(e,t,i){try{for(const o of this.state.sendDataMessageCallbacks)o(e,t,i)}catch(o){this.onError(o)}}realtimeSubscribeToReceiveDataMessage(e,t){try{this.state.receiveDataMessageCallbacks.has(e)?this.state.receiveDataMessageCallbacks.get(e).push(t):this.state.receiveDataMessageCallbacks.set(e,[t])}catch(i){this.onError(i)}}realtimeUnsubscribeFromReceiveDataMessage(e){try{this.state.receiveDataMessageCallbacks.delete(e)}catch(t){this.onError(t)}}realtimeReceiveDataMessage(e){try{p.iterateEvery(this.state.receiveDataMessageCallbacks.get(e.topic),t=>{t(e)})}catch(t){Promise.reject(t)}}realtimeSubscribeToFatalError(e){try{this.state.fatalErrorCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToFatalError(e){try{const t=this.state.fatalErrorCallbacks.indexOf(e);t!==-1&&this.state.fatalErrorCallbacks.splice(t,1)}catch(t){this.onError(t)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(e){e?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(e,t){const i=this.state.localAttendeeId,o=this.state.muted;return e!==i||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?t:o}sendVolumeIndicatorChange(e,t,i,o,c){if(this.sendLocalSignalStrengthChange(e,o),!this.state.volumeIndicatorCallbacks.hasOwnProperty(e))return;const g=this.getVolumeIndicatorState(e),S=new a.default;if(t&&(S.volume=g.volume),i&&(S.muted=g.muted),o&&(S.signalStrength=g.signalStrength),!this.stateIsEmpty(S))for(const u of this.state.volumeIndicatorCallbacks[e])u(e,S.volume,S.muted,S.signalStrength,c)}sendLocalSignalStrengthChange(e,t){if(!t||e!==this.state.localAttendeeId)return;const o=this.getVolumeIndicatorState(e).signalStrength;if(o!==null)for(const c of this.state.localSignalStrengthChangeCallbacks)c(o)}getVolumeIndicatorState(e){return this.state.volumeIndicatorState.hasOwnProperty(e)||(this.state.volumeIndicatorState[e]=new a.default),this.state.volumeIndicatorState[e]}stateIsEmpty(e){return e.volume===null&&e.muted===null&&e.signalStrength===null}onError(e){try{for(const t of this.state.fatalErrorCallbacks)t(e)}catch(t){try{console.error(e),console.error(t)}catch{}}}constructor(e,t){this.mediaStreamBroker=e,this.state=new m.default,this._transcriptionController=t||new h.default(this)}},"DefaultRealtimeController");l.default=s},3171391796:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=d},7618200138:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=d},7832597620:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=d},2114525466:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5824864644));let p=r(class cS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,s){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=s,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new cS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,s){this.reconnectTimeoutMs=a,this.backoffPolicy=s,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=p},3937896393:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class Ts{static initializeWorker(){Ts.log("Initializing RedundantAudioEncoder");const h=new Ts;self.RTCRtpScriptTransformer&&(self.onrtctransform=p=>{p.transformer.options.type==="SenderTransform"?h.setupSenderTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="ReceiverTransform"?h.setupReceiverTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="PassthroughTransform"&&h.setupPassthroughTransform(p.transformer.readable,p.transformer.writable)}),self.onmessage=p=>{p.data.msgType==="StartRedWorker"?(h.setupSenderTransform(p.data.send.readable,p.data.send.writable),h.setupReceiverTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="PassthroughTransform"?(h.setupPassthroughTransform(p.data.send.readable,p.data.send.writable),h.setupPassthroughTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="RedPayloadType"?h.setRedPayloadType(p.data.payloadType):p.data.msgType==="OpusPayloadType"?h.setOpusPayloadType(p.data.payloadType):p.data.msgType==="UpdateNumRedundantEncodings"?h.setNumRedundantEncodings(p.data.numRedundantEncodings):p.data.msgType==="Enable"?h.setRedundancyEnabled(!0):p.data.msgType==="Disable"&&h.setRedundancyEnabled(!1)}}static log(h){Ts.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${h}`})}static getNumRedundantEncodingsForPacketLoss(h){let p=0,m=!1;return h<=8?p=0:h<=18?p=1:h<=75?p=2:(p=0,m=!0),[p,m]}setupPassthroughTransform(h,p){Ts.log("Setting up passthrough transform"),h.pipeTo(p)}setupSenderTransform(h,p){Ts.log("Setting up sender RED transform");const m=new TransformStream({transform:this.senderTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setupReceiverTransform(h,p){Ts.log("Setting up receiver RED transform");const m=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setRedPayloadType(h){this.redPayloadType=h,Ts.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(h){this.opusPayloadType=h,Ts.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(h){this.numRedundantEncodings=h,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),Ts.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(h){this.redundancyEnabled=h,Ts.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(h,p){h.data.byteLength>this.maxAudioPayloadSizeBytes||p.enqueue(h)}senderTransform(h,p){if(h.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.getPrimaryPayload(h.timestamp,h.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const s=this.encode(h.timestamp,a);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}h.data=s,this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}getPrimaryPayload(h,p){const m=this.splitEncodings(h,p);return!m||m.length<1?null:m[m.length-1].payload}splitEncodings(h,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const s=new DataView(p);let n=s.byteLength,e=0,t=0,i=0,o=0,c=!1;const g=new Array,S=new Array,u=new Array;for(;n>0;)if(c=(s.getUint8(o)&128)===0,c){if((s.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=s.byteLength))return null;i=s.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const I=((s.getUint8(o+2)&3)<<8)+s.getUint8(o+3);S.push(I);const A=s.getUint16(o+1)>>2,w=h-A;u.push(w),e+=I+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!c)return a!==void 0?(g.push({payload:p,isRedundant:!1,seq:a}),g):null;let v=t;for(let I=0;I<u.length;I++){const A=new ArrayBuffer(S[I]);new Uint8Array(A).set(new Uint8Array(s.buffer,v,S[I]),0);const O={timestamp:u[I],payload:A,isRedundant:!0};m&&(O.hasFec=this.opusPacketHasFec(new DataView(A),A.byteLength)),g.push(O),v+=S[I]}const E=s.byteLength-i,b=new ArrayBuffer(i);new Uint8Array(b).set(new Uint8Array(s.buffer,E,i),0);const C={timestamp:h,payload:b,isRedundant:!1,seq:a};return m&&(C.hasFec=this.opusPacketHasFec(new DataView(b),b.byteLength)),g.push(C),g}encode(h,p){const m=p.byteLength;if(m===0||m>=this.maxRedPacketSizeBytes||m>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let s=this.redLastHeaderSizeBytes,n=m,e=this.maxAudioPayloadSizeBytes-m-s;const t=new Array,i=new Array;if(this.redundancyEnabled){let u=this.uint32WrapAround(h-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<a&&!(this.uint32WrapAround(h-u)>=this.maxRedTimestampOffset);v++){let E=u,b=this.encodingHistory.find(_=>_.timestamp===E);if(b||(E=this.uint32WrapAround(u-this.redPacketizationTime),b=this.encodingHistory.find(_=>_.timestamp===E)),b){const _=b.payload.byteLength;if(e<this.redHeaderSizeBytes+_)break;e-=this.redHeaderSizeBytes+_,s+=this.redHeaderSizeBytes,n+=_,t.unshift(b.timestamp),i.unshift(b.payload)}u-=this.redPacketizationTime*this.redPacketDistance,u=this.uint32WrapAround(u)}}const o=new ArrayBuffer(s+n),c=new DataView(o);let g=0;for(let u=0;u<t.length;u++){const v=h-t[u];c.setUint8(g,this.opusPayloadType|128),c.setUint16(g+1,v<<2|i[u].byteLength>>8),c.setUint8(g+3,i[u].byteLength&255),g+=this.redHeaderSizeBytes}c.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let u=0;u<i.length;u++)S.set(new Uint8Array(i[u]),g),g+=i[u].byteLength;return S.set(new Uint8Array(p),g),g+=p.byteLength,g!==s+n?null:(this.updateEncodingHistory(h,p),o)}updateEncodingHistory(h,p){for(const a of this.encodingHistory){const s=this.redPacketizationTime*this.redMaxRecoveryDistance;if(h-a.timestamp>=s)this.encodingHistory.shift();else break}const m=new DataView(p);(this.opusPacketIsCeltOnly(m)||this.opusPacketHasVoiceActivity(m,m.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:h,payload:p}))}initializePacketLogs(){const h=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(h),index:0,windowSize:h},this.redRecoveryLog={window:new Array(h),index:0,windowSize:h},this.fecRecoveryLog={window:new Array(h),index:0,windowSize:h},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(h,p){const m=h.getMetadata();if(m.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.splitEncodings(h.timestamp,h.data,!0,m.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}for(let s=a.length-1;s>=0;s--)this.updateLossStats(a[s])&&(this.updateRedStats(a[s]),this.updateFecStats(a[s]));this.maybeReportLossStats(m.synchronizationSource,a[a.length-1].timestamp),this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}updateLossStats(h){if(h.isRedundant)return!0;const p=h.timestamp,m=h.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=m,this.addTimestamp(this.primaryPacketLog,p),!0;const a=this.int16(m-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,p)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,p),this.removeFromRecoveryWindows(p)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=h.seq,this.addTimestamp(this.primaryPacketLog,p)),!0)}updateRedStats(h){if(!h.isRedundant||this.totalAudioPacketsLost===0)return;const p=h.timestamp;this.hasTimestamp(this.primaryPacketLog,p)||(this.hasTimestamp(this.redRecoveryLog,p)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,p)),this.removeTimestamp(this.fecRecoveryLog,p)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(h){if(!h.hasFec||this.totalAudioPacketsLost===0)return;const p=h.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,p)||this.hasTimestamp(this.redRecoveryLog,p)||this.hasTimestamp(this.fecRecoveryLog,p)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,p))}maybeReportLossStats(h,p){p===void 0||p-this.lastLossReportTimestamp<this.lossReportInterval||(Ts.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:h,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=p)}addTimestamp(h,p){p!==void 0&&(h.window[h.index]=p,h.index=(h.index+1)%h.windowSize)}hasTimestamp(h,p){return!!h.window.find(a=>a===p)}removeTimestamp(h,p){const m=h.window.indexOf(p);return m>=0?(h.window[m]=void 0,!0):!1}removeFromRecoveryWindows(h){let p=this.removeTimestamp(this.redRecoveryLog,h);p&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,p=this.removeTimestamp(this.fecRecoveryLog,h),p&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(h){let m=h;return h>=4294967296?m=h-4294967296:h<0&&(m=4294967296+h),m}int16(h){return h<<16>>16}opusPacketIsCeltOnly(h){return!!(h.getUint8(0)&128)}opusPacketGetSamplesPerFrame(h,p){p=Math.round(p),p=Math.min(Math.max(p,-Math.pow(2,32)),Math.pow(2,32)-1);let m,a;return this.opusPacketIsCeltOnly(h)?(a=h.getUint8(0)>>3&3,m=(p<<a)/400):(h.getUint8(0)&96)===96?m=h.getUint8(0)&8?p/50:p/100:(a=h.getUint8(0)>>3&3,a===3?m=p*60/1e3:m=(p<<a)/100),m}opusNumSilkFrames(h){let p=this.opusPacketGetSamplesPerFrame(h,48e3)/48;switch(p<10&&(p=10),p){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(h){return h.getUint8(0)&4?2:1}opusParseSize(h,p,m,a){return m<1?(a[0]=-1,-1):h.getUint8(p)<252?(a[0]=h.getUint8(p),1):m<2?(a[0]=-1,-1):(a[0]=4*h.getUint8(p+1)+h.getUint8(p),2)}opusPacketParseImpl(h,p,m,a,s,n,e,t){if(!n||p<0)return this.OPUS_BAD_ARG;if(p===0)return this.OPUS_INVALID_PACKET;let i,o,c=0,g=!1;const S=h.getUint8(0);a&&(a[0]=S);let u=p-1,v=1,E=u;switch(S&3){case 0:i=1;break;case 1:if(i=2,g=!0,!m){if(u&1)return this.OPUS_INVALID_PACKET;E=u/2,n[0][0]=E}break;case 2:if(i=2,o=this.opusParseSize(h,v,u,n[0]),u-=o,n[0][0]<0||n[0][0]>u)return this.OPUS_INVALID_PACKET;v+=o,E=u-n[0][0];break;default:if(u<1)return this.OPUS_INVALID_PACKET;const b=h.getUint8(v++);if(--u,i=b&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(h,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(b&64){let C,I;do{if(u<=0)return this.OPUS_INVALID_PACKET;C=h.getUint8(v++),--u,I=C===255?254:C,u-=I,c+=I}while(C===255)}if(u<0)return this.OPUS_INVALID_PACKET;if(g=!(b&128),g){if(!m){if(E=Math.trunc(u/i),E*i!==u)return this.OPUS_INVALID_PACKET;for(let C=0;C<i-1;++C)n[C][0]=E}}else{E=u;for(let C=0;C<i-1;++C){if(o=this.opusParseSize(h,v,u,n[C]),u-=o,n[C][0]<0||n[C][0]>u)return this.OPUS_INVALID_PACKET;v+=o,E-=o+n[C][0]}if(E<0)return this.OPUS_INVALID_PACKET}}if(m){if(o=this.opusParseSize(h,v,u,n[i-1]),u-=o,n[i-1][0]<0||n[i-1][0]>u)return this.OPUS_INVALID_PACKET;if(v+=o,g){if(n[i-1][0]*i>u)return this.OPUS_INVALID_PACKET;for(let b=0;b<i-1;++b)n[b][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=E))return this.OPUS_INVALID_PACKET}else{if(E>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=E}e&&(e[0]=v);for(let b=0;b<i;++b)s&&(s[b][0]=v),v+=n[b][0];return t&&(t[0]=v+c),i}opusPacketParse(h,p,m,a,s,n){return this.opusPacketParseImpl(h,p,!1,m,a,s,n,null)}opusPacketHasVoiceActivity(h,p){if(!h||p<=0)return 0;if(this.opusPacketIsCeltOnly(h))return-1;const m=this.opusNumSilkFrames(h);if(m===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],s[e]=[void 0];const n=this.opusPacketParse(h,p,null,a,s,null);if(n<0)return-1;for(let e=0;e<n;++e){if(s[e][0]<1)continue;if(h.getUint8(a[e][0])>>8-m||this.opusPacketGetNumChannels(h)===2&&h.getUint8(a[e][0])<<m+1>>8-m)return 1}return 0}opusPacketHasFec(h,p){if(!h||p<=0||this.opusPacketIsCeltOnly(h))return!1;const m=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)m[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(h,p,null,m,a,null)<0||a[0][0]<=1)return!1;const n=this.opusNumSilkFrames(h);if(n===0)return!1;const e=this.opusPacketGetNumChannels(h);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(h.getUint8(m[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=d,d.shouldLog=!1,d.shouldReportStats=!1},9337558969:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. The packet we received
        // does not have a good RED payload.
        if (!gotLastBlock) {
            // Note that sequence numbers only exist for
            // incoming audio frames.
            if (primarySequenceNumber !== undefined) {
                // This could be a possible padding packet used
                // for BWE with a good sequence number.
                // Create a dummy encoding to make sure loss values
                // are calculated correctly by consuming sequence number.
                // Note that for the receive side, we process packets only
                // for loss/recovery calculations and forward the original
                // packet without changing it even in the error case.
                encodings.push({
                    payload: frame,
                    isRedundant: false,
                    seq: primarySequenceNumber,
                });
                return encodings;
            }
            // This is a bad packet.
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(frameMetadata.synchronizationSource, encodings[encodings.length - 1].timestamp);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(ssrc, timestamp) {
        if (timestamp === undefined ||
            timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        if (timestamp === undefined) {
            return;
        }
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=d},9649641385:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5824864644));let p=r(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=p},9877075638:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setInterval(h,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(h){this.intervalMs=h}},"IntervalScheduler");l.default=d},5824864644:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),h()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(h){this.timeoutMs=h,this.timer=null}},"TimeoutScheduler");l.default=d},182939685:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(9489740826)),p=f(d(6818892922)),m=f(d(8804723777));let a=r(class Nn{clone(){return new Nn(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new Nn(n.join(Nn.CRLF))}static candidateTypeFromString(n){switch(n){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:Nn.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+Nn.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return Nn.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(Nn.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return Nn.linesToSDP(this.lines().filter(e=>Nn.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,Nn.rfc7587LowestBitrate),Nn.rfc7587HighestBitrate));const e=this.lines(),t=Nn.findOpusFmtpAttributes(e),i=Nn.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return Nn.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=Nn.findOpusFmtpAttributes(n),t=Nn.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return Nn.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const c=e.exec(o);c!==null&&(i[i.length-1]=`a=fmtp:${c[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,c=null;for(const g of n)if(g.startsWith("m=audio")&&(c=e[o],o++),g.startsWith("m=video")&&(c=null),c&&g.startsWith(c)){const S=g.slice(c.length).split(";"),u=[];for(const v of S)t.findIndex(b=>b.startsWith(v.split("=")[0]))<0&&u.push(v);for(const v of t)u.push(v);i.push(c+u.join(";"))}else i.push(g);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new Nn(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const c=+i.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Nn.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Nn.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=Nn.splitLines(this.sdp).filter(e=>!e.includes(Nn.dependencyDescriptorRtpHeaderExtensionUrl));return new Nn(n.join(Nn.CRLF)+Nn.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(Nn.splitLines(this.sdp)):t,o=Nn.splitSections(this.sdp),c=[];for(let S of o){if(/^m=video/.test(S)&&Nn.getRtpHeaderExtensionIdInSection(S,e)===-1){const u=Nn.splitLines(S),v=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){c.push(S);continue}for(const E of u)if(v.push(E),/^a=sendrecv/.test(E.trim())){const b="a=extmap:"+i+" "+e;v.push(b)}S=v.join(Nn.CRLF)+Nn.CRLF}else if(t!==-1&&/^m=video/.test(S)&&Nn.getRtpHeaderExtensionIdInSection(S,e)!==t){const u=Nn.splitLines(S),v=[];for(const E of u){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const _="a=extmap:"+t+" "+e;v.push(_)}continue}v.push(E)}S=v.join(Nn.CRLF)+Nn.CRLF}c.push(S)}const g=c.join("");return new Nn(g)}ssrcForVideoSendingSection(){const n=this.sdp,e=Nn.splitSections(n);if(e.length<2)return"";const t=Nn.findActiveCameraSection(e);if(t===-1)return"";const i=Nn.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=Nn.extractSSRCsFromFIDGroupLine(i[0]),[c]=o.split(" ").map(g=>parseInt(g,10));return c.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=Nn.splitSections(n),t=Nn.findActiveCameraSection(e);if(t===-1)return new Nn(this.sdp);const i=e[t],o=Nn.splitLines(i),c=[],g=new Map;o.forEach(E=>{if(/^a=rtpmap:/.test(E)){const b=/^a=rtpmap:([0-9]+)\s/.exec(E);b&&E.toLowerCase().includes("h264")&&c.push(parseInt(b[1],10))}if(/^a=fmtp:/.test(E)){const b=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(b&&b.length===3){const _=parseInt(b[1],10),C=parseInt(b[2],10);g.has(C)?g.get(C).push(_):g.set(C,[_])}}});const S=new Set;for(const E of c){S.add(E);const b=g.get(E);if(b)for(const _ of b)S.add(_)}if(c.length>0){const E=o[0].split(" ");o[0]=E.filter(b=>!S.has(parseInt(b))).join(" ")}const u=o.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const b of S)if(E.includes(b.toString()))return!1;return!0});e[t]=u.join(Nn.CRLF)+Nn.CRLF;const v=e.join("");return new Nn(v)}mediaSections(){const n=Nn.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new p.default,o=Nn.splitLines(n[t]);for(const c of o){const g=Nn.mediaType(c);if(g!==void 0){i.mediaType=g;continue}const S=Nn.direction(c);if(S!==void 0){i.direction=S;continue}const u=Nn.mid(c);if(u!==void 0){i.mid=u;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=Nn.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),c=+o[0];if(o[1]===e)return c}return-1}getRtpHeaderExtensionId(n){const e=Nn.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=Nn.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=Nn.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=Nn.splitSections(e),i=Nn.findActiveCameraSection(t);if(i===-1)return new Nn(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new Nn(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=Nn.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const u=/^a=rtpmap:(\d+)\s/.exec(S);if(!u)return;const v=u[1];for(const E of e){if(!S.includes(`${E.codecName}/${E.codecCapability.clockRate}`))continue;let b=!1;if(E.codecCapability.sdpFmtpLine!==void 0){let _=!1;for(const C of i){if(E.fmtpLineMatches(C,parseInt(v))){b=!0;break}_||(_=C.startsWith(`a=fmtp:${v} profile-id=`))}E.equals(m.default.vp9Profile0())&&!_&&(b=!0)}else b=!0;if(b){t.set(v,E);break}}});const o=new Set(t.keys()),c=i[0].split(" ").filter(S=>!o.has(S)),g=Array.from(t.entries()).sort((S,u)=>{let[v,E]=S,[b,_]=u;const C=e.indexOf(E),I=e.indexOf(_);return C-I}).map(S=>{let[u,v]=S;return u});return c.splice(3,0,...g),i[0]=c.join(" "),i.join(Nn.CRLF)+Nn.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=Nn.splitSections(n),t=Nn.findActiveCameraSection(e);if(t===-1)return[];const i=Nn.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const c of n){const g=/^a=rtpmap:([0-9]+)\s/.exec(c);if(g&&g[1]===e){const u=c.split(" ")[1].split("/");u.length>=2&&(t=u[0],i=u[1])}c.startsWith(`a=fmtp:${e} `)&&(o=c.split(" ")[1])}if(t!==void 0)return new m.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=Nn.splitSections(e);return n.set("opus",Nn.findAudioPayloadType("opus",t)),n.set("red",Nn.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const c=i.exec(o);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(n){const e=Nn.splitSections(this.sdp),t=Nn.findActiveCameraSection(e);if(t===-1)return this;const i=Nn.splitLines(e[t]),o=[];for(const g of i)if(/^a=fmtp:\d*/.test(g)){const S=g+`;x-google-start-bitrate=${n}`;o.push(S)}else o.push(g);e[t]=o.join(Nn.CRLF)+Nn.CRLF;const c=e.join("");return new Nn(c)}constructor(n){this.sdp=n}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9489740826:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var d;(function(f){f.Host="host",f.ServerReflexive="srflx",f.PeerReflexive="prflx",f.Relay="relay"})(d=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=d},6818892922:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"SDPMediaSection");l.default=d},8804723777:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(4136617125);let h=r(class bo{equals(m){if(m===void 0||this.codecName!==m.codecName||this.codecCapability.mimeType!==m.codecCapability.mimeType||this.codecCapability.clockRate!==m.codecCapability.clockRate)return!1;const a=this.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(this.codecCapability.sdpFmtpLine,this.codecName):"",s=m.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(m.codecCapability.sdpFmtpLine,m.codecName):"";return a===s}fmtpLineMatches(m,a){const s=this.codecCapability.sdpFmtpLine;if(!s)return!1;const n=`a=fmtp:${a} `;if(!m.startsWith(n))return!1;const e=m.substring(n.length);return this.cleanupFmtpLine(e,this.codecName)===this.cleanupFmtpLine(s,this.codecName)}cleanupFmtpLine(m,a){const s=/;x-google-start-bitrate=\d+/g;let n=m.replace(s,"");if(a==="H264"){const e=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i;n=n.replace(e,"profile-level-id=$1")}return n}static vp8(){return new bo("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new bo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new bo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new bo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new bo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new bo("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return bo.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new bo("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return bo.vp9Profile0()}static av1Main(){return new bo("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return bo.av1Main()}static fromSignaled(m){switch(m){case f.SdkVideoCodecCapability.VP8:return bo.vp8();case f.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return bo.h264BaselineProfile();case f.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return bo.h264ConstrainedBaselineProfile();case f.SdkVideoCodecCapability.H264_MAIN_PROFILE:return bo.h264MainProfile();case f.SdkVideoCodecCapability.H264_HIGH_PROFILE:return bo.h264HighProfile();case f.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return bo.h264ConstrainedHighProfile();case f.SdkVideoCodecCapability.VP9_PROFILE_0:return bo.vp9Profile0();case f.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return bo.av1Main();default:return}}constructor(m,a){this.codecName=m,this.codecCapability=a}},"VideoCodecCapability");l.default=h},3475297719:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(9385915920);let h=r(class Su{compress(m,a){if(a.length>0){const e=Math.min(a.length,Su.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={memLevel:Su.Z_MEM_LEVEL,dictionary:a};return f.deflateRaw(m,s)}decompress(m,a){if(a.length>0){const e=Math.min(a.length,Su.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={to:"string",dictionary:a,chunkSize:4096};let n="";try{n=f.inflateRaw(m,s)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(m){this.logger=m}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},6900744364:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(3795683579),h=d(7012117651),p=d(2092275410),m=d(583806999);let a=r(class{perform(n,e){const t=this.currentState;if(t===p.SessionStateControllerState.NotConnected&&n===f.SessionStateControllerAction.Connect)this.transition(p.SessionStateControllerState.Connecting,n);else if(t===p.SessionStateControllerState.Connecting&&n===f.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Connecting&&n===f.SessionStateControllerAction.FinishConnecting)this.transition(p.SessionStateControllerState.Connected,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Disconnect)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Reconnect)this.transition(p.SessionStateControllerState.Connecting,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Update)this.transition(p.SessionStateControllerState.Updating,n);else if(t===p.SessionStateControllerState.Updating&&n===f.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Updating&&n===f.SessionStateControllerAction.FinishUpdating)this.transition(p.SessionStateControllerState.Connected,n);else if(t===p.SessionStateControllerState.Disconnecting&&n===f.SessionStateControllerAction.FinishDisconnecting)this.transition(p.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${p.SessionStateControllerState[this.currentState]} with ${f.SessionStateControllerAction[n]}`),this.deferAction(n,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${p.SessionStateControllerState[this.currentState]} with ${f.SessionStateControllerAction[n]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${p.SessionStateControllerState[this.currentState]} with action ${f.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${p.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${p.SessionStateControllerState[this.currentState]} to ${p.SessionStateControllerState[n]} with ${f.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case f.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case f.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case f.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case f.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===p.SessionStateControllerState.Connecting||this.currentState===p.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${f.SessionStateControllerAction[n]}`),this.perform(n,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${f.SessionStateControllerAction[n]} in state ${p.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=p.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},3795683579:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var d;(function(f){f[f.Connect=0]="Connect",f[f.FinishConnecting=1]="FinishConnecting",f[f.Update=2]="Update",f[f.FinishUpdating=3]="FinishUpdating",f[f.Reconnect=4]="Reconnect",f[f.Disconnect=5]="Disconnect",f[f.Fail=6]="Fail",f[f.FinishDisconnecting=7]="FinishDisconnecting"})(d=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=d},7012117651:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var d;(function(f){f[f.DoNotDefer=0]="DoNotDefer",f[f.Low=1]="Low",f[f.Medium=2]="Medium",f[f.High=3]="High",f[f.VeryHigh=4]="VeryHigh"})(d=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=d},2092275410:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var d;(function(f){f[f.NotConnected=0]="NotConnected",f[f.Connecting=1]="Connecting",f[f.Connected=2]="Connected",f[f.Updating=3]="Updating",f[f.Disconnecting=4]="Disconnecting"})(d=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=d},583806999:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var d;(function(f){f[f.Transitioned=0]="Transitioned",f[f.NoTransitionAvailable=1]="NoTransitionAvailable",f[f.DeferredTransition=2]="DeferredTransition",f[f.TransitionFailed=3]="TransitionFailed"})(d=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=d},7570945794:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5546774952)),p=f(d(5824864644)),m=d(4136617125),a=d(5685319565),s=f(d(6885109343)),n=f(d(4829581265)),e=f(d(5638612424)),t=d(5393388022),i=f(d(1578897375)),o=f(d(7969706599));let c=r(class cc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const u=m.SdkSignalFrame.create();return u.type=m.SdkSignalFrame.Type.PING_PONG,u.pingPong=S,this.sendMessage(u),u.timestampMs}join(S){this.logger.info("sending join");const u=m.SdkJoinFrame.create();u.protocolVersion=2,u.flags=m.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new h.default,E={platformName:v.name(),platformVersion:v.version(),clientSource:s.default.sdkName,chimeSdkVersion:s.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:_,appVersion:C}=S.applicationMetadata;E.appName=_,E.appVersion=C}u.clientDetails=m.SdkClientDetails.create(E),u.audioSessionId=this.audioSessionId,u.wantsCompressedSdp=cc.CLIENT_SUPPORTS_COMPRESSION,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),u.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),u.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const b=m.SdkSignalFrame.create();b.type=m.SdkSignalFrame.Type.JOIN,b.join=u,this.sendMessage(b)}subscribe(S){const u=m.SdkSubscribeFrame.create();if(u.sendStreams=[],u.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(u.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(u.audioCheckin=S.audioCheckin,u.audioHost=S.audioHost,u.audioMuted=S.audioMuted,!S.audioCheckin)){const E=m.SdkStreamDescriptor.create();E.mediaType=m.SdkStreamMediaType.AUDIO,E.trackLabel="AmazonChimeExpressAudio",E.attendeeId=S.attendeeId,E.streamId=1,E.groupId=1,E.framerate=15,E.maxBitrateKbps=600,E.avgBitrateBps=4e5,u.sendStreams.push(E)}if(u.compressedSdpOffer=S.compressedSdpOffer,u.duplex=m.SdkStreamServiceType.RX,S.localVideoEnabled){u.duplex=m.SdkStreamServiceType.DUPLEX;for(let E=0;E<S.videoStreamDescriptions.length;E++){const b=S.videoStreamDescriptions[E].clone();b.attendeeId=S.attendeeId,u.sendStreams.push(b.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(u.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=m.SdkSignalFrame.create();v.type=m.SdkSignalFrame.Type.SUBSCRIBE,v.sub=u,this.sendMessage(v)}remoteVideoUpdate(S,u){const v=m.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=u;const E=m.SdkSignalFrame.create();E.type=m.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,E.remoteVideoUpdate=v,this.sendMessage(E)}convertSignalingClientVideoSubscriptionConfiguration(S){const u=new m.SdkVideoSubscriptionConfiguration;switch(u.mid=S.mid,u.attendeeId=S.attendeeId,u.streamId=S.streamId,u.groupId=S.groupId,u.priority=S.priority,u.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED}return u}leave(){const S=m.SdkSignalFrame.create();S.type=m.SdkSignalFrame.Type.LEAVE,S.leave=m.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.CLIENT_METRIC,u.clientMetric=S,this.sendMessage(u)}sendDataMessage(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.DATA_MESSAGE,u.dataMessage=S,this.sendMessage(u)}closeConnection(){var S,u;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const v=new p.default(cc.CLOSE_EVENT_TIMEOUT_MS),E=r(b=>{var _,C;(C=(_=this.webSocket).removeEventListener)===null||C===void 0||C.call(_,"close",E),v.stop(),this.closeEventHandler(b)},"handler");(u=(S=this.webSocket).removeEventListener)===null||u===void 0||u.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",E),v.start(()=>{E(new CloseEvent("close",{wasClean:!1,code:1005,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.AUDIO_CONTROL;const v=m.SdkAudioControlFrame.create();v.muted=S,u.audioControl=v,this.sendMessage(u)}pause(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.PAUSE,u.pause=m.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resume(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.RESUME,u.pause=m.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const u=this.prependWithFrameTypeRTC(m.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(u)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let u;try{u=m.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(u)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,u)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(u)}`)}stripFrameTypeRTC(S){const u=S[0];return u!==cc.FRAME_TYPE_RTC&&u!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${u}`),S.slice(1)}prependWithFrameTypeRTC(S){const u=new Uint8Array(S.length+1);return u[0]=cc.FRAME_TYPE_RTC,u.set(S,1),u}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;case o.default.WebSocketClosed:this.logger.info(`notifying event: ${o.default[S.type]}, 
              code: ${S.closeCode} reason: ${S.closeReason}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const u of this.observerQueue)u.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("Signaling WebSocket ignoring error closing while connecting");return}this.wasOpened?(this.logger.error("Signaling WebSocket received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("Signaling WebSocket received error while connecting"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=d.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=d.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const u=m.SdkMeetingSessionCredentials.create();u.attendeeId=S.attendeeId,u.externalUserId=S.externalUserId,u.joinToken=S.joinToken;const v=m.SdkPrimaryMeetingJoinFrame.create();v.credentials=u;const E=m.SdkSignalFrame.create();E.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,E.primaryMeetingJoin=v,this.sendMessage(E)}demoteFromPrimaryMeeting(){const S=m.SdkPrimaryMeetingLeaveFrame.create(),u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,u.primaryMeetingLeave=S,this.sendMessage(u)}constructor(S,u){this.webSocket=S,this.logger=u,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=c,c.FRAME_TYPE_RTC=5,c.CLOSE_EVENT_TIMEOUT_MS=2e3,c.CLIENT_SUPPORTS_COMPRESSION=!0},5393388022:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const f=d(4136617125);var h;(function(s){s[s.Default=0]="Default",s[s.None=1]="None",s[s.BandwidthProbing=2]="BandwidthProbing",s[s.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function p(s){return s===h.None||s===h.Default}r(p,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=p;function m(s){switch(s){case f.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case f.SdkServerSideNetworkAdaption.NONE:return h.None;case f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}r(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=m;function a(s){switch(s){case h.Default:return f.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return f.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}r(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},7263318766:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(h,p){this.signalingURL=h,this.joinToken=p}},"SignalingClientConnectionRequest");l.default=d},1578897375:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7969706599));let p=r(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,s,n,e,t){this.client=a,this.type=s,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=p},7969706599:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var d;(function(f){f[f.WebSocketConnecting=0]="WebSocketConnecting",f[f.WebSocketOpen=1]="WebSocketOpen",f[f.WebSocketError=2]="WebSocketError",f[f.WebSocketClosing=3]="WebSocketClosing",f[f.WebSocketClosed=4]="WebSocketClosed",f[f.WebSocketFailed=5]="WebSocketFailed",f[f.WebSocketMessage=6]="WebSocketMessage",f[f.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",f[f.WebSocketSentMessage=8]="WebSocketSentMessage",f[f.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",f[f.ReceivedSignalFrame=10]="ReceivedSignalFrame",f[f.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(d=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=d},3867485289:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5393388022));let p=r(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=p},3735795291:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a,s,n,e,t,i,o){this.attendeeId=h,this.sdpOffer=p,this.audioHost=m,this.audioMuted=a,this.audioCheckin=s,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=d},4804743313:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return h!==void 0&&this.mid===h.mid&&this.attendeeId===h.attendeeId&&this.streamId===h.streamId&&this.groupId===h.groupId&&this.priority===h.priority&&this.targetBitrateKbps===h.targetBitrateKbps&&this.qualityAdaptationPreference===h.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=d},4136617125:(B,l,d)=>{"use strict";var f=d(8203499834),h=f.Reader,p=f.Writer,m=f.util,a=f.roots.default||(f.roots.default={});a.SdkSignalFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkSignalFrame"),s.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.type=1,s.prototype.error=null,s.prototype.join=null,s.prototype.joinack=null,s.prototype.sub=null,s.prototype.suback=null,s.prototype.index=null,s.prototype.pause=null,s.prototype.leave=null,s.prototype.leaveAck=null,s.prototype.bitrates=null,s.prototype.audioControl=null,s.prototype.audioMetadata=null,s.prototype.audioStreamIdInfo=null,s.prototype.pingPong=null,s.prototype.audioStatus=null,s.prototype.clientMetric=null,s.prototype.dataMessage=null,s.prototype.remoteVideoUpdate=null,s.prototype.primaryMeetingJoin=null,s.prototype.primaryMeetingJoinAck=null,s.prototype.primaryMeetingLeave=null,s.prototype.notification=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(m.Long){var o=new m.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=a.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),s}(),a.SdkErrorFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkErrorFrame"),s.prototype.status=0,s.prototype.description="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),s}(),a.SdkJoinFlags=function(){var s={},n=Object.create(s);return n[s[2]="HAS_STREAM_UPDATE"]=2,n[s[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[s[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),a.SdkClientDetails=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkClientDetails"),s.prototype.appName="",s.prototype.appVersion="",s.prototype.deviceModel="",s.prototype.deviceMake="",s.prototype.platformName="",s.prototype.platformVersion="",s.prototype.clientSource="",s.prototype.chimeSdkVersion="",s.prototype.clientUtcOffset="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),s}(),a.SdkServerSideNetworkAdaption=function(){var s={},n=Object.create(s);return n[s[1]="DEFAULT"]=1,n[s[2]="NONE"]=2,n[s[3]="BANDWIDTH_PROBING"]=3,n[s[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),a.SdkJoinFrame=function(){function s(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkJoinFrame"),s.prototype.protocolVersion=2,s.prototype.maxNumOfVideos=0,s.prototype.flags=0,s.prototype.clientDetails=null,s.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.wantsCompressedSdp=!1,s.prototype.serverSideNetworkAdaption=1,s.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,s.prototype.wantsAllTemporalLayersInIndex=!1,s.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,m.Long){var o=new m.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)i.supportedServerSideNetworkAdaptions[c]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]===void 0?e.supportedServerSideNetworkAdaptions[c]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),s}(),a.SdkJoinAckFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkJoinAckFrame"),s.prototype.turnCredentials=null,s.prototype.videoSubscriptionLimit=0,s.prototype.wantsCompressedSdp=!1,s.prototype.defaultServerSideNetworkAdaption=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),s}(),a.SdkLeaveFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),s}(),a.SdkLeaveAckFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkLeaveAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),s}(),a.SdkStreamServiceType=function(){var s={},n=Object.create(s);return n[s[1]="RX"]=1,n[s[2]="TX"]=2,n[s[3]="DUPLEX"]=3,n}(),a.SdkStreamMediaType=function(){var s={},n=Object.create(s);return n[s[1]="AUDIO"]=1,n[s[2]="VIDEO"]=2,n}(),a.SdkSubscribeFrame=function(){function s(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkSubscribeFrame"),s.prototype.duplex=1,s.prototype.sendStreams=m.emptyArray,s.prototype.receiveStreamIds=m.emptyArray,s.prototype.sdpOffer="",s.prototype.audioHost="",s.prototype.audioCheckin=!1,s.prototype.audioMuted=!1,s.prototype.compressedSdpOffer=m.newBuffer([]),s.prototype.videoSubscriptionConfiguration=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)a.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=a.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=m.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),s}(),a.SdkSubscribeAckFrame=function(){function s(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkSubscribeAckFrame"),s.prototype.duplex=1,s.prototype.allocations=m.emptyArray,s.prototype.sdpAnswer="",s.prototype.tracks=m.emptyArray,s.prototype.compressedSdpAnswer=m.newBuffer([]),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)a.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)a.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=a.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=a.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=a.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=a.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=m.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),s}(),a.SdkIndexFrame=function(){function s(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkIndexFrame"),s.prototype.atCapacity=!1,s.prototype.sources=m.emptyArray,s.prototype.pausedAtSourceIds=m.emptyArray,s.prototype.numParticipants=0,s.prototype.supportedReceiveCodecIntersection=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)a.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=a.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=a.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),s}(),a.SdkPauseResumeFrame=function(){function s(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPauseResumeFrame"),s.prototype.streamIds=m.emptyArray,s.prototype.groupIds=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),s}(),a.SdkBitrateFrame=function(){function s(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkBitrateFrame"),s.prototype.bitrates=m.emptyArray,s.prototype.serverAvailableOutgoingBitrate=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)a.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=a.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=a.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),s}(),a.SdkStreamDescriptor=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamDescriptor"),s.prototype.streamId=0,s.prototype.framerate=0,s.prototype.maxBitrateKbps=0,s.prototype.trackLabel="",s.prototype.groupId=0,s.prototype.avgBitrateBps=0,s.prototype.attendeeId="",s.prototype.mediaType=1,s.prototype.externalUserId="",s.prototype.width=0,s.prototype.height=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),s}(),a.SdkStreamAllocation=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamAllocation"),s.prototype.trackLabel="",s.prototype.streamId=0,s.prototype.groupId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),s}(),a.SdkTrackMapping=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTrackMapping"),s.prototype.streamId=0,s.prototype.ssrc=0,s.prototype.trackLabel="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),s}(),a.SdkBitrate=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkBitrate"),s.prototype.sourceStreamId=0,s.prototype.avgBitrateBps=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),s}(),a.SdkAudioControlFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioControlFrame"),s.prototype.muted=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),s}(),a.SdkAudioMetadataFrame=function(){function s(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioMetadataFrame"),s.prototype.attendeeStates=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)a.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),s}(),a.SdkAudioAttendeeState=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioAttendeeState"),s.prototype.audioStreamId=0,s.prototype.volume=0,s.prototype.muted=!1,s.prototype.signalStrength=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfoFrame=function(){function s(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioStreamIdInfoFrame"),s.prototype.streams=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)a.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=a.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfo=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioStreamIdInfo"),s.prototype.audioStreamId=0,s.prototype.attendeeId="",s.prototype.muted=!1,s.prototype.externalUserId="",s.prototype.dropped=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),s}(),a.SdkPingPongType=function(){var s={},n=Object.create(s);return n[s[1]="PING"]=1,n[s[2]="PONG"]=2,n}(),a.SdkPingPongFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPingPongFrame"),s.prototype.type=1,s.prototype.pingId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),s}(),a.SdkAudioStatusFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioStatusFrame"),s.prototype.audioStatus=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),s}(),a.SdkMetric=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkMetric"),s.prototype.type=1,s.prototype.value=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 60:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_INPUT_HEIGHT":case 60:t.type=60;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break;case"VIDEO_RENDER_HEIGHT":case 105:t.type=105;break;case"VIDEO_RENDER_WIDTH":case 106:t.type=106;break;case"VIDEO_INPUT_WIDTH":case 107:t.type=107;break;case"VIDEO_SENT_JITTER_MS":case 108:t.type=108;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[60]="VIDEO_INPUT_HEIGHT"]=60,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[n[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[n[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e[n[105]="VIDEO_RENDER_HEIGHT"]=105,e[n[106]="VIDEO_RENDER_WIDTH"]=106,e[n[107]="VIDEO_INPUT_WIDTH"]=107,e[n[108]="VIDEO_SENT_JITTER_MS"]=108,e}(),s}(),a.SdkStreamMetricFrame=function(){function s(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamMetricFrame"),s.prototype.streamId=0,s.prototype.groupId=0,s.prototype.metrics=m.emptyArray,s.prototype.dimensions=m.emptyArray,s.prototype.mediaType=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)a.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)a.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(56).int32(e.mediaType),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}case 7:{o.mediaType=e.int32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=a.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=a.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=a.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=a.SdkStreamDimension.fromObject(e.dimensions[i])}}switch(e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0,i.mediaType=t.enums===String?"AUDIO":1),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),s}(),a.SdkClientMetricFrame=function(){function s(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkClientMetricFrame"),s.prototype.globalMetrics=m.emptyArray,s.prototype.streamMetricFrames=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)a.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=a.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=a.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),s}(),a.SdkStreamDimension=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamDimension"),s.prototype.type=1,s.prototype.value=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=a.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),s}(),a.SdkDimensionValue=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkDimensionValue"),s.prototype.stringValue="",s.prototype.boolValue=!1,s.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,m.Long){var o=new m.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),s}(),a.SdkDataMessageFrame=function(){function s(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkDataMessageFrame"),s.prototype.messages=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)a.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=a.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=a.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),s}(),a.SdkDataMessagePayload=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkDataMessagePayload"),s.prototype.topic="",s.prototype.data=m.newBuffer([]),s.prototype.lifetimeMs=0,s.prototype.senderAttendeeId="",s.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.senderExternalUserId="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=m.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",m.Long){var o=new m.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),s}(),a.SdkTurnCredentials=function(){function s(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTurnCredentials"),s.prototype.username="",s.prototype.password="",s.prototype.ttl=0,s.prototype.uris=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),s}(),a.SdkTranscriptItem=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptItem"),s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.speakerAttendeeId="",s.prototype.speakerExternalUserId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type=1,s.prototype.vocabularyFilterMatch=!1,s.prototype.confidence=0,s.prototype.stable=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",m.Long){var o=new m.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",m.Long){var o=new m.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),s}(),a.SdkTranscriptEntity=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptEntity"),s.prototype.category="",s.prototype.confidence=0,s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",m.Long){var o=new m.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(m.Long){var o=new m.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),s}(),a.SdkTranscriptAlternative=function(){function s(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptAlternative"),s.prototype.items=m.emptyArray,s.prototype.transcript="",s.prototype.entities=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)a.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)a.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=a.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=a.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=a.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=a.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),s}(),a.SdkTranscriptLanguageWithScore=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptLanguageWithScore"),s.prototype.languageCode="",s.prototype.score=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),s}(),a.SdkTranscriptResult=function(){function s(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptResult"),s.prototype.alternatives=m.emptyArray,s.prototype.channelId="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.isPartial=!1,s.prototype.resultId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.languageCode="",s.prototype.languageIdentification=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)a.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=a.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",m.Long){var o=new m.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",m.Long){var o=new m.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var c=0;c<e.alternatives.length;++c)i.alternatives[c]=a.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)i.languageIdentification[c]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),s}(),a.SdkTranscript=function(){function s(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscript"),s.prototype.results=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)a.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=a.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=a.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),s}(),a.SdkTranscriptionStatus=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptionStatus"),s.prototype.type=1,s.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.transcriptionRegion="",s.prototype.transcriptionConfiguration="",s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,m.Long){var o=new m.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),s}(),a.SdkTranscriptEvent=function(){function s(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}r(s,"SdkTranscriptEvent"),s.prototype.status=null,s.prototype.transcript=null;var n;return Object.defineProperty(s.prototype,"Event",{get:m.oneOfGetter(n=["status","transcript"]),set:m.oneOfSetter(n)}),s.create=r(function(t){return new s(t)},"create"),s.encode=r(function(t,i){return i||(i=p.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),s.encodeDelimited=r(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),s.decode=r(function(t,i){t instanceof h||(t=h.create(t));for(var o=i===void 0?t.len:t.pos+i,c=new a.SdkTranscriptEvent;t.pos<o;){var g=t.uint32();switch(g>>>3){case 1:{c.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{c.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(g&7);break}}return c},"decode"),s.decodeDelimited=r(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),s.verify=r(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),s.fromObject=r(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var i=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=a.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),s.toObject=r(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),s}(),a.SdkTranscriptFrame=function(){function s(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptFrame"),s.prototype.events=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)a.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=a.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=a.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),s}(),a.SdkRemoteVideoUpdateFrame=function(){function s(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkRemoteVideoUpdateFrame"),s.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,s.prototype.removedVideoSubscriptionMids=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),s}(),a.SdkVideoQualityAdaptationPreference=function(){var s={},n=Object.create(s);return n[s[1]="BALANCED"]=1,n[s[2]="MAINTAIN_FRAMERATE"]=2,n[s[3]="MAINTAIN_RESOLUTION"]=3,n}(),a.SdkVideoSubscriptionConfiguration=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkVideoSubscriptionConfiguration"),s.prototype.mid="",s.prototype.attendeeId="",s.prototype.streamId=0,s.prototype.priority=0,s.prototype.targetBitrateKbps=0,s.prototype.groupId=0,s.prototype.qualityAdaptationPreference=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),s}(),a.SdkNotificationFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkNotificationFrame"),s.prototype.level=3,s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),s.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),s}(),a.SdkPrimaryMeetingJoinFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPrimaryMeetingJoinFrame"),s.prototype.credentials=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPrimaryMeetingJoinAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingLeaveFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPrimaryMeetingLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),s}(),a.SdkMeetingSessionCredentials=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkMeetingSessionCredentials"),s.prototype.attendeeId="",s.prototype.externalUserId="",s.prototype.joinToken="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),s}(),a.SdkVideoCodecCapability=function(){var s={},n=Object.create(s);return n[s[1]="VP8"]=1,n[s[2]="H264_BASELINE_PROFILE"]=2,n[s[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[s[4]="H264_MAIN_PROFILE"]=4,n[s[5]="H264_HIGH_PROFILE"]=5,n[s[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[s[8]="VP9_PROFILE_0"]=8,n[s[11]="AV1_MAIN_PROFILE"]=11,n}(),B.exports=a,m.Long=void 0,f.configure()},7924674822:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(7288346005),m=d(9111664378),a=h(d(6885109343));let s=r(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new p.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return f(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),g=yield this.hmac(i,c),S=yield this.hmac(o,g);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,c,g,S){return f(this,void 0,void 0,function*(){const u=this.getDateTimeString(),v=this.getDateString(u),E="AWS4-HMAC-SHA256";let b="";this.chimeClient.config.region instanceof Function?b=yield this.chimeClient.config.region():b=this.chimeClient.config.region;const _="host",C="host:"+o.toLowerCase()+`
`,I=v+"/"+b+"/"+i+"/aws4_request";let A;this.chimeClient.config.credentials instanceof Function?A=yield this.chimeClient.config.credentials():A=this.chimeClient.config.credentials;let w=new Map;w.set("X-Amz-Algorithm",[E]),w.set("X-Amz-Credential",[encodeURIComponent(A.accessKeyId+"/"+I)]),w.set("X-Amz-Date",[u]),w.set("X-Amz-Expires",["10"]),w.set("X-Amz-SignedHeaders",["host"]),A.sessionToken&&w.set("X-Amz-Security-Token",[encodeURIComponent(A.sessionToken)]),w.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),w.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((ne,ie)=>{const ge=encodeURIComponent(ie);ne.sort().forEach(Ie=>{w.has(ge)||w.set(ge,[]),w.get(ge).push(encodeURIComponent(Ie))})});let O="";w=new Map([...w.entries()].sort()),w.forEach((ne,ie)=>{ne.forEach(ge=>{O.length&&(O+="&"),O+=ie+"="+ge})});const R=e+`
`+c+`
`+O+`
`+C+`
`+_+`
`+m.toHex(yield this.hmac(g)),F=m.toHex(yield this.hmac(R)),V=`AWS4-HMAC-SHA256
`+u+`
`+v+"/"+b+"/"+i+`/aws4_request
`+F,$=yield this.getSignatureKey(A.secretAccessKey,v,b,i),X=m.toHex(yield this.hmac(V,$)),Y=O+"&X-Amz-Signature="+X;return t+"://"+o+c+"?"+Y})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=s},9131051489:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var d;(function(f){f[f.Low=0]="Low",f[f.LowAndMedium=1]="LowAndMedium",f[f.LowAndHigh=2]="LowAndHigh",f[f.Medium=3]="Medium",f[f.MediumAndHigh=4]="MediumAndHigh",f[f.High=5]="High"})(d=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=d},4882678815:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var d;(function(f){f[f.DeviceChanged=0]="DeviceChanged",f[f.MutedLocal=1]="MutedLocal",f[f.UnmutedLocal=2]="UnmutedLocal",f[f.Connected=3]="Connected",f[f.ConnectFailed=4]="ConnectFailed",f[f.RedmicStartLoss=5]="RedmicStartLoss",f[f.RedmicEndLoss=6]="RedmicEndLoss"})(d=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=d},4562177071:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(v,E,b,_){function C(I){return I instanceof b?I:new b(function(A){A(I)})}return r(C,"adopt"),new(b||(b=Promise))(function(I,A){function w(F){try{R(_.next(F))}catch(V){A(V)}}r(w,"fulfilled");function O(F){try{R(_.throw(F))}catch(V){A(V)}}r(O,"rejected");function R(F){F.done?I(F.value):C(F.value).then(w,O)}r(R,"step"),R((_=_.apply(v,E||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9029233041)),m=h(d(6502873558)),a=h(d(6132421099)),s=h(d(3237015968)),n=h(d(6172292806)),e=h(d(2234819701)),t=h(d(546597810)),i=h(d(9877075638)),o=d(4136617125),c=d(6527539809),g=h(d(4882678815)),S=h(d(1404048602));let u=r(class vu{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(b){return`_${b}`}).replace(/([A-Z][A-Z]+)/g,function(b){return`_${b}`}).toLowerCase()}logLatency(E,b,_){const C=this.toSuffix(E);this.logEventTime("meeting"+C,b,_)}logStateTimeout(E,b){const _=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},b),{state:`state${_}`}))}logAudioEvent(E,b){const _="audio"+this.toSuffix(g.default[E]);this.logEvent(_,b)}logVideoEvent(E,b){const _="video"+this.toSuffix(S.default[E]);this.logEvent(_,b)}logEventTime(E,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const C=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:vu.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(C)}`),this.metricsAddTime(E,b,C)}logMeetingSessionStatus(E){const b=`${E.statusCode()}`;this.logEvent(b);const _={status:b,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",_),E.isTerminal()&&this.logEvent("meeting_session_stopped",_),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",_),E.isFailure()&&this.logEvent("meeting_session_failed",_)}logLifecycleEvent(E,b){const _={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[b])}`,lifecycle_event_condition_code:`${b}`};this.logEvent("meeting_session_lifecycle",_)}logEvent(E){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const _=Object.assign(Object.assign({},b),{call_id:this.audioVideoController.configuration.meetingId,client_type:vu.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(_)}`),this.metricsLogEvent(E,_)}start(E,b){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=b,this.clientMetricReport=new p.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>f(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}videoTileResolutionDidChange(E,b,_){this.resolutionMap.set(E,{width:b,height:_})}videoTileUnbound(E){this.resolutionMap.delete(E)}updateMetricValues(E,b){const _=b?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let C;if(b){const I=_.mediaType,A=_.direction;C=this.clientMetricReport.getMetricMap(I,A),I===a.default.VIDEO&&A===m.default.DOWNSTREAM&&this.addRenderResolutionToVideoDownstreamMetrics(_,E.ssrc)}else C=this.clientMetricReport.getMetricMap();for(const I in E)I in C&&(typeof E[I]=="number"?(_.previousMetrics[I]=_.currentMetrics[I],_.currentMetrics[I]=E[I]):typeof E[I]=="string"?_.currentStringMetrics[I]=E[I]:typeof E[I]=="object"?(_.previousObjectMetrics[I]=_.currentObjectMetrics[I]===void 0?E[I]:_.currentObjectMetrics[I],_.currentObjectMetrics[I]=E[I]):this.logger.error(`Unknown metric value type ${typeof E[I]} for metric ${I}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const b=Date.now();for(const _ of E){if(this.isVideoSourceMetricReport(_))continue;const C=this.isStreamRawMetricReport(_);if(C){const I=this.clientMetricReport.streamMetricReports[Number(_.ssrc)];if(I)I.mediaType===a.default.VIDEO&&I.direction===m.default.UPSTREAM?I.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):I.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc));else{const A=new n.default;A.mediaType=this.getMediaType(_),A.direction=this.getDirectionType(_),A.mediaType===a.default.VIDEO&&A.direction===m.default.UPSTREAM?A.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):this.videoStreamIndex.allStreams().empty()||(A.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(A.groupId=this.videoStreamIndex.groupIdForSSRC(Number(_.ssrc)))),this.clientMetricReport.streamMetricReports[Number(_.ssrc)]=A}this.clientMetricReport.currentSsrcs[Number(_.ssrc)]=1}this.updateMetricValues(_,C)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=b,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,b){const _=this.clientMetricReport.getStreamDimensionMap();for(const C in b.currentStringMetrics)if(C in _){const I=o.SdkStreamDimension.create();I.type=_[C];const A=o.SdkDimensionValue.create();A.stringValue=b.currentStringMetrics[C],I.value=A,E.dimensions.push(I)}}addMetricFrame(E,b,_,C){const I=_.type,A=_.transform,w=_.source,O=b.streamMetricFrames.length,R=b.streamMetricFrames[O-1];if(I){const F=o.SdkMetric.create();F.type=I,F.value=A(w||E,C),C?R.metrics.push(F):b.globalMetrics.push(F)}}addGlobalMetricsToProtobuf(E){const b=this.clientMetricReport.getMetricMap();for(const _ in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(_,E,b[_])}addStreamMetricsToProtobuf(E){for(const b in this.clientMetricReport.streamMetricReports){const _=this.clientMetricReport.streamMetricReports[b],C=o.SdkStreamMetricFrame.create();C.streamId=_.streamId,C.mediaType=_.mediaType===a.default.AUDIO?o.SdkStreamMediaType.AUDIO:o.SdkStreamMediaType.VIDEO,C.metrics=[],this.addStreamMetricDimensionFrames(C,_),E.streamMetricFrames.push(C);const I=this.clientMetricReport.getMetricMap(_.mediaType,_.direction);for(const A in I)this.hasMetricDependenciesInReport(A,_)&&this.addMetricFrame(A,E,I[A],Number(b))}}hasMetricDependenciesInReport(E,b){return E==="decoderLoss"&&b.currentMetrics.concealedSamples!==void 0&&b.currentMetrics.totalSamplesReceived!==void 0||E==="jitterBufferMs"&&b.currentMetrics.jitterBufferDelay!==void 0&&b.currentMetrics.jitterBufferEmittedCount!==void 0||E in b.currentMetrics||E in b.currentStringMetrics||E in b.currentObjectMetrics}makeClientMetricProtobuf(){const E=o.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E.type)||this.isVideoSourceMetricReport(E)}getMediaType(E){return E.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(E){const{type:b}=E;return b==="inbound-rtp"||b==="remote-outbound-rtp"||b==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"}isValidSsrc(E){let b=!0;return this.isStreamRawMetricReport(E)&&this.getDirectionType(E)===m.default.DOWNSTREAM&&this.getMediaType(E)===a.default.VIDEO&&(b=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),b}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const b=[];for(const _ of E)this.isValidRawMetricReport(_)&&b.push(_);return b}handleRawMetricReports(E){const b=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(b)}`);const _=[];this.maybeAddRedRecoveryMetrics(_);const C=this.getVideoUpstreamSsrcFromRawMetricReports(b);C!==null&&this.addVideoCodecDegradationMetrics(_,C),this.clientMetricReport.customStatsReports=_,b.push(..._),this.processRawMetricReports(b),this.updateVideoSourceMetrics(b);const I=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(I),this.audioVideoController.forEachObserver(A=>{c.Maybe.of(A.metricsDidReceive).map(w=>w.bind(A)(this.clientMetricReport.clone()))})}getStatsWrapper(){return f(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const b=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=b,b.forEach(_=>{E.push(_)}),this.handleRawMetricReports(E)}catch(b){this.logger.error(b.message)}})}overrideObservableMetric(E,b){this.clientMetricReport.overrideObservableMetric(E,b)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(E,b){E.push({kind:"video",type:"outbound-rtp",ssrc:b,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}getVideoUpstreamSsrcFromRawMetricReports(E){for(const b of E)if(this.isStreamRawMetricReport(b)&&this.getMediaType(b)===a.default.VIDEO&&this.getDirectionType(b)===m.default.UPSTREAM)return b.ssrc;return null}isVideoSourceMetricReport(E){return E.type==="media-source"&&E.kind==="video"}addRenderResolutionToVideoDownstreamMetrics(E,b){const _=this.videoStreamIndex.streamIdForSSRC(Number(b)),C=this.videoStreamIndex.attendeeIdForStreamId(_);if(_===void 0||C===""){this.logger.warn(`No attendee found for ssrc ${b}`);return}this.resolutionMap.has(C)&&(E.currentMetrics.videoRenderWidth=this.resolutionMap.get(C).width,E.currentMetrics.videoRenderHeight=this.resolutionMap.get(C).height)}updateVideoSourceMetrics(E){for(const b of E)if(this.isVideoSourceMetricReport(b)){const _=this.clientMetricReport.getVideoUpstreamSsrcs();if(_.length===0){this.logger.warn("No video upstream ssrcs found");return}for(const C of _)this.clientMetricReport.streamMetricReports[C].currentMetrics.videoInputWidth=b.width,this.clientMetricReport.streamMetricReports[C].currentMetrics.videoInputHeight=b.height}}constructor(E,b,_=vu.INTERVAL_MS){this.audioVideoController=E,this.logger=b,this.interval=_,this.intervalScheduler=null,this.redRecoveryMetricReport=new s.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.resolutionMap=new Map,this.metricsAddTime=(C,I,A)=>{},this.metricsLogEvent=(C,I)=>{}}},"StatsCollector");l.default=u,u.INTERVAL_MS=1e3,u.CLIENT_TYPE="amazon-chime-sdk-js"},1404048602:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var d;(function(f){f[f.InputAttached=0]="InputAttached",f[f.SendingFailed=1]="SendingFailed",f[f.SendingSuccess=2]="SendingSuccess"})(d=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=d},4713678292:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1404048602)),m=h(d(5009059128));let a=r(class extends m.default{run(){return f(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(c)}o&&this.context.statsCollector.logVideoEvent(p.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const c=i[o];i.splice(o,1),e?(i.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},5009059128:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7537135456)),m=h(d(6013191119));let a=r(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new p.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return f(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(n){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},9089081530:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5009059128));let m=r(class extends p.default{run(){return f(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(s){super(s.logger),this.context=s,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=m},5703332651:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7969706599)),m=h(d(5009059128));let a=r(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=r(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===p.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(c){this.signalingClient=c}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},9049733277:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5009059128));let m=r(class extends p.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const s in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[s]()}addPeerConnectionEventLogger(){const s=this.context.peer;s.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${s.connectionState}`)}),s.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),s.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${s.iceGatheringState}`)}),s.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),s.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${s.iceConnectionState}`)})}run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(s){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(s)):!1}addRemoteVideoTrack(s,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let g=this.context.videoStreamIndex.streamIdForTrack(t);typeof g>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),g=null);let S=this.context.videoStreamIndex.groupIdForStreamId(g);S===void 0&&(S=null);for(let I=0;I<this.trackEvents.length;I++){const A=this.trackEvents[I],w=n.getVideoTracks();if(w&&w.length){const O=w[0],R=r(()=>{this.context.logger.info(`received the ${A} event for tile=${c.id()} id=${s.id} streamId=${g}`),A==="ended"&&this.removeRemoteVideoTrack(s,c.state())},"callback");O.addEventListener(A,R),this.removeVideoTrackEventListeners[s.id]||(this.removeVideoTrackEventListeners[s.id]=[]),this.removeVideoTrackEventListeners[s.id].push(()=>{O.removeEventListener(A,R)})}}let u,v;if(s.getSettings){const I=s.getSettings();u=I.width,v=I.height}else{const I=s.getCapabilities();u=I.width,v=I.height}const E=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(i,!1,n,u,v,g,E,S),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${g} groupId=${S}`);const b="removetrack",_=n,C=r(()=>this.removeRemoteVideoTrack(s,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[s.id]=()=>{_.removeEventListener(b,C),delete this.removeTrackRemovedEventListeners[s.id]},_.addEventListener(b,C)}removeRemoteVideoTrack(s,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(s.id)){this.removeTrackRemovedEventListeners[s.id]();for(const e of this.removeVideoTrackEventListeners[s.id])e();delete this.removeVideoTrackEventListeners[s.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${s.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(s){super(s.logger),this.context=s,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},4708498556:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9447989038)),m=h(d(182939685)),a=h(d(5009059128));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return f(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>f(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=s},2635066756:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9447989038)),m=h(d(182939685)),a=h(d(5009059128));let s=r(class uS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return f(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(m.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=uS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=s,s.CHROME_VPN_TIMEOUT_MS=5e3},9488451395:function(B,l,d){"use strict";var f=this&&this.__createBinding||(Object.create?function(u,v,E,b){b===void 0&&(b=E),Object.defineProperty(u,b,{enumerable:!0,get:function(){return v[E]}})}:function(u,v,E,b){b===void 0&&(b=E),u[b]=v[E]}),h=this&&this.__setModuleDefault||(Object.create?function(u,v){Object.defineProperty(u,"default",{enumerable:!0,value:v})}:function(u,v){u.default=v}),p=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var v={};if(u!=null)for(var E in u)E!=="default"&&Object.prototype.hasOwnProperty.call(u,E)&&f(v,u,E);return h(v,u),v},m=this&&this.__awaiter||function(u,v,E,b){function _(C){return C instanceof E?C:new E(function(I){I(C)})}return r(_,"adopt"),new(E||(E=Promise))(function(C,I){function A(R){try{O(b.next(R))}catch(F){I(F)}}r(A,"fulfilled");function w(R){try{O(b.throw(R))}catch(F){I(F)}}r(w,"rejected");function O(R){R.done?C(R.value):_(R.value).then(A,w)}r(O,"step"),O((b=b.apply(u,v||[])).next())})},a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(7551081659)),n=a(d(9447989038)),e=a(d(4943767904)),t=p(d(5393388022)),i=a(d(7969706599)),o=a(d(3867485289)),c=d(4136617125),g=a(d(5009059128));let S=r(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const v=yield new Promise((E,b)=>{const _=this.context;_.turnCredentials=null;let C=r(class{cancel(){this.signalingClient.removeObserver(this),b(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(O){if(O.type===i.default.WebSocketClosed){let F=`The signaling connection was closed with code ${O.closeCode} and reason: ${O.closeReason}`;_.logger.warn(F);let V=n.default.SignalingBadRequest;O.closeCode===4410?(F="The meeting already ended.",_.logger.warn(F),V=n.default.MeetingEnded):O.closeCode>=4500&&O.closeCode<4600&&(V=n.default.SignalingInternalServerError),_.audioVideoController.handleMeetingSessionStatus(new s.default(V),new Error(F));return}if(O.type!==i.default.ReceivedSignalFrame)return;if(O.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const F=O.message.joinack;if(!F){_.audioVideoController.handleMeetingSessionStatus(new s.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(F.videoSubscriptionLimit&&(_.videoSubscriptionLimit=F.videoSubscriptionLimit),_.serverSupportsCompression=F.wantsCompressedSdp,F.defaultServerSideNetworkAdaption!==void 0&&F.defaultServerSideNetworkAdaption!==t.default.Default&&_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const V=F.defaultServerSideNetworkAdaption;_.logger.info(`Overriding server side network adaption value to ${V}`),_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(V))}F&&F.turnCredentials?(_.turnCredentials=new e.default,_.turnCredentials.username=F.turnCredentials.username,_.turnCredentials.password=F.turnCredentials.password,_.turnCredentials.ttl=F.turnCredentials.ttl,_.turnCredentials.uris=F.turnCredentials.uris.map(V=>_.meetingSessionConfiguration.urls.urlRewriter(V)).filter(V=>!!V)):_.logger.error("missing TURN credentials in JoinAckFrame");return}if(O.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const R=O.message.index;E(R)}constructor(O){this.signalingClient=O}},"IndexFrameInterceptor");const I=new C(this.context.signalingClient);this.context.signalingClient.registerObserver(I),this.taskCanceler=I,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const A=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(A.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),A.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(A.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),A.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(A)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},9638153336:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7969706599)),m=d(4136617125),a=h(d(5009059128));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=r(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(g){if(g.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}g.type===p.default.ReceivedSignalFrame&&g.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(g,S){this.signalingClient=g,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=s},7966229607:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7969706599)),m=d(4136617125),a=h(d(5009059128));let s=r(class extends a.default{run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===p.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=s},1614136239:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(b,_,C,I){function A(w){return w instanceof C?w:new C(function(O){O(w)})}return r(A,"adopt"),new(C||(C=Promise))(function(w,O){function R($){try{V(I.next($))}catch(X){O(X)}}r(R,"fulfilled");function F($){try{V(I.throw($))}catch(X){O(X)}}r(F,"rejected");function V($){$.done?w($.value):A($.value).then(R,F)}r(V,"step"),V((I=I.apply(b,_||[])).next())})},h=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6502873558)),m=h(d(6132421099)),a=h(d(5850044630)),s=h(d(4866586987)),n=h(d(174963938)),e=h(d(3334420728)),t=h(d(7551081659)),i=h(d(9447989038)),o=h(d(8804723777)),c=h(d(7969706599)),g=d(4136617125),S=h(d(4882678815)),u=d(6527539809),v=h(d(5009059128));let E=r(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(_){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(_){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=_;return}else this.pendingMetricsReport=void 0;const C=_.getObservableMetrics(),I=C.availableOutgoingBitrate,A=C.nackCountReceivedPerSecond;let w=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(_);const O=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(w=w||O,O){const R=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=R.truncate(this.context.videoSubscriptionLimit),R.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${O}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:I/1e3,nackCountPerSecond:A});const R=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();w=w||R,R&&(this.logger.info(`trigger resubscribe for up=${R}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return w}metricsDidReceive(_){if(this.checkResubscribe(_)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const C=_.streamMetricReports,I=new Map;for(const A in C)C[A].mediaType===m.default.VIDEO&&C[A].direction===p.default.DOWNSTREAM&&I.set(C[A].streamId,C[A])}connectionHealthDidChange(_){_.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,_,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,_,()=>{var C;this.context.poorConnectionCount+=1;const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("receivingAudioDropped",I),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(A=>{u.Maybe.of(A.connectionDidSuggestStopVideo).map(w=>w.bind(A)())}):this.context.audioVideoController.forEachObserver(A=>{u.Maybe.of(A.connectionDidBecomePoor).map(w=>w.bind(A)())})},()=>{this.context.audioVideoController.forEachObserver(C=>{u.Maybe.of(C.connectionDidBecomeGood).map(I=>I.bind(C)())})});for(const C of this.videoEncodingHealthPolicies)this.applyHealthPolicy(C,_,()=>{switch(this.degradeVideoCodec(C.name),C.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.context.isSessionConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,_,()=>{var C;const I=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioFailed",I)},()=>{var C;const I=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioRecovered",I)})}applyHealthPolicy(_,C,I,A){_.update(C);const w=_.healthIfChanged();w!==null&&(this.logger.info(`${_.name} value is now ${w}`),w<=_.minimumHealth()?u.Maybe.of(I).map(O=>O.bind(this)()):u.Maybe.of(A).map(O=>O.bind(this)()))}handleBitrateFrame(_){this.currentAvailableStreamAvgBitrates=_,_.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${_.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",_.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(_){var C;if(_.type===c.default.WebSocketClosed&&this.isUnexpectedWebsocketCloseCode(_.closeCode)||_.type===c.default.WebSocketError||_.type===c.default.WebSocketFailed){if(_.type===c.default.WebSocketClosed&&this.context.logger.info(`The signaling connection was closed with code ${_.closeCode} and reason: ${_.closeReason}`),!this.hasSignalingError){const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("signalingDropped",I),this.hasSignalingError=!0}this.context.isSessionConnected&&this.context.audioVideoController.handleMeetingSessionStatus(new t.default(this.isInternalServerFailureCloseCode(_.closeCode)?i.default.SignalingInternalServerError:i.default.SignalingChannelClosedUnexpectedly),null)}else _.type===c.default.WebSocketOpen&&(this.hasSignalingError=!1);if(_.type===c.default.ReceivedSignalFrame){if(_.message.type===g.SdkSignalFrame.Type.NOTIFICATION){switch(_.message.notification.level){case g.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${_.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${_.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${_.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${_.message.notification.level}: ${_.message.notification.message}`);break}return}if(_.message.bitrates){const A=_.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(A),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(_.message.bitrates)}const I=t.default.fromSignalFrame(_.message);_.message.type!==g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&I.statusCode()!==i.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(I,null)}}isUnexpectedWebsocketCloseCode(_){return _===1006||this.isInternalServerFailureCloseCode(_)}isInternalServerFailureCloseCode(_){return _>=4500&&_<4600}degradeVideoCodec(_){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const C=[];for(const I of this.context.videoSendCodecPreferences)I.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||C.push(I);C.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${C[0].codecName} due to ${_}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=C,this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(I=>I.codecName).join(",")}`)}}constructor(_,C,I){super(_.logger),this.context=_,this.initialConnectionHealthData=I,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=A=>{const w=A<1,O=this.prevSignalStrength<1,R=w?O?null:S.default.RedmicStartLoss:O?S.default.RedmicEndLoss:null;R&&this.context.statsCollector.logAudioEvent(R),this.prevSignalStrength=A},this.realtimeFatalErrorCallback=A=>{this.logger.error(`realtime error: ${A}: ${A.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.RealtimeApiFailed),A)},this.realtimeAttendeeIdPresenceHandler=(A,w)=>{var O;const R=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${R}`),R===A&&w&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(O=this.context.eventController)===null||O===void 0||O.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:A,startTimeMs:w,iceGatheringDurationMs:O,attendeePresenceDurationMs:R,meetingStartDurationMs:F}=this.context;return{meetingDurationMs:w===null?0:Math.round(Date.now()-w),signalingOpenDurationMs:A,iceGatheringDurationMs:O,attendeePresenceDurationMs:R,meetingStartDurationMs:F}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const A=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},A),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},C),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new s.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone());for(const A of C.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new A(Object.assign({},C),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=E},5628139313:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(h){}},"NoOpTask");l.default=d},7537135456:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1370928943)),p=f(d(9649641385));let m=r(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const s of this.dependencies)s.cancel();this.logger.info(`Canceling ${this.name()}`),p.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&p.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const s=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${s}`)}run(){if(this.promise)return this.promise;const s=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=s.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(s){this.task.setParent(s)}constructor(s,n,e){this.logger=s,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=m},3292077469:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7263318766)),m=h(d(7969706599)),a=h(d(5009059128));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new p.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let c=r(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(u){switch(u.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(u){this.signalingClient=u}},"WebSocketOpenInterceptor");const g=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(g),this.taskCanceler=g})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=s},6085879951:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5009059128));let m=r(class extends p.default{cancel(){for(const s of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${s.name()}`),s.cancel()}run(){return f(this,void 0,void 0,function*(){const s=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),s.push(e.run());const n=[];for(let e=0;e<s.length;e++){try{yield s[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(s,n,e){super(s),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=m},9588672479:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(e,t,i,o){function c(g){return g instanceof i?g:new i(function(S){S(g)})}return r(c,"adopt"),new(i||(i=Promise))(function(g,S){function u(b){try{E(o.next(b))}catch(_){S(_)}}r(u,"fulfilled");function v(b){try{E(o.throw(b))}catch(_){S(_)}}r(v,"rejected");function E(b){b.done?g(b.value):c(b.value).then(u,v)}r(E,"step"),E((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(3305135794),m=h(d(7969706599)),a=d(4136617125),s=h(d(5009059128));let n=r(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=r(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===m.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(p.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,u,v){this.signalingClient=S,this.completionCallback=u,this.logger=v}},"Interceptor");const c=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=n},9531998674:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5009059128));let m=r(class extends p.default{run(){var s,n;return f(this,void 0,void 0,function*(){if(!(!((n=(s=this.context.meetingSessionConfiguration)===null||s===void 0?void 0:s.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(s){super(s.logger),this.context=s,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=m},587698570:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7969706599)),m=d(4136617125),a=h(d(5009059128));let s=r(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return f(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const i of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(i);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${i}`);continue}let c=this.context.videoTileController.getVideoTileForAttendeeId(o);c===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${i}. Creating new one.`),c=this.context.videoTileController.addVideoTile(),c.bindVideoStream(o,!1,null,0,0,0,null)),t.add(c.id())}this.serverPausedVideoTileIds.forEach(i=>{t.has(i)||this.serverPausedVideoTileIds.delete(i)})}handleSignalingClientEvent(e){if(e.type!==p.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.logger.info(`Received new ${i===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(c=>{const g=this.context.videoStreamIndex.attendeeIdForGroupId(c);if(g.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${c}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(g)});for(const c of o)c!==void 0&&(i===m.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=s},86955145:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8006173476)),m=d(4136617125),a=h(d(5009059128));let s=r(class extends a.default{checkAndApplyVideoConstraint(e,t,i,o,c){return f(this,void 0,void 0,function*(){const g=e?this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution;if(!e&&i<=g.videoWidth&&o<=g.videoHeight&&c<=g.videoFrameRate)return;const S={resizeMode:{ideal:"none"},width:{max:g.videoWidth},height:{max:g.videoHeight},frameRate:{ideal:c,max:g.videoFrameRate}};try{yield t.applyConstraints(S)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}})}run(){return f(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,g=new p.default(c).hasModality(p.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(g,o[0],S.width,S.height,S.frameRate);const u=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,i,S.width,S.height,null,u);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=s},8297256329:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(o,c,g,S){function u(v){return v instanceof g?v:new g(function(E){E(v)})}return r(u,"adopt"),new(g||(g=Promise))(function(v,E){function b(I){try{C(S.next(I))}catch(A){E(A)}}r(b,"fulfilled");function _(I){try{C(S.throw(I))}catch(A){E(A)}}r(_,"rejected");function C(I){I.done?v(I.value):u(I.value).then(b,_)}r(C,"step"),C((S=S.apply(o,c||[])).next())})},h=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(488357679)),m=h(d(8006173476)),a=h(d(8804723777)),s=h(d(7969706599)),n=d(4136617125),e=d(6527539809),t=h(d(5009059128));let i=r(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return f(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==s.default.ReceivedSignalFrame||c.message.type!==n.SdkSignalFrame.Type.INDEX)return;const g=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(g)}`),this.handleIndexFrame(g)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const g=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(_=>{const C=new m.default(_.attendeeId);return!(C.base()===g&&C.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:u,videoUplinkBandwidthPolicy:v}=this.context,E=S.allVideoSendingSourcesExcludingSelf(g);S.integrateIndexFrame(c),u.updateIndex(S),v.updateIndex(S),this.resubscribe(u,v),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const b=S.allVideoSendingSourcesExcludingSelf(g);this.areVideoSourcesEqual(E,b)||this.context.audioVideoController.forEachObserver(_=>{e.Maybe.of(_.remoteVideoSourcesDidChange).map(C=>C.bind(_)(b))})}areVideoSourcesEqual(c,g){if(c.length!==g.length)return!1;const S=r((E,b)=>E.attendee.attendeeId.localeCompare(b.attendee.attendeeId),"compare"),u=[...c].sort(S),v=[...g].sort(S);for(let E=0;E<u.length;E++)if(u[E].attendee.attendeeId!==v[E].attendee.attendeeId)return!1;return!0}resubscribe(c,g){const S=c.wantsResubscribe(),u=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&g.wantsResubscribe(),v=S||u;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${u})`),!v)return;const E=c.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=g.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${u} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const g=new p.default;g.remoteVideoAvailable=!this.context.videosToReceive.empty(),g.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(g))&&(this.context.lastKnownVideoAvailability=g.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(u=>u.bind(S)(g.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const g=[];let S=!1;for(const u of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>u.equals(v))){this.logger.info(`Skipping ${u.codecName} since the codec has been identfied as degraded`);continue}for(const v of c.supportedReceiveCodecIntersection)if(u.equals(a.default.fromSignaled(v))){g.push(u);break}}if(g.length>0){const u=g.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(E=>v.equals(E)));this.context.currentVideoSendCodec!==void 0&&(u===void 0||!this.context.currentVideoSendCodec.equals(u))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=g}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const g of this.context.videoTileController.getAllVideoTiles()){const S=g.state();c.contain(S.streamId)?g.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):g.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=i},457099596:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5009059128));let p=r(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,s,n="RunnableTask"){super(a),this.fn=s,this.taskName=n}},"RunnableTask");l.default=p},7680112541:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(e,t,i,o){function c(g){return g instanceof i?g:new i(function(S){S(g)})}return r(c,"adopt"),new(i||(i=Promise))(function(g,S){function u(b){try{E(o.next(b))}catch(_){S(_)}}r(u,"fulfilled");function v(b){try{E(o.throw(b))}catch(_){S(_)}}r(v,"rejected");function E(b){b.done?g(b.value):c(b.value).then(u,v)}r(E,"step"),E((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9091803745)),m=h(d(7969706599)),a=d(4136617125),s=h(d(5009059128));let n=r(class Nh extends s.default{run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new p.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!Nh.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>Nh.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,c)=>{if(this.context.signalingClient.ready()){let g;o instanceof Uint8Array?g=o:typeof o=="string"?g=new TextEncoder().encode(o):g=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,g,c);const S=a.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=c,S.data=g;const u=a.SdkDataMessageFrame.create();u.messages=[S],this.context.signalingClient.sendDataMessage(u)}else this.context.logger.error("Cannot send data message because signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},8872868578:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5009059128)),m=h(d(6013191119));let a=r(class extends p.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return f(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");l.default=a},5976676062:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5546774952)),m=h(d(182939685)),a=h(d(5009059128));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return f(this,void 0,void 0,function*(){const e=this.context.peer;let i=this.context.sdpOfferInit.sdp;if(this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(i=new m.default(i).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(i=new m.default(i).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new p.default().requiresDisablingH264Encoding()&&(i=new m.default(i).removeH264SupportFromSendSection().sdp),i=new m.default(i).withStartingVideoSendBitrate(1e3).sdp,this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(i=new m.default(i).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(i=new m.default(i).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(i=new m.default(i).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const c=new m.default(i).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(c)}this.logger.debug(()=>`local description is >>>${i}<<<`);const o={type:"offer",sdp:i,toJSON:null};yield new Promise((c,g)=>f(this,void 0,void 0,function*(){this.cancelPromise=S=>{g(S)};try{yield e.setLocalDescription(o),c()}catch(S){g(S)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(e){super(e.logger),this.context=e,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=s},339097629:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(e,t,i,o){function c(g){return g instanceof i?g:new i(function(S){S(g)})}return r(c,"adopt"),new(i||(i=Promise))(function(g,S){function u(b){try{E(o.next(b))}catch(_){S(_)}}r(u,"fulfilled");function v(b){try{E(o.throw(b))}catch(_){S(_)}}r(v,"rejected");function E(b){b.done?g(b.value):c(b.value).then(u,v)}r(E,"step"),E((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8006173476)),m=h(d(182939685)),a=h(d(8804723777)),s=h(d(5009059128));let n=r(class extends s.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return f(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new m.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new m.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new m.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new m.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new m.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const c=this.context.activeVideoInput;if(c!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,u=new p.default(S).hasModality(p.default.MODALITY_CONTENT),v=c.getVideoTracks()[0];u&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const g={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(g)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>f(this,void 0,void 0,function*(){const c=r(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(g){o(g)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=n},3248483798:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(S,u,v,E){function b(_){return _ instanceof v?_:new v(function(C){C(_)})}return r(b,"adopt"),new(v||(v=Promise))(function(_,C){function I(O){try{w(E.next(O))}catch(R){C(R)}}r(I,"fulfilled");function A(O){try{w(E.throw(O))}catch(R){C(R)}}r(A,"rejected");function w(O){O.done?_(O.value):b(O.value).then(I,A)}r(w,"step"),w((E=E.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7551081659)),m=h(d(9447989038)),a=h(d(182939685)),s=h(d(3475297719)),n=d(5393388022),e=h(d(7969706599)),t=h(d(3735795291)),i=d(4136617125),o=d(8071414974),c=h(d(5009059128));let g=r(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){let u="";if(this.context.peer&&this.context.peer.localDescription&&(u=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let w=0,O=0;this.context.videoCaptureAndEncodeParameter&&(w=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),O=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const R={rid:"hi",maxBitrate:O*1e3,maxFramerate:w,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([R])}const v=this.fixUpSubscriptionOrder(u,this.context.videoSubscriptions),E=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let b,_=u;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(_=new a.default(_).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const w=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";b=this.textCompressor.compress(_,w),this.context.logger.info(`Compressed the SDP message from ${_.length} to ${b.length} bytes.`),u=""}this.context.previousSdpOffer=new a.default(u);const C=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,u,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,b);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(C.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(w=>w===0?0:this.context.videoStreamIndex.groupIdForStreamId(w)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(C)}`),this.context.signalingClient.subscribe(C);const I=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(I)}`);let A="";I.compressedSdpAnswer&&I.compressedSdpAnswer.length?(A=this.textCompressor.decompress(I.compressedSdpAnswer,this.context.previousSdpAnswerAsString),A.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${I.compressedSdpAnswer.length} to ${A.length} bytes.`),this.context.sdpAnswer=A):this.context.sdpAnswer=I.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(I)})}fixUpSubscriptionOrder(u,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const E=new Map;for(const C of v){const I=this.context.transceiverController.getMidForStreamId(C);if(I===void 0){C!==0&&this.logger.warn(`Could not find MID for stream ID: ${C}`);continue}E.set(I,C)}const b=new a.default(u).mediaSections(),_=[];for(const C of b)if(C.mediaType==="video")if(C.direction==="recvonly"){const I=E.get(C.mid);if(I===void 0){this.logger.warn(`Could not find stream ID for MID: ${C.mid}`);continue}_.push(I)}else _.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(_)} (may be same))}`),_}receiveSubscribeAck(){return new Promise((u,v)=>{const E=this.context;let b=r(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(I){if(I.isConnectionTerminated()){const w=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${I.closeCode} and reason: ${I.closeReason}`;E.logger.warn(w);let O=m.default.TaskFailed;I.closeCode>=4500&&I.closeCode<4600&&(O=m.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new p.default(O),new Error(w));return}if(I.type!==e.default.ReceivedSignalFrame||I.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const A=I.message.suback;u(A)}constructor(I){this.signalingClient=I}},"Interceptor");const _=new b(this.context.signalingClient);this.context.signalingClient.registerObserver(_),this.taskCanceler=_})}constructor(u){super(u.logger),this.context=u,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new s.default(u.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=g},6013191119:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.IDLE="IDLE",f.RUNNING="RUNNING",f.CANCELED="CANCELED",f.FINISHED="FINISHED"})(d||(d={})),l.default=d},7638277718:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5824864644)),m=h(d(5009059128));let a=r(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return f(this,void 0,void 0,function*(){const n=new p.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},4098780146:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9447989038)),m=h(d(5009059128));let a=r(class extends m.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return f(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=r((o,c,g,S,u)=>{n===o&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},2392158736:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(t,i,o,c){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(_){try{b(c.next(_))}catch(C){u(C)}}r(v,"fulfilled");function E(_){try{b(c.throw(_))}catch(C){u(C)}}r(E,"rejected");function b(_){_.done?S(_.value):g(_.value).then(v,E)}r(b,"step"),b((c=c.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5983965185)),m=h(d(3237015968)),a=h(d(3937896393)),s=h(d(9337558969)),n=h(d(9649641385));let e=r(class{setEncodingParameters(i){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const c=Array.from(i.values()),g=o.getParameters();if(!g.encodings||g.encodings.length===0)g.encodings=c;else for(const S of g.encodings)for(const u of c){if((S.rid||u.rid)&&S.rid!==u.rid)continue;let v;for(v in u)v==="rid"||v==="codecPayloadType"||u.hasOwnProperty(v)&&(S[v]=u[v])}yield o.setParameters(g)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const c=o.getParameters();c.encodings||(c.encodings=[{}]);for(const g of c.encodings)g.maxBitrate=i*1e3;yield o.setParameters(c)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return f(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return f(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return f(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(c,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,c){const g=c.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,g)):i.length!==0&&this.updateTransceiverWithStop(i,o,g);for(const S of g){const u=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,u),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),u),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${u.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,c){let g=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let u=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[E,b]of c.entries())if(o.StreamIdsInSameGroup(v,b)){S.direction="recvonly",this.videoSubscriptions[g]=b,u=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(b,S),c.splice(E,1);break}}if(!u){this.videoSubscriptions[g]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[E,b]of this.streamIdToTransceiver.entries())S.mid===b.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(o.groupIdForStreamId(E)))}g+=1}}updateTransceiverWithoutStop(i,o,c){let g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[g]=0,S.direction!=="inactive"){const u=o.streamIdForTrack("v_"+S.mid);if(u!==void 0){for(const[v,E]of c.entries())if(o.StreamIdsInSameGroup(u,E)){S.direction="recvonly",this.videoSubscriptions[g]=E,this.streamIdToTransceiver.delete(u),this.streamIdToTransceiver.set(E,S),c.splice(v,1);break}}}g+=1}g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&c.length>0){S.direction="recvonly";const u=c.shift();this.videoSubscriptions[g]=u,this.streamIdToTransceiver.set(u,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(u),S)}else if(this.videoSubscriptions[g]===0){S.direction="inactive";for(const[u,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(u),this.groupIdToTransceiver.delete(o.groupIdForStreamId(u)))}g+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[c,g]of this.streamIdToTransceiver.entries())if(g.mid===i){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(o,g);return}}getMidForGroupId(i){var o,c;return(c=(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid)!==null&&c!==void 0?c:void 0}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(i+=`transceiver index=${o} mid=${c.mid} subscription=${this.videoSubscriptions[o]} direction=${c.direction}
`,o+=1);return i}setTransceiverInput(i,o){return f(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new p.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const c=!!window.RTCRtpScriptTransform,g=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(g)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([s.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const u=new m.default;u.currentTimestampMs=Date.now(),u.ssrc=S.data.ssrc,u.totalAudioPacketsLost=S.data.totalAudioPacketsLost,u.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,u.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,u.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(u)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(g){const S=this._localAudioTransceiver.sender.createEncodedStreams(),u=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:u},[S.readable,S.writable,u.readable,u.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var c;const g=this.peer.addTransceiver(i,o);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return g;const S=!!window.RTCRtpScriptTransform,u=!!RTCRtpSender.prototype.createEncodedStreams;if(S)g.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),g.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(u){const v=g.sender.createEncodedStreams(),E=g.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:E},[v.readable,v.writable,E.readable,E.writable])}return g}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker.terminate(),this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,c=i.getRTCStatsReport();let g=0,S=0,u=0;c.forEach(I=>{I.kind==="audio"&&(I.type==="outbound-rtp"?S=I.packetsSent:I.type==="remote-inbound-rtp"&&(g=I.timestamp,u=I.packetsLost))}),(this.audioMetricsHistory.length===0||g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:g,totalPacketsSent:S,totalPacketsLost:u}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),b=Math.max(v,E),[_,C]=a.default.getNumRedundantEncodingsForPacketLoss(b);if(C){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const I=o-this.lastAudioRedTurnOffTimestampMs,A=o-this.lastHighPacketLossEventTimestampMs;if(I>=this.audioRedPacketLossLongEvalPeriodMs&&A<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,_)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:_})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,g=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const u=g-this.audioMetricsHistory[S].totalPacketsLost,v=c-this.audioMetricsHistory[S].totalPacketsSent,E=100*(u/v);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,c){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},8213452704:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(372560720));let m=r(class yu extends p.default{setEncodingParameters(s){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===p.default.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===p.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(s,n,e){super(s,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<yu.NAME_ARR_ASCENDING.length;i++){const o=yu.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:yu.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},372560720:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(2392158736));let m=r(class ta extends p.default{setEncodingParameters(s){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===ta.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(ta.LOW_LEVEL_NAME),i),i.rid===ta.MID_LEVEL_NAME&&this.copyEncodingParams(s.get(ta.MID_LEVEL_NAME),i),i.rid===ta.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(ta.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(s){return f(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var s,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(s=this.meetingSessionContext)===null||s===void 0?void 0:s.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(s,n){n.active=s.active,n.maxBitrate=s.maxBitrate,n.scaleResolutionDownBy=s.scaleResolutionDownBy,n.maxFramerate=s.maxFramerate}constructor(s,n,e){super(s,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<ta.NAME_ARR_ASCENDING.length;i++){const o=ta.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:ta.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},161472916:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(2392158736));let p=r(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,s,n){super(a,s,n)}},"VideoOnlyTransceiverController");l.default=p},6391477986:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const f=d(4497810965);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=r(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const s of f.TranscriptEventConverter.from(a))for(const n of this.transcriptEventCallbacks)n(s)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},4042214483:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Transcript");l.default=d},8928051514:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptAlternative");l.default=d},3886666628:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptEntity");l.default=d},4497810965:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=d(4136617125),p=f(d(4042214483)),m=f(d(2832046333)),a=f(d(8532168277)),s=f(d(2855080400)),n={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=r(class{static from(i){let o;try{o=h.SdkTranscriptFrame.decode(i.data)}catch(g){throw new Error("Cannot decode transcript data message: "+g)}const c=[];for(const g of o.events)if(g.status){const S=n[g.status.type];if(!S)continue;const u=new m.default;u.type=S,u.eventTimeMs=g.status.eventTime,u.transcriptionRegion=g.status.transcriptionRegion,u.transcriptionConfiguration=g.status.transcriptionConfiguration,g.status.message&&(u.message=g.status.message),c.push(u)}else if(g.transcript){const S=new p.default;S.results=[];for(const u of g.transcript.results){const v={channelId:u.channelId,isPartial:u.isPartial,resultId:u.resultId,startTimeMs:u.startTime,endTimeMs:u.endTime,alternatives:[]};if(u.languageCode&&(v.languageCode=u.languageCode),u.languageIdentification&&u.languageIdentification.length>0){v.languageIdentification=[];for(const E of u.languageIdentification){const b={languageCode:E.languageCode,score:E.score};v.languageIdentification.push(b)}}for(const E of u.alternatives){const b={items:[],transcript:E.transcript};for(const _ of E.items){const C={content:_.content,attendee:{attendeeId:_.speakerAttendeeId,externalUserId:_.speakerExternalUserId},startTimeMs:_.startTime,endTimeMs:_.endTime,type:null};switch(_.vocabularyFilterMatch&&(C.vocabularyFilterMatch=_.vocabularyFilterMatch),_.hasOwnProperty("stable")&&(C.stable=_.stable),_.hasOwnProperty("confidence")&&(C.confidence=_.confidence),_.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:C.type=s.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:C.type=s.default.PUNCTUATION;break}b.items.push(C)}for(const _ of E.entities){b.entities||(b.entities=[]);const C={category:_.category,confidence:_.confidence,content:_.content,startTimeMs:_.startTime,endTimeMs:_.endTime};_.type&&(C.type=_.type),b.entities.push(C)}v.alternatives.push(b)}S.results.push(v)}c.push(S)}return c}},"TranscriptEventConverter");l.TranscriptEventConverter=e},6128278192:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptItem");l.default=d},2855080400:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.PRONUNCIATION="pronunciation",f.PUNCTUATION="punctuation"})(d||(d={})),l.default=d},2600940909:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptLanguageWithScore");l.default=d},3373821534:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptResult");l.default=d},2832046333:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptionStatus");l.default=d},8532168277:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.STARTED="started",f.INTERRUPTED="interrupted",f.RESUMED="resumed",f.STOPPED="stopped",f.FAILED="failed"})(d||(d={})),l.default=d},3894274294:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(3277712452),p=f(d(6885109343));let m=r(class vl{getParserResult(){var s,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((s=this.parserResult)===null||s===void 0?void 0:s.os.name)||vl.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||vl.UNAVAILABLE,sdkVersion:p.default.sdkVersion,sdkName:p.default.sdkName}}constructor(s){var n,e,t,i,o,c,g;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(S){s.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||vl.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||vl.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||vl.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((g=this.parserResult)===null||g===void 0?void 0:g.device.model)||""].join(" ").trim()||vl.UNAVAILABLE}},"DefaultUserAgentParser");l.default=m,m.UNAVAILABLE="Unavailable"},3054351868:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{add(h){return new Promise((p,m)=>{this.queue=this.queue.then(h).then(p).catch(m)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=d},6527539809:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let d=r(class{static of(m){return m==null?h.of():f.of(m)}},"Maybe");l.Maybe=d;let f=r(class fS{map(m){return d.of(m(this.value))}flatMap(m){return m(this.value)}get(){return this.value}getOrElse(m){return this.value}defaulting(m){return d.of(this.getOrElse(m))}static of(m){if(m==null)throw new Error("value is ${value}");return new fS(m)}constructor(m){this.value=m,this.isSome=!0,this.isNone=!1}},"Some");l.Some=f;let h=r(class Eu{get(){throw new Error("value is null")}getOrElse(m){return m}map(m){return new Eu}flatMap(m){return new Eu}defaulting(m){return d.of(this.getOrElse(m))}static of(){return new Eu}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=h},5685319565:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0}),l.iterateEvery=l.SuppressedError=l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=f(d(6885109343));function p(o){return new Promise(c=>setTimeout(c,o))}r(p,"wait"),l.wait=p;function m(){var o;try{return((o=window.frameElement)===null||o===void 0?void 0:o.nodeName)==="IFRAME"||parent!==top}catch{return!0}}r(m,"isIFramed"),l.isIFramed=m;function a(o){return o===null?null:typeof o!="object"?o:Array.isArray(o)?o.map(a):Object.keys(o).reduce((c,g)=>{const S=o[g],u=typeof S=="object"?a(S):S;return c[g.toLowerCase()]=u,c},{})}r(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function s(){const o=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${o.major}.${o.minor}`}}r(s,"getDefaultAssetSpec"),l.getDefaultAssetSpec=s;function n(o){const c=Math.abs(o),g=o<=0?"+":"-",S=Math.floor(c/60).toString().padStart(2,"0"),u=Math.floor(c%60).toString().padStart(2,"0");return`${g}${S}:${u}`}r(n,"getFormattedOffset"),l.getFormattedOffset=n;function e(o){try{window.crypto.getRandomValues(o)}catch{new DataView(o.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}r(e,"getRandomValues"),l.getRandomValues=e;let t=r(class extends Error{constructor(c,g,S){var u;super(S??`${(u=c==null?void 0:c.message)!==null&&u!==void 0?u:c}`),this.error=c,this.suppressed=g}},"SuppressedError");l.SuppressedError=t;function i(o,c){if(!o)return;let g;for(const S of o)try{c(S)}catch(u){g=new t(u,g)}if(g)throw g}r(i,"iterateEvery"),l.iterateEvery=i},6885109343:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5546774952)),p=f(d(5554749645));let m=r(class uc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return p.default.semverString}static get sdkVersionSemVer(){var s,n,e,t;const i=p.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(s=i==null?void 0:i.groups)===null||s===void 0?void 0:s.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return p.default.hash.substring(1)}static get sdkUserAgentLowResolution(){const s=new h.default;return`${s.name()}-${s.majorVersion()}`}static urlWithVersion(s){const n=new URL(s);return n.searchParams.append(uc.X_AMZN_VERSION,uc.sdkVersion),n.searchParams.append(uc.X_AMZN_USER_AGENT,uc.sdkUserAgentLowResolution),n.toString()}},"Versioning");l.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},5554749645:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"55eb4ca",raw:"v3.27.0",semverString:"3.27.0"}},1695739824:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class hS{equal(h){let p=h.captureWidth()===this.cameraWidth&&h.captureHeight()===this.cameraHeight&&h.captureFrameRate()===this.cameraFrameRate&&h.encodeBitrates().length===this.encodeBitrates().length&&h.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&h.encodeWidths().length===this.encodeWidths().length&&h.encodeHeights().length===this.encodeHeights().length&&h.isSVCEncoding()===this.isSVC;if(p){for(let m=0;m<h.encodeWidths().length;m++)if(h.encodeWidths()[m]!==this.encodeWidths()[m]||h.encodeHeights()[m]!==this.encodeHeights()[m]||h.encodeBitrates()[m]!==this.encodeBitrates()[m]||h.encodeScaleResolutionDownBy()[m]!==this.encodeScaleResolutionDownBy()[m])return p=!1,p}return p}clone(){return new hS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(h,p,m,a,s,n=1,e=!1){this.cameraWidth=h,this.cameraHeight=p,this.cameraFrameRate=m,this.maxEncodeBitrateKbps=a,this.isSimulcast=s,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=d},9677745702:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1865309432));let p=r(class pS{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const s=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return s;const n=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const c of t)n.contain(c.streamId)&&i.set(c.attendeeId,c);let o=0;for(const c of e){const g=c.attendee.attendeeId;if(i.has(g)){const S=i.get(g);if(o+S.maxBitrateKbps<=pS.maxReceiveBitrateKbps)s.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return s}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=p,p.maxReceiveBitrateKbps=15e3},681222244:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1865309432));let p=r(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=p},2178339051:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var d;(function(f){f[f.Low=0]="Low",f[f.Medium=1]="Medium",f[f.High=2]="High",f[f.Maximum=3]="Maximum"})(d=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=d},3368465086:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(805846668)),p=f(d(5393388022)),m=f(d(3803169181)),a=d(8071414974),s=f(d(8681774825)),n=f(d(3348721919));let e=r(class mS extends s.default{static createConfig(){const i=new n.default;return i.serverSideNetworkAdaption=p.default.None,i}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(i){super.updateIndex(i);const o=a.VideoPreferences.prepare();let c=!1;const g=i.remoteStreamDescriptions();for(const S of g)o.some(u=>u.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(h.default.Modality)?(o.add(new m.default(S.attendeeId,1)),c=!0):o.add(new m.default(S.attendeeId,2)));c?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(i){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(i){super(i,mS.createConfig()),this.logger=i,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},3803169181:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(2178339051)),p=f(d(4829581265));let m=r(class wd{partialCompare(s){return this.priority-s.priority}equals(s){return this.attendeeId===s.attendeeId&&this.targetSize===s.targetSize&&this.priority===s.priority&&this.degradationPreference===s.degradationPreference}clone(){return new wd(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(s){switch(s){case h.default.Maximum:return wd.MAXIMUM_BITRATE_KBPS;case h.default.High:return wd.HIGH_BITRATE_KBPS;case h.default.Medium:return wd.MID_BITRATE_KBPS;case h.default.Low:return wd.LOW_BITRATE_KBPS}}constructor(s,n,e,t){this.attendeeId=s,this.priority=n,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:p.default.Balanced}},"VideoPreference");l.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},8071414974:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=f(d(4804743313));function p(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,c=new Map,g=new Map;for(const S of t){const u=e.transceiverController.getMidForGroupId(S);if(u===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);c.set(v,u),g.set(v,S)}for(const S of i){const u=new h.default,v=c.get(S.attendeeId);v!==void 0&&(u.mid=v,u.attendeeId=S.attendeeId,u.groupId=g.get(S.attendeeId),u.priority=Number.MAX_SAFE_INTEGER-S.priority,u.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),u.qualityAdaptationPreference=S.degradationPreference,o.push(u))}return o}r(p,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=p;let m=r(class Lh{static default(){return new Lh([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new Lh([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=r(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),s=r(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=s;let n=r(class Fh{static prepare(){return new s(new a)}static default(){return new Fh(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new s(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Fh.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=n,l.default=n},8681774825:function(B,l,d){"use strict";var f=this&&this.__createBinding||(Object.create?function(I,A,w,O){O===void 0&&(O=w),Object.defineProperty(I,O,{enumerable:!0,get:function(){return A[w]}})}:function(I,A,w,O){O===void 0&&(O=w),I[O]=A[w]}),h=this&&this.__setModuleDefault||(Object.create?function(I,A){Object.defineProperty(I,"default",{enumerable:!0,value:A})}:function(I,A){I.default=A}),p=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var A={};if(I!=null)for(var w in I)w!=="default"&&Object.prototype.hasOwnProperty.call(I,w)&&f(A,I,w);return h(A,I),A},m=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(d(9898009183)),s=m(d(6502873558)),n=m(d(6132421099)),e=m(d(805846668)),t=d(1370928943),i=p(d(5393388022)),o=m(d(8050111605)),c=m(d(1865309432)),g=m(d(9677745702)),S=m(d(2178339051)),u=m(d(3803169181)),v=d(8071414974),E=m(d(3348721919)),b=m(d(4829581265));let _=r(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),C=r(class So{reset(){this.allHighestPolicy=new g.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=So.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=So.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new _,this.prevDownlinkStats=new _,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(A){this.tileController=A,this.logger.info("tileController bound")}setWantsResubscribeObserver(A){this.wantsResubscribeObserver=A}chooseRemoteVideoSources(A){var w;if(!(!((w=this.videoPreferences)===null||w===void 0)&&w.equals(A))){if(this.videoPreferences=A==null?void 0:A.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const O=new Array;for(const R of this.videoPreferences){const F=new o.default;F.attendee=new a.default,F.attendee.attendeeId=R.attendeeId,O.push(F)}this.allHighestPolicy.chooseRemoteVideoSources(O);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(A)}`)}}updateIndex(A){this.videoIndex=A,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(A),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const A=new Set;for(const F of this.videoIndex.remoteStreamDescriptions())A.add(F.attendeeId);const w=v.VideoPreferences.prepare(),O=A.size;let R=S.default.Maximum;O>8?R=S.default.Low:O>4&&(R=S.default.Medium);for(const F of A)w.add(new u.default(F,1,R));this.defaultVideoPreferences=w.build()}updateMetrics(A){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new _;const w=A.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=w.availableIncomingBitrate/1e3;for(const O in A.streamMetricReports){const R=Number.parseInt(O,10),F=A.streamMetricReports[R];F.direction===s.default.DOWNSTREAM&&F.mediaType===n.default.VIDEO&&(F.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=A.countPerSecond("nackCount",R)),F.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=A.countPerSecond("packetsLost",R)),F.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=A.bitsPerSecond("bytesReceived",R)/1e3))}}wantsResubscribe(){let A=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(A||(A=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?A||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),A||(A=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),A)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(A){this.observerQueue.add(A)}removeObserver(A){this.observerQueue.delete(A)}forEachObserver(A){for(const w of this.observerQueue)A(w)}setVideoPriorityBasedPolicyConfigs(A){this.videoPriorityBasedPolicyConfig=A}calculateOptimalReceiveStreams(){var A;const w=[],O=this.videoIndex.remoteStreamDescriptions();if(O.length===0||!((A=this.videoPreferences)===null||A===void 0)&&A.isEmpty()){this.optimalReceiveStreams=[];return}const R=this.rateProbeState;this.cleanBwPausedTiles(O),this.handleAppPausedStreams(w,O);const F=new Map;for(const Ge of this.getCurrentVideoPreferences())F.set(Ge.attendeeId,Ge);const V=O.filter(Ge=>F.has(Ge.attendeeId)),$=!this.streamsWithPreferenceDidChange(V),X=!this.startupPeriod&&$;if(X&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;V.sort((Ge,it)=>Ge.maxBitrateKbps===it.maxBitrateKbps?Ge.streamId-it.streamId:Ge.maxBitrateKbps-it.maxBitrateKbps);for(const Ge of V)(Ge.avgBitrateKbps===0||Ge.avgBitrateKbps>Ge.maxBitrateKbps)&&(Ge.attendeeId.endsWith(e.default.Modality)&&Ge.maxBitrateKbps<100?Ge.maxBitrateKbps=Ge.avgBitrateKbps:Ge.avgBitrateKbps=Ge.maxBitrateKbps);const Y=new Set;for(const Ge of this.getCurrentVideoPreferences()){const it=V.filter(xe=>xe.attendeeId===Ge.attendeeId);if(it.length<3)continue;let Dt=15,wt=320*480;it.forEach(xe=>{Dt=Math.max(Dt,xe.maxFrameRate),wt=Math.max(wt,xe.totalPixels())}),it.sort((xe,et)=>{if(Ge.degradationPreference===b.default.MaintainResolution)return Math.abs(xe.maxFrameRate-et.maxFrameRate)<2?xe.totalPixels()-et.totalPixels():xe.maxFrameRate-et.maxFrameRate;if(Ge.degradationPreference===b.default.MaintainFramerate)return xe.totalPixels()===et.totalPixels()?xe.maxFrameRate-et.maxFrameRate:xe.totalPixels()-et.totalPixels();{const Ft=r(Gt=>Gt.avgBitrateKbps*Math.pow(2,5*Gt.maxFrameRate/Dt*Math.pow(4,Gt.totalPixels()/wt)),"weighByFramerate");return Ft(xe)-Ft(et)}});let Pe;for(const xe of it){if(Pe!==void 0&&(xe.maxFrameRate<Pe.maxFrameRate&&Math.abs(Pe.maxFrameRate-xe.maxFrameRate)>2||xe.totalPixels()<Pe.totalPixels())){Y.add(xe.streamId);continue}Pe=xe}}const ne=V.filter(Ge=>!Y.has(Ge.streamId));this.logger.info(`Filtered to ${JSON.stringify(ne)}`);const ie={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ie.targetDownlinkBitrate=this.determineTargetRate();const ge=this.subscribedReceiveSet.size(),Ie=this.downlinkStats.bandwidthEstimateKbps,We=!this.videoPriorityBasedPolicyConfig.allowSubscribe(ge,Ie);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=So.MIN_TIME_BETWEEN_SUBSCRIBE_MS,X&&We))return;const ct=this.priorityPolicy(ie,ne,w),Ae=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Fe=0;if(!Ae&&!this.startupPeriod&&$?this.rateProbeState==="Probing"?Fe=this.handleProbe(w,ie.targetDownlinkBitrate):ie.deltaToNextUpgrade!==0&&(Fe=this.maybeOverrideOrProbe(w,ie,ct)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=V,this.videoPreferencesUpdated=!1,Fe===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ie.targetDownlinkBitrate;return}if(Fe===2){const Ge=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(V,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Ge);return}this.optimalNonPausedReceiveStreams=w.slice();const Xe=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(V,w),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==R||this.optimalReceiveStreams.length!==w.length||Xe!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(O,ie.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ie.targetDownlinkBitrate,this.optimalReceiveStreams=w.slice()}calculateOptimalReceiveSet(){const A=new c.default;this.calculateOptimalReceiveStreams();for(const w of this.optimalReceiveStreams)A.add(w.streamId);if(!this.optimalReceiveSet.equal(A)){const w=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(A)} subscribedRate:${w}`)}this.optimalReceiveSet=A}determineTargetRate(){let A=0;const w=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=w),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>So.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||w-this.firstEstimateTimestamp>So.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?A=So.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<So.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),A=this.downlinkStats.usedBandwidthKbps+So.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):A=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?A=So.DEFAULT_BANDWIDTH_KBPS:A=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-So.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*So.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,A=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,A>15e3&&this.logger.warn("bwe: "+A+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(A,15e3)}setProbeState(A){if(this.rateProbeState===A)return!1;const w=Date.now();switch(A){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||w-this.lastProbeTimestamp>So.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=w;else return!1;break;case"Probing":if(w-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=w,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,So.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+A+" from "+this.rateProbeState),this.rateProbeState=A,!0}upgradeToStream(A,w){for(let O=0;O<A.length;O++)if(A[O].groupId===w.groupId){const R=w.avgBitrateKbps-A[O].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(A[O])+" to "+w),this.lastUpgradeRateKbps=R,A[O]=w,R}return A.push(w),this.lastUpgradeRateKbps=w.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(A,w){if(Date.now()-this.lastProbeTimestamp>So.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>So.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(So.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const O=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(A)||w>O?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=So.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(A,w,O){const R=this.chosenStreamsSameAsLast(A);let F=0;const V=w.targetDownlinkBitrate>So.LOW_BITRATE_THRESHOLD_KBPS?So.TARGET_RATE_CHANGE_TRIGGER_PERCENT:So.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,$=w.targetDownlinkBitrate*V/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!R&&Math.abs(w.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<$?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),F=1):this.targetRateBaselineForDeltaCheckKbps=w.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,F;if(R||F===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(A,O),F=0);break}else this.setProbeState("Not Probing");return F}calculateSubscribeRate(A){let w=0;for(const O of A)!this.pausedStreamIds.contain(O.streamId)&&!this.pausedBwAttendeeIds.has(O.attendeeId)&&(w+=O.maxBitrateKbps);return w}handleAppPausedStreams(A,w){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const O=this.tileController.getAllRemoteVideoTiles();for(const R of O){const F=R.state();if(F.paused&&!this.pausedBwAttendeeIds.has(F.boundAttendeeId)){let V=w.length;for(;V--;)w[V].attendeeId===F.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+F.boundAttendeeId+" streamId: "+w[V].streamId),this.pausedStreamIds.add(w[V].streamId),this.subscribedReceiveSet.contain(w[V].streamId)&&A.push(w[V]),w.splice(V,1))}}}processBwPausedStreams(A,w){if(!this.tileController){this.logger.warn("tileController not found!");return}const O=this.getCurrentVideoPreferences();if(O&&this.shouldPauseTiles){const R=this.tileController.getAllVideoTiles();for(const F of O){const V=this.getVideoTileForAttendeeId(F.attendeeId,R),$=(V==null?void 0:V.state().paused)||!1;if(w.some(X=>X.attendeeId===F.attendeeId))$&&this.pausedBwAttendeeIds.has(F.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBeUnpausedByDownlinkPolicy(V.id())}),this.tileController.unpauseVideoTile(V.id()),this.pausedBwAttendeeIds.delete(F.attendeeId));else{const X=A.some(Y=>Y.attendeeId===F.attendeeId);if(V&&X){const Y=this.optimalReceiveStreams.find(ne=>ne.attendeeId===F.attendeeId);Y!==void 0&&($||(this.logger.info(`bwe: pausing streamId ${Y.streamId} attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(V.id())}),this.tileController.pauseVideoTile(V.id())),w.push(Y)),this.pausedBwAttendeeIds.add(F.attendeeId)}else if(X){const Y=this.tileController.addVideoTile();Y.bindVideoStream(F.attendeeId,!1,null,0,0,0,null),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(Y.id())}),Y.pause(),this.logger.info(`bwe: Created video tile ${Y.id()} for bw paused attendee ${F.attendeeId}`),this.pausedBwAttendeeIds.add(F.attendeeId)}}}}}cleanBwPausedTiles(A){if(!this.tileController){this.logger.warn("tileController not found!");return}const w=this.tileController.getAllRemoteVideoTiles(),O=this.getCurrentVideoPreferences();for(const R of w){const F=R.state();F.boundVideoStream||(A.some(V=>V.attendeeId===F.boundAttendeeId)?O!==void 0&&!O.some(V=>V.attendeeId===F.boundAttendeeId)&&this.tileController.removeVideoTile(F.tileId):(this.tileController.removeVideoTile(F.tileId),this.logger.info(`bwe: Removed video tile ${F.tileId} for bw paused attendee ${F.boundAttendeeId}`)))}}priorityPolicy(A,w,O){let R;const F=this.getCurrentVideoPreferences(),V=F.highestPriority();let $,X=V;for(;X!==-1;){$=-1;for(const Y of F)if(Y.priority===X)for(const ne of w)ne.attendeeId===Y.attendeeId&&(O.some(ie=>ie.groupId===ne.groupId)||(A.chosenTotalBitrate+ne.avgBitrateKbps<=A.targetDownlinkBitrate?(O.push(ne),A.chosenTotalBitrate+=ne.avgBitrateKbps):A.deltaToNextUpgrade===0&&(A.deltaToNextUpgrade=ne.avgBitrateKbps,R=ne)));else if(Y.priority>X){$=Y.priority;break}for(const Y of F)if(Y.priority===X){for(const ne of w)if(ne.attendeeId===Y.attendeeId){const ie=O.findIndex(ge=>ge.groupId===ne.groupId&&ge.maxBitrateKbps<=ne.maxBitrateKbps&&ge.avgBitrateKbps<ne.avgBitrateKbps);if(ie!==-1){const ge=ne.avgBitrateKbps-O[ie].avgBitrateKbps;this.hasSimulcastStreams(w,ne.attendeeId,ne.groupId)&&this.canUpgrade(ne.avgBitrateKbps,Y.targetSize,Y.targetSizeToBitrateKbps(Y.targetSize),ne.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${ne.attendeeId} group: ${ne.groupId} has simulcast and can upgrade avgBitrate: ${ne.avgBitrateKbps} target: ${Y.targetSizeToBitrateKbps(Y.targetSize)} targetTotalBitrate: ${A.targetDownlinkBitrate}`),A.chosenTotalBitrate+ge<=A.targetDownlinkBitrate?(A.chosenTotalBitrate+=ge,O[ie]=ne):A.deltaToNextUpgrade===0&&(A.deltaToNextUpgrade=ge,R=ne)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(Y.priority>X)break;if(X===V&&A.deltaToNextUpgrade!==0)break;X=$}return R}getVideoTileForAttendeeId(A,w){for(const O of w)if(O.state().boundAttendeeId===A)return O;return null}canUpgrade(A,w,O,R){let F=!1;return(w===S.default.High||!R&&A<=O||R&&w===S.default.Medium&&A<=O)&&(F=!0),F?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${A} targetBitrateKbps: ${O}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${A} targetBitrateKbps: ${O}`),!1)}hasSimulcastStreams(A,w,O){let R=0;for(const F of A)F.attendeeId===w&&F.groupId===O&&R++;return this.logger.info(`bwe: attendeeId: ${w} groupId: ${O} hasSimulcastStreams: streamCount: ${R}`),R>1}streamsWithPreferenceDidChange(A){if(this.previousStreamsWithPreference===void 0||A.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const w of A)if(this.previousStreamsWithPreference.find(R=>R.groupId===w.groupId&&R.streamId===w.streamId&&R.maxBitrateKbps===w.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(A){if(this.optimalNonPausedReceiveStreams.length!==A.length)return!1;for(const w of this.optimalNonPausedReceiveStreams)if(!A.some(O=>O.streamId===w.streamId))return!1;return!0}policyStateLogStr(A,w){const O=this.calculateSubscribeRate(this.optimalReceiveStreams),R={targetBitrate:w,subscribedRate:O,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let F="remoteInfos: [";for(const $ of A)F+=`{grpId:${$.groupId} strId:${$.streamId} maxBr:${$.maxBitrateKbps} avgBr:${$.avgBitrateKbps}}, `;F+="]";let V=`bwe: optimalReceiveSet ${JSON.stringify(R)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${F}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(V+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?V+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:V+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,V}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(A){this.serverSideNetworkAdaption=A,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let A=this.getCurrentVideoPreferences();return A||(A=v.VideoPreferences.prepare().build()),A}wantsAllTemporalLayersInIndex(){return!0}constructor(A,w=E.default.Default){this.logger=A,this.videoPriorityBasedPolicyConfig=w,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===i.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=i.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=C,C.DEFAULT_BANDWIDTH_KBPS=2800,C.STARTUP_PERIOD_MS=6e3,C.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,C.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,C.LOW_BITRATE_THRESHOLD_KBPS=300,C.MIN_TIME_BETWEEN_PROBE_MS=5e3,C.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,C.MAX_HOLD_BEFORE_PROBE_MS=3e4,C.MAX_ALLOWED_PROBE_TIME_MS=6e4,C.SPURIOUS_PACKET_LOST_THRESHOLD=2,C.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},3348721919:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5393388022));let p=r(class fc{allowSubscribe(a,s){let n=0;const e=this.currentNetworkEvent;if(s>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=s,!0;if(s<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=s,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,s){let n=fc.MINIMUM_DELAY_MS;const e=fc.MAXIMUM_DELAY_MS-fc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:n+=e*t*(1+s/10),n=Math.min(fc.MAXIMUM_DELAY_MS,n);break}return n}constructor(a=0,s=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=s,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.BandwidthProbingAndRemoteVideoQualityAdaption,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,s<0?s=0:s>1&&(s=1),this.networkIssueRecoveryDelayFactor=s}},"VideoPriorityBasedPolicyConfig");l.default=p,p.MINIMUM_DELAY_MS=2e3,p.MAXIMUM_DELAY_MS=8e3,p.Default=new p(0,0),p.UnstableNetworkPreset=new p(0,1),p.StableNetworkPreset=new p(1,0)},4829581265:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var d;(function(f){f[f.Balanced=0]="Balanced",f[f.MaintainFramerate=1]="MaintainFramerate",f[f.MaintainResolution=2]="MaintainResolution"})(d=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=d},3718889761:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{create(){const h={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{h.paused=!0},play:()=>(h.paused=!1,Promise.resolve())};return h}},"NoOpVideoElementFactory");l.default=d},1458156729:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return d(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(p){this.canvas=p,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=f},4353575046:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1458156729)),m=h(d(4223139537)),a=15;let s=r(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return f(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return f(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.framerate=t.frameRate,this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new p.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new m.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>f(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let g=[];g.push(this.sourceBuffers[0]);try{for(const C of this.processors)g=yield C.process(g)}catch{this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()});return}this.destBuffers=g;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()}));return}const u=S.width,v=S.height;u!==0&&v!==0&&(this.canvasOutput.width!==u&&this.canvasOutput.height!==v&&(this.canvasOutput.width=u,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,u,v,0,0,u,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(C=>{C.processingDidStart&&C.processingDidStart()})));const E=performance.now()-c,b=1e3*2/this.framerate-E,_=Math.max(0,1e3/this.framerate-E);b<=0&&this.forEachObserver(C=>{C.processingLatencyTooHigh&&C.processingLatencyTooHigh(E)}),yield this.timer.start(_,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");l.default=s},4223139537:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{createWorkerTimer(){try{const p=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(p))}catch{}}start(p,m){return d(this,void 0,void 0,function*(){this.callback=m,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(p)):this.lastTimeout=setTimeout(()=>{this.callback()},p)})}destroy(){return d(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=f},7309008175:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5546774952)),m=h(d(4353575046));let a=r(class gS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new gS(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return f(this,void 0,void 0,function*(){return this.device})}transformStream(n){return f(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return f(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}get framerate(){return this.pipe.framerate}set framerate(n){this.pipe.framerate=n}constructor(n,e,t,i=new p.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},3814682321:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{process(p){return d(this,void 0,void 0,function*(){return p})}destroy(){return d(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=f},8994379632:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let d=r(class{getPromise(){return this.promise}resolvePromise(h){this.resolve(h)}resolveAndReplacePromise(h){this.resolve(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}rejectPromise(h){this.reject(h)}rejectAndReplacePromise(h){this.reject(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}constructor(){this.promise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}},"DeferredPromise");l.DeferredPromise=d},8001499918:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(m,a,s,n){function e(t){return t instanceof s?t:new s(function(i){i(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}r(o,"fulfilled");function c(S){try{g(n.throw(S))}catch(u){i(u)}}r(c,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,c)}r(g,"step"),g((n=n.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=d(2014740298);let p=r(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return f(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const s=document.createElement("canvas");s.width=this.streamParameters.width,s.height=this.streamParameters.height,s.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return f(this,void 0,void 0,function*(){const s=a.backgroundReplacement.backgroundImageURL,n=a.backgroundReplacement.defaultColor;if(s)try{const e=yield this.loadImage(s);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(a){const s=document.createElement("canvas"),n=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,n.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}resizeAndSetReplacementColor(a){const s=document.createElement("canvas"),n=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,n.fillStyle=a,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}loadImage(a){return f(this,void 0,void 0,function*(){const n=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(a,s){this.streamParameters=a,this.outputCanvas=s,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=p},2014740298:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_FX_SPEC=l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const d="/ml_media_fx/otherassets";l.WORKER_PATH=`${d}/worker.js`,l.FXLIB_PATH=`${d}/fxlib.js`,l.DEFAULT_VIDEO_FX_SPEC={paths:{cdnBasePath:l.CDN_BASE_PATH,workerPath:l.WORKER_PATH,fxLibPath:l.FXLIB_PATH}}},1314104503:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(v,E,b,_){function C(I){return I instanceof b?I:new b(function(A){A(I)})}return r(C,"adopt"),new(b||(b=Promise))(function(I,A){function w(F){try{R(_.next(F))}catch(V){A(V)}}r(w,"fulfilled");function O(F){try{R(_.throw(F))}catch(V){A(V)}}r(O,"rejected");function R(F){F.done?I(F.value):C(F.value).then(w,O)}r(R,"step"),R((_=_.apply(v,E||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(9463981249),m=d(5963876428),a=d(7984036634),s=h(d(5546774952)),n=h(d(1831006443)),e=d(5685319565),t=h(d(6885109343)),i=h(d(1458156729)),o=d(8994379632),c=d(8001499918),g=d(2014740298),S=d(6322494344);let u=r(class Dd{process(E){return f(this,void 0,void 0,function*(){return E})}fxProcess(E){return f(this,void 0,void 0,function*(){const b=E[0].asCanvasElement();this.didStreamParametersChange(b)&&(yield this.adjustProcessorForNewStreamParameters(b));try{yield this.manageSegmentationMask(b)}catch(_){throw this.logger.error(_),new Error("Video stream could not be processed")}return yield this.renderer.render(b,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return f(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return f(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return f(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:g.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return f(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const b=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(b),this.segmentationRateManager.completeSegmentation()}}catch(b){throw this.logger.error(b.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return f(this,void 0,void 0,function*(){Dd.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setVideoFxSpec(E){E.paths&&(this.videoFxSpec.paths=E.paths)}setEffectConfig(E){return f(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const b=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(b)}catch(_){throw this.logger.error(_.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}b.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(b),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,b),this.effectConfig=b,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return f(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return f(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(_){throw this.logger.error(_.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const b=E.backgroundReplacement.defaultColor;if(b&&b!=="black"&&b!=="#000000"&&b!=="#000"){if(b.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(b))throw new Error(`Invalid hexadecimal color code for default replacement background: ${b}`);const C=document.createElement("canvas").getContext("2d"),I=C.fillStyle;if(C.fillStyle=b,C.fillStyle===I)throw new Error(`Invalid color for default replacement background: ${b}`)}})}validateProcessingBudgetPerFrame(E){if(E<g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return f(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,b){const _=new URL(E);for(const[C,I]of Object.entries(b))if(I!==void 0){const A=encodeURIComponent(C),w=encodeURIComponent(I);_.searchParams.set(A,w)}return _.toString()}loadEngineWorker(E){return f(this,void 0,void 0,function*(){try{const b=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.workerPath,E);this.engineWorker=yield m.loadWorker(b,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",_=>this.engineWorkerReceiver(_))}catch(b){throw this.logger.error(b.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return f(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:this.videoFxSpec.paths.cdnBasePath,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return f(this,void 0,void 0,function*(){const b=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.fxLibPath,E),_={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const C=yield p.fetchWithBehavior(b,_,{});if(!C.ok)throw new Error("Fetch failed.");const I=window.URL.createObjectURL(yield C.blob());yield new Promise((A,w)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",I),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",A),this.fxLibScript.addEventListener("error",w),document.body.appendChild(this.fxLibScript)})}catch(C){throw this.logger.error(C.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const b=E.data;switch(b.msg){case g.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(b.payload);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(b.payload.output);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case g.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(b)}`);break}}settleEngineBuildPromise(E){E!==g.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return f(this,void 0,void 0,function*(){let _=!0;const C=r((w,O)=>{w&&(E.info(O),_=!1)},"checkEnv");C(typeof globalThis>"u","Browser does not have globalThis."),C(!a.supportsWorker(globalThis,E),"Browser does not support web workers."),C(!a.supportsWASM(globalThis,E),"Browser does not support wasm."),C(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const I=new s.default;C(!I.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const A=r(()=>f(this,void 0,void 0,function*(){if(b)try{const w=new Dd(E);yield w.loadAssets(),yield w.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(_?yield A():!1)})}static create(E,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,C=arguments.length>3?arguments[3]:void 0;return f(this,void 0,void 0,function*(){const I=new Dd(E,_);C&&I.setVideoFxSpec(C);try{return yield I.loadAssets(),yield I.setEffectConfig(b),I}catch(A){throw E.error(A.toString()),I.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,b){return E.backgroundBlur.isEnabled===b.backgroundBlur.isEnabled&&E.backgroundBlur.strength===b.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===b.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===b.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===b.backgroundReplacement.isEnabled}constructor(E,b=g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,_){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas),this.videoFxSpec=g.DEFAULT_VIDEO_FX_SPEC;try{this.validateProcessingBudgetPerFrame(b)}catch(C){throw this.logger.error(C),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${b}`)}_&&(this.eventController=_),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,b),this.streamParameters={framerate:g.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:g.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:g.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:g.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},Dd.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${Dd.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${b}`)}},"VideoFxProcessor");l.default=u,u.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},6322494344:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const f=d(2014740298);let h=r(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=f.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,a){this.logger=m,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=f.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},8050111605:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"VideoSource");l.default=d},1865309432:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class Bh{add(h){this.ids.add(h)}array(){return Array.from(this.ids.values()).sort((p,m)=>p-m)}contain(h){return this.ids.has(h)}forEach(h){this.ids.forEach(h)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(h){if(!h)return this.ids.size===0;const p=this.array(),m=h.array();if(p.length!==m.length)return!1;for(let a=0;a<p.length;a++)if(p[a]!==m[a])return!1;return!0}clone(){return new Bh(this.array())}remove(h){this.ids.delete(h)}toJSON(){return this.array()}truncate(h){const p=this.array();return new Bh(p.splice(0,h))}constructor(h){this.ids=new Set(h)}},"DefaultVideoStreamIdSet");l.default=d},2469210420:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),p=f(d(1865309432)),m=f(d(6105894327));let a=r(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new p.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:c,mediaType:g}=i;o!==n&&g===h.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:c}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===n||v.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),g=new Map;let S=0;c.forEach((v,E)=>{g.set(E,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(c,e,S,i,g),this.trySelectHighBitrateForAttendees(c,o,S,i,g);const u=new p.default;for(const v of g.values())u.add(v.streamId);return u}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new p.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new p.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const c of e){if(t>=i)break;if(n.has(c)){const g=n.get(c);for(const S of g.reverse())if(t-o.get(c).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(c).maxBitrateKbps+S.maxBitrateKbps,o.set(c,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,c)=>o.maxBitrateKbps>c.maxBitrateKbps?1:o.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},8697249276:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(4136617125),p=f(d(2469210420)),m=f(d(6105894327));let a=r(class Ad extends p.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,c=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const g=new m.default;g.maxBitrateKbps=o,g.maxFrameRate=c,g.disabledByUplinkPolicy=o===0,g.rid=n[i].rid,o!==0&&(g.timeEnabled=Date.now()),this._localStreamInfos.push(g),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===Ad.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,Ad.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,Ad.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,Ad.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Ad.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},6105894327:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(4136617125);let h=r(class SS{clone(){const m=new SS;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=f.SdkStreamDescriptor.create();return m.mediaType=f.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,a,s,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=a,this.streamId=s,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},3528154542:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{notifyObservers(h,p){for(const m of this.observerQueue)m.videoElementResolutionChanged(h,p)}registerObserver(h){this.observerQueue.add(h)}removeObserver(h){this.observerQueue.delete(h)}bindVideoElement(h){if(this.element=h,!this.element){this.resizeObserver.unobserve(this.element);return}this.resizeObserver.observe(this.element)}constructor(){this.observerQueue=new Set,this.resizeObserver=new ResizeObserver(h=>{for(const p of h){const{width:m,height:a}=p.contentRect;this.notifyObservers(m,a)}})}},"DefaultVideoElementResolutionMonitor");l.default=d},8089299542:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5546774952)),p=f(d(8006173476)),m=f(d(6345807038));let a=r(class La{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(La.setVideoElementFlag(e,"disablePictureInPicture",t),La.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",La.setVideoElementFlag(n,"disablePictureInPicture",!1),La.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&La.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,c,g,S){let u=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new p.default(n).hasModality(p.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),u=!0),this.tileState.boundExternalUserId!==g&&(this.tileState.boundExternalUserId=g,u=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,u=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,u=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,u=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,u=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,u=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,u=!0),u&&this.sendTileStateUpdate()}bindVideoElement(n){var e;let t=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,(e=this.resolutionMonitor)===null||e===void 0||e.bindVideoElement(this.tileState.boundVideoElement),t=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,t=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,t=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),t&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?La.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):La.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i,o=void 0){this.tileController=t,this.devicePixelRatioMonitor=i,this.resolutionMonitor=o,this.tileState=new m.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},6345807038:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class vS{clone(){const h=new vS;return h.tileId=this.tileId,h.localTile=this.localTile,h.isContent=this.isContent,h.active=this.active,h.paused=this.paused,h.poorConnection=this.poorConnection,h.boundAttendeeId=this.boundAttendeeId,h.boundExternalUserId=this.boundExternalUserId,h.boundVideoStream=this.boundVideoStream,h.boundVideoElement=this.boundVideoElement,h.nameplate=this.nameplate,h.videoStreamContentWidth=this.videoStreamContentWidth,h.videoStreamContentHeight=this.videoStreamContentHeight,h.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,h.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,h.devicePixelRatio=this.devicePixelRatio,h.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,h.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,h.streamId=this.streamId,h.groupId=this.groupId,h}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=d},4675986794:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(i,o,c,g){function S(u){return u instanceof c?u:new c(function(v){v(u)})}return r(S,"adopt"),new(c||(c=Promise))(function(u,v){function E(C){try{_(g.next(C))}catch(I){v(I)}}r(E,"fulfilled");function b(C){try{_(g.throw(C))}catch(I){v(I)}}r(b,"rejected");function _(C){C.done?u(C.value):S(C.value).then(E,b)}r(_,"step"),_((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1197017824)),m=h(d(5163444346)),a=h(d(3563909523)),s=d(6527539809),n=h(d(3528154542)),e=h(d(8089299542));let t=r(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return f(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const o=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,o.destroy()})}bindVideoElement(o,c){const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${o}`);return}g.bindVideoElement(c)}unbindVideoElement(o){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${o}`);return}this.logger.info("Unbinding the video element"),this.notifyRemoteObserversOfUnbound(g.state().boundAttendeeId);const S=g.stateRef().boundVideoElement;g.bindVideoElement(null),c&&(this.logger.info("Cleaning up the video element"),e.default.disconnectVideoStreamFromVideoElement(S,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===p.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const o=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),o.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(o){const c=this.getVideoTile(o);c&&(this.currentPausedTilesByIds.has(o)||(this.audioVideoController.pauseReceivingStream(c.stateRef().streamId),this.currentPausedTilesByIds.add(o)),c.pause())}unpauseVideoTile(o){const c=this.getVideoTile(o);c&&(this.currentPausedTilesByIds.has(o)&&(this.audioVideoController.resumeReceivingStream(c.stateRef().streamId),this.currentPausedTilesByIds.delete(o)),c.unpause())}getVideoTile(o){return this.tileMap.has(o)?this.tileMap.get(o):null}getVideoTileArea(o){const c=o.state();let g=0,S=0;return c.boundVideoElement&&(g=c.boundVideoElement.clientHeight*c.devicePixelRatio,S=c.boundVideoElement.clientWidth*c.devicePixelRatio),g*S}getAllRemoteVideoTiles(){const o=new Array;return this.tileMap.forEach((c,g)=>{(!this.currentLocalTile||g!==this.currentLocalTile.id())&&o.push(c)}),o}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const c=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const g=this.tileFactory.makeTile(c,o,this,this.devicePixelRatioMonitor,this.createResolutionMonitor(c));return this.tileMap.set(c,g),g}removeVideoTile(o){if(!this.tileMap.has(o))return;const c=this.tileMap.get(o);this.currentLocalTile===c&&(this.currentLocalTile=null),c.destroy(),this.tileMap.delete(o),this.audioVideoController.forEachObserver(g=>{s.Maybe.of(g.videoTileWasRemoved).map(S=>S.bind(g)(o))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(o){const c=[];for(const g of this.getAllVideoTiles()){const S=g.state();S.boundAttendeeId===o&&(this.removeVideoTile(S.tileId),c.push(S.tileId))}return c}removeAllVideoTiles(){const o=Array.from(this.tileMap.keys());for(const c of o)this.removeVideoTile(c)}sendTileStateUpdate(o){this.audioVideoController.forEachObserver(c=>{s.Maybe.of(c.videoTileDidUpdate).map(g=>g.bind(c)(o))})}haveVideoTilesWithStreams(){for(const o of this.getAllVideoTiles())if(o.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(o){return!!this.getVideoTileForAttendeeId(o)}getVideoTileForAttendeeId(o){for(const c of this.getAllVideoTiles())if(c.state().boundAttendeeId===o)return c}captureVideoTile(o){const c=this.getVideoTile(o);return c?c.capture():null}registerVideoTileResolutionObserver(o){this.resolutionObservers.add(o)}removeVideoTileResolutionObserver(o){this.resolutionObservers.delete(o)}notifyResolutionObserversOfChange(o,c,g){for(const S of this.resolutionObservers)S.videoTileResolutionDidChange(o,c,g)}notifyRemoteObserversOfUnbound(o){for(const c of this.resolutionObservers)c.videoTileUnbound(o)}createResolutionMonitor(o){const c=new class{videoElementResolutionChanged(S,u){const v=this.controller.getVideoTile(this.tileId);if(v){const E=v.state().boundAttendeeId;this.controller.notifyResolutionObserversOfChange(E,S,u)}}constructor(S,u){this.controller=S,this.tileId=u}}(this,o),g=new n.default;return g.registerObserver(c),g}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(o,c,g){this.tileFactory=o,this.audioVideoController=c,this.logger=g,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.resolutionObservers=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=c.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=t},1309535200:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8089299542));let p=r(class{makeTile(a,s,n,e,t){return new h.default(a,s,n,e,t)}},"DefaultVideoTileFactory");l.default=p},4207915265:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"BitrateParameters");l.default=d},1604549269:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(9131051489)),p=f(d(372560720)),m=d(6527539809),a=f(d(1695739824)),s=f(d(4207915265));let n=r(class na{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new s.default,new s.default,new s.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,c,g)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,c=t.numberOfParticipants(),g=c>=0&&c<=2,S=this.shouldDisableSimulcast!==g;this.numSenders=i,this.shouldDisableSimulcast=g,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of p.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?na.kHiTargetBitrateKbpsFhd:na.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?na.kMidTargetBitrateKbpsFhd:na.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?na.kLowTargetBitrateKbpsFhd:na.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,c=p.default.NAME_ARR_ASCENDING,g=t;let S=this.shouldDisableSimulcast?1:4;for(let u=0;u<c.length;u++){const v=c[u];i.set(v,{rid:v,active:g[u]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:g[u]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(c=>{i+=`{ rid: ${c.rid} active:${c.active} maxBitrate:${c.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{m.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=na.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=na.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=na.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},4499376852:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8213452704));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,s,n,e,t,i,o,c,g,S,u,v;const E=new Map,b=1e3,_=h.default.NAME_ARR_ASCENDING;return E.set(_[0],{rid:_[0],active:!0,scaleResolutionDownBy:((s=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||s===void 0?void 0:s.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*b,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),E.set(_[1],{rid:_[1],active:!0,scaleResolutionDownBy:((c=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((S=(g=this.encodingParams)===null||g===void 0?void 0:g.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*b,maxFramerate:(v=(u=this.encodingParams)===null||u===void 0?void 0:u.high)===null||v===void 0?void 0:v.maxFramerate}),E}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,s){this.encodingParams=s,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=p},9136055221:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1695739824));let m=r(class Od{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new p.default(0,0,0,0,!1),this.parametersInEffect=new p.default(0,0,0,0,!1),this.encodingParamMap.set(Od.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=s.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=s.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let s=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(s=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new p.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,s,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let s=640;return this.getNumberOfPublishedVideoSources()>4&&(s=320),s}captureHeight(){let s=384;return this.getNumberOfPublishedVideoSources()>4&&(s=192),s}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let s=0;return this.getNumberOfPublishedVideoSources()<=2?s=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?s=this.idealMaxBandwidthKbps*2/3:s=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(s)}setIdealMaxBandwidthKbps(s){this.idealMaxBandwidthKbps=s}setHasBandwidthPriority(s){this.hasBandwidthPriority=s}setTransceiverController(s){this.transceiverController=s}setSVCEnabled(s){var n;this.enableSVC=s,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${s}}`)}setHighResolutionFeatureEnabled(s){this.enableHighResolutionFeature=s}updateTransceiverController(){return f(this,void 0,void 0,function*(){const s=this.getStreamCaptureSetting();if(!s)return;const n=this.calculateEncodingParameters(s);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(Od.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(s){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return s.maxBitrate!==(t==null?void 0:t.maxBitrate)||s.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(s==null?void 0:s.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(s){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,c=720;if(s.height!==void 0&&s.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=Od.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Od.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(c=360),o=Math.max(Math.min(s.height,s.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${s.width}x${s.height}. New dimension is ${s.width/o}x${s.height/o}`)),this.enableSVC){let g;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?g="L1T1":g="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${c}  scalabilityMode: ${g}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:g}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var s,n,e,t;return(t=(e=(n=(s=this.transceiverController)===null||s===void 0?void 0:s.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var s;return(s=this.numberOfPublishedVideoSources)!==null&&s!==void 0?s:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(s,n){const e=s??n,t=e.length>0&&Od.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(s,n=!0,e=void 0,t=void 0){this.selfAttendeeId=s,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},9871896518:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1695739824));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=p},6133497304:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function d(h){return h.map(p=>typeof p=="object"?JSON.stringify(p):`${p}`).join(" ")}r(d,"stringify");let f=r(class{debug(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.debug(d(m))}info(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.info(d(m))}warn(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.warn(d(m))}error(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.error(d(m))}constructor(p){this.base=p}},"LoggerAdapter");l.default=f},1644756024:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(i,o,c,g){function S(u){return u instanceof c?u:new c(function(v){v(u)})}return r(S,"adopt"),new(c||(c=Promise))(function(u,v){function E(C){try{_(g.next(C))}catch(I){v(I)}}r(E,"fulfilled");function b(C){try{_(g.throw(C))}catch(I){v(I)}}r(b,"rejected");function _(C){C.done?u(C.value):S(C.value).then(E,b)}r(_,"step"),_((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const p=d(5700998045),m=d(5685319565),a=h(d(6885109343)),s=h(d(6133497304)),n=h(d(7141525823)),e=h(d(7075076608));let t=r(class ha{static isSupported(o,c){var g,S;const u=ha.defaultFetchBehavior(),v=c!=null&&c.logger?new s.default(c.logger):void 0,E={fetchBehavior:u,logger:v};if(m.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(g=c==null?void 0:c.logger)===null||g===void 0||g.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=c==null?void 0:c.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return p.VoiceFocus.isSupported(ha.augmentSpec(o),E)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;var v,E,b;return f(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const _=((b=(E=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||b===void 0?void 0:b.EchoReduction)==="AVAILABLE",C=g&&g.supported===!0&&g.model.name==="ns_es"&&!_,I=o.name==="ns_es"&&!_;if(C||I)throw new Error("Echo Reduction requested but not enabled.");const A=new ha(o,c,g);return yield A.init(),A})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f(this,void 0,void 0,function*(){return new ha(o,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,c){return f(this,void 0,void 0,function*(){if(this.supported)try{const[S,u]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new n.default(o,S,u,v)}catch{return}})}static destroyVoiceFocus(o){var c;return f(this,void 0,void 0,function*(){(c=o==null?void 0:o.vf)===null||c===void 0||c.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:ha.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return p.VoiceFocus.configure(this.spec,c)})}init(){var o;return f(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(g){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${g}`),this.supported=!1}})}createVoiceFocus(o,c){return f(this,void 0,void 0,function*(){const g=new e.default;return this.vf=yield p.VoiceFocus.init(o,{delegate:g,preload:c,logger:this.vfLogger}),[this.vf,g]})}allocateVoiceFocus(o){return f(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=ha.majorMinorVersion()||"unknown",c=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(c)}`}}constructor(o,{preload:c=!0,logger:g,fetchBehavior:S=ha.defaultFetchBehavior()},u){this.spec=o,this.supported=!0,this.logger=g,this.vfLogger=g?new s.default(g):void 0,this.preload=c,this.fetchBehavior=S,this.spec=ha.augmentSpec(this.spec),u&&(this.configuration=Promise.resolve(u))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},7141525823:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5546774952));let m=r(class yS{getInnerDevice(){return this.device}mute(n){return f(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return f(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return f(this,void 0,void 0,function*(){return this.device===n&&!a(n)?this:new yS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return f(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return f(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const c=this.node,g=this.node;return{start:c,end:g}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(n){return f(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return f(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return f(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return f(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return f(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return f(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,c=void 0,g=new p.default,S=new Map,u=void 0,v=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=c,this.browserBehavior=g,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=u,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function a(s){return s==="default"?!0:!s||typeof s!="object"?!1:"deviceId"in s&&s.deviceId==="default"||"id"in s&&s.id==="default"}r(a,"isDefaultDevice"),l.default=m},7075076608:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}onFallback(h,p){var m;for(const a of this.observers)(m=a.voiceFocusFellBackToInnerStream)===null||m===void 0||m.call(a,h,p)}onCPUWarning(){var h;for(const p of this.observers)(h=p.voiceFocusInsufficientResources)===null||h===void 0||h.call(p)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=d},8058016368:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class bu{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(h){let p=0;for(const m of h.streams){const a=!!m.attendeeId,s=!!m.externalUserId,n=m.hasOwnProperty("muted"),e=!!m.dropped;if(a){this.attendeeIdToStreamId[m.attendeeId]&&this.attendeeIdToStreamId[m.attendeeId]<m.audioStreamId&&delete this.attendeeIdToStreamId[m.attendeeId],this.streamIdToAttendeeId[m.audioStreamId]=m.attendeeId;const t=s?m.externalUserId:m.attendeeId;this.streamIdToExternalUserId[m.audioStreamId]=t,this.attendeeIdToStreamId[m.attendeeId]=m.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(m.attendeeId,!0,t,!1,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}if(n){const t=this.streamIdToAttendeeId[m.audioStreamId],i=this.streamIdToExternalUserId[m.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,m.muted,null,i)}if(!a&&!n){const t=this.streamIdToAttendeeId[m.audioStreamId];if(t){const i=this.streamIdToExternalUserId[m.audioStreamId];delete this.streamIdToAttendeeId[m.audioStreamId],delete this.streamIdToExternalUserId[m.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[m.audioStreamId],this.attendeeIdToStreamId[t]===m.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const c of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(c);if(g>m.audioStreamId&&this.streamIdToAttendeeId[g]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(h),this.sessionReconnected=!1)}cleanUpState(h){const p=Object.values(this.streamIdToAttendeeId),m=h.streams.map(s=>s.attendeeId),a=p.filter(s=>!m.includes(s));for(const[s,n]of a.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:s,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(h){let p=null,m=null;for(const a of h.attendeeStates){const s=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(p===null&&(p={}),s!==null&&(p[s]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(m===null&&(m={}),s!==null&&(m[s]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(p,m)}normalizedVolume(h){const m=1-(-h.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(m,0),1)}normalizedSignalStrength(h){const p=h.signalStrength/bu.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(p,0),1)}applyRealtimeUpdatesForAudioMetadata(h,p){for(const m in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[m],s=this.streamIdToExternalUserId[m];let n=null,e=null;h!==null&&(h.hasOwnProperty(a)?n=h[a]:n=bu.IMPLICIT_VOLUME),p!==null&&(p.hasOwnProperty(a)?e=p[a]:e=bu.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,n,null,e,s)}}attendeeIdForStreamId(h){if(h===0)return null;const p=this.streamIdToAttendeeId[h];return p||(this.warnedAboutMissingStreamIdMapping[h]||(this.warnedAboutMissingStreamIdMapping[h]=!0,this.logger.warn(`volume indicator stream id ${h} seen before being defined`)),null)}constructor(h,p,m,a,s){this.logger=h,this.realtimeController=p,this.minVolumeDecibels=m,this.maxVolumeDecibels=a,this.selfAttendeeId=s,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=d,d.MAX_SIGNAL_STRENGTH_LEVELS=2,d.IMPLICIT_VOLUME=0,d.IMPLICIT_SIGNAL_STRENGTH=1},7880459944:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6885109343)),p=f(d(5638612424));let m=r(class{create(s,n,e){this.connection=new WebSocket(e?s:h.default.urlWithVersion(s),n),this.connection.binaryType="arraybuffer"}send(s){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return s instanceof Uint8Array?this.connection.send(s.buffer):this.connection.send(s),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${p.default[this.readyState()]}`),!1}}close(s,n){var e;(e=this.connection)===null||e===void 0||e.close(s,n)}destroy(){this.connection=void 0}addEventListener(s,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(s,n)}removeEventListener(s,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(s,n)}readyState(){if(!this.connection)return p.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return p.default.Connecting;case WebSocket.OPEN:return p.default.Open;case WebSocket.CLOSING:return p.default.Closing;case WebSocket.CLOSED:return p.default.Closed}}constructor(s){this.logger=s}},"DefaultWebSocketAdapter");l.default=m},5638612424:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var d;(function(f){f[f.None=0]="None",f[f.Connecting=1]="Connecting",f[f.Open=2]="Open",f[f.Closing=3]="Closing",f[f.Closed=4]="Closed"})(d=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=d},7729790247:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(_,C,I,A){function w(O){return O instanceof I?O:new I(function(R){R(O)})}return r(w,"adopt"),new(I||(I=Promise))(function(O,R){function F(X){try{$(A.next(X))}catch(Y){R(Y)}}r(F,"fulfilled");function V(X){try{$(A.throw(X))}catch(Y){R(Y)}}r(V,"rejected");function $(X){X.done?O(X.value):w(X.value).then(F,V)}r($,"step"),$((A=A.apply(_,C||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=d(5963876428),p=d(7984036634),m=3,a=2.5,s=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=r(class{roundtrip(C,I,A){return new Promise((w,O)=>{this.worker.then(R=>{let F;F=r(V=>{const{message:$,key:X}=V.data;$===I&&X===A&&(R.removeEventListener("message",F),w(V.data))},"listener"),R.addEventListener("message",F),R.postMessage(C)}).catch(R=>{var F;(F=this.logger)===null||F===void 0||F.error("Failed to load worker.",R),O(R)})})}supportsSIMD(C){const I="simd",A=C||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,w={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:A,key:I};return this.roundtrip(w,"simd-support",I).then(O=>O.supports)}measure(C,I){const A=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,w=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,O=C?w:A,R=`bench:${C}`,F={message:"measure",fetchBehavior:this.fetchBehavior,budget:I,path:O,key:R};return this.roundtrip(F,"measurement",R).then(V=>{if(V.measurement)return V.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(C=>{var I;(I=this.logger)===null||I===void 0||I.debug("Stopping estimator worker."),C.terminate()}).catch(C=>{})}constructor(C,I){this.fetchConfig=C,this.logger=I;const A=`${C.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:C.headers,escapedQueryString:C.escapedQueryString},this.worker=h.loadWorker(A,"VoiceFocusEstimator",this.fetchBehavior,I)}},"Estimator");const g=r((_,C)=>_===1?n:C==="quality"?e*_:t*_,"inlineScoreMultiplier"),S=r(function(_){let{supportsSIMD:C,supportsSAB:I,duration:A,executionPreference:w="auto",simdPreference:O,variantPreference:R="auto",namePreference:F="default",usagePreference:V,executionQuantaPreference:$=m}=_,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Y=arguments.length>2?arguments[2]:void 0;const ie=O==="force"||O!=="disable"&&C,ge=A!==-1,Ie=ge?(ie?a:s)/A:0,We=ie?X.simd:X.wasm,ct=ge?g($,V)*Ie:0,Ae=ge?i*Ie:0,Fe=F,Xe=r(wt=>({supported:!1,reason:wt}),"unsupported");if(ge){if(Ie<We.noSupport)return Xe(`Performance score ${Ie} worse than threshold ${We.noSupport}.`)}else if(w==="auto"||R==="auto")return Xe(`Missing explicit execution (${w}) or variant (${R}) preference, but no scoring performed.`);Y==null||Y.debug(`Bench duration ${A} yields inline score ${ct} and worker score ${Ae}.`);const Ge=r((wt,Pe,xe)=>({supported:!0,useSIMD:ie,processor:wt,executionApproach:Pe,variant:xe,executionQuanta:Pe==="inline"?$:void 0,name:Fe}),"succeed"),it=r((wt,Pe,xe)=>Pe!=="auto"?!ge||wt>xe[Pe]?Pe:"failed":wt>xe.c100?"c100":wt>xe.c50?"c50":wt>xe.c20?"c20":wt>xe.c10?"c10":"failed","resolveVariant"),Dt=r(wt=>{switch(wt||"auto"){case"auto":{let Pe=Dt("inline"),xe=Dt("worker");return Y==null||Y.debug(`Reducing auto preference: ${JSON.stringify(Pe)} vs ${JSON.stringify(xe)}`),Pe.supported===!1||xe.supported===!1?xe:Pe.variant===xe.variant||Pe.variant==="c50"?Pe:xe}case"worker":return p.supportsSharedArrayBuffer(globalThis,window,Y)?Dt("worker-sab"):Dt("worker-postMessage");case"inline":{const Pe=it(ct,R,We.inline);return Pe==="failed"?Xe(`Performance score ${ct} not sufficient for inline use with variant preference ${R}.`):Ge("voicefocus-inline-processor","inline",Pe)}case"worker-sab":{if(!I){const xe="Requested worker-sab but no SharedArrayBuffer support.";return Y==null||Y.warn(xe),{supported:!1,reason:xe}}const Pe=it(Ae,R,We.worker);return Pe==="failed"?Xe(`Performance score ${Ae} not sufficient for worker use with variant preference ${R}.`):Ge("voicefocus-worker-sab-processor","worker-sab",Pe)}case"worker-postMessage":{const Pe=it(Ae,R,We.worker);if(Pe==="failed")return Xe(`Performance score ${Ae} not sufficient for worker use.`);if(Fe==="ns_es"){const xe="Requested echo suppression but postMessage executor does not support it.";return Y==null||Y.warn(xe),{supported:!1,reason:xe}}return Ge("voicefocus-worker-postMessage-processor","worker-postMessage",Pe)}}},"reducePreference");return Dt(w)},"decideExecutionApproach"),u=r((_,C,I,A)=>f(void 0,void 0,void 0,function*(){const w={supportsSIMD:_,supportsSAB:p.supportsSharedArrayBuffer(globalThis,window,I),duration:-1};if(_)return I==null||I.info("Supports SIMD: true (force)"),w;const O=!A,R=A||new c(C,I);try{const F=!p.isOldChrome(window,I)&&(yield R.supportsSIMD());return I==null||I.info(`Supports SIMD: ${F} (force: ${_})`),w.supportsSIMD=F,w}finally{O&&R.stop()}}),"featureCheck"),v=r((_,C,I,A)=>f(void 0,void 0,void 0,function*(){const w=new c(C,A);try{const O=yield u(_,C,A,w);if(O.supportsSIMD)try{return O.duration=yield w.measure(!0,I),A==null||A.info("SIMD timing:",O.duration),O}catch{A==null||A.warn("Failed SIMD estimation; falling back to non-SIMD."),O.supportsSIMD=!1}return O.duration=yield w.measure(!1,I),A==null||A.info("No-SIMD timing:",O.duration),O}catch(O){throw A==null||A.error("Could not feature check.",O),O}finally{w.stop()}}),"estimateAndFeatureCheck"),E=r(function(_,C,I){let A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return f(void 0,void 0,void 0,function*(){let w=_.executionPreference;const{usagePreference:O,variantPreference:R,namePreference:F,simdPreference:V,estimatorBudget:$,executionQuantaPreference:X}=_;O==="interactivity"&&w!=="inline"&&(I==null||I.debug(`Overriding execution preference ${w} to reflect interactivity preference.`),w="inline");const Y=V==="force",ne=R!=="auto",ie=w!=="auto";let ge;try{ne&&ie?ge=yield u(Y,C,I):ge=yield v(Y,C,$,I)}catch(Ie){throw I==null||I.error("Could not load estimator.",Ie),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},ge),{simdPreference:V,executionPreference:w,variantPreference:R,namePreference:F,usagePreference:O,executionQuantaPreference:X}),A,I)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=E;const b=r(_=>{let{category:C,name:I,variant:A,simd:w,url:O}=_;return`${C}-${I}-${A}-v1${w?"_simd":""}`},"decideModel");l.decideModel=b},9463981249:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function d(e,t,i){if(!i)return fetch(e,t);const o=h(e,i),c=f(t,i);return fetch(o,c)}r(d,"fetchWithBehavior"),l.fetchWithBehavior=d;function f(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}r(f,"withRequestHeaders"),l.withRequestHeaders=f;function h(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}r(h,"withQueryString"),l.withQueryString=h;function p(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const c of i)o.append(c,t[c]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}r(p,"addQueryParams"),l.addQueryParams=p;const m={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return d(e,m,t).then(i=>i.redirected?i.url:e)}r(a,"resolveURL"),l.resolveURL=a;function s(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}r(s,"isValidAssetGroup"),l.isValidAssetGroup=s;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}r(n,"isValidRevisionID"),l.isValidRevisionID=n},5963876428:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const f=d(9463981249),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},p=r((m,a,s,n)=>{n==null||n.debug(`Loading ${a} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=f.withQueryString(m,s);return Promise.resolve(new Worker(t,{name:a}))}return f.fetchWithBehavior(m,h,s).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=p},7984036634:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(u,v,E,b){function _(C){return C instanceof E?C:new E(function(I){I(C)})}return r(_,"adopt"),new(E||(E=Promise))(function(C,I){function A(R){try{O(b.next(R))}catch(F){I(F)}}r(A,"fulfilled");function w(R){try{O(b.throw(R))}catch(F){I(F)}}r(w,"rejected");function O(R){R.done?C(R.value):_(R.value).then(A,w)}r(O,"step"),O((b=b.apply(u,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=d(5963876428),p=r(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=r(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=v.match(/Safari\//),b=v.match(/Chrom(?:e|ium)\//);return!!(E&&!b)},"isSafari");l.isSafari=m;const a=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(u)?!1:p(u)?(g(u)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const s=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return f(void 0,void 0,void 0,function*(){if(!l.supportsWorker(u,E))return!1;const b=`${v.paths.workers}worker-v1.js`;try{const _=yield h.loadWorker(b,"VoiceFocusTestWorker",v,E);try{_.terminate()}catch(C){E==null||E.debug("Failed to terminate worker.",C)}return!0}catch(_){return E==null||E.info("Failed to fetch and instantiate test worker",_),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=s;const n=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.Worker}catch(E){return v==null||v.info("Does not support Worker",E),!1}},"supportsWorker");l.supportsWorker=n;const e=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.AudioWorklet&&!!u.AudioWorkletNode}catch(E){return v==null||v.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.WebAssembly&&(!!u.WebAssembly.compile||!!u.WebAssembly.compileStreaming)}catch(E){return v==null||v.info("Does not support WASM",E),!1}},"supportsWASM");l.supportsWASM=t;const i=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!u.SharedArrayBuffer&&(!!v.chrome||!!u.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=i;const o=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=u.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(b){return v==null||v.info("Does not support WASM streaming compilation",b),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const c=90,g=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!u.chrome)return}catch{}const v=u.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const E=g(u);return E&&E<c?(v==null||v.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},6021562188:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let d=r(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||r(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=d},5700998045:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return r(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(We){try{Ie($.next(We))}catch(ct){ne(ct)}}r(ie,"fulfilled");function ge(We){try{Ie($.throw(We))}catch(ct){ne(ct)}}r(ge,"rejected");function Ie(We){We.done?Y(We.value):X(We.value).then(ie,ge)}r(Ie,"step"),Ie(($=$.apply(R,F||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=d(7729790247),p=d(9463981249),m=d(5963876428),a=d(7984036634),s=d(79783582),n=d(161673934),e=d(641640331),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",c="https://static.sdkassets.chime.aws",g={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},S={latencyHint:0},u={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},u),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},u),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),b={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:s.default}},_=r((R,F)=>{if(R!==void 0&&!p.isValidAssetGroup(R))throw new Error(`Invalid asset group ${R}`);if(F!==void 0&&!p.isValidRevisionID(F))throw new Error(`Invalid revision ID ${F}`)},"validateAssetSpec"),C=r((R,F)=>{let V;if(F.useBuiltInAGC?V=v:V=E,!R)return{audio:V};if(!R.audio)return R;if(R.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},R),{audio:R.audio===!0?V:Object.assign(Object.assign({},R.audio),V)})},"mungeConstraints"),I=r((R,F)=>`${F.models}${h.decideModel(R)}.wasm`,"urlForModel");let A=r(class ES{static isSupported(F,V){const{fetchBehavior:$,logger:X}=V||{};if(typeof globalThis>"u")return X==null||X.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,X))return X==null||X.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,X))return X==null||X.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,X)||X==null||X.debug("Browser does not support streaming WASM compilation.");const{assetGroup:Y=o,revisionID:ne,paths:ie=g}=F||{};_(Y,ne);const ge=ne?{revisionID:ne}:{assetGroup:Y},Ie=p.addQueryParams($,ge),We=Object.assign(Object.assign({},Ie),{paths:ie});return a.supportsVoiceFocusWorker(globalThis,We,X)}static mungeExecutionPreference(F,V){const $=F===void 0||F==="auto";if(a.isSafari(globalThis)){if($||F==="inline")return"inline";if(!$)throw new Error(`Unsupported execution preference ${F}`)}if(F==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,V))throw new Error(`Unsupported execution preference ${F}`);return F||"auto"}static configure(F,V){return f(this,void 0,void 0,function*(){const{fetchBehavior:$,preResolve:X,logger:Y}=V||{},{category:ne="voicefocus",name:ie="default",variant:ge="auto",assetGroup:Ie=o,revisionID:We,simd:ct="detect",executionPreference:Ae="auto",executionQuantaPreference:Fe,usagePreference:Xe="interactivity",estimatorBudget:Ge=100,paths:it=g,thresholds:Dt}=F||{};if(Y==null||Y.debug("Configuring Voice Focus with spec",F),ne!==void 0&&ne!=="voicefocus")throw new Error(`Unrecognized category ${ne}`);if(ie!==void 0&&ie!=="default"&&ie!=="ns_es")throw new Error(`Unrecognized feature name ${ie}`);if(ge!==void 0&&!["auto","c100","c50","c20","c10"].includes(ge))throw new Error(`Unrecognized feature variant ${ge}`);if(Fe!==void 0&&![1,2,3].includes(Fe))throw new Error(`Unrecognized execution quanta preference ${Fe}`);if(_(Ie,We),ct!==void 0&&!["detect","force","disable"].includes(ct))throw new Error(`Unrecognized SIMD option ${ct}`);if(Ae!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ae))throw new Error(`Unrecognized execution preference ${Ae}`);if(Xe!==void 0&&!["quality","interactivity"].includes(Xe))throw new Error(`Unrecognized usage preference ${Xe}`);const wt={executionPreference:this.mungeExecutionPreference(Ae,Y),usagePreference:Xe,executionQuantaPreference:Fe,variantPreference:ge,namePreference:ie,simdPreference:ct,estimatorBudget:Ge},Pe=We?{revisionID:We}:{assetGroup:Ie},xe=p.addQueryParams($,Pe),et=Object.assign({paths:it},xe),rt=yield h.measureAndDecideExecutionApproach(wt,et,Y,Dt);if(rt.supported===!1)return{supported:!1,reason:rt.reason};Y==null||Y.info("Decided execution approach",rt);const{useSIMD:je,processor:Ft,variant:Gt,executionQuanta:Xt}=rt,sn={category:ne||"voicefocus",name:ie||"default",variant:Gt,simd:je};if(X){const cn=I(sn,it);sn.url=yield p.resolveURL(cn,xe)}return{fetchConfig:et,model:sn,processor:Ft,executionQuanta:Xt,supported:!0}})}static init(F,V){let{delegate:$,preload:X=!0,logger:Y}=V;return f(this,void 0,void 0,function*(){if(F.supported===!1)throw new Error("Voice Focus not supported. Reason: "+F.reason);const{model:ne,processor:ie,fetchConfig:ge,executionQuanta:Ie}=F,{simd:We,name:ct}=ne,{paths:Ae}=ge;if(ie!=="voicefocus-inline-processor"&&ie!=="voicefocus-worker-postMessage-processor"&&ie!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ie}`);const Fe=ne.url||I(ne,Ae);Y==null||Y.debug(`Using model URL ${Fe}.`);const Xe=`${Ae.wasm}audio_buffer-v1${We?"_simd":""}.wasm`,Ge=`${Ae.wasm}resampler-v1${We?"_simd":""}.wasm`,it=`${Ae.workers}worker-v1.js`,{file:Dt,node:wt}=b[ie],Pe=`${Ae.processors}${Dt}`,xe=yield m.loadWorker(it,"VoiceFocusWorker",ge,Y);if(X){Y==null||Y.debug("Preloading",Fe);let Ft=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";xe.postMessage({message:Ft,preload:!0,key:"model",fetchBehavior:ge,path:Fe})}const rt={processor:ie,worker:xe,audioBufferURL:Xe,resamplerURL:Ge,fetchBehavior:ge,modelURL:Fe,delegate:$,logger:Y,numberOfInputs:ct==="ns_es"?2:1},je=new ES(xe,Pe,wt,rt,Ie);return Promise.resolve(je)})}createNode(F,V){var $;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:X=F.sampleRate===16e3?16e3:48e3,enabled:Y=!0,agc:ne=i}=V||{},ie=V==null?void 0:V.es,ge={voiceFocusSampleRate:X,enabled:Y,sendBufferCount:10,prefill:6,agc:ne,executionQuanta:this.executionQuanta,supportFarendStream:ie},Ie=p.withQueryString(this.processorURL,($=this.nodeOptions)===null||$===void 0?void 0:$.fetchBehavior);return F.audioWorklet.addModule(Ie).then(()=>new this.nodeConstructor(F,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:ge})))}applyToStream(F,V,$){return f(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const X=V.createMediaStreamSource(F),Y=yield this.applyToSourceNode(X,V,$),ne=V.createMediaStreamDestination();return Y.connect(ne),{node:Y,source:X,destination:ne,stream:ne.stream}})}applyToSourceNode(F,V,$){return f(this,void 0,void 0,function*(){const X=yield this.createNode(V,$);return F.connect(X),X})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(F,V,$,X,Y){this.processorURL=V,this.nodeConstructor=$,this.nodeOptions=X,this.executionQuanta=Y,this.internal={worker:F,nodeOptions:X,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=A;const w=r(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(R)},"createAudioContext");l.createAudioContext=w;const O=r((R,F,V)=>f(void 0,void 0,void 0,function*(){var $,X;const{constraints:Y,spec:ne,delegate:ie,preload:ge=!0,options:Ie}=F,{logger:We}=V,ct=yield A.configure(ne,V);if(!ct.supported)return($=V.logger)===null||$===void 0||$.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(Y);const Ae=yield A.init(ct,{delegate:ie,preload:ge,logger:We}),Fe=((X=F.options)===null||X===void 0?void 0:X.agc)||i,Xe=yield window.navigator.mediaDevices.getUserMedia(C(Y,Fe));return Ae.applyToStream(Xe,R,Ie).then(Ge=>Ge.stream)}),"getAudioInput");l.getAudioInput=O},79783582:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7984036634),p=d(6021562188),m=5*1e3;let a=r(class extends p.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return f(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return f(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return f(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),g=this.cpuWarningLastTriggered||c,S=Math.abs(c-g);(!this.cpuWarningLastTriggered||S>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:c,delegate:g}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=g,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},641640331:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7984036634),p=d(6021562188);let m=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return f(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return f(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return f(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(s){var n;const e=s.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(s){var n;const e=s.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(s,n){super(s,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:c}=n;this.delegate=c,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:g,agc:S,supportFarendStream:u}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:s.sampleRate===16e3?160:480,enabled:g,agc:S,fetchBehavior:o,model:e,supportFarendStream:u});const v=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=m},161673934:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(7984036634),p=d(6021562188),m={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let s=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return f(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return f(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return f(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,a.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:c,fetchBehavior:g,delegate:S}=t;this.delegate=S,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:u,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:u,model:i,supportFarendStream:v});const E=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:g,path:o})}},"VoiceFocusWorkerBufferNode");l.default=s},4499531780:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var f=d(8411923784),h=function(){function p(){this.state=Int32Array.from(f.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r(p,"RawSha2561"),p.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=m.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>f.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=m[a++],s--,this.bufferLength===f.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},p.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%f.BLOCK_SIZE>=f.BLOCK_SIZE-8){for(var n=this.bufferLength;n<f.BLOCK_SIZE;n++)a.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<f.BLOCK_SIZE-8;n++)a.setUint8(n,0);a.setUint32(f.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),a.setUint32(f.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(f.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},p.prototype.hashBuffer=function(){for(var m=this,a=m.buffer,s=m.state,n=s[0],e=s[1],t=s[2],i=s[3],o=s[4],c=s[5],g=s[6],S=s[7],u=0;u<f.BLOCK_SIZE;u++){if(u<16)this.temp[u]=(a[u*4]&255)<<24|(a[u*4+1]&255)<<16|(a[u*4+2]&255)<<8|a[u*4+3]&255;else{var v=this.temp[u-2],E=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[u-15];var b=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[u]=(E+this.temp[u-7]|0)+(b+this.temp[u-16]|0)}var _=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&c^~o&g)|0)+(S+(f.KEY[u]+this.temp[u]|0)|0)|0,C=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=g,g=c,c=o,o=i+_|0,i=t,t=e,e=n,n=_+C|0}s[0]+=n,s[1]+=e,s[2]+=t,s[3]+=i,s[4]+=o,s[5]+=c,s[6]+=g,s[7]+=S},p}();l.RawSha256=h},8411923784:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},7288346005:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f=d(8842724253);f.__exportStar(d(9337996847),l)},9337996847:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var f=d(8842724253),h=d(8411923784),p=d(4499531780),m=d(7626896220),a=function(){function n(e){if(this.hash=new p.RawSha256,e){this.outer=new p.RawSha256;var t=s(e),i=new Uint8Array(h.BLOCK_SIZE);i.set(t);for(var o=0;o<h.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return r(n,"Sha2561"),n.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(e){return[2,this.digestSync()]})})},n}();l.Sha256=a;function s(n){var e=(0,m.convertToBuffer)(n);if(e.byteLength>h.BLOCK_SIZE){var t=new p.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(h.BLOCK_SIZE);return i.set(e),i}r(s,"bufferFromSecret")},271264648:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var f=d(2412280125),h=typeof Buffer<"u"&&Buffer.from?function(m){return Buffer.from(m,"utf8")}:f.fromUtf8;function p(m){return m instanceof Uint8Array?m:typeof m=="string"?h(m):ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(m)}r(p,"convertToBuffer"),l.convertToBuffer=p},7626896220:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var f=d(271264648);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return f.convertToBuffer}});var h=d(8695908309);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var p=d(3332263431);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return p.numToUint8}});var m=d(5480401346);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},8695908309:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function d(f){return typeof f=="string"?f.length===0:f.byteLength===0}r(d,"isEmptyData"),l.isEmptyData=d},3332263431:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function d(f){return new Uint8Array([(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255])}r(d,"numToUint8"),l.numToUint8=d},5480401346:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function d(f){if(!Uint32Array.from){for(var h=new Uint32Array(f.length),p=0;p<f.length;)h[p]=f[p],p+=1;return h}return Uint32Array.from(f)}r(d,"uint32ArrayFrom"),l.uint32ArrayFrom=d},9385915920:(B,l,d)=>{"use strict";const{Deflate:f,deflate:h,deflateRaw:p,gzip:m}=d(5602788515),{Inflate:a,inflate:s,inflateRaw:n,ungzip:e}=d(6716562227),t=d(7496116979);B.exports.Deflate=f,B.exports.deflate=h,B.exports.deflateRaw=p,B.exports.gzip=m,B.exports.Inflate=a,B.exports.inflate=s,B.exports.inflateRaw=n,B.exports.ungzip=e,B.exports.constants=t},5602788515:(B,l,d)=>{"use strict";const f=d(872668561),h=d(4109671863),p=d(931830944),m=d(3435039830),a=d(8713386032),s=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:c,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:u}=d(7496116979);function v(C){this.options=h.assign({level:g,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},C||{});let I=this.options;I.raw&&I.windowBits>0?I.windowBits=-I.windowBits:I.gzip&&I.windowBits>0&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let A=f.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(A!==o)throw new Error(m[A]);if(I.header&&f.deflateSetHeader(this.strm,I.header),I.dictionary){let w;if(typeof I.dictionary=="string"?w=p.string2buf(I.dictionary):s.call(I.dictionary)==="[object ArrayBuffer]"?w=new Uint8Array(I.dictionary):w=I.dictionary,A=f.deflateSetDictionary(this.strm,w),A!==o)throw new Error(m[A]);this._dict_set=!0}}r(v,"Deflate"),v.prototype.push=function(C,I){const A=this.strm,w=this.options.chunkSize;let O,R;if(this.ended)return!1;for(I===~~I?R=I:R=I===!0?i:n,typeof C=="string"?A.input=p.string2buf(C):s.call(C)==="[object ArrayBuffer]"?A.input=new Uint8Array(C):A.input=C,A.next_in=0,A.avail_in=A.input.length;;){if(A.avail_out===0&&(A.output=new Uint8Array(w),A.next_out=0,A.avail_out=w),(R===e||R===t)&&A.avail_out<=6){this.onData(A.output.subarray(0,A.next_out)),A.avail_out=0;continue}if(O=f.deflate(A,R),O===c)return A.next_out>0&&this.onData(A.output.subarray(0,A.next_out)),O=f.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===o;if(A.avail_out===0){this.onData(A.output);continue}if(R>0&&A.next_out>0){this.onData(A.output.subarray(0,A.next_out)),A.avail_out=0;continue}if(A.avail_in===0)break}return!0},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===o&&(this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function E(C,I){const A=new v(I);if(A.push(C,!0),A.err)throw A.msg||m[A.err];return A.result}r(E,"deflate");function b(C,I){return I=I||{},I.raw=!0,E(C,I)}r(b,"deflateRaw");function _(C,I){return I=I||{},I.gzip=!0,E(C,I)}r(_,"gzip"),B.exports.Deflate=v,B.exports.deflate=E,B.exports.deflateRaw=b,B.exports.gzip=_,B.exports.constants=d(7496116979)},6716562227:(B,l,d)=>{"use strict";const f=d(4532140493),h=d(4109671863),p=d(931830944),m=d(3435039830),a=d(8713386032),s=d(5341695802),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:c,Z_STREAM_ERROR:g,Z_DATA_ERROR:S,Z_MEM_ERROR:u}=d(7496116979);function v(_){this.options=h.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),C.windowBits>=0&&C.windowBits<16&&!(_&&_.windowBits)&&(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&(C.windowBits&15||(C.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let I=f.inflateInit2(this.strm,C.windowBits);if(I!==i)throw new Error(m[I]);if(this.header=new s,f.inflateGetHeader(this.strm,this.header),C.dictionary&&(typeof C.dictionary=="string"?C.dictionary=p.string2buf(C.dictionary):n.call(C.dictionary)==="[object ArrayBuffer]"&&(C.dictionary=new Uint8Array(C.dictionary)),C.raw&&(I=f.inflateSetDictionary(this.strm,C.dictionary),I!==i)))throw new Error(m[I])}r(v,"Inflate"),v.prototype.push=function(_,C){const I=this.strm,A=this.options.chunkSize,w=this.options.dictionary;let O,R,F;if(this.ended)return!1;for(C===~~C?R=C:R=C===!0?t:e,n.call(_)==="[object ArrayBuffer]"?I.input=new Uint8Array(_):I.input=_,I.next_in=0,I.avail_in=I.input.length;;){for(I.avail_out===0&&(I.output=new Uint8Array(A),I.next_out=0,I.avail_out=A),O=f.inflate(I,R),O===c&&w&&(O=f.inflateSetDictionary(I,w),O===i?O=f.inflate(I,R):O===S&&(O=c));I.avail_in>0&&O===o&&I.state.wrap>0&&_[I.next_in]!==0;)f.inflateReset(I),O=f.inflate(I,R);switch(O){case g:case S:case c:case u:return this.onEnd(O),this.ended=!0,!1}if(F=I.avail_out,I.next_out&&(I.avail_out===0||O===o))if(this.options.to==="string"){let V=p.utf8border(I.output,I.next_out),$=I.next_out-V,X=p.buf2string(I.output,V);I.next_out=$,I.avail_out=A-$,$&&I.output.set(I.output.subarray(V,V+$),0),this.onData(X)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(!(O===i&&F===0)){if(O===o)return O=f.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,!0;if(I.avail_in===0)break}}return!0},v.prototype.onData=function(_){this.chunks.push(_)},v.prototype.onEnd=function(_){_===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function E(_,C){const I=new v(C);if(I.push(_),I.err)throw I.msg||m[I.err];return I.result}r(E,"inflate");function b(_,C){return C=C||{},C.raw=!0,E(_,C)}r(b,"inflateRaw"),B.exports.Inflate=v,B.exports.inflate=E,B.exports.inflateRaw=b,B.exports.ungzip=E,B.exports.constants=d(7496116979)},4109671863:B=>{"use strict";const l=r((d,f)=>Object.prototype.hasOwnProperty.call(d,f),"_has");B.exports.assign=function(d){const f=Array.prototype.slice.call(arguments,1);for(;f.length;){const h=f.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const p in h)l(h,p)&&(d[p]=h[p])}}return d},B.exports.flattenChunks=d=>{let f=0;for(let p=0,m=d.length;p<m;p++)f+=d[p].length;const h=new Uint8Array(f);for(let p=0,m=0,a=d.length;p<a;p++){let s=d[p];h.set(s,m),m+=s.length}return h}},931830944:B=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const d=new Uint8Array(256);for(let h=0;h<256;h++)d[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;d[254]=d[254]=1,B.exports.string2buf=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let p,m,a,s,n,e=h.length,t=0;for(s=0;s<e;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),t+=m<128?1:m<2048?2:m<65536?3:4;for(p=new Uint8Array(t),n=0,s=0;n<t;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),m<128?p[n++]=m:m<2048?(p[n++]=192|m>>>6,p[n++]=128|m&63):m<65536?(p[n++]=224|m>>>12,p[n++]=128|m>>>6&63,p[n++]=128|m&63):(p[n++]=240|m>>>18,p[n++]=128|m>>>12&63,p[n++]=128|m>>>6&63,p[n++]=128|m&63);return p};const f=r((h,p)=>{if(p<65534&&h.subarray&&l)return String.fromCharCode.apply(null,h.length===p?h:h.subarray(0,p));let m="";for(let a=0;a<p;a++)m+=String.fromCharCode(h[a]);return m},"buf2binstring");B.exports.buf2string=(h,p)=>{const m=p||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,p));let a,s;const n=new Array(m*2);for(s=0,a=0;a<m;){let e=h[a++];if(e<128){n[s++]=e;continue}let t=d[e];if(t>4){n[s++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<m;)e=e<<6|h[a++]&63,t--;if(t>1){n[s++]=65533;continue}e<65536?n[s++]=e:(e-=65536,n[s++]=55296|e>>10&1023,n[s++]=56320|e&1023)}return f(n,s)},B.exports.utf8border=(h,p)=>{p=p||h.length,p>h.length&&(p=h.length);let m=p-1;for(;m>=0&&(h[m]&192)===128;)m--;return m<0||m===0?p:m+d[h[m]]>p?m:p}},7775889903:B=>{"use strict";const l=r((d,f,h,p)=>{let m=d&65535|0,a=d>>>16&65535|0,s=0;for(;h!==0;){s=h>2e3?2e3:h,h-=s;do m=m+f[p++]|0,a=a+m|0;while(--s);m%=65521,a%=65521}return m|a<<16|0},"adler32");B.exports=l},7496116979:B=>{"use strict";B.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},9538018229:B=>{"use strict";const l=r(()=>{let h,p=[];for(var m=0;m<256;m++){h=m;for(var a=0;a<8;a++)h=h&1?3988292384^h>>>1:h>>>1;p[m]=h}return p},"makeTable"),d=new Uint32Array(l()),f=r((h,p,m,a)=>{const s=d,n=a+m;h^=-1;for(let e=a;e<n;e++)h=h>>>8^s[(h^p[e])&255];return h^-1},"crc32");B.exports=f},872668561:(B,l,d)=>{"use strict";const{_tr_init:f,_tr_stored_block:h,_tr_flush_block:p,_tr_tally:m,_tr_align:a}=d(8891166839),s=d(7775889903),n=d(9538018229),e=d(3435039830),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:c,Z_BLOCK:g,Z_OK:S,Z_STREAM_END:u,Z_STREAM_ERROR:v,Z_DATA_ERROR:E,Z_BUF_ERROR:b,Z_DEFAULT_COMPRESSION:_,Z_FILTERED:C,Z_HUFFMAN_ONLY:I,Z_RLE:A,Z_FIXED:w,Z_DEFAULT_STRATEGY:O,Z_UNKNOWN:R,Z_DEFLATED:F}=d(7496116979),V=9,$=15,X=8,Y=29,ie=256+1+Y,ge=30,Ie=19,We=2*ie+1,ct=15,Ae=3,Fe=258,Xe=Fe+Ae+1,Ge=32,it=42,Dt=69,wt=73,Pe=91,xe=103,et=113,rt=666,je=1,Ft=2,Gt=3,Xt=4,sn=3,cn=r((k,Se)=>(k.msg=e[Se],Se),"err"),Bt=r(k=>(k<<1)-(k>4?9:0),"rank"),gn=r(k=>{let Se=k.length;for(;--Se>=0;)k[Se]=0},"zero");let $n=r((k,Se,be)=>(Se<<k.hash_shift^be)&k.hash_mask,"HASH_ZLIB");const Sn=r(k=>{const Se=k.state;let be=Se.pending;be>k.avail_out&&(be=k.avail_out),be!==0&&(k.output.set(Se.pending_buf.subarray(Se.pending_out,Se.pending_out+be),k.next_out),k.next_out+=be,Se.pending_out+=be,k.total_out+=be,k.avail_out-=be,Se.pending-=be,Se.pending===0&&(Se.pending_out=0))},"flush_pending"),nn=r((k,Se)=>{p(k,k.block_start>=0?k.block_start:-1,k.strstart-k.block_start,Se),k.block_start=k.strstart,Sn(k.strm)},"flush_block_only"),Vt=r((k,Se)=>{k.pending_buf[k.pending++]=Se},"put_byte"),Wn=r((k,Se)=>{k.pending_buf[k.pending++]=Se>>>8&255,k.pending_buf[k.pending++]=Se&255},"putShortMSB"),Lt=r((k,Se,be,we)=>{let ee=k.avail_in;return ee>we&&(ee=we),ee===0?0:(k.avail_in-=ee,Se.set(k.input.subarray(k.next_in,k.next_in+ee),be),k.state.wrap===1?k.adler=s(k.adler,Se,ee,be):k.state.wrap===2&&(k.adler=n(k.adler,Se,ee,be)),k.next_in+=ee,k.total_in+=ee,ee)},"read_buf"),zt=r((k,Se)=>{let be=k.max_chain_length,we=k.strstart,ee,en,dt=k.prev_length,Ct=k.nice_match;const xn=k.strstart>k.w_size-Xe?k.strstart-(k.w_size-Xe):0,Qt=k.window,Xi=k.w_mask,Pi=k.prev,Kn=k.strstart+Fe;let ni=Qt[we+dt-1],Mn=Qt[we+dt];k.prev_length>=k.good_match&&(be>>=2),Ct>k.lookahead&&(Ct=k.lookahead);do if(ee=Se,!(Qt[ee+dt]!==Mn||Qt[ee+dt-1]!==ni||Qt[ee]!==Qt[we]||Qt[++ee]!==Qt[we+1])){we+=2,ee++;do;while(Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&we<Kn);if(en=Fe-(Kn-we),we=Kn-Fe,en>dt){if(k.match_start=Se,dt=en,en>=Ct)break;ni=Qt[we+dt-1],Mn=Qt[we+dt]}}while((Se=Pi[Se&Xi])>xn&&--be!==0);return dt<=k.lookahead?dt:k.lookahead},"longest_match"),It=r(k=>{const Se=k.w_size;let be,we,ee,en,dt;do{if(en=k.window_size-k.lookahead-k.strstart,k.strstart>=Se+(Se-Xe)){k.window.set(k.window.subarray(Se,Se+Se),0),k.match_start-=Se,k.strstart-=Se,k.block_start-=Se,we=k.hash_size,be=we;do ee=k.head[--be],k.head[be]=ee>=Se?ee-Se:0;while(--we);we=Se,be=we;do ee=k.prev[--be],k.prev[be]=ee>=Se?ee-Se:0;while(--we);en+=Se}if(k.strm.avail_in===0)break;if(we=Lt(k.strm,k.window,k.strstart+k.lookahead,en),k.lookahead+=we,k.lookahead+k.insert>=Ae)for(dt=k.strstart-k.insert,k.ins_h=k.window[dt],k.ins_h=$n(k,k.ins_h,k.window[dt+1]);k.insert&&(k.ins_h=$n(k,k.ins_h,k.window[dt+Ae-1]),k.prev[dt&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=dt,dt++,k.insert--,!(k.lookahead+k.insert<Ae)););}while(k.lookahead<Xe&&k.strm.avail_in!==0)},"fill_window"),z=r((k,Se)=>{let be=65535;for(be>k.pending_buf_size-5&&(be=k.pending_buf_size-5);;){if(k.lookahead<=1){if(It(k),k.lookahead===0&&Se===t)return je;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;const we=k.block_start+be;if((k.strstart===0||k.strstart>=we)&&(k.lookahead=k.strstart-we,k.strstart=we,nn(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-Xe&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=0,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):(k.strstart>k.block_start&&(nn(k,!1),k.strm.avail_out===0),je)},"deflate_stored"),Ve=r((k,Se)=>{let be,we;for(;;){if(k.lookahead<Xe){if(It(k),k.lookahead<Xe&&Se===t)return je;if(k.lookahead===0)break}if(be=0,k.lookahead>=Ae&&(k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),be!==0&&k.strstart-be<=k.w_size-Xe&&(k.match_length=zt(k,be)),k.match_length>=Ae)if(we=m(k,k.strstart-k.match_start,k.match_length-Ae),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=Ae){k.match_length--;do k.strstart++,k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart;while(--k.match_length!==0);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=$n(k,k.ins_h,k.window[k.strstart+1]);else we=m(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(we&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=k.strstart<Ae-1?k.strstart:Ae-1,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_fast"),He=r((k,Se)=>{let be,we,ee;for(;;){if(k.lookahead<Xe){if(It(k),k.lookahead<Xe&&Se===t)return je;if(k.lookahead===0)break}if(be=0,k.lookahead>=Ae&&(k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=Ae-1,be!==0&&k.prev_length<k.max_lazy_match&&k.strstart-be<=k.w_size-Xe&&(k.match_length=zt(k,be),k.match_length<=5&&(k.strategy===C||k.match_length===Ae&&k.strstart-k.match_start>4096)&&(k.match_length=Ae-1)),k.prev_length>=Ae&&k.match_length<=k.prev_length){ee=k.strstart+k.lookahead-Ae,we=m(k,k.strstart-1-k.prev_match,k.prev_length-Ae),k.lookahead-=k.prev_length-1,k.prev_length-=2;do++k.strstart<=ee&&(k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart);while(--k.prev_length!==0);if(k.match_available=0,k.match_length=Ae-1,k.strstart++,we&&(nn(k,!1),k.strm.avail_out===0))return je}else if(k.match_available){if(we=m(k,0,k.window[k.strstart-1]),we&&nn(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return je}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(we=m(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<Ae-1?k.strstart:Ae-1,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_slow"),Je=r((k,Se)=>{let be,we,ee,en;const dt=k.window;for(;;){if(k.lookahead<=Fe){if(It(k),k.lookahead<=Fe&&Se===t)return je;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=Ae&&k.strstart>0&&(ee=k.strstart-1,we=dt[ee],we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee])){en=k.strstart+Fe;do;while(we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&ee<en);k.match_length=Fe-(en-ee),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=Ae?(be=m(k,1,k.match_length-Ae),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(be=m(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),be&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=0,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_rle"),Ye=r((k,Se)=>{let be;for(;;){if(k.lookahead===0&&(It(k),k.lookahead===0)){if(Se===t)return je;break}if(k.match_length=0,be=m(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,be&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=0,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_huff");function lt(k,Se,be,we,ee){this.good_length=k,this.max_lazy=Se,this.nice_length=be,this.max_chain=we,this.func=ee}r(lt,"Config");const le=[new lt(0,0,0,0,z),new lt(4,4,8,4,Ve),new lt(4,5,16,8,Ve),new lt(4,6,32,32,Ve),new lt(4,4,16,16,He),new lt(8,16,32,32,He),new lt(8,16,128,128,He),new lt(8,32,128,256,He),new lt(32,128,258,1024,He),new lt(32,258,258,4096,He)],Ue=r(k=>{k.window_size=2*k.w_size,gn(k.head),k.max_lazy_match=le[k.level].max_lazy,k.good_match=le[k.level].good_length,k.nice_match=le[k.level].nice_length,k.max_chain_length=le[k.level].max_chain,k.strstart=0,k.block_start=0,k.lookahead=0,k.insert=0,k.match_length=k.prev_length=Ae-1,k.match_available=0,k.ins_h=0},"lm_init");function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(We*2),this.dyn_dtree=new Uint16Array((2*ge+1)*2),this.bl_tree=new Uint16Array((2*Ie+1)*2),gn(this.dyn_ltree),gn(this.dyn_dtree),gn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ct+1),this.heap=new Uint16Array(2*ie+1),gn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ie+1),gn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}r(G,"DeflateState");const Q=r(k=>{if(!k||!k.state)return cn(k,v);k.total_in=k.total_out=0,k.data_type=R;const Se=k.state;return Se.pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?it:et,k.adler=Se.wrap===2?0:1,Se.last_flush=t,f(Se),S},"deflateResetKeep"),ye=r(k=>{const Se=Q(k);return Se===S&&Ue(k.state),Se},"deflateReset"),Ee=r((k,Se)=>!k||!k.state||k.state.wrap!==2?v:(k.state.gzhead=Se,S),"deflateSetHeader"),pt=r((k,Se,be,we,ee,en)=>{if(!k)return v;let dt=1;if(Se===_&&(Se=6),we<0?(dt=0,we=-we):we>15&&(dt=2,we-=16),ee<1||ee>V||be!==F||we<8||we>15||Se<0||Se>9||en<0||en>w)return cn(k,v);we===8&&(we=9);const Ct=new G;return k.state=Ct,Ct.strm=k,Ct.wrap=dt,Ct.gzhead=null,Ct.w_bits=we,Ct.w_size=1<<Ct.w_bits,Ct.w_mask=Ct.w_size-1,Ct.hash_bits=ee+7,Ct.hash_size=1<<Ct.hash_bits,Ct.hash_mask=Ct.hash_size-1,Ct.hash_shift=~~((Ct.hash_bits+Ae-1)/Ae),Ct.window=new Uint8Array(Ct.w_size*2),Ct.head=new Uint16Array(Ct.hash_size),Ct.prev=new Uint16Array(Ct.w_size),Ct.lit_bufsize=1<<ee+6,Ct.pending_buf_size=Ct.lit_bufsize*4,Ct.pending_buf=new Uint8Array(Ct.pending_buf_size),Ct.d_buf=1*Ct.lit_bufsize,Ct.l_buf=(1+2)*Ct.lit_bufsize,Ct.level=Se,Ct.strategy=en,Ct.method=be,ye(k)},"deflateInit2"),ze=r((k,Se)=>pt(k,Se,F,$,X,O),"deflateInit"),st=r((k,Se)=>{let be,we;if(!k||!k.state||Se>g||Se<0)return k?cn(k,v):v;const ee=k.state;if(!k.output||!k.input&&k.avail_in!==0||ee.status===rt&&Se!==c)return cn(k,k.avail_out===0?b:v);ee.strm=k;const en=ee.last_flush;if(ee.last_flush=Se,ee.status===it)if(ee.wrap===2)k.adler=0,Vt(ee,31),Vt(ee,139),Vt(ee,8),ee.gzhead?(Vt(ee,(ee.gzhead.text?1:0)+(ee.gzhead.hcrc?2:0)+(ee.gzhead.extra?4:0)+(ee.gzhead.name?8:0)+(ee.gzhead.comment?16:0)),Vt(ee,ee.gzhead.time&255),Vt(ee,ee.gzhead.time>>8&255),Vt(ee,ee.gzhead.time>>16&255),Vt(ee,ee.gzhead.time>>24&255),Vt(ee,ee.level===9?2:ee.strategy>=I||ee.level<2?4:0),Vt(ee,ee.gzhead.os&255),ee.gzhead.extra&&ee.gzhead.extra.length&&(Vt(ee,ee.gzhead.extra.length&255),Vt(ee,ee.gzhead.extra.length>>8&255)),ee.gzhead.hcrc&&(k.adler=n(k.adler,ee.pending_buf,ee.pending,0)),ee.gzindex=0,ee.status=Dt):(Vt(ee,0),Vt(ee,0),Vt(ee,0),Vt(ee,0),Vt(ee,0),Vt(ee,ee.level===9?2:ee.strategy>=I||ee.level<2?4:0),Vt(ee,sn),ee.status=et);else{let dt=F+(ee.w_bits-8<<4)<<8,Ct=-1;ee.strategy>=I||ee.level<2?Ct=0:ee.level<6?Ct=1:ee.level===6?Ct=2:Ct=3,dt|=Ct<<6,ee.strstart!==0&&(dt|=Ge),dt+=31-dt%31,ee.status=et,Wn(ee,dt),ee.strstart!==0&&(Wn(ee,k.adler>>>16),Wn(ee,k.adler&65535)),k.adler=1}if(ee.status===Dt)if(ee.gzhead.extra){for(be=ee.pending;ee.gzindex<(ee.gzhead.extra.length&65535)&&!(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),Sn(k),be=ee.pending,ee.pending===ee.pending_buf_size));)Vt(ee,ee.gzhead.extra[ee.gzindex]&255),ee.gzindex++;ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),ee.gzindex===ee.gzhead.extra.length&&(ee.gzindex=0,ee.status=wt)}else ee.status=wt;if(ee.status===wt)if(ee.gzhead.name){be=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),Sn(k),be=ee.pending,ee.pending===ee.pending_buf_size)){we=1;break}ee.gzindex<ee.gzhead.name.length?we=ee.gzhead.name.charCodeAt(ee.gzindex++)&255:we=0,Vt(ee,we)}while(we!==0);ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),we===0&&(ee.gzindex=0,ee.status=Pe)}else ee.status=Pe;if(ee.status===Pe)if(ee.gzhead.comment){be=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),Sn(k),be=ee.pending,ee.pending===ee.pending_buf_size)){we=1;break}ee.gzindex<ee.gzhead.comment.length?we=ee.gzhead.comment.charCodeAt(ee.gzindex++)&255:we=0,Vt(ee,we)}while(we!==0);ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),we===0&&(ee.status=xe)}else ee.status=xe;if(ee.status===xe&&(ee.gzhead.hcrc?(ee.pending+2>ee.pending_buf_size&&Sn(k),ee.pending+2<=ee.pending_buf_size&&(Vt(ee,k.adler&255),Vt(ee,k.adler>>8&255),k.adler=0,ee.status=et)):ee.status=et),ee.pending!==0){if(Sn(k),k.avail_out===0)return ee.last_flush=-1,S}else if(k.avail_in===0&&Bt(Se)<=Bt(en)&&Se!==c)return cn(k,b);if(ee.status===rt&&k.avail_in!==0)return cn(k,b);if(k.avail_in!==0||ee.lookahead!==0||Se!==t&&ee.status!==rt){let dt=ee.strategy===I?Ye(ee,Se):ee.strategy===A?Je(ee,Se):le[ee.level].func(ee,Se);if((dt===Gt||dt===Xt)&&(ee.status=rt),dt===je||dt===Gt)return k.avail_out===0&&(ee.last_flush=-1),S;if(dt===Ft&&(Se===i?a(ee):Se!==g&&(h(ee,0,0,!1),Se===o&&(gn(ee.head),ee.lookahead===0&&(ee.strstart=0,ee.block_start=0,ee.insert=0))),Sn(k),k.avail_out===0))return ee.last_flush=-1,S}return Se!==c?S:ee.wrap<=0?u:(ee.wrap===2?(Vt(ee,k.adler&255),Vt(ee,k.adler>>8&255),Vt(ee,k.adler>>16&255),Vt(ee,k.adler>>24&255),Vt(ee,k.total_in&255),Vt(ee,k.total_in>>8&255),Vt(ee,k.total_in>>16&255),Vt(ee,k.total_in>>24&255)):(Wn(ee,k.adler>>>16),Wn(ee,k.adler&65535)),Sn(k),ee.wrap>0&&(ee.wrap=-ee.wrap),ee.pending!==0?S:u)},"deflate"),me=r(k=>{if(!k||!k.state)return v;const Se=k.state.status;return Se!==it&&Se!==Dt&&Se!==wt&&Se!==Pe&&Se!==xe&&Se!==et&&Se!==rt?cn(k,v):(k.state=null,Se===et?cn(k,E):S)},"deflateEnd"),Me=r((k,Se)=>{let be=Se.length;if(!k||!k.state)return v;const we=k.state,ee=we.wrap;if(ee===2||ee===1&&we.status!==it||we.lookahead)return v;if(ee===1&&(k.adler=s(k.adler,Se,be,0)),we.wrap=0,be>=we.w_size){ee===0&&(gn(we.head),we.strstart=0,we.block_start=0,we.insert=0);let xn=new Uint8Array(we.w_size);xn.set(Se.subarray(be-we.w_size,be),0),Se=xn,be=we.w_size}const en=k.avail_in,dt=k.next_in,Ct=k.input;for(k.avail_in=be,k.next_in=0,k.input=Se,It(we);we.lookahead>=Ae;){let xn=we.strstart,Qt=we.lookahead-(Ae-1);do we.ins_h=$n(we,we.ins_h,we.window[xn+Ae-1]),we.prev[xn&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=xn,xn++;while(--Qt);we.strstart=xn,we.lookahead=Ae-1,It(we)}return we.strstart+=we.lookahead,we.block_start=we.strstart,we.insert=we.lookahead,we.lookahead=0,we.match_length=we.prev_length=Ae-1,we.match_available=0,k.next_in=dt,k.input=Ct,k.avail_in=en,we.wrap=ee,S},"deflateSetDictionary");B.exports.deflateInit=ze,B.exports.deflateInit2=pt,B.exports.deflateReset=ye,B.exports.deflateResetKeep=Q,B.exports.deflateSetHeader=Ee,B.exports.deflate=st,B.exports.deflateEnd=me,B.exports.deflateSetDictionary=Me,B.exports.deflateInfo="pako deflate (from Nodeca project)"},5341695802:B=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r(l,"GZheader"),B.exports=l},4690928475:B=>{"use strict";B.exports=r(function(h,p){let m,a,s,n,e,t,i,o,c,g,S,u,v,E,b,_,C,I,A,w,O,R,F,V;const $=h.state;m=h.next_in,F=h.input,a=m+(h.avail_in-5),s=h.next_out,V=h.output,n=s-(p-h.avail_out),e=s+(h.avail_out-257),t=$.dmax,i=$.wsize,o=$.whave,c=$.wnext,g=$.window,S=$.hold,u=$.bits,v=$.lencode,E=$.distcode,b=(1<<$.lenbits)-1,_=(1<<$.distbits)-1;e:do{u<15&&(S+=F[m++]<<u,u+=8,S+=F[m++]<<u,u+=8),C=v[S&b];t:for(;;){if(I=C>>>24,S>>>=I,u-=I,I=C>>>16&255,I===0)V[s++]=C&65535;else if(I&16){A=C&65535,I&=15,I&&(u<I&&(S+=F[m++]<<u,u+=8),A+=S&(1<<I)-1,S>>>=I,u-=I),u<15&&(S+=F[m++]<<u,u+=8,S+=F[m++]<<u,u+=8),C=E[S&_];n:for(;;){if(I=C>>>24,S>>>=I,u-=I,I=C>>>16&255,I&16){if(w=C&65535,I&=15,u<I&&(S+=F[m++]<<u,u+=8,u<I&&(S+=F[m++]<<u,u+=8)),w+=S&(1<<I)-1,w>t){h.msg="invalid distance too far back",$.mode=30;break e}if(S>>>=I,u-=I,I=s-n,w>I){if(I=w-I,I>o&&$.sane){h.msg="invalid distance too far back",$.mode=30;break e}if(O=0,R=g,c===0){if(O+=i-I,I<A){A-=I;do V[s++]=g[O++];while(--I);O=s-w,R=V}}else if(c<I){if(O+=i+c-I,I-=c,I<A){A-=I;do V[s++]=g[O++];while(--I);if(O=0,c<A){I=c,A-=I;do V[s++]=g[O++];while(--I);O=s-w,R=V}}}else if(O+=c-I,I<A){A-=I;do V[s++]=g[O++];while(--I);O=s-w,R=V}for(;A>2;)V[s++]=R[O++],V[s++]=R[O++],V[s++]=R[O++],A-=3;A&&(V[s++]=R[O++],A>1&&(V[s++]=R[O++]))}else{O=s-w;do V[s++]=V[O++],V[s++]=V[O++],V[s++]=V[O++],A-=3;while(A>2);A&&(V[s++]=V[O++],A>1&&(V[s++]=V[O++]))}}else if(I&64){h.msg="invalid distance code",$.mode=30;break e}else{C=E[(C&65535)+(S&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){$.mode=12;break e}else{h.msg="invalid literal/length code",$.mode=30;break e}else{C=v[(C&65535)+(S&(1<<I)-1)];continue t}break}}while(m<a&&s<e);A=u>>3,m-=A,u-=A<<3,S&=(1<<u)-1,h.next_in=m,h.next_out=s,h.avail_in=m<a?5+(a-m):5-(m-a),h.avail_out=s<e?257+(e-s):257-(s-e),$.hold=S,$.bits=u},"inflate_fast")},4532140493:(B,l,d)=>{"use strict";const f=d(7775889903),h=d(9538018229),p=d(4690928475),m=d(9709058974),a=0,s=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:c,Z_NEED_DICT:g,Z_STREAM_ERROR:S,Z_DATA_ERROR:u,Z_MEM_ERROR:v,Z_BUF_ERROR:E,Z_DEFLATED:b}=d(7496116979),_=1,C=2,I=3,A=4,w=5,O=6,R=7,F=8,V=9,$=10,X=11,Y=12,ne=13,ie=14,ge=15,Ie=16,We=17,ct=18,Ae=19,Fe=20,Xe=21,Ge=22,it=23,Dt=24,wt=25,Pe=26,xe=27,et=28,rt=29,je=30,Ft=31,Gt=32,Xt=852,sn=592,Bt=15,gn=r(le=>(le>>>24&255)+(le>>>8&65280)+((le&65280)<<8)+((le&255)<<24),"zswap32");function Ci(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}r(Ci,"InflateState");const $n=r(le=>{if(!le||!le.state)return S;const Ue=le.state;return le.total_in=le.total_out=Ue.total=0,le.msg="",Ue.wrap&&(le.adler=Ue.wrap&1),Ue.mode=_,Ue.last=0,Ue.havedict=0,Ue.dmax=32768,Ue.head=null,Ue.hold=0,Ue.bits=0,Ue.lencode=Ue.lendyn=new Int32Array(Xt),Ue.distcode=Ue.distdyn=new Int32Array(sn),Ue.sane=1,Ue.back=-1,o},"inflateResetKeep"),Sn=r(le=>{if(!le||!le.state)return S;const Ue=le.state;return Ue.wsize=0,Ue.whave=0,Ue.wnext=0,$n(le)},"inflateReset"),nn=r((le,Ue)=>{let G;if(!le||!le.state)return S;const Q=le.state;return Ue<0?(G=0,Ue=-Ue):(G=(Ue>>4)+1,Ue<48&&(Ue&=15)),Ue&&(Ue<8||Ue>15)?S:(Q.window!==null&&Q.wbits!==Ue&&(Q.window=null),Q.wrap=G,Q.wbits=Ue,Sn(le))},"inflateReset2"),Vt=r((le,Ue)=>{if(!le)return S;const G=new Ci;le.state=G,G.window=null;const Q=nn(le,Ue);return Q!==o&&(le.state=null),Q},"inflateInit2"),Wn=r(le=>Vt(le,Bt),"inflateInit");let Lt=!0,zt,It;const z=r(le=>{if(Lt){zt=new Int32Array(512),It=new Int32Array(32);let Ue=0;for(;Ue<144;)le.lens[Ue++]=8;for(;Ue<256;)le.lens[Ue++]=9;for(;Ue<280;)le.lens[Ue++]=7;for(;Ue<288;)le.lens[Ue++]=8;for(m(s,le.lens,0,288,zt,0,le.work,{bits:9}),Ue=0;Ue<32;)le.lens[Ue++]=5;m(n,le.lens,0,32,It,0,le.work,{bits:5}),Lt=!1}le.lencode=zt,le.lenbits=9,le.distcode=It,le.distbits=5},"fixedtables"),Ve=r((le,Ue,G,Q)=>{let ye;const Ee=le.state;return Ee.window===null&&(Ee.wsize=1<<Ee.wbits,Ee.wnext=0,Ee.whave=0,Ee.window=new Uint8Array(Ee.wsize)),Q>=Ee.wsize?(Ee.window.set(Ue.subarray(G-Ee.wsize,G),0),Ee.wnext=0,Ee.whave=Ee.wsize):(ye=Ee.wsize-Ee.wnext,ye>Q&&(ye=Q),Ee.window.set(Ue.subarray(G-Q,G-Q+ye),Ee.wnext),Q-=ye,Q?(Ee.window.set(Ue.subarray(G-Q,G),0),Ee.wnext=Q,Ee.whave=Ee.wsize):(Ee.wnext+=ye,Ee.wnext===Ee.wsize&&(Ee.wnext=0),Ee.whave<Ee.wsize&&(Ee.whave+=ye))),0},"updatewindow"),He=r((le,Ue)=>{let G,Q,ye,Ee,pt,ze,st,me,Me,k,Se,be,we,ee,en=0,dt,Ct,xn,Qt,Xi,Pi,Kn,ni;const Mn=new Uint8Array(4);let qn,bi;const xr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!le||!le.state||!le.output||!le.input&&le.avail_in!==0)return S;G=le.state,G.mode===Y&&(G.mode=ne),pt=le.next_out,ye=le.output,st=le.avail_out,Ee=le.next_in,Q=le.input,ze=le.avail_in,me=G.hold,Me=G.bits,k=ze,Se=st,ni=o;e:for(;;)switch(G.mode){case _:if(G.wrap===0){G.mode=ne;break}for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(G.wrap&2&&me===35615){G.check=0,Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0),me=0,Me=0,G.mode=C;break}if(G.flags=0,G.head&&(G.head.done=!1),!(G.wrap&1)||(((me&255)<<8)+(me>>8))%31){le.msg="incorrect header check",G.mode=je;break}if((me&15)!==b){le.msg="unknown compression method",G.mode=je;break}if(me>>>=4,Me-=4,Kn=(me&15)+8,G.wbits===0)G.wbits=Kn;else if(Kn>G.wbits){le.msg="invalid window size",G.mode=je;break}G.dmax=1<<G.wbits,le.adler=G.check=1,G.mode=me&512?$:Y,me=0,Me=0;break;case C:for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(G.flags=me,(G.flags&255)!==b){le.msg="unknown compression method",G.mode=je;break}if(G.flags&57344){le.msg="unknown header flags set",G.mode=je;break}G.head&&(G.head.text=me>>8&1),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0)),me=0,Me=0,G.mode=I;case I:for(;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.head&&(G.head.time=me),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,Mn[2]=me>>>16&255,Mn[3]=me>>>24&255,G.check=h(G.check,Mn,4,0)),me=0,Me=0,G.mode=A;case A:for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.head&&(G.head.xflags=me&255,G.head.os=me>>8),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0)),me=0,Me=0,G.mode=w;case w:if(G.flags&1024){for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.length=me,G.head&&(G.head.extra_len=me),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0)),me=0,Me=0}else G.head&&(G.head.extra=null);G.mode=O;case O:if(G.flags&1024&&(be=G.length,be>ze&&(be=ze),be&&(G.head&&(Kn=G.head.extra_len-G.length,G.head.extra||(G.head.extra=new Uint8Array(G.head.extra_len)),G.head.extra.set(Q.subarray(Ee,Ee+be),Kn)),G.flags&512&&(G.check=h(G.check,Q,be,Ee)),ze-=be,Ee+=be,G.length-=be),G.length))break e;G.length=0,G.mode=R;case R:if(G.flags&2048){if(ze===0)break e;be=0;do Kn=Q[Ee+be++],G.head&&Kn&&G.length<65536&&(G.head.name+=String.fromCharCode(Kn));while(Kn&&be<ze);if(G.flags&512&&(G.check=h(G.check,Q,be,Ee)),ze-=be,Ee+=be,Kn)break e}else G.head&&(G.head.name=null);G.length=0,G.mode=F;case F:if(G.flags&4096){if(ze===0)break e;be=0;do Kn=Q[Ee+be++],G.head&&Kn&&G.length<65536&&(G.head.comment+=String.fromCharCode(Kn));while(Kn&&be<ze);if(G.flags&512&&(G.check=h(G.check,Q,be,Ee)),ze-=be,Ee+=be,Kn)break e}else G.head&&(G.head.comment=null);G.mode=V;case V:if(G.flags&512){for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(me!==(G.check&65535)){le.msg="header crc mismatch",G.mode=je;break}me=0,Me=0}G.head&&(G.head.hcrc=G.flags>>9&1,G.head.done=!0),le.adler=G.check=0,G.mode=Y;break;case $:for(;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}le.adler=G.check=gn(me),me=0,Me=0,G.mode=X;case X:if(G.havedict===0)return le.next_out=pt,le.avail_out=st,le.next_in=Ee,le.avail_in=ze,G.hold=me,G.bits=Me,g;le.adler=G.check=1,G.mode=Y;case Y:if(Ue===t||Ue===i)break e;case ne:if(G.last){me>>>=Me&7,Me-=Me&7,G.mode=xe;break}for(;Me<3;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}switch(G.last=me&1,me>>>=1,Me-=1,me&3){case 0:G.mode=ie;break;case 1:if(z(G),G.mode=Fe,Ue===i){me>>>=2,Me-=2;break e}break;case 2:G.mode=We;break;case 3:le.msg="invalid block type",G.mode=je}me>>>=2,Me-=2;break;case ie:for(me>>>=Me&7,Me-=Me&7;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if((me&65535)!==(me>>>16^65535)){le.msg="invalid stored block lengths",G.mode=je;break}if(G.length=me&65535,me=0,Me=0,G.mode=ge,Ue===i)break e;case ge:G.mode=Ie;case Ie:if(be=G.length,be){if(be>ze&&(be=ze),be>st&&(be=st),be===0)break e;ye.set(Q.subarray(Ee,Ee+be),pt),ze-=be,Ee+=be,st-=be,pt+=be,G.length-=be;break}G.mode=Y;break;case We:for(;Me<14;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(G.nlen=(me&31)+257,me>>>=5,Me-=5,G.ndist=(me&31)+1,me>>>=5,Me-=5,G.ncode=(me&15)+4,me>>>=4,Me-=4,G.nlen>286||G.ndist>30){le.msg="too many length or distance symbols",G.mode=je;break}G.have=0,G.mode=ct;case ct:for(;G.have<G.ncode;){for(;Me<3;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.lens[xr[G.have++]]=me&7,me>>>=3,Me-=3}for(;G.have<19;)G.lens[xr[G.have++]]=0;if(G.lencode=G.lendyn,G.lenbits=7,qn={bits:G.lenbits},ni=m(a,G.lens,0,19,G.lencode,0,G.work,qn),G.lenbits=qn.bits,ni){le.msg="invalid code lengths set",G.mode=je;break}G.have=0,G.mode=Ae;case Ae:for(;G.have<G.nlen+G.ndist;){for(;en=G.lencode[me&(1<<G.lenbits)-1],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(xn<16)me>>>=dt,Me-=dt,G.lens[G.have++]=xn;else{if(xn===16){for(bi=dt+2;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(me>>>=dt,Me-=dt,G.have===0){le.msg="invalid bit length repeat",G.mode=je;break}Kn=G.lens[G.have-1],be=3+(me&3),me>>>=2,Me-=2}else if(xn===17){for(bi=dt+3;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=dt,Me-=dt,Kn=0,be=3+(me&7),me>>>=3,Me-=3}else{for(bi=dt+7;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=dt,Me-=dt,Kn=0,be=11+(me&127),me>>>=7,Me-=7}if(G.have+be>G.nlen+G.ndist){le.msg="invalid bit length repeat",G.mode=je;break}for(;be--;)G.lens[G.have++]=Kn}}if(G.mode===je)break;if(G.lens[256]===0){le.msg="invalid code -- missing end-of-block",G.mode=je;break}if(G.lenbits=9,qn={bits:G.lenbits},ni=m(s,G.lens,0,G.nlen,G.lencode,0,G.work,qn),G.lenbits=qn.bits,ni){le.msg="invalid literal/lengths set",G.mode=je;break}if(G.distbits=6,G.distcode=G.distdyn,qn={bits:G.distbits},ni=m(n,G.lens,G.nlen,G.ndist,G.distcode,0,G.work,qn),G.distbits=qn.bits,ni){le.msg="invalid distances set",G.mode=je;break}if(G.mode=Fe,Ue===i)break e;case Fe:G.mode=Xe;case Xe:if(ze>=6&&st>=258){le.next_out=pt,le.avail_out=st,le.next_in=Ee,le.avail_in=ze,G.hold=me,G.bits=Me,p(le,Se),pt=le.next_out,ye=le.output,st=le.avail_out,Ee=le.next_in,Q=le.input,ze=le.avail_in,me=G.hold,Me=G.bits,G.mode===Y&&(G.back=-1);break}for(G.back=0;en=G.lencode[me&(1<<G.lenbits)-1],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(Ct&&!(Ct&240)){for(Qt=dt,Xi=Ct,Pi=xn;en=G.lencode[Pi+((me&(1<<Qt+Xi)-1)>>Qt)],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(Qt+dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=Qt,Me-=Qt,G.back+=Qt}if(me>>>=dt,Me-=dt,G.back+=dt,G.length=xn,Ct===0){G.mode=Pe;break}if(Ct&32){G.back=-1,G.mode=Y;break}if(Ct&64){le.msg="invalid literal/length code",G.mode=je;break}G.extra=Ct&15,G.mode=Ge;case Ge:if(G.extra){for(bi=G.extra;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.length+=me&(1<<G.extra)-1,me>>>=G.extra,Me-=G.extra,G.back+=G.extra}G.was=G.length,G.mode=it;case it:for(;en=G.distcode[me&(1<<G.distbits)-1],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(!(Ct&240)){for(Qt=dt,Xi=Ct,Pi=xn;en=G.distcode[Pi+((me&(1<<Qt+Xi)-1)>>Qt)],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(Qt+dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=Qt,Me-=Qt,G.back+=Qt}if(me>>>=dt,Me-=dt,G.back+=dt,Ct&64){le.msg="invalid distance code",G.mode=je;break}G.offset=xn,G.extra=Ct&15,G.mode=Dt;case Dt:if(G.extra){for(bi=G.extra;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.offset+=me&(1<<G.extra)-1,me>>>=G.extra,Me-=G.extra,G.back+=G.extra}if(G.offset>G.dmax){le.msg="invalid distance too far back",G.mode=je;break}G.mode=wt;case wt:if(st===0)break e;if(be=Se-st,G.offset>be){if(be=G.offset-be,be>G.whave&&G.sane){le.msg="invalid distance too far back",G.mode=je;break}be>G.wnext?(be-=G.wnext,we=G.wsize-be):we=G.wnext-be,be>G.length&&(be=G.length),ee=G.window}else ee=ye,we=pt-G.offset,be=G.length;be>st&&(be=st),st-=be,G.length-=be;do ye[pt++]=ee[we++];while(--be);G.length===0&&(G.mode=Xe);break;case Pe:if(st===0)break e;ye[pt++]=G.length,st--,G.mode=Xe;break;case xe:if(G.wrap){for(;Me<32;){if(ze===0)break e;ze--,me|=Q[Ee++]<<Me,Me+=8}if(Se-=st,le.total_out+=Se,G.total+=Se,Se&&(le.adler=G.check=G.flags?h(G.check,ye,Se,pt-Se):f(G.check,ye,Se,pt-Se)),Se=st,(G.flags?me:gn(me))!==G.check){le.msg="incorrect data check",G.mode=je;break}me=0,Me=0}G.mode=et;case et:if(G.wrap&&G.flags){for(;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(me!==(G.total&4294967295)){le.msg="incorrect length check",G.mode=je;break}me=0,Me=0}G.mode=rt;case rt:ni=c;break e;case je:ni=u;break e;case Ft:return v;case Gt:default:return S}return le.next_out=pt,le.avail_out=st,le.next_in=Ee,le.avail_in=ze,G.hold=me,G.bits=Me,(G.wsize||Se!==le.avail_out&&G.mode<je&&(G.mode<xe||Ue!==e))&&Ve(le,le.output,le.next_out,Se-le.avail_out)?(G.mode=Ft,v):(k-=le.avail_in,Se-=le.avail_out,le.total_in+=k,le.total_out+=Se,G.total+=Se,G.wrap&&Se&&(le.adler=G.check=G.flags?h(G.check,ye,Se,le.next_out-Se):f(G.check,ye,Se,le.next_out-Se)),le.data_type=G.bits+(G.last?64:0)+(G.mode===Y?128:0)+(G.mode===Fe||G.mode===ge?256:0),(k===0&&Se===0||Ue===e)&&ni===o&&(ni=E),ni)},"inflate"),Je=r(le=>{if(!le||!le.state)return S;let Ue=le.state;return Ue.window&&(Ue.window=null),le.state=null,o},"inflateEnd"),Ye=r((le,Ue)=>{if(!le||!le.state)return S;const G=le.state;return G.wrap&2?(G.head=Ue,Ue.done=!1,o):S},"inflateGetHeader"),lt=r((le,Ue)=>{const G=Ue.length;let Q,ye,Ee;return!le||!le.state||(Q=le.state,Q.wrap!==0&&Q.mode!==X)?S:Q.mode===X&&(ye=1,ye=f(ye,Ue,G,0),ye!==Q.check)?u:(Ee=Ve(le,Ue,G,G),Ee?(Q.mode=Ft,v):(Q.havedict=1,o))},"inflateSetDictionary");B.exports.inflateReset=Sn,B.exports.inflateReset2=nn,B.exports.inflateResetKeep=$n,B.exports.inflateInit=Wn,B.exports.inflateInit2=Vt,B.exports.inflate=He,B.exports.inflateEnd=Je,B.exports.inflateGetHeader=Ye,B.exports.inflateSetDictionary=lt,B.exports.inflateInfo="pako inflate (from Nodeca project)"},9709058974:B=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=r((i,o,c,g,S,u,v,E)=>{const b=E.bits;let _=0,C=0,I=0,A=0,w=0,O=0,R=0,F=0,V=0,$=0,X,Y,ne,ie,ge,Ie=null,We=0,ct;const Ae=new Uint16Array(15+1),Fe=new Uint16Array(15+1);let Xe=null,Ge=0,it,Dt,wt;for(_=0;_<=15;_++)Ae[_]=0;for(C=0;C<g;C++)Ae[o[c+C]]++;for(w=b,A=15;A>=1&&Ae[A]===0;A--);if(w>A&&(w=A),A===0)return S[u++]=1<<24|64<<16|0,S[u++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<A&&Ae[I]===0;I++);for(w<I&&(w=I),F=1,_=1;_<=15;_++)if(F<<=1,F-=Ae[_],F<0)return-1;if(F>0&&(i===0||A!==1))return-1;for(Fe[1]=0,_=1;_<15;_++)Fe[_+1]=Fe[_]+Ae[_];for(C=0;C<g;C++)o[c+C]!==0&&(v[Fe[o[c+C]]++]=C);if(i===0?(Ie=Xe=v,ct=19):i===1?(Ie=a,We-=257,Xe=s,Ge-=257,ct=256):(Ie=n,Xe=e,ct=-1),$=0,C=0,_=I,ge=u,O=w,R=0,ne=-1,V=1<<w,ie=V-1,i===1&&V>852||i===2&&V>592)return 1;for(;;){it=_-R,v[C]<ct?(Dt=0,wt=v[C]):v[C]>ct?(Dt=Xe[Ge+v[C]],wt=Ie[We+v[C]]):(Dt=32+64,wt=0),X=1<<_-R,Y=1<<O,I=Y;do Y-=X,S[ge+($>>R)+Y]=it<<24|Dt<<16|wt|0;while(Y!==0);for(X=1<<_-1;$&X;)X>>=1;if(X!==0?($&=X-1,$+=X):$=0,C++,--Ae[_]===0){if(_===A)break;_=o[c+v[C]]}if(_>w&&($&ie)!==ne){for(R===0&&(R=w),ge+=I,O=_-R,F=1<<O;O+R<A&&(F-=Ae[O+R],!(F<=0));)O++,F<<=1;if(V+=1<<O,i===1&&V>852||i===2&&V>592)return 1;ne=$&ie,S[ne]=w<<24|O<<16|ge-u|0}}return $!==0&&(S[ge+$]=_-R<<24|64<<16|0),E.bits=w,0},"inflate_table");B.exports=t},3435039830:B=>{"use strict";B.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},8891166839:B=>{"use strict";function p(z){let Ve=z.length;for(;--Ve>=0;)z[Ve]=0}r(p,"zero");const m=0,a=1,s=2,n=3,e=258,t=29,i=256,o=i+1+t,c=30,g=19,S=2*o+1,u=15,v=16,E=7,b=256,_=16,C=17,I=18,A=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),O=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F=512,V=new Array((o+2)*2);p(V);const $=new Array(c*2);p($);const X=new Array(F);p(X);const Y=new Array(e-n+1);p(Y);const ne=new Array(t);p(ne);const ie=new Array(c);p(ie);function ge(z,Ve,He,Je,Ye){this.static_tree=z,this.extra_bits=Ve,this.extra_base=He,this.elems=Je,this.max_length=Ye,this.has_stree=z&&z.length}r(ge,"StaticTreeDesc");let Ie,We,ct;function Ae(z,Ve){this.dyn_tree=z,this.max_code=0,this.stat_desc=Ve}r(Ae,"TreeDesc");const Fe=r(z=>z<256?X[z]:X[256+(z>>>7)],"d_code"),Xe=r((z,Ve)=>{z.pending_buf[z.pending++]=Ve&255,z.pending_buf[z.pending++]=Ve>>>8&255},"put_short"),Ge=r((z,Ve,He)=>{z.bi_valid>v-He?(z.bi_buf|=Ve<<z.bi_valid&65535,Xe(z,z.bi_buf),z.bi_buf=Ve>>v-z.bi_valid,z.bi_valid+=He-v):(z.bi_buf|=Ve<<z.bi_valid&65535,z.bi_valid+=He)},"send_bits"),it=r((z,Ve,He)=>{Ge(z,He[Ve*2],He[Ve*2+1])},"send_code"),Dt=r((z,Ve)=>{let He=0;do He|=z&1,z>>>=1,He<<=1;while(--Ve>0);return He>>>1},"bi_reverse"),wt=r(z=>{z.bi_valid===16?(Xe(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):z.bi_valid>=8&&(z.pending_buf[z.pending++]=z.bi_buf&255,z.bi_buf>>=8,z.bi_valid-=8)},"bi_flush"),Pe=r((z,Ve)=>{const He=Ve.dyn_tree,Je=Ve.max_code,Ye=Ve.stat_desc.static_tree,lt=Ve.stat_desc.has_stree,le=Ve.stat_desc.extra_bits,Ue=Ve.stat_desc.extra_base,G=Ve.stat_desc.max_length;let Q,ye,Ee,pt,ze,st,me=0;for(pt=0;pt<=u;pt++)z.bl_count[pt]=0;for(He[z.heap[z.heap_max]*2+1]=0,Q=z.heap_max+1;Q<S;Q++)ye=z.heap[Q],pt=He[He[ye*2+1]*2+1]+1,pt>G&&(pt=G,me++),He[ye*2+1]=pt,!(ye>Je)&&(z.bl_count[pt]++,ze=0,ye>=Ue&&(ze=le[ye-Ue]),st=He[ye*2],z.opt_len+=st*(pt+ze),lt&&(z.static_len+=st*(Ye[ye*2+1]+ze)));if(me!==0){do{for(pt=G-1;z.bl_count[pt]===0;)pt--;z.bl_count[pt]--,z.bl_count[pt+1]+=2,z.bl_count[G]--,me-=2}while(me>0);for(pt=G;pt!==0;pt--)for(ye=z.bl_count[pt];ye!==0;)Ee=z.heap[--Q],!(Ee>Je)&&(He[Ee*2+1]!==pt&&(z.opt_len+=(pt-He[Ee*2+1])*He[Ee*2],He[Ee*2+1]=pt),ye--)}},"gen_bitlen"),xe=r((z,Ve,He)=>{const Je=new Array(u+1);let Ye=0,lt,le;for(lt=1;lt<=u;lt++)Je[lt]=Ye=Ye+He[lt-1]<<1;for(le=0;le<=Ve;le++){let Ue=z[le*2+1];Ue!==0&&(z[le*2]=Dt(Je[Ue]++,Ue))}},"gen_codes"),et=r(()=>{let z,Ve,He,Je,Ye;const lt=new Array(u+1);for(He=0,Je=0;Je<t-1;Je++)for(ne[Je]=He,z=0;z<1<<A[Je];z++)Y[He++]=Je;for(Y[He-1]=Je,Ye=0,Je=0;Je<16;Je++)for(ie[Je]=Ye,z=0;z<1<<w[Je];z++)X[Ye++]=Je;for(Ye>>=7;Je<c;Je++)for(ie[Je]=Ye<<7,z=0;z<1<<w[Je]-7;z++)X[256+Ye++]=Je;for(Ve=0;Ve<=u;Ve++)lt[Ve]=0;for(z=0;z<=143;)V[z*2+1]=8,z++,lt[8]++;for(;z<=255;)V[z*2+1]=9,z++,lt[9]++;for(;z<=279;)V[z*2+1]=7,z++,lt[7]++;for(;z<=287;)V[z*2+1]=8,z++,lt[8]++;for(xe(V,o+1,lt),z=0;z<c;z++)$[z*2+1]=5,$[z*2]=Dt(z,5);Ie=new ge(V,A,i+1,o,u),We=new ge($,w,0,c,u),ct=new ge(new Array(0),O,0,g,E)},"tr_static_init"),rt=r(z=>{let Ve;for(Ve=0;Ve<o;Ve++)z.dyn_ltree[Ve*2]=0;for(Ve=0;Ve<c;Ve++)z.dyn_dtree[Ve*2]=0;for(Ve=0;Ve<g;Ve++)z.bl_tree[Ve*2]=0;z.dyn_ltree[b*2]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0},"init_block"),je=r(z=>{z.bi_valid>8?Xe(z,z.bi_buf):z.bi_valid>0&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0},"bi_windup"),Ft=r((z,Ve,He,Je)=>{je(z),Je&&(Xe(z,He),Xe(z,~He)),z.pending_buf.set(z.window.subarray(Ve,Ve+He),z.pending),z.pending+=He},"copy_block"),Gt=r((z,Ve,He,Je)=>{const Ye=Ve*2,lt=He*2;return z[Ye]<z[lt]||z[Ye]===z[lt]&&Je[Ve]<=Je[He]},"smaller"),Xt=r((z,Ve,He)=>{const Je=z.heap[He];let Ye=He<<1;for(;Ye<=z.heap_len&&(Ye<z.heap_len&&Gt(Ve,z.heap[Ye+1],z.heap[Ye],z.depth)&&Ye++,!Gt(Ve,Je,z.heap[Ye],z.depth));)z.heap[He]=z.heap[Ye],He=Ye,Ye<<=1;z.heap[He]=Je},"pqdownheap"),sn=r((z,Ve,He)=>{let Je,Ye,lt=0,le,Ue;if(z.last_lit!==0)do Je=z.pending_buf[z.d_buf+lt*2]<<8|z.pending_buf[z.d_buf+lt*2+1],Ye=z.pending_buf[z.l_buf+lt],lt++,Je===0?it(z,Ye,Ve):(le=Y[Ye],it(z,le+i+1,Ve),Ue=A[le],Ue!==0&&(Ye-=ne[le],Ge(z,Ye,Ue)),Je--,le=Fe(Je),it(z,le,He),Ue=w[le],Ue!==0&&(Je-=ie[le],Ge(z,Je,Ue)));while(lt<z.last_lit);it(z,b,Ve)},"compress_block"),cn=r((z,Ve)=>{const He=Ve.dyn_tree,Je=Ve.stat_desc.static_tree,Ye=Ve.stat_desc.has_stree,lt=Ve.stat_desc.elems;let le,Ue,G=-1,Q;for(z.heap_len=0,z.heap_max=S,le=0;le<lt;le++)He[le*2]!==0?(z.heap[++z.heap_len]=G=le,z.depth[le]=0):He[le*2+1]=0;for(;z.heap_len<2;)Q=z.heap[++z.heap_len]=G<2?++G:0,He[Q*2]=1,z.depth[Q]=0,z.opt_len--,Ye&&(z.static_len-=Je[Q*2+1]);for(Ve.max_code=G,le=z.heap_len>>1;le>=1;le--)Xt(z,He,le);Q=lt;do le=z.heap[1],z.heap[1]=z.heap[z.heap_len--],Xt(z,He,1),Ue=z.heap[1],z.heap[--z.heap_max]=le,z.heap[--z.heap_max]=Ue,He[Q*2]=He[le*2]+He[Ue*2],z.depth[Q]=(z.depth[le]>=z.depth[Ue]?z.depth[le]:z.depth[Ue])+1,He[le*2+1]=He[Ue*2+1]=Q,z.heap[1]=Q++,Xt(z,He,1);while(z.heap_len>=2);z.heap[--z.heap_max]=z.heap[1],Pe(z,Ve),xe(He,G,z.bl_count)},"build_tree"),Bt=r((z,Ve,He)=>{let Je,Ye=-1,lt,le=Ve[0*2+1],Ue=0,G=7,Q=4;for(le===0&&(G=138,Q=3),Ve[(He+1)*2+1]=65535,Je=0;Je<=He;Je++)lt=le,le=Ve[(Je+1)*2+1],!(++Ue<G&&lt===le)&&(Ue<Q?z.bl_tree[lt*2]+=Ue:lt!==0?(lt!==Ye&&z.bl_tree[lt*2]++,z.bl_tree[_*2]++):Ue<=10?z.bl_tree[C*2]++:z.bl_tree[I*2]++,Ue=0,Ye=lt,le===0?(G=138,Q=3):lt===le?(G=6,Q=3):(G=7,Q=4))},"scan_tree"),gn=r((z,Ve,He)=>{let Je,Ye=-1,lt,le=Ve[0*2+1],Ue=0,G=7,Q=4;for(le===0&&(G=138,Q=3),Je=0;Je<=He;Je++)if(lt=le,le=Ve[(Je+1)*2+1],!(++Ue<G&&lt===le)){if(Ue<Q)do it(z,lt,z.bl_tree);while(--Ue!==0);else lt!==0?(lt!==Ye&&(it(z,lt,z.bl_tree),Ue--),it(z,_,z.bl_tree),Ge(z,Ue-3,2)):Ue<=10?(it(z,C,z.bl_tree),Ge(z,Ue-3,3)):(it(z,I,z.bl_tree),Ge(z,Ue-11,7));Ue=0,Ye=lt,le===0?(G=138,Q=3):lt===le?(G=6,Q=3):(G=7,Q=4)}},"send_tree"),Ci=r(z=>{let Ve;for(Bt(z,z.dyn_ltree,z.l_desc.max_code),Bt(z,z.dyn_dtree,z.d_desc.max_code),cn(z,z.bl_desc),Ve=g-1;Ve>=3&&z.bl_tree[R[Ve]*2+1]===0;Ve--);return z.opt_len+=3*(Ve+1)+5+5+4,Ve},"build_bl_tree"),$n=r((z,Ve,He,Je)=>{let Ye;for(Ge(z,Ve-257,5),Ge(z,He-1,5),Ge(z,Je-4,4),Ye=0;Ye<Je;Ye++)Ge(z,z.bl_tree[R[Ye]*2+1],3);gn(z,z.dyn_ltree,Ve-1),gn(z,z.dyn_dtree,He-1)},"send_all_trees"),Sn=r(z=>{let Ve=4093624447,He;for(He=0;He<=31;He++,Ve>>>=1)if(Ve&1&&z.dyn_ltree[He*2]!==0)return 0;if(z.dyn_ltree[9*2]!==0||z.dyn_ltree[10*2]!==0||z.dyn_ltree[13*2]!==0)return 1;for(He=32;He<i;He++)if(z.dyn_ltree[He*2]!==0)return 1;return 0},"detect_data_type");let nn=!1;const Vt=r(z=>{nn||(et(),nn=!0),z.l_desc=new Ae(z.dyn_ltree,Ie),z.d_desc=new Ae(z.dyn_dtree,We),z.bl_desc=new Ae(z.bl_tree,ct),z.bi_buf=0,z.bi_valid=0,rt(z)},"_tr_init"),Wn=r((z,Ve,He,Je)=>{Ge(z,(m<<1)+(Je?1:0),3),Ft(z,Ve,He,!0)},"_tr_stored_block"),Lt=r(z=>{Ge(z,a<<1,3),it(z,b,V),wt(z)},"_tr_align"),zt=r((z,Ve,He,Je)=>{let Ye,lt,le=0;z.level>0?(z.strm.data_type===2&&(z.strm.data_type=Sn(z)),cn(z,z.l_desc),cn(z,z.d_desc),le=Ci(z),Ye=z.opt_len+3+7>>>3,lt=z.static_len+3+7>>>3,lt<=Ye&&(Ye=lt)):Ye=lt=He+5,He+4<=Ye&&Ve!==-1?Wn(z,Ve,He,Je):z.strategy===4||lt===Ye?(Ge(z,(a<<1)+(Je?1:0),3),sn(z,V,$)):(Ge(z,(s<<1)+(Je?1:0),3),$n(z,z.l_desc.max_code+1,z.d_desc.max_code+1,le+1),sn(z,z.dyn_ltree,z.dyn_dtree)),rt(z),Je&&je(z)},"_tr_flush_block"),It=r((z,Ve,He)=>(z.pending_buf[z.d_buf+z.last_lit*2]=Ve>>>8&255,z.pending_buf[z.d_buf+z.last_lit*2+1]=Ve&255,z.pending_buf[z.l_buf+z.last_lit]=He&255,z.last_lit++,Ve===0?z.dyn_ltree[He*2]++:(z.matches++,Ve--,z.dyn_ltree[(Y[He]+i+1)*2]++,z.dyn_dtree[Fe(Ve)*2]++),z.last_lit===z.lit_bufsize-1),"_tr_tally");B.exports._tr_init=Vt,B.exports._tr_stored_block=Wn,B.exports._tr_flush_block=zt,B.exports._tr_tally=It,B.exports._tr_align=Lt},8713386032:B=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r(l,"ZStream"),B.exports=l},8203499834:(B,l,d)=>{"use strict";B.exports=d(687426846)},687426846:(B,l,d)=>{"use strict";var f=l;f.build="minimal",f.Writer=d(2360491163),f.BufferWriter=d(2563953490),f.Reader=d(6844776027),f.BufferReader=d(7297964050),f.util=d(6168016328),f.rpc=d(3806126143),f.roots=d(9353233933),f.configure=h;function h(){f.util._configure(),f.Writer._configure(f.BufferWriter),f.Reader._configure(f.BufferReader)}r(h,"configure"),h()},6844776027:(B,l,d)=>{"use strict";B.exports=s;var f=d(6168016328),h,p=f.LongBits,m=f.utf8;function a(c,g){return RangeError("index out of range: "+c.pos+" + "+(g||1)+" > "+c.len)}r(a,"indexOutOfRange");function s(c){this.buf=c,this.pos=0,this.len=c.length}r(s,"Reader");var n=typeof Uint8Array<"u"?r(function(g){if(g instanceof Uint8Array||Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_typed_array"):r(function(g){if(Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_array"),e=r(function(){return f.Buffer?r(function(S){return(s.create=r(function(v){return f.Buffer.isBuffer(v)?new h(v):n(v)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");s.create=e(),s.prototype._slice=f.Array.prototype.subarray||f.Array.prototype.slice,s.prototype.uint32=r(function(){var g=4294967295;return r(function(){if(g=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(g=(g|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return g},"read_uint32")},"read_uint32_setup")(),s.prototype.int32=r(function(){return this.uint32()|0},"read_int32"),s.prototype.sint32=r(function(){var g=this.uint32();return g>>>1^-(g&1)|0},"read_sint32");function t(){var c=new p(0,0),g=0;if(this.len-this.pos>4){for(;g<4;++g)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw a(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<g*7)>>>0,c}if(this.len-this.pos>4){for(;g<5;++g)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;g<5;++g){if(this.pos>=this.len)throw a(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}r(t,"readLongVarint"),s.prototype.bool=r(function(){return this.uint32()!==0},"read_bool");function i(c,g){return(c[g-4]|c[g-3]<<8|c[g-2]<<16|c[g-1]<<24)>>>0}r(i,"readFixed32_end"),s.prototype.fixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),s.prototype.sfixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new p(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}r(o,"readFixed64"),s.prototype.float=r(function(){if(this.pos+4>this.len)throw a(this,4);var g=f.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},"read_float"),s.prototype.double=r(function(){if(this.pos+8>this.len)throw a(this,4);var g=f.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},"read_double"),s.prototype.bytes=r(function(){var g=this.uint32(),S=this.pos,u=this.pos+g;if(u>this.len)throw a(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice(S,u);if(S===u){var v=f.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,u)},"read_bytes"),s.prototype.string=r(function(){var g=this.bytes();return m.read(g,0,g.length)},"read_string"),s.prototype.skip=r(function(g){if(typeof g=="number"){if(this.pos+g>this.len)throw a(this,g);this.pos+=g}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),s.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},s._configure=function(c){h=c,s.create=e(),h._configure();var g=f.Long?"toLong":"toNumber";f.merge(s.prototype,{int64:r(function(){return t.call(this)[g](!1)},"read_int64"),uint64:r(function(){return t.call(this)[g](!0)},"read_uint64"),sint64:r(function(){return t.call(this).zzDecode()[g](!1)},"read_sint64"),fixed64:r(function(){return o.call(this)[g](!0)},"read_fixed64"),sfixed64:r(function(){return o.call(this)[g](!1)},"read_sfixed64")})}},7297964050:(B,l,d)=>{"use strict";B.exports=p;var f=d(6844776027);(p.prototype=Object.create(f.prototype)).constructor=p;var h=d(6168016328);function p(m){f.call(this,m)}r(p,"BufferReader"),p._configure=function(){h.Buffer&&(p.prototype._slice=h.Buffer.prototype.slice)},p.prototype.string=r(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),p._configure()},9353233933:B=>{"use strict";B.exports={}},3806126143:(B,l,d)=>{"use strict";var f=l;f.Service=d(8739400271)},8739400271:(B,l,d)=>{"use strict";B.exports=h;var f=d(6168016328);(h.prototype=Object.create(f.EventEmitter.prototype)).constructor=h;function h(p,m,a){if(typeof p!="function")throw TypeError("rpcImpl must be a function");f.EventEmitter.call(this),this.rpcImpl=p,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(a)}r(h,"Service"),h.prototype.rpcCall=r(function p(m,a,s,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return f.asPromise(p,t,m,a,s,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,a[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),r(function(o,c){if(o)return t.emit("error",o,m),e(o);if(c===null){t.end(!0);return}if(!(c instanceof s))try{c=s[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(g){return t.emit("error",g,m),e(g)}return t.emit("data",c,m),e(null,c)},"rpcCallback"))}catch(i){t.emit("error",i,m),setTimeout(function(){e(i)},0);return}},"rpcCall"),h.prototype.end=r(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},9382774951:(B,l,d)=>{"use strict";B.exports=h;var f=d(6168016328);function h(s,n){this.lo=s>>>0,this.hi=n>>>0}r(h,"LongBits");var p=h.zero=new h(0,0);p.toNumber=function(){return 0},p.zzEncode=p.zzDecode=function(){return this},p.length=function(){return 1};var m=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=r(function(n){if(n===0)return p;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new h(t,i)},"fromNumber"),h.from=r(function(n){if(typeof n=="number")return h.fromNumber(n);if(f.isString(n))if(f.Long)n=f.Long.fromString(n);else return h.fromNumber(parseInt(n,10));return n.low||n.high?new h(n.low>>>0,n.high>>>0):p},"from"),h.prototype.toNumber=r(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=r(function(n){return f.Long?new f.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=r(function(n){return n===m?p:new h((a.call(n,0)|a.call(n,1)<<8|a.call(n,2)<<16|a.call(n,3)<<24)>>>0,(a.call(n,4)|a.call(n,5)<<8|a.call(n,6)<<16|a.call(n,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=r(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=r(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),h.prototype.zzDecode=r(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),h.prototype.length=r(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6168016328:function(B,l,d){"use strict";var f=l;f.asPromise=d(7410930532),f.base64=d(3824736026),f.EventEmitter=d(6627060659),f.float=d(6797650127),f.inquire=d(3923667175),f.utf8=d(4612067386),f.pool=d(3002561995),f.LongBits=d(9382774951),f.isNode=Boolean(typeof d.g<"u"&&d.g&&d.g.process&&d.g.process.versions&&d.g.process.versions.node),f.global=f.isNode&&d.g||typeof window<"u"&&window||typeof self<"u"&&self||this,f.emptyArray=Object.freeze?Object.freeze([]):[],f.emptyObject=Object.freeze?Object.freeze({}):{},f.isInteger=Number.isInteger||r(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),f.isString=r(function(a){return typeof a=="string"||a instanceof String},"isString"),f.isObject=r(function(a){return a&&typeof a=="object"},"isObject"),f.isset=f.isSet=r(function(a,s){var n=a[s];return n!=null&&a.hasOwnProperty(s)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),f.Buffer=function(){try{var m=f.inquire("buffer").Buffer;return m.prototype.utf8Write?m:null}catch{return null}}(),f._Buffer_from=null,f._Buffer_allocUnsafe=null,f.newBuffer=r(function(a){return typeof a=="number"?f.Buffer?f._Buffer_allocUnsafe(a):new f.Array(a):f.Buffer?f._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),f.Array=typeof Uint8Array<"u"?Uint8Array:Array,f.Long=f.global.dcodeIO&&f.global.dcodeIO.Long||f.global.Long||f.inquire("long"),f.key2Re=/^true|false|0|1$/,f.key32Re=/^-?(?:0|[1-9][0-9]*)$/,f.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,f.longToHash=r(function(a){return a?f.LongBits.from(a).toHash():f.LongBits.zeroHash},"longToHash"),f.longFromHash=r(function(a,s){var n=f.LongBits.fromHash(a);return f.Long?f.Long.fromBits(n.lo,n.hi,s):n.toNumber(Boolean(s))},"longFromHash");function h(m,a,s){for(var n=Object.keys(a),e=0;e<n.length;++e)(m[n[e]]===void 0||!s)&&(m[n[e]]=a[n[e]]);return m}r(h,"merge"),f.merge=h,f.lcFirst=r(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function p(m){function a(s,n){if(!(this instanceof a))return new a(s,n);Object.defineProperty(this,"message",{get:function(){return s}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&h(this,n)}return r(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:r(function(){return m},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:r(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}r(p,"newError"),f.newError=p,f.ProtocolError=p("ProtocolError"),f.oneOfGetter=r(function(a){for(var s={},n=0;n<a.length;++n)s[a[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(s[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),f.oneOfSetter=r(function(a){return function(s){for(var n=0;n<a.length;++n)a[n]!==s&&delete this[a[n]]}},"setOneOf"),f.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},f._configure=function(){var m=f.Buffer;if(!m){f._Buffer_from=f._Buffer_allocUnsafe=null;return}f._Buffer_from=m.from!==Uint8Array.from&&m.from||r(function(s,n){return new m(s,n)},"Buffer_from"),f._Buffer_allocUnsafe=m.allocUnsafe||r(function(s){return new m(s)},"Buffer_allocUnsafe")}},2360491163:(B,l,d)=>{"use strict";B.exports=t;var f=d(6168016328),h,p=f.LongBits,m=f.base64,a=f.utf8;function s(E,b,_){this.fn=E,this.len=b,this.next=void 0,this.val=_}r(s,"Op");function n(){}r(n,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}r(e,"State");function t(){this.len=0,this.head=new s(n,0,0),this.tail=this.head,this.states=null}r(t,"Writer");var i=r(function(){return f.Buffer?r(function(){return(t.create=r(function(){return new h},"create_buffer"))()},"create_buffer_setup"):r(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=r(function(b){return new f.Array(b)},"alloc"),f.Array!==Array&&(t.alloc=f.pool(t.alloc,f.Array.prototype.subarray)),t.prototype._push=r(function(b,_,C){return this.tail=this.tail.next=new s(b,_,C),this.len+=_,this},"push");function o(E,b,_){b[_]=E&255}r(o,"writeByte");function c(E,b,_){for(;E>127;)b[_++]=E&127|128,E>>>=7;b[_]=E}r(c,"writeVarint32");function g(E,b){this.len=E,this.next=void 0,this.val=b}r(g,"VarintOp"),g.prototype=Object.create(s.prototype),g.prototype.fn=c,t.prototype.uint32=r(function(b){return this.len+=(this.tail=this.tail.next=new g((b=b>>>0)<128?1:b<16384?2:b<2097152?3:b<268435456?4:5,b)).len,this},"write_uint32"),t.prototype.int32=r(function(b){return b<0?this._push(S,10,p.fromNumber(b)):this.uint32(b)},"write_int32"),t.prototype.sint32=r(function(b){return this.uint32((b<<1^b>>31)>>>0)},"write_sint32");function S(E,b,_){for(;E.hi;)b[_++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)b[_++]=E.lo&127|128,E.lo=E.lo>>>7;b[_++]=E.lo}r(S,"writeVarint64"),t.prototype.uint64=r(function(b){var _=p.from(b);return this._push(S,_.length(),_)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=r(function(b){var _=p.from(b).zzEncode();return this._push(S,_.length(),_)},"write_sint64"),t.prototype.bool=r(function(b){return this._push(o,1,b?1:0)},"write_bool");function u(E,b,_){b[_]=E&255,b[_+1]=E>>>8&255,b[_+2]=E>>>16&255,b[_+3]=E>>>24}r(u,"writeFixed32"),t.prototype.fixed32=r(function(b){return this._push(u,4,b>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=r(function(b){var _=p.from(b);return this._push(u,4,_.lo)._push(u,4,_.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=r(function(b){return this._push(f.float.writeFloatLE,4,b)},"write_float"),t.prototype.double=r(function(b){return this._push(f.float.writeDoubleLE,8,b)},"write_double");var v=f.Array.prototype.set?r(function(b,_,C){_.set(b,C)},"writeBytes_set"):r(function(b,_,C){for(var I=0;I<b.length;++I)_[C+I]=b[I]},"writeBytes_for");t.prototype.bytes=r(function(b){var _=b.length>>>0;if(!_)return this._push(o,1,0);if(f.isString(b)){var C=t.alloc(_=m.length(b));m.decode(b,C,0),b=C}return this.uint32(_)._push(v,_,b)},"write_bytes"),t.prototype.string=r(function(b){var _=a.length(b);return _?this.uint32(_)._push(a.write,_,b):this._push(o,1,0)},"write_string"),t.prototype.fork=r(function(){return this.states=new e(this),this.head=this.tail=new s(n,0,0),this.len=0,this},"fork"),t.prototype.reset=r(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=r(function(){var b=this.head,_=this.tail,C=this.len;return this.reset().uint32(C),C&&(this.tail.next=b.next,this.tail=_,this.len+=C),this},"ldelim"),t.prototype.finish=r(function(){for(var b=this.head.next,_=this.constructor.alloc(this.len),C=0;b;)b.fn(b.val,_,C),C+=b.len,b=b.next;return _},"finish"),t._configure=function(E){h=E,t.create=i(),h._configure()}},2563953490:(B,l,d)=>{"use strict";B.exports=p;var f=d(2360491163);(p.prototype=Object.create(f.prototype)).constructor=p;var h=d(6168016328);function p(){f.call(this)}r(p,"BufferWriter"),p._configure=function(){p.alloc=h._Buffer_allocUnsafe,p.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?r(function(s,n,e){n.set(s,e)},"writeBytesBuffer_set"):r(function(s,n,e){if(s.copy)s.copy(n,e,0,s.length);else for(var t=0;t<s.length;)n[e++]=s[t++]},"writeBytesBuffer_copy")},p.prototype.bytes=r(function(s){h.isString(s)&&(s=h._Buffer_from(s,"base64"));var n=s.length>>>0;return this.uint32(n),n&&this._push(p.writeBytesBuffer,n,s),this},"write_bytes_buffer");function m(a,s,n){a.length<40?h.utf8.write(a,s,n):s.utf8Write?s.utf8Write(a,n):s.write(a,n)}r(m,"writeStringBuffer"),p.prototype.string=r(function(s){var n=h.Buffer.byteLength(s);return this.uint32(n),n&&this._push(m,n,s),this},"write_string_buffer"),p._configure()},8842724253:(B,l,d)=>{"use strict";d.r(l),d.d(l,{__assign:()=>p,__asyncDelegator:()=>b,__asyncGenerator:()=>E,__asyncValues:()=>_,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>O,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>h,__generator:()=>t,__importDefault:()=>A,__importStar:()=>I,__makeTemplateObject:()=>C,__metadata:()=>n,__param:()=>s,__read:()=>g,__rest:()=>m,__spread:()=>S,__spreadArrays:()=>u,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f=r(function(R,F){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,$){V.__proto__=$}||function(V,$){for(var X in $)$.hasOwnProperty(X)&&(V[X]=$[X])},f(R,F)},"extendStatics");function h(R,F){f(R,F);function V(){this.constructor=R}r(V,"__"),R.prototype=F===null?Object.create(F):(V.prototype=F.prototype,new V)}r(h,"__extends");var p=r(function(){return p=Object.assign||r(function(F){for(var V,$=1,X=arguments.length;$<X;$++){V=arguments[$];for(var Y in V)Object.prototype.hasOwnProperty.call(V,Y)&&(F[Y]=V[Y])}return F},"__assign"),p.apply(this,arguments)},"__assign");function m(R,F){var V={};for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&F.indexOf($)<0&&(V[$]=R[$]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,$=Object.getOwnPropertySymbols(R);X<$.length;X++)F.indexOf($[X])<0&&Object.prototype.propertyIsEnumerable.call(R,$[X])&&(V[$[X]]=R[$[X]]);return V}r(m,"__rest");function a(R,F,V,$){var X=arguments.length,Y=X<3?F:$===null?$=Object.getOwnPropertyDescriptor(F,V):$,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(R,F,V,$);else for(var ie=R.length-1;ie>=0;ie--)(ne=R[ie])&&(Y=(X<3?ne(Y):X>3?ne(F,V,Y):ne(F,V))||Y);return X>3&&Y&&Object.defineProperty(F,V,Y),Y}r(a,"__decorate");function s(R,F){return function(V,$){F(V,$,R)}}r(s,"__param");function n(R,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(R,F)}r(n,"__metadata");function e(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return r(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(We){try{Ie($.next(We))}catch(ct){ne(ct)}}r(ie,"fulfilled");function ge(We){try{Ie($.throw(We))}catch(ct){ne(ct)}}r(ge,"rejected");function Ie(We){We.done?Y(We.value):X(We.value).then(ie,ge)}r(Ie,"step"),Ie(($=$.apply(R,F||[])).next())})}r(e,"__awaiter");function t(R,F){var V={label:0,sent:function(){if(Y[0]&1)throw Y[1];return Y[1]},trys:[],ops:[]},$,X,Y,ne;return ne={next:ie(0),throw:ie(1),return:ie(2)},typeof Symbol=="function"&&(ne[Symbol.iterator]=function(){return this}),ne;function ie(Ie){return function(We){return ge([Ie,We])}}function ge(Ie){if($)throw new TypeError("Generator is already executing.");for(;V;)try{if($=1,X&&(Y=Ie[0]&2?X.return:Ie[0]?X.throw||((Y=X.return)&&Y.call(X),0):X.next)&&!(Y=Y.call(X,Ie[1])).done)return Y;switch(X=0,Y&&(Ie=[Ie[0]&2,Y.value]),Ie[0]){case 0:case 1:Y=Ie;break;case 4:return V.label++,{value:Ie[1],done:!1};case 5:V.label++,X=Ie[1],Ie=[0];continue;case 7:Ie=V.ops.pop(),V.trys.pop();continue;default:if(Y=V.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(Ie[0]===6||Ie[0]===2)){V=0;continue}if(Ie[0]===3&&(!Y||Ie[1]>Y[0]&&Ie[1]<Y[3])){V.label=Ie[1];break}if(Ie[0]===6&&V.label<Y[1]){V.label=Y[1],Y=Ie;break}if(Y&&V.label<Y[2]){V.label=Y[2],V.ops.push(Ie);break}Y[2]&&V.ops.pop(),V.trys.pop();continue}Ie=F.call(R,V)}catch(We){Ie=[6,We],X=0}finally{$=Y=0}if(Ie[0]&5)throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}}r(t,"__generator");function i(R,F,V,$){$===void 0&&($=V),R[$]=F[V]}r(i,"__createBinding");function o(R,F){for(var V in R)V!=="default"&&!F.hasOwnProperty(V)&&(F[V]=R[V])}r(o,"__exportStar");function c(R){var F=typeof Symbol=="function"&&Symbol.iterator,V=F&&R[F],$=0;if(V)return V.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&$>=R.length&&(R=void 0),{value:R&&R[$++],done:!R}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}r(c,"__values");function g(R,F){var V=typeof Symbol=="function"&&R[Symbol.iterator];if(!V)return R;var $=V.call(R),X,Y=[],ne;try{for(;(F===void 0||F-- >0)&&!(X=$.next()).done;)Y.push(X.value)}catch(ie){ne={error:ie}}finally{try{X&&!X.done&&(V=$.return)&&V.call($)}finally{if(ne)throw ne.error}}return Y}r(g,"__read");function S(){for(var R=[],F=0;F<arguments.length;F++)R=R.concat(g(arguments[F]));return R}r(S,"__spread");function u(){for(var R=0,F=0,V=arguments.length;F<V;F++)R+=arguments[F].length;for(var $=Array(R),X=0,F=0;F<V;F++)for(var Y=arguments[F],ne=0,ie=Y.length;ne<ie;ne++,X++)$[X]=Y[ne];return $}r(u,"__spreadArrays");function v(R){return this instanceof v?(this.v=R,this):new v(R)}r(v,"__await");function E(R,F,V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=V.apply(R,F||[]),X,Y=[];return X={},ne("next"),ne("throw"),ne("return"),X[Symbol.asyncIterator]=function(){return this},X;function ne(Ae){$[Ae]&&(X[Ae]=function(Fe){return new Promise(function(Xe,Ge){Y.push([Ae,Fe,Xe,Ge])>1||ie(Ae,Fe)})})}function ie(Ae,Fe){try{ge($[Ae](Fe))}catch(Xe){ct(Y[0][3],Xe)}}function ge(Ae){Ae.value instanceof v?Promise.resolve(Ae.value.v).then(Ie,We):ct(Y[0][2],Ae)}function Ie(Ae){ie("next",Ae)}function We(Ae){ie("throw",Ae)}function ct(Ae,Fe){Ae(Fe),Y.shift(),Y.length&&ie(Y[0][0],Y[0][1])}}r(E,"__asyncGenerator");function b(R){var F,V;return F={},$("next"),$("throw",function(X){throw X}),$("return"),F[Symbol.iterator]=function(){return this},F;function $(X,Y){F[X]=R[X]?function(ne){return(V=!V)?{value:v(R[X](ne)),done:X==="return"}:Y?Y(ne):ne}:Y}}r(b,"__asyncDelegator");function _(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=R[Symbol.asyncIterator],V;return F?F.call(R):(R=typeof c=="function"?c(R):R[Symbol.iterator](),V={},$("next"),$("throw"),$("return"),V[Symbol.asyncIterator]=function(){return this},V);function $(Y){V[Y]=R[Y]&&function(ne){return new Promise(function(ie,ge){ne=R[Y](ne),X(ie,ge,ne.done,ne.value)})}}function X(Y,ne,ie,ge){Promise.resolve(ge).then(function(Ie){Y({value:Ie,done:ie})},ne)}}r(_,"__asyncValues");function C(R,F){return Object.defineProperty?Object.defineProperty(R,"raw",{value:F}):R.raw=F,R}r(C,"__makeTemplateObject");function I(R){if(R&&R.__esModule)return R;var F={};if(R!=null)for(var V in R)Object.hasOwnProperty.call(R,V)&&(F[V]=R[V]);return F.default=R,F}r(I,"__importStar");function A(R){return R&&R.__esModule?R:{default:R}}r(A,"__importDefault");function w(R,F){if(!F.has(R))throw new TypeError("attempted to get private field on non-instance");return F.get(R)}r(w,"__classPrivateFieldGet");function O(R,F,V){if(!F.has(R))throw new TypeError("attempted to set private field on non-instance");return F.set(R,V),V}r(O,"__classPrivateFieldSet")},3277712452:function(B,l,d){var f;(function(h,p){"use strict";var m="1.0.40",a="",s="?",n="function",e="undefined",t="object",i="string",o="major",c="model",g="name",S="type",u="vendor",v="version",E="architecture",b="console",_="mobile",C="tablet",I="smarttv",A="wearable",w="embedded",O=500,R="Amazon",F="Apple",V="ASUS",$="BlackBerry",X="Browser",Y="Chrome",ne="Edge",ie="Firefox",ge="Google",Ie="Huawei",We="LG",ct="Microsoft",Ae="Motorola",Fe="Opera",Xe="Samsung",Ge="Sharp",it="Sony",Dt="Xiaomi",wt="Zebra",Pe="Facebook",xe="Chromium OS",et="Mac OS",rt=" Browser",je=r(function(Lt,zt){var It={};for(var z in Lt)zt[z]&&zt[z].length%2===0?It[z]=zt[z].concat(Lt[z]):It[z]=Lt[z];return It},"extend"),Ft=r(function(Lt){for(var zt={},It=0;It<Lt.length;It++)zt[Lt[It].toUpperCase()]=Lt[It];return zt},"enumerize"),Gt=r(function(Lt,zt){return typeof Lt===i?Xt(zt).indexOf(Xt(Lt))!==-1:!1},"has"),Xt=r(function(Lt){return Lt.toLowerCase()},"lowerize"),sn=r(function(Lt){return typeof Lt===i?Lt.replace(/[^\d\.]/g,a).split(".")[0]:p},"majorize"),cn=r(function(Lt,zt){if(typeof Lt===i)return Lt=Lt.replace(/^\s\s*/,a),typeof zt===e?Lt:Lt.substring(0,O)},"trim"),Bt=r(function(Lt,zt){for(var It=0,z,Ve,He,Je,Ye,lt;It<zt.length&&!Ye;){var le=zt[It],Ue=zt[It+1];for(z=Ve=0;z<le.length&&!Ye&&le[z];)if(Ye=le[z++].exec(Lt),Ye)for(He=0;He<Ue.length;He++)lt=Ye[++Ve],Je=Ue[He],typeof Je===t&&Je.length>0?Je.length===2?typeof Je[1]==n?this[Je[0]]=Je[1].call(this,lt):this[Je[0]]=Je[1]:Je.length===3?typeof Je[1]===n&&!(Je[1].exec&&Je[1].test)?this[Je[0]]=lt?Je[1].call(this,lt,Je[2]):p:this[Je[0]]=lt?lt.replace(Je[1],Je[2]):p:Je.length===4&&(this[Je[0]]=lt?Je[3].call(this,lt.replace(Je[1],Je[2])):p):this[Je]=lt||p;It+=2}},"rgxMapper"),gn=r(function(Lt,zt){for(var It in zt)if(typeof zt[It]===t&&zt[It].length>0){for(var z=0;z<zt[It].length;z++)if(Gt(zt[It][z],Lt))return It===s?p:It}else if(Gt(zt[It],Lt))return It===s?p:It;return zt.hasOwnProperty("*")?zt["*"]:Lt},"strMapper"),Ci={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},$n={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Sn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,Fe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[g,Fe+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[g,Fe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[g,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[g,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[g,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+X]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[g,"Smart Lenovo "+X]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+X],v],[/\bfocus\/([\w\.]+)/i],[v,[g,ie+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,Fe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,Fe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI"+rt]],[/fxios\/([\w\.-]+)/i],[v,[g,ie]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[g,"360"]],[/\b(qq)\/([\w\.]+)/i],[[g,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1"+rt],v],[/samsungbrowser\/([\w\.]+)/i],[v,[g,Xe+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[g,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[g],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Pe],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,Y+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,Y+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+X]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,gn,Ci]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[g,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,ie+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[g,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[E,"amd64"]],[/(ia32(?=;))/i],[[E,Xt]],[/((?:i[346]|x)86)[;\)]/i],[[E,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[E,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[E,"armhf"]],[/windows (ce|mobile); ppc;/i],[[E,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[E,/ower/,a,Xt]],[/(sun4\w)[;\)]/i],[[E,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[E,Xt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[u,Xe],[S,C]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[c,[u,Xe],[S,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[u,F],[S,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[u,F],[S,C]],[/(macintosh);/i],[c,[u,F]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[u,Ge],[S,_]],[/(?:honor)([-\w ]+)[;\)]/i],[c,[u,"Honor"],[S,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[u,Ie],[S,C]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[u,Ie],[S,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[c,/_/g," "],[u,Dt],[S,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[u,Dt],[S,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[u,"OPPO"],[S,_]],[/\b(opd2\d{3}a?) bui/i],[c,[u,"OPPO"],[S,C]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[u,"Vivo"],[S,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[u,"Realme"],[S,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[u,Ae],[S,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[u,Ae],[S,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[u,We],[S,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[u,We],[S,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[u,"Lenovo"],[S,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[u,"Nokia"],[S,_]],[/(pixel c)\b/i],[c,[u,ge],[S,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[u,ge],[S,_]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[u,it],[S,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[u,it],[S,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[u,"OnePlus"],[S,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[u,R],[S,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[u,R],[S,_]],[/(playbook);[-\w\),; ]+(rim)/i],[c,u,[S,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[u,$],[S,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[u,V],[S,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[u,V],[S,_]],[/(nexus 9)/i],[c,[u,"HTC"],[S,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[c,/_/g," "],[S,_]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[c,[u,"TCL"],[S,C]],[/(itel) ((\w+))/i],[[u,Xt],c,[S,gn,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[u,"Acer"],[S,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[u,"Meizu"],[S,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[u,"Ulefone"],[S,_]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[c,[u,"Energizer"],[S,_]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[c,[u,"Cat"],[S,_]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[c,[u,"Smartfren"],[S,_]],[/droid.+; (a(?:015|06[35]|142p?))/i],[c,[u,"Nothing"],[S,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,c,[S,_]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,c,[S,C]],[/(surface duo)/i],[c,[u,ct],[S,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[u,"Fairphone"],[S,_]],[/(u304aa)/i],[c,[u,"AT&T"],[S,_]],[/\bsie-(\w*)/i],[c,[u,"Siemens"],[S,_]],[/\b(rct\w+) b/i],[c,[u,"RCA"],[S,C]],[/\b(venue[\d ]{2,7}) b/i],[c,[u,"Dell"],[S,C]],[/\b(q(?:mv|ta)\w+) b/i],[c,[u,"Verizon"],[S,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[u,"Barnes & Noble"],[S,C]],[/\b(tm\d{3}\w+) b/i],[c,[u,"NuVision"],[S,C]],[/\b(k88) b/i],[c,[u,"ZTE"],[S,C]],[/\b(nx\d{3}j) b/i],[c,[u,"ZTE"],[S,_]],[/\b(gen\d{3}) b.+49h/i],[c,[u,"Swiss"],[S,_]],[/\b(zur\d{3}) b/i],[c,[u,"Swiss"],[S,C]],[/\b((zeki)?tb.*\b) b/i],[c,[u,"Zeki"],[S,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],c,[S,C]],[/\b(ns-?\w{0,9}) b/i],[c,[u,"Insignia"],[S,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[u,"NextBook"],[S,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],c,[S,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],c,[S,_]],[/\b(ph-1) /i],[c,[u,"Essential"],[S,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[u,"Envizen"],[S,C]],[/\b(trio[-\w\. ]+) b/i],[c,[u,"MachSpeed"],[S,C]],[/\btu_(1491) b/i],[c,[u,"Rotor"],[S,C]],[/(shield[\w ]+) b/i],[c,[u,"Nvidia"],[S,C]],[/(sprint) (\w+)/i],[u,c,[S,_]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[u,ct],[S,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[u,wt],[S,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[u,wt],[S,_]],[/smart-tv.+(samsung)/i],[u,[S,I]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[u,Xe],[S,I]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,We],[S,I]],[/(apple) ?tv/i],[u,[c,F+" TV"],[S,I]],[/crkey/i],[[c,Y+"cast"],[u,ge],[S,I]],[/droid.+aft(\w+)( bui|\))/i],[c,[u,R],[S,I]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[u,Ge],[S,I]],[/(bravia[\w ]+)( bui|\))/i],[c,[u,it],[S,I]],[/(mitv-\w{5}) bui/i],[c,[u,Dt],[S,I]],[/Hbbtv.*(technisat) (.*);/i],[u,c,[S,I]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,cn],[c,cn],[S,I]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,I]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,c,[S,b]],[/droid.+; (shield) bui/i],[c,[u,"Nvidia"],[S,b]],[/(playstation [345portablevi]+)/i],[c,[u,it],[S,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[u,ct],[S,b]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[c,[u,Xe],[S,A]],[/((pebble))app/i],[u,c,[S,A]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[u,F],[S,A]],[/droid.+; (glass) \d/i],[c,[u,ge],[S,A]],[/droid.+; (wt63?0{2,3})\)/i],[c,[u,wt],[S,A]],[/droid.+; (glass) \d/i],[c,[u,ge],[S,A]],[/(pico) (4|neo3(?: link|pro)?)/i],[u,c,[S,A]],[/; (quest( \d| pro)?)/i],[c,[u,Pe],[S,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[S,w]],[/(aeobc)\b/i],[c,[u,R],[S,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[S,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[S,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,_]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,ne+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[g,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[v,gn,$n]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,gn,$n],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,et],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,$]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,ie+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[g,Y+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,xe],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,v]]},nn=r(function(Lt,zt){if(typeof Lt===t&&(zt=Lt,Lt=p),!(this instanceof nn))return new nn(Lt,zt).getResult();var It=typeof h!==e&&h.navigator?h.navigator:p,z=Lt||(It&&It.userAgent?It.userAgent:a),Ve=It&&It.userAgentData?It.userAgentData:p,He=zt?je(Sn,zt):Sn,Je=It&&It.userAgent==z;return this.getBrowser=function(){var Ye={};return Ye[g]=p,Ye[v]=p,Bt.call(Ye,z,He.browser),Ye[o]=sn(Ye[v]),Je&&It&&It.brave&&typeof It.brave.isBrave==n&&(Ye[g]="Brave"),Ye},this.getCPU=function(){var Ye={};return Ye[E]=p,Bt.call(Ye,z,He.cpu),Ye},this.getDevice=function(){var Ye={};return Ye[u]=p,Ye[c]=p,Ye[S]=p,Bt.call(Ye,z,He.device),Je&&!Ye[S]&&Ve&&Ve.mobile&&(Ye[S]=_),Je&&Ye[c]=="Macintosh"&&It&&typeof It.standalone!==e&&It.maxTouchPoints&&It.maxTouchPoints>2&&(Ye[c]="iPad",Ye[S]=C),Ye},this.getEngine=function(){var Ye={};return Ye[g]=p,Ye[v]=p,Bt.call(Ye,z,He.engine),Ye},this.getOS=function(){var Ye={};return Ye[g]=p,Ye[v]=p,Bt.call(Ye,z,He.os),Je&&!Ye[g]&&Ve&&Ve.platform&&Ve.platform!="Unknown"&&(Ye[g]=Ve.platform.replace(/chrome os/i,xe).replace(/macos/i,et)),Ye},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return z},this.setUA=function(Ye){return z=typeof Ye===i&&Ye.length>O?cn(Ye,O):Ye,this},this.setUA(z),this},"UAParser");nn.VERSION=m,nn.BROWSER=Ft([g,v,o]),nn.CPU=Ft([E]),nn.DEVICE=Ft([c,u,S,b,_,I,C,A,w]),nn.ENGINE=nn.OS=Ft([g,v]),typeof l!==e?(e!=="object"&&B.exports&&(l=B.exports=nn),l.UAParser=nn):n==="function"&&d.amdO?(f=function(){return nn}.call(l,d,l,B),f!==p&&(B.exports=f)):typeof h!==e&&(h.UAParser=nn);var Vt=typeof h!==e&&(h.jQuery||h.Zepto);if(Vt&&!Vt.ua){var Wn=new nn;Vt.ua=Wn.getResult(),Vt.ua.get=function(){return Wn.getUA()},Vt.ua.set=function(Lt){Wn.setUA(Lt);var zt=Wn.getResult();for(var It in zt)Vt.ua[It]=zt[It]}}})(typeof window=="object"?window:this)},3323583056:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9013967876));let m=r(class{needUpdate(s){return this.activeSpeakers?this.speakerScores[s]===0&&this.activeSpeakers.includes(s)||this.speakerScores[s]>0&&!this.activeSpeakers.includes(s):!0}updateActiveSpeakers(s,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let u=0;u<i.length;u++){const v=i[u];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((u,v)=>v.activeScore-u.activeScore).filter(function(u){return u.activeScore>0}).map(function(u){return u.attendeeId});this.activeSpeakers=o,n(o);const g=o.length>0&&o[0]===this.selfAttendeeId&&s.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==g&&(this.hasBandwidthPriority=g,this.hasBandwidthPriorityCallback(g))}updateScore(s,n,e,t,i){const o=s.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(s,n,e))}subscribe(s,n,e,t){const i=r((c,g)=>{if(!g){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(s,n,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(S,u,v,E)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(s,n,S,u,v)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new p.default(this.updateIntervalMs);if(o.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(s,n,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const c=new p.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(s){const n=this.detectorCallbackToHandler.get(s);this.detectorCallbackToHandler.delete(s),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(s);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(s));const t=this.detectorCallbackToScoresTimer.get(s);t&&(t.stop(),this.detectorCallbackToHandler.delete(s))}destroy(){return f(this,void 0,void 0,function*(){for(const s of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s);for(const s of this.detectorCallbackToActivityTimer.values())s.stop();for(const s of this.detectorCallbackToScoresTimer.values())s.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(s,n,e,t=1e3,i=200){this.realtimeController=s,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=m},1644292716:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{calculateScore(h,p,m){(m||p===null)&&(p=0),this.volumes.hasOwnProperty(h)||(this.volumes[h]=0),p>this.silenceThreshold?p=1:p=0;const a=this.volumes[h]*this.speakerWeight+p*(1-this.speakerWeight);this.volumes[h]=a;for(const s in this.volumes)s!==h&&(this.volumes[s]=Math.max(this.volumes[s]-this.takeoverRate*p,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(h=.9,p=.01,m=.2,a=.2){this.speakerWeight=h,this.cutoffThreshold=p,this.silenceThreshold=m,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=d},9821410283:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class bS{static create(h,p){const m=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!h||h.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!m.test(h))throw new Error(`appName must satisfy ${m} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!p||p.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(p))throw new Error("appVersion must satisfy Semantic Versioning format");return new bS(h,p)}constructor(h,p){this.appName=h,this.appVersion=p}},"ApplicationMetadata");l.default=d},4846700713:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Attendee");l.default=d},3227886346:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8351168186)),m=h(d(3741513515));let a=r(class{bindAudioElement(n){return f(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return f(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return f(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)m.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return f(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(u=>{t&&u.meetingAudioStreamBecameInactive(t),this.audioStream&&u.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(o===c)return;const g=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=null),i)try{yield g.setSinkId(o)}catch(u){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${u}`),u}this.browserBehavior.hasChromiumWebRTC()&&(g.srcObject=S)})}getCurrentMeetingAudioStream(){return f(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return f(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return f(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return f(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new p.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},4999349075:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8351168186));let p=r(class _u{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new _u(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new _u(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new _u(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,s=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new h.default().supportsAudioRedundancy()&&s}},"AudioProfile");l.default=p},8430013536:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let d=r(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null,this.isSessionConnected=!1}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null,this.isSessionConnected=!1}},"AudioVideoControllerState");l.default=d},616382858:function(B,l,d){"use strict";var f=this&&this.__createBinding||(Object.create?function(G,Q,ye,Ee){Ee===void 0&&(Ee=ye),Object.defineProperty(G,Ee,{enumerable:!0,get:function(){return Q[ye]}})}:function(G,Q,ye,Ee){Ee===void 0&&(Ee=ye),G[Ee]=Q[ye]}),h=this&&this.__setModuleDefault||(Object.create?function(G,Q){Object.defineProperty(G,"default",{enumerable:!0,value:Q})}:function(G,Q){G.default=Q}),p=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var Q={};if(G!=null)for(var ye in G)ye!=="default"&&Object.prototype.hasOwnProperty.call(G,ye)&&f(Q,G,ye);return h(Q,G),Q},m=this&&this.__awaiter||function(G,Q,ye,Ee){function pt(ze){return ze instanceof ye?ze:new ye(function(st){st(ze)})}return r(pt,"adopt"),new(ye||(ye=Promise))(function(ze,st){function me(Se){try{k(Ee.next(Se))}catch(be){st(be)}}r(me,"fulfilled");function Me(Se){try{k(Ee.throw(Se))}catch(be){st(be)}}r(Me,"rejected");function k(Se){Se.done?ze(Se.value):pt(Se.value).then(me,Me)}r(k,"step"),k((Ee=Ee.apply(G,Q||[])).next())})},a=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(3323583056)),n=a(d(3227886346)),e=a(d(4999349075)),t=a(d(8351168186)),i=a(d(3544934903)),o=a(d(1523356655)),c=a(d(8981226922)),g=a(d(3777990285)),S=a(d(4882394368)),u=a(d(1880578541)),v=a(d(4599834734)),E=a(d(2311029370)),b=a(d(5403024322)),_=a(d(3741513515)),C=a(d(4641929542)),I=a(d(3097552577)),A=a(d(953236500)),w=a(d(7338273141)),O=a(d(7258714924)),R=p(d(1448262436)),F=a(d(426218501)),V=a(d(4983545831)),$=d(5391134031),X=a(d(5954709649)),Y=a(d(7063021350)),ne=a(d(4019918320)),ie=a(d(7819987893)),ge=a(d(2918138407)),Ie=a(d(7869625838)),We=a(d(9613312866)),ct=a(d(1495317641)),Ae=a(d(5110013894)),Fe=a(d(3708122413)),Xe=a(d(1504187181)),Ge=a(d(6907504899)),it=a(d(6015743885)),Dt=a(d(3627106901)),wt=a(d(3151098372)),Pe=a(d(9363406688)),xe=a(d(6069988831)),et=a(d(2452872079)),rt=a(d(2471283351)),je=a(d(3894566132)),Ft=a(d(6412210284)),Gt=a(d(839180639)),Xt=a(d(2641934340)),sn=a(d(3450261616)),cn=a(d(7500181884)),Bt=a(d(6769427378)),gn=a(d(1438956810)),Ci=a(d(2962876954)),$n=a(d(3052177122)),Sn=d(903520651),nn=a(d(8261422434)),Vt=a(d(7744958188)),Wn=a(d(1437705752)),Lt=d(6700033168),zt=a(d(5134603106)),It=a(d(5216544790)),z=a(d(7562203998)),Ve=a(d(9251190564)),He=a(d(1695899970)),Je=a(d(3361826027)),Ye=a(d(3423911843)),lt=a(d(338869682)),le=a(d(8430013536));let Ue=r(class Tu{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new s.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(Q){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(Q):null}setAudioProfile(Q){this._audioProfile=Q}addObserver(Q){this.logger.info("adding meeting observer"),this.observerQueue.add(Q)}removeObserver(Q){this.logger.info("removing meeting observer"),this.observerQueue.delete(Q)}forEachObserver(Q){for(const ye of this.observerQueue)_.default.nextTick(()=>{this.observerQueue.has(ye)&&Q(ye)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new le.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new O.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const Q=r(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(ye){ye.type===F.default.WebSocketClosed&&Q()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(Q=>{this.logger.error(`Signaling task pre-start failed: ${Q}`),this.signalingTask=void 0})}start(Q){this.startReturningPromise(Q).then(()=>{this.logger.info("start completed")}).catch(ye=>{this.logger.error(`start failed: ${ye}`)})}startReturningPromise(Q){return(Q==null?void 0:Q.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((ye,Ee)=>{this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!1).then(ye).catch(Ee)})}))}connectWithPromises(Q){const ye=this.meetingSessionContext,Ee=r((ee,en)=>new sn.default(this.logger,en,ee),"timeout");this.monitorTask=new Xe.default(ye,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const pt=this.monitorTask.once(),ze=new wt.default(ye).once();this.receiveIndexTask=new et.default(ye),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const st=new je.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Fe.default(ye),new rt.default(ye),new ct.default(ye),this.receiveIndexTask]).once(),me=new ge.default(ye).once(st),Me=new Y.default(ye).once(me,ze),k=new Ie.default(ye).once(Me),Se=new Ft.default(ye).once(k),be=new We.default(ye).once(Se),we=new Xt.default(ye).once(be);return this.receiveRemotePauseResumeTask=new Pe.default(ye),this.receiveRemotePauseResumeTask.once(we),new je.default(this.logger,this.wrapTaskName("AudioVideoStart"),[pt,Ee(this.configuration.connectionTimeoutMs,new je.default(this.logger,"Peer",[we,this.receiveRemotePauseResumeTask,Q?new sn.default(this.logger,new it.default(this.logger,"FinalizeConnection",[new cn.default(ye),new Gt.default(ye)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new Gt.default(ye)]))])}actionConnect(Q){var ye;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const Ee=!!this.configuration.urls.audioHostURL;if(Ee?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new gn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Ci.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Bt.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new $n.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new lt.default(this.logger,this._realtimeController,Tu.MIN_VOLUME_DECIBELS,Tu.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let st=this.meetingSessionContext.videoUplinkBandwidthPolicy;st||(st=new Je.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=st),st.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Wn.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new z.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new It.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new Ye.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Vt.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const st=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;st&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(st)}else{const st=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(st)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new u.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new nn.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new zt.default,this.meetingSessionContext.videosPaused=new zt.default,this.meetingSessionContext.statsCollector=new X.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,Tu.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},this._videoTileController.registerVideoTileResolutionObserver(this.meetingSessionContext.statsCollector),Q||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(st=>{Sn.Maybe.of(st.audioVideoDidStartConnecting).map(me=>me.bind(st)(!1))}),(ye=this.eventController)===null||ye===void 0||ye.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const pt=Ee&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+pt);const ze=this.connectWithPromises(pt);try{yield ze.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(st){this.signalingTask=void 0;const me=new g.default(this.getMeetingStatusCode(st)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${me} due to error ${st}.`),this.sessionStateController.state()===A.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(I.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(me,!0,st),this.handleMeetingSessionStatus(me,st)||this.notifyStop(me,st)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new sn.default(this.logger,new Ge.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=$.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.meetingSessionContext.isSessionConnected=!0,this.forEachObserver(Q=>{Sn.Maybe.of(Q.audioVideoDidStart).map(ye=>ye.bind(Q)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var Q;return this._reconnectController.disableReconnect(),this.sessionStateController.state()===A.default.NotConnected?((Q=this.meetingSessionContext.signalingClient)===null||Q===void 0||Q.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((ye,Ee)=>{this.sessionStateController.perform(I.default.Disconnect,()=>{this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new g.default(S.default.Left),!1,null).then(ye).catch(Ee)})})}stop(){this.stopReturningPromise()}actionDisconnect(Q,ye,Ee){return m(this,void 0,void 0,function*(){try{yield new je.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new sn.default(this.logger,new Ae.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const pt=[new sn.default(this.logger,new ie.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new je.default(this.logger,this.wrapTaskName("AudioVideoClean"),pt).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(I.default.FinishDisconnecting,()=>{ye||this.notifyStop(Q,Ee)}),this._videoTileController.removeVideoTileResolutionObserver(this.meetingSessionContext.statsCollector)})}update(){let ye=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(ye||(ye=this.meetingSessionContext.peer===void 0),ye||(ye=!this.updateRemoteVideosFromPolicy()),ye||(ye=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!ye)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const Ee=this.sessionStateController.perform(I.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return Ee===w.default.Transitioned||Ee===w.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!R.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===R.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const Q=this.detectChangesInVideosToReceive();if(Q===void 0)return!1;const ye=Q.added,Ee=Q.simulcastStreamUpdates,pt=Q.removed,ze=this.meetingSessionContext,st=[];for(const[me,Me]of Ee.entries()){const k=new V.default;if(k.streamId=Me,k.attendeeId=ze.videoStreamIndex.attendeeIdForStreamId(Me),k.mid=ze.transceiverController.getMidForStreamId(me),k.mid===void 0)return this.logger.info(`No MID found for stream ID ${me}, cannot update stream without renegotiation`),!1;if(st.push(k),ze.transceiverController.setStreamIdForMid(k.mid,Me),ze.videoStreamIndex.overrideStreamIdMappings(me,Me),ze.videoTileController.haveVideoTileForAttendeeId(k.attendeeId)){const Se=ze.videoTileController.getVideoTileForAttendeeId(k.attendeeId);if(!Se.setStreamId)return!1;Se.setStreamId(Me)}}return st.length!==0&&ze.signalingClient.remoteVideoUpdate(st,[]),ye.length!==0||pt.length!==0?!1:(ze.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const Q=this.meetingSessionContext;if(Q.videosToReceive===null||!Q.transceiverController||!Q.transceiverController.getMidForStreamId||!Q.transceiverController.setStreamIdForMid||!Q.videosToReceive.forEach||!Q.signalingClient.remoteVideoUpdate||!Q.videoStreamIndex.overrideStreamIdMappings)return;let ye=[];const Ee=new Map;let pt=[];if(Q.lastVideosToReceive===null)ye=Q.videosToReceive.array();else{const ze=Q.videoStreamIndex;Q.videosToReceive.forEach(st=>{if(Q.lastVideosToReceive.contain(st))return;let me=!1;Q.lastVideosToReceive.forEach(Me=>{me||ze.StreamIdsInSameGroup(Me,st)&&(Ee.set(Me,st),me=!0)}),me||ye.push(st)}),pt=Q.lastVideosToReceive.array().filter(st=>{const me=Q.videosToReceive.contain(st),Me=Ee.has(st);return!me&&!Me})}return this.logger.info(`Request to update remote videos with added: [${ye}], updated: [${Array.from(Ee.entries()).map(ze=>{let[st,me]=ze;return`${st}->${me}`}).join(",")}], removed: [${pt}]`),{added:ye,removed:pt,simulcastStreamUpdates:Ee}}isNotAddingOrRemovingStreams(){const Q=this.detectChangesInVideosToReceive();if(Q===void 0)return!1;const ye=Q.added,Ee=Q.removed;return ye.length!==0||Ee.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const Q=this.meetingSessionContext;if(Q.videosToReceive===null)return!1;const ye=Q.videosToReceive.array().map(me=>Q.videoStreamIndex.groupIdForStreamId(me));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(ye));const Ee=Lt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(Q,ye,Q.videoDownlinkBandwidthPolicy.getVideoPreferences()),pt=new Map,ze=[];for(const me of Ee){let Me=!1;if(!Q.lastVideoSubscriptionConfiguration.has(me.groupId))Me=!0;else{const k=Q.lastVideoSubscriptionConfiguration.get(me.groupId);me.equals(k)||(this.logger.debug(`${JSON.stringify(me)} does not equal ${JSON.stringify(k)}, sending update`),Me=!0)}pt.set(me.groupId,me),Me&&ze.push(me)}Q.lastVideoSubscriptionConfiguration=pt;const st=[];if(Q.lastVideosToReceive!==null){const me=new Set(ye);for(const Me of Q.lastVideosToReceive.array()){const k=Q.videoStreamIndex.groupIdForStreamId(Me);if(!me.has(k)){const Se=Q.transceiverController.getMidForGroupId(k);if(Se===void 0){Q.logger.warn(`Could not find MID for group ID to remove: ${k}`);continue}st.push(Se)}}}return(ze.length!==0||st.length!==0)&&Q.signalingClient.remoteVideoUpdate(ze,st),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const Q=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(Q)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const Q=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!Q||!Q.headerExtensions?!1:Q.headerExtensions.some(ye=>ye.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(Q){const ye=r(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),Q()}),"restartVideo"),Ee=this.sessionStateController.perform(I.default.Update,()=>{ye()});return Ee===w.default.Transitioned||Ee===w.default.DeferredTransition}replaceLocalVideo(Q){return m(this,void 0,void 0,function*(){if(!Q||Q.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const ye=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(ye){const Ee=ye.state(),pt=Q.getVideoTracks()[0].getSettings();ye.bindVideoStream(Ee.boundAttendeeId,!0,Q,pt.width,pt.height,Ee.streamId,Ee.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(Q.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=Q,this.logger.info("Local video input is updated")})}replaceLocalAudio(Q){return m(this,void 0,void 0,function*(){if(!Q||Q.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(Q.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=Q,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(Q){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new je.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new xe.default(this.meetingSessionContext),new sn.default(this.logger,new je.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ie.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new We.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext),new Gt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),Q&&this.sessionStateController.perform(I.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(ye){this.sessionStateController.perform(I.default.FinishUpdating,()=>{const Ee=new g.default(this.getMeetingStatusCode(ye)||S.default.TaskFailed);Ee.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(Ee,ye)})}})}notifyStop(Q,ye){var Ee;if(this.forEachObserver(pt=>{Sn.Maybe.of(pt.audioVideoDidStop).map(ze=>ze.bind(pt)(Q))}),this.eventController){const{signalingOpenDurationMs:pt,poorConnectionCount:ze,startTimeMs:st,iceGatheringDurationMs:me,attendeePresenceDurationMs:Me,meetingStartDurationMs:k}=this.meetingSessionContext,Se={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:st===null?0:Math.round(Date.now()-st),meetingStatus:S.default[Q.statusCode()],signalingOpenDurationMs:pt,iceGatheringDurationMs:me,attendeePresenceDurationMs:Me,poorConnectionCount:ze,meetingStartDurationMs:k,retryCount:this.totalRetryCount},be=ye&&ye.message||((Ee=Q.toString)===null||Ee===void 0?void 0:Ee.call(Q))||"";Se.meetingDurationMs===0?(Se.meetingErrorMessage=be,delete Se.meetingDurationMs,delete Se.attendeePresenceDurationMs,delete Se.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Se)):Q.isFailure()||Q.isAudioConnectionFailure()?(Se.meetingErrorMessage=be,this.eventController.publishEvent("meetingFailed",Se)):this.eventController.publishEvent("meetingEnded",Se)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const Q=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(Q)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(Q,ye){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(pt=>{Sn.Maybe.of(pt.audioVideoWasDemotedFromPrimaryMeeting).map(ze=>ze.bind(pt)(new g.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const Ee=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===A.default.NotConnected?this.sessionStateController.perform(I.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(I.default.Reconnect,()=>{this.actionReconnect(Q)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return Ee||this.sessionStateController.perform(I.default.Fail,()=>{this.actionDisconnect(Q,!1,ye)}),Ee}actionReconnect(Q){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(ye=>{Sn.Maybe.of(ye.audioVideoDidStartConnecting).map(Ee=>Ee.bind(ye)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Pe.default(this.meetingSessionContext);try{yield new je.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new sn.default(this.logger,new je.default(this.logger,"Media",[new ne.default(this.meetingSessionContext),new je.default(this.logger,"Signaling",[new Ge.default(this.meetingSessionContext),new ct.default(this.meetingSessionContext)]),new ge.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new xe.default(this.meetingSessionContext),new sn.default(this.logger,new je.default(this.logger,"UpdateSession",[new Y.default(this.meetingSessionContext),new Ie.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new We.default(this.meetingSessionContext),new Xt.default(this.meetingSessionContext),new Gt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(I.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:ye,poorConnectionCount:Ee,startTimeMs:pt,iceGatheringDurationMs:ze,attendeePresenceDurationMs:st,meetingStartDurationMs:me}=this.meetingSessionContext,Me={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-pt),meetingStatus:S.default[Q.statusCode()],signalingOpenDurationMs:ye,iceGatheringDurationMs:ze,attendeePresenceDurationMs:st,poorConnectionCount:Ee,meetingStartDurationMs:me,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Me)}this.actionFinishConnecting()})}catch(ye){this.sessionStateController.perform(I.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const Ee=new g.default(this.getMeetingStatusCode(ye)||S.default.TaskFailed);this.handleMeetingSessionStatus(Ee,ye)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(Q){return`${Q}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(Q){const ye=/the meeting status code: (\d+)/.exec(Q&&Q.message);return ye&&ye.length>1?Number.parseInt(ye[1],10):null}enforceBandwidthLimitationForSender(Q){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(Q)})}handleMeetingSessionStatus(Q,ye){if(this.logger.info(`handling status: ${S.default[Q.statusCode()]}`),Q.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(Q),Q.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(Q.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(Ee=>{Sn.Maybe.of(Ee.videoSendDidBecomeUnavailable).map(pt=>pt.bind(Ee)())}),!1;if(Q.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(Ee=>{Sn.Maybe.of(Ee.audioVideoWasDemotedFromPrimaryMeeting).map(pt=>pt.bind(Ee)(Q))}),!1;if(Q.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(Q.isFailure()||Q.isTerminal())&&this.meetingSessionContext.reconnectController){const Ee=this.reconnect(Q,ye);return Ee?this.logger.warn(`The audio video controller will reconnect due to status code ${S.default[Q.statusCode()]}${ye?` and error: ${ye.message}`:""}`):this.logger.error(`The audio video controller failed with status code ${S.default[Q.statusCode()]}${ye?` and error: ${ye.message}`:""}`),Ee}return!1}setVideoMaxBandwidthKbps(Q){if(Q<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${Q} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(Q)),this.maxUplinkBandwidthKbps=Q}handleHasBandwidthPriority(Q){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Q),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const ye=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Q);const Ee=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();ye!==Ee&&(this.logger.info(`video send bandwidth priority ${Q} max has changed from ${ye} kbps to ${Ee} kbps`),yield this.enforceBandwidthLimitationForSender(Ee))}})}pauseReceivingStream(Q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([Q])}resumeReceivingStream(Q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([Q])}setVideoCodecSendPreferences(Q){this.videoSendCodecPreferences=Q,this.meetingSessionContext.videoSendCodecPreferences=Q,this.sessionStateController.state()!==A.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:Q}=this.meetingSessionContext;if(!Q)return this.logger.info("meeting has not started"),[];const ye=this.configuration.credentials.attendeeId;return Q.allVideoSendingSourcesExcludingSelf(ye)}encodingSimulcastLayersDidChange(Q){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(ye=>{Sn.Maybe.of(ye.encodingSimulcastLayersDidChange).map(Ee=>Ee.bind(ye)(Q))})}promoteToPrimaryMeeting(Q){return this.actionPromoteToPrimaryMeeting(Q)}actionPromoteToPrimaryMeeting(Q){return m(this,void 0,void 0,function*(){let ye=new g.default(S.default.SignalingRequestFailed);return yield new je.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new sn.default(this.logger,new Dt.default(this.meetingSessionContext,Q,Ee=>{ye=Ee}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=ye.statusCode()===S.default.OK,ye})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(Q=>{Sn.Maybe.of(Q.audioVideoWasDemotedFromPrimaryMeeting).map(ye=>ye.bind(Q)(new g.default(S.default.OK)))})}videoInputDidChange(Q){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(Q?yield this.replaceLocalVideo(Q):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(Q){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!Q)try{Q=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(Q)})}constructor(Q,ye,Ee,pt,ze,st){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new le.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=ye,this.sessionStateController=new C.default(this._logger),this._configuration=Q,this._webSocketAdapter=Ee,this._realtimeController=new b.default(pt),this._realtimeController.realtimeSetLocalAttendeeId(Q.credentials.attendeeId,Q.credentials.externalUserId),this._mediaStreamBroker=pt,this._reconnectController=ze,this._videoTileController=new Ve.default(new He.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=st}},"DefaultAudioVideoController");l.default=Ue,Ue.MIN_VOLUME_DECIBELS=-42,Ue.MAX_VOLUME_DECIBELS=-14,Ue.PING_PONG_INTERVAL_MS=1e4},1292880771:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5384631890)),p=f(d(1653454410)),m=f(d(9416545472)),a=f(d(1946951215)),s=f(d(7136804647)),n=f(d(7147499759)),e=f(d(3777990285)),t=f(d(4882394368)),i=f(d(2653083101)),o=f(d(8855787924)),c=f(d(8796204466)),g=f(d(616382858));let S=r(class extends g.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const E=new s.default;E.meetingId="",E.externalMeetingId="",E.credentials=new n.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new i.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const b=new m.default;super(v||E,b,new c.default(new m.default),new a.default,new o.default(0,new h.default(0,0,0)),new p.default(v||E,b))}},"NoOpAudioVideoController");l.default=S},314828250:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(m,a,s,n){function e(t){return t instanceof s?t:new s(function(i){i(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}r(o,"fulfilled");function c(S){try{g(n.throw(S))}catch(u){i(u)}}r(c,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,c)}r(g,"step"),g((n=n.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(272852764);let p=r(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const s=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,s),s}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,s){this.videoTileController.bindVideoElement(a,s),this.trace("bindVideoElement",{tileId:a,videoElementId:s.id})}unbindVideoElement(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,s),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:s})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const s=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),s}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const s=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,s),s}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const s=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),s}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,s){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,s),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,s){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,s),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,s)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,s,n){this.realtimeController.realtimeSendDataMessage(a,s,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,s){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,s),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,s,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,s,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,s),s})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const s=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,s),s})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,s),s})}startAudioInput(a){return f(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return f(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return f(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return f(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const s=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),s}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const s=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),s}chooseVideoInputQuality(a,s,n){this.deviceController.chooseVideoInputQuality(a,s,n),this.trace("chooseVideoInputQuality",{width:a,height:s,frameRate:n})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,s){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,s)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const s=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),s}startContentShareFromScreenCapture(a,s){const n=this.contentShareController.startContentShareFromScreenCapture(a,s);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,s,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof s<"u"&&(i+=` ${JSON.stringify(s)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const s=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,s),s}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,s,n,e,t,i){this.audioVideoController=a,this.videoTileController=s,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");l.default=p},5565992874:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9775024432)),m=d(9721779232);let a=r(class extends p.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:c,height:g}=o;if(!e||!t){i.clearRect(0,0,c,g);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,c,g),i.drawImage(this.scaledCanvas,0,0,c,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,g),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,c,g),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return f(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},9775024432:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8080066655)),m=d(9721779232),a=h(d(9387566064));let s=r(class extends p.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:c}=this,{width:g,height:S}=c;o.save(),o.clearRect(0,0,g,S),o.drawImage(this.scaledCanvas,0,0,g,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,g,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,c.width,c.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return f(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: { blurStrength: ${t.blurStrength}, filterCPUUtilization: ${t.filterCPUUtilization}, reportingPeriodMillis: ${t.reportingPeriodMillis}}`)}},"BackgroundBlurProcessorProvided");l.default=s},9721779232:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const d={LOW:7,MEDIUM:15,HIGH:30};let f=r(class{static getBlurAmount(p,m){if(p<=0)throw new Error(`invalid value for blur strength: ${p}`);return Math.round(p*m.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=f,f.BLUR_STRENGTH_DIVISOR=540,l.default=d},7840699215:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(c,g,S,u){function v(E){return E instanceof S?E:new S(function(b){b(E)})}return r(v,"adopt"),new(S||(S=Promise))(function(E,b){function _(A){try{I(u.next(A))}catch(w){b(w)}}r(_,"fulfilled");function C(A){try{I(u.throw(A))}catch(w){b(w)}}r(C,"rejected");function I(A){A.done?E(A.value):v(A.value).then(_,C)}r(I,"step"),I((u=u.apply(c,g||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6292069043)),m=h(d(5956893594)),a=h(d(3756404293)),s=h(d(7000795223)),n=h(d(5565992874)),e=h(d(9775024432)),t=h(d(9721779232));let i=r(class extends s.default{setBlurStrength(){}loadAssets(){return f(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=r(class Md extends p.default{static create(g,S){return f(this,void 0,void 0,function*(){g=Md.resolveSpec(g),S=Md.resolveOptions(S);const{logger:u}=S,v=yield Md.isSupported(g,S);if(u.info(`processor is ${v?"":"not"} supported`),!v)return u.warn("Using no-op processor because background blur is not supported"),new i;let E;return(yield e.default.isSupported())?(u.info("Using browser-provided background blur"),E=new e.default(g,S)):(u.info("Using built-in background blur"),E=new n.default(g,S)),yield E.loadAssets(),E})}static resolveOptions(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},g);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new m.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(g,S){return g=Md.resolveSpec(g),S=Md.resolveOptions(S),super.isSupported(g,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},9387566064:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7898988988));let p=r(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=p},7472936477:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class _S{static builder(){return new _S}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const h={height:144,width:256,range:[0,1],channels:3},p={height:144,width:256,range:[0,1],channels:1},m="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=m,this.input=h,this.output=p,this}withPath(h){return this.path=h,this}withInput(h){return this.input=h,this}withOutput(h){return this.output=h,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=d},8924517826:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=.8;let f=r(class{reportEvent(p){const m=p-this.lastReportedEventTimestamp;if(m>=this.reportingPeriodMillis){const a=this.filterCount,s=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=p,this.framerate===0||a===0)return;const n=Math.round(s/a),e=Math.round(this.framerate*(m/1e3))-a,t=Math.round(100*s/m);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:m}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:s,periodMillis:m})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*d)}frameReceived(p){p!==this.framerate&&(this.framerate=p,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const m=Date.now();this.reportEvent(m)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(p,m,a,s){this.delegate=p,this.reportingPeriodMillis=m,this.filterCPUUtilization=a,this.logger=s,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=f},8080066655:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(t,i,o,c){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(_){try{b(c.next(_))}catch(C){u(C)}}r(v,"fulfilled");function E(_){try{b(c.throw(_))}catch(C){u(C)}}r(E,"rejected");function b(_){_.done?S(_.value):g(_.value).then(v,E)}r(b,"step"),b((c=c.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const p=d(6582301018),m=h(d(6672418579)),a=h(d(8924517826));let s=r(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=r(class xh{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,c)=>{i.resolve=o,i.reject=c}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return f(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield p.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return f(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const c=o.width,g=o.height;if(c===0||g===0)return i;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==g)&&(this.sourceWidth=c,this.sourceHeight=g,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const u=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(u,v),E.drawImage(o,0,0),E.restore();const b=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const _=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:b},[b.data.buffer]),S=yield _}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,c,g;return f(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(g=this.scaledCanvas)===null||g===void 0||g.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,c,g,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new s,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=xh.createWorkerPromise(),this.loadModelPromise=xh.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(c),this.spec=o,this.logger=c.logger,this.delegate=g,this.initCPUMonitor(c),this.eventController=S}},"BackgroundFilterProcessor");l.default=n;let e=r(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},6292069043:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(c,g,S,u){function v(E){return E instanceof S?E:new S(function(b){b(E)})}return r(v,"adopt"),new(S||(S=Promise))(function(E,b){function _(A){try{I(u.next(A))}catch(w){b(w)}}r(_,"fulfilled");function C(A){try{I(u.throw(A))}catch(w){b(w)}}r(C,"rejected");function I(A){A.done?E(A.value):v(A.value).then(_,C)}r(I,"step"),I((u=u.apply(c,g||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(6582301018),m=d(8113008952),a=h(d(7472936477)),s=h(d(8351168186)),n=h(d(8066052849)),e=r(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=r(class{static defaultAssetSpec(){const g=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${g.major}.${g.minor}`}}static createUrlWithParams(g,S){const u=new URL(g),v=Object.keys(S);for(const E of v)S[E]!==void 0&&u.searchParams.set(E,S[E]);return u.toString()}static resolveSpec(g){const{paths:S=i,model:u=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=g||{},b={assetGroup:v,revisionID:E,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,b),S.wasm=this.createUrlWithParams(S.wasm,b),S.simd=this.createUrlWithParams(S.simd,b),u.path=this.createUrlWithParams(u.path,b),{paths:S,model:u,assetGroup:v,revisionID:E}}static resolveOptions(g){g.reportingPeriodMillis||(g.reportingPeriodMillis=1e3);const S=30;return g.filterCPUUtilization?(g.filterCPUUtilization<0||g.filterCPUUtilization>100)&&(g.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),g.filterCPUUtilization=S):g.filterCPUUtilization=S,g}static isSupported(g,S){const{logger:u}=S;return typeof globalThis>"u"?(u.info("Browser does not have globalThis."),Promise.resolve(!1)):new s.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,u)?this.supportsBackgroundFilter(globalThis,g,u):(u.info("Browser does not support WASM."),Promise.resolve(!1)):(u.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,u=arguments.length>2?arguments[2]:void 0;return f(this,void 0,void 0,function*(){if(!m.supportsWorker(g,u))return u.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const E=yield p.loadWorker(v,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(b){u.info(`Failed to terminate worker. ${b.message}`)}return!0}catch(E){return u.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},7898988988:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}filterFrameDurationHigh(h){var p;for(const m of this.observers)(p=m.filterFrameDurationHigh)===null||p===void 0||p.call(m,h)}filterCPUUtilizationHigh(h){var p;for(const m of this.observers)(p=m.filterCPUUtilizationHigh)===null||p===void 0||p.call(m,h)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=d},1069044041:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8080066655)),m=h(d(1434097650));let a=r(class Uh extends p.default{setImageBlob(n){return f(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield Uh.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:c,height:g}=o;i.save(),i.clearRect(0,0,c,g),i.drawImage(this.scaledCanvas,0,0,c,g),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,g),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return f(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return f(this,void 0,void 0,function*(){this.replacementImage=yield Uh.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return f(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: { filterCPUUtilization: ${e.filterCPUUtilization}, reportingPeriodMillis: ${e.reportingPeriodMillis}}`)}},"BackgroundReplacementFilter");l.default=a},45891509:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(i,o,c,g){function S(u){return u instanceof c?u:new c(function(v){v(u)})}return r(S,"adopt"),new(c||(c=Promise))(function(u,v){function E(C){try{_(g.next(C))}catch(I){v(I)}}r(E,"fulfilled");function b(C){try{_(g.throw(C))}catch(I){v(I)}}r(b,"rejected");function _(C){C.done?u(C.value):S(C.value).then(E,b)}r(_,"step"),_((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6292069043)),m=h(d(5956893594)),a=h(d(3756404293)),s=h(d(7000795223)),n=h(d(1069044041));let e=r(class extends s.default{loadAssets(){return f(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return f(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=r(class TS extends p.default{static create(o,c){return f(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:g}=c;if(!(yield TS.isSupported(o,c)))return g.warn("Using no-op processor because background replacement is not supported"),new e;g.info("Using background replacement filter");const u=new n.default(o,c);return yield u.loadAssets(),u})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},o);return c.logger||(c.logger=new m.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(o){return f(this,void 0,void 0,function*(){if(!o.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const g=c.getContext("2d");g.fillStyle="blue",g.fillRect(0,0,100,100);const S=yield new Promise(u=>{c.toBlob(u)});o.imageBlob=S}})}static isSupported(o,c){const g=Object.create(null,{isSupported:{get:()=>super.isSupported}});return f(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const S=c.imageBlob,u=URL.createObjectURL(S);try{yield n.default.loadImage(u)}catch(v){return c.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(u)}return g.isSupported.call(this,o,c)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},1434097650:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(7898988988));let p=r(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=p},5384631890:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const h=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,h}constructor(h,p,m){this.fixedWaitMs=h,this.shortBackoffMs=p,this.longBackoffMs=m,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=d},1363278032:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5384631890)),p=f(d(8220481840));let m=r(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(s){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,s)}constructor(s,n,e){this.fixedWaitMs=s,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=m},8220481840:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5384631890));let p=r(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,s,n,e){super(a,s,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=p},8351168186:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(585669709),p=d(2518355262);let m=r(class Vh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const s of this.chromeLike)if(s===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const s of this.webkitBrowsers)if(s===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Vh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Vh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(s,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(s/64)*64,Math.ceil(n/64)*64]:[s,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const s=[];for(const n in this.browserSupport)s.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return s.join(", ")}supportedVideoCodecs(){return f(this,void 0,void 0,function*(){const s=new RTCPeerConnection;return s.addTransceiver("video",{direction:"inactive",streams:[]}),(yield s.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return this.isIOS()&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}requiresAudioContextResetOnDeviceFailureForWebAudio(){return this.isIOS()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}isIOS(){return this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox()}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},7059763395:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),p=f(d(5147189764)),m=f(d(1847926377)),a=f(d(3572556907));let s=r(class CS{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case p.default.UPSTREAM:return this.audioUpstreamMetricMap;case p.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case p.default.UPSTREAM:return this.videoUpstreamMetricMap;case p.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:g}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const u=this.streamMetricReports[S];if(u.direction===t.dir&&u.mediaType===t.media)return c(g||t.source,Number(S))}else return c(g||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],c=this.getMetricMap(i.media,i.dir)[i.source],{transform:g,source:S}=c;return g(S||i.source,t)}getVideoUpstreamSsrcs(){const e=[];for(const t in this.streamMetricReports)this.streamMetricReports[t].mediaType===m.default.VIDEO&&this.streamMetricReports[t].direction===p.default.UPSTREAM&&e.push(Number(t));return e}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const u=this.getObservableVideoMetricValue(S,Number(t));isNaN(u)||(i[S]=u)}const o=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let g="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?g=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:g=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[g]=e[g]?e[g]:{},e[g][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new CS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(g.currentMetrics[o])},this.decoderLossPercent=(o,c)=>{const g=this.streamMetricReports[c],S=g.currentMetrics.concealedSamples-(g.previousMetrics.concealedSamples||0),u=g.currentMetrics.totalSamplesReceived-(g.previousMetrics.totalSamplesReceived||0);return u<=0||u-S<=0?0:S/u*100},this.packetLossPercent=(o,c)=>{const g=this.streamMetricReports[c],S=g.currentMetrics[o]-(g.previousMetrics[o]||0),u=g.currentMetrics.packetsLost-(g.previousMetrics.packetsLost||0),v=S+u;return v<=0||u<=0?0:u*100/v},this.jitterBufferMs=(o,c)=>{const g=this.streamMetricReports[c],S=g.currentMetrics.jitterBufferDelay-(g.previousMetrics.jitterBufferDelay||0),u=g.currentMetrics.jitterBufferEmittedCount-(g.previousMetrics.jitterBufferEmittedCount||0);return S<=0||u<=0?0:S/u*1e3},this.countPerSecond=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:Math.trunc(u/S)},this.bitsPerSecond=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=(g.currentMetrics[o]-(g.previousMetrics[o]||0))*8;return u<=0?0:Math.trunc(u/S)},this.secondsToMilliseconds=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(g.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,c)=>{const g=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const u=g.currentMetrics[o]-(g.previousMetrics[o]||0);return u<=0?0:u*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,c)=>{const g=this.streamMetricReports[c];if(g.previousObjectMetrics[o]===void 0||g.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let u=0,v=0;for(const[b,_]of Object.entries(g.previousObjectMetrics[o]))b==="cpu"&&(u=_);for(const[b,_]of Object.entries(g.currentObjectMetrics[o]))b==="cpu"&&(v=_);const E=v-u;return E<=0?0:E*1e3/S},this.isHardwareImplementation=(o,c)=>{const g=this.streamMetricReports[c];if(g.currentStringMetrics[o]===void 0)return NaN;const S=String(g.currentStringMetrics[o]),u=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return u&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_JITTER_MS},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE},videoInputWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_WIDTH},videoInputHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_HEIGHT}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS},videoRenderWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_WIDTH},videoRenderHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RENDER_HEIGHT}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:p.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:p.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:p.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:p.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:p.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:p.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=s},5147189764:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var d;(function(f){f[f.UPSTREAM=0]="UPSTREAM",f[f.DOWNSTREAM=1]="DOWNSTREAM"})(d=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=d},1847926377:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var d;(function(f){f[f.AUDIO=0]="AUDIO",f[f.VIDEO=1]="VIDEO"})(d=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=d},9895069884:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"ClientVideoStreamReceivingReport");l.default=d},3572556907:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=d},7894724558:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=d},7825873064:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=d},6963727640:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(h){this.currentData=h}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const h=this.health();return h!==this.currentHealth?(this.currentHealth=h,h):null}constructor(h,p,m){this.minHealth=h.minHealth,this.maxHealth=h.maxHealth,this.currentHealth=h.initialHealth,this.currentData=p.clone(),this.name=m}},"BaseConnectionHealthPolicy");l.default=d},3544934903:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class yl{static isTimestampRecent(h,p){return Date.now()<h+p}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(h){return yl.isTimestampRecent(this.connectionStartTimestampMs,h)}isLastPacketLossRecent(h){return yl.isTimestampRecent(this.lastPacketLossInboundTimestampMs,h)}isGoodSignalRecent(h){return yl.isTimestampRecent(this.lastGoodSignalTimestampMs,h)}isWeakSignalRecent(h){return yl.isTimestampRecent(this.lastWeakSignalTimestampMs,h)}isNoSignalRecent(h){return yl.isTimestampRecent(this.lastNoSignalTimestampMs,h)}clone(){const h=new yl;return h.connectionStartTimestampMs=this.connectionStartTimestampMs,h.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,h.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,h.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,h.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,h.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,h.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,h.consecutiveMissedPongs=this.consecutiveMissedPongs,h.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),h.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),h.audioSpeakerDelayMs=this.audioSpeakerDelayMs,h.isVideoEncoderHardware=this.isVideoEncoderHardware,h.videoEncodingTimeInMs=this.videoEncodingTimeInMs,h.videoEncodingTimePerFrameInMs=this.videoEncodingTimePerFrameInMs,h.cpuLimitationDuration=this.cpuLimitationDuration,h.videoInputFps=this.videoInputFps,h.videoEncodeFps=this.videoEncodeFps,h}setConsecutiveMissedPongs(h){this.consecutiveMissedPongs=h}setConsecutiveStatsWithNoPackets(h){this.consecutiveStatsWithNoPackets=h}setConsecutiveStatsWithNoAudioPacketsSent(h){this.consecutiveStatsWithNoAudioPacketsSent=h}setLastPacketLossInboundTimestampMs(h){this.lastPacketLossInboundTimestampMs=h}setLastNoSignalTimestampMs(h){this.lastNoSignalTimestampMs=h}setLastWeakSignalTimestampMs(h){this.lastWeakSignalTimestampMs=h}setLastGoodSignalTimestampMs(h){this.lastGoodSignalTimestampMs=h}setAudioSpeakerDelayMs(h){this.audioSpeakerDelayMs=h}setIsVideoEncoderHardware(h){this.isVideoEncoderHardware=h}setVideoEncodingTimeInMs(h){this.videoEncodingTimeInMs=h}setVideoEncodingTimePerFrameInMs(h){this.videoEncodingTimePerFrameInMs=h}setCpuLimitationDuration(h){this.cpuLimitationDuration=h}setVideoInputFps(h){this.videoInputFps=h}setVideoEncodeFps(h){this.videoEncodeFps=h}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=d},1091173065:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8438187697)),p=f(d(1615281264));let m=r(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[h.default,p.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.highEncodeCpuMsPerFrameThreshold=15,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=m},8929805428:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6963727640));let p=r(class Us extends h.default{health(){if(this.currentData.isConnectionStartRecent(Us.CONNECTION_WAIT_TIME_MS))return 1;const s=this.currentData.consecutiveStatsWithNoPackets>=Us.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=Us.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>Us.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>Us.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),s||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${s}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(a,s,n){super(s,n,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,Us.CONNECTION_UNHEALTHY_THRESHOLD=s.connectionUnhealthyThreshold,Us.CONNECTION_WAIT_TIME_MS=s.connectionWaitTimeMs,Us.MISSED_PONGS_THRESHOLD=s.missedPongsUpperThreshold,Us.MAXIMUM_AUDIO_DELAY_MS=s.maximumAudioDelayMs,Us.MAXIMUM_AUDIO_DELAY_DATA_POINTS=s.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=p},2115341037:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6963727640));let p=r(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),s=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&s}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,s,n){super(s,n,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=s.sendingAudioFailureSamplesToConsider>0?s.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=s.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=s.maximumTimesToWarn,this.coolDownTimeMs=s.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=p},5928001672:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6963727640));let p=r(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,s=a*this.packetsExpected;let n=0;for(let e=0;e<a;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/s,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,s){super(a,s,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=p},6005421222:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var d;(function(f){f.VideoEncodingCpuHealth="Video Encoding CPU Health",f.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(d=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=d},8438187697:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6963727640)),p=f(d(6005421222));let m=r(class extends h.default{health(){const s=this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold&&this.currentData.videoEncodingTimePerFrameInMs>=this.highEncodeCpuMsPerFrameThreshold;if(!this.currentData.isVideoEncoderHardware&&(s||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(s,n){super(s,n,p.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=s.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=s.highEncodeCpuMsThreshold,this.highEncodeCpuMsPerFrameThreshold=s.highEncodeCpuMsPerFrameThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=m},1615281264:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6963727640)),p=f(d(6005421222));let m=r(class extends h.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(s,n){super(s,n,p.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=s.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=m},1523356655:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(903520651);let h=r(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,a,s){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",s),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let a=0,s=0;const n=m.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=m.getRTCStatsReport();let c=0,g=0;o.forEach(v=>{v.type==="candidate-pair"&&(v.bytesReceived&&(c+=v.bytesReceived),v.requestsReceived&&(g+=v.requestsReceived),v.responsesReceived&&(g+=v.responsesReceived))});const S=c-this.lastTotalBytesReceived;this.lastTotalBytesReceived=c;const u=g-this.lastTotalStunMessagesReceived;if(this.lastTotalStunMessagesReceived=g,typeof e=="number"&&typeof t=="number"){if(a=e,s=t,a<0||s<0||S<0||u<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,s),S>0||u>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||s>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateVideoEncodingHealth(m),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(m){const a=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),s=m.getVideoUpstreamSsrcs();if(!a||s.length===0){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}let n=!1,e=0,t=0,i=0,o=0;for(const g of s)n||(n=Boolean(m.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",g))),e+=m.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",g),t+=m.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",g),i+=m.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",g),o+=m.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",g);const c=o>0?e/o:0;this.connectionHealthData.setIsVideoEncoderHardware(Boolean(n)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(c),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(i),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(m,a){m.unshift(a),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{f.Maybe.of(m.connectionHealthDidChange).map(a=>a.bind(m)(this.connectionHealthData.clone()))})}constructor(m,a,s,n,e){this.audioVideoController=m,this.realtimeController=a,this.connectionHealthData=s,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.lastTotalStunMessagesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},3560634922:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.Modality="#content"})(d||(d={})),l.default=d},8271576690:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8351168186)),m=h(d(8152963890));let a=r(class Hh{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return f(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return f(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return f(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return f(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new p.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||Hh.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||Hh.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},4707988254:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(g,S,u,v){function E(b){return b instanceof u?b:new u(function(_){_(b)})}return r(E,"adopt"),new(u||(u=Promise))(function(b,_){function C(w){try{A(v.next(w))}catch(O){_(O)}}r(C,"fulfilled");function I(w){try{A(v.throw(w))}catch(O){_(O)}}r(I,"rejected");function A(w){w.done?b(w.value):E(w.value).then(C,I)}r(A,"step"),A((v=v.apply(g,S||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8981226922)),m=h(d(7136804647)),a=h(d(7147499759)),s=h(d(4599834734)),n=h(d(3741513515)),e=d(903520651),t=h(d(9248911078)),i=h(d(4134174226)),o=h(d(3560634922));let c=r(class{static createContentShareMeetingSessionConfigure(S){const u=new m.default;return u.meetingId=S.meetingId,u.externalMeetingId=S.externalMeetingId,u.urls=S.urls,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.credentials=new a.default,u.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,u.credentials.externalUserId=S.credentials.externalUserId,u.credentials.joinToken=S.credentials.joinToken+o.default.Modality,u.meetingFeatures=S.meetingFeatures.clone(),u.videoDownlinkBandwidthPolicy=new t.default,u}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,u){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,u)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return f(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===p.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let u=0;u<this.mediaStreamBroker.mediaStream.getTracks().length;u++)this.mediaStreamBroker.mediaStream.getTracks()[u].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,u){return f(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,u);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(u=>u.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(u=>u.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return f(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const u of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(u)&&S(u)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(u=>{e.Maybe.of(u.contentShareDidStop).map(v=>v.call(u))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,u,v,E)=>{const b=new s.default(S).hasModality(s.default.MODALITY_CONTENT),_=new s.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!b||!_||!u||this.contentShareTile)return;const C=this.mediaStreamBroker.mediaStream;if(C!=null&&C.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const I=C.getVideoTracks()[0];let A,w;if(I.getSettings){const O=I.getSettings();A=O.width,w=O.height}else{const O=I.getCapabilities();A=O.width,w=O.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,C,A,w,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(I=>{e.Maybe.of(I.contentShareDidStart).map(A=>A.call(I))})})}constructor(S,u,v){this.mediaStreamBroker=S,this.contentAudioVideo=u,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=c},1252089397:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=r(class Cs{static register(){!("document"in d.g)||!document.addEventListener||Cs.shouldRegisterCSPMonitor&&(Cs.added||(document.addEventListener("securitypolicyviolation",Cs.listener),Cs.added=!0))}static unregister(){!("document"in d.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Cs.listener),Cs.loggers=new Set,Cs.added=!1)}static disable(){Cs.shouldRegisterCSPMonitor=!1,Cs.unregister()}static addLogger(p){p&&Cs.loggers.add(p)}static removeLogger(p){p&&Cs.loggers.delete(p)}},"CSPMonitor");l.default=f,f.loggers=new Set,f.shouldRegisterCSPMonitor=!0,f.added=!1,f.listener=h=>{const p=`Security Policy Violation
Blocked URI: ${h.blockedURI}
Violated Directive: ${h.violatedDirective}
Original Policy: ${h.originalPolicy}
Document URI: ${h.documentURI}
Source File: ${h.sourceFile}
Line No.: ${h.lineNumber}
`;for(const m of f.loggers)m.error(p);f.loggers.size===0&&console.error(p)}},1766966835:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(h,p,m,a,s,n){this.timestampMs=h,this.topic=p,this.data=m,this.senderAttendeeId=a,this.senderExternalUserId=s,this.throttled=!!n}},"DataMessage");l.default=d},3171772403:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function d(f){return f&&"destroy"in f}r(d,"isDestroyable"),l.isDestroyable=d},3961458747:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function d(f){return!!f&&typeof f=="object"&&"mute"in f&&"stop"in f&&"intrinsicDevice"in f}r(d,"isAudioTransformDevice"),l.isAudioTransformDevice=d},8152963890:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(A,w,O,R){function F(V){return V instanceof O?V:new O(function($){$(V)})}return r(F,"adopt"),new(O||(O=Promise))(function(V,$){function X(ie){try{ne(R.next(ie))}catch(ge){$(ge)}}r(X,"fulfilled");function Y(ie){try{ne(R.throw(ie))}catch(ge){$(ge)}}r(Y,"rejected");function ne(ie){ie.done?V(ie.value):F(ie.value).then(X,Y)}r(ne,"step"),ne((R=R.apply(A,w||[])).next())})},h=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8351168186)),m=h(d(113406342)),a=h(d(3741513515)),s=h(d(2997222898)),n=d(903520651),e=h(d(5709738441)),t=h(d(1140481832)),i=d(3961458747),o=h(d(4261566413)),c=h(d(2083236720)),g=h(d(9468773362)),S=h(d(6809352498)),u=h(d(3288618491)),v=h(d(6997557363)),E=h(d(8219602063)),b=h(d(8981226922)),_=d(272852764);let C=r(class ir{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(w=this.mediaDeviceWrapper)===null||w===void 0||w.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(w=this.mediaDeviceWrapper)===null||w===void 0||w.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return f(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const O=yield this.listDevicesOfKind("audioinput",w);return this.trace("listAudioInputDevices",w,O),O})}listVideoInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const O=yield this.listDevicesOfKind("videoinput",w);return this.trace("listVideoInputDevices",w,O),O})}listAudioOutputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const O=yield this.listDevicesOfKind("audiooutput",w);return this.trace("listAudioOutputDevices",w,O),O})}pushAudioMeetingStateForPermissions(w){var O;(O=this.eventController)===null||O===void 0||O.publishEvent(w===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(w){var O;(O=this.eventController)===null||O===void 0||O.publishEvent(w===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(w){return f(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(w))})}startAudioInputTask(w){var O;return f(this,void 0,void 0,function*(){if(w===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(w)?(this.logger.info(`Choosing transform input device ${w}`),yield this.chooseAudioTransformInputDevice(w)):(this.logger.info(`Choosing intrinsic audio input device ${w}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",w)),this.trace("startAudioInputDevice",w,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(O=this.transform)===null||O===void 0?void 0:O.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(R){throw R}})}stopAudioInput(){return f(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return f(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(w){var O;return f(this,void 0,void 0,function*(){if(((O=this.transform)===null||O===void 0?void 0:O.device)===w)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const R=ir.getAudioContext();if(!(R instanceof OfflineAudioContext))switch(R.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield R.resume()}let F;try{F=yield w.createAudioNode(R)}catch($){throw this.logger.error(`Unable to create transform device node: ${$}.`),$}const V=yield w.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",V),this.logger.debug(`Got inner stream: ${V}.`),this.setTransform(w,F)})}chooseVideoTransformInputDevice(w){var O;return f(this,void 0,void 0,function*(){if(this.eventController&&w instanceof e.default&&w.passEventControllerToProcessors(this.eventController),w===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const R=this.chosenVideoTransformDevice;R&&this.logger.info("Switched from previous VideoTransformDevice");const F=!!R,V=yield w.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((O=this.activeDevices.video)===null||O===void 0?void 0:O.stream,V)){this.logger.info("video transform device needs new intrinsic device"),F&&R.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=w,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",V),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=w,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield w.transformStream(this.activeDevices.video.stream)})}startVideoInput(w){return f(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(w))})}startVideoInputTask(w){return f(this,void 0,void 0,function*(){if(!w){this.logger.error("Invalid video input device");return}try{return _.isVideoTransformDevice(w)?(this.logger.info(`Choosing video transform device ${w}`),yield this.chooseVideoTransformInputDevice(w),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",w),this.trace("startVideoInputDevice",w),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(O){throw O}})}stopVideoInput(){return f(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return f(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(w){return f(this,void 0,void 0,function*(){this.audioOutputDeviceId=w,this.watchForDeviceChangesIfNecessary();const O=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(O),this.trace("chooseAudioOutput",w,null)})}addDeviceChangeObserver(w){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(w),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(w){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(w),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var w,O;if(!this.activeDevices.audio)return null;const R=(O=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||O===void 0?void 0:O.end;if(R){const F=R.context.createAnalyser();return F.removeOriginalInputs=()=>{try{R.disconnect(F)}catch{}},R.connect(F),F}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(w){const O=ir.getAudioContext(),R=O.createAnalyser(),F=O.createMediaStreamSource(w);return F.connect(R),this.trace("createAnalyserNodeForAudioInput"),R.removeOriginalInputs=()=>{try{F.disconnect(R)}catch{}},R}startVideoPreviewForVideoInput(w){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",w.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,w,!0),this.trace("startVideoPreviewForVideoInput",w.id)}stopVideoPreviewForVideoInput(w){t.default.disconnectVideoStreamFromVideoElement(w,!1),this.trace("stopVideoPreviewForVideoInput",w.id)}setDeviceLabelTrigger(w){if(this.deviceInfoCache){for(const O of this.deviceInfoCache)if(!O.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=w,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(w){let O=null;return this.useWebAudio?(O=ir.getAudioContext().createMediaStreamSource(w),O.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",w.id),O}chooseVideoInputQuality(w,O,R){const F=this.browserBehavior.requiresResolutionAlignment(w,O);this.videoInputQualitySettings=new b.default(F[0],F[1],R)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return f(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return f(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(w){return f(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(w){const O=this.activeDevices[w];if(!O)return;const R=O.endedCallback,F=O.trackMuteCallback,V=O.trackUnmuteCallback;for(const $ of O.stream.getTracks())$.stop(),R&&$.removeEventListener("ended",R),F&&$.removeEventListener("mute",F),V&&$.removeEventListener("unmute",V),delete O.endedCallback,delete O.trackMuteCallback,delete O.trackUnmuteCallback,delete this.activeDevices[w]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(w){var O;let R=this.activeDevices.audio;if(this.useWebAudio&&(R=this.getMediaStreamDestinationNode()),!!R){for(const F of R.stream.getTracks())F.enabled!==w&&(F.enabled=w);this.muted!==!w&&(this.muted=!w,(O=this.transform)===null||O===void 0||O.device.mute(this.muted))}}static getIntrinsicDeviceId(w){if(!w)return;if(typeof w=="string")return w;if(w.id)return w.id;const R=w.deviceId;if(!R)return;if(typeof R=="string"||Array.isArray(R))return R;const F=R;if(typeof F.exact=="string"||Array.isArray(F.exact))return F.exact}static createEmptyAudioDevice(){return ir.synthesizeAudioDevice(0)}static synthesizeAudioDevice(w){const O=ir.getAudioContext(),R=O.createMediaStreamDestination();if(w){const F=O.createGain();F.gain.value=.1,F.connect(R);const V=O.createOscillator();V.frequency.value=w,V.connect(F),V.start()}else{const F=O.createBufferSource();try{F.buffer=O.createBuffer(1,O.sampleRate*5,O.sampleRate)}catch(V){if(V&&V.name==="NotSupportedError")F.buffer=O.createBuffer(1,ir.defaultSampleRate*5,ir.defaultSampleRate);else throw V}F.buffer.getChannelData(0)[0]=3e-4,F.loop=!0,F.connect(R),F.start()}return R.stream}listDevicesOfKind(w,O){return f(this,void 0,void 0,function*(){return(O||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(w)})}updateDeviceInfoCacheFromBrowser(){var w;return f(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let R=yield navigator.mediaDevices.enumerateDevices(),F=!0;for(const V of R)if(!V.label){F=!1;break}if(!F)try{this.logger.info("attempting to trigger media device labels since they are hidden");const V=yield this.deviceLabelTrigger();R=yield navigator.mediaDevices.enumerateDevices();for(const $ of V.getTracks())$.stop()}catch(V){this.logger.info("unable to get media device labels"),(w=this.eventController)===null||w===void 0||w.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(V)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(R)}`),this.deviceInfoCache=R})}listCachedDevicesOfKind(w){const O=[];if(this.deviceInfoCache)for(const R of this.deviceInfoCache)R.kind===w&&O.push(R);return O}handleDeviceChange(){return f(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const w=this.listCachedDevicesOfKind("audioinput"),O=this.listCachedDevicesOfKind("videoinput"),R=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const F=this.listCachedDevicesOfKind("audioinput"),V=this.listCachedDevicesOfKind("videoinput"),$=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(X=>{this.areDeviceListsEqual(w,F)||n.Maybe.of(X.audioInputsChanged).map(Y=>Y.bind(X)(F)),this.areDeviceListsEqual(O,V)||n.Maybe.of(X.videoInputsChanged).map(Y=>Y.bind(X)(V)),this.areDeviceListsEqual(R,$)||n.Maybe.of(X.audioOutputsChanged).map(Y=>Y.bind(X)($))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(w,O){return f(this,void 0,void 0,function*(){try{w==="audio"?(this.useWebAudio&&this.browserBehavior.requiresAudioContextResetOnDeviceFailureForWebAudio()?(this.logger.warn("Audio input device which was active is no longer available, suspending and resuming audio context before resetting to empty device to ensure packets are sent"),yield this.stopAudioInput(),ir.suspendAudioContext(),ir.resumeAudioContext()):this.logger.warn("Audio input device which was active is no longer available, resetting to empty device to ensure packets are sent"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}w==="audio"?this.forEachObserver(R=>{n.Maybe.of(R.audioInputStreamEnded).map(F=>F.bind(R)(O))}):this.forEachObserver(R=>{n.Maybe.of(R.videoInputStreamEnded).map(F=>F.bind(R)(O))})})}forEachObserver(w){for(const O of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(O)&&w(O)})}forEachMediaStreamBrokerObserver(w){for(const O of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(O)&&w(O)})}areDeviceListsEqual(w,O){return JSON.stringify(w.map(R=>JSON.stringify(R)).sort())===JSON.stringify(O.map(R=>JSON.stringify(R)).sort())}intrinsicDeviceAsMediaStream(w){return w&&w.id?w:null}hasSameMediaStreamId(w,O,R){var F,V,$,X;let Y;return w==="audio"?(Y=R==null?void 0:R.audio.streamId,!!Y&&Y===((V=(F=O.constraints)===null||F===void 0?void 0:F.audio)===null||V===void 0?void 0:V.streamId)):(Y=R==null?void 0:R.video.streamId,!!Y&&Y===((X=($=O==null?void 0:O.constraints)===null||$===void 0?void 0:$.video)===null||X===void 0?void 0:X.streamId))}hasSameGroupId(w,O,R){if(w==="")return!0;const F=ir.getIntrinsicDeviceId(R);return this.logger.debug(`Checking deviceIds ${F} of type ${typeof F} with groupId ${w}`),typeof F=="string"&&w===this.getGroupIdFromDeviceId(O,F)}getGroupIdFromDeviceId(w,O){if(this.deviceInfoCache!==null){const R=this.listCachedDevicesOfKind(`${w}input`).find(F=>F.deviceId===O);if(R&&R.groupId)return this.logger.debug(`GroupId of deviceId ${O} found in cache is ${R.groupId}`),R.groupId}return this.logger.debug(`GroupId of deviceId ${O} found in cache is empty`),""}handleGetUserMediaError(w,O){if(!w)throw new c.default(w);switch(w.name){case"NotReadableError":case"TrackStartError":throw new S.default(w);case"NotFoundError":case"DevicesNotFoundError":throw new g.default(w);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw O&&O<ir.permissionDeniedOriginDetectionThresholdMs?new v.default(w,"Permission denied by browser"):new v.default(w,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new u.default(w);case"TypeError":throw new E.default(w);case"AbortError":default:throw new c.default(w)}}matchesDeviceSelection(w,O,R,F){return R&&R.stream.active&&(this.hasSameMediaStreamId(w,R,F)||R.groupId!==null&&this.hasSameGroupId(R.groupId,w,O))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(R.constraints)} to proposed constraints ${JSON.stringify(F)}`),R.matchesConstraints(F)):!1}chooseInputIntrinsicDevice(w,O){var R,F;return f(this,void 0,void 0,function*(){const V=this.getMediaStreamConstraints(w,O);if(this.matchesDeviceSelection(w,O,this.activeDevices[w],V)){this.logger.info(`reusing existing ${w} input device`);return}this.activeDevices[w]&&this.activeDevices[w].stream&&this.stopTracksAndRemoveCallbacks(w);const $=Date.now(),X=new o.default;try{this.logger.info(`requesting new ${w} device with constraint ${JSON.stringify(V)}`);const Y=this.intrinsicDeviceAsMediaStream(O);w==="audio"&&O===null?(X.stream=ir.createEmptyAudioDevice(),X.constraints=null):Y?(this.logger.info(`using media stream ${Y.id} for ${w} device`),X.stream=Y,X.constraints=V):(X.stream=yield navigator.mediaDevices.getUserMedia(V),X.constraints=V),yield this.handleNewInputDevice(w,X)}catch(Y){const ne=this.getErrorMessage(Y);w==="audio"?(R=this.eventController)===null||R===void 0||R.publishEvent("audioInputFailed",{audioInputErrorMessage:ne}):(F=this.eventController)===null||F===void 0||F.publishEvent("videoInputFailed",{videoInputErrorMessage:ne}),this.logger.error(`failed to get ${w} device for constraints ${JSON.stringify(V)}: ${ne}`);let ie=!0;if(Y&&"constraint"in Y&&(this.logger.error(`Over-constrained by constraint: ${Y.constraint}`),this.useMediaConstraintsFallback)){const ge=this.getMediaStreamConstraints(w,O,!0),Ie=JSON.stringify(ge);if(Ie!==JSON.stringify(V)){this.logger.info(`retry requesting new ${w} device with minimal constraint ${Ie}`);try{X.stream=yield navigator.mediaDevices.getUserMedia(ge),X.constraints=ge,yield this.handleNewInputDevice(w,X),ie=!1}catch(We){this.logger.error(`failed to get ${w} device for constraints ${Ie}: ${this.getErrorMessage(We)}`)}}}if(ie){if(w==="audio"){this.logger.info(`choosing null ${w} device instead`);try{X.stream=ir.createEmptyAudioDevice(),X.constraints=null,yield this.handleNewInputDevice(w,X)}catch(ge){this.logger.error(`failed to choose null ${w} device. ${ge.name}: ${ge.message}`)}}this.handleGetUserMediaError(Y,Date.now()-$)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(w){return w?w.name&&w.message?`${w.name}: ${w.message}`:w.name?w.name:w.message?w.message:"UnknownError":"UnknownError"}handleNewInputDevice(w,O){var R;return f(this,void 0,void 0,function*(){this.logger.info(`got ${w} device for constraints ${JSON.stringify(O.constraints)}`);const F=(R=this.getMediaTrackSettings(O.stream))===null||R===void 0?void 0:R.deviceId;O.groupId=F?this.getGroupIdFromDeviceId(w,F):"",this.activeDevices[w]=O,this.logger.debug(`Set activeDevice to ${JSON.stringify(O)}`),this.watchForDeviceChangesIfNecessary();const V=O.stream.getTracks()[0];if(V&&(O.endedCallback=()=>{this.activeDevices[w]&&this.activeDevices[w].stream===O.stream&&(this.handleDeviceStreamEnded(w,F),delete O.endedCallback)},V.addEventListener("ended",O.endedCallback,{once:!0})),w==="audio"){const $=O.stream.getAudioTracks()[0];if($){const X=$.getSettings().deviceId||O.stream;O.trackMuteCallback=()=>{this.mediaStreamMuteObserver(X,!0)},O.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(X,!1)},$.addEventListener("mute",O.trackMuteCallback,{once:!1}),$.addEventListener("unmute",O.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),$.muted?O.trackMuteCallback():O.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(w,O,R,F){if(F&&this.listCachedDevicesOfKind(`${w}input`).length===1)return!0;const V={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?V.deviceId=O:V.deviceId={exact:O},R&&(V.groupId=R),F?V:w==="video"?(V.width={ideal:this.videoInputQualitySettings.videoWidth},V.height={ideal:this.videoInputQualitySettings.videoHeight},V.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},V):(this.supportSampleRateConstraint()&&(V.sampleRate={ideal:ir.defaultSampleRate}),this.supportSampleSizeConstraint()&&(V.sampleSize={ideal:ir.defaultSampleSize}),this.supportChannelCountConstraint()&&(V.channelCount={ideal:ir.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},V))}getMediaStreamConstraintsFromTrackConstraints(w,O){return w==="audio"?{audio:O}:{video:O}}getMediaStreamConstraints(w,O){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F={};if(!O)return null;const V=this.intrinsicDeviceAsMediaStream(O);if(V)return F.streamId=V.id,this.getMediaStreamConstraintsFromTrackConstraints(w,F);if(typeof O=="string"){let $="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?$=this.getGroupIdFromDeviceId(w,O):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),F=this.calculateMediaStreamConstraints(w,O,$,R),this.getMediaStreamConstraintsFromTrackConstraints(w,F)}return I(O)?(F=this.calculateMediaStreamConstraints(w,O.deviceId,O.groupId,R),this.getMediaStreamConstraintsFromTrackConstraints(w,F)):(F=O,this.getMediaStreamConstraintsFromTrackConstraints(w,F))}deviceInfoFromDeviceId(w,O){if(this.deviceInfoCache===null)return null;for(const R of this.deviceInfoCache)if(R.kind===w&&R.deviceId===O)return R;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(w,O){if(!w||!w.active||!O)return!1;if(O.id)return w.id===O.id;const R=this.getMediaTrackSettings(w);if(!R.deviceId)return!1;const F=ir.getIntrinsicDeviceId(O);return typeof F=="string"?R.deviceId===F:!1}getMediaTrackSettings(w){var O;return(O=w.getTracks()[0])===null||O===void 0?void 0:O.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const w=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(w)}setTransform(w,O){var R,F;(F=(R=this.transform)===null||R===void 0?void 0:R.nodes)===null||F===void 0||F.end.disconnect(),this.transform={nodes:O,device:w};const V=O==null?void 0:O.end,$=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${V} to destination ${$}.`),V==null||V.connect($),this.reconnectAudioInputs()}removeTransform(){var w;const O=this.transform;if(O)return(w=this.transform.nodes)===null||w===void 0||w.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),O}attachAudioInputStreamToAudioContext(w){var O;(O=this.audioInputSourceNode)===null||O===void 0||O.disconnect(),this.audioInputSourceNode=ir.getAudioContext().createMediaStreamSource(w);const R=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(R)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=ir.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var w,O;return((O=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||O===void 0?void 0:O.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(w){ir.defaultLatencyHint=w}static getAudioContext(){if(!ir.audioContext){const w={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(w.sampleRate=ir.defaultSampleRate),new p.default().requiresPlaybackLatencyHintForAudioContext()&&(w.latencyHint="playback"),ir.defaultLatencyHint&&(w.latencyHint=ir.defaultLatencyHint),ir.audioContext=new(window.AudioContext||window.webkitAudioContext)(w)}return ir.audioContext}static suspendAudioContext(){return f(this,void 0,void 0,function*(){return ir.audioContext?ir.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return f(this,void 0,void 0,function*(){return ir.audioContext?ir.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(ir.audioContext)try{ir.audioContext.close()}catch{}ir.audioContext=null}addMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.add(w)}removeMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.delete(w)}publishVideoInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(O=>{O.videoInputDidChange&&O.videoInputDidChange(w)}),this.pushVideoMeetingStateForPermissions(w)}publishAudioInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(O=>{O.audioInputDidChange&&O.audioInputDidChange(w)}),this.pushAudioMeetingStateForPermissions(w)}publishAudioOutputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(O=>{O.audioOutputDidChange&&O.audioOutputDidChange(w)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(w,O,R){let F=`API/DefaultDeviceController/${w}`;typeof O<"u"&&(F+=` ${JSON.stringify(O)}`),typeof R<"u"&&(F+=` -> ${JSON.stringify(R)}`),this.logger.info(F)}constructor(w,O,R=new p.default,F){this.logger=w,this.browserBehavior=R,this.eventController=F,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new s.default,this.videoInputTaskQueue=new s.default,this.muted=!1,this.mediaStreamMuteObserver=(Y,ne)=>{for(const ie of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(ie)&&ie.audioInputMuteStateChanged&&ie.audioInputMuteStateChanged(Y,ne)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:V=!1,useMediaConstraintsFallback:$=!0}=O||{};this.useWebAudio=V,this.useMediaConstraintsFallback=$,this.videoInputQualitySettings=new b.default(ir.defaultVideoWidth,ir.defaultVideoHeight,ir.defaultVideoFrameRate);const X=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=X[0],this.videoInputQualitySettings.videoHeight=X[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const Y=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(Y)}`)}catch(Y){w.error(Y.message)}}},"DefaultDeviceController");l.default=C,C.permissionDeniedOriginDetectionThresholdMs=500,C.defaultVideoWidth=960,C.defaultVideoHeight=540,C.defaultVideoFrameRate=15,C.defaultSampleRate=48e3,C.defaultSampleSize=16,C.defaultChannelCount=1,C.audioContext=null;function I(A){return typeof A=="object"&&"deviceId"in A&&"groupId"in A&&"kind"in A&&"label"in A}r(I,"isMediaDeviceInfo")},4261566413:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{matchesConstraints(h){return JSON.stringify(this.constraints)===JSON.stringify(h)}constructor(){this.groupId=""}},"DeviceSelection");l.default=d},2083236720:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class extends Error{constructor(h,p){super(p||"Error fetching device."),this.cause=h,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=d},9799823045:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const p=h(d(1946951215)),m=h(d(8981226922));let a=r(class extends p.default{destroy(){return f(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let s=r(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=s},9468773362:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(2083236720));let p=r(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=p},6809352498:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(2083236720));let p=r(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=p},3288618491:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(2083236720));let p=r(class extends h.default{constructor(a,s){super(a),this.constraint=s,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=p},6997557363:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(2083236720));let p=r(class extends h.default{constructor(a,s){super(a,s),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=p},3083691903:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{mute(p){return d(this,void 0,void 0,function*(){})}stop(){var p;return d(this,void 0,void 0,function*(){(p=this.node)===null||p===void 0||p.disconnect()})}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.inner})}createAudioNode(p){var m;return d(this,void 0,void 0,function*(){return(m=this.node)===null||m===void 0||m.disconnect(),this.node=yield this.createSingleAudioNode(p),{start:this.node,end:this.node}})}constructor(p){this.inner=p}},"SingleNodeAudioTransformDevice");l.default=f},8219602063:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(2083236720));let p=r(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=p},8981226922:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return this.videoWidth===h.videoWidth&&this.videoHeight===h.videoHeight&&this.videoFrameRate===h.videoFrameRate}constructor(h,p,m){this.videoWidth=h,this.videoHeight=p,this.videoFrameRate=m}},"VideoQualitySettings");l.default=d,d.VideoDisabled=new d(0,0,0),d.VideoResolutionHD=new d(1280,720,30),d.VideoResolutionFHD=new d(1920,1080,30),d.VideoResolutionUHD=new d(3840,2160,30)},272852764:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function d(f){return!!f&&typeof f=="object"&&"transformStream"in f&&"stop"in f&&"intrinsicDevice"in f}r(d,"isVideoTransformDevice"),l.isVideoTransformDevice=d},2343182956:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{destroy(){return d(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(p){this.observerQueue.add(p),p.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(p){this.observerQueue.delete(p)}constructor(p,m){if(this.devicePixelRatioSource=p,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(s=>{s.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):m.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=f},2827699573:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=d},5578123693:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(t,i,o,c){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(_){try{b(c.next(_))}catch(C){u(C)}}r(v,"fulfilled");function E(_){try{b(c.throw(_))}catch(C){u(C)}}r(E,"rejected");function b(_){_.done?S(_.value):g(_.value).then(v,E)}r(b,"step"),b((c=c.apply(t,i||[])).next())})},h=this&&this.__rest||function(t,i){var o={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&i.indexOf(c)<0&&(o[c]=t[c]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,c=Object.getOwnPropertySymbols(t);g<c.length;g++)i.indexOf(c[g])<0&&Object.prototype.propertyIsEnumerable.call(t,c[g])&&(o[c[g]]=t[c[g]]);return o},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=p(d(5384631890)),a=p(d(9013967876)),s=p(d(3564840480)),n=d(840544383);let e=r(class Fa{addEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.addEventListener||!("document"in d.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in d.g)||!window.removeEventListener||!("document"in d.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return f(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:g}=i,S=g&&this.filterAttributes(g,this.attributesToFilter),u=Object.assign({name:o,ts:c},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(u)}`);const v=this.getSize(u);if(v>Fa.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${Fa.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(u)}`),this.sendEventImmediately({name:o,ts:c,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(u),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const E=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(E),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const c=new Set(o);return Object.keys(i).filter(S=>c.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Fa.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[c,g]of Object.entries(i))o+=this.getPrimitiveSize(c),o+=this.getSize(g);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return f(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:g}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:c},g)]};let u=!1,v=null;const E=this.makeRequestBody([S]);try{if(v=yield this.send(E),v.ok){try{const b=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${E}, message: ${JSON.stringify(b)}`)}catch(b){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${b} for event ${E}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${E} with response status ${v.status}`),u=!0}catch(b){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${E} to the ingestion endpoint ${b}.`),u=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const _=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${_}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,_)?u=!1:u=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${E}`),u=!0}}u&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${E}`),this.failedIngestionEvents.push(S))})}send(i){return f(this,void 0,void 0,function*(){const o=new m.default(Fa.RETRY_FIXED_BACKOFF_WAIT_MS,Fa.RETRY_SHORT_BACKOFF_MS,Fa.RETRY_LONG_BACKOFF_MS);try{let c=0;for(;c<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(g.ok||!Fa.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${g.status}.`),c++,c<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(c===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(c){throw c}})}sendBeacon(){return f(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const c=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(c)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const c=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(c)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(c=>{i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(c)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(c){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${c}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return f(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,c,g,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=V=>({type:V.type,v:V.v,payloads:[...V.payloads]}),this.sendEvents=()=>f(this,void 0,void 0,function*(){if(this.lock)return;const V=this.getItems(this.flushSize);if(V.length===0)return;this.lock=!0;const $=this.makeRequestBody(V);let X=!1;const Y=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(Y,V);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${$}`);const ne=yield this.send($);if(this.cancellableEvents.delete(Y),!ne.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${$} with response status ${ne.status}`),X=!0;else try{const ie=yield ne.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${$} message: ${JSON.stringify(ie)}`)}catch(ie){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ie} for events ${$}`)}}catch(ne){X=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${$} to the ingestion endpoint ${ne}`)}finally{this.lock=!1}X&&(this.cancellableEvents.delete(Y),this.failedIngestionEvents.push(...V))});const u=new s.default(S).getParserResult(),{browserMajorVersion:v}=u,E=h(u,["browserMajorVersion"]),b=o.toJSON(),{type:_,v:C}=b,I=h(b,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},E),I),Object.keys(this.metadata).forEach(V=>this.attributesToFilter.push(V)),this.type=_,this.v=C,this.ingestionURL=c,this.logger=S,this.importantEvents=new Set(g);const{maxBufferCapacityKb:A,totalBufferItems:w,flushSize:O,flushIntervalMs:R,retryCountLimit:F}=i;this.maxBufferCapacityBytes=A*1024,this.totalBufferItems=w,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/w),this.flushIntervalMs=R,this.flushSize=O,this.retryCountLimit=F,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=V=>this.beaconEventHandler(V),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},375752845:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h=5e3,p=2,m=64,a=100,s=15){this.flushIntervalMs=h,this.flushSize=p,this.maxBufferCapacityKb=m,this.totalBufferItems=a,this.retryCountLimit=s}},"EventBufferConfiguration");l.default=d},1653454410:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(c,g,S,u){function v(E){return E instanceof S?E:new S(function(b){b(E)})}return r(v,"adopt"),new(S||(S=Promise))(function(E,b){function _(A){try{I(u.next(A))}catch(w){b(w)}}r(_,"fulfilled");function C(A){try{I(u.throw(A))}catch(w){b(w)}}r(C,"rejected");function I(A){A.done?E(A.value):v(A.value).then(_,C)}r(I,"step"),I((u=u.apply(c,g||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(2518355262),m=d(3171772403),a=h(d(6329274303)),s=h(d(3645942785)),n=h(d(380175942)),e=h(d(3741513515)),t=h(d(8066052849)),i=h(d(4622151742));let o=r(class El{addObserver(g){this.observerSet.add(g)}removeObserver(g){this.observerSet.delete(g)}forEachObserver(g){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&g(S)})}publishEvent(g,S){return f(this,void 0,void 0,function*(){const u=Date.now();this.meetingHistoryStates.push({name:g,timestampMs:u});const v=Object.freeze(Object.assign(this.getAttributes(u),S));this.forEachObserver(E=>{E.eventDidReceive(g,v)}),this.reportEvent(g,u,S)})}reportEvent(g,S,u){var v;return f(this,void 0,void 0,function*(){let E;try{u&&(E=i.default(u)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,g,E)}catch(b){this.logger.error(`Error reporting event ${b}`)}})}setupEventReporter(g,S,u){if(u)this._eventReporter=u;else if(g.urls){const v=g.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:b,joinToken:_}}=g,C=new n.default(E,b,_),I=new a.default(C,v);this._eventReporter=new s.default(I,S)}}}getAttributes(g){var S,u;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||El.UNAVAILABLE,osVersion:((u=this.parserResult)===null||u===void 0?void 0:u.os.version)||El.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:g}}get eventReporter(){return this._eventReporter}destroy(){return f(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(g,S,u){var v,E,b,_,C,I,A;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=g,this.setupEventReporter(g,S,u);try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():null}catch(w){this.logger.error(w.message)}this.browserMajorVersion=((b=(E=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||E===void 0?void 0:E.version)===null||b===void 0?void 0:b.split(".")[0])||El.UNAVAILABLE,this.browserName=((_=this.parserResult)===null||_===void 0?void 0:_.browser.name)||El.UNAVAILABLE,this.browserVersion=((C=this.parserResult)===null||C===void 0?void 0:C.browser.version)||El.UNAVAILABLE,this.deviceName=[((I=this.parserResult)===null||I===void 0?void 0:I.device.vendor)||"",((A=this.parserResult)===null||A===void 0?void 0:A.device.model)||""].join(" ").trim()||El.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},4622151742:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=r(f=>{const h={};for(const[p,m]of Object.entries(f))if(!(m==null||m===""))if(typeof m=="number"||typeof m=="string")h[p]=m;else throw new TypeError("Unhandled type received while flattening attributes.");return h},"flattenEventAttributes");l.default=d},6329274303:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(375752845));let p=r(class{constructor(a,s,n=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=s,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");l.default=p},3645942785:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(3171772403),m=h(d(5578123693));let a=r(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return f(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return f(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),p.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:c}=t;this.eventBuffer=new m.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");l.default=a},4400960579:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{reportEvent(h,p,m){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=d},380175942:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const h={};return h.type=this.type,h.v=this.v,h.meetingId=this.meetingId,h.attendeeId=this.attendeeId,h}constructor(h,p,m,a=[]){this.type="Meet",this.v=1,this.meetingId=h,this.attendeeId=p,this.eventsToIgnore=a,this.authenticationToken=m}},"MeetingEventsClientConfiguration");l.default=d},7164668892:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(eo){return eo&&eo.__esModule?eo:{default:eo}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoElementResolutionMonitor=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=l.MeetingReadinessCheckerConfiguration=void 0,l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=l.RedundantAudioEncoderWorkerCode=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=l.VideoEncodingCpuConnectionHealthPolicy=void 0;const h=f(d(7744958188));l.AllHighestVideoBandwidthPolicy=h.default;const p=f(d(9821410283));l.ApplicationMetadata=p.default;const m=f(d(3741513515));l.AsyncScheduler=m.default;const a=f(d(7063021350));l.AttachMediaInputTask=a.default;const s=f(d(4846700713));l.Attendee=s.default;const n=f(d(6392364773));l.AudioLogEvent=n.default;const e=f(d(4999349075));l.AudioProfile=e.default;const t=f(d(8430013536));l.AudioVideoControllerState=t.default;const i=f(d(9721779232));l.BackgroundBlurStrength=i.default;const o=f(d(7840699215));l.BackgroundBlurVideoFrameProcessor=o.default;const c=f(d(6292069043));l.BackgroundFilterVideoFrameProcessor=c.default;const g=f(d(45891509));l.BackgroundReplacementVideoFrameProcessor=g.default;const S=f(d(6963727640));l.BaseConnectionHealthPolicy=S.default;const u=f(d(516529594));l.BaseTask=u.default;const v=f(d(7699083583));l.BitrateParameters=v.default;const E=f(d(1252089397));l.CSPMonitor=E.default;const b=f(d(6672418579));l.CanvasVideoFrameBuffer=b.default;const _=f(d(7337337789));l.CheckAudioConnectivityFeedback=_.default;const C=f(d(9946611704));l.CheckAudioInputFeedback=C.default;const I=f(d(2655850275));l.CheckAudioOutputFeedback=I.default;const A=f(d(9670709847));l.CheckCameraResolutionFeedback=A.default;const w=f(d(1236878429));l.CheckContentShareConnectivityFeedback=w.default;const O=f(d(9380119960));l.CheckNetworkTCPConnectivityFeedback=O.default;const R=f(d(7487205960));l.CheckNetworkUDPConnectivityFeedback=R.default;const F=f(d(2886652712));l.CheckVideoConnectivityFeedback=F.default;const V=f(d(4725233475));l.CheckVideoInputFeedback=V.default;const $=f(d(4019918320));l.CleanRestartedSessionTask=$.default;const X=f(d(7819987893));l.CleanStoppedSessionTask=X.default;const Y=f(d(7059763395));l.ClientMetricReport=Y.default;const ne=f(d(5147189764));l.ClientMetricReportDirection=ne.default;const ie=f(d(1847926377));l.ClientMetricReportMediaType=ie.default;const ge=f(d(9895069884));l.ClientVideoStreamReceivingReport=ge.default;const Ie=f(d(3544934903));l.ConnectionHealthData=Ie.default;const We=f(d(1091173065));l.ConnectionHealthPolicyConfiguration=We.default;const ct=f(d(5956893594));l.ConsoleLogger=ct.default;const Ae=f(d(3560634922));l.ContentShareConstants=Ae.default;const Fe=f(d(8271576690));l.ContentShareMediaStreamBroker=Fe.default;const Xe=f(d(2918138407));l.CreatePeerConnectionTask=Xe.default;const Ge=f(d(7869625838));l.CreateSDPTask=Ge.default;const it=f(d(1766966835));l.DataMessage=it.default;const Dt=f(d(3323583056));l.DefaultActiveSpeakerDetector=Dt.default;const wt=f(d(1644292716));l.DefaultActiveSpeakerPolicy=wt.default;const Pe=f(d(3227886346));l.DefaultAudioMixController=Pe.default;const xe=f(d(616382858));l.DefaultAudioVideoController=xe.default;const et=f(d(314828250));l.DefaultAudioVideoFacade=et.default;const rt=f(d(8351168186));l.DefaultBrowserBehavior=rt.default;const je=f(d(4707988254));l.DefaultContentShareController=je.default;const Ft=f(d(8152963890));l.DefaultDeviceController=Ft.default;const Gt=f(d(2343182956));l.DefaultDevicePixelRatioMonitor=Gt.default;const Xt=f(d(1653454410));l.DefaultEventController=Xt.default;const sn=f(d(113406342));l.DefaultMediaDeviceFactory=sn.default;const cn=f(d(3645942785));l.DefaultMeetingEventReporter=cn.default;const Bt=f(d(2741503378));l.DefaultMeetingReadinessChecker=Bt.default;const gn=f(d(542823578));l.DefaultMeetingSession=gn.default;const Ci=f(d(9249618790));l.DefaultMessagingSession=Ci.default;const $n=f(d(4599834734));l.DefaultModality=$n.default;const Sn=f(d(2311029370));l.DefaultPingPong=Sn.default;const nn=f(d(5403024322));l.DefaultRealtimeController=nn.default;const Vt=f(d(8855787924));l.DefaultReconnectController=Vt.default;const Wn=f(d(4641929542));l.DefaultSessionStateController=Wn.default;const Lt=f(d(7822521824));l.DefaultSigV4=Lt.default;const zt=f(d(7258714924));l.DefaultSignalingClient=zt.default;const It=f(d(3361826027));l.DefaultSimulcastUplinkPolicy=It.default;const z=f(d(4134174226));l.DefaultSimulcastUplinkPolicyForContentShare=z.default;const Ve=f(d(6769427378));l.DefaultTransceiverController=Ve.default;const He=f(d(246495600));l.DefaultTranscriptionController=He.default;const Je=f(d(3564840480));l.DefaultUserAgentParser=Je.default;const Ye=f(d(8261422434));l.DefaultVideoCaptureAndEncodeParameter=Ye.default;const lt=f(d(8599164152));l.DefaultVideoElementResolutionMonitor=lt.default;const le=f(d(7145536260));l.DefaultVideoFrameProcessorPipeline=le.default;const Ue=f(d(1902736443));l.DefaultVideoFrameProcessorTimer=Ue.default;const G=f(d(5134603106));l.DefaultVideoStreamIdSet=G.default;const Q=f(d(5216544790));l.DefaultVideoStreamIndex=Q.default;const ye=f(d(1140481832));l.DefaultVideoTile=ye.default;const Ee=f(d(9251190564));l.DefaultVideoTileController=Ee.default;const pt=f(d(1695899970));l.DefaultVideoTileFactory=pt.default;const ze=f(d(5709738441));l.DefaultVideoTransformDevice=ze.default;const st=f(d(338869682));l.DefaultVolumeIndicatorAdapter=st.default;const me=f(d(8796204466));l.DefaultWebSocketAdapter=me.default;const Me=f(d(2827699573));l.DevicePixelRatioWindowSource=Me.default;const k=f(d(4261566413));l.DeviceSelection=k.default;const Se=f(d(375752845));l.EventBufferConfiguration=Se.default;const be=f(d(6329274303));l.EventIngestionConfiguration=be.default;const we=f(d(9613312866));l.FinishGatheringICECandidatesTask=we.default;const ee=f(d(5384631890));l.FullJitterBackoff=ee.default;const en=f(d(1363278032));l.FullJitterBackoffFactory=en.default;const dt=f(d(8220481840));l.FullJitterLimitedBackoff=dt.default;const Ct=f(d(2083236720));l.GetUserMediaError=Ct.default;const xn=f(d(3572556907));l.GlobalMetricReport=xn.default;const Qt=f(d(5578123693));l.InMemoryJSONEventBuffer=Qt.default;const Xi=f(d(9013967876));l.IntervalScheduler=Xi.default;const Pi=f(d(1495317641));l.JoinAndReceiveIndexTask=Pi.default;const Kn=f(d(5110013894));l.LeaveAndReceiveLeaveAckTask=Kn.default;const ni=f(d(3708122413));l.ListenForVolumeIndicatorsTask=ni.default;const Mn=f(d(3382381733));l.Log=Mn.default;const qn=f(d(3756404293));l.LogLevel=qn.default;const bi=f(d(3072764689));l.MediaDeviceProxyHandler=bi.default;const xr=f(d(380175942));l.MeetingEventsClientConfiguration=xr.default;const Zt=f(d(7584876358));l.MeetingFeatures=Zt.default;const Nt=f(d(7683606499));l.MeetingReadinessCheckerConfiguration=Nt.default;const On=f(d(7136804647));l.MeetingSessionConfiguration=On.default;const _n=f(d(7147499759));l.MeetingSessionCredentials=_n.default;const si=f(d(5446246651));l.MeetingSessionLifecycleEvent=si.default;const vi=f(d(7192341248));l.MeetingSessionLifecycleEventCondition=vi.default;const Mi=f(d(3777990285));l.MeetingSessionStatus=Mi.default;const ui=f(d(4882394368));l.MeetingSessionStatusCode=ui.default;const Ii=f(d(7999114886));l.MeetingSessionTURNCredentials=Ii.default;const wi=f(d(2653083101));l.MeetingSessionURLs=wi.default;const Ui=f(d(1880578541));l.MeetingSessionVideoAvailability=Ui.default;const ii=f(d(1721682483));l.Message=ii.default;const fr=f(d(9309957401));l.MessagingSessionConfiguration=fr.default;const Li=f(d(7472936477));l.ModelSpecBuilder=Li.default;const Ar=f(d(1504187181));l.MonitorTask=Ar.default;const Zn=f(d(950290054));l.MultiLogger=Zn.default;const N=f(d(3423911843));l.NScaleVideoUplinkBandwidthPolicy=N.default;const oe=f(d(1292880771));l.NoOpAudioVideoController=oe.default;const Re=f(d(9416545472));l.NoOpDebugLogger=Re.default;const nt=f(d(9799823045));l.NoOpDeviceController=nt.default;const Pt=f(d(4400960579));l.NoOpEventReporter=Pt.default;const En=f(d(7338764361));l.NoOpLogger=En.default;const wn=f(d(1946951215));l.NoOpMediaStreamBroker=wn.default;const vn=f(d(1992142375));l.NoOpTask=vn.default;const yn=f(d(8481249111));l.NoOpVideoElementFactory=yn.default;const Rn=f(d(7000795223));l.NoOpVideoFrameProcessor=Rn.default;const Fn=f(d(9248911078));l.NoVideoDownlinkBandwidthPolicy=Fn.default;const yi=f(d(9128807920));l.NoVideoUplinkBandwidthPolicy=yi.default;const fi=f(d(9468773362));l.NotFoundError=fi.default;const Wi=f(d(6809352498));l.NotReadableError=Wi.default;const Zr=f(d(2913368614));l.OnceTask=Zr.default;const gr=f(d(6907504899));l.OpenSignalingConnectionTask=gr.default;const Un=f(d(3288618491));l.OverconstrainedError=Un.default;const hr=f(d(1141297335));l.POSTLogger=hr.default;const ar=f(d(6015743885));l.ParallelGroupTask=ar.default;const pn=f(d(6997557363));l.PermissionDeniedError=pn.default;const Sr=f(d(6747155167));l.PrefetchOn=Sr.default;const Pn=f(d(9468168383));l.PrefetchSortBy=Pn.default;const so=f(d(2997222898));l.PromiseQueue=so.default;const Wr=f(d(3627106901));l.PromoteToPrimaryMeetingTask=Wr.default;const $r=f(d(4412582314));l.RealtimeAttendeePositionInFrame=$r.default;const yo=f(d(6045987188));l.RealtimeState=yo.default;const ue=f(d(2450851234));l.RealtimeVolumeIndicator=ue.default;const ve=f(d(3151098372));l.ReceiveAudioInputTask=ve.default;const Le=f(d(9363406688));l.ReceiveRemoteVideoPauseResumeTask=Le.default;const at=f(d(6069988831));l.ReceiveVideoInputTask=at.default;const gt=f(d(2452872079));l.ReceiveVideoStreamIndexTask=gt.default;const Tt=f(d(8929805428));l.ReconnectionHealthPolicy=Tt.default;const rn=f(d(1510239283));l.RedundantAudioEncoder=rn.default;const bn=f(d(3440292739));l.RedundantAudioEncoderWorkerCode=bn.default;const Tn=f(d(7894724558));l.RedundantAudioRecoveryMetricReport=Tn.default;const ln=f(d(6771673942));l.RunnableTask=ln.default;const Vn=f(d(3430379175));l.SDP=Vn.default;const Ut=f(d(9615283928));l.SDPCandidateType=Ut.default;const hi=f(d(3364495052));l.SDPMediaSection=hi.default;const An=f(d(2471283351));l.SendAndReceiveDataMessagesTask=An.default;const Fi=f(d(2115341037));l.SendingAudioFailureConnectionHealthPolicy=Fi.default;const Qi=f(d(3894566132));l.SerialGroupTask=Qi.default;const Zi=f(d(1448262436));l.ServerSideNetworkAdaption=Zi.default;const Hn=f(d(3097552577));l.SessionStateControllerAction=Hn.default;const Jn=f(d(3049140029));l.SessionStateControllerDeferPriority=Jn.default;const ai=f(d(953236500));l.SessionStateControllerState=ai.default;const Ri=f(d(7338273141));l.SessionStateControllerTransitionResult=Ri.default;const Cr=f(d(6412210284));l.SetLocalDescriptionTask=Cr.default;const Ur=f(d(839180639));l.SetRemoteDescriptionTask=Ur.default;const li=f(d(1523356655));l.SignalingAndMetricsConnectionMonitor=li.default;const Kr=f(d(893025464));l.SignalingClientConnectionRequest=Kr.default;const Ji=f(d(8152250765));l.SignalingClientEvent=Ji.default;const Or=f(d(426218501));l.SignalingClientEventType=Or.default;const xo=f(d(9315300759));l.SignalingClientJoin=xo.default;const Go=f(d(1026405281));l.SignalingClientSubscribe=Go.default;const Po=f(d(4983545831));l.SignalingClientVideoSubscriptionConfiguration=Po.default;const ko=f(d(1438956810));l.SimulcastContentShareTransceiverController=ko.default;const Uo=f(d(8438160003));l.SimulcastLayers=Uo.default;const To=f(d(2962876954));l.SimulcastTransceiverController=To.default;const Jr=f(d(7562203998));l.SimulcastVideoStreamIndex=Jr.default;const ao=f(d(3083691903));l.SingleNodeAudioTransformDevice=ao.default;const Io=f(d(7825873064));l.StreamMetricReport=Io.default;const Gr=f(d(2641934340));l.SubscribeAndReceiveSubscribeAckTask=Gr.default;const lo=f(d(6110401981));l.TargetDisplaySize=lo.default;const vr=f(d(9293073193));l.TaskStatus=vr.default;const co=f(d(6393942734));l.TimeoutScheduler=co.default;const ws=f(d(3450261616));l.TimeoutTask=ws.default;const Ds=f(d(9138893973));l.Transcript=Ds.default;const Yr=f(d(866659076));l.TranscriptAlternative=Yr.default;const Co=f(d(7538060970));l.TranscriptEntity=Co.default;const pr=f(d(3531434754));l.TranscriptItem=pr.default;const Mr=f(d(2024984314));l.TranscriptItemType=Mr.default;const wr=f(d(9584814027));l.TranscriptLanguageWithScore=wr.default;const jr=f(d(3443368328));l.TranscriptResult=jr.default;const Vr=f(d(2461374283));l.TranscriptionStatus=Vr.default;const rs=f(d(3798201443));l.TranscriptionStatusType=rs.default;const q=f(d(8219602063));l.TypeError=q.default;const re=f(d(5928001672));l.UnusableAudioWarningConnectionHealthPolicy=re.default;const he=f(d(8066052849));l.Versioning=he.default;const Te=f(d(1437705752));l.VideoAdaptiveProbePolicy=Te.default;const ke=f(d(4883941895));l.VideoCodecCapability=ke.default;const ot=f(d(6005421222));l.VideoEncodingConnectionHealthPolicyName=ot.default;const Ze=f(d(8438187697));l.VideoEncodingCpuConnectionHealthPolicy=Ze.default;const Mt=f(d(1615281264));l.VideoEncodingFramerateConnectionHealthPolicy=Mt.default;const Rt=f(d(2403769553));l.VideoFxProcessor=Rt.default;const xt=f(d(4715258780));l.VideoLogEvent=xt.default;const kt=f(d(3052177122));l.VideoOnlyTransceiverController=kt.default;const Jt=f(d(7981698535));l.VideoPreference=Jt.default;const Yt=f(d(6700033168));l.VideoPreferences=Yt.default;const tn=f(d(6313276823));l.VideoPriorityBasedPolicy=tn.default;const mn=f(d(9837586225));l.VideoPriorityBasedPolicyConfig=mn.default;const hn=f(d(5116495551));l.VideoQualityAdaptationPreference=hn.default;const an=f(d(8981226922));l.VideoQualitySettings=an.default;const $t=f(d(2551170247));l.VideoSource=$t.default;const Bn=f(d(4202624657));l.VideoStreamDescription=Bn.default;const Ei=f(d(5449946032));l.VideoTileState=Ei.default;const Bi=f(d(8525594090));l.VoiceFocusDeviceTransformer=Bi.default;const qi=f(d(282836061));l.VoiceFocusTransformDevice=qi.default;const Et=f(d(7500181884));l.WaitForAttendeePresenceTask=Et.default;const Vi=f(d(2686893898));l.WebSocketReadyState=Vi.default;const Hi=f(d(9675039205));l.ZLIBTextCompressor=Hi.default;const Ti=d(6700033168);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return Ti.MutableVideoPreferences}});const Rr=d(903520651);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return Rr.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return Rr.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return Rr.Maybe}});const uo=d(3961458747);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return uo.isAudioTransformDevice}});const Ir=d(3171772403);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return Ir.isDestroyable}});const qr=d(272852764);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return qr.isVideoTransformDevice}})},5956893594:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3756404293));let p=r(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,s){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${s}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,s=h.default.WARN){this.name=a,this.level=s}},"ConsoleLogger");l.default=p},3382381733:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a){this.sequenceNumber=h,this.message=p,this.timestampMs=m,this.logLevel=a}},"Log");l.default=d},3756404293:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var d;(function(f){f[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR",f[f.OFF=4]="OFF"})(d=l.LogLevel||(l.LogLevel={})),l.default=d},950290054:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3756404293));let p=r(class{info(a){for(const s of this._loggers)s.info(a)}warn(a){for(const s of this._loggers)s.warn(a)}error(a){for(const s of this._loggers)s.error(a)}debug(a){let s,n;typeof a=="string"?n=a:a?n=r(()=>(s||(s=a()),s),"memoized"):n=""+a;for(const e of this._loggers)e.debug(n)}setLogLevel(a){for(const s of this._loggers)s.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=p},9416545472:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3756404293)),p=f(d(7338764361));let m=r(class extends p.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=m},7338764361:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3756404293));let p=r(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=p},1141297335:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(9013967876)),m=h(d(3382381733)),a=h(d(3756404293));let s=r(class Wh{addEventListener(){!this.eventListener||!("window"in d.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in d.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new p.default(this.intervalMs),this.intervalScheduler.start(()=>f(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return f(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new m.default(this.sequenceNumber,t,i,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=Wh.BATCH_SIZE,intervalMs:o=Wh.INTERVAL_MS,logLevel:c=a.default.WARN,metadata:g,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=c,this.metadata=g,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=s,s.BATCH_SIZE=85,s.INTERVAL_MS=2e3},113406342:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3072764689));let p=r(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=p},3072764689:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3741513515)),m=h(d(9013967876));let a=r(class IS{sortedDeviceList(){return f(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)p.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,g)=>{if(o==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new m.default(IS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,c,g])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,g)=>{if(o==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,c,g])}},this.pollDeviceLists=()=>f(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},1946951215:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(h){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(h){}removeMediaStreamBrokerObserver(h){}},"NoOpMediaStreamBroker");l.default=d},7337337789:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.AudioInputRequestFailed=1]="AudioInputRequestFailed",f[f.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",f[f.ConnectionFailed=3]="ConnectionFailed",f[f.AudioNotReceived=4]="AudioNotReceived"})(d=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=d},9946611704:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.PermissionDenied=2]="PermissionDenied"})(d=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=d},2655850275:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed"})(d=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=d},9670709847:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.ResolutionNotSupported=2]="ResolutionNotSupported",f[f.PermissionDenied=3]="PermissionDenied"})(d=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=d},1236878429:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.PermissionDenied=2]="PermissionDenied",f[f.TimedOut=3]="TimedOut",f[f.ConnectionFailed=4]="ConnectionFailed"})(d=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=d},9380119960:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",f[f.ConnectionFailed=2]="ConnectionFailed",f[f.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=d},7487205960:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",f[f.ConnectionFailed=2]="ConnectionFailed",f[f.ICENegotiationFailed=3]="ICENegotiationFailed"})(d=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=d},2886652712:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.VideoInputRequestFailed=1]="VideoInputRequestFailed",f[f.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",f[f.ConnectionFailed=3]="ConnectionFailed",f[f.VideoNotSent=4]="VideoNotSent"})(d=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=d},4725233475:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var d;(function(f){f[f.Succeeded=0]="Succeeded",f[f.Failed=1]="Failed",f[f.PermissionDenied=2]="PermissionDenied"})(d=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=d},2741503378:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(C,I,A,w){function O(R){return R instanceof A?R:new A(function(F){F(R)})}return r(O,"adopt"),new(A||(A=Promise))(function(R,F){function V(Y){try{X(w.next(Y))}catch(ne){F(ne)}}r(V,"fulfilled");function $(Y){try{X(w.throw(Y))}catch(ne){F(ne)}}r($,"rejected");function X(Y){Y.done?R(Y.value):O(Y.value).then(V,$)}r(X,"step"),X((w=w.apply(C,I||[])).next())})},h=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3227886346)),m=h(d(8351168186)),a=h(d(8152963890)),s=h(d(6997557363)),n=h(d(516529594)),e=h(d(3450261616)),t=h(d(7337337789)),i=h(d(9946611704)),o=h(d(2655850275)),c=h(d(9670709847)),g=h(d(1236878429)),S=h(d(9380119960)),u=h(d(7487205960)),v=h(d(2886652712)),E=h(d(4725233475)),b=h(d(7683606499));let _=r(class wS{static delay(I){return f(this,void 0,void 0,function*(){return new Promise(A=>setTimeout(A,I))})}checkAudioInput(I){return f(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(I),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(A){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${A}`),A instanceof s.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(I,A){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return f(this,void 0,void 0,function*(){try{const O=I?a.default.getIntrinsicDeviceId(I):"";return yield this.playTone(O,this.configuration.audioOutputFrequency,w),(yield A())?o.default.Succeeded:o.default.Failed}catch(O){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${O}`),o.default.Failed}finally{this.stopTone()}})}playTone(I,A,w){return f(this,void 0,void 0,function*(){const R=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=A,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const V=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,V),this.gainNode.gain.linearRampToValueAtTime(R,V+.1),this.oscillatorNode.start();const $=new p.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield $.bindAudioDevice({deviceId:I}))}catch(X){this.logger.error(`Failed to bind audio device: ${X}`)}try{yield $.bindAudioElement(w||new Audio)}catch(X){this.logger.error(`Failed to bind audio element: ${X}`)}yield $.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const I=1,A=.1,w=this.configuration.audioOutputGain,O=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(w,O+A+I),this.gainNode.gain.linearRampToValueAtTime(0,O+A*2+I),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(I){return f(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(I),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(A){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${A}`),A instanceof s.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(I,A,w){return f(this,void 0,void 0,function*(){let O;try{const R=a.default.getIntrinsicDeviceId(I),F={video:this.calculateVideoConstraint(R,A,w)};O=yield navigator.mediaDevices.getUserMedia(F)}catch(R){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${A} height ${w} failed with error ${R}`),R&&R.name==="OverconstrainedError"?c.default.ResolutionNotSupported:R&&R.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{O&&O.getTracks().forEach(function(R){R.stop()})}return c.default.Succeeded})}calculateVideoConstraint(I,A,w){const O=this.browserBehavior.requiresResolutionAlignment(A,w),R={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(R.deviceId=I,R.width=A,R.height=w):(R.deviceId={exact:I},R.width={exact:O[0]},R.height={exact:O[1]}),R}checkContentShareConnectivity(I){return f(this,void 0,void 0,function*(){let A=!1,w=!1;const O={contentShareDidStart:()=>{A=!0}},R={audioVideoDidStart:()=>{w=!0}};try{return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(O),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(I),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return w&&A})),w?(yield this.stopMeeting(),A?g.default.Succeeded:g.default.TimedOut):g.default.ConnectionFailed}catch(F){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${F}`),F.name==="NotAllowedError"?g.default.PermissionDenied:g.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(R),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(O)}})}checkAudioConnectivity(I){return f(this,void 0,void 0,function*(){let A=!1;const w={packetsReceived:0},O=this.meetingSession.audioVideo,R={metricsDidReceive(V){V.getRTCStatsReport().forEach($=>{$.type==="inbound-rtp"&&($.mediaType==="audio"||$.kind==="audio")&&(w.packetsReceived=$.packetsReceived)})}},F=r((V,$,X,Y)=>{V===this.meetingSession.configuration.credentials.attendeeId&&$&&(A=!0)},"attendeePresenceHandler");try{yield O.startAudioInput(I)}catch(V){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${V}`),V instanceof s.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return O.realtimeSubscribeToAttendeeIdPresence(F),O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(A,w)})),O.removeObserver(R),O.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(A,w)?t.default.Succeeded:t.default.AudioNotReceived):(O.removeObserver(R),O.realtimeUnsubscribeToAttendeeIdPresence(F),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(I){return f(this,void 0,void 0,function*(){const A=this.meetingSession.audioVideo;let w=0;const O={metricsDidReceive(R){R.getRTCStatsReport().forEach(V=>{V.type==="outbound-rtp"&&(V.mediaType==="video"||V.kind==="video")&&(w=V.packetsSent)})}};try{yield A.startVideoInput(I)}catch(R){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${R}`),R instanceof s.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return A.addObserver(O),(yield this.startMeeting())?(A.startLocalVideoTile(),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return w>0})),yield A.stopVideoInput(),yield this.stopMeeting(),A.removeObserver(O),w<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return f(this,void 0,void 0,function*(){let I=!1;const A={metricsDidReceive(O){O.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(O){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${O}`),u.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=O=>{const R=this.originalURLRewriter(O);return R.includes("transport=tcp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(A),I?u.default.Succeeded:u.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,u.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return f(this,void 0,void 0,function*(){let I=!1;const A={metricsDidReceive(O){O.getRTCStatsReport().forEach(F=>{F.type==="candidate-pair"&&F.state==="succeeded"&&(I=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(O){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${O}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=O=>{const R=this.originalURLRewriter(O);return R.includes("transport=udp")?"":R};const w=this.meetingSession.audioVideo;return w.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(A),I?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return f(this,void 0,void 0,function*(){let I=!1;const A={audioVideoDidStart:()=>{I=!0}};return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(A),I})}stopMeeting(){return f(this,void 0,void 0,function*(){let I=!1;const A={audioVideoDidStop:w=>{I=!0}};return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>f(this,void 0,void 0,function*(){return I})),this.meetingSession.audioVideo.removeObserver(A),I})}executeTimeoutTask(I){return f(this,void 0,void 0,function*(){let A=!1,w=r(class extends n.default{cancel(){this.isCancelled=!0}run(){return f(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield I()){A=!0;break}yield wS.delay(this.waitDurationMs)}})}constructor(F,V){super(F),this.waitDurationMs=V,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new w(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),A})}isAudioConnectionSuccessful(I,A){return I&&A.packetsReceived>0}constructor(I,A,w=new b.default){this.logger=I,this.meetingSession=A,this.configuration=w,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");l.default=_},7683606499:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=d},542823578:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(u,v,E,b){function _(C){return C instanceof E?C:new E(function(I){I(C)})}return r(_,"adopt"),new(E||(E=Promise))(function(C,I){function A(R){try{O(b.next(R))}catch(F){I(F)}}r(A,"fulfilled");function w(R){try{O(b.throw(R))}catch(F){I(F)}}r(w,"rejected");function O(R){R.done?C(R.value):_(R.value).then(A,w)}r(O,"step"),O((b=b.apply(u,v||[])).next())})},h=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(616382858)),m=h(d(314828250)),a=h(d(5384631890)),s=h(d(8351168186)),n=h(d(8271576690)),e=h(d(4707988254)),t=h(d(1252089397)),i=d(3171772403),o=h(d(1653454410)),c=h(d(8855787924)),g=h(d(8796204466));let S=r(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return f(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new s.default,E=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${E}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,E,b,_){this._eventController=_,this._configuration=v,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,E)),b.eventController||(b.eventController=this.eventController),this.audioVideoController=new p.default(this._configuration,this._logger,new g.default(this._logger),b,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=b,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const C=new n.default(this._logger);this.contentShareController=new e.default(C,new p.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new g.default(this._logger),C,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},7584876358:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8981226922));let p=r(class DS{clone(){return new DS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,s=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=s}},"MeetingFeatures");l.default=p},7136804647:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1091173065)),p=f(d(8981226922)),m=d(840544383),a=f(d(7584876358)),s=f(d(7147499759)),n=f(d(2653083101));let e=r(class{constructor(i,o){var c,g;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,i){i=m.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=r((u,v)=>{switch(u){case"None":return p.default.VideoDisabled;case"HD":return p.default.VideoResolutionHD;case"FHD":return p.default.VideoResolutionFHD;case"UHD":return p.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((c=i.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((g=i.meetingfeatures)===null||g===void 0?void 0:g.content)!==void 0){const u=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,v=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(u,p.default.VideoResolutionHD),S(v,p.default.VideoResolutionFHD))}}o&&(o=m.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new s.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},7147499759:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=d},5446246651:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var d;(function(f){f[f.Connecting=0]="Connecting",f[f.Started=1]="Started",f[f.Stopped=2]="Stopped"})(d=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=d},7192341248:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var d;(function(f){f[f.ConnectingNew=0]="ConnectingNew",f[f.ReconnectingExisting=1]="ReconnectingExisting",f[f.StartedNew=2]="StartedNew",f[f.StartedExisting=3]="StartedExisting",f[f.StartedAfterReconnect=4]="StartedAfterReconnect",f[f.StoppedCleanly=5]="StoppedCleanly",f[f.StoppedWithFailure=6]="StoppedWithFailure"})(d=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=d},3777990285:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),p=f(d(4882394368));let m=r(class oo{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:case p.default.VideoCallAtSourceCapacity:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.ICEGatheringTimeoutWorkaround:case p.default.ConnectionHealthReconnect:case p.default.RealtimeApiFailed:case p.default.TaskFailed:case p.default.NoAttendeePresent:case p.default.SignalingChannelClosedUnexpectedly:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case p.default.Left:case p.default.AudioJoinedFromAnotherDevice:case p.default.AudioAuthenticationRejected:case p.default.AudioCallAtCapacity:case p.default.MeetingEnded:case p.default.AudioDisconnected:case p.default.TURNCredentialsForbidden:case p.default.SignalingBadRequest:case p.default.SignalingRequestFailed:case p.default.VideoCallAtSourceCapacity:case p.default.RealtimeApiFailed:case p.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case p.default.AudioAuthenticationRejected:case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.ICEGatheringTimeoutWorkaround:case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:case p.default.RealtimeApiFailed:case p.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case p.default.OK:return"Everything is OK so far.";case p.default.Left:return"The attendee left the meeting.";case p.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case p.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case p.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case p.default.MeetingEnded:return"The meeting ended.";case p.default.AudioInternalServerError:case p.default.AudioServiceUnavailable:case p.default.AudioDisconnected:return"The audio connection failed.";case p.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case p.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case p.default.SignalingBadRequest:case p.default.SignalingInternalServerError:case p.default.SignalingRequestFailed:return"The signaling connection failed.";case p.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case p.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case p.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case p.default.TaskFailed:return"The connection failed. See the error message for more details.";case p.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case p.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case p.default.NoAttendeePresent:return"The attendee was not present.";case p.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case p.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case p.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case p.default.AudioDisconnectAudio:return"The audio connection failed.";case p.default.SignalingChannelClosedUnexpectedly:return"The signaling channel was closed unexpectedly. This may be due to a network change or backend detected failure.";default:{const s=this._statusCode;throw new Error(`Unhandled case: ${s}`)}}}static fromSignalFrame(s){return s.error&&s.error.status?this.fromSignalingStatus(s.error.status):s.type===h.SdkSignalFrame.Type.AUDIO_STATUS?s.audioStatus?this.fromAudioStatus(s.audioStatus.audioStatus):new oo(p.default.SignalingRequestFailed):s.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new oo(p.default.AudioVideoWasRemovedFromPrimaryMeeting):new oo(p.default.OK)}static fromAudioStatus(s){switch(s){case 200:return new oo(p.default.OK);case 301:return new oo(p.default.AudioJoinedFromAnotherDevice);case 302:return new oo(p.default.AudioDisconnectAudio);case 403:return new oo(p.default.AudioAuthenticationRejected);case 409:return new oo(p.default.AudioCallAtCapacity);case 410:return new oo(p.default.MeetingEnded);case 411:return new oo(p.default.AudioAttendeeRemoved);case 500:return new oo(p.default.AudioInternalServerError);case 503:return new oo(p.default.AudioServiceUnavailable);default:switch(Math.floor(s/100)){case 2:return new oo(p.default.OK);default:return new oo(p.default.AudioDisconnected)}}}static fromSignalingStatus(s){switch(s){case 206:return new oo(p.default.VideoCallSwitchToViewOnly);case 509:return new oo(p.default.VideoCallAtSourceCapacity);case 403:return new oo(p.default.AudioAuthenticationRejected);case 409:return new oo(p.default.AudioCallAtCapacity);default:switch(Math.floor(s/100)){case 2:return new oo(p.default.OK);case 4:return new oo(p.default.SignalingBadRequest);case 5:return new oo(p.default.SignalingInternalServerError);default:return new oo(p.default.SignalingRequestFailed)}}}constructor(s){this._statusCode=s}},"MeetingSessionStatus");l.default=m},4882394368:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var d;(function(f){f[f.OK=0]="OK",f[f.Left=1]="Left",f[f.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",f[f.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",f[f.AudioCallAtCapacity=4]="AudioCallAtCapacity",f[f.MeetingEnded=5]="MeetingEnded",f[f.AudioInternalServerError=6]="AudioInternalServerError",f[f.AudioServiceUnavailable=7]="AudioServiceUnavailable",f[f.AudioDisconnected=8]="AudioDisconnected",f[f.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",f[f.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",f[f.SignalingBadRequest=11]="SignalingBadRequest",f[f.SignalingInternalServerError=12]="SignalingInternalServerError",f[f.SignalingRequestFailed=13]="SignalingRequestFailed",f[f.SignalingChannelClosedUnexpectedly=14]="SignalingChannelClosedUnexpectedly",f[f.ICEGatheringTimeoutWorkaround=15]="ICEGatheringTimeoutWorkaround",f[f.ConnectionHealthReconnect=16]="ConnectionHealthReconnect",f[f.RealtimeApiFailed=17]="RealtimeApiFailed",f[f.TaskFailed=18]="TaskFailed",f[f.IncompatibleSDP=19]="IncompatibleSDP",f[f.TURNCredentialsForbidden=20]="TURNCredentialsForbidden",f[f.NoAttendeePresent=21]="NoAttendeePresent",f[f.AudioAttendeeRemoved=22]="AudioAttendeeRemoved",f[f.AudioVideoWasRemovedFromPrimaryMeeting=23]="AudioVideoWasRemovedFromPrimaryMeeting",f[f.AudioVideoDisconnectedWhilePromoted=24]="AudioVideoDisconnectedWhilePromoted",f[f.AudioDisconnectAudio=25]="AudioDisconnectAudio"})(d=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=d},7999114886:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=d},2653083101:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(h){this._audioHostURL=h}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(h){this._signalingURL=h}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(h){this._turnControlURL=h}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(h){this._eventIngestionURL=h}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=h=>h}},"MeetingSessionURLs");l.default=d},1880578541:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class AS{equal(h){return this.remoteVideoAvailable===h.remoteVideoAvailable&&this.canStartLocalVideo===h.canStartLocalVideo}clone(){const h=new AS;return h.remoteVideoAvailable=this.remoteVideoAvailable,h.canStartLocalVideo=this.canStartLocalVideo,h}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=d},1721682483:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m){this.type=h,this.headers=p,this.payload=m}},"Message");l.default=d},9249618790:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(S,u,v,E){function b(_){return _ instanceof v?_:new v(function(C){C(_)})}return r(b,"adopt"),new(v||(v=Promise))(function(_,C){function I(O){try{w(E.next(O))}catch(R){C(R)}}r(I,"fulfilled");function A(O){try{w(E.throw(O))}catch(R){C(R)}}r(A,"rejected");function w(O){O.done?_(O.value):b(O.value).then(I,A)}r(w,"step"),w((E=E.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(8804412379),m=h(d(5384631890)),a=h(d(1252089397)),s=h(d(1721682483)),n=h(d(8855787924)),e=h(d(3741513515)),t=h(d(7822521824)),i=h(d(8796204466)),o=h(d(2686893898)),c=h(d(6747155167));let g=r(class{addObserver(u){this.logger.info("adding messaging observer"),this.observerQueue.add(u)}removeObserver(u){this.logger.info("removing messaging observer"),this.observerQueue.delete(u)}start(){return f(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(u){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&u(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",u=>{this.receiveMessageHandler(u.data)}),this.webSocket.addEventListener("close",u=>{this.closeEventHandler(u)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(u){return f(this,void 0,void 0,function*(){return yield this.startConnectingInternal(u),yield new Promise((v,E)=>{this.bootstrapResolved=v,this.bootstrapRejected=E})})}startConnectingInternal(u){var v;return f(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),u||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const _=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=_.Endpoint)===null||v===void 0)&&v.Url?E=_.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new p.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(_){this.logger.error(`Messaging Session failed to resolve endpoint: ${_}`);const C=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(C);return}const b=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${b}`),u||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(b,[],!0),this.forEachObserver(_=>{_.messagingSessionDidStartConnecting&&_.messagingSessionDidStartConnecting(u)}),this.setUpEventListeners()})}prepareWebSocketUrl(u){return f(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&v.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",u,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(u){try{const v=JSON.parse(u),E=v.Headers["x-amz-chime-event-type"],b=new s.default(E,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(C=>{C.messagingSessionDidStart&&C.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const _=this.preBootstrapMessages.length;for(let C=0;C<_;C++){const I=this.preBootstrapMessages.shift();this.forEachObserver(A=>{this.sendMessageToObserver(A,I)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(b);return}this.forEachObserver(_=>{this.sendMessageToObserver(_,b)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(u,v){u.messagingSessionDidReceiveMessage&&u.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>f(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(u){this.logger.info(`WebSocket close: ${u.code} ${u.reason}`),u.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(u.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(u)}):this.bootstrapRejected(u))}canReconnect(u){return u===1001||u===1006||u>=1011&&u<=1014||u>4e3&&u!==4002&&u!==4003&&u!==4401}constructor(u,v,E,b,_){this.configuration=u,this.logger=v,this.webSocket=E,this.reconnectController=b,this.sigV4=_,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(u.reconnectTimeoutMs,new m.default(u.reconnectFixedWaitMs,u.reconnectShortBackoffMs,u.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=g},9309957401:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(840544383);let h=r(class{generateSessionId(){const m=new Uint32Array(1);return f.getRandomValues(m),m[0].toString()}constructor(m,a,s,n){this.userArn=m,this.messagingSessionId=a,this.endpointUrl=s,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=h},6747155167:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.Connect="connect"})(d||(d={})),l.default=d},9468168383:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.Unread="unread",f.LastMessageTimestamp="last-message-timestamp"})(d||(d={})),l.default=d},4599834734:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3560634922));let p=r(class bl{id(){return this._id}base(){return this._id?this._id.split(bl.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(bl.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const s=new bl(this.base()+bl.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new bl(s._id).modality()!==a?new bl(this.base()):s}constructor(a){this._id=a}},"DefaultModality");l.default=p,p.MODALITY_SEPARATOR=h.default.Modality[0],p.MODALITY_CONTENT=h.default.Modality.substring(1)},2311029370:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3741513515)),p=f(d(9013967876)),m=f(d(426218501)),a=d(5391134031),s=d(903520651);let n=r(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{s.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=a.SdkPingPongFrame.create();i.pingId=t,i.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const g=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-g/2),u=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${u}ms from ping-pong time=${g}ms`),this.forEachObserver(v=>{s.Maybe.of(v.didReceivePong).map(E=>E.bind(v)(i,u,g))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new p.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=n},5403024322:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(246495600)),p=d(840544383),m=f(d(6045987188)),a=f(d(2450851234));let s=r(class{realtimeSetLocalAttendeeId(e,t){this.state.localAttendeeId=e,this.state.localExternalUserId=t}realtimeSetAttendeeIdPresence(e,t,i,o,c){try{t&&(this.state.attendeeIdToExternalUserId[e]=i);for(const g of this.state.attendeeIdChangesCallbacks)g(e,t,i,o,c)}catch(g){this.onError(g)}}realtimeSubscribeToAttendeeIdPresence(e){try{this.state.attendeeIdChangesCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToAttendeeIdPresence(e){try{const t=this.state.attendeeIdChangesCallbacks.indexOf(e);t!==-1&&this.state.attendeeIdChangesCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSetCanUnmuteLocalAudio(e){try{if(this.state.canUnmute===e)return;this.state.canUnmute=e;for(const t of this.state.setCanUnmuteLocalAudioCallbacks)t(e)}catch(t){this.onError(t)}}realtimeSubscribeToSetCanUnmuteLocalAudio(e){try{this.state.setCanUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){try{const t=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!0)}catch(e){this.onError(e)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!1);return!0}catch(e){return this.onError(e),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){try{const t=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(e);t!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(e,t){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(e)||(this.state.volumeIndicatorCallbacks[e]=[]),this.state.volumeIndicatorCallbacks[e].push(t),this.sendVolumeIndicatorChange(e,!0,!0,!0,this.state.attendeeIdToExternalUserId[e])}catch(i){this.onError(i)}}realtimeUnsubscribeFromVolumeIndicator(e,t){if(this.state.volumeIndicatorCallbacks[e])if(t){const o=this.state.volumeIndicatorCallbacks[e].indexOf(t);o>=0&&this.state.volumeIndicatorCallbacks[e].splice(o,1)}else delete this.state.volumeIndicatorCallbacks[e]}realtimeUpdateVolumeIndicator(e,t,i,o,c){try{i=this.applyLocalMuteOverride(e,i);const g=this.getVolumeIndicatorState(e);let S=!1,u=!1,v=!1;i!==null&&g.muted!==i&&(g.muted=i,u=!0,g.muted&&g.volume!==0&&(g.volume=0,S=!0)),!g.muted&&t!==null&&(g.volume!==t&&(g.volume=t,S=!0),g.muted===null&&(g.muted=!1,u=!0)),o!==null&&g.signalStrength!==o&&(g.signalStrength=o,v=!0),this.sendVolumeIndicatorChange(e,S,u,v,c)}catch(g){this.onError(g)}}realtimeSubscribeToLocalSignalStrengthChange(e){try{if(this.state.localSignalStrengthChangeCallbacks.push(e),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(t){this.onError(t)}}realtimeUnsubscribeToLocalSignalStrengthChange(e){try{const t=this.state.localSignalStrengthChangeCallbacks.indexOf(e);t!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSubscribeToSendDataMessage(e){try{this.state.sendDataMessageCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeFromSendDataMessage(e){try{const t=this.state.sendDataMessageCallbacks.indexOf(e);t!==-1&&this.state.sendDataMessageCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSendDataMessage(e,t,i){try{for(const o of this.state.sendDataMessageCallbacks)o(e,t,i)}catch(o){this.onError(o)}}realtimeSubscribeToReceiveDataMessage(e,t){try{this.state.receiveDataMessageCallbacks.has(e)?this.state.receiveDataMessageCallbacks.get(e).push(t):this.state.receiveDataMessageCallbacks.set(e,[t])}catch(i){this.onError(i)}}realtimeUnsubscribeFromReceiveDataMessage(e){try{this.state.receiveDataMessageCallbacks.delete(e)}catch(t){this.onError(t)}}realtimeReceiveDataMessage(e){try{p.iterateEvery(this.state.receiveDataMessageCallbacks.get(e.topic),t=>{t(e)})}catch(t){Promise.reject(t)}}realtimeSubscribeToFatalError(e){try{this.state.fatalErrorCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToFatalError(e){try{const t=this.state.fatalErrorCallbacks.indexOf(e);t!==-1&&this.state.fatalErrorCallbacks.splice(t,1)}catch(t){this.onError(t)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(e){e?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(e,t){const i=this.state.localAttendeeId,o=this.state.muted;return e!==i||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?t:o}sendVolumeIndicatorChange(e,t,i,o,c){if(this.sendLocalSignalStrengthChange(e,o),!this.state.volumeIndicatorCallbacks.hasOwnProperty(e))return;const g=this.getVolumeIndicatorState(e),S=new a.default;if(t&&(S.volume=g.volume),i&&(S.muted=g.muted),o&&(S.signalStrength=g.signalStrength),!this.stateIsEmpty(S))for(const u of this.state.volumeIndicatorCallbacks[e])u(e,S.volume,S.muted,S.signalStrength,c)}sendLocalSignalStrengthChange(e,t){if(!t||e!==this.state.localAttendeeId)return;const o=this.getVolumeIndicatorState(e).signalStrength;if(o!==null)for(const c of this.state.localSignalStrengthChangeCallbacks)c(o)}getVolumeIndicatorState(e){return this.state.volumeIndicatorState.hasOwnProperty(e)||(this.state.volumeIndicatorState[e]=new a.default),this.state.volumeIndicatorState[e]}stateIsEmpty(e){return e.volume===null&&e.muted===null&&e.signalStrength===null}onError(e){try{for(const t of this.state.fatalErrorCallbacks)t(e)}catch(t){try{console.error(e),console.error(t)}catch{}}}constructor(e,t){this.mediaStreamBroker=e,this.state=new m.default,this._transcriptionController=t||new h.default(this)}},"DefaultRealtimeController");l.default=s},4412582314:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=d},6045987188:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=d},2450851234:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=d},8855787924:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6393942734));let p=r(class OS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,s){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=s,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new OS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,s){this.reconnectTimeoutMs=a,this.backoffPolicy=s,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=p},1510239283:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class Is{static initializeWorker(){Is.log("Initializing RedundantAudioEncoder");const h=new Is;self.RTCRtpScriptTransformer&&(self.onrtctransform=p=>{p.transformer.options.type==="SenderTransform"?h.setupSenderTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="ReceiverTransform"?h.setupReceiverTransform(p.transformer.readable,p.transformer.writable):p.transformer.options.type==="PassthroughTransform"&&h.setupPassthroughTransform(p.transformer.readable,p.transformer.writable)}),self.onmessage=p=>{p.data.msgType==="StartRedWorker"?(h.setupSenderTransform(p.data.send.readable,p.data.send.writable),h.setupReceiverTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="PassthroughTransform"?(h.setupPassthroughTransform(p.data.send.readable,p.data.send.writable),h.setupPassthroughTransform(p.data.receive.readable,p.data.receive.writable)):p.data.msgType==="RedPayloadType"?h.setRedPayloadType(p.data.payloadType):p.data.msgType==="OpusPayloadType"?h.setOpusPayloadType(p.data.payloadType):p.data.msgType==="UpdateNumRedundantEncodings"?h.setNumRedundantEncodings(p.data.numRedundantEncodings):p.data.msgType==="Enable"?h.setRedundancyEnabled(!0):p.data.msgType==="Disable"&&h.setRedundancyEnabled(!1)}}static log(h){Is.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${h}`})}static getNumRedundantEncodingsForPacketLoss(h){let p=0,m=!1;return h<=8?p=0:h<=18?p=1:h<=75?p=2:(p=0,m=!0),[p,m]}setupPassthroughTransform(h,p){Is.log("Setting up passthrough transform"),h.pipeTo(p)}setupSenderTransform(h,p){Is.log("Setting up sender RED transform");const m=new TransformStream({transform:this.senderTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setupReceiverTransform(h,p){Is.log("Setting up receiver RED transform");const m=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});h.pipeThrough(m).pipeTo(p)}setRedPayloadType(h){this.redPayloadType=h,Is.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(h){this.opusPayloadType=h,Is.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(h){this.numRedundantEncodings=h,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),Is.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(h){this.redundancyEnabled=h,Is.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(h,p){h.data.byteLength>this.maxAudioPayloadSizeBytes||p.enqueue(h)}senderTransform(h,p){if(h.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.getPrimaryPayload(h.timestamp,h.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const s=this.encode(h.timestamp,a);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}h.data=s,this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}getPrimaryPayload(h,p){const m=this.splitEncodings(h,p);return!m||m.length<1?null:m[m.length-1].payload}splitEncodings(h,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const s=new DataView(p);let n=s.byteLength,e=0,t=0,i=0,o=0,c=!1;const g=new Array,S=new Array,u=new Array;for(;n>0;)if(c=(s.getUint8(o)&128)===0,c){if((s.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=s.byteLength))return null;i=s.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const I=((s.getUint8(o+2)&3)<<8)+s.getUint8(o+3);S.push(I);const A=s.getUint16(o+1)>>2,w=h-A;u.push(w),e+=I+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!c)return a!==void 0?(g.push({payload:p,isRedundant:!1,seq:a}),g):null;let v=t;for(let I=0;I<u.length;I++){const A=new ArrayBuffer(S[I]);new Uint8Array(A).set(new Uint8Array(s.buffer,v,S[I]),0);const O={timestamp:u[I],payload:A,isRedundant:!0};m&&(O.hasFec=this.opusPacketHasFec(new DataView(A),A.byteLength)),g.push(O),v+=S[I]}const E=s.byteLength-i,b=new ArrayBuffer(i);new Uint8Array(b).set(new Uint8Array(s.buffer,E,i),0);const C={timestamp:h,payload:b,isRedundant:!1,seq:a};return m&&(C.hasFec=this.opusPacketHasFec(new DataView(b),b.byteLength)),g.push(C),g}encode(h,p){const m=p.byteLength;if(m===0||m>=this.maxRedPacketSizeBytes||m>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let s=this.redLastHeaderSizeBytes,n=m,e=this.maxAudioPayloadSizeBytes-m-s;const t=new Array,i=new Array;if(this.redundancyEnabled){let u=this.uint32WrapAround(h-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<a&&!(this.uint32WrapAround(h-u)>=this.maxRedTimestampOffset);v++){let E=u,b=this.encodingHistory.find(_=>_.timestamp===E);if(b||(E=this.uint32WrapAround(u-this.redPacketizationTime),b=this.encodingHistory.find(_=>_.timestamp===E)),b){const _=b.payload.byteLength;if(e<this.redHeaderSizeBytes+_)break;e-=this.redHeaderSizeBytes+_,s+=this.redHeaderSizeBytes,n+=_,t.unshift(b.timestamp),i.unshift(b.payload)}u-=this.redPacketizationTime*this.redPacketDistance,u=this.uint32WrapAround(u)}}const o=new ArrayBuffer(s+n),c=new DataView(o);let g=0;for(let u=0;u<t.length;u++){const v=h-t[u];c.setUint8(g,this.opusPayloadType|128),c.setUint16(g+1,v<<2|i[u].byteLength>>8),c.setUint8(g+3,i[u].byteLength&255),g+=this.redHeaderSizeBytes}c.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let u=0;u<i.length;u++)S.set(new Uint8Array(i[u]),g),g+=i[u].byteLength;return S.set(new Uint8Array(p),g),g+=p.byteLength,g!==s+n?null:(this.updateEncodingHistory(h,p),o)}updateEncodingHistory(h,p){for(const a of this.encodingHistory){const s=this.redPacketizationTime*this.redMaxRecoveryDistance;if(h-a.timestamp>=s)this.encodingHistory.shift();else break}const m=new DataView(p);(this.opusPacketIsCeltOnly(m)||this.opusPacketHasVoiceActivity(m,m.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:h,payload:p}))}initializePacketLogs(){const h=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(h),index:0,windowSize:h},this.redRecoveryLog={window:new Array(h),index:0,windowSize:h},this.fecRecoveryLog={window:new Array(h),index:0,windowSize:h},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(h,p){const m=h.getMetadata();if(m.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}const a=this.splitEncodings(h.timestamp,h.data,!0,m.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(h,p);return}for(let s=a.length-1;s>=0;s--)this.updateLossStats(a[s])&&(this.updateRedStats(a[s]),this.updateFecStats(a[s]));this.maybeReportLossStats(m.synchronizationSource,a[a.length-1].timestamp),this.enqueueAudioFrameIfPayloadSizeIsValid(h,p)}updateLossStats(h){if(h.isRedundant)return!0;const p=h.timestamp,m=h.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=m,this.addTimestamp(this.primaryPacketLog,p),!0;const a=this.int16(m-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,p)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,p),this.removeFromRecoveryWindows(p)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=h.seq,this.addTimestamp(this.primaryPacketLog,p)),!0)}updateRedStats(h){if(!h.isRedundant||this.totalAudioPacketsLost===0)return;const p=h.timestamp;this.hasTimestamp(this.primaryPacketLog,p)||(this.hasTimestamp(this.redRecoveryLog,p)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,p)),this.removeTimestamp(this.fecRecoveryLog,p)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(h){if(!h.hasFec||this.totalAudioPacketsLost===0)return;const p=h.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,p)||this.hasTimestamp(this.redRecoveryLog,p)||this.hasTimestamp(this.fecRecoveryLog,p)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,p))}maybeReportLossStats(h,p){p===void 0||p-this.lastLossReportTimestamp<this.lossReportInterval||(Is.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:h,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=p)}addTimestamp(h,p){p!==void 0&&(h.window[h.index]=p,h.index=(h.index+1)%h.windowSize)}hasTimestamp(h,p){return!!h.window.find(a=>a===p)}removeTimestamp(h,p){const m=h.window.indexOf(p);return m>=0?(h.window[m]=void 0,!0):!1}removeFromRecoveryWindows(h){let p=this.removeTimestamp(this.redRecoveryLog,h);p&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,p=this.removeTimestamp(this.fecRecoveryLog,h),p&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(h){let m=h;return h>=4294967296?m=h-4294967296:h<0&&(m=4294967296+h),m}int16(h){return h<<16>>16}opusPacketIsCeltOnly(h){return!!(h.getUint8(0)&128)}opusPacketGetSamplesPerFrame(h,p){p=Math.round(p),p=Math.min(Math.max(p,-Math.pow(2,32)),Math.pow(2,32)-1);let m,a;return this.opusPacketIsCeltOnly(h)?(a=h.getUint8(0)>>3&3,m=(p<<a)/400):(h.getUint8(0)&96)===96?m=h.getUint8(0)&8?p/50:p/100:(a=h.getUint8(0)>>3&3,a===3?m=p*60/1e3:m=(p<<a)/100),m}opusNumSilkFrames(h){let p=this.opusPacketGetSamplesPerFrame(h,48e3)/48;switch(p<10&&(p=10),p){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(h){return h.getUint8(0)&4?2:1}opusParseSize(h,p,m,a){return m<1?(a[0]=-1,-1):h.getUint8(p)<252?(a[0]=h.getUint8(p),1):m<2?(a[0]=-1,-1):(a[0]=4*h.getUint8(p+1)+h.getUint8(p),2)}opusPacketParseImpl(h,p,m,a,s,n,e,t){if(!n||p<0)return this.OPUS_BAD_ARG;if(p===0)return this.OPUS_INVALID_PACKET;let i,o,c=0,g=!1;const S=h.getUint8(0);a&&(a[0]=S);let u=p-1,v=1,E=u;switch(S&3){case 0:i=1;break;case 1:if(i=2,g=!0,!m){if(u&1)return this.OPUS_INVALID_PACKET;E=u/2,n[0][0]=E}break;case 2:if(i=2,o=this.opusParseSize(h,v,u,n[0]),u-=o,n[0][0]<0||n[0][0]>u)return this.OPUS_INVALID_PACKET;v+=o,E=u-n[0][0];break;default:if(u<1)return this.OPUS_INVALID_PACKET;const b=h.getUint8(v++);if(--u,i=b&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(h,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(b&64){let C,I;do{if(u<=0)return this.OPUS_INVALID_PACKET;C=h.getUint8(v++),--u,I=C===255?254:C,u-=I,c+=I}while(C===255)}if(u<0)return this.OPUS_INVALID_PACKET;if(g=!(b&128),g){if(!m){if(E=Math.trunc(u/i),E*i!==u)return this.OPUS_INVALID_PACKET;for(let C=0;C<i-1;++C)n[C][0]=E}}else{E=u;for(let C=0;C<i-1;++C){if(o=this.opusParseSize(h,v,u,n[C]),u-=o,n[C][0]<0||n[C][0]>u)return this.OPUS_INVALID_PACKET;v+=o,E-=o+n[C][0]}if(E<0)return this.OPUS_INVALID_PACKET}}if(m){if(o=this.opusParseSize(h,v,u,n[i-1]),u-=o,n[i-1][0]<0||n[i-1][0]>u)return this.OPUS_INVALID_PACKET;if(v+=o,g){if(n[i-1][0]*i>u)return this.OPUS_INVALID_PACKET;for(let b=0;b<i-1;++b)n[b][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=E))return this.OPUS_INVALID_PACKET}else{if(E>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=E}e&&(e[0]=v);for(let b=0;b<i;++b)s&&(s[b][0]=v),v+=n[b][0];return t&&(t[0]=v+c),i}opusPacketParse(h,p,m,a,s,n){return this.opusPacketParseImpl(h,p,!1,m,a,s,n,null)}opusPacketHasVoiceActivity(h,p){if(!h||p<=0)return 0;if(this.opusPacketIsCeltOnly(h))return-1;const m=this.opusNumSilkFrames(h);if(m===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],s[e]=[void 0];const n=this.opusPacketParse(h,p,null,a,s,null);if(n<0)return-1;for(let e=0;e<n;++e){if(s[e][0]<1)continue;if(h.getUint8(a[e][0])>>8-m||this.opusPacketGetNumChannels(h)===2&&h.getUint8(a[e][0])<<m+1>>8-m)return 1}return 0}opusPacketHasFec(h,p){if(!h||p<=0||this.opusPacketIsCeltOnly(h))return!1;const m=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)m[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(h,p,null,m,a,null)<0||a[0][0]<=1)return!1;const n=this.opusNumSilkFrames(h);if(n===0)return!1;const e=this.opusPacketGetNumChannels(h);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(h.getUint8(m[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=d,d.shouldLog=!1,d.shouldReportStats=!1},3440292739:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const d=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. The packet we received
        // does not have a good RED payload.
        if (!gotLastBlock) {
            // Note that sequence numbers only exist for
            // incoming audio frames.
            if (primarySequenceNumber !== undefined) {
                // This could be a possible padding packet used
                // for BWE with a good sequence number.
                // Create a dummy encoding to make sure loss values
                // are calculated correctly by consuming sequence number.
                // Note that for the receive side, we process packets only
                // for loss/recovery calculations and forward the original
                // packet without changing it even in the error case.
                encodings.push({
                    payload: frame,
                    isRedundant: false,
                    seq: primarySequenceNumber,
                });
                return encodings;
            }
            // This is a bad packet.
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(frameMetadata.synchronizationSource, encodings[encodings.length - 1].timestamp);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(ssrc, timestamp) {
        if (timestamp === undefined ||
            timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        if (timestamp === undefined) {
            return;
        }
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=d},3741513515:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6393942734));let p=r(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=p},9013967876:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setInterval(h,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(h){this.intervalMs=h}},"IntervalScheduler");l.default=d},6393942734:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{start(h){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),h()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(h){this.timeoutMs=h,this.timer=null}},"TimeoutScheduler");l.default=d},3430379175:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(9615283928)),p=f(d(3364495052)),m=f(d(4883941895));let a=r(class Ln{clone(){return new Ln(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new Ln(n.join(Ln.CRLF))}static candidateTypeFromString(n){switch(n){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:Ln.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+Ln.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return Ln.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(Ln.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return Ln.linesToSDP(this.lines().filter(e=>Ln.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,Ln.rfc7587LowestBitrate),Ln.rfc7587HighestBitrate));const e=this.lines(),t=Ln.findOpusFmtpAttributes(e),i=Ln.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return Ln.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=Ln.findOpusFmtpAttributes(n),t=Ln.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return Ln.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const c=e.exec(o);c!==null&&(i[i.length-1]=`a=fmtp:${c[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,c=null;for(const g of n)if(g.startsWith("m=audio")&&(c=e[o],o++),g.startsWith("m=video")&&(c=null),c&&g.startsWith(c)){const S=g.slice(c.length).split(";"),u=[];for(const v of S)t.findIndex(b=>b.startsWith(v.split("=")[0]))<0&&u.push(v);for(const v of t)u.push(v);i.push(c+u.join(";"))}else i.push(g);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new Ln(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const c=+i.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Ln.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Ln.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=Ln.splitLines(this.sdp).filter(e=>!e.includes(Ln.dependencyDescriptorRtpHeaderExtensionUrl));return new Ln(n.join(Ln.CRLF)+Ln.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(Ln.splitLines(this.sdp)):t,o=Ln.splitSections(this.sdp),c=[];for(let S of o){if(/^m=video/.test(S)&&Ln.getRtpHeaderExtensionIdInSection(S,e)===-1){const u=Ln.splitLines(S),v=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){c.push(S);continue}for(const E of u)if(v.push(E),/^a=sendrecv/.test(E.trim())){const b="a=extmap:"+i+" "+e;v.push(b)}S=v.join(Ln.CRLF)+Ln.CRLF}else if(t!==-1&&/^m=video/.test(S)&&Ln.getRtpHeaderExtensionIdInSection(S,e)!==t){const u=Ln.splitLines(S),v=[];for(const E of u){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const _="a=extmap:"+t+" "+e;v.push(_)}continue}v.push(E)}S=v.join(Ln.CRLF)+Ln.CRLF}c.push(S)}const g=c.join("");return new Ln(g)}ssrcForVideoSendingSection(){const n=this.sdp,e=Ln.splitSections(n);if(e.length<2)return"";const t=Ln.findActiveCameraSection(e);if(t===-1)return"";const i=Ln.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=Ln.extractSSRCsFromFIDGroupLine(i[0]),[c]=o.split(" ").map(g=>parseInt(g,10));return c.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=Ln.splitSections(n),t=Ln.findActiveCameraSection(e);if(t===-1)return new Ln(this.sdp);const i=e[t],o=Ln.splitLines(i),c=[],g=new Map;o.forEach(E=>{if(/^a=rtpmap:/.test(E)){const b=/^a=rtpmap:([0-9]+)\s/.exec(E);b&&E.toLowerCase().includes("h264")&&c.push(parseInt(b[1],10))}if(/^a=fmtp:/.test(E)){const b=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(b&&b.length===3){const _=parseInt(b[1],10),C=parseInt(b[2],10);g.has(C)?g.get(C).push(_):g.set(C,[_])}}});const S=new Set;for(const E of c){S.add(E);const b=g.get(E);if(b)for(const _ of b)S.add(_)}if(c.length>0){const E=o[0].split(" ");o[0]=E.filter(b=>!S.has(parseInt(b))).join(" ")}const u=o.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const b of S)if(E.includes(b.toString()))return!1;return!0});e[t]=u.join(Ln.CRLF)+Ln.CRLF;const v=e.join("");return new Ln(v)}mediaSections(){const n=Ln.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new p.default,o=Ln.splitLines(n[t]);for(const c of o){const g=Ln.mediaType(c);if(g!==void 0){i.mediaType=g;continue}const S=Ln.direction(c);if(S!==void 0){i.direction=S;continue}const u=Ln.mid(c);if(u!==void 0){i.mid=u;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=Ln.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),c=+o[0];if(o[1]===e)return c}return-1}getRtpHeaderExtensionId(n){const e=Ln.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=Ln.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=Ln.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=Ln.splitSections(e),i=Ln.findActiveCameraSection(t);if(i===-1)return new Ln(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new Ln(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=Ln.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const u=/^a=rtpmap:(\d+)\s/.exec(S);if(!u)return;const v=u[1];for(const E of e){if(!S.includes(`${E.codecName}/${E.codecCapability.clockRate}`))continue;let b=!1;if(E.codecCapability.sdpFmtpLine!==void 0){let _=!1;for(const C of i){if(E.fmtpLineMatches(C,parseInt(v))){b=!0;break}_||(_=C.startsWith(`a=fmtp:${v} profile-id=`))}E.equals(m.default.vp9Profile0())&&!_&&(b=!0)}else b=!0;if(b){t.set(v,E);break}}});const o=new Set(t.keys()),c=i[0].split(" ").filter(S=>!o.has(S)),g=Array.from(t.entries()).sort((S,u)=>{let[v,E]=S,[b,_]=u;const C=e.indexOf(E),I=e.indexOf(_);return C-I}).map(S=>{let[u,v]=S;return u});return c.splice(3,0,...g),i[0]=c.join(" "),i.join(Ln.CRLF)+Ln.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=Ln.splitSections(n),t=Ln.findActiveCameraSection(e);if(t===-1)return[];const i=Ln.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const c of n){const g=/^a=rtpmap:([0-9]+)\s/.exec(c);if(g&&g[1]===e){const u=c.split(" ")[1].split("/");u.length>=2&&(t=u[0],i=u[1])}c.startsWith(`a=fmtp:${e} `)&&(o=c.split(" ")[1])}if(t!==void 0)return new m.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=Ln.splitSections(e);return n.set("opus",Ln.findAudioPayloadType("opus",t)),n.set("red",Ln.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const c=i.exec(o);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(n){const e=Ln.splitSections(this.sdp),t=Ln.findActiveCameraSection(e);if(t===-1)return this;const i=Ln.splitLines(e[t]),o=[];for(const g of i)if(/^a=fmtp:\d*/.test(g)){const S=g+`;x-google-start-bitrate=${n}`;o.push(S)}else o.push(g);e[t]=o.join(Ln.CRLF)+Ln.CRLF;const c=e.join("");return new Ln(c)}constructor(n){this.sdp=n}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9615283928:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var d;(function(f){f.Host="host",f.ServerReflexive="srflx",f.PeerReflexive="prflx",f.Relay="relay"})(d=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=d},3364495052:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"SDPMediaSection");l.default=d},4883941895:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(5391134031);let h=r(class _o{equals(m){if(m===void 0||this.codecName!==m.codecName||this.codecCapability.mimeType!==m.codecCapability.mimeType||this.codecCapability.clockRate!==m.codecCapability.clockRate)return!1;const a=this.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(this.codecCapability.sdpFmtpLine,this.codecName):"",s=m.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(m.codecCapability.sdpFmtpLine,m.codecName):"";return a===s}fmtpLineMatches(m,a){const s=this.codecCapability.sdpFmtpLine;if(!s)return!1;const n=`a=fmtp:${a} `;if(!m.startsWith(n))return!1;const e=m.substring(n.length);return this.cleanupFmtpLine(e,this.codecName)===this.cleanupFmtpLine(s,this.codecName)}cleanupFmtpLine(m,a){const s=/;x-google-start-bitrate=\d+/g;let n=m.replace(s,"");if(a==="H264"){const e=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i;n=n.replace(e,"profile-level-id=$1")}return n}static vp8(){return new _o("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new _o("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new _o("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new _o("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new _o("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new _o("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return _o.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new _o("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return _o.vp9Profile0()}static av1Main(){return new _o("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return _o.av1Main()}static fromSignaled(m){switch(m){case f.SdkVideoCodecCapability.VP8:return _o.vp8();case f.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return _o.h264BaselineProfile();case f.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return _o.h264ConstrainedBaselineProfile();case f.SdkVideoCodecCapability.H264_MAIN_PROFILE:return _o.h264MainProfile();case f.SdkVideoCodecCapability.H264_HIGH_PROFILE:return _o.h264HighProfile();case f.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return _o.h264ConstrainedHighProfile();case f.SdkVideoCodecCapability.VP9_PROFILE_0:return _o.vp9Profile0();case f.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return _o.av1Main();default:return}}constructor(m,a){this.codecName=m,this.codecCapability=a}},"VideoCodecCapability");l.default=h},9675039205:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(2179555054);let h=r(class Cu{compress(m,a){if(a.length>0){const e=Math.min(a.length,Cu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={memLevel:Cu.Z_MEM_LEVEL,dictionary:a};return f.deflateRaw(m,s)}decompress(m,a){if(a.length>0){const e=Math.min(a.length,Cu.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={to:"string",dictionary:a,chunkSize:4096};let n="";try{n=f.inflateRaw(m,s)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(m){this.logger=m}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},4641929542:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(3097552577),h=d(3049140029),p=d(953236500),m=d(7338273141);let a=r(class{perform(n,e){const t=this.currentState;if(t===p.SessionStateControllerState.NotConnected&&n===f.SessionStateControllerAction.Connect)this.transition(p.SessionStateControllerState.Connecting,n);else if(t===p.SessionStateControllerState.Connecting&&n===f.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Connecting&&n===f.SessionStateControllerAction.FinishConnecting)this.transition(p.SessionStateControllerState.Connected,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Disconnect)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Reconnect)this.transition(p.SessionStateControllerState.Connecting,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Connected&&n===f.SessionStateControllerAction.Update)this.transition(p.SessionStateControllerState.Updating,n);else if(t===p.SessionStateControllerState.Updating&&n===f.SessionStateControllerAction.Fail)this.transition(p.SessionStateControllerState.Disconnecting,n);else if(t===p.SessionStateControllerState.Updating&&n===f.SessionStateControllerAction.FinishUpdating)this.transition(p.SessionStateControllerState.Connected,n);else if(t===p.SessionStateControllerState.Disconnecting&&n===f.SessionStateControllerAction.FinishDisconnecting)this.transition(p.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${p.SessionStateControllerState[this.currentState]} with ${f.SessionStateControllerAction[n]}`),this.deferAction(n,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${p.SessionStateControllerState[this.currentState]} with ${f.SessionStateControllerAction[n]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${p.SessionStateControllerState[this.currentState]} with action ${f.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${p.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${p.SessionStateControllerState[this.currentState]} to ${p.SessionStateControllerState[n]} with ${f.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case f.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case f.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case f.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case f.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===p.SessionStateControllerState.Connecting||this.currentState===p.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${f.SessionStateControllerAction[n]}`),this.perform(n,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${f.SessionStateControllerAction[n]} in state ${p.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=p.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},3097552577:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var d;(function(f){f[f.Connect=0]="Connect",f[f.FinishConnecting=1]="FinishConnecting",f[f.Update=2]="Update",f[f.FinishUpdating=3]="FinishUpdating",f[f.Reconnect=4]="Reconnect",f[f.Disconnect=5]="Disconnect",f[f.Fail=6]="Fail",f[f.FinishDisconnecting=7]="FinishDisconnecting"})(d=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=d},3049140029:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var d;(function(f){f[f.DoNotDefer=0]="DoNotDefer",f[f.Low=1]="Low",f[f.Medium=2]="Medium",f[f.High=3]="High",f[f.VeryHigh=4]="VeryHigh"})(d=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=d},953236500:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var d;(function(f){f[f.NotConnected=0]="NotConnected",f[f.Connecting=1]="Connecting",f[f.Connected=2]="Connected",f[f.Updating=3]="Updating",f[f.Disconnecting=4]="Disconnecting"})(d=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=d},7338273141:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var d;(function(f){f[f.Transitioned=0]="Transitioned",f[f.NoTransitionAvailable=1]="NoTransitionAvailable",f[f.DeferredTransition=2]="DeferredTransition",f[f.TransitionFailed=3]="TransitionFailed"})(d=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=d},7258714924:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8351168186)),p=f(d(6393942734)),m=d(5391134031),a=d(840544383),s=f(d(8066052849)),n=f(d(5116495551)),e=f(d(2686893898)),t=d(1448262436),i=f(d(8152250765)),o=f(d(426218501));let c=r(class hc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const u=m.SdkSignalFrame.create();return u.type=m.SdkSignalFrame.Type.PING_PONG,u.pingPong=S,this.sendMessage(u),u.timestampMs}join(S){this.logger.info("sending join");const u=m.SdkJoinFrame.create();u.protocolVersion=2,u.flags=m.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new h.default,E={platformName:v.name(),platformVersion:v.version(),clientSource:s.default.sdkName,chimeSdkVersion:s.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:_,appVersion:C}=S.applicationMetadata;E.appName=_,E.appVersion=C}u.clientDetails=m.SdkClientDetails.create(E),u.audioSessionId=this.audioSessionId,u.wantsCompressedSdp=hc.CLIENT_SUPPORTS_COMPRESSION,u.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,u.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),u.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),u.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const b=m.SdkSignalFrame.create();b.type=m.SdkSignalFrame.Type.JOIN,b.join=u,this.sendMessage(b)}subscribe(S){const u=m.SdkSubscribeFrame.create();if(u.sendStreams=[],u.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(u.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(u.audioCheckin=S.audioCheckin,u.audioHost=S.audioHost,u.audioMuted=S.audioMuted,!S.audioCheckin)){const E=m.SdkStreamDescriptor.create();E.mediaType=m.SdkStreamMediaType.AUDIO,E.trackLabel="AmazonChimeExpressAudio",E.attendeeId=S.attendeeId,E.streamId=1,E.groupId=1,E.framerate=15,E.maxBitrateKbps=600,E.avgBitrateBps=4e5,u.sendStreams.push(E)}if(u.compressedSdpOffer=S.compressedSdpOffer,u.duplex=m.SdkStreamServiceType.RX,S.localVideoEnabled){u.duplex=m.SdkStreamServiceType.DUPLEX;for(let E=0;E<S.videoStreamDescriptions.length;E++){const b=S.videoStreamDescriptions[E].clone();b.attendeeId=S.attendeeId,u.sendStreams.push(b.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(u.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=m.SdkSignalFrame.create();v.type=m.SdkSignalFrame.Type.SUBSCRIBE,v.sub=u,this.sendMessage(v)}remoteVideoUpdate(S,u){const v=m.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=u;const E=m.SdkSignalFrame.create();E.type=m.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,E.remoteVideoUpdate=v,this.sendMessage(E)}convertSignalingClientVideoSubscriptionConfiguration(S){const u=new m.SdkVideoSubscriptionConfiguration;switch(u.mid=S.mid,u.attendeeId=S.attendeeId,u.streamId=S.streamId,u.groupId=S.groupId,u.priority=S.priority,u.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:u.qualityAdaptationPreference=m.SdkVideoQualityAdaptationPreference.BALANCED}return u}leave(){const S=m.SdkSignalFrame.create();S.type=m.SdkSignalFrame.Type.LEAVE,S.leave=m.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.CLIENT_METRIC,u.clientMetric=S,this.sendMessage(u)}sendDataMessage(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.DATA_MESSAGE,u.dataMessage=S,this.sendMessage(u)}closeConnection(){var S,u;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const v=new p.default(hc.CLOSE_EVENT_TIMEOUT_MS),E=r(b=>{var _,C;(C=(_=this.webSocket).removeEventListener)===null||C===void 0||C.call(_,"close",E),v.stop(),this.closeEventHandler(b)},"handler");(u=(S=this.webSocket).removeEventListener)===null||u===void 0||u.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",E),v.start(()=>{E(new CloseEvent("close",{wasClean:!1,code:1005,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.AUDIO_CONTROL;const v=m.SdkAudioControlFrame.create();v.muted=S,u.audioControl=v,this.sendMessage(u)}pause(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.PAUSE,u.pause=m.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resume(S){const u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.RESUME,u.pause=m.SdkPauseResumeFrame.create(),u.pause.streamIds=S,this.sendMessage(u)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const u=this.prependWithFrameTypeRTC(m.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(u)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let u;try{u=m.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(u)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,u)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(u)}`)}stripFrameTypeRTC(S){const u=S[0];return u!==hc.FRAME_TYPE_RTC&&u!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${u}`),S.slice(1)}prependWithFrameTypeRTC(S){const u=new Uint8Array(S.length+1);return u[0]=hc.FRAME_TYPE_RTC,u.set(S,1),u}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;case o.default.WebSocketClosed:this.logger.info(`notifying event: ${o.default[S.type]}, 
              code: ${S.closeCode} reason: ${S.closeReason}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const u of this.observerQueue)u.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("Signaling WebSocket ignoring error closing while connecting");return}this.wasOpened?(this.logger.error("Signaling WebSocket received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("Signaling WebSocket received error while connecting"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=d.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=d.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const u=m.SdkMeetingSessionCredentials.create();u.attendeeId=S.attendeeId,u.externalUserId=S.externalUserId,u.joinToken=S.joinToken;const v=m.SdkPrimaryMeetingJoinFrame.create();v.credentials=u;const E=m.SdkSignalFrame.create();E.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,E.primaryMeetingJoin=v,this.sendMessage(E)}demoteFromPrimaryMeeting(){const S=m.SdkPrimaryMeetingLeaveFrame.create(),u=m.SdkSignalFrame.create();u.type=m.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,u.primaryMeetingLeave=S,this.sendMessage(u)}constructor(S,u){this.webSocket=S,this.logger=u,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=c,c.FRAME_TYPE_RTC=5,c.CLOSE_EVENT_TIMEOUT_MS=2e3,c.CLIENT_SUPPORTS_COMPRESSION=!0},1448262436:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const f=d(5391134031);var h;(function(s){s[s.Default=0]="Default",s[s.None=1]="None",s[s.BandwidthProbing=2]="BandwidthProbing",s[s.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function p(s){return s===h.None||s===h.Default}r(p,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=p;function m(s){switch(s){case f.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case f.SdkServerSideNetworkAdaption.NONE:return h.None;case f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}r(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=m;function a(s){switch(s){case h.Default:return f.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return f.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return f.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}r(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},893025464:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(h,p){this.signalingURL=h,this.joinToken=p}},"SignalingClientConnectionRequest");l.default=d},8152250765:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(426218501));let p=r(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,s,n,e,t){this.client=a,this.type=s,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=p},426218501:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var d;(function(f){f[f.WebSocketConnecting=0]="WebSocketConnecting",f[f.WebSocketOpen=1]="WebSocketOpen",f[f.WebSocketError=2]="WebSocketError",f[f.WebSocketClosing=3]="WebSocketClosing",f[f.WebSocketClosed=4]="WebSocketClosed",f[f.WebSocketFailed=5]="WebSocketFailed",f[f.WebSocketMessage=6]="WebSocketMessage",f[f.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",f[f.WebSocketSentMessage=8]="WebSocketSentMessage",f[f.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",f[f.ReceivedSignalFrame=10]="ReceivedSignalFrame",f[f.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(d=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=d},9315300759:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1448262436));let p=r(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=p},1026405281:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{constructor(h,p,m,a,s,n,e,t,i,o){this.attendeeId=h,this.sdpOffer=p,this.audioHost=m,this.audioMuted=a,this.audioCheckin=s,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=d},4983545831:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{equals(h){return h!==void 0&&this.mid===h.mid&&this.attendeeId===h.attendeeId&&this.streamId===h.streamId&&this.groupId===h.groupId&&this.priority===h.priority&&this.targetBitrateKbps===h.targetBitrateKbps&&this.qualityAdaptationPreference===h.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=d},5391134031:(B,l,d)=>{"use strict";var f=d(7232944804),h=f.Reader,p=f.Writer,m=f.util,a=f.roots.default||(f.roots.default={});a.SdkSignalFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkSignalFrame"),s.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.type=1,s.prototype.error=null,s.prototype.join=null,s.prototype.joinack=null,s.prototype.sub=null,s.prototype.suback=null,s.prototype.index=null,s.prototype.pause=null,s.prototype.leave=null,s.prototype.leaveAck=null,s.prototype.bitrates=null,s.prototype.audioControl=null,s.prototype.audioMetadata=null,s.prototype.audioStreamIdInfo=null,s.prototype.pingPong=null,s.prototype.audioStatus=null,s.prototype.clientMetric=null,s.prototype.dataMessage=null,s.prototype.remoteVideoUpdate=null,s.prototype.primaryMeetingJoin=null,s.prototype.primaryMeetingJoinAck=null,s.prototype.primaryMeetingLeave=null,s.prototype.notification=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(m.Long){var o=new m.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=a.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),s}(),a.SdkErrorFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkErrorFrame"),s.prototype.status=0,s.prototype.description="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),s}(),a.SdkJoinFlags=function(){var s={},n=Object.create(s);return n[s[2]="HAS_STREAM_UPDATE"]=2,n[s[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[s[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),a.SdkClientDetails=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkClientDetails"),s.prototype.appName="",s.prototype.appVersion="",s.prototype.deviceModel="",s.prototype.deviceMake="",s.prototype.platformName="",s.prototype.platformVersion="",s.prototype.clientSource="",s.prototype.chimeSdkVersion="",s.prototype.clientUtcOffset="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),s}(),a.SdkServerSideNetworkAdaption=function(){var s={},n=Object.create(s);return n[s[1]="DEFAULT"]=1,n[s[2]="NONE"]=2,n[s[3]="BANDWIDTH_PROBING"]=3,n[s[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),a.SdkJoinFrame=function(){function s(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkJoinFrame"),s.prototype.protocolVersion=2,s.prototype.maxNumOfVideos=0,s.prototype.flags=0,s.prototype.clientDetails=null,s.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.wantsCompressedSdp=!1,s.prototype.serverSideNetworkAdaption=1,s.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,s.prototype.wantsAllTemporalLayersInIndex=!1,s.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,m.Long){var o=new m.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)i.supportedServerSideNetworkAdaptions[c]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]===void 0?e.supportedServerSideNetworkAdaptions[c]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),s}(),a.SdkJoinAckFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkJoinAckFrame"),s.prototype.turnCredentials=null,s.prototype.videoSubscriptionLimit=0,s.prototype.wantsCompressedSdp=!1,s.prototype.defaultServerSideNetworkAdaption=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),s}(),a.SdkLeaveFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),s}(),a.SdkLeaveAckFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkLeaveAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),s}(),a.SdkStreamServiceType=function(){var s={},n=Object.create(s);return n[s[1]="RX"]=1,n[s[2]="TX"]=2,n[s[3]="DUPLEX"]=3,n}(),a.SdkStreamMediaType=function(){var s={},n=Object.create(s);return n[s[1]="AUDIO"]=1,n[s[2]="VIDEO"]=2,n}(),a.SdkSubscribeFrame=function(){function s(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkSubscribeFrame"),s.prototype.duplex=1,s.prototype.sendStreams=m.emptyArray,s.prototype.receiveStreamIds=m.emptyArray,s.prototype.sdpOffer="",s.prototype.audioHost="",s.prototype.audioCheckin=!1,s.prototype.audioMuted=!1,s.prototype.compressedSdpOffer=m.newBuffer([]),s.prototype.videoSubscriptionConfiguration=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)a.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=a.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=m.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),s}(),a.SdkSubscribeAckFrame=function(){function s(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkSubscribeAckFrame"),s.prototype.duplex=1,s.prototype.allocations=m.emptyArray,s.prototype.sdpAnswer="",s.prototype.tracks=m.emptyArray,s.prototype.compressedSdpAnswer=m.newBuffer([]),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)a.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)a.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=a.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=a.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=a.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=a.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=m.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),s}(),a.SdkIndexFrame=function(){function s(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkIndexFrame"),s.prototype.atCapacity=!1,s.prototype.sources=m.emptyArray,s.prototype.pausedAtSourceIds=m.emptyArray,s.prototype.numParticipants=0,s.prototype.supportedReceiveCodecIntersection=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)a.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=a.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=a.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),s}(),a.SdkPauseResumeFrame=function(){function s(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPauseResumeFrame"),s.prototype.streamIds=m.emptyArray,s.prototype.groupIds=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(c&7)===2)for(var g=e.uint32()+e.pos;e.pos<g;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),s}(),a.SdkBitrateFrame=function(){function s(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkBitrateFrame"),s.prototype.bitrates=m.emptyArray,s.prototype.serverAvailableOutgoingBitrate=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)a.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=a.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=a.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),s}(),a.SdkStreamDescriptor=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamDescriptor"),s.prototype.streamId=0,s.prototype.framerate=0,s.prototype.maxBitrateKbps=0,s.prototype.trackLabel="",s.prototype.groupId=0,s.prototype.avgBitrateBps=0,s.prototype.attendeeId="",s.prototype.mediaType=1,s.prototype.externalUserId="",s.prototype.width=0,s.prototype.height=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),s}(),a.SdkStreamAllocation=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamAllocation"),s.prototype.trackLabel="",s.prototype.streamId=0,s.prototype.groupId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),s}(),a.SdkTrackMapping=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTrackMapping"),s.prototype.streamId=0,s.prototype.ssrc=0,s.prototype.trackLabel="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),s}(),a.SdkBitrate=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkBitrate"),s.prototype.sourceStreamId=0,s.prototype.avgBitrateBps=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),s}(),a.SdkAudioControlFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioControlFrame"),s.prototype.muted=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),s}(),a.SdkAudioMetadataFrame=function(){function s(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioMetadataFrame"),s.prototype.attendeeStates=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)a.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),s}(),a.SdkAudioAttendeeState=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioAttendeeState"),s.prototype.audioStreamId=0,s.prototype.volume=0,s.prototype.muted=!1,s.prototype.signalStrength=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfoFrame=function(){function s(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioStreamIdInfoFrame"),s.prototype.streams=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)a.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=a.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),s}(),a.SdkAudioStreamIdInfo=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioStreamIdInfo"),s.prototype.audioStreamId=0,s.prototype.attendeeId="",s.prototype.muted=!1,s.prototype.externalUserId="",s.prototype.dropped=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),s}(),a.SdkPingPongType=function(){var s={},n=Object.create(s);return n[s[1]="PING"]=1,n[s[2]="PONG"]=2,n}(),a.SdkPingPongFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPingPongFrame"),s.prototype.type=1,s.prototype.pingId=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),s}(),a.SdkAudioStatusFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkAudioStatusFrame"),s.prototype.audioStatus=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),s}(),a.SdkMetric=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkMetric"),s.prototype.type=1,s.prototype.value=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 60:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_INPUT_HEIGHT":case 60:t.type=60;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break;case"VIDEO_RENDER_HEIGHT":case 105:t.type=105;break;case"VIDEO_RENDER_WIDTH":case 106:t.type=106;break;case"VIDEO_INPUT_WIDTH":case 107:t.type=107;break;case"VIDEO_SENT_JITTER_MS":case 108:t.type=108;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[60]="VIDEO_INPUT_HEIGHT"]=60,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[n[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[n[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e[n[105]="VIDEO_RENDER_HEIGHT"]=105,e[n[106]="VIDEO_RENDER_WIDTH"]=106,e[n[107]="VIDEO_INPUT_WIDTH"]=107,e[n[108]="VIDEO_SENT_JITTER_MS"]=108,e}(),s}(),a.SdkStreamMetricFrame=function(){function s(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamMetricFrame"),s.prototype.streamId=0,s.prototype.groupId=0,s.prototype.metrics=m.emptyArray,s.prototype.dimensions=m.emptyArray,s.prototype.mediaType=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)a.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)a.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(56).int32(e.mediaType),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}case 7:{o.mediaType=e.int32();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=a.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=a.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=a.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=a.SdkStreamDimension.fromObject(e.dimensions[i])}}switch(e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0,i.mediaType=t.enums===String?"AUDIO":1),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),s}(),a.SdkClientMetricFrame=function(){function s(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkClientMetricFrame"),s.prototype.globalMetrics=m.emptyArray,s.prototype.streamMetricFrames=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)a.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=a.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=a.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),s}(),a.SdkStreamDimension=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkStreamDimension"),s.prototype.type=1,s.prototype.value=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=a.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),s}(),a.SdkDimensionValue=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkDimensionValue"),s.prototype.stringValue="",s.prototype.boolValue=!1,s.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,m.Long){var o=new m.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),s}(),a.SdkDataMessageFrame=function(){function s(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkDataMessageFrame"),s.prototype.messages=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)a.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=a.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=a.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),s}(),a.SdkDataMessagePayload=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkDataMessagePayload"),s.prototype.topic="",s.prototype.data=m.newBuffer([]),s.prototype.lifetimeMs=0,s.prototype.senderAttendeeId="",s.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.senderExternalUserId="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=m.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",m.Long){var o=new m.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),s}(),a.SdkTurnCredentials=function(){function s(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTurnCredentials"),s.prototype.username="",s.prototype.password="",s.prototype.ttl=0,s.prototype.uris=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),s}(),a.SdkTranscriptItem=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptItem"),s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.speakerAttendeeId="",s.prototype.speakerExternalUserId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type=1,s.prototype.vocabularyFilterMatch=!1,s.prototype.confidence=0,s.prototype.stable=!1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",m.Long){var o=new m.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",m.Long){var o=new m.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),s}(),a.SdkTranscriptEntity=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptEntity"),s.prototype.category="",s.prototype.confidence=0,s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",m.Long){var o=new m.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(m.Long){var o=new m.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),s}(),a.SdkTranscriptAlternative=function(){function s(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptAlternative"),s.prototype.items=m.emptyArray,s.prototype.transcript="",s.prototype.entities=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)a.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)a.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=a.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=a.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=a.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=a.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),s}(),a.SdkTranscriptLanguageWithScore=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptLanguageWithScore"),s.prototype.languageCode="",s.prototype.score=0,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),s}(),a.SdkTranscriptResult=function(){function s(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptResult"),s.prototype.alternatives=m.emptyArray,s.prototype.channelId="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.isPartial=!1,s.prototype.resultId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.languageCode="",s.prototype.languageIdentification=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)a.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=a.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",m.Long){var o=new m.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",m.Long){var o=new m.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var c=0;c<e.alternatives.length;++c)i.alternatives[c]=a.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)i.languageIdentification[c]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),s}(),a.SdkTranscript=function(){function s(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscript"),s.prototype.results=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)a.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=a.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=a.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),s}(),a.SdkTranscriptionStatus=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptionStatus"),s.prototype.type=1,s.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.transcriptionRegion="",s.prototype.transcriptionConfiguration="",s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,m.Long){var o=new m.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),s.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),s}(),a.SdkTranscriptEvent=function(){function s(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}r(s,"SdkTranscriptEvent"),s.prototype.status=null,s.prototype.transcript=null;var n;return Object.defineProperty(s.prototype,"Event",{get:m.oneOfGetter(n=["status","transcript"]),set:m.oneOfSetter(n)}),s.create=r(function(t){return new s(t)},"create"),s.encode=r(function(t,i){return i||(i=p.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),s.encodeDelimited=r(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),s.decode=r(function(t,i){t instanceof h||(t=h.create(t));for(var o=i===void 0?t.len:t.pos+i,c=new a.SdkTranscriptEvent;t.pos<o;){var g=t.uint32();switch(g>>>3){case 1:{c.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{c.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(g&7);break}}return c},"decode"),s.decodeDelimited=r(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),s.verify=r(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),s.fromObject=r(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var i=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=a.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),s.toObject=r(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),s}(),a.SdkTranscriptFrame=function(){function s(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkTranscriptFrame"),s.prototype.events=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)a.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=a.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=a.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),s}(),a.SdkRemoteVideoUpdateFrame=function(){function s(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkRemoteVideoUpdateFrame"),s.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,s.prototype.removedVideoSubscriptionMids=m.emptyArray,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){if(t||(t=p.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),s}(),a.SdkVideoQualityAdaptationPreference=function(){var s={},n=Object.create(s);return n[s[1]="BALANCED"]=1,n[s[2]="MAINTAIN_FRAMERATE"]=2,n[s[3]="MAINTAIN_RESOLUTION"]=3,n}(),a.SdkVideoSubscriptionConfiguration=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkVideoSubscriptionConfiguration"),s.prototype.mid="",s.prototype.attendeeId="",s.prototype.streamId=0,s.prototype.priority=0,s.prototype.targetBitrateKbps=0,s.prototype.groupId=0,s.prototype.qualityAdaptationPreference=1,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),s}(),a.SdkNotificationFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkNotificationFrame"),s.prototype.level=3,s.prototype.message="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),s.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),s}(),a.SdkPrimaryMeetingJoinFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPrimaryMeetingJoinFrame"),s.prototype.credentials=null,s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPrimaryMeetingJoinAckFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),s}(),a.SdkPrimaryMeetingLeaveFrame=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkPrimaryMeetingLeaveFrame"),s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=r(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),s.toObject=r(function(){return{}},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),s}(),a.SdkMeetingSessionCredentials=function(){function s(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r(s,"SdkMeetingSessionCredentials"),s.prototype.attendeeId="",s.prototype.externalUserId="",s.prototype.joinToken="",s.create=r(function(e){return new s(e)},"create"),s.encode=r(function(e,t){return t||(t=p.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),s.encodeDelimited=r(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=r(function(e,t){e instanceof h||(e=h.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),s.decodeDelimited=r(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=r(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),s.fromObject=r(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),s.toObject=r(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),s.prototype.toJSON=r(function(){return this.constructor.toObject(this,f.util.toJSONOptions)},"toJSON"),s.getTypeUrl=r(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),s}(),a.SdkVideoCodecCapability=function(){var s={},n=Object.create(s);return n[s[1]="VP8"]=1,n[s[2]="H264_BASELINE_PROFILE"]=2,n[s[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[s[4]="H264_MAIN_PROFILE"]=4,n[s[5]="H264_HIGH_PROFILE"]=5,n[s[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[s[8]="VP9_PROFILE_0"]=8,n[s[11]="AV1_MAIN_PROFILE"]=11,n}(),B.exports=a,m.Long=void 0,f.configure()},7822521824:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(1222670195),m=d(9111664378),a=h(d(8066052849));let s=r(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new p.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return f(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),g=yield this.hmac(i,c),S=yield this.hmac(o,g);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,c,g,S){return f(this,void 0,void 0,function*(){const u=this.getDateTimeString(),v=this.getDateString(u),E="AWS4-HMAC-SHA256";let b="";this.chimeClient.config.region instanceof Function?b=yield this.chimeClient.config.region():b=this.chimeClient.config.region;const _="host",C="host:"+o.toLowerCase()+`
`,I=v+"/"+b+"/"+i+"/aws4_request";let A;this.chimeClient.config.credentials instanceof Function?A=yield this.chimeClient.config.credentials():A=this.chimeClient.config.credentials;let w=new Map;w.set("X-Amz-Algorithm",[E]),w.set("X-Amz-Credential",[encodeURIComponent(A.accessKeyId+"/"+I)]),w.set("X-Amz-Date",[u]),w.set("X-Amz-Expires",["10"]),w.set("X-Amz-SignedHeaders",["host"]),A.sessionToken&&w.set("X-Amz-Security-Token",[encodeURIComponent(A.sessionToken)]),w.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),w.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((ne,ie)=>{const ge=encodeURIComponent(ie);ne.sort().forEach(Ie=>{w.has(ge)||w.set(ge,[]),w.get(ge).push(encodeURIComponent(Ie))})});let O="";w=new Map([...w.entries()].sort()),w.forEach((ne,ie)=>{ne.forEach(ge=>{O.length&&(O+="&"),O+=ie+"="+ge})});const R=e+`
`+c+`
`+O+`
`+C+`
`+_+`
`+m.toHex(yield this.hmac(g)),F=m.toHex(yield this.hmac(R)),V=`AWS4-HMAC-SHA256
`+u+`
`+v+"/"+b+"/"+i+`/aws4_request
`+F,$=yield this.getSignatureKey(A.secretAccessKey,v,b,i),X=m.toHex(yield this.hmac(V,$)),Y=O+"&X-Amz-Signature="+X;return t+"://"+o+c+"?"+Y})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=s},8438160003:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var d;(function(f){f[f.Low=0]="Low",f[f.LowAndMedium=1]="LowAndMedium",f[f.LowAndHigh=2]="LowAndHigh",f[f.Medium=3]="Medium",f[f.MediumAndHigh=4]="MediumAndHigh",f[f.High=5]="High"})(d=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=d},6392364773:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var d;(function(f){f[f.DeviceChanged=0]="DeviceChanged",f[f.MutedLocal=1]="MutedLocal",f[f.UnmutedLocal=2]="UnmutedLocal",f[f.Connected=3]="Connected",f[f.ConnectFailed=4]="ConnectFailed",f[f.RedmicStartLoss=5]="RedmicStartLoss",f[f.RedmicEndLoss=6]="RedmicEndLoss"})(d=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=d},5954709649:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(v,E,b,_){function C(I){return I instanceof b?I:new b(function(A){A(I)})}return r(C,"adopt"),new(b||(b=Promise))(function(I,A){function w(F){try{R(_.next(F))}catch(V){A(V)}}r(w,"fulfilled");function O(F){try{R(_.throw(F))}catch(V){A(V)}}r(O,"rejected");function R(F){F.done?I(F.value):C(F.value).then(w,O)}r(R,"step"),R((_=_.apply(v,E||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(7059763395)),m=h(d(5147189764)),a=h(d(1847926377)),s=h(d(7894724558)),n=h(d(7825873064)),e=h(d(5446246651)),t=h(d(7192341248)),i=h(d(9013967876)),o=d(5391134031),c=d(903520651),g=h(d(6392364773)),S=h(d(4715258780));let u=r(class Iu{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(b){return`_${b}`}).replace(/([A-Z][A-Z]+)/g,function(b){return`_${b}`}).toLowerCase()}logLatency(E,b,_){const C=this.toSuffix(E);this.logEventTime("meeting"+C,b,_)}logStateTimeout(E,b){const _=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},b),{state:`state${_}`}))}logAudioEvent(E,b){const _="audio"+this.toSuffix(g.default[E]);this.logEvent(_,b)}logVideoEvent(E,b){const _="video"+this.toSuffix(S.default[E]);this.logEvent(_,b)}logEventTime(E,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const C=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:Iu.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(C)}`),this.metricsAddTime(E,b,C)}logMeetingSessionStatus(E){const b=`${E.statusCode()}`;this.logEvent(b);const _={status:b,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",_),E.isTerminal()&&this.logEvent("meeting_session_stopped",_),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",_),E.isFailure()&&this.logEvent("meeting_session_failed",_)}logLifecycleEvent(E,b){const _={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[b])}`,lifecycle_event_condition_code:`${b}`};this.logEvent("meeting_session_lifecycle",_)}logEvent(E){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const _=Object.assign(Object.assign({},b),{call_id:this.audioVideoController.configuration.meetingId,client_type:Iu.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(_)}`),this.metricsLogEvent(E,_)}start(E,b){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=b,this.clientMetricReport=new p.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>f(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}videoTileResolutionDidChange(E,b,_){this.resolutionMap.set(E,{width:b,height:_})}videoTileUnbound(E){this.resolutionMap.delete(E)}updateMetricValues(E,b){const _=b?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let C;if(b){const I=_.mediaType,A=_.direction;C=this.clientMetricReport.getMetricMap(I,A),I===a.default.VIDEO&&A===m.default.DOWNSTREAM&&this.addRenderResolutionToVideoDownstreamMetrics(_,E.ssrc)}else C=this.clientMetricReport.getMetricMap();for(const I in E)I in C&&(typeof E[I]=="number"?(_.previousMetrics[I]=_.currentMetrics[I],_.currentMetrics[I]=E[I]):typeof E[I]=="string"?_.currentStringMetrics[I]=E[I]:typeof E[I]=="object"?(_.previousObjectMetrics[I]=_.currentObjectMetrics[I]===void 0?E[I]:_.currentObjectMetrics[I],_.currentObjectMetrics[I]=E[I]):this.logger.error(`Unknown metric value type ${typeof E[I]} for metric ${I}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const b=Date.now();for(const _ of E){if(this.isVideoSourceMetricReport(_))continue;const C=this.isStreamRawMetricReport(_);if(C){const I=this.clientMetricReport.streamMetricReports[Number(_.ssrc)];if(I)I.mediaType===a.default.VIDEO&&I.direction===m.default.UPSTREAM?I.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):I.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc));else{const A=new n.default;A.mediaType=this.getMediaType(_),A.direction=this.getDirectionType(_),A.mediaType===a.default.VIDEO&&A.direction===m.default.UPSTREAM?A.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):this.videoStreamIndex.allStreams().empty()||(A.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(A.groupId=this.videoStreamIndex.groupIdForSSRC(Number(_.ssrc)))),this.clientMetricReport.streamMetricReports[Number(_.ssrc)]=A}this.clientMetricReport.currentSsrcs[Number(_.ssrc)]=1}this.updateMetricValues(_,C)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=b,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,b){const _=this.clientMetricReport.getStreamDimensionMap();for(const C in b.currentStringMetrics)if(C in _){const I=o.SdkStreamDimension.create();I.type=_[C];const A=o.SdkDimensionValue.create();A.stringValue=b.currentStringMetrics[C],I.value=A,E.dimensions.push(I)}}addMetricFrame(E,b,_,C){const I=_.type,A=_.transform,w=_.source,O=b.streamMetricFrames.length,R=b.streamMetricFrames[O-1];if(I){const F=o.SdkMetric.create();F.type=I,F.value=A(w||E,C),C?R.metrics.push(F):b.globalMetrics.push(F)}}addGlobalMetricsToProtobuf(E){const b=this.clientMetricReport.getMetricMap();for(const _ in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(_,E,b[_])}addStreamMetricsToProtobuf(E){for(const b in this.clientMetricReport.streamMetricReports){const _=this.clientMetricReport.streamMetricReports[b],C=o.SdkStreamMetricFrame.create();C.streamId=_.streamId,C.mediaType=_.mediaType===a.default.AUDIO?o.SdkStreamMediaType.AUDIO:o.SdkStreamMediaType.VIDEO,C.metrics=[],this.addStreamMetricDimensionFrames(C,_),E.streamMetricFrames.push(C);const I=this.clientMetricReport.getMetricMap(_.mediaType,_.direction);for(const A in I)this.hasMetricDependenciesInReport(A,_)&&this.addMetricFrame(A,E,I[A],Number(b))}}hasMetricDependenciesInReport(E,b){return E==="decoderLoss"&&b.currentMetrics.concealedSamples!==void 0&&b.currentMetrics.totalSamplesReceived!==void 0||E==="jitterBufferMs"&&b.currentMetrics.jitterBufferDelay!==void 0&&b.currentMetrics.jitterBufferEmittedCount!==void 0||E in b.currentMetrics||E in b.currentStringMetrics||E in b.currentObjectMetrics}makeClientMetricProtobuf(){const E=o.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E.type)||this.isVideoSourceMetricReport(E)}getMediaType(E){return E.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(E){const{type:b}=E;return b==="inbound-rtp"||b==="remote-outbound-rtp"||b==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"}isValidSsrc(E){let b=!0;return this.isStreamRawMetricReport(E)&&this.getDirectionType(E)===m.default.DOWNSTREAM&&this.getMediaType(E)===a.default.VIDEO&&(b=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),b}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const b=[];for(const _ of E)this.isValidRawMetricReport(_)&&b.push(_);return b}handleRawMetricReports(E){const b=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(b)}`);const _=[];this.maybeAddRedRecoveryMetrics(_);const C=this.getVideoUpstreamSsrcFromRawMetricReports(b);C!==null&&this.addVideoCodecDegradationMetrics(_,C),this.clientMetricReport.customStatsReports=_,b.push(..._),this.processRawMetricReports(b),this.updateVideoSourceMetrics(b);const I=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(I),this.audioVideoController.forEachObserver(A=>{c.Maybe.of(A.metricsDidReceive).map(w=>w.bind(A)(this.clientMetricReport.clone()))})}getStatsWrapper(){return f(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const b=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=b,b.forEach(_=>{E.push(_)}),this.handleRawMetricReports(E)}catch(b){this.logger.error(b.message)}})}overrideObservableMetric(E,b){this.clientMetricReport.overrideObservableMetric(E,b)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(E,b){E.push({kind:"video",type:"outbound-rtp",ssrc:b,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}getVideoUpstreamSsrcFromRawMetricReports(E){for(const b of E)if(this.isStreamRawMetricReport(b)&&this.getMediaType(b)===a.default.VIDEO&&this.getDirectionType(b)===m.default.UPSTREAM)return b.ssrc;return null}isVideoSourceMetricReport(E){return E.type==="media-source"&&E.kind==="video"}addRenderResolutionToVideoDownstreamMetrics(E,b){const _=this.videoStreamIndex.streamIdForSSRC(Number(b)),C=this.videoStreamIndex.attendeeIdForStreamId(_);if(_===void 0||C===""){this.logger.warn(`No attendee found for ssrc ${b}`);return}this.resolutionMap.has(C)&&(E.currentMetrics.videoRenderWidth=this.resolutionMap.get(C).width,E.currentMetrics.videoRenderHeight=this.resolutionMap.get(C).height)}updateVideoSourceMetrics(E){for(const b of E)if(this.isVideoSourceMetricReport(b)){const _=this.clientMetricReport.getVideoUpstreamSsrcs();if(_.length===0){this.logger.warn("No video upstream ssrcs found");return}for(const C of _)this.clientMetricReport.streamMetricReports[C].currentMetrics.videoInputWidth=b.width,this.clientMetricReport.streamMetricReports[C].currentMetrics.videoInputHeight=b.height}}constructor(E,b,_=Iu.INTERVAL_MS){this.audioVideoController=E,this.logger=b,this.interval=_,this.intervalScheduler=null,this.redRecoveryMetricReport=new s.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.resolutionMap=new Map,this.metricsAddTime=(C,I,A)=>{},this.metricsLogEvent=(C,I)=>{}}},"StatsCollector");l.default=u,u.INTERVAL_MS=1e3,u.CLIENT_TYPE="amazon-chime-sdk-js"},4715258780:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var d;(function(f){f[f.InputAttached=0]="InputAttached",f[f.SendingFailed=1]="SendingFailed",f[f.SendingSuccess=2]="SendingSuccess"})(d=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=d},7063021350:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4715258780)),m=h(d(516529594));let a=r(class extends m.default{run(){return f(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(c)}o&&this.context.statsCollector.logVideoEvent(p.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const c=i[o];i.splice(o,1),e?(i.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},516529594:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(2913368614)),m=h(d(9293073193));let a=r(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new p.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return f(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(n){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},4019918320:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(516529594));let m=r(class extends p.default{run(){return f(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(s){super(s.logger),this.context=s,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=m},7819987893:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(426218501)),m=h(d(516529594));let a=r(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=r(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===p.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(c){this.signalingClient=c}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},2918138407:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(516529594));let m=r(class extends p.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const s in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[s]()}addPeerConnectionEventLogger(){const s=this.context.peer;s.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${s.connectionState}`)}),s.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),s.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${s.iceGatheringState}`)}),s.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),s.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${s.iceConnectionState}`)})}run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(s){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(s)):!1}addRemoteVideoTrack(s,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let g=this.context.videoStreamIndex.streamIdForTrack(t);typeof g>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),g=null);let S=this.context.videoStreamIndex.groupIdForStreamId(g);S===void 0&&(S=null);for(let I=0;I<this.trackEvents.length;I++){const A=this.trackEvents[I],w=n.getVideoTracks();if(w&&w.length){const O=w[0],R=r(()=>{this.context.logger.info(`received the ${A} event for tile=${c.id()} id=${s.id} streamId=${g}`),A==="ended"&&this.removeRemoteVideoTrack(s,c.state())},"callback");O.addEventListener(A,R),this.removeVideoTrackEventListeners[s.id]||(this.removeVideoTrackEventListeners[s.id]=[]),this.removeVideoTrackEventListeners[s.id].push(()=>{O.removeEventListener(A,R)})}}let u,v;if(s.getSettings){const I=s.getSettings();u=I.width,v=I.height}else{const I=s.getCapabilities();u=I.width,v=I.height}const E=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(i,!1,n,u,v,g,E,S),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${g} groupId=${S}`);const b="removetrack",_=n,C=r(()=>this.removeRemoteVideoTrack(s,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[s.id]=()=>{_.removeEventListener(b,C),delete this.removeTrackRemovedEventListeners[s.id]},_.addEventListener(b,C)}removeRemoteVideoTrack(s,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(s.id)){this.removeTrackRemovedEventListeners[s.id]();for(const e of this.removeVideoTrackEventListeners[s.id])e();delete this.removeVideoTrackEventListeners[s.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${s.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(s){super(s.logger),this.context=s,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},7869625838:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4882394368)),m=h(d(3430379175)),a=h(d(516529594));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return f(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>f(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=s},9613312866:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4882394368)),m=h(d(3430379175)),a=h(d(516529594));let s=r(class MS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return f(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(m.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=MS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=s,s.CHROME_VPN_TIMEOUT_MS=5e3},1495317641:function(B,l,d){"use strict";var f=this&&this.__createBinding||(Object.create?function(u,v,E,b){b===void 0&&(b=E),Object.defineProperty(u,b,{enumerable:!0,get:function(){return v[E]}})}:function(u,v,E,b){b===void 0&&(b=E),u[b]=v[E]}),h=this&&this.__setModuleDefault||(Object.create?function(u,v){Object.defineProperty(u,"default",{enumerable:!0,value:v})}:function(u,v){u.default=v}),p=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var v={};if(u!=null)for(var E in u)E!=="default"&&Object.prototype.hasOwnProperty.call(u,E)&&f(v,u,E);return h(v,u),v},m=this&&this.__awaiter||function(u,v,E,b){function _(C){return C instanceof E?C:new E(function(I){I(C)})}return r(_,"adopt"),new(E||(E=Promise))(function(C,I){function A(R){try{O(b.next(R))}catch(F){I(F)}}r(A,"fulfilled");function w(R){try{O(b.throw(R))}catch(F){I(F)}}r(w,"rejected");function O(R){R.done?C(R.value):_(R.value).then(A,w)}r(O,"step"),O((b=b.apply(u,v||[])).next())})},a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(d(3777990285)),n=a(d(4882394368)),e=a(d(7999114886)),t=p(d(1448262436)),i=a(d(426218501)),o=a(d(9315300759)),c=d(5391134031),g=a(d(516529594));let S=r(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const v=yield new Promise((E,b)=>{const _=this.context;_.turnCredentials=null;let C=r(class{cancel(){this.signalingClient.removeObserver(this),b(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(O){if(O.type===i.default.WebSocketClosed){let F=`The signaling connection was closed with code ${O.closeCode} and reason: ${O.closeReason}`;_.logger.warn(F);let V=n.default.SignalingBadRequest;O.closeCode===4410?(F="The meeting already ended.",_.logger.warn(F),V=n.default.MeetingEnded):O.closeCode>=4500&&O.closeCode<4600&&(V=n.default.SignalingInternalServerError),_.audioVideoController.handleMeetingSessionStatus(new s.default(V),new Error(F));return}if(O.type!==i.default.ReceivedSignalFrame)return;if(O.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const F=O.message.joinack;if(!F){_.audioVideoController.handleMeetingSessionStatus(new s.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(F.videoSubscriptionLimit&&(_.videoSubscriptionLimit=F.videoSubscriptionLimit),_.serverSupportsCompression=F.wantsCompressedSdp,F.defaultServerSideNetworkAdaption!==void 0&&F.defaultServerSideNetworkAdaption!==t.default.Default&&_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const V=F.defaultServerSideNetworkAdaption;_.logger.info(`Overriding server side network adaption value to ${V}`),_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(V))}F&&F.turnCredentials?(_.turnCredentials=new e.default,_.turnCredentials.username=F.turnCredentials.username,_.turnCredentials.password=F.turnCredentials.password,_.turnCredentials.ttl=F.turnCredentials.ttl,_.turnCredentials.uris=F.turnCredentials.uris.map(V=>_.meetingSessionConfiguration.urls.urlRewriter(V)).filter(V=>!!V)):_.logger.error("missing TURN credentials in JoinAckFrame");return}if(O.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const R=O.message.index;E(R)}constructor(O){this.signalingClient=O}},"IndexFrameInterceptor");const I=new C(this.context.signalingClient);this.context.signalingClient.registerObserver(I),this.taskCanceler=I,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const A=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(A.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),A.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(A.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),A.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(A)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},5110013894:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(426218501)),m=d(5391134031),a=h(d(516529594));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=r(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(g){if(g.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}g.type===p.default.ReceivedSignalFrame&&g.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(g,S){this.signalingClient=g,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=s},3708122413:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(426218501)),m=d(5391134031),a=h(d(516529594));let s=r(class extends a.default{run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===p.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=s},1504187181:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(b,_,C,I){function A(w){return w instanceof C?w:new C(function(O){O(w)})}return r(A,"adopt"),new(C||(C=Promise))(function(w,O){function R($){try{V(I.next($))}catch(X){O(X)}}r(R,"fulfilled");function F($){try{V(I.throw($))}catch(X){O(X)}}r(F,"rejected");function V($){$.done?w($.value):A($.value).then(R,F)}r(V,"step"),V((I=I.apply(b,_||[])).next())})},h=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(5147189764)),m=h(d(1847926377)),a=h(d(8929805428)),s=h(d(2115341037)),n=h(d(5928001672)),e=h(d(6005421222)),t=h(d(3777990285)),i=h(d(4882394368)),o=h(d(4883941895)),c=h(d(426218501)),g=d(5391134031),S=h(d(6392364773)),u=d(903520651),v=h(d(516529594));let E=r(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(_){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(_){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=_;return}else this.pendingMetricsReport=void 0;const C=_.getObservableMetrics(),I=C.availableOutgoingBitrate,A=C.nackCountReceivedPerSecond;let w=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(_);const O=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(w=w||O,O){const R=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=R.truncate(this.context.videoSubscriptionLimit),R.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${O}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:I/1e3,nackCountPerSecond:A});const R=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();w=w||R,R&&(this.logger.info(`trigger resubscribe for up=${R}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return w}metricsDidReceive(_){if(this.checkResubscribe(_)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const C=_.streamMetricReports,I=new Map;for(const A in C)C[A].mediaType===m.default.VIDEO&&C[A].direction===p.default.DOWNSTREAM&&I.set(C[A].streamId,C[A])}connectionHealthDidChange(_){_.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,_,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,_,()=>{var C;this.context.poorConnectionCount+=1;const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("receivingAudioDropped",I),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(A=>{u.Maybe.of(A.connectionDidSuggestStopVideo).map(w=>w.bind(A)())}):this.context.audioVideoController.forEachObserver(A=>{u.Maybe.of(A.connectionDidBecomePoor).map(w=>w.bind(A)())})},()=>{this.context.audioVideoController.forEachObserver(C=>{u.Maybe.of(C.connectionDidBecomeGood).map(I=>I.bind(C)())})});for(const C of this.videoEncodingHealthPolicies)this.applyHealthPolicy(C,_,()=>{switch(this.degradeVideoCodec(C.name),C.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.context.isSessionConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,_,()=>{var C;const I=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioFailed",I)},()=>{var C;const I=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioRecovered",I)})}applyHealthPolicy(_,C,I,A){_.update(C);const w=_.healthIfChanged();w!==null&&(this.logger.info(`${_.name} value is now ${w}`),w<=_.minimumHealth()?u.Maybe.of(I).map(O=>O.bind(this)()):u.Maybe.of(A).map(O=>O.bind(this)()))}handleBitrateFrame(_){this.currentAvailableStreamAvgBitrates=_,_.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${_.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",_.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(_){var C;if(_.type===c.default.WebSocketClosed&&this.isUnexpectedWebsocketCloseCode(_.closeCode)||_.type===c.default.WebSocketError||_.type===c.default.WebSocketFailed){if(_.type===c.default.WebSocketClosed&&this.context.logger.info(`The signaling connection was closed with code ${_.closeCode} and reason: ${_.closeReason}`),!this.hasSignalingError){const I=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("signalingDropped",I),this.hasSignalingError=!0}this.context.isSessionConnected&&this.context.audioVideoController.handleMeetingSessionStatus(new t.default(this.isInternalServerFailureCloseCode(_.closeCode)?i.default.SignalingInternalServerError:i.default.SignalingChannelClosedUnexpectedly),null)}else _.type===c.default.WebSocketOpen&&(this.hasSignalingError=!1);if(_.type===c.default.ReceivedSignalFrame){if(_.message.type===g.SdkSignalFrame.Type.NOTIFICATION){switch(_.message.notification.level){case g.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${_.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${_.message.notification.message}`);break;case g.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${_.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${_.message.notification.level}: ${_.message.notification.message}`);break}return}if(_.message.bitrates){const A=_.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(A),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(_.message.bitrates)}const I=t.default.fromSignalFrame(_.message);_.message.type!==g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&I.statusCode()!==i.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(I,null)}}isUnexpectedWebsocketCloseCode(_){return _===1006||this.isInternalServerFailureCloseCode(_)}isInternalServerFailureCloseCode(_){return _>=4500&&_<4600}degradeVideoCodec(_){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const C=[];for(const I of this.context.videoSendCodecPreferences)I.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||C.push(I);C.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${C[0].codecName} due to ${_}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=C,this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(I=>I.codecName).join(",")}`)}}constructor(_,C,I){super(_.logger),this.context=_,this.initialConnectionHealthData=I,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=A=>{const w=A<1,O=this.prevSignalStrength<1,R=w?O?null:S.default.RedmicStartLoss:O?S.default.RedmicEndLoss:null;R&&this.context.statsCollector.logAudioEvent(R),this.prevSignalStrength=A},this.realtimeFatalErrorCallback=A=>{this.logger.error(`realtime error: ${A}: ${A.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.RealtimeApiFailed),A)},this.realtimeAttendeeIdPresenceHandler=(A,w)=>{var O;const R=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${R}`),R===A&&w&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(O=this.context.eventController)===null||O===void 0||O.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:A,startTimeMs:w,iceGatheringDurationMs:O,attendeePresenceDurationMs:R,meetingStartDurationMs:F}=this.context;return{meetingDurationMs:w===null?0:Math.round(Date.now()-w),signalingOpenDurationMs:A,iceGatheringDurationMs:O,attendeePresenceDurationMs:R,meetingStartDurationMs:F}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const A=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},A),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},C),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new s.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone());for(const A of C.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new A(Object.assign({},C),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=E},1992142375:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(h){}},"NoOpTask");l.default=d},2913368614:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3756404293)),p=f(d(3741513515));let m=r(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const s of this.dependencies)s.cancel();this.logger.info(`Canceling ${this.name()}`),p.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&p.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const s=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${s}`)}run(){if(this.promise)return this.promise;const s=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=s.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(s){this.task.setParent(s)}constructor(s,n,e){this.logger=s,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=m},6907504899:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(893025464)),m=h(d(426218501)),a=h(d(516529594));let s=r(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new p.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let c=r(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(u){switch(u.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(u){this.signalingClient=u}},"WebSocketOpenInterceptor");const g=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(g),this.taskCanceler=g})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=s},6015743885:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(516529594));let m=r(class extends p.default{cancel(){for(const s of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${s.name()}`),s.cancel()}run(){return f(this,void 0,void 0,function*(){const s=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),s.push(e.run());const n=[];for(let e=0;e<s.length;e++){try{yield s[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(s,n,e){super(s),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=m},3627106901:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(e,t,i,o){function c(g){return g instanceof i?g:new i(function(S){S(g)})}return r(c,"adopt"),new(i||(i=Promise))(function(g,S){function u(b){try{E(o.next(b))}catch(_){S(_)}}r(u,"fulfilled");function v(b){try{E(o.throw(b))}catch(_){S(_)}}r(v,"rejected");function E(b){b.done?g(b.value):c(b.value).then(u,v)}r(E,"step"),E((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(7164668892),m=h(d(426218501)),a=d(5391134031),s=h(d(516529594));let n=r(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=r(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new p.MeetingSessionStatus(p.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===m.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(p.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,u,v){this.signalingClient=S,this.completionCallback=u,this.logger=v}},"Interceptor");const c=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=n},3151098372:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(516529594));let m=r(class extends p.default{run(){var s,n;return f(this,void 0,void 0,function*(){if(!(!((n=(s=this.context.meetingSessionConfiguration)===null||s===void 0?void 0:s.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(s){super(s.logger),this.context=s,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=m},9363406688:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(426218501)),m=d(5391134031),a=h(d(516529594));let s=r(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return f(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const i of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(i);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${i}`);continue}let c=this.context.videoTileController.getVideoTileForAttendeeId(o);c===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${i}. Creating new one.`),c=this.context.videoTileController.addVideoTile(),c.bindVideoStream(o,!1,null,0,0,0,null)),t.add(c.id())}this.serverPausedVideoTileIds.forEach(i=>{t.has(i)||this.serverPausedVideoTileIds.delete(i)})}handleSignalingClientEvent(e){if(e.type!==p.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.logger.info(`Received new ${i===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(c=>{const g=this.context.videoStreamIndex.attendeeIdForGroupId(c);if(g.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${c}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(g)});for(const c of o)c!==void 0&&(i===m.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(g=>{g.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=s},6069988831:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4599834734)),m=d(5391134031),a=h(d(516529594));let s=r(class extends a.default{checkAndApplyVideoConstraint(e,t,i,o,c){return f(this,void 0,void 0,function*(){const g=e?this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution;if(!e&&i<=g.videoWidth&&o<=g.videoHeight&&c<=g.videoFrameRate)return;const S={resizeMode:{ideal:"none"},width:{max:g.videoWidth},height:{max:g.videoHeight},frameRate:{ideal:c,max:g.videoFrameRate}};try{yield t.applyConstraints(S)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}})}run(){return f(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,g=new p.default(c).hasModality(p.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(g,o[0],S.width,S.height,S.frameRate);const u=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,i,S.width,S.height,null,u);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=s},2452872079:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(o,c,g,S){function u(v){return v instanceof g?v:new g(function(E){E(v)})}return r(u,"adopt"),new(g||(g=Promise))(function(v,E){function b(I){try{C(S.next(I))}catch(A){E(A)}}r(b,"fulfilled");function _(I){try{C(S.throw(I))}catch(A){E(A)}}r(_,"rejected");function C(I){I.done?v(I.value):u(I.value).then(b,_)}r(C,"step"),C((S=S.apply(o,c||[])).next())})},h=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1880578541)),m=h(d(4599834734)),a=h(d(4883941895)),s=h(d(426218501)),n=d(5391134031),e=d(903520651),t=h(d(516529594));let i=r(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return f(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==s.default.ReceivedSignalFrame||c.message.type!==n.SdkSignalFrame.Type.INDEX)return;const g=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(g)}`),this.handleIndexFrame(g)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const g=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(_=>{const C=new m.default(_.attendeeId);return!(C.base()===g&&C.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:u,videoUplinkBandwidthPolicy:v}=this.context,E=S.allVideoSendingSourcesExcludingSelf(g);S.integrateIndexFrame(c),u.updateIndex(S),v.updateIndex(S),this.resubscribe(u,v),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const b=S.allVideoSendingSourcesExcludingSelf(g);this.areVideoSourcesEqual(E,b)||this.context.audioVideoController.forEachObserver(_=>{e.Maybe.of(_.remoteVideoSourcesDidChange).map(C=>C.bind(_)(b))})}areVideoSourcesEqual(c,g){if(c.length!==g.length)return!1;const S=r((E,b)=>E.attendee.attendeeId.localeCompare(b.attendee.attendeeId),"compare"),u=[...c].sort(S),v=[...g].sort(S);for(let E=0;E<u.length;E++)if(u[E].attendee.attendeeId!==v[E].attendee.attendeeId)return!1;return!0}resubscribe(c,g){const S=c.wantsResubscribe(),u=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&g.wantsResubscribe(),v=S||u;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${u})`),!v)return;const E=c.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=g.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${u} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const g=new p.default;g.remoteVideoAvailable=!this.context.videosToReceive.empty(),g.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(g))&&(this.context.lastKnownVideoAvailability=g.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(u=>u.bind(S)(g.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const g=[];let S=!1;for(const u of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>u.equals(v))){this.logger.info(`Skipping ${u.codecName} since the codec has been identfied as degraded`);continue}for(const v of c.supportedReceiveCodecIntersection)if(u.equals(a.default.fromSignaled(v))){g.push(u);break}}if(g.length>0){const u=g.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(E=>v.equals(E)));this.context.currentVideoSendCodec!==void 0&&(u===void 0||!this.context.currentVideoSendCodec.equals(u))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=g}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const g of this.context.videoTileController.getAllVideoTiles()){const S=g.state();c.contain(S.streamId)?g.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):g.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=i},6771673942:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(516529594));let p=r(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,s,n="RunnableTask"){super(a),this.fn=s,this.taskName=n}},"RunnableTask");l.default=p},2471283351:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(e,t,i,o){function c(g){return g instanceof i?g:new i(function(S){S(g)})}return r(c,"adopt"),new(i||(i=Promise))(function(g,S){function u(b){try{E(o.next(b))}catch(_){S(_)}}r(u,"fulfilled");function v(b){try{E(o.throw(b))}catch(_){S(_)}}r(v,"rejected");function E(b){b.done?g(b.value):c(b.value).then(u,v)}r(E,"step"),E((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(1766966835)),m=h(d(426218501)),a=d(5391134031),s=h(d(516529594));let n=r(class Gh extends s.default{run(){return f(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new p.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!Gh.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>Gh.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,c)=>{if(this.context.signalingClient.ready()){let g;o instanceof Uint8Array?g=o:typeof o=="string"?g=new TextEncoder().encode(o):g=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,g,c);const S=a.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=c,S.data=g;const u=a.SdkDataMessageFrame.create();u.messages=[S],this.context.signalingClient.sendDataMessage(u)}else this.context.logger.error("Cannot send data message because signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},3894566132:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(516529594)),m=h(d(9293073193));let a=r(class extends p.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return f(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");l.default=a},6412210284:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8351168186)),m=h(d(3430379175)),a=h(d(516529594));let s=r(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return f(this,void 0,void 0,function*(){const e=this.context.peer;let i=this.context.sdpOfferInit.sdp;if(this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(i=new m.default(i).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(i=new m.default(i).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new p.default().requiresDisablingH264Encoding()&&(i=new m.default(i).removeH264SupportFromSendSection().sdp),i=new m.default(i).withStartingVideoSendBitrate(1e3).sdp,this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(i=new m.default(i).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(i=new m.default(i).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(i=new m.default(i).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const c=new m.default(i).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(c)}this.logger.debug(()=>`local description is >>>${i}<<<`);const o={type:"offer",sdp:i,toJSON:null};yield new Promise((c,g)=>f(this,void 0,void 0,function*(){this.cancelPromise=S=>{g(S)};try{yield e.setLocalDescription(o),c()}catch(S){g(S)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(e){super(e.logger),this.context=e,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=s},839180639:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(e,t,i,o){function c(g){return g instanceof i?g:new i(function(S){S(g)})}return r(c,"adopt"),new(i||(i=Promise))(function(g,S){function u(b){try{E(o.next(b))}catch(_){S(_)}}r(u,"fulfilled");function v(b){try{E(o.throw(b))}catch(_){S(_)}}r(v,"rejected");function E(b){b.done?g(b.value):c(b.value).then(u,v)}r(E,"step"),E((o=o.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4599834734)),m=h(d(3430379175)),a=h(d(4883941895)),s=h(d(516529594));let n=r(class extends s.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return f(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new m.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new m.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new m.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new m.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new m.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const c=this.context.activeVideoInput;if(c!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,u=new p.default(S).hasModality(p.default.MODALITY_CONTENT),v=c.getVideoTracks()[0];u&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const g={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(g)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>f(this,void 0,void 0,function*(){const c=r(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(g){o(g)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=n},2641934340:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(S,u,v,E){function b(_){return _ instanceof v?_:new v(function(C){C(_)})}return r(b,"adopt"),new(v||(v=Promise))(function(_,C){function I(O){try{w(E.next(O))}catch(R){C(R)}}r(I,"fulfilled");function A(O){try{w(E.throw(O))}catch(R){C(R)}}r(A,"rejected");function w(O){O.done?_(O.value):b(O.value).then(I,A)}r(w,"step"),w((E=E.apply(S,u||[])).next())})},h=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(3777990285)),m=h(d(4882394368)),a=h(d(3430379175)),s=h(d(9675039205)),n=d(1448262436),e=h(d(426218501)),t=h(d(1026405281)),i=d(5391134031),o=d(6700033168),c=h(d(516529594));let g=r(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return f(this,void 0,void 0,function*(){let u="";if(this.context.peer&&this.context.peer.localDescription&&(u=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let w=0,O=0;this.context.videoCaptureAndEncodeParameter&&(w=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),O=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const R={rid:"hi",maxBitrate:O*1e3,maxFramerate:w,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([R])}const v=this.fixUpSubscriptionOrder(u,this.context.videoSubscriptions),E=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let b,_=u;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(_=new a.default(_).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const w=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";b=this.textCompressor.compress(_,w),this.context.logger.info(`Compressed the SDP message from ${_.length} to ${b.length} bytes.`),u=""}this.context.previousSdpOffer=new a.default(u);const C=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,u,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,b);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(C.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(w=>w===0?0:this.context.videoStreamIndex.groupIdForStreamId(w)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(C)}`),this.context.signalingClient.subscribe(C);const I=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(I)}`);let A="";I.compressedSdpAnswer&&I.compressedSdpAnswer.length?(A=this.textCompressor.decompress(I.compressedSdpAnswer,this.context.previousSdpAnswerAsString),A.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${I.compressedSdpAnswer.length} to ${A.length} bytes.`),this.context.sdpAnswer=A):this.context.sdpAnswer=I.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(I)})}fixUpSubscriptionOrder(u,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const E=new Map;for(const C of v){const I=this.context.transceiverController.getMidForStreamId(C);if(I===void 0){C!==0&&this.logger.warn(`Could not find MID for stream ID: ${C}`);continue}E.set(I,C)}const b=new a.default(u).mediaSections(),_=[];for(const C of b)if(C.mediaType==="video")if(C.direction==="recvonly"){const I=E.get(C.mid);if(I===void 0){this.logger.warn(`Could not find stream ID for MID: ${C.mid}`);continue}_.push(I)}else _.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(_)} (may be same))}`),_}receiveSubscribeAck(){return new Promise((u,v)=>{const E=this.context;let b=r(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(I){if(I.isConnectionTerminated()){const w=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${I.closeCode} and reason: ${I.closeReason}`;E.logger.warn(w);let O=m.default.TaskFailed;I.closeCode>=4500&&I.closeCode<4600&&(O=m.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new p.default(O),new Error(w));return}if(I.type!==e.default.ReceivedSignalFrame||I.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const A=I.message.suback;u(A)}constructor(I){this.signalingClient=I}},"Interceptor");const _=new b(this.context.signalingClient);this.context.signalingClient.registerObserver(_),this.taskCanceler=_})}constructor(u){super(u.logger),this.context=u,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new s.default(u.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=g},9293073193:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.IDLE="IDLE",f.RUNNING="RUNNING",f.CANCELED="CANCELED",f.FINISHED="FINISHED"})(d||(d={})),l.default=d},3450261616:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6393942734)),m=h(d(516529594));let a=r(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return f(this,void 0,void 0,function*(){const n=new p.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},7500181884:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4882394368)),m=h(d(516529594));let a=r(class extends m.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${p.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return f(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=r((o,c,g,S,u)=>{n===o&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},6769427378:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(t,i,o,c){function g(S){return S instanceof o?S:new o(function(u){u(S)})}return r(g,"adopt"),new(o||(o=Promise))(function(S,u){function v(_){try{b(c.next(_))}catch(C){u(C)}}r(v,"fulfilled");function E(_){try{b(c.throw(_))}catch(C){u(C)}}r(E,"rejected");function b(_){_.done?S(_.value):g(_.value).then(v,E)}r(b,"step"),b((c=c.apply(t,i||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(4999349075)),m=h(d(7894724558)),a=h(d(1510239283)),s=h(d(3440292739)),n=h(d(3741513515));let e=r(class{setEncodingParameters(i){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const c=Array.from(i.values()),g=o.getParameters();if(!g.encodings||g.encodings.length===0)g.encodings=c;else for(const S of g.encodings)for(const u of c){if((S.rid||u.rid)&&S.rid!==u.rid)continue;let v;for(v in u)v==="rid"||v==="codecPayloadType"||u.hasOwnProperty(v)&&(S[v]=u[v])}yield o.setParameters(g)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const c=o.getParameters();c.encodings||(c.encodings=[{}]);for(const g of c.encodings)g.maxBitrate=i*1e3;yield o.setParameters(c)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return f(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return f(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return f(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(c,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,c){const g=c.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,g)):i.length!==0&&this.updateTransceiverWithStop(i,o,g);for(const S of g){const u=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,u),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),u),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${u.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,c){let g=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let u=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[E,b]of c.entries())if(o.StreamIdsInSameGroup(v,b)){S.direction="recvonly",this.videoSubscriptions[g]=b,u=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(b,S),c.splice(E,1);break}}if(!u){this.videoSubscriptions[g]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[E,b]of this.streamIdToTransceiver.entries())S.mid===b.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(o.groupIdForStreamId(E)))}g+=1}}updateTransceiverWithoutStop(i,o,c){let g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[g]=0,S.direction!=="inactive"){const u=o.streamIdForTrack("v_"+S.mid);if(u!==void 0){for(const[v,E]of c.entries())if(o.StreamIdsInSameGroup(u,E)){S.direction="recvonly",this.videoSubscriptions[g]=E,this.streamIdToTransceiver.delete(u),this.streamIdToTransceiver.set(E,S),c.splice(v,1);break}}}g+=1}g=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&c.length>0){S.direction="recvonly";const u=c.shift();this.videoSubscriptions[g]=u,this.streamIdToTransceiver.set(u,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(u),S)}else if(this.videoSubscriptions[g]===0){S.direction="inactive";for(const[u,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(u),this.groupIdToTransceiver.delete(o.groupIdForStreamId(u)))}g+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[c,g]of this.streamIdToTransceiver.entries())if(g.mid===i){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(o,g);return}}getMidForGroupId(i){var o,c;return(c=(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid)!==null&&c!==void 0?c:void 0}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(i+=`transceiver index=${o} mid=${c.mid} subscription=${this.videoSubscriptions[o]} direction=${c.direction}
`,o+=1);return i}setTransceiverInput(i,o){return f(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new p.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const c=!!window.RTCRtpScriptTransform,g=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(g)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([s.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const u=new m.default;u.currentTimestampMs=Date.now(),u.ssrc=S.data.ssrc,u.totalAudioPacketsLost=S.data.totalAudioPacketsLost,u.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,u.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,u.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(u)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(g){const S=this._localAudioTransceiver.sender.createEncodedStreams(),u=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:u},[S.readable,S.writable,u.readable,u.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var c;const g=this.peer.addTransceiver(i,o);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return g;const S=!!window.RTCRtpScriptTransform,u=!!RTCRtpSender.prototype.createEncodedStreams;if(S)g.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),g.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(u){const v=g.sender.createEncodedStreams(),E=g.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:E},[v.readable,v.writable,E.readable,E.writable])}return g}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker.terminate(),this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,c=i.getRTCStatsReport();let g=0,S=0,u=0;c.forEach(I=>{I.kind==="audio"&&(I.type==="outbound-rtp"?S=I.packetsSent:I.type==="remote-inbound-rtp"&&(g=I.timestamp,u=I.packetsLost))}),(this.audioMetricsHistory.length===0||g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:g,totalPacketsSent:S,totalPacketsLost:u}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),b=Math.max(v,E),[_,C]=a.default.getNumRedundantEncodingsForPacketLoss(b);if(C){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const I=o-this.lastAudioRedTurnOffTimestampMs,A=o-this.lastHighPacketLossEventTimestampMs;if(I>=this.audioRedPacketLossLongEvalPeriodMs&&A<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,_)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:_})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,g=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const u=g-this.audioMetricsHistory[S].totalPacketsLost,v=c-this.audioMetricsHistory[S].totalPacketsSent,E=100*(u/v);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,c){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},1438956810:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(2962876954));let m=r(class wu extends p.default{setEncodingParameters(s){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===p.default.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===p.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(p.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(s,n,e){super(s,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<wu.NAME_ARR_ASCENDING.length;i++){const o=wu.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:wu.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},2962876954:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6769427378));let m=r(class ia extends p.default{setEncodingParameters(s){return f(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===ia.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(ia.LOW_LEVEL_NAME),i),i.rid===ia.MID_LEVEL_NAME&&this.copyEncodingParams(s.get(ia.MID_LEVEL_NAME),i),i.rid===ia.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(ia.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(s){return f(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var s,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(s=this.meetingSessionContext)===null||s===void 0?void 0:s.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(s,n){n.active=s.active,n.maxBitrate=s.maxBitrate,n.scaleResolutionDownBy=s.scaleResolutionDownBy,n.maxFramerate=s.maxFramerate}constructor(s,n,e){super(s,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<ia.NAME_ARR_ASCENDING.length;i++){const o=ia.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:ia.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},3052177122:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6769427378));let p=r(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,s,n){super(a,s,n)}},"VideoOnlyTransceiverController");l.default=p},246495600:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const f=d(5269429115);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=r(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const s of f.TranscriptEventConverter.from(a))for(const n of this.transcriptEventCallbacks)n(s)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},9138893973:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"Transcript");l.default=d},866659076:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptAlternative");l.default=d},7538060970:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptEntity");l.default=d},5269429115:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=d(5391134031),p=f(d(9138893973)),m=f(d(2461374283)),a=f(d(3798201443)),s=f(d(2024984314)),n={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=r(class{static from(i){let o;try{o=h.SdkTranscriptFrame.decode(i.data)}catch(g){throw new Error("Cannot decode transcript data message: "+g)}const c=[];for(const g of o.events)if(g.status){const S=n[g.status.type];if(!S)continue;const u=new m.default;u.type=S,u.eventTimeMs=g.status.eventTime,u.transcriptionRegion=g.status.transcriptionRegion,u.transcriptionConfiguration=g.status.transcriptionConfiguration,g.status.message&&(u.message=g.status.message),c.push(u)}else if(g.transcript){const S=new p.default;S.results=[];for(const u of g.transcript.results){const v={channelId:u.channelId,isPartial:u.isPartial,resultId:u.resultId,startTimeMs:u.startTime,endTimeMs:u.endTime,alternatives:[]};if(u.languageCode&&(v.languageCode=u.languageCode),u.languageIdentification&&u.languageIdentification.length>0){v.languageIdentification=[];for(const E of u.languageIdentification){const b={languageCode:E.languageCode,score:E.score};v.languageIdentification.push(b)}}for(const E of u.alternatives){const b={items:[],transcript:E.transcript};for(const _ of E.items){const C={content:_.content,attendee:{attendeeId:_.speakerAttendeeId,externalUserId:_.speakerExternalUserId},startTimeMs:_.startTime,endTimeMs:_.endTime,type:null};switch(_.vocabularyFilterMatch&&(C.vocabularyFilterMatch=_.vocabularyFilterMatch),_.hasOwnProperty("stable")&&(C.stable=_.stable),_.hasOwnProperty("confidence")&&(C.confidence=_.confidence),_.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:C.type=s.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:C.type=s.default.PUNCTUATION;break}b.items.push(C)}for(const _ of E.entities){b.entities||(b.entities=[]);const C={category:_.category,confidence:_.confidence,content:_.content,startTimeMs:_.startTime,endTimeMs:_.endTime};_.type&&(C.type=_.type),b.entities.push(C)}v.alternatives.push(b)}S.results.push(v)}c.push(S)}return c}},"TranscriptEventConverter");l.TranscriptEventConverter=e},3531434754:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptItem");l.default=d},2024984314:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.PRONUNCIATION="pronunciation",f.PUNCTUATION="punctuation"})(d||(d={})),l.default=d},9584814027:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptLanguageWithScore");l.default=d},3443368328:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptResult");l.default=d},2461374283:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"TranscriptionStatus");l.default=d},3798201443:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var d;(function(f){f.STARTED="started",f.INTERRUPTED="interrupted",f.RESUMED="resumed",f.STOPPED="stopped",f.FAILED="failed"})(d||(d={})),l.default=d},3564840480:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(2518355262),p=f(d(8066052849));let m=r(class _l{getParserResult(){var s,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((s=this.parserResult)===null||s===void 0?void 0:s.os.name)||_l.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||_l.UNAVAILABLE,sdkVersion:p.default.sdkVersion,sdkName:p.default.sdkName}}constructor(s){var n,e,t,i,o,c,g;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(S){s.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||_l.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||_l.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||_l.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((g=this.parserResult)===null||g===void 0?void 0:g.device.model)||""].join(" ").trim()||_l.UNAVAILABLE}},"DefaultUserAgentParser");l.default=m,m.UNAVAILABLE="Unavailable"},2997222898:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{add(h){return new Promise((p,m)=>{this.queue=this.queue.then(h).then(p).catch(m)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=d},903520651:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let d=r(class{static of(m){return m==null?h.of():f.of(m)}},"Maybe");l.Maybe=d;let f=r(class RS{map(m){return d.of(m(this.value))}flatMap(m){return m(this.value)}get(){return this.value}getOrElse(m){return this.value}defaulting(m){return d.of(this.getOrElse(m))}static of(m){if(m==null)throw new Error("value is ${value}");return new RS(m)}constructor(m){this.value=m,this.isSome=!0,this.isNone=!1}},"Some");l.Some=f;let h=r(class Du{get(){throw new Error("value is null")}getOrElse(m){return m}map(m){return new Du}flatMap(m){return new Du}defaulting(m){return d.of(this.getOrElse(m))}static of(){return new Du}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=h},840544383:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0}),l.iterateEvery=l.SuppressedError=l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=f(d(8066052849));function p(o){return new Promise(c=>setTimeout(c,o))}r(p,"wait"),l.wait=p;function m(){var o;try{return((o=window.frameElement)===null||o===void 0?void 0:o.nodeName)==="IFRAME"||parent!==top}catch{return!0}}r(m,"isIFramed"),l.isIFramed=m;function a(o){return o===null?null:typeof o!="object"?o:Array.isArray(o)?o.map(a):Object.keys(o).reduce((c,g)=>{const S=o[g],u=typeof S=="object"?a(S):S;return c[g.toLowerCase()]=u,c},{})}r(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function s(){const o=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${o.major}.${o.minor}`}}r(s,"getDefaultAssetSpec"),l.getDefaultAssetSpec=s;function n(o){const c=Math.abs(o),g=o<=0?"+":"-",S=Math.floor(c/60).toString().padStart(2,"0"),u=Math.floor(c%60).toString().padStart(2,"0");return`${g}${S}:${u}`}r(n,"getFormattedOffset"),l.getFormattedOffset=n;function e(o){try{window.crypto.getRandomValues(o)}catch{new DataView(o.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}r(e,"getRandomValues"),l.getRandomValues=e;let t=r(class extends Error{constructor(c,g,S){var u;super(S??`${(u=c==null?void 0:c.message)!==null&&u!==void 0?u:c}`),this.error=c,this.suppressed=g}},"SuppressedError");l.SuppressedError=t;function i(o,c){if(!o)return;let g;for(const S of o)try{c(S)}catch(u){g=new t(u,g)}if(g)throw g}r(i,"iterateEvery"),l.iterateEvery=i},8066052849:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8351168186)),p=f(d(9778296323));let m=r(class pc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return p.default.semverString}static get sdkVersionSemVer(){var s,n,e,t;const i=p.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(s=i==null?void 0:i.groups)===null||s===void 0?void 0:s.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return p.default.hash.substring(1)}static get sdkUserAgentLowResolution(){const s=new h.default;return`${s.name()}-${s.majorVersion()}`}static urlWithVersion(s){const n=new URL(s);return n.searchParams.append(pc.X_AMZN_VERSION,pc.sdkVersion),n.searchParams.append(pc.X_AMZN_USER_AGENT,pc.sdkUserAgentLowResolution),n.toString()}},"Versioning");l.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},9778296323:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"55eb4ca",raw:"v3.27.0",semverString:"3.27.0"}},8261422434:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class PS{equal(h){let p=h.captureWidth()===this.cameraWidth&&h.captureHeight()===this.cameraHeight&&h.captureFrameRate()===this.cameraFrameRate&&h.encodeBitrates().length===this.encodeBitrates().length&&h.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&h.encodeWidths().length===this.encodeWidths().length&&h.encodeHeights().length===this.encodeHeights().length&&h.isSVCEncoding()===this.isSVC;if(p){for(let m=0;m<h.encodeWidths().length;m++)if(h.encodeWidths()[m]!==this.encodeWidths()[m]||h.encodeHeights()[m]!==this.encodeHeights()[m]||h.encodeBitrates()[m]!==this.encodeBitrates()[m]||h.encodeScaleResolutionDownBy()[m]!==this.encodeScaleResolutionDownBy()[m])return p=!1,p}return p}clone(){return new PS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(h,p,m,a,s,n=1,e=!1){this.cameraWidth=h,this.cameraHeight=p,this.cameraFrameRate=m,this.maxEncodeBitrateKbps=a,this.isSimulcast=s,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=d},7744958188:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5134603106));let p=r(class kS{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const s=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return s;const n=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const c of t)n.contain(c.streamId)&&i.set(c.attendeeId,c);let o=0;for(const c of e){const g=c.attendee.attendeeId;if(i.has(g)){const S=i.get(g);if(o+S.maxBitrateKbps<=kS.maxReceiveBitrateKbps)s.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return s}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=p,p.maxReceiveBitrateKbps=15e3},9248911078:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(5134603106));let p=r(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=p},6110401981:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var d;(function(f){f[f.Low=0]="Low",f[f.Medium=1]="Medium",f[f.High=2]="High",f[f.Maximum=3]="Maximum"})(d=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=d},1437705752:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(3560634922)),p=f(d(1448262436)),m=f(d(7981698535)),a=d(6700033168),s=f(d(6313276823)),n=f(d(9837586225));let e=r(class NS extends s.default{static createConfig(){const i=new n.default;return i.serverSideNetworkAdaption=p.default.None,i}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(i){super.updateIndex(i);const o=a.VideoPreferences.prepare();let c=!1;const g=i.remoteStreamDescriptions();for(const S of g)o.some(u=>u.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(h.default.Modality)?(o.add(new m.default(S.attendeeId,1)),c=!0):o.add(new m.default(S.attendeeId,2)));c?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(i){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(i){super(i,NS.createConfig()),this.logger=i,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},7981698535:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(6110401981)),p=f(d(5116495551));let m=r(class Rd{partialCompare(s){return this.priority-s.priority}equals(s){return this.attendeeId===s.attendeeId&&this.targetSize===s.targetSize&&this.priority===s.priority&&this.degradationPreference===s.degradationPreference}clone(){return new Rd(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(s){switch(s){case h.default.Maximum:return Rd.MAXIMUM_BITRATE_KBPS;case h.default.High:return Rd.HIGH_BITRATE_KBPS;case h.default.Medium:return Rd.MID_BITRATE_KBPS;case h.default.Low:return Rd.LOW_BITRATE_KBPS}}constructor(s,n,e,t){this.attendeeId=s,this.priority=n,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:p.default.Balanced}},"VideoPreference");l.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},6700033168:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=f(d(4983545831));function p(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,c=new Map,g=new Map;for(const S of t){const u=e.transceiverController.getMidForGroupId(S);if(u===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);c.set(v,u),g.set(v,S)}for(const S of i){const u=new h.default,v=c.get(S.attendeeId);v!==void 0&&(u.mid=v,u.attendeeId=S.attendeeId,u.groupId=g.get(S.attendeeId),u.priority=Number.MAX_SAFE_INTEGER-S.priority,u.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),u.qualityAdaptationPreference=S.degradationPreference,o.push(u))}return o}r(p,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=p;let m=r(class jh{static default(){return new jh([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new jh([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=r(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),s=r(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=s;let n=r(class zh{static prepare(){return new s(new a)}static default(){return new zh(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new s(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=zh.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=n,l.default=n},6313276823:function(B,l,d){"use strict";var f=this&&this.__createBinding||(Object.create?function(I,A,w,O){O===void 0&&(O=w),Object.defineProperty(I,O,{enumerable:!0,get:function(){return A[w]}})}:function(I,A,w,O){O===void 0&&(O=w),I[O]=A[w]}),h=this&&this.__setModuleDefault||(Object.create?function(I,A){Object.defineProperty(I,"default",{enumerable:!0,value:A})}:function(I,A){I.default=A}),p=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var A={};if(I!=null)for(var w in I)w!=="default"&&Object.prototype.hasOwnProperty.call(I,w)&&f(A,I,w);return h(A,I),A},m=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(d(4846700713)),s=m(d(5147189764)),n=m(d(1847926377)),e=m(d(3560634922)),t=d(3756404293),i=p(d(1448262436)),o=m(d(2551170247)),c=m(d(5134603106)),g=m(d(7744958188)),S=m(d(6110401981)),u=m(d(7981698535)),v=d(6700033168),E=m(d(9837586225)),b=m(d(5116495551));let _=r(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),C=r(class vo{reset(){this.allHighestPolicy=new g.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=vo.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=vo.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new _,this.prevDownlinkStats=new _,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(A){this.tileController=A,this.logger.info("tileController bound")}setWantsResubscribeObserver(A){this.wantsResubscribeObserver=A}chooseRemoteVideoSources(A){var w;if(!(!((w=this.videoPreferences)===null||w===void 0)&&w.equals(A))){if(this.videoPreferences=A==null?void 0:A.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const O=new Array;for(const R of this.videoPreferences){const F=new o.default;F.attendee=new a.default,F.attendee.attendeeId=R.attendeeId,O.push(F)}this.allHighestPolicy.chooseRemoteVideoSources(O);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(A)}`)}}updateIndex(A){this.videoIndex=A,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(A),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const A=new Set;for(const F of this.videoIndex.remoteStreamDescriptions())A.add(F.attendeeId);const w=v.VideoPreferences.prepare(),O=A.size;let R=S.default.Maximum;O>8?R=S.default.Low:O>4&&(R=S.default.Medium);for(const F of A)w.add(new u.default(F,1,R));this.defaultVideoPreferences=w.build()}updateMetrics(A){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new _;const w=A.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=w.availableIncomingBitrate/1e3;for(const O in A.streamMetricReports){const R=Number.parseInt(O,10),F=A.streamMetricReports[R];F.direction===s.default.DOWNSTREAM&&F.mediaType===n.default.VIDEO&&(F.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=A.countPerSecond("nackCount",R)),F.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=A.countPerSecond("packetsLost",R)),F.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=A.bitsPerSecond("bytesReceived",R)/1e3))}}wantsResubscribe(){let A=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(A||(A=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?A||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),A||(A=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),A)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(A){this.observerQueue.add(A)}removeObserver(A){this.observerQueue.delete(A)}forEachObserver(A){for(const w of this.observerQueue)A(w)}setVideoPriorityBasedPolicyConfigs(A){this.videoPriorityBasedPolicyConfig=A}calculateOptimalReceiveStreams(){var A;const w=[],O=this.videoIndex.remoteStreamDescriptions();if(O.length===0||!((A=this.videoPreferences)===null||A===void 0)&&A.isEmpty()){this.optimalReceiveStreams=[];return}const R=this.rateProbeState;this.cleanBwPausedTiles(O),this.handleAppPausedStreams(w,O);const F=new Map;for(const Ge of this.getCurrentVideoPreferences())F.set(Ge.attendeeId,Ge);const V=O.filter(Ge=>F.has(Ge.attendeeId)),$=!this.streamsWithPreferenceDidChange(V),X=!this.startupPeriod&&$;if(X&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;V.sort((Ge,it)=>Ge.maxBitrateKbps===it.maxBitrateKbps?Ge.streamId-it.streamId:Ge.maxBitrateKbps-it.maxBitrateKbps);for(const Ge of V)(Ge.avgBitrateKbps===0||Ge.avgBitrateKbps>Ge.maxBitrateKbps)&&(Ge.attendeeId.endsWith(e.default.Modality)&&Ge.maxBitrateKbps<100?Ge.maxBitrateKbps=Ge.avgBitrateKbps:Ge.avgBitrateKbps=Ge.maxBitrateKbps);const Y=new Set;for(const Ge of this.getCurrentVideoPreferences()){const it=V.filter(xe=>xe.attendeeId===Ge.attendeeId);if(it.length<3)continue;let Dt=15,wt=320*480;it.forEach(xe=>{Dt=Math.max(Dt,xe.maxFrameRate),wt=Math.max(wt,xe.totalPixels())}),it.sort((xe,et)=>{if(Ge.degradationPreference===b.default.MaintainResolution)return Math.abs(xe.maxFrameRate-et.maxFrameRate)<2?xe.totalPixels()-et.totalPixels():xe.maxFrameRate-et.maxFrameRate;if(Ge.degradationPreference===b.default.MaintainFramerate)return xe.totalPixels()===et.totalPixels()?xe.maxFrameRate-et.maxFrameRate:xe.totalPixels()-et.totalPixels();{const Ft=r(Gt=>Gt.avgBitrateKbps*Math.pow(2,5*Gt.maxFrameRate/Dt*Math.pow(4,Gt.totalPixels()/wt)),"weighByFramerate");return Ft(xe)-Ft(et)}});let Pe;for(const xe of it){if(Pe!==void 0&&(xe.maxFrameRate<Pe.maxFrameRate&&Math.abs(Pe.maxFrameRate-xe.maxFrameRate)>2||xe.totalPixels()<Pe.totalPixels())){Y.add(xe.streamId);continue}Pe=xe}}const ne=V.filter(Ge=>!Y.has(Ge.streamId));this.logger.info(`Filtered to ${JSON.stringify(ne)}`);const ie={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ie.targetDownlinkBitrate=this.determineTargetRate();const ge=this.subscribedReceiveSet.size(),Ie=this.downlinkStats.bandwidthEstimateKbps,We=!this.videoPriorityBasedPolicyConfig.allowSubscribe(ge,Ie);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=vo.MIN_TIME_BETWEEN_SUBSCRIBE_MS,X&&We))return;const ct=this.priorityPolicy(ie,ne,w),Ae=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Fe=0;if(!Ae&&!this.startupPeriod&&$?this.rateProbeState==="Probing"?Fe=this.handleProbe(w,ie.targetDownlinkBitrate):ie.deltaToNextUpgrade!==0&&(Fe=this.maybeOverrideOrProbe(w,ie,ct)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=V,this.videoPreferencesUpdated=!1,Fe===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ie.targetDownlinkBitrate;return}if(Fe===2){const Ge=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(V,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Ge);return}this.optimalNonPausedReceiveStreams=w.slice();const Xe=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(V,w),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==R||this.optimalReceiveStreams.length!==w.length||Xe!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(O,ie.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ie.targetDownlinkBitrate,this.optimalReceiveStreams=w.slice()}calculateOptimalReceiveSet(){const A=new c.default;this.calculateOptimalReceiveStreams();for(const w of this.optimalReceiveStreams)A.add(w.streamId);if(!this.optimalReceiveSet.equal(A)){const w=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(A)} subscribedRate:${w}`)}this.optimalReceiveSet=A}determineTargetRate(){let A=0;const w=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=w),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>vo.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||w-this.firstEstimateTimestamp>vo.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?A=vo.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<vo.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),A=this.downlinkStats.usedBandwidthKbps+vo.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):A=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?A=vo.DEFAULT_BANDWIDTH_KBPS:A=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-vo.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*vo.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,A=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,A>15e3&&this.logger.warn("bwe: "+A+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(A,15e3)}setProbeState(A){if(this.rateProbeState===A)return!1;const w=Date.now();switch(A){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||w-this.lastProbeTimestamp>vo.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=w;else return!1;break;case"Probing":if(w-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=w,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,vo.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+A+" from "+this.rateProbeState),this.rateProbeState=A,!0}upgradeToStream(A,w){for(let O=0;O<A.length;O++)if(A[O].groupId===w.groupId){const R=w.avgBitrateKbps-A[O].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(A[O])+" to "+w),this.lastUpgradeRateKbps=R,A[O]=w,R}return A.push(w),this.lastUpgradeRateKbps=w.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(A,w){if(Date.now()-this.lastProbeTimestamp>vo.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>vo.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(vo.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const O=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(A)||w>O?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=vo.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(A,w,O){const R=this.chosenStreamsSameAsLast(A);let F=0;const V=w.targetDownlinkBitrate>vo.LOW_BITRATE_THRESHOLD_KBPS?vo.TARGET_RATE_CHANGE_TRIGGER_PERCENT:vo.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,$=w.targetDownlinkBitrate*V/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!R&&Math.abs(w.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<$?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),F=1):this.targetRateBaselineForDeltaCheckKbps=w.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,F;if(R||F===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(A,O),F=0);break}else this.setProbeState("Not Probing");return F}calculateSubscribeRate(A){let w=0;for(const O of A)!this.pausedStreamIds.contain(O.streamId)&&!this.pausedBwAttendeeIds.has(O.attendeeId)&&(w+=O.maxBitrateKbps);return w}handleAppPausedStreams(A,w){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const O=this.tileController.getAllRemoteVideoTiles();for(const R of O){const F=R.state();if(F.paused&&!this.pausedBwAttendeeIds.has(F.boundAttendeeId)){let V=w.length;for(;V--;)w[V].attendeeId===F.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+F.boundAttendeeId+" streamId: "+w[V].streamId),this.pausedStreamIds.add(w[V].streamId),this.subscribedReceiveSet.contain(w[V].streamId)&&A.push(w[V]),w.splice(V,1))}}}processBwPausedStreams(A,w){if(!this.tileController){this.logger.warn("tileController not found!");return}const O=this.getCurrentVideoPreferences();if(O&&this.shouldPauseTiles){const R=this.tileController.getAllVideoTiles();for(const F of O){const V=this.getVideoTileForAttendeeId(F.attendeeId,R),$=(V==null?void 0:V.state().paused)||!1;if(w.some(X=>X.attendeeId===F.attendeeId))$&&this.pausedBwAttendeeIds.has(F.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBeUnpausedByDownlinkPolicy(V.id())}),this.tileController.unpauseVideoTile(V.id()),this.pausedBwAttendeeIds.delete(F.attendeeId));else{const X=A.some(Y=>Y.attendeeId===F.attendeeId);if(V&&X){const Y=this.optimalReceiveStreams.find(ne=>ne.attendeeId===F.attendeeId);Y!==void 0&&($||(this.logger.info(`bwe: pausing streamId ${Y.streamId} attendee ${F.attendeeId} due to bandwidth`),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(V.id())}),this.tileController.pauseVideoTile(V.id())),w.push(Y)),this.pausedBwAttendeeIds.add(F.attendeeId)}else if(X){const Y=this.tileController.addVideoTile();Y.bindVideoStream(F.attendeeId,!1,null,0,0,0,null),this.forEachObserver(ne=>{ne.tileWillBePausedByDownlinkPolicy(Y.id())}),Y.pause(),this.logger.info(`bwe: Created video tile ${Y.id()} for bw paused attendee ${F.attendeeId}`),this.pausedBwAttendeeIds.add(F.attendeeId)}}}}}cleanBwPausedTiles(A){if(!this.tileController){this.logger.warn("tileController not found!");return}const w=this.tileController.getAllRemoteVideoTiles(),O=this.getCurrentVideoPreferences();for(const R of w){const F=R.state();F.boundVideoStream||(A.some(V=>V.attendeeId===F.boundAttendeeId)?O!==void 0&&!O.some(V=>V.attendeeId===F.boundAttendeeId)&&this.tileController.removeVideoTile(F.tileId):(this.tileController.removeVideoTile(F.tileId),this.logger.info(`bwe: Removed video tile ${F.tileId} for bw paused attendee ${F.boundAttendeeId}`)))}}priorityPolicy(A,w,O){let R;const F=this.getCurrentVideoPreferences(),V=F.highestPriority();let $,X=V;for(;X!==-1;){$=-1;for(const Y of F)if(Y.priority===X)for(const ne of w)ne.attendeeId===Y.attendeeId&&(O.some(ie=>ie.groupId===ne.groupId)||(A.chosenTotalBitrate+ne.avgBitrateKbps<=A.targetDownlinkBitrate?(O.push(ne),A.chosenTotalBitrate+=ne.avgBitrateKbps):A.deltaToNextUpgrade===0&&(A.deltaToNextUpgrade=ne.avgBitrateKbps,R=ne)));else if(Y.priority>X){$=Y.priority;break}for(const Y of F)if(Y.priority===X){for(const ne of w)if(ne.attendeeId===Y.attendeeId){const ie=O.findIndex(ge=>ge.groupId===ne.groupId&&ge.maxBitrateKbps<=ne.maxBitrateKbps&&ge.avgBitrateKbps<ne.avgBitrateKbps);if(ie!==-1){const ge=ne.avgBitrateKbps-O[ie].avgBitrateKbps;this.hasSimulcastStreams(w,ne.attendeeId,ne.groupId)&&this.canUpgrade(ne.avgBitrateKbps,Y.targetSize,Y.targetSizeToBitrateKbps(Y.targetSize),ne.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${ne.attendeeId} group: ${ne.groupId} has simulcast and can upgrade avgBitrate: ${ne.avgBitrateKbps} target: ${Y.targetSizeToBitrateKbps(Y.targetSize)} targetTotalBitrate: ${A.targetDownlinkBitrate}`),A.chosenTotalBitrate+ge<=A.targetDownlinkBitrate?(A.chosenTotalBitrate+=ge,O[ie]=ne):A.deltaToNextUpgrade===0&&(A.deltaToNextUpgrade=ge,R=ne)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(Y.priority>X)break;if(X===V&&A.deltaToNextUpgrade!==0)break;X=$}return R}getVideoTileForAttendeeId(A,w){for(const O of w)if(O.state().boundAttendeeId===A)return O;return null}canUpgrade(A,w,O,R){let F=!1;return(w===S.default.High||!R&&A<=O||R&&w===S.default.Medium&&A<=O)&&(F=!0),F?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${A} targetBitrateKbps: ${O}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${A} targetBitrateKbps: ${O}`),!1)}hasSimulcastStreams(A,w,O){let R=0;for(const F of A)F.attendeeId===w&&F.groupId===O&&R++;return this.logger.info(`bwe: attendeeId: ${w} groupId: ${O} hasSimulcastStreams: streamCount: ${R}`),R>1}streamsWithPreferenceDidChange(A){if(this.previousStreamsWithPreference===void 0||A.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const w of A)if(this.previousStreamsWithPreference.find(R=>R.groupId===w.groupId&&R.streamId===w.streamId&&R.maxBitrateKbps===w.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(A){if(this.optimalNonPausedReceiveStreams.length!==A.length)return!1;for(const w of this.optimalNonPausedReceiveStreams)if(!A.some(O=>O.streamId===w.streamId))return!1;return!0}policyStateLogStr(A,w){const O=this.calculateSubscribeRate(this.optimalReceiveStreams),R={targetBitrate:w,subscribedRate:O,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let F="remoteInfos: [";for(const $ of A)F+=`{grpId:${$.groupId} strId:${$.streamId} maxBr:${$.maxBitrateKbps} avgBr:${$.avgBitrateKbps}}, `;F+="]";let V=`bwe: optimalReceiveSet ${JSON.stringify(R)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${F}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(V+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?V+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:V+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,V}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(A){this.serverSideNetworkAdaption=A,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let A=this.getCurrentVideoPreferences();return A||(A=v.VideoPreferences.prepare().build()),A}wantsAllTemporalLayersInIndex(){return!0}constructor(A,w=E.default.Default){this.logger=A,this.videoPriorityBasedPolicyConfig=w,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===i.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=i.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=C,C.DEFAULT_BANDWIDTH_KBPS=2800,C.STARTUP_PERIOD_MS=6e3,C.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,C.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,C.LOW_BITRATE_THRESHOLD_KBPS=300,C.MIN_TIME_BETWEEN_PROBE_MS=5e3,C.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,C.MAX_HOLD_BEFORE_PROBE_MS=3e4,C.MAX_ALLOWED_PROBE_TIME_MS=6e4,C.SPURIOUS_PACKET_LOST_THRESHOLD=2,C.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},9837586225:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1448262436));let p=r(class mc{allowSubscribe(a,s){let n=0;const e=this.currentNetworkEvent;if(s>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=s,!0;if(s<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=s,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,s){let n=mc.MINIMUM_DELAY_MS;const e=mc.MAXIMUM_DELAY_MS-mc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:n+=e*t*(1+s/10),n=Math.min(mc.MAXIMUM_DELAY_MS,n);break}return n}constructor(a=0,s=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=s,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.BandwidthProbingAndRemoteVideoQualityAdaption,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,s<0?s=0:s>1&&(s=1),this.networkIssueRecoveryDelayFactor=s}},"VideoPriorityBasedPolicyConfig");l.default=p,p.MINIMUM_DELAY_MS=2e3,p.MAXIMUM_DELAY_MS=8e3,p.Default=new p(0,0),p.UnstableNetworkPreset=new p(0,1),p.StableNetworkPreset=new p(1,0)},5116495551:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var d;(function(f){f[f.Balanced=0]="Balanced",f[f.MaintainFramerate=1]="MaintainFramerate",f[f.MaintainResolution=2]="MaintainResolution"})(d=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=d},8481249111:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{create(){const h={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{h.paused=!0},play:()=>(h.paused=!1,Promise.resolve())};return h}},"NoOpVideoElementFactory");l.default=d},6672418579:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return d(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(p){this.canvas=p,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=f},7145536260:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(6672418579)),m=h(d(1902736443)),a=15;let s=r(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return f(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return f(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.framerate=t.frameRate,this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new p.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new m.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>f(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let g=[];g.push(this.sourceBuffers[0]);try{for(const C of this.processors)g=yield C.process(g)}catch{this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()});return}this.destBuffers=g;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(I=>{I.processingDidFailToStart&&I.processingDidFailToStart()}));return}const u=S.width,v=S.height;u!==0&&v!==0&&(this.canvasOutput.width!==u&&this.canvasOutput.height!==v&&(this.canvasOutput.width=u,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,u,v,0,0,u,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(C=>{C.processingDidStart&&C.processingDidStart()})));const E=performance.now()-c,b=1e3*2/this.framerate-E,_=Math.max(0,1e3/this.framerate-E);b<=0&&this.forEachObserver(C=>{C.processingLatencyTooHigh&&C.processingLatencyTooHigh(E)}),yield this.timer.start(_,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");l.default=s},1902736443:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{createWorkerTimer(){try{const p=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(p))}catch{}}start(p,m){return d(this,void 0,void 0,function*(){this.callback=m,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(p)):this.lastTimeout=setTimeout(()=>{this.callback()},p)})}destroy(){return d(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=f},5709738441:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8351168186)),m=h(d(7145536260));let a=r(class LS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new LS(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return f(this,void 0,void 0,function*(){return this.device})}transformStream(n){return f(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return f(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}get framerate(){return this.pipe.framerate}set framerate(n){this.pipe.framerate=n}constructor(n,e,t,i=new p.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},7000795223:function(B,l){"use strict";var d=this&&this.__awaiter||function(h,p,m,a){function s(n){return n instanceof m?n:new m(function(e){e(n)})}return r(s,"adopt"),new(m||(m=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(g){e(g)}}r(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(g){e(g)}}r(i,"rejected");function o(c){c.done?n(c.value):s(c.value).then(t,i)}r(o,"step"),o((a=a.apply(h,p||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let f=r(class{process(p){return d(this,void 0,void 0,function*(){return p})}destroy(){return d(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=f},2887752350:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let d=r(class{getPromise(){return this.promise}resolvePromise(h){this.resolve(h)}resolveAndReplacePromise(h){this.resolve(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}rejectPromise(h){this.reject(h)}rejectAndReplacePromise(h){this.reject(h),this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}constructor(){this.promise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}},"DeferredPromise");l.DeferredPromise=d},8023592660:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(m,a,s,n){function e(t){return t instanceof s?t:new s(function(i){i(t)})}return r(e,"adopt"),new(s||(s=Promise))(function(t,i){function o(S){try{g(n.next(S))}catch(u){i(u)}}r(o,"fulfilled");function c(S){try{g(n.throw(S))}catch(u){i(u)}}r(c,"rejected");function g(S){S.done?t(S.value):e(S.value).then(o,c)}r(g,"step"),g((n=n.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=d(5513317584);let p=r(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return f(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const s=document.createElement("canvas");s.width=this.streamParameters.width,s.height=this.streamParameters.height,s.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return f(this,void 0,void 0,function*(){const s=a.backgroundReplacement.backgroundImageURL,n=a.backgroundReplacement.defaultColor;if(s)try{const e=yield this.loadImage(s);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(a){const s=document.createElement("canvas"),n=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,n.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}resizeAndSetReplacementColor(a){const s=document.createElement("canvas"),n=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,n.fillStyle=a,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}loadImage(a){return f(this,void 0,void 0,function*(){const n=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(a,s){this.streamParameters=a,this.outputCanvas=s,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=p},5513317584:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_FX_SPEC=l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const d="/ml_media_fx/otherassets";l.WORKER_PATH=`${d}/worker.js`,l.FXLIB_PATH=`${d}/fxlib.js`,l.DEFAULT_VIDEO_FX_SPEC={paths:{cdnBasePath:l.CDN_BASE_PATH,workerPath:l.WORKER_PATH,fxLibPath:l.FXLIB_PATH}}},2403769553:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(v,E,b,_){function C(I){return I instanceof b?I:new b(function(A){A(I)})}return r(C,"adopt"),new(b||(b=Promise))(function(I,A){function w(F){try{R(_.next(F))}catch(V){A(V)}}r(w,"fulfilled");function O(F){try{R(_.throw(F))}catch(V){A(V)}}r(O,"rejected");function R(F){F.done?I(F.value):C(F.value).then(w,O)}r(R,"step"),R((_=_.apply(v,E||[])).next())})},h=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});const p=d(4179955699),m=d(6582301018),a=d(8113008952),s=h(d(8351168186)),n=h(d(7338764361)),e=d(840544383),t=h(d(8066052849)),i=h(d(6672418579)),o=d(2887752350),c=d(8023592660),g=d(5513317584),S=d(615959602);let u=r(class Pd{process(E){return f(this,void 0,void 0,function*(){return E})}fxProcess(E){return f(this,void 0,void 0,function*(){const b=E[0].asCanvasElement();this.didStreamParametersChange(b)&&(yield this.adjustProcessorForNewStreamParameters(b));try{yield this.manageSegmentationMask(b)}catch(_){throw this.logger.error(_),new Error("Video stream could not be processed")}return yield this.renderer.render(b,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return f(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return f(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return f(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:g.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return f(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const b=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(b),this.segmentationRateManager.completeSegmentation()}}catch(b){throw this.logger.error(b.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return f(this,void 0,void 0,function*(){Pd.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:g.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setVideoFxSpec(E){E.paths&&(this.videoFxSpec.paths=E.paths)}setEffectConfig(E){return f(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const b=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(b)}catch(_){throw this.logger.error(_.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}b.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(b),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,b),this.effectConfig=b,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return f(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return f(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(_){throw this.logger.error(_.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const b=E.backgroundReplacement.defaultColor;if(b&&b!=="black"&&b!=="#000000"&&b!=="#000"){if(b.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(b))throw new Error(`Invalid hexadecimal color code for default replacement background: ${b}`);const C=document.createElement("canvas").getContext("2d"),I=C.fillStyle;if(C.fillStyle=b,C.fillStyle===I)throw new Error(`Invalid color for default replacement background: ${b}`)}})}validateProcessingBudgetPerFrame(E){if(E<g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${g.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${g.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return f(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,b){const _=new URL(E);for(const[C,I]of Object.entries(b))if(I!==void 0){const A=encodeURIComponent(C),w=encodeURIComponent(I);_.searchParams.set(A,w)}return _.toString()}loadEngineWorker(E){return f(this,void 0,void 0,function*(){try{const b=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.workerPath,E);this.engineWorker=yield m.loadWorker(b,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",_=>this.engineWorkerReceiver(_))}catch(b){throw this.logger.error(b.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return f(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:g.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:this.videoFxSpec.paths.cdnBasePath,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return f(this,void 0,void 0,function*(){const b=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.fxLibPath,E),_={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const C=yield p.fetchWithBehavior(b,_,{});if(!C.ok)throw new Error("Fetch failed.");const I=window.URL.createObjectURL(yield C.blob());yield new Promise((A,w)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",I),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",A),this.fxLibScript.addEventListener("error",w),document.body.appendChild(this.fxLibScript)})}catch(C){throw this.logger.error(C.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const b=E.data;switch(b.msg){case g.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(b.payload);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(b.payload.output);break;case g.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case g.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(b)}`);break}}settleEngineBuildPromise(E){E!==g.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return f(this,void 0,void 0,function*(){let _=!0;const C=r((w,O)=>{w&&(E.info(O),_=!1)},"checkEnv");C(typeof globalThis>"u","Browser does not have globalThis."),C(!a.supportsWorker(globalThis,E),"Browser does not support web workers."),C(!a.supportsWASM(globalThis,E),"Browser does not support wasm."),C(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const I=new s.default;C(!I.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const A=r(()=>f(this,void 0,void 0,function*(){if(b)try{const w=new Pd(E);yield w.loadAssets(),yield w.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(_?yield A():!1)})}static create(E,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,C=arguments.length>3?arguments[3]:void 0;return f(this,void 0,void 0,function*(){const I=new Pd(E,_);C&&I.setVideoFxSpec(C);try{return yield I.loadAssets(),yield I.setEffectConfig(b),I}catch(A){throw E.error(A.toString()),I.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,b){return E.backgroundBlur.isEnabled===b.backgroundBlur.isEnabled&&E.backgroundBlur.strength===b.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===b.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===b.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===b.backgroundReplacement.isEnabled}constructor(E,b=g.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,_){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas),this.videoFxSpec=g.DEFAULT_VIDEO_FX_SPEC;try{this.validateProcessingBudgetPerFrame(b)}catch(C){throw this.logger.error(C),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${b}`)}_&&(this.eventController=_),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,b),this.streamParameters={framerate:g.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:g.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:g.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:g.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},Pd.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${Pd.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${b}`)}},"VideoFxProcessor");l.default=u,u.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},615959602:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const f=d(5513317584);let h=r(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=f.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,a){this.logger=m,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=f.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},2551170247:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"VideoSource");l.default=d},5134603106:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class $h{add(h){this.ids.add(h)}array(){return Array.from(this.ids.values()).sort((p,m)=>p-m)}contain(h){return this.ids.has(h)}forEach(h){this.ids.forEach(h)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(h){if(!h)return this.ids.size===0;const p=this.array(),m=h.array();if(p.length!==m.length)return!1;for(let a=0;a<p.length;a++)if(p[a]!==m[a])return!1;return!0}clone(){return new $h(this.array())}remove(h){this.ids.delete(h)}toJSON(){return this.array()}truncate(h){const p=this.array();return new $h(p.splice(0,h))}constructor(h){this.ids=new Set(h)}},"DefaultVideoStreamIdSet");l.default=d},5216544790:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),p=f(d(5134603106)),m=f(d(4202624657));let a=r(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new p.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:c,mediaType:g}=i;o!==n&&g===h.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:c}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===n||v.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),g=new Map;let S=0;c.forEach((v,E)=>{g.set(E,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(c,e,S,i,g),this.trySelectHighBitrateForAttendees(c,o,S,i,g);const u=new p.default;for(const v of g.values())u.add(v.streamId);return u}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new p.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new p.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const c of e){if(t>=i)break;if(n.has(c)){const g=n.get(c);for(const S of g.reverse())if(t-o.get(c).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(c).maxBitrateKbps+S.maxBitrateKbps,o.set(c,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,c)=>o.maxBitrateKbps>c.maxBitrateKbps?1:o.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},7562203998:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=d(5391134031),p=f(d(5216544790)),m=f(d(4202624657));let a=r(class kd extends p.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,c=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const g=new m.default;g.maxBitrateKbps=o,g.maxFrameRate=c,g.disabledByUplinkPolicy=o===0,g.rid=n[i].rid,o!==0&&(g.timeEnabled=Date.now()),this._localStreamInfos.push(g),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===kd.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,kd.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,kd.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,kd.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,kd.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},4202624657:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=d(5391134031);let h=r(class FS{clone(){const m=new FS;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=f.SdkStreamDescriptor.create();return m.mediaType=f.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,a,s,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=a,this.streamId=s,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},8599164152:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{notifyObservers(h,p){for(const m of this.observerQueue)m.videoElementResolutionChanged(h,p)}registerObserver(h){this.observerQueue.add(h)}removeObserver(h){this.observerQueue.delete(h)}bindVideoElement(h){if(this.element=h,!this.element){this.resizeObserver.unobserve(this.element);return}this.resizeObserver.observe(this.element)}constructor(){this.observerQueue=new Set,this.resizeObserver=new ResizeObserver(h=>{for(const p of h){const{width:m,height:a}=p.contentRect;this.notifyObservers(m,a)}})}},"DefaultVideoElementResolutionMonitor");l.default=d},1140481832:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8351168186)),p=f(d(4599834734)),m=f(d(5449946032));let a=r(class Ba{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Ba.setVideoElementFlag(e,"disablePictureInPicture",t),Ba.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",Ba.setVideoElementFlag(n,"disablePictureInPicture",!1),Ba.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Ba.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,c,g,S){let u=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new p.default(n).hasModality(p.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),u=!0),this.tileState.boundExternalUserId!==g&&(this.tileState.boundExternalUserId=g,u=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,u=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,u=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,u=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,u=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,u=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,u=!0),u&&this.sendTileStateUpdate()}bindVideoElement(n){var e;let t=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,(e=this.resolutionMonitor)===null||e===void 0||e.bindVideoElement(this.tileState.boundVideoElement),t=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,t=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,t=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),t&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Ba.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Ba.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i,o=void 0){this.tileController=t,this.devicePixelRatioMonitor=i,this.resolutionMonitor=o,this.tileState=new m.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},5449946032:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class BS{clone(){const h=new BS;return h.tileId=this.tileId,h.localTile=this.localTile,h.isContent=this.isContent,h.active=this.active,h.paused=this.paused,h.poorConnection=this.poorConnection,h.boundAttendeeId=this.boundAttendeeId,h.boundExternalUserId=this.boundExternalUserId,h.boundVideoStream=this.boundVideoStream,h.boundVideoElement=this.boundVideoElement,h.nameplate=this.nameplate,h.videoStreamContentWidth=this.videoStreamContentWidth,h.videoStreamContentHeight=this.videoStreamContentHeight,h.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,h.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,h.devicePixelRatio=this.devicePixelRatio,h.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,h.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,h.streamId=this.streamId,h.groupId=this.groupId,h}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=d},9251190564:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(i,o,c,g){function S(u){return u instanceof c?u:new c(function(v){v(u)})}return r(S,"adopt"),new(c||(c=Promise))(function(u,v){function E(C){try{_(g.next(C))}catch(I){v(I)}}r(E,"fulfilled");function b(C){try{_(g.throw(C))}catch(I){v(I)}}r(b,"rejected");function _(C){C.done?u(C.value):S(C.value).then(E,b)}r(_,"step"),_((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8981226922)),m=h(d(2343182956)),a=h(d(2827699573)),s=d(903520651),n=h(d(8599164152)),e=h(d(1140481832));let t=r(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return f(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const o=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,o.destroy()})}bindVideoElement(o,c){const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${o}`);return}g.bindVideoElement(c)}unbindVideoElement(o){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const g=this.getVideoTile(o);if(g===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${o}`);return}this.logger.info("Unbinding the video element"),this.notifyRemoteObserversOfUnbound(g.state().boundAttendeeId);const S=g.stateRef().boundVideoElement;g.bindVideoElement(null),c&&(this.logger.info("Cleaning up the video element"),e.default.disconnectVideoStreamFromVideoElement(S,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===p.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const o=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),o.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(o){const c=this.getVideoTile(o);c&&(this.currentPausedTilesByIds.has(o)||(this.audioVideoController.pauseReceivingStream(c.stateRef().streamId),this.currentPausedTilesByIds.add(o)),c.pause())}unpauseVideoTile(o){const c=this.getVideoTile(o);c&&(this.currentPausedTilesByIds.has(o)&&(this.audioVideoController.resumeReceivingStream(c.stateRef().streamId),this.currentPausedTilesByIds.delete(o)),c.unpause())}getVideoTile(o){return this.tileMap.has(o)?this.tileMap.get(o):null}getVideoTileArea(o){const c=o.state();let g=0,S=0;return c.boundVideoElement&&(g=c.boundVideoElement.clientHeight*c.devicePixelRatio,S=c.boundVideoElement.clientWidth*c.devicePixelRatio),g*S}getAllRemoteVideoTiles(){const o=new Array;return this.tileMap.forEach((c,g)=>{(!this.currentLocalTile||g!==this.currentLocalTile.id())&&o.push(c)}),o}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const c=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const g=this.tileFactory.makeTile(c,o,this,this.devicePixelRatioMonitor,this.createResolutionMonitor(c));return this.tileMap.set(c,g),g}removeVideoTile(o){if(!this.tileMap.has(o))return;const c=this.tileMap.get(o);this.currentLocalTile===c&&(this.currentLocalTile=null),c.destroy(),this.tileMap.delete(o),this.audioVideoController.forEachObserver(g=>{s.Maybe.of(g.videoTileWasRemoved).map(S=>S.bind(g)(o))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(o){const c=[];for(const g of this.getAllVideoTiles()){const S=g.state();S.boundAttendeeId===o&&(this.removeVideoTile(S.tileId),c.push(S.tileId))}return c}removeAllVideoTiles(){const o=Array.from(this.tileMap.keys());for(const c of o)this.removeVideoTile(c)}sendTileStateUpdate(o){this.audioVideoController.forEachObserver(c=>{s.Maybe.of(c.videoTileDidUpdate).map(g=>g.bind(c)(o))})}haveVideoTilesWithStreams(){for(const o of this.getAllVideoTiles())if(o.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(o){return!!this.getVideoTileForAttendeeId(o)}getVideoTileForAttendeeId(o){for(const c of this.getAllVideoTiles())if(c.state().boundAttendeeId===o)return c}captureVideoTile(o){const c=this.getVideoTile(o);return c?c.capture():null}registerVideoTileResolutionObserver(o){this.resolutionObservers.add(o)}removeVideoTileResolutionObserver(o){this.resolutionObservers.delete(o)}notifyResolutionObserversOfChange(o,c,g){for(const S of this.resolutionObservers)S.videoTileResolutionDidChange(o,c,g)}notifyRemoteObserversOfUnbound(o){for(const c of this.resolutionObservers)c.videoTileUnbound(o)}createResolutionMonitor(o){const c=new class{videoElementResolutionChanged(S,u){const v=this.controller.getVideoTile(this.tileId);if(v){const E=v.state().boundAttendeeId;this.controller.notifyResolutionObserversOfChange(E,S,u)}}constructor(S,u){this.controller=S,this.tileId=u}}(this,o),g=new n.default;return g.registerObserver(c),g}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(o,c,g){this.tileFactory=o,this.audioVideoController=c,this.logger=g,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.resolutionObservers=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=c.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=t},1695899970:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1140481832));let p=r(class{makeTile(a,s,n,e,t){return new h.default(a,s,n,e,t)}},"DefaultVideoTileFactory");l.default=p},7699083583:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{},"BitrateParameters");l.default=d},3361826027:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8438160003)),p=f(d(2962876954)),m=d(903520651),a=f(d(8261422434)),s=f(d(7699083583));let n=r(class ra{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new s.default,new s.default,new s.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,c,g)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,c=t.numberOfParticipants(),g=c>=0&&c<=2,S=this.shouldDisableSimulcast!==g;this.numSenders=i,this.shouldDisableSimulcast=g,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of p.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?ra.kHiTargetBitrateKbpsFhd:ra.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?ra.kMidTargetBitrateKbpsFhd:ra.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?ra.kLowTargetBitrateKbpsFhd:ra.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,c=p.default.NAME_ARR_ASCENDING,g=t;let S=this.shouldDisableSimulcast?1:4;for(let u=0;u<c.length;u++){const v=c[u];i.set(v,{rid:v,active:g[u]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:g[u]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(c=>{i+=`{ rid: ${c.rid} active:${c.active} maxBitrate:${c.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{m.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=ra.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=ra.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=ra.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},4134174226:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(1438956810));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,s,n,e,t,i,o,c,g,S,u,v;const E=new Map,b=1e3,_=h.default.NAME_ARR_ASCENDING;return E.set(_[0],{rid:_[0],active:!0,scaleResolutionDownBy:((s=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||s===void 0?void 0:s.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*b,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),E.set(_[1],{rid:_[1],active:!0,scaleResolutionDownBy:((c=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((S=(g=this.encodingParams)===null||g===void 0?void 0:g.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*b,maxFramerate:(v=(u=this.encodingParams)===null||u===void 0?void 0:u.high)===null||v===void 0?void 0:v.maxFramerate}),E}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,s){this.encodingParams=s,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=p},3423911843:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8261422434));let m=r(class Nd{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new p.default(0,0,0,0,!1),this.parametersInEffect=new p.default(0,0,0,0,!1),this.encodingParamMap.set(Nd.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=s.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=s.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let s=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(s=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new p.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,s,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let s=640;return this.getNumberOfPublishedVideoSources()>4&&(s=320),s}captureHeight(){let s=384;return this.getNumberOfPublishedVideoSources()>4&&(s=192),s}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let s=0;return this.getNumberOfPublishedVideoSources()<=2?s=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?s=this.idealMaxBandwidthKbps*2/3:s=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(s)}setIdealMaxBandwidthKbps(s){this.idealMaxBandwidthKbps=s}setHasBandwidthPriority(s){this.hasBandwidthPriority=s}setTransceiverController(s){this.transceiverController=s}setSVCEnabled(s){var n;this.enableSVC=s,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${s}}`)}setHighResolutionFeatureEnabled(s){this.enableHighResolutionFeature=s}updateTransceiverController(){return f(this,void 0,void 0,function*(){const s=this.getStreamCaptureSetting();if(!s)return;const n=this.calculateEncodingParameters(s);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(Nd.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(s){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return s.maxBitrate!==(t==null?void 0:t.maxBitrate)||s.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(s==null?void 0:s.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(s){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,c=720;if(s.height!==void 0&&s.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=Nd.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Nd.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(c=360),o=Math.max(Math.min(s.height,s.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${s.width}x${s.height}. New dimension is ${s.width/o}x${s.height/o}`)),this.enableSVC){let g;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?g="L1T1":g="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${c}  scalabilityMode: ${g}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:g}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var s,n,e,t;return(t=(e=(n=(s=this.transceiverController)===null||s===void 0?void 0:s.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var s;return(s=this.numberOfPublishedVideoSources)!==null&&s!==void 0?s:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(s,n){const e=s??n,t=e.length>0&&Nd.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(s,n=!0,e=void 0,t=void 0){this.selfAttendeeId=s,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},9128807920:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8261422434));let p=r(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=p},1622249334:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function d(h){return h.map(p=>typeof p=="object"?JSON.stringify(p):`${p}`).join(" ")}r(d,"stringify");let f=r(class{debug(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.debug(d(m))}info(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.info(d(m))}warn(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.warn(d(m))}error(){for(var p=arguments.length,m=new Array(p),a=0;a<p;a++)m[a]=arguments[a];this.base.error(d(m))}constructor(p){this.base=p}},"LoggerAdapter");l.default=f},8525594090:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(i,o,c,g){function S(u){return u instanceof c?u:new c(function(v){v(u)})}return r(S,"adopt"),new(c||(c=Promise))(function(u,v){function E(C){try{_(g.next(C))}catch(I){v(I)}}r(E,"fulfilled");function b(C){try{_(g.throw(C))}catch(I){v(I)}}r(b,"rejected");function _(C){C.done?u(C.value):S(C.value).then(E,b)}r(_,"step"),_((g=g.apply(i,o||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const p=d(8019356695),m=d(840544383),a=h(d(8066052849)),s=h(d(1622249334)),n=h(d(282836061)),e=h(d(9502253674));let t=r(class pa{static isSupported(o,c){var g,S;const u=pa.defaultFetchBehavior(),v=c!=null&&c.logger?new s.default(c.logger):void 0,E={fetchBehavior:u,logger:v};if(m.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(g=c==null?void 0:c.logger)===null||g===void 0||g.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=c==null?void 0:c.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return p.VoiceFocus.isSupported(pa.augmentSpec(o),E)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;var v,E,b;return f(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const _=((b=(E=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||b===void 0?void 0:b.EchoReduction)==="AVAILABLE",C=g&&g.supported===!0&&g.model.name==="ns_es"&&!_,I=o.name==="ns_es"&&!_;if(C||I)throw new Error("Echo Reduction requested but not enabled.");const A=new pa(o,c,g);return yield A.init(),A})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f(this,void 0,void 0,function*(){return new pa(o,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,c){return f(this,void 0,void 0,function*(){if(this.supported)try{const[S,u]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new n.default(o,S,u,v)}catch{return}})}static destroyVoiceFocus(o){var c;return f(this,void 0,void 0,function*(){(c=o==null?void 0:o.vf)===null||c===void 0||c.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:pa.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return f(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return p.VoiceFocus.configure(this.spec,c)})}init(){var o;return f(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(g){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${g}`),this.supported=!1}})}createVoiceFocus(o,c){return f(this,void 0,void 0,function*(){const g=new e.default;return this.vf=yield p.VoiceFocus.init(o,{delegate:g,preload:c,logger:this.vfLogger}),[this.vf,g]})}allocateVoiceFocus(o){return f(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=pa.majorMinorVersion()||"unknown",c=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(c)}`}}constructor(o,{preload:c=!0,logger:g,fetchBehavior:S=pa.defaultFetchBehavior()},u){this.spec=o,this.supported=!0,this.logger=g,this.vfLogger=g?new s.default(g):void 0,this.preload=c,this.fetchBehavior=S,this.spec=pa.augmentSpec(this.spec),u&&(this.configuration=Promise.resolve(u))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},282836061:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const p=h(d(8351168186));let m=r(class xS{getInnerDevice(){return this.device}mute(n){return f(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return f(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return f(this,void 0,void 0,function*(){return this.device===n&&!a(n)?this:new xS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return f(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return f(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const c=this.node,g=this.node;return{start:c,end:g}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(n){return f(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return f(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return f(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return f(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return f(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return f(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,c=void 0,g=new p.default,S=new Map,u=void 0,v=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=c,this.browserBehavior=g,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=u,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function a(s){return s==="default"?!0:!s||typeof s!="object"?!1:"deviceId"in s&&s.deviceId==="default"||"id"in s&&s.id==="default"}r(a,"isDefaultDevice"),l.default=m},9502253674:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class{addObserver(h){this.observers.add(h)}removeObserver(h){this.observers.delete(h)}onFallback(h,p){var m;for(const a of this.observers)(m=a.voiceFocusFellBackToInnerStream)===null||m===void 0||m.call(a,h,p)}onCPUWarning(){var h;for(const p of this.observers)(h=p.voiceFocusInsufficientResources)===null||h===void 0||h.call(p)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=d},338869682:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let d=r(class Au{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(h){let p=0;for(const m of h.streams){const a=!!m.attendeeId,s=!!m.externalUserId,n=m.hasOwnProperty("muted"),e=!!m.dropped;if(a){this.attendeeIdToStreamId[m.attendeeId]&&this.attendeeIdToStreamId[m.attendeeId]<m.audioStreamId&&delete this.attendeeIdToStreamId[m.attendeeId],this.streamIdToAttendeeId[m.audioStreamId]=m.attendeeId;const t=s?m.externalUserId:m.attendeeId;this.streamIdToExternalUserId[m.audioStreamId]=t,this.attendeeIdToStreamId[m.attendeeId]=m.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(m.attendeeId,!0,t,!1,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}if(n){const t=this.streamIdToAttendeeId[m.audioStreamId],i=this.streamIdToExternalUserId[m.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,m.muted,null,i)}if(!a&&!n){const t=this.streamIdToAttendeeId[m.audioStreamId];if(t){const i=this.streamIdToExternalUserId[m.audioStreamId];delete this.streamIdToAttendeeId[m.audioStreamId],delete this.streamIdToExternalUserId[m.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[m.audioStreamId],this.attendeeIdToStreamId[t]===m.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const c of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(c);if(g>m.audioStreamId&&this.streamIdToAttendeeId[g]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:p++,attendeesInFrame:h.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(h),this.sessionReconnected=!1)}cleanUpState(h){const p=Object.values(this.streamIdToAttendeeId),m=h.streams.map(s=>s.attendeeId),a=p.filter(s=>!m.includes(s));for(const[s,n]of a.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:s,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(h){let p=null,m=null;for(const a of h.attendeeStates){const s=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(p===null&&(p={}),s!==null&&(p[s]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(m===null&&(m={}),s!==null&&(m[s]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(p,m)}normalizedVolume(h){const m=1-(-h.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(m,0),1)}normalizedSignalStrength(h){const p=h.signalStrength/Au.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(p,0),1)}applyRealtimeUpdatesForAudioMetadata(h,p){for(const m in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[m],s=this.streamIdToExternalUserId[m];let n=null,e=null;h!==null&&(h.hasOwnProperty(a)?n=h[a]:n=Au.IMPLICIT_VOLUME),p!==null&&(p.hasOwnProperty(a)?e=p[a]:e=Au.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,n,null,e,s)}}attendeeIdForStreamId(h){if(h===0)return null;const p=this.streamIdToAttendeeId[h];return p||(this.warnedAboutMissingStreamIdMapping[h]||(this.warnedAboutMissingStreamIdMapping[h]=!0,this.logger.warn(`volume indicator stream id ${h} seen before being defined`)),null)}constructor(h,p,m,a,s){this.logger=h,this.realtimeController=p,this.minVolumeDecibels=m,this.maxVolumeDecibels=a,this.selfAttendeeId=s,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=d,d.MAX_SIGNAL_STRENGTH_LEVELS=2,d.IMPLICIT_VOLUME=0,d.IMPLICIT_SIGNAL_STRENGTH=1},8796204466:function(B,l,d){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f(d(8066052849)),p=f(d(2686893898));let m=r(class{create(s,n,e){this.connection=new WebSocket(e?s:h.default.urlWithVersion(s),n),this.connection.binaryType="arraybuffer"}send(s){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return s instanceof Uint8Array?this.connection.send(s.buffer):this.connection.send(s),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${p.default[this.readyState()]}`),!1}}close(s,n){var e;(e=this.connection)===null||e===void 0||e.close(s,n)}destroy(){this.connection=void 0}addEventListener(s,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(s,n)}removeEventListener(s,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(s,n)}readyState(){if(!this.connection)return p.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return p.default.Connecting;case WebSocket.OPEN:return p.default.Open;case WebSocket.CLOSING:return p.default.Closing;case WebSocket.CLOSED:return p.default.Closed}}constructor(s){this.logger=s}},"DefaultWebSocketAdapter");l.default=m},2686893898:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var d;(function(f){f[f.None=0]="None",f[f.Connecting=1]="Connecting",f[f.Open=2]="Open",f[f.Closing=3]="Closing",f[f.Closed=4]="Closed"})(d=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=d},1716026697:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(_,C,I,A){function w(O){return O instanceof I?O:new I(function(R){R(O)})}return r(w,"adopt"),new(I||(I=Promise))(function(O,R){function F(X){try{$(A.next(X))}catch(Y){R(Y)}}r(F,"fulfilled");function V(X){try{$(A.throw(X))}catch(Y){R(Y)}}r(V,"rejected");function $(X){X.done?O(X.value):w(X.value).then(F,V)}r($,"step"),$((A=A.apply(_,C||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=d(6582301018),p=d(8113008952),m=3,a=2.5,s=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=r(class{roundtrip(C,I,A){return new Promise((w,O)=>{this.worker.then(R=>{let F;F=r(V=>{const{message:$,key:X}=V.data;$===I&&X===A&&(R.removeEventListener("message",F),w(V.data))},"listener"),R.addEventListener("message",F),R.postMessage(C)}).catch(R=>{var F;(F=this.logger)===null||F===void 0||F.error("Failed to load worker.",R),O(R)})})}supportsSIMD(C){const I="simd",A=C||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,w={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:A,key:I};return this.roundtrip(w,"simd-support",I).then(O=>O.supports)}measure(C,I){const A=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,w=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,O=C?w:A,R=`bench:${C}`,F={message:"measure",fetchBehavior:this.fetchBehavior,budget:I,path:O,key:R};return this.roundtrip(F,"measurement",R).then(V=>{if(V.measurement)return V.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(C=>{var I;(I=this.logger)===null||I===void 0||I.debug("Stopping estimator worker."),C.terminate()}).catch(C=>{})}constructor(C,I){this.fetchConfig=C,this.logger=I;const A=`${C.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:C.headers,escapedQueryString:C.escapedQueryString},this.worker=h.loadWorker(A,"VoiceFocusEstimator",this.fetchBehavior,I)}},"Estimator");const g=r((_,C)=>_===1?n:C==="quality"?e*_:t*_,"inlineScoreMultiplier"),S=r(function(_){let{supportsSIMD:C,supportsSAB:I,duration:A,executionPreference:w="auto",simdPreference:O,variantPreference:R="auto",namePreference:F="default",usagePreference:V,executionQuantaPreference:$=m}=_,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Y=arguments.length>2?arguments[2]:void 0;const ie=O==="force"||O!=="disable"&&C,ge=A!==-1,Ie=ge?(ie?a:s)/A:0,We=ie?X.simd:X.wasm,ct=ge?g($,V)*Ie:0,Ae=ge?i*Ie:0,Fe=F,Xe=r(wt=>({supported:!1,reason:wt}),"unsupported");if(ge){if(Ie<We.noSupport)return Xe(`Performance score ${Ie} worse than threshold ${We.noSupport}.`)}else if(w==="auto"||R==="auto")return Xe(`Missing explicit execution (${w}) or variant (${R}) preference, but no scoring performed.`);Y==null||Y.debug(`Bench duration ${A} yields inline score ${ct} and worker score ${Ae}.`);const Ge=r((wt,Pe,xe)=>({supported:!0,useSIMD:ie,processor:wt,executionApproach:Pe,variant:xe,executionQuanta:Pe==="inline"?$:void 0,name:Fe}),"succeed"),it=r((wt,Pe,xe)=>Pe!=="auto"?!ge||wt>xe[Pe]?Pe:"failed":wt>xe.c100?"c100":wt>xe.c50?"c50":wt>xe.c20?"c20":wt>xe.c10?"c10":"failed","resolveVariant"),Dt=r(wt=>{switch(wt||"auto"){case"auto":{let Pe=Dt("inline"),xe=Dt("worker");return Y==null||Y.debug(`Reducing auto preference: ${JSON.stringify(Pe)} vs ${JSON.stringify(xe)}`),Pe.supported===!1||xe.supported===!1?xe:Pe.variant===xe.variant||Pe.variant==="c50"?Pe:xe}case"worker":return p.supportsSharedArrayBuffer(globalThis,window,Y)?Dt("worker-sab"):Dt("worker-postMessage");case"inline":{const Pe=it(ct,R,We.inline);return Pe==="failed"?Xe(`Performance score ${ct} not sufficient for inline use with variant preference ${R}.`):Ge("voicefocus-inline-processor","inline",Pe)}case"worker-sab":{if(!I){const xe="Requested worker-sab but no SharedArrayBuffer support.";return Y==null||Y.warn(xe),{supported:!1,reason:xe}}const Pe=it(Ae,R,We.worker);return Pe==="failed"?Xe(`Performance score ${Ae} not sufficient for worker use with variant preference ${R}.`):Ge("voicefocus-worker-sab-processor","worker-sab",Pe)}case"worker-postMessage":{const Pe=it(Ae,R,We.worker);if(Pe==="failed")return Xe(`Performance score ${Ae} not sufficient for worker use.`);if(Fe==="ns_es"){const xe="Requested echo suppression but postMessage executor does not support it.";return Y==null||Y.warn(xe),{supported:!1,reason:xe}}return Ge("voicefocus-worker-postMessage-processor","worker-postMessage",Pe)}}},"reducePreference");return Dt(w)},"decideExecutionApproach"),u=r((_,C,I,A)=>f(void 0,void 0,void 0,function*(){const w={supportsSIMD:_,supportsSAB:p.supportsSharedArrayBuffer(globalThis,window,I),duration:-1};if(_)return I==null||I.info("Supports SIMD: true (force)"),w;const O=!A,R=A||new c(C,I);try{const F=!p.isOldChrome(window,I)&&(yield R.supportsSIMD());return I==null||I.info(`Supports SIMD: ${F} (force: ${_})`),w.supportsSIMD=F,w}finally{O&&R.stop()}}),"featureCheck"),v=r((_,C,I,A)=>f(void 0,void 0,void 0,function*(){const w=new c(C,A);try{const O=yield u(_,C,A,w);if(O.supportsSIMD)try{return O.duration=yield w.measure(!0,I),A==null||A.info("SIMD timing:",O.duration),O}catch{A==null||A.warn("Failed SIMD estimation; falling back to non-SIMD."),O.supportsSIMD=!1}return O.duration=yield w.measure(!1,I),A==null||A.info("No-SIMD timing:",O.duration),O}catch(O){throw A==null||A.error("Could not feature check.",O),O}finally{w.stop()}}),"estimateAndFeatureCheck"),E=r(function(_,C,I){let A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return f(void 0,void 0,void 0,function*(){let w=_.executionPreference;const{usagePreference:O,variantPreference:R,namePreference:F,simdPreference:V,estimatorBudget:$,executionQuantaPreference:X}=_;O==="interactivity"&&w!=="inline"&&(I==null||I.debug(`Overriding execution preference ${w} to reflect interactivity preference.`),w="inline");const Y=V==="force",ne=R!=="auto",ie=w!=="auto";let ge;try{ne&&ie?ge=yield u(Y,C,I):ge=yield v(Y,C,$,I)}catch(Ie){throw I==null||I.error("Could not load estimator.",Ie),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},ge),{simdPreference:V,executionPreference:w,variantPreference:R,namePreference:F,usagePreference:O,executionQuantaPreference:X}),A,I)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=E;const b=r(_=>{let{category:C,name:I,variant:A,simd:w,url:O}=_;return`${C}-${I}-${A}-v1${w?"_simd":""}`},"decideModel");l.decideModel=b},4179955699:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function d(e,t,i){if(!i)return fetch(e,t);const o=h(e,i),c=f(t,i);return fetch(o,c)}r(d,"fetchWithBehavior"),l.fetchWithBehavior=d;function f(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}r(f,"withRequestHeaders"),l.withRequestHeaders=f;function h(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}r(h,"withQueryString"),l.withQueryString=h;function p(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const c of i)o.append(c,t[c]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}r(p,"addQueryParams"),l.addQueryParams=p;const m={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return d(e,m,t).then(i=>i.redirected?i.url:e)}r(a,"resolveURL"),l.resolveURL=a;function s(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}r(s,"isValidAssetGroup"),l.isValidAssetGroup=s;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}r(n,"isValidRevisionID"),l.isValidRevisionID=n},6582301018:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const f=d(4179955699),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},p=r((m,a,s,n)=>{n==null||n.debug(`Loading ${a} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=f.withQueryString(m,s);return Promise.resolve(new Worker(t,{name:a}))}return f.fetchWithBehavior(m,h,s).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=p},8113008952:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(u,v,E,b){function _(C){return C instanceof E?C:new E(function(I){I(C)})}return r(_,"adopt"),new(E||(E=Promise))(function(C,I){function A(R){try{O(b.next(R))}catch(F){I(F)}}r(A,"fulfilled");function w(R){try{O(b.throw(R))}catch(F){I(F)}}r(w,"rejected");function O(R){R.done?C(R.value):_(R.value).then(A,w)}r(O,"step"),O((b=b.apply(u,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=d(6582301018),p=r(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=r(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=v.match(/Safari\//),b=v.match(/Chrom(?:e|ium)\//);return!!(E&&!b)},"isSafari");l.isSafari=m;const a=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(u)?!1:p(u)?(g(u)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const s=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return f(void 0,void 0,void 0,function*(){if(!l.supportsWorker(u,E))return!1;const b=`${v.paths.workers}worker-v1.js`;try{const _=yield h.loadWorker(b,"VoiceFocusTestWorker",v,E);try{_.terminate()}catch(C){E==null||E.debug("Failed to terminate worker.",C)}return!0}catch(_){return E==null||E.info("Failed to fetch and instantiate test worker",_),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=s;const n=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.Worker}catch(E){return v==null||v.info("Does not support Worker",E),!1}},"supportsWorker");l.supportsWorker=n;const e=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.AudioWorklet&&!!u.AudioWorkletNode}catch(E){return v==null||v.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!u.WebAssembly&&(!!u.WebAssembly.compile||!!u.WebAssembly.compileStreaming)}catch(E){return v==null||v.info("Does not support WASM",E),!1}},"supportsWASM");l.supportsWASM=t;const i=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!u.SharedArrayBuffer&&(!!v.chrome||!!u.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=i;const o=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=u.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(b){return v==null||v.info("Does not support WASM streaming compilation",b),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const c=90,g=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!u.chrome)return}catch{}const v=u.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=r(function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const E=g(u);return E&&E<c?(v==null||v.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},3587844202:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let d=r(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||r(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=d},8019356695:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return r(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(We){try{Ie($.next(We))}catch(ct){ne(ct)}}r(ie,"fulfilled");function ge(We){try{Ie($.throw(We))}catch(ct){ne(ct)}}r(ge,"rejected");function Ie(We){We.done?Y(We.value):X(We.value).then(ie,ge)}r(Ie,"step"),Ie(($=$.apply(R,F||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=d(1716026697),p=d(4179955699),m=d(6582301018),a=d(8113008952),s=d(1074507e3),n=d(4096494996),e=d(1035990965),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",c="https://static.sdkassets.chime.aws",g={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},S={latencyHint:0},u={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},u),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},u),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),b={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:s.default}},_=r((R,F)=>{if(R!==void 0&&!p.isValidAssetGroup(R))throw new Error(`Invalid asset group ${R}`);if(F!==void 0&&!p.isValidRevisionID(F))throw new Error(`Invalid revision ID ${F}`)},"validateAssetSpec"),C=r((R,F)=>{let V;if(F.useBuiltInAGC?V=v:V=E,!R)return{audio:V};if(!R.audio)return R;if(R.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},R),{audio:R.audio===!0?V:Object.assign(Object.assign({},R.audio),V)})},"mungeConstraints"),I=r((R,F)=>`${F.models}${h.decideModel(R)}.wasm`,"urlForModel");let A=r(class US{static isSupported(F,V){const{fetchBehavior:$,logger:X}=V||{};if(typeof globalThis>"u")return X==null||X.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,X))return X==null||X.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,X))return X==null||X.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,X)||X==null||X.debug("Browser does not support streaming WASM compilation.");const{assetGroup:Y=o,revisionID:ne,paths:ie=g}=F||{};_(Y,ne);const ge=ne?{revisionID:ne}:{assetGroup:Y},Ie=p.addQueryParams($,ge),We=Object.assign(Object.assign({},Ie),{paths:ie});return a.supportsVoiceFocusWorker(globalThis,We,X)}static mungeExecutionPreference(F,V){const $=F===void 0||F==="auto";if(a.isSafari(globalThis)){if($||F==="inline")return"inline";if(!$)throw new Error(`Unsupported execution preference ${F}`)}if(F==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,V))throw new Error(`Unsupported execution preference ${F}`);return F||"auto"}static configure(F,V){return f(this,void 0,void 0,function*(){const{fetchBehavior:$,preResolve:X,logger:Y}=V||{},{category:ne="voicefocus",name:ie="default",variant:ge="auto",assetGroup:Ie=o,revisionID:We,simd:ct="detect",executionPreference:Ae="auto",executionQuantaPreference:Fe,usagePreference:Xe="interactivity",estimatorBudget:Ge=100,paths:it=g,thresholds:Dt}=F||{};if(Y==null||Y.debug("Configuring Voice Focus with spec",F),ne!==void 0&&ne!=="voicefocus")throw new Error(`Unrecognized category ${ne}`);if(ie!==void 0&&ie!=="default"&&ie!=="ns_es")throw new Error(`Unrecognized feature name ${ie}`);if(ge!==void 0&&!["auto","c100","c50","c20","c10"].includes(ge))throw new Error(`Unrecognized feature variant ${ge}`);if(Fe!==void 0&&![1,2,3].includes(Fe))throw new Error(`Unrecognized execution quanta preference ${Fe}`);if(_(Ie,We),ct!==void 0&&!["detect","force","disable"].includes(ct))throw new Error(`Unrecognized SIMD option ${ct}`);if(Ae!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ae))throw new Error(`Unrecognized execution preference ${Ae}`);if(Xe!==void 0&&!["quality","interactivity"].includes(Xe))throw new Error(`Unrecognized usage preference ${Xe}`);const wt={executionPreference:this.mungeExecutionPreference(Ae,Y),usagePreference:Xe,executionQuantaPreference:Fe,variantPreference:ge,namePreference:ie,simdPreference:ct,estimatorBudget:Ge},Pe=We?{revisionID:We}:{assetGroup:Ie},xe=p.addQueryParams($,Pe),et=Object.assign({paths:it},xe),rt=yield h.measureAndDecideExecutionApproach(wt,et,Y,Dt);if(rt.supported===!1)return{supported:!1,reason:rt.reason};Y==null||Y.info("Decided execution approach",rt);const{useSIMD:je,processor:Ft,variant:Gt,executionQuanta:Xt}=rt,sn={category:ne||"voicefocus",name:ie||"default",variant:Gt,simd:je};if(X){const cn=I(sn,it);sn.url=yield p.resolveURL(cn,xe)}return{fetchConfig:et,model:sn,processor:Ft,executionQuanta:Xt,supported:!0}})}static init(F,V){let{delegate:$,preload:X=!0,logger:Y}=V;return f(this,void 0,void 0,function*(){if(F.supported===!1)throw new Error("Voice Focus not supported. Reason: "+F.reason);const{model:ne,processor:ie,fetchConfig:ge,executionQuanta:Ie}=F,{simd:We,name:ct}=ne,{paths:Ae}=ge;if(ie!=="voicefocus-inline-processor"&&ie!=="voicefocus-worker-postMessage-processor"&&ie!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ie}`);const Fe=ne.url||I(ne,Ae);Y==null||Y.debug(`Using model URL ${Fe}.`);const Xe=`${Ae.wasm}audio_buffer-v1${We?"_simd":""}.wasm`,Ge=`${Ae.wasm}resampler-v1${We?"_simd":""}.wasm`,it=`${Ae.workers}worker-v1.js`,{file:Dt,node:wt}=b[ie],Pe=`${Ae.processors}${Dt}`,xe=yield m.loadWorker(it,"VoiceFocusWorker",ge,Y);if(X){Y==null||Y.debug("Preloading",Fe);let Ft=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";xe.postMessage({message:Ft,preload:!0,key:"model",fetchBehavior:ge,path:Fe})}const rt={processor:ie,worker:xe,audioBufferURL:Xe,resamplerURL:Ge,fetchBehavior:ge,modelURL:Fe,delegate:$,logger:Y,numberOfInputs:ct==="ns_es"?2:1},je=new US(xe,Pe,wt,rt,Ie);return Promise.resolve(je)})}createNode(F,V){var $;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:X=F.sampleRate===16e3?16e3:48e3,enabled:Y=!0,agc:ne=i}=V||{},ie=V==null?void 0:V.es,ge={voiceFocusSampleRate:X,enabled:Y,sendBufferCount:10,prefill:6,agc:ne,executionQuanta:this.executionQuanta,supportFarendStream:ie},Ie=p.withQueryString(this.processorURL,($=this.nodeOptions)===null||$===void 0?void 0:$.fetchBehavior);return F.audioWorklet.addModule(Ie).then(()=>new this.nodeConstructor(F,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:ge})))}applyToStream(F,V,$){return f(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const X=V.createMediaStreamSource(F),Y=yield this.applyToSourceNode(X,V,$),ne=V.createMediaStreamDestination();return Y.connect(ne),{node:Y,source:X,destination:ne,stream:ne.stream}})}applyToSourceNode(F,V,$){return f(this,void 0,void 0,function*(){const X=yield this.createNode(V,$);return F.connect(X),X})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(F,V,$,X,Y){this.processorURL=V,this.nodeConstructor=$,this.nodeOptions=X,this.executionQuanta=Y,this.internal={worker:F,nodeOptions:X,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=A;const w=r(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(R)},"createAudioContext");l.createAudioContext=w;const O=r((R,F,V)=>f(void 0,void 0,void 0,function*(){var $,X;const{constraints:Y,spec:ne,delegate:ie,preload:ge=!0,options:Ie}=F,{logger:We}=V,ct=yield A.configure(ne,V);if(!ct.supported)return($=V.logger)===null||$===void 0||$.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(Y);const Ae=yield A.init(ct,{delegate:ie,preload:ge,logger:We}),Fe=((X=F.options)===null||X===void 0?void 0:X.agc)||i,Xe=yield window.navigator.mediaDevices.getUserMedia(C(Y,Fe));return Ae.applyToStream(Xe,R,Ie).then(Ge=>Ge.stream)}),"getAudioInput");l.getAudioInput=O},1074507e3:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(s,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return r(i,"adopt"),new(e||(e=Promise))(function(o,c){function g(v){try{u(t.next(v))}catch(E){c(E)}}r(g,"fulfilled");function S(v){try{u(t.throw(v))}catch(E){c(E)}}r(S,"rejected");function u(v){v.done?o(v.value):i(v.value).then(g,S)}r(u,"step"),u((t=t.apply(s,n||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(8113008952),p=d(3587844202),m=5*1e3;let a=r(class extends p.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return f(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return f(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return f(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),g=this.cpuWarningLastTriggered||c,S=Math.abs(c-g);(!this.cpuWarningLastTriggered||S>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:c,delegate:g}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=g,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},1035990965:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(a,s,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return r(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(u){try{S(e.next(u))}catch(v){o(v)}}r(c,"fulfilled");function g(u){try{S(e.throw(u))}catch(v){o(v)}}r(g,"rejected");function S(u){u.done?i(u.value):t(u.value).then(c,g)}r(S,"step"),S((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(8113008952),p=d(3587844202);let m=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return f(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return f(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return f(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(s){var n;const e=s.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(s){var n;const e=s.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(s,n){super(s,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:c}=n;this.delegate=c,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:g,agc:S,supportFarendStream:u}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:s.sampleRate===16e3?160:480,enabled:g,agc:S,fetchBehavior:o,model:e,supportFarendStream:u});const v=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=m},4096494996:function(B,l,d){"use strict";var f=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(g){g(c)})}return r(o,"adopt"),new(t||(t=Promise))(function(c,g){function S(E){try{v(i.next(E))}catch(b){g(b)}}r(S,"fulfilled");function u(E){try{v(i.throw(E))}catch(b){g(b)}}r(u,"rejected");function v(E){E.done?c(E.value):o(E.value).then(S,u)}r(v,"step"),v((i=i.apply(n,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=d(8113008952),p=d(3587844202),m={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let s=r(class extends p.VoiceFocusAudioWorkletNode{enable(){return f(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return f(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return f(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,a.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:c,fetchBehavior:g,delegate:S}=t;this.delegate=S,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:u,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:u,model:i,supportFarendStream:v});const E=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:g,path:o})}},"VoiceFocusWorkerBufferNode");l.default=s},3712740514:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var f=d(2291918858),h=function(){function p(){this.state=Int32Array.from(f.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r(p,"RawSha2561"),p.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=m.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>f.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=m[a++],s--,this.bufferLength===f.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},p.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%f.BLOCK_SIZE>=f.BLOCK_SIZE-8){for(var n=this.bufferLength;n<f.BLOCK_SIZE;n++)a.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<f.BLOCK_SIZE-8;n++)a.setUint8(n,0);a.setUint32(f.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),a.setUint32(f.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(f.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},p.prototype.hashBuffer=function(){for(var m=this,a=m.buffer,s=m.state,n=s[0],e=s[1],t=s[2],i=s[3],o=s[4],c=s[5],g=s[6],S=s[7],u=0;u<f.BLOCK_SIZE;u++){if(u<16)this.temp[u]=(a[u*4]&255)<<24|(a[u*4+1]&255)<<16|(a[u*4+2]&255)<<8|a[u*4+3]&255;else{var v=this.temp[u-2],E=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[u-15];var b=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[u]=(E+this.temp[u-7]|0)+(b+this.temp[u-16]|0)}var _=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&c^~o&g)|0)+(S+(f.KEY[u]+this.temp[u]|0)|0)|0,C=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=g,g=c,c=o,o=i+_|0,i=t,t=e,e=n,n=_+C|0}s[0]+=n,s[1]+=e,s[2]+=t,s[3]+=i,s[4]+=o,s[5]+=c,s[6]+=g,s[7]+=S},p}();l.RawSha256=h},2291918858:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1222670195:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f=d(8400004479);f.__exportStar(d(9697312697),l)},9697312697:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var f=d(8400004479),h=d(2291918858),p=d(3712740514),m=d(9346984146),a=function(){function n(e){if(this.hash=new p.RawSha256,e){this.outer=new p.RawSha256;var t=s(e),i=new Uint8Array(h.BLOCK_SIZE);i.set(t);for(var o=0;o<h.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return r(n,"Sha2561"),n.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(e){return[2,this.digestSync()]})})},n}();l.Sha256=a;function s(n){var e=(0,m.convertToBuffer)(n);if(e.byteLength>h.BLOCK_SIZE){var t=new p.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(h.BLOCK_SIZE);return i.set(e),i}r(s,"bufferFromSecret")},1717667466:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var f=d(2412280125),h=typeof Buffer<"u"&&Buffer.from?function(m){return Buffer.from(m,"utf8")}:f.fromUtf8;function p(m){return m instanceof Uint8Array?m:typeof m=="string"?h(m):ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(m)}r(p,"convertToBuffer"),l.convertToBuffer=p},9346984146:(B,l,d)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var f=d(1717667466);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return f.convertToBuffer}});var h=d(4931641723);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var p=d(3533405281);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return p.numToUint8}});var m=d(4862639932);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},4931641723:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function d(f){return typeof f=="string"?f.length===0:f.byteLength===0}r(d,"isEmptyData"),l.isEmptyData=d},3533405281:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function d(f){return new Uint8Array([(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255])}r(d,"numToUint8"),l.numToUint8=d},4862639932:(B,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function d(f){if(!Uint32Array.from){for(var h=new Uint32Array(f.length),p=0;p<f.length;)h[p]=f[p],p+=1;return h}return Uint32Array.from(f)}r(d,"uint32ArrayFrom"),l.uint32ArrayFrom=d},2179555054:(B,l,d)=>{"use strict";const{Deflate:f,deflate:h,deflateRaw:p,gzip:m}=d(8596517657),{Inflate:a,inflate:s,inflateRaw:n,ungzip:e}=d(5407065173),t=d(9516153853);B.exports.Deflate=f,B.exports.deflate=h,B.exports.deflateRaw=p,B.exports.gzip=m,B.exports.Inflate=a,B.exports.inflate=s,B.exports.inflateRaw=n,B.exports.ungzip=e,B.exports.constants=t},8596517657:(B,l,d)=>{"use strict";const f=d(9071164343),h=d(5261709245),p=d(3455347086),m=d(4276546412),a=d(8079600486),s=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:c,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:u}=d(9516153853);function v(C){this.options=h.assign({level:g,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},C||{});let I=this.options;I.raw&&I.windowBits>0?I.windowBits=-I.windowBits:I.gzip&&I.windowBits>0&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let A=f.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(A!==o)throw new Error(m[A]);if(I.header&&f.deflateSetHeader(this.strm,I.header),I.dictionary){let w;if(typeof I.dictionary=="string"?w=p.string2buf(I.dictionary):s.call(I.dictionary)==="[object ArrayBuffer]"?w=new Uint8Array(I.dictionary):w=I.dictionary,A=f.deflateSetDictionary(this.strm,w),A!==o)throw new Error(m[A]);this._dict_set=!0}}r(v,"Deflate"),v.prototype.push=function(C,I){const A=this.strm,w=this.options.chunkSize;let O,R;if(this.ended)return!1;for(I===~~I?R=I:R=I===!0?i:n,typeof C=="string"?A.input=p.string2buf(C):s.call(C)==="[object ArrayBuffer]"?A.input=new Uint8Array(C):A.input=C,A.next_in=0,A.avail_in=A.input.length;;){if(A.avail_out===0&&(A.output=new Uint8Array(w),A.next_out=0,A.avail_out=w),(R===e||R===t)&&A.avail_out<=6){this.onData(A.output.subarray(0,A.next_out)),A.avail_out=0;continue}if(O=f.deflate(A,R),O===c)return A.next_out>0&&this.onData(A.output.subarray(0,A.next_out)),O=f.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===o;if(A.avail_out===0){this.onData(A.output);continue}if(R>0&&A.next_out>0){this.onData(A.output.subarray(0,A.next_out)),A.avail_out=0;continue}if(A.avail_in===0)break}return!0},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===o&&(this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function E(C,I){const A=new v(I);if(A.push(C,!0),A.err)throw A.msg||m[A.err];return A.result}r(E,"deflate");function b(C,I){return I=I||{},I.raw=!0,E(C,I)}r(b,"deflateRaw");function _(C,I){return I=I||{},I.gzip=!0,E(C,I)}r(_,"gzip"),B.exports.Deflate=v,B.exports.deflate=E,B.exports.deflateRaw=b,B.exports.gzip=_,B.exports.constants=d(9516153853)},5407065173:(B,l,d)=>{"use strict";const f=d(8029791791),h=d(5261709245),p=d(3455347086),m=d(4276546412),a=d(8079600486),s=d(9654919892),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:c,Z_STREAM_ERROR:g,Z_DATA_ERROR:S,Z_MEM_ERROR:u}=d(9516153853);function v(_){this.options=h.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),C.windowBits>=0&&C.windowBits<16&&!(_&&_.windowBits)&&(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&(C.windowBits&15||(C.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let I=f.inflateInit2(this.strm,C.windowBits);if(I!==i)throw new Error(m[I]);if(this.header=new s,f.inflateGetHeader(this.strm,this.header),C.dictionary&&(typeof C.dictionary=="string"?C.dictionary=p.string2buf(C.dictionary):n.call(C.dictionary)==="[object ArrayBuffer]"&&(C.dictionary=new Uint8Array(C.dictionary)),C.raw&&(I=f.inflateSetDictionary(this.strm,C.dictionary),I!==i)))throw new Error(m[I])}r(v,"Inflate"),v.prototype.push=function(_,C){const I=this.strm,A=this.options.chunkSize,w=this.options.dictionary;let O,R,F;if(this.ended)return!1;for(C===~~C?R=C:R=C===!0?t:e,n.call(_)==="[object ArrayBuffer]"?I.input=new Uint8Array(_):I.input=_,I.next_in=0,I.avail_in=I.input.length;;){for(I.avail_out===0&&(I.output=new Uint8Array(A),I.next_out=0,I.avail_out=A),O=f.inflate(I,R),O===c&&w&&(O=f.inflateSetDictionary(I,w),O===i?O=f.inflate(I,R):O===S&&(O=c));I.avail_in>0&&O===o&&I.state.wrap>0&&_[I.next_in]!==0;)f.inflateReset(I),O=f.inflate(I,R);switch(O){case g:case S:case c:case u:return this.onEnd(O),this.ended=!0,!1}if(F=I.avail_out,I.next_out&&(I.avail_out===0||O===o))if(this.options.to==="string"){let V=p.utf8border(I.output,I.next_out),$=I.next_out-V,X=p.buf2string(I.output,V);I.next_out=$,I.avail_out=A-$,$&&I.output.set(I.output.subarray(V,V+$),0),this.onData(X)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(!(O===i&&F===0)){if(O===o)return O=f.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,!0;if(I.avail_in===0)break}}return!0},v.prototype.onData=function(_){this.chunks.push(_)},v.prototype.onEnd=function(_){_===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function E(_,C){const I=new v(C);if(I.push(_),I.err)throw I.msg||m[I.err];return I.result}r(E,"inflate");function b(_,C){return C=C||{},C.raw=!0,E(_,C)}r(b,"inflateRaw"),B.exports.Inflate=v,B.exports.inflate=E,B.exports.inflateRaw=b,B.exports.ungzip=E,B.exports.constants=d(9516153853)},5261709245:B=>{"use strict";const l=r((d,f)=>Object.prototype.hasOwnProperty.call(d,f),"_has");B.exports.assign=function(d){const f=Array.prototype.slice.call(arguments,1);for(;f.length;){const h=f.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const p in h)l(h,p)&&(d[p]=h[p])}}return d},B.exports.flattenChunks=d=>{let f=0;for(let p=0,m=d.length;p<m;p++)f+=d[p].length;const h=new Uint8Array(f);for(let p=0,m=0,a=d.length;p<a;p++){let s=d[p];h.set(s,m),m+=s.length}return h}},3455347086:B=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const d=new Uint8Array(256);for(let h=0;h<256;h++)d[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;d[254]=d[254]=1,B.exports.string2buf=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let p,m,a,s,n,e=h.length,t=0;for(s=0;s<e;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),t+=m<128?1:m<2048?2:m<65536?3:4;for(p=new Uint8Array(t),n=0,s=0;n<t;s++)m=h.charCodeAt(s),(m&64512)===55296&&s+1<e&&(a=h.charCodeAt(s+1),(a&64512)===56320&&(m=65536+(m-55296<<10)+(a-56320),s++)),m<128?p[n++]=m:m<2048?(p[n++]=192|m>>>6,p[n++]=128|m&63):m<65536?(p[n++]=224|m>>>12,p[n++]=128|m>>>6&63,p[n++]=128|m&63):(p[n++]=240|m>>>18,p[n++]=128|m>>>12&63,p[n++]=128|m>>>6&63,p[n++]=128|m&63);return p};const f=r((h,p)=>{if(p<65534&&h.subarray&&l)return String.fromCharCode.apply(null,h.length===p?h:h.subarray(0,p));let m="";for(let a=0;a<p;a++)m+=String.fromCharCode(h[a]);return m},"buf2binstring");B.exports.buf2string=(h,p)=>{const m=p||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,p));let a,s;const n=new Array(m*2);for(s=0,a=0;a<m;){let e=h[a++];if(e<128){n[s++]=e;continue}let t=d[e];if(t>4){n[s++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<m;)e=e<<6|h[a++]&63,t--;if(t>1){n[s++]=65533;continue}e<65536?n[s++]=e:(e-=65536,n[s++]=55296|e>>10&1023,n[s++]=56320|e&1023)}return f(n,s)},B.exports.utf8border=(h,p)=>{p=p||h.length,p>h.length&&(p=h.length);let m=p-1;for(;m>=0&&(h[m]&192)===128;)m--;return m<0||m===0?p:m+d[h[m]]>p?m:p}},3145109445:B=>{"use strict";const l=r((d,f,h,p)=>{let m=d&65535|0,a=d>>>16&65535|0,s=0;for(;h!==0;){s=h>2e3?2e3:h,h-=s;do m=m+f[p++]|0,a=a+m|0;while(--s);m%=65521,a%=65521}return m|a<<16|0},"adler32");B.exports=l},9516153853:B=>{"use strict";B.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},3332910147:B=>{"use strict";const l=r(()=>{let h,p=[];for(var m=0;m<256;m++){h=m;for(var a=0;a<8;a++)h=h&1?3988292384^h>>>1:h>>>1;p[m]=h}return p},"makeTable"),d=new Uint32Array(l()),f=r((h,p,m,a)=>{const s=d,n=a+m;h^=-1;for(let e=a;e<n;e++)h=h>>>8^s[(h^p[e])&255];return h^-1},"crc32");B.exports=f},9071164343:(B,l,d)=>{"use strict";const{_tr_init:f,_tr_stored_block:h,_tr_flush_block:p,_tr_tally:m,_tr_align:a}=d(4407910137),s=d(3145109445),n=d(3332910147),e=d(4276546412),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:c,Z_BLOCK:g,Z_OK:S,Z_STREAM_END:u,Z_STREAM_ERROR:v,Z_DATA_ERROR:E,Z_BUF_ERROR:b,Z_DEFAULT_COMPRESSION:_,Z_FILTERED:C,Z_HUFFMAN_ONLY:I,Z_RLE:A,Z_FIXED:w,Z_DEFAULT_STRATEGY:O,Z_UNKNOWN:R,Z_DEFLATED:F}=d(9516153853),V=9,$=15,X=8,Y=29,ie=256+1+Y,ge=30,Ie=19,We=2*ie+1,ct=15,Ae=3,Fe=258,Xe=Fe+Ae+1,Ge=32,it=42,Dt=69,wt=73,Pe=91,xe=103,et=113,rt=666,je=1,Ft=2,Gt=3,Xt=4,sn=3,cn=r((k,Se)=>(k.msg=e[Se],Se),"err"),Bt=r(k=>(k<<1)-(k>4?9:0),"rank"),gn=r(k=>{let Se=k.length;for(;--Se>=0;)k[Se]=0},"zero");let $n=r((k,Se,be)=>(Se<<k.hash_shift^be)&k.hash_mask,"HASH_ZLIB");const Sn=r(k=>{const Se=k.state;let be=Se.pending;be>k.avail_out&&(be=k.avail_out),be!==0&&(k.output.set(Se.pending_buf.subarray(Se.pending_out,Se.pending_out+be),k.next_out),k.next_out+=be,Se.pending_out+=be,k.total_out+=be,k.avail_out-=be,Se.pending-=be,Se.pending===0&&(Se.pending_out=0))},"flush_pending"),nn=r((k,Se)=>{p(k,k.block_start>=0?k.block_start:-1,k.strstart-k.block_start,Se),k.block_start=k.strstart,Sn(k.strm)},"flush_block_only"),Vt=r((k,Se)=>{k.pending_buf[k.pending++]=Se},"put_byte"),Wn=r((k,Se)=>{k.pending_buf[k.pending++]=Se>>>8&255,k.pending_buf[k.pending++]=Se&255},"putShortMSB"),Lt=r((k,Se,be,we)=>{let ee=k.avail_in;return ee>we&&(ee=we),ee===0?0:(k.avail_in-=ee,Se.set(k.input.subarray(k.next_in,k.next_in+ee),be),k.state.wrap===1?k.adler=s(k.adler,Se,ee,be):k.state.wrap===2&&(k.adler=n(k.adler,Se,ee,be)),k.next_in+=ee,k.total_in+=ee,ee)},"read_buf"),zt=r((k,Se)=>{let be=k.max_chain_length,we=k.strstart,ee,en,dt=k.prev_length,Ct=k.nice_match;const xn=k.strstart>k.w_size-Xe?k.strstart-(k.w_size-Xe):0,Qt=k.window,Xi=k.w_mask,Pi=k.prev,Kn=k.strstart+Fe;let ni=Qt[we+dt-1],Mn=Qt[we+dt];k.prev_length>=k.good_match&&(be>>=2),Ct>k.lookahead&&(Ct=k.lookahead);do if(ee=Se,!(Qt[ee+dt]!==Mn||Qt[ee+dt-1]!==ni||Qt[ee]!==Qt[we]||Qt[++ee]!==Qt[we+1])){we+=2,ee++;do;while(Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&Qt[++we]===Qt[++ee]&&we<Kn);if(en=Fe-(Kn-we),we=Kn-Fe,en>dt){if(k.match_start=Se,dt=en,en>=Ct)break;ni=Qt[we+dt-1],Mn=Qt[we+dt]}}while((Se=Pi[Se&Xi])>xn&&--be!==0);return dt<=k.lookahead?dt:k.lookahead},"longest_match"),It=r(k=>{const Se=k.w_size;let be,we,ee,en,dt;do{if(en=k.window_size-k.lookahead-k.strstart,k.strstart>=Se+(Se-Xe)){k.window.set(k.window.subarray(Se,Se+Se),0),k.match_start-=Se,k.strstart-=Se,k.block_start-=Se,we=k.hash_size,be=we;do ee=k.head[--be],k.head[be]=ee>=Se?ee-Se:0;while(--we);we=Se,be=we;do ee=k.prev[--be],k.prev[be]=ee>=Se?ee-Se:0;while(--we);en+=Se}if(k.strm.avail_in===0)break;if(we=Lt(k.strm,k.window,k.strstart+k.lookahead,en),k.lookahead+=we,k.lookahead+k.insert>=Ae)for(dt=k.strstart-k.insert,k.ins_h=k.window[dt],k.ins_h=$n(k,k.ins_h,k.window[dt+1]);k.insert&&(k.ins_h=$n(k,k.ins_h,k.window[dt+Ae-1]),k.prev[dt&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=dt,dt++,k.insert--,!(k.lookahead+k.insert<Ae)););}while(k.lookahead<Xe&&k.strm.avail_in!==0)},"fill_window"),z=r((k,Se)=>{let be=65535;for(be>k.pending_buf_size-5&&(be=k.pending_buf_size-5);;){if(k.lookahead<=1){if(It(k),k.lookahead===0&&Se===t)return je;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;const we=k.block_start+be;if((k.strstart===0||k.strstart>=we)&&(k.lookahead=k.strstart-we,k.strstart=we,nn(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-Xe&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=0,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):(k.strstart>k.block_start&&(nn(k,!1),k.strm.avail_out===0),je)},"deflate_stored"),Ve=r((k,Se)=>{let be,we;for(;;){if(k.lookahead<Xe){if(It(k),k.lookahead<Xe&&Se===t)return je;if(k.lookahead===0)break}if(be=0,k.lookahead>=Ae&&(k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),be!==0&&k.strstart-be<=k.w_size-Xe&&(k.match_length=zt(k,be)),k.match_length>=Ae)if(we=m(k,k.strstart-k.match_start,k.match_length-Ae),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=Ae){k.match_length--;do k.strstart++,k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart;while(--k.match_length!==0);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=$n(k,k.ins_h,k.window[k.strstart+1]);else we=m(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(we&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=k.strstart<Ae-1?k.strstart:Ae-1,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_fast"),He=r((k,Se)=>{let be,we,ee;for(;;){if(k.lookahead<Xe){if(It(k),k.lookahead<Xe&&Se===t)return je;if(k.lookahead===0)break}if(be=0,k.lookahead>=Ae&&(k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=Ae-1,be!==0&&k.prev_length<k.max_lazy_match&&k.strstart-be<=k.w_size-Xe&&(k.match_length=zt(k,be),k.match_length<=5&&(k.strategy===C||k.match_length===Ae&&k.strstart-k.match_start>4096)&&(k.match_length=Ae-1)),k.prev_length>=Ae&&k.match_length<=k.prev_length){ee=k.strstart+k.lookahead-Ae,we=m(k,k.strstart-1-k.prev_match,k.prev_length-Ae),k.lookahead-=k.prev_length-1,k.prev_length-=2;do++k.strstart<=ee&&(k.ins_h=$n(k,k.ins_h,k.window[k.strstart+Ae-1]),be=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart);while(--k.prev_length!==0);if(k.match_available=0,k.match_length=Ae-1,k.strstart++,we&&(nn(k,!1),k.strm.avail_out===0))return je}else if(k.match_available){if(we=m(k,0,k.window[k.strstart-1]),we&&nn(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return je}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(we=m(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<Ae-1?k.strstart:Ae-1,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_slow"),Je=r((k,Se)=>{let be,we,ee,en;const dt=k.window;for(;;){if(k.lookahead<=Fe){if(It(k),k.lookahead<=Fe&&Se===t)return je;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=Ae&&k.strstart>0&&(ee=k.strstart-1,we=dt[ee],we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee])){en=k.strstart+Fe;do;while(we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&we===dt[++ee]&&ee<en);k.match_length=Fe-(en-ee),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=Ae?(be=m(k,1,k.match_length-Ae),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(be=m(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),be&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=0,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_rle"),Ye=r((k,Se)=>{let be;for(;;){if(k.lookahead===0&&(It(k),k.lookahead===0)){if(Se===t)return je;break}if(k.match_length=0,be=m(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,be&&(nn(k,!1),k.strm.avail_out===0))return je}return k.insert=0,Se===c?(nn(k,!0),k.strm.avail_out===0?Gt:Xt):k.last_lit&&(nn(k,!1),k.strm.avail_out===0)?je:Ft},"deflate_huff");function lt(k,Se,be,we,ee){this.good_length=k,this.max_lazy=Se,this.nice_length=be,this.max_chain=we,this.func=ee}r(lt,"Config");const le=[new lt(0,0,0,0,z),new lt(4,4,8,4,Ve),new lt(4,5,16,8,Ve),new lt(4,6,32,32,Ve),new lt(4,4,16,16,He),new lt(8,16,32,32,He),new lt(8,16,128,128,He),new lt(8,32,128,256,He),new lt(32,128,258,1024,He),new lt(32,258,258,4096,He)],Ue=r(k=>{k.window_size=2*k.w_size,gn(k.head),k.max_lazy_match=le[k.level].max_lazy,k.good_match=le[k.level].good_length,k.nice_match=le[k.level].nice_length,k.max_chain_length=le[k.level].max_chain,k.strstart=0,k.block_start=0,k.lookahead=0,k.insert=0,k.match_length=k.prev_length=Ae-1,k.match_available=0,k.ins_h=0},"lm_init");function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(We*2),this.dyn_dtree=new Uint16Array((2*ge+1)*2),this.bl_tree=new Uint16Array((2*Ie+1)*2),gn(this.dyn_ltree),gn(this.dyn_dtree),gn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ct+1),this.heap=new Uint16Array(2*ie+1),gn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ie+1),gn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}r(G,"DeflateState");const Q=r(k=>{if(!k||!k.state)return cn(k,v);k.total_in=k.total_out=0,k.data_type=R;const Se=k.state;return Se.pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?it:et,k.adler=Se.wrap===2?0:1,Se.last_flush=t,f(Se),S},"deflateResetKeep"),ye=r(k=>{const Se=Q(k);return Se===S&&Ue(k.state),Se},"deflateReset"),Ee=r((k,Se)=>!k||!k.state||k.state.wrap!==2?v:(k.state.gzhead=Se,S),"deflateSetHeader"),pt=r((k,Se,be,we,ee,en)=>{if(!k)return v;let dt=1;if(Se===_&&(Se=6),we<0?(dt=0,we=-we):we>15&&(dt=2,we-=16),ee<1||ee>V||be!==F||we<8||we>15||Se<0||Se>9||en<0||en>w)return cn(k,v);we===8&&(we=9);const Ct=new G;return k.state=Ct,Ct.strm=k,Ct.wrap=dt,Ct.gzhead=null,Ct.w_bits=we,Ct.w_size=1<<Ct.w_bits,Ct.w_mask=Ct.w_size-1,Ct.hash_bits=ee+7,Ct.hash_size=1<<Ct.hash_bits,Ct.hash_mask=Ct.hash_size-1,Ct.hash_shift=~~((Ct.hash_bits+Ae-1)/Ae),Ct.window=new Uint8Array(Ct.w_size*2),Ct.head=new Uint16Array(Ct.hash_size),Ct.prev=new Uint16Array(Ct.w_size),Ct.lit_bufsize=1<<ee+6,Ct.pending_buf_size=Ct.lit_bufsize*4,Ct.pending_buf=new Uint8Array(Ct.pending_buf_size),Ct.d_buf=1*Ct.lit_bufsize,Ct.l_buf=(1+2)*Ct.lit_bufsize,Ct.level=Se,Ct.strategy=en,Ct.method=be,ye(k)},"deflateInit2"),ze=r((k,Se)=>pt(k,Se,F,$,X,O),"deflateInit"),st=r((k,Se)=>{let be,we;if(!k||!k.state||Se>g||Se<0)return k?cn(k,v):v;const ee=k.state;if(!k.output||!k.input&&k.avail_in!==0||ee.status===rt&&Se!==c)return cn(k,k.avail_out===0?b:v);ee.strm=k;const en=ee.last_flush;if(ee.last_flush=Se,ee.status===it)if(ee.wrap===2)k.adler=0,Vt(ee,31),Vt(ee,139),Vt(ee,8),ee.gzhead?(Vt(ee,(ee.gzhead.text?1:0)+(ee.gzhead.hcrc?2:0)+(ee.gzhead.extra?4:0)+(ee.gzhead.name?8:0)+(ee.gzhead.comment?16:0)),Vt(ee,ee.gzhead.time&255),Vt(ee,ee.gzhead.time>>8&255),Vt(ee,ee.gzhead.time>>16&255),Vt(ee,ee.gzhead.time>>24&255),Vt(ee,ee.level===9?2:ee.strategy>=I||ee.level<2?4:0),Vt(ee,ee.gzhead.os&255),ee.gzhead.extra&&ee.gzhead.extra.length&&(Vt(ee,ee.gzhead.extra.length&255),Vt(ee,ee.gzhead.extra.length>>8&255)),ee.gzhead.hcrc&&(k.adler=n(k.adler,ee.pending_buf,ee.pending,0)),ee.gzindex=0,ee.status=Dt):(Vt(ee,0),Vt(ee,0),Vt(ee,0),Vt(ee,0),Vt(ee,0),Vt(ee,ee.level===9?2:ee.strategy>=I||ee.level<2?4:0),Vt(ee,sn),ee.status=et);else{let dt=F+(ee.w_bits-8<<4)<<8,Ct=-1;ee.strategy>=I||ee.level<2?Ct=0:ee.level<6?Ct=1:ee.level===6?Ct=2:Ct=3,dt|=Ct<<6,ee.strstart!==0&&(dt|=Ge),dt+=31-dt%31,ee.status=et,Wn(ee,dt),ee.strstart!==0&&(Wn(ee,k.adler>>>16),Wn(ee,k.adler&65535)),k.adler=1}if(ee.status===Dt)if(ee.gzhead.extra){for(be=ee.pending;ee.gzindex<(ee.gzhead.extra.length&65535)&&!(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),Sn(k),be=ee.pending,ee.pending===ee.pending_buf_size));)Vt(ee,ee.gzhead.extra[ee.gzindex]&255),ee.gzindex++;ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),ee.gzindex===ee.gzhead.extra.length&&(ee.gzindex=0,ee.status=wt)}else ee.status=wt;if(ee.status===wt)if(ee.gzhead.name){be=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),Sn(k),be=ee.pending,ee.pending===ee.pending_buf_size)){we=1;break}ee.gzindex<ee.gzhead.name.length?we=ee.gzhead.name.charCodeAt(ee.gzindex++)&255:we=0,Vt(ee,we)}while(we!==0);ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),we===0&&(ee.gzindex=0,ee.status=Pe)}else ee.status=Pe;if(ee.status===Pe)if(ee.gzhead.comment){be=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),Sn(k),be=ee.pending,ee.pending===ee.pending_buf_size)){we=1;break}ee.gzindex<ee.gzhead.comment.length?we=ee.gzhead.comment.charCodeAt(ee.gzindex++)&255:we=0,Vt(ee,we)}while(we!==0);ee.gzhead.hcrc&&ee.pending>be&&(k.adler=n(k.adler,ee.pending_buf,ee.pending-be,be)),we===0&&(ee.status=xe)}else ee.status=xe;if(ee.status===xe&&(ee.gzhead.hcrc?(ee.pending+2>ee.pending_buf_size&&Sn(k),ee.pending+2<=ee.pending_buf_size&&(Vt(ee,k.adler&255),Vt(ee,k.adler>>8&255),k.adler=0,ee.status=et)):ee.status=et),ee.pending!==0){if(Sn(k),k.avail_out===0)return ee.last_flush=-1,S}else if(k.avail_in===0&&Bt(Se)<=Bt(en)&&Se!==c)return cn(k,b);if(ee.status===rt&&k.avail_in!==0)return cn(k,b);if(k.avail_in!==0||ee.lookahead!==0||Se!==t&&ee.status!==rt){let dt=ee.strategy===I?Ye(ee,Se):ee.strategy===A?Je(ee,Se):le[ee.level].func(ee,Se);if((dt===Gt||dt===Xt)&&(ee.status=rt),dt===je||dt===Gt)return k.avail_out===0&&(ee.last_flush=-1),S;if(dt===Ft&&(Se===i?a(ee):Se!==g&&(h(ee,0,0,!1),Se===o&&(gn(ee.head),ee.lookahead===0&&(ee.strstart=0,ee.block_start=0,ee.insert=0))),Sn(k),k.avail_out===0))return ee.last_flush=-1,S}return Se!==c?S:ee.wrap<=0?u:(ee.wrap===2?(Vt(ee,k.adler&255),Vt(ee,k.adler>>8&255),Vt(ee,k.adler>>16&255),Vt(ee,k.adler>>24&255),Vt(ee,k.total_in&255),Vt(ee,k.total_in>>8&255),Vt(ee,k.total_in>>16&255),Vt(ee,k.total_in>>24&255)):(Wn(ee,k.adler>>>16),Wn(ee,k.adler&65535)),Sn(k),ee.wrap>0&&(ee.wrap=-ee.wrap),ee.pending!==0?S:u)},"deflate"),me=r(k=>{if(!k||!k.state)return v;const Se=k.state.status;return Se!==it&&Se!==Dt&&Se!==wt&&Se!==Pe&&Se!==xe&&Se!==et&&Se!==rt?cn(k,v):(k.state=null,Se===et?cn(k,E):S)},"deflateEnd"),Me=r((k,Se)=>{let be=Se.length;if(!k||!k.state)return v;const we=k.state,ee=we.wrap;if(ee===2||ee===1&&we.status!==it||we.lookahead)return v;if(ee===1&&(k.adler=s(k.adler,Se,be,0)),we.wrap=0,be>=we.w_size){ee===0&&(gn(we.head),we.strstart=0,we.block_start=0,we.insert=0);let xn=new Uint8Array(we.w_size);xn.set(Se.subarray(be-we.w_size,be),0),Se=xn,be=we.w_size}const en=k.avail_in,dt=k.next_in,Ct=k.input;for(k.avail_in=be,k.next_in=0,k.input=Se,It(we);we.lookahead>=Ae;){let xn=we.strstart,Qt=we.lookahead-(Ae-1);do we.ins_h=$n(we,we.ins_h,we.window[xn+Ae-1]),we.prev[xn&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=xn,xn++;while(--Qt);we.strstart=xn,we.lookahead=Ae-1,It(we)}return we.strstart+=we.lookahead,we.block_start=we.strstart,we.insert=we.lookahead,we.lookahead=0,we.match_length=we.prev_length=Ae-1,we.match_available=0,k.next_in=dt,k.input=Ct,k.avail_in=en,we.wrap=ee,S},"deflateSetDictionary");B.exports.deflateInit=ze,B.exports.deflateInit2=pt,B.exports.deflateReset=ye,B.exports.deflateResetKeep=Q,B.exports.deflateSetHeader=Ee,B.exports.deflate=st,B.exports.deflateEnd=me,B.exports.deflateSetDictionary=Me,B.exports.deflateInfo="pako deflate (from Nodeca project)"},9654919892:B=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r(l,"GZheader"),B.exports=l},1551921669:B=>{"use strict";B.exports=r(function(h,p){let m,a,s,n,e,t,i,o,c,g,S,u,v,E,b,_,C,I,A,w,O,R,F,V;const $=h.state;m=h.next_in,F=h.input,a=m+(h.avail_in-5),s=h.next_out,V=h.output,n=s-(p-h.avail_out),e=s+(h.avail_out-257),t=$.dmax,i=$.wsize,o=$.whave,c=$.wnext,g=$.window,S=$.hold,u=$.bits,v=$.lencode,E=$.distcode,b=(1<<$.lenbits)-1,_=(1<<$.distbits)-1;e:do{u<15&&(S+=F[m++]<<u,u+=8,S+=F[m++]<<u,u+=8),C=v[S&b];t:for(;;){if(I=C>>>24,S>>>=I,u-=I,I=C>>>16&255,I===0)V[s++]=C&65535;else if(I&16){A=C&65535,I&=15,I&&(u<I&&(S+=F[m++]<<u,u+=8),A+=S&(1<<I)-1,S>>>=I,u-=I),u<15&&(S+=F[m++]<<u,u+=8,S+=F[m++]<<u,u+=8),C=E[S&_];n:for(;;){if(I=C>>>24,S>>>=I,u-=I,I=C>>>16&255,I&16){if(w=C&65535,I&=15,u<I&&(S+=F[m++]<<u,u+=8,u<I&&(S+=F[m++]<<u,u+=8)),w+=S&(1<<I)-1,w>t){h.msg="invalid distance too far back",$.mode=30;break e}if(S>>>=I,u-=I,I=s-n,w>I){if(I=w-I,I>o&&$.sane){h.msg="invalid distance too far back",$.mode=30;break e}if(O=0,R=g,c===0){if(O+=i-I,I<A){A-=I;do V[s++]=g[O++];while(--I);O=s-w,R=V}}else if(c<I){if(O+=i+c-I,I-=c,I<A){A-=I;do V[s++]=g[O++];while(--I);if(O=0,c<A){I=c,A-=I;do V[s++]=g[O++];while(--I);O=s-w,R=V}}}else if(O+=c-I,I<A){A-=I;do V[s++]=g[O++];while(--I);O=s-w,R=V}for(;A>2;)V[s++]=R[O++],V[s++]=R[O++],V[s++]=R[O++],A-=3;A&&(V[s++]=R[O++],A>1&&(V[s++]=R[O++]))}else{O=s-w;do V[s++]=V[O++],V[s++]=V[O++],V[s++]=V[O++],A-=3;while(A>2);A&&(V[s++]=V[O++],A>1&&(V[s++]=V[O++]))}}else if(I&64){h.msg="invalid distance code",$.mode=30;break e}else{C=E[(C&65535)+(S&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){$.mode=12;break e}else{h.msg="invalid literal/length code",$.mode=30;break e}else{C=v[(C&65535)+(S&(1<<I)-1)];continue t}break}}while(m<a&&s<e);A=u>>3,m-=A,u-=A<<3,S&=(1<<u)-1,h.next_in=m,h.next_out=s,h.avail_in=m<a?5+(a-m):5-(m-a),h.avail_out=s<e?257+(e-s):257-(s-e),$.hold=S,$.bits=u},"inflate_fast")},8029791791:(B,l,d)=>{"use strict";const f=d(3145109445),h=d(3332910147),p=d(1551921669),m=d(9262713900),a=0,s=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:c,Z_NEED_DICT:g,Z_STREAM_ERROR:S,Z_DATA_ERROR:u,Z_MEM_ERROR:v,Z_BUF_ERROR:E,Z_DEFLATED:b}=d(9516153853),_=1,C=2,I=3,A=4,w=5,O=6,R=7,F=8,V=9,$=10,X=11,Y=12,ne=13,ie=14,ge=15,Ie=16,We=17,ct=18,Ae=19,Fe=20,Xe=21,Ge=22,it=23,Dt=24,wt=25,Pe=26,xe=27,et=28,rt=29,je=30,Ft=31,Gt=32,Xt=852,sn=592,Bt=15,gn=r(le=>(le>>>24&255)+(le>>>8&65280)+((le&65280)<<8)+((le&255)<<24),"zswap32");function Ci(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}r(Ci,"InflateState");const $n=r(le=>{if(!le||!le.state)return S;const Ue=le.state;return le.total_in=le.total_out=Ue.total=0,le.msg="",Ue.wrap&&(le.adler=Ue.wrap&1),Ue.mode=_,Ue.last=0,Ue.havedict=0,Ue.dmax=32768,Ue.head=null,Ue.hold=0,Ue.bits=0,Ue.lencode=Ue.lendyn=new Int32Array(Xt),Ue.distcode=Ue.distdyn=new Int32Array(sn),Ue.sane=1,Ue.back=-1,o},"inflateResetKeep"),Sn=r(le=>{if(!le||!le.state)return S;const Ue=le.state;return Ue.wsize=0,Ue.whave=0,Ue.wnext=0,$n(le)},"inflateReset"),nn=r((le,Ue)=>{let G;if(!le||!le.state)return S;const Q=le.state;return Ue<0?(G=0,Ue=-Ue):(G=(Ue>>4)+1,Ue<48&&(Ue&=15)),Ue&&(Ue<8||Ue>15)?S:(Q.window!==null&&Q.wbits!==Ue&&(Q.window=null),Q.wrap=G,Q.wbits=Ue,Sn(le))},"inflateReset2"),Vt=r((le,Ue)=>{if(!le)return S;const G=new Ci;le.state=G,G.window=null;const Q=nn(le,Ue);return Q!==o&&(le.state=null),Q},"inflateInit2"),Wn=r(le=>Vt(le,Bt),"inflateInit");let Lt=!0,zt,It;const z=r(le=>{if(Lt){zt=new Int32Array(512),It=new Int32Array(32);let Ue=0;for(;Ue<144;)le.lens[Ue++]=8;for(;Ue<256;)le.lens[Ue++]=9;for(;Ue<280;)le.lens[Ue++]=7;for(;Ue<288;)le.lens[Ue++]=8;for(m(s,le.lens,0,288,zt,0,le.work,{bits:9}),Ue=0;Ue<32;)le.lens[Ue++]=5;m(n,le.lens,0,32,It,0,le.work,{bits:5}),Lt=!1}le.lencode=zt,le.lenbits=9,le.distcode=It,le.distbits=5},"fixedtables"),Ve=r((le,Ue,G,Q)=>{let ye;const Ee=le.state;return Ee.window===null&&(Ee.wsize=1<<Ee.wbits,Ee.wnext=0,Ee.whave=0,Ee.window=new Uint8Array(Ee.wsize)),Q>=Ee.wsize?(Ee.window.set(Ue.subarray(G-Ee.wsize,G),0),Ee.wnext=0,Ee.whave=Ee.wsize):(ye=Ee.wsize-Ee.wnext,ye>Q&&(ye=Q),Ee.window.set(Ue.subarray(G-Q,G-Q+ye),Ee.wnext),Q-=ye,Q?(Ee.window.set(Ue.subarray(G-Q,G),0),Ee.wnext=Q,Ee.whave=Ee.wsize):(Ee.wnext+=ye,Ee.wnext===Ee.wsize&&(Ee.wnext=0),Ee.whave<Ee.wsize&&(Ee.whave+=ye))),0},"updatewindow"),He=r((le,Ue)=>{let G,Q,ye,Ee,pt,ze,st,me,Me,k,Se,be,we,ee,en=0,dt,Ct,xn,Qt,Xi,Pi,Kn,ni;const Mn=new Uint8Array(4);let qn,bi;const xr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!le||!le.state||!le.output||!le.input&&le.avail_in!==0)return S;G=le.state,G.mode===Y&&(G.mode=ne),pt=le.next_out,ye=le.output,st=le.avail_out,Ee=le.next_in,Q=le.input,ze=le.avail_in,me=G.hold,Me=G.bits,k=ze,Se=st,ni=o;e:for(;;)switch(G.mode){case _:if(G.wrap===0){G.mode=ne;break}for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(G.wrap&2&&me===35615){G.check=0,Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0),me=0,Me=0,G.mode=C;break}if(G.flags=0,G.head&&(G.head.done=!1),!(G.wrap&1)||(((me&255)<<8)+(me>>8))%31){le.msg="incorrect header check",G.mode=je;break}if((me&15)!==b){le.msg="unknown compression method",G.mode=je;break}if(me>>>=4,Me-=4,Kn=(me&15)+8,G.wbits===0)G.wbits=Kn;else if(Kn>G.wbits){le.msg="invalid window size",G.mode=je;break}G.dmax=1<<G.wbits,le.adler=G.check=1,G.mode=me&512?$:Y,me=0,Me=0;break;case C:for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(G.flags=me,(G.flags&255)!==b){le.msg="unknown compression method",G.mode=je;break}if(G.flags&57344){le.msg="unknown header flags set",G.mode=je;break}G.head&&(G.head.text=me>>8&1),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0)),me=0,Me=0,G.mode=I;case I:for(;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.head&&(G.head.time=me),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,Mn[2]=me>>>16&255,Mn[3]=me>>>24&255,G.check=h(G.check,Mn,4,0)),me=0,Me=0,G.mode=A;case A:for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.head&&(G.head.xflags=me&255,G.head.os=me>>8),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0)),me=0,Me=0,G.mode=w;case w:if(G.flags&1024){for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.length=me,G.head&&(G.head.extra_len=me),G.flags&512&&(Mn[0]=me&255,Mn[1]=me>>>8&255,G.check=h(G.check,Mn,2,0)),me=0,Me=0}else G.head&&(G.head.extra=null);G.mode=O;case O:if(G.flags&1024&&(be=G.length,be>ze&&(be=ze),be&&(G.head&&(Kn=G.head.extra_len-G.length,G.head.extra||(G.head.extra=new Uint8Array(G.head.extra_len)),G.head.extra.set(Q.subarray(Ee,Ee+be),Kn)),G.flags&512&&(G.check=h(G.check,Q,be,Ee)),ze-=be,Ee+=be,G.length-=be),G.length))break e;G.length=0,G.mode=R;case R:if(G.flags&2048){if(ze===0)break e;be=0;do Kn=Q[Ee+be++],G.head&&Kn&&G.length<65536&&(G.head.name+=String.fromCharCode(Kn));while(Kn&&be<ze);if(G.flags&512&&(G.check=h(G.check,Q,be,Ee)),ze-=be,Ee+=be,Kn)break e}else G.head&&(G.head.name=null);G.length=0,G.mode=F;case F:if(G.flags&4096){if(ze===0)break e;be=0;do Kn=Q[Ee+be++],G.head&&Kn&&G.length<65536&&(G.head.comment+=String.fromCharCode(Kn));while(Kn&&be<ze);if(G.flags&512&&(G.check=h(G.check,Q,be,Ee)),ze-=be,Ee+=be,Kn)break e}else G.head&&(G.head.comment=null);G.mode=V;case V:if(G.flags&512){for(;Me<16;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(me!==(G.check&65535)){le.msg="header crc mismatch",G.mode=je;break}me=0,Me=0}G.head&&(G.head.hcrc=G.flags>>9&1,G.head.done=!0),le.adler=G.check=0,G.mode=Y;break;case $:for(;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}le.adler=G.check=gn(me),me=0,Me=0,G.mode=X;case X:if(G.havedict===0)return le.next_out=pt,le.avail_out=st,le.next_in=Ee,le.avail_in=ze,G.hold=me,G.bits=Me,g;le.adler=G.check=1,G.mode=Y;case Y:if(Ue===t||Ue===i)break e;case ne:if(G.last){me>>>=Me&7,Me-=Me&7,G.mode=xe;break}for(;Me<3;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}switch(G.last=me&1,me>>>=1,Me-=1,me&3){case 0:G.mode=ie;break;case 1:if(z(G),G.mode=Fe,Ue===i){me>>>=2,Me-=2;break e}break;case 2:G.mode=We;break;case 3:le.msg="invalid block type",G.mode=je}me>>>=2,Me-=2;break;case ie:for(me>>>=Me&7,Me-=Me&7;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if((me&65535)!==(me>>>16^65535)){le.msg="invalid stored block lengths",G.mode=je;break}if(G.length=me&65535,me=0,Me=0,G.mode=ge,Ue===i)break e;case ge:G.mode=Ie;case Ie:if(be=G.length,be){if(be>ze&&(be=ze),be>st&&(be=st),be===0)break e;ye.set(Q.subarray(Ee,Ee+be),pt),ze-=be,Ee+=be,st-=be,pt+=be,G.length-=be;break}G.mode=Y;break;case We:for(;Me<14;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(G.nlen=(me&31)+257,me>>>=5,Me-=5,G.ndist=(me&31)+1,me>>>=5,Me-=5,G.ncode=(me&15)+4,me>>>=4,Me-=4,G.nlen>286||G.ndist>30){le.msg="too many length or distance symbols",G.mode=je;break}G.have=0,G.mode=ct;case ct:for(;G.have<G.ncode;){for(;Me<3;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.lens[xr[G.have++]]=me&7,me>>>=3,Me-=3}for(;G.have<19;)G.lens[xr[G.have++]]=0;if(G.lencode=G.lendyn,G.lenbits=7,qn={bits:G.lenbits},ni=m(a,G.lens,0,19,G.lencode,0,G.work,qn),G.lenbits=qn.bits,ni){le.msg="invalid code lengths set",G.mode=je;break}G.have=0,G.mode=Ae;case Ae:for(;G.have<G.nlen+G.ndist;){for(;en=G.lencode[me&(1<<G.lenbits)-1],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(xn<16)me>>>=dt,Me-=dt,G.lens[G.have++]=xn;else{if(xn===16){for(bi=dt+2;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(me>>>=dt,Me-=dt,G.have===0){le.msg="invalid bit length repeat",G.mode=je;break}Kn=G.lens[G.have-1],be=3+(me&3),me>>>=2,Me-=2}else if(xn===17){for(bi=dt+3;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=dt,Me-=dt,Kn=0,be=3+(me&7),me>>>=3,Me-=3}else{for(bi=dt+7;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=dt,Me-=dt,Kn=0,be=11+(me&127),me>>>=7,Me-=7}if(G.have+be>G.nlen+G.ndist){le.msg="invalid bit length repeat",G.mode=je;break}for(;be--;)G.lens[G.have++]=Kn}}if(G.mode===je)break;if(G.lens[256]===0){le.msg="invalid code -- missing end-of-block",G.mode=je;break}if(G.lenbits=9,qn={bits:G.lenbits},ni=m(s,G.lens,0,G.nlen,G.lencode,0,G.work,qn),G.lenbits=qn.bits,ni){le.msg="invalid literal/lengths set",G.mode=je;break}if(G.distbits=6,G.distcode=G.distdyn,qn={bits:G.distbits},ni=m(n,G.lens,G.nlen,G.ndist,G.distcode,0,G.work,qn),G.distbits=qn.bits,ni){le.msg="invalid distances set",G.mode=je;break}if(G.mode=Fe,Ue===i)break e;case Fe:G.mode=Xe;case Xe:if(ze>=6&&st>=258){le.next_out=pt,le.avail_out=st,le.next_in=Ee,le.avail_in=ze,G.hold=me,G.bits=Me,p(le,Se),pt=le.next_out,ye=le.output,st=le.avail_out,Ee=le.next_in,Q=le.input,ze=le.avail_in,me=G.hold,Me=G.bits,G.mode===Y&&(G.back=-1);break}for(G.back=0;en=G.lencode[me&(1<<G.lenbits)-1],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(Ct&&!(Ct&240)){for(Qt=dt,Xi=Ct,Pi=xn;en=G.lencode[Pi+((me&(1<<Qt+Xi)-1)>>Qt)],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(Qt+dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=Qt,Me-=Qt,G.back+=Qt}if(me>>>=dt,Me-=dt,G.back+=dt,G.length=xn,Ct===0){G.mode=Pe;break}if(Ct&32){G.back=-1,G.mode=Y;break}if(Ct&64){le.msg="invalid literal/length code",G.mode=je;break}G.extra=Ct&15,G.mode=Ge;case Ge:if(G.extra){for(bi=G.extra;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.length+=me&(1<<G.extra)-1,me>>>=G.extra,Me-=G.extra,G.back+=G.extra}G.was=G.length,G.mode=it;case it:for(;en=G.distcode[me&(1<<G.distbits)-1],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(!(Ct&240)){for(Qt=dt,Xi=Ct,Pi=xn;en=G.distcode[Pi+((me&(1<<Qt+Xi)-1)>>Qt)],dt=en>>>24,Ct=en>>>16&255,xn=en&65535,!(Qt+dt<=Me);){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}me>>>=Qt,Me-=Qt,G.back+=Qt}if(me>>>=dt,Me-=dt,G.back+=dt,Ct&64){le.msg="invalid distance code",G.mode=je;break}G.offset=xn,G.extra=Ct&15,G.mode=Dt;case Dt:if(G.extra){for(bi=G.extra;Me<bi;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}G.offset+=me&(1<<G.extra)-1,me>>>=G.extra,Me-=G.extra,G.back+=G.extra}if(G.offset>G.dmax){le.msg="invalid distance too far back",G.mode=je;break}G.mode=wt;case wt:if(st===0)break e;if(be=Se-st,G.offset>be){if(be=G.offset-be,be>G.whave&&G.sane){le.msg="invalid distance too far back",G.mode=je;break}be>G.wnext?(be-=G.wnext,we=G.wsize-be):we=G.wnext-be,be>G.length&&(be=G.length),ee=G.window}else ee=ye,we=pt-G.offset,be=G.length;be>st&&(be=st),st-=be,G.length-=be;do ye[pt++]=ee[we++];while(--be);G.length===0&&(G.mode=Xe);break;case Pe:if(st===0)break e;ye[pt++]=G.length,st--,G.mode=Xe;break;case xe:if(G.wrap){for(;Me<32;){if(ze===0)break e;ze--,me|=Q[Ee++]<<Me,Me+=8}if(Se-=st,le.total_out+=Se,G.total+=Se,Se&&(le.adler=G.check=G.flags?h(G.check,ye,Se,pt-Se):f(G.check,ye,Se,pt-Se)),Se=st,(G.flags?me:gn(me))!==G.check){le.msg="incorrect data check",G.mode=je;break}me=0,Me=0}G.mode=et;case et:if(G.wrap&&G.flags){for(;Me<32;){if(ze===0)break e;ze--,me+=Q[Ee++]<<Me,Me+=8}if(me!==(G.total&4294967295)){le.msg="incorrect length check",G.mode=je;break}me=0,Me=0}G.mode=rt;case rt:ni=c;break e;case je:ni=u;break e;case Ft:return v;case Gt:default:return S}return le.next_out=pt,le.avail_out=st,le.next_in=Ee,le.avail_in=ze,G.hold=me,G.bits=Me,(G.wsize||Se!==le.avail_out&&G.mode<je&&(G.mode<xe||Ue!==e))&&Ve(le,le.output,le.next_out,Se-le.avail_out)?(G.mode=Ft,v):(k-=le.avail_in,Se-=le.avail_out,le.total_in+=k,le.total_out+=Se,G.total+=Se,G.wrap&&Se&&(le.adler=G.check=G.flags?h(G.check,ye,Se,le.next_out-Se):f(G.check,ye,Se,le.next_out-Se)),le.data_type=G.bits+(G.last?64:0)+(G.mode===Y?128:0)+(G.mode===Fe||G.mode===ge?256:0),(k===0&&Se===0||Ue===e)&&ni===o&&(ni=E),ni)},"inflate"),Je=r(le=>{if(!le||!le.state)return S;let Ue=le.state;return Ue.window&&(Ue.window=null),le.state=null,o},"inflateEnd"),Ye=r((le,Ue)=>{if(!le||!le.state)return S;const G=le.state;return G.wrap&2?(G.head=Ue,Ue.done=!1,o):S},"inflateGetHeader"),lt=r((le,Ue)=>{const G=Ue.length;let Q,ye,Ee;return!le||!le.state||(Q=le.state,Q.wrap!==0&&Q.mode!==X)?S:Q.mode===X&&(ye=1,ye=f(ye,Ue,G,0),ye!==Q.check)?u:(Ee=Ve(le,Ue,G,G),Ee?(Q.mode=Ft,v):(Q.havedict=1,o))},"inflateSetDictionary");B.exports.inflateReset=Sn,B.exports.inflateReset2=nn,B.exports.inflateResetKeep=$n,B.exports.inflateInit=Wn,B.exports.inflateInit2=Vt,B.exports.inflate=He,B.exports.inflateEnd=Je,B.exports.inflateGetHeader=Ye,B.exports.inflateSetDictionary=lt,B.exports.inflateInfo="pako inflate (from Nodeca project)"},9262713900:B=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=r((i,o,c,g,S,u,v,E)=>{const b=E.bits;let _=0,C=0,I=0,A=0,w=0,O=0,R=0,F=0,V=0,$=0,X,Y,ne,ie,ge,Ie=null,We=0,ct;const Ae=new Uint16Array(15+1),Fe=new Uint16Array(15+1);let Xe=null,Ge=0,it,Dt,wt;for(_=0;_<=15;_++)Ae[_]=0;for(C=0;C<g;C++)Ae[o[c+C]]++;for(w=b,A=15;A>=1&&Ae[A]===0;A--);if(w>A&&(w=A),A===0)return S[u++]=1<<24|64<<16|0,S[u++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<A&&Ae[I]===0;I++);for(w<I&&(w=I),F=1,_=1;_<=15;_++)if(F<<=1,F-=Ae[_],F<0)return-1;if(F>0&&(i===0||A!==1))return-1;for(Fe[1]=0,_=1;_<15;_++)Fe[_+1]=Fe[_]+Ae[_];for(C=0;C<g;C++)o[c+C]!==0&&(v[Fe[o[c+C]]++]=C);if(i===0?(Ie=Xe=v,ct=19):i===1?(Ie=a,We-=257,Xe=s,Ge-=257,ct=256):(Ie=n,Xe=e,ct=-1),$=0,C=0,_=I,ge=u,O=w,R=0,ne=-1,V=1<<w,ie=V-1,i===1&&V>852||i===2&&V>592)return 1;for(;;){it=_-R,v[C]<ct?(Dt=0,wt=v[C]):v[C]>ct?(Dt=Xe[Ge+v[C]],wt=Ie[We+v[C]]):(Dt=32+64,wt=0),X=1<<_-R,Y=1<<O,I=Y;do Y-=X,S[ge+($>>R)+Y]=it<<24|Dt<<16|wt|0;while(Y!==0);for(X=1<<_-1;$&X;)X>>=1;if(X!==0?($&=X-1,$+=X):$=0,C++,--Ae[_]===0){if(_===A)break;_=o[c+v[C]]}if(_>w&&($&ie)!==ne){for(R===0&&(R=w),ge+=I,O=_-R,F=1<<O;O+R<A&&(F-=Ae[O+R],!(F<=0));)O++,F<<=1;if(V+=1<<O,i===1&&V>852||i===2&&V>592)return 1;ne=$&ie,S[ne]=w<<24|O<<16|ge-u|0}}return $!==0&&(S[ge+$]=_-R<<24|64<<16|0),E.bits=w,0},"inflate_table");B.exports=t},4276546412:B=>{"use strict";B.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4407910137:B=>{"use strict";function p(z){let Ve=z.length;for(;--Ve>=0;)z[Ve]=0}r(p,"zero");const m=0,a=1,s=2,n=3,e=258,t=29,i=256,o=i+1+t,c=30,g=19,S=2*o+1,u=15,v=16,E=7,b=256,_=16,C=17,I=18,A=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),O=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F=512,V=new Array((o+2)*2);p(V);const $=new Array(c*2);p($);const X=new Array(F);p(X);const Y=new Array(e-n+1);p(Y);const ne=new Array(t);p(ne);const ie=new Array(c);p(ie);function ge(z,Ve,He,Je,Ye){this.static_tree=z,this.extra_bits=Ve,this.extra_base=He,this.elems=Je,this.max_length=Ye,this.has_stree=z&&z.length}r(ge,"StaticTreeDesc");let Ie,We,ct;function Ae(z,Ve){this.dyn_tree=z,this.max_code=0,this.stat_desc=Ve}r(Ae,"TreeDesc");const Fe=r(z=>z<256?X[z]:X[256+(z>>>7)],"d_code"),Xe=r((z,Ve)=>{z.pending_buf[z.pending++]=Ve&255,z.pending_buf[z.pending++]=Ve>>>8&255},"put_short"),Ge=r((z,Ve,He)=>{z.bi_valid>v-He?(z.bi_buf|=Ve<<z.bi_valid&65535,Xe(z,z.bi_buf),z.bi_buf=Ve>>v-z.bi_valid,z.bi_valid+=He-v):(z.bi_buf|=Ve<<z.bi_valid&65535,z.bi_valid+=He)},"send_bits"),it=r((z,Ve,He)=>{Ge(z,He[Ve*2],He[Ve*2+1])},"send_code"),Dt=r((z,Ve)=>{let He=0;do He|=z&1,z>>>=1,He<<=1;while(--Ve>0);return He>>>1},"bi_reverse"),wt=r(z=>{z.bi_valid===16?(Xe(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):z.bi_valid>=8&&(z.pending_buf[z.pending++]=z.bi_buf&255,z.bi_buf>>=8,z.bi_valid-=8)},"bi_flush"),Pe=r((z,Ve)=>{const He=Ve.dyn_tree,Je=Ve.max_code,Ye=Ve.stat_desc.static_tree,lt=Ve.stat_desc.has_stree,le=Ve.stat_desc.extra_bits,Ue=Ve.stat_desc.extra_base,G=Ve.stat_desc.max_length;let Q,ye,Ee,pt,ze,st,me=0;for(pt=0;pt<=u;pt++)z.bl_count[pt]=0;for(He[z.heap[z.heap_max]*2+1]=0,Q=z.heap_max+1;Q<S;Q++)ye=z.heap[Q],pt=He[He[ye*2+1]*2+1]+1,pt>G&&(pt=G,me++),He[ye*2+1]=pt,!(ye>Je)&&(z.bl_count[pt]++,ze=0,ye>=Ue&&(ze=le[ye-Ue]),st=He[ye*2],z.opt_len+=st*(pt+ze),lt&&(z.static_len+=st*(Ye[ye*2+1]+ze)));if(me!==0){do{for(pt=G-1;z.bl_count[pt]===0;)pt--;z.bl_count[pt]--,z.bl_count[pt+1]+=2,z.bl_count[G]--,me-=2}while(me>0);for(pt=G;pt!==0;pt--)for(ye=z.bl_count[pt];ye!==0;)Ee=z.heap[--Q],!(Ee>Je)&&(He[Ee*2+1]!==pt&&(z.opt_len+=(pt-He[Ee*2+1])*He[Ee*2],He[Ee*2+1]=pt),ye--)}},"gen_bitlen"),xe=r((z,Ve,He)=>{const Je=new Array(u+1);let Ye=0,lt,le;for(lt=1;lt<=u;lt++)Je[lt]=Ye=Ye+He[lt-1]<<1;for(le=0;le<=Ve;le++){let Ue=z[le*2+1];Ue!==0&&(z[le*2]=Dt(Je[Ue]++,Ue))}},"gen_codes"),et=r(()=>{let z,Ve,He,Je,Ye;const lt=new Array(u+1);for(He=0,Je=0;Je<t-1;Je++)for(ne[Je]=He,z=0;z<1<<A[Je];z++)Y[He++]=Je;for(Y[He-1]=Je,Ye=0,Je=0;Je<16;Je++)for(ie[Je]=Ye,z=0;z<1<<w[Je];z++)X[Ye++]=Je;for(Ye>>=7;Je<c;Je++)for(ie[Je]=Ye<<7,z=0;z<1<<w[Je]-7;z++)X[256+Ye++]=Je;for(Ve=0;Ve<=u;Ve++)lt[Ve]=0;for(z=0;z<=143;)V[z*2+1]=8,z++,lt[8]++;for(;z<=255;)V[z*2+1]=9,z++,lt[9]++;for(;z<=279;)V[z*2+1]=7,z++,lt[7]++;for(;z<=287;)V[z*2+1]=8,z++,lt[8]++;for(xe(V,o+1,lt),z=0;z<c;z++)$[z*2+1]=5,$[z*2]=Dt(z,5);Ie=new ge(V,A,i+1,o,u),We=new ge($,w,0,c,u),ct=new ge(new Array(0),O,0,g,E)},"tr_static_init"),rt=r(z=>{let Ve;for(Ve=0;Ve<o;Ve++)z.dyn_ltree[Ve*2]=0;for(Ve=0;Ve<c;Ve++)z.dyn_dtree[Ve*2]=0;for(Ve=0;Ve<g;Ve++)z.bl_tree[Ve*2]=0;z.dyn_ltree[b*2]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0},"init_block"),je=r(z=>{z.bi_valid>8?Xe(z,z.bi_buf):z.bi_valid>0&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0},"bi_windup"),Ft=r((z,Ve,He,Je)=>{je(z),Je&&(Xe(z,He),Xe(z,~He)),z.pending_buf.set(z.window.subarray(Ve,Ve+He),z.pending),z.pending+=He},"copy_block"),Gt=r((z,Ve,He,Je)=>{const Ye=Ve*2,lt=He*2;return z[Ye]<z[lt]||z[Ye]===z[lt]&&Je[Ve]<=Je[He]},"smaller"),Xt=r((z,Ve,He)=>{const Je=z.heap[He];let Ye=He<<1;for(;Ye<=z.heap_len&&(Ye<z.heap_len&&Gt(Ve,z.heap[Ye+1],z.heap[Ye],z.depth)&&Ye++,!Gt(Ve,Je,z.heap[Ye],z.depth));)z.heap[He]=z.heap[Ye],He=Ye,Ye<<=1;z.heap[He]=Je},"pqdownheap"),sn=r((z,Ve,He)=>{let Je,Ye,lt=0,le,Ue;if(z.last_lit!==0)do Je=z.pending_buf[z.d_buf+lt*2]<<8|z.pending_buf[z.d_buf+lt*2+1],Ye=z.pending_buf[z.l_buf+lt],lt++,Je===0?it(z,Ye,Ve):(le=Y[Ye],it(z,le+i+1,Ve),Ue=A[le],Ue!==0&&(Ye-=ne[le],Ge(z,Ye,Ue)),Je--,le=Fe(Je),it(z,le,He),Ue=w[le],Ue!==0&&(Je-=ie[le],Ge(z,Je,Ue)));while(lt<z.last_lit);it(z,b,Ve)},"compress_block"),cn=r((z,Ve)=>{const He=Ve.dyn_tree,Je=Ve.stat_desc.static_tree,Ye=Ve.stat_desc.has_stree,lt=Ve.stat_desc.elems;let le,Ue,G=-1,Q;for(z.heap_len=0,z.heap_max=S,le=0;le<lt;le++)He[le*2]!==0?(z.heap[++z.heap_len]=G=le,z.depth[le]=0):He[le*2+1]=0;for(;z.heap_len<2;)Q=z.heap[++z.heap_len]=G<2?++G:0,He[Q*2]=1,z.depth[Q]=0,z.opt_len--,Ye&&(z.static_len-=Je[Q*2+1]);for(Ve.max_code=G,le=z.heap_len>>1;le>=1;le--)Xt(z,He,le);Q=lt;do le=z.heap[1],z.heap[1]=z.heap[z.heap_len--],Xt(z,He,1),Ue=z.heap[1],z.heap[--z.heap_max]=le,z.heap[--z.heap_max]=Ue,He[Q*2]=He[le*2]+He[Ue*2],z.depth[Q]=(z.depth[le]>=z.depth[Ue]?z.depth[le]:z.depth[Ue])+1,He[le*2+1]=He[Ue*2+1]=Q,z.heap[1]=Q++,Xt(z,He,1);while(z.heap_len>=2);z.heap[--z.heap_max]=z.heap[1],Pe(z,Ve),xe(He,G,z.bl_count)},"build_tree"),Bt=r((z,Ve,He)=>{let Je,Ye=-1,lt,le=Ve[0*2+1],Ue=0,G=7,Q=4;for(le===0&&(G=138,Q=3),Ve[(He+1)*2+1]=65535,Je=0;Je<=He;Je++)lt=le,le=Ve[(Je+1)*2+1],!(++Ue<G&&lt===le)&&(Ue<Q?z.bl_tree[lt*2]+=Ue:lt!==0?(lt!==Ye&&z.bl_tree[lt*2]++,z.bl_tree[_*2]++):Ue<=10?z.bl_tree[C*2]++:z.bl_tree[I*2]++,Ue=0,Ye=lt,le===0?(G=138,Q=3):lt===le?(G=6,Q=3):(G=7,Q=4))},"scan_tree"),gn=r((z,Ve,He)=>{let Je,Ye=-1,lt,le=Ve[0*2+1],Ue=0,G=7,Q=4;for(le===0&&(G=138,Q=3),Je=0;Je<=He;Je++)if(lt=le,le=Ve[(Je+1)*2+1],!(++Ue<G&&lt===le)){if(Ue<Q)do it(z,lt,z.bl_tree);while(--Ue!==0);else lt!==0?(lt!==Ye&&(it(z,lt,z.bl_tree),Ue--),it(z,_,z.bl_tree),Ge(z,Ue-3,2)):Ue<=10?(it(z,C,z.bl_tree),Ge(z,Ue-3,3)):(it(z,I,z.bl_tree),Ge(z,Ue-11,7));Ue=0,Ye=lt,le===0?(G=138,Q=3):lt===le?(G=6,Q=3):(G=7,Q=4)}},"send_tree"),Ci=r(z=>{let Ve;for(Bt(z,z.dyn_ltree,z.l_desc.max_code),Bt(z,z.dyn_dtree,z.d_desc.max_code),cn(z,z.bl_desc),Ve=g-1;Ve>=3&&z.bl_tree[R[Ve]*2+1]===0;Ve--);return z.opt_len+=3*(Ve+1)+5+5+4,Ve},"build_bl_tree"),$n=r((z,Ve,He,Je)=>{let Ye;for(Ge(z,Ve-257,5),Ge(z,He-1,5),Ge(z,Je-4,4),Ye=0;Ye<Je;Ye++)Ge(z,z.bl_tree[R[Ye]*2+1],3);gn(z,z.dyn_ltree,Ve-1),gn(z,z.dyn_dtree,He-1)},"send_all_trees"),Sn=r(z=>{let Ve=4093624447,He;for(He=0;He<=31;He++,Ve>>>=1)if(Ve&1&&z.dyn_ltree[He*2]!==0)return 0;if(z.dyn_ltree[9*2]!==0||z.dyn_ltree[10*2]!==0||z.dyn_ltree[13*2]!==0)return 1;for(He=32;He<i;He++)if(z.dyn_ltree[He*2]!==0)return 1;return 0},"detect_data_type");let nn=!1;const Vt=r(z=>{nn||(et(),nn=!0),z.l_desc=new Ae(z.dyn_ltree,Ie),z.d_desc=new Ae(z.dyn_dtree,We),z.bl_desc=new Ae(z.bl_tree,ct),z.bi_buf=0,z.bi_valid=0,rt(z)},"_tr_init"),Wn=r((z,Ve,He,Je)=>{Ge(z,(m<<1)+(Je?1:0),3),Ft(z,Ve,He,!0)},"_tr_stored_block"),Lt=r(z=>{Ge(z,a<<1,3),it(z,b,V),wt(z)},"_tr_align"),zt=r((z,Ve,He,Je)=>{let Ye,lt,le=0;z.level>0?(z.strm.data_type===2&&(z.strm.data_type=Sn(z)),cn(z,z.l_desc),cn(z,z.d_desc),le=Ci(z),Ye=z.opt_len+3+7>>>3,lt=z.static_len+3+7>>>3,lt<=Ye&&(Ye=lt)):Ye=lt=He+5,He+4<=Ye&&Ve!==-1?Wn(z,Ve,He,Je):z.strategy===4||lt===Ye?(Ge(z,(a<<1)+(Je?1:0),3),sn(z,V,$)):(Ge(z,(s<<1)+(Je?1:0),3),$n(z,z.l_desc.max_code+1,z.d_desc.max_code+1,le+1),sn(z,z.dyn_ltree,z.dyn_dtree)),rt(z),Je&&je(z)},"_tr_flush_block"),It=r((z,Ve,He)=>(z.pending_buf[z.d_buf+z.last_lit*2]=Ve>>>8&255,z.pending_buf[z.d_buf+z.last_lit*2+1]=Ve&255,z.pending_buf[z.l_buf+z.last_lit]=He&255,z.last_lit++,Ve===0?z.dyn_ltree[He*2]++:(z.matches++,Ve--,z.dyn_ltree[(Y[He]+i+1)*2]++,z.dyn_dtree[Fe(Ve)*2]++),z.last_lit===z.lit_bufsize-1),"_tr_tally");B.exports._tr_init=Vt,B.exports._tr_stored_block=Wn,B.exports._tr_flush_block=zt,B.exports._tr_tally=It,B.exports._tr_align=Lt},8079600486:B=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r(l,"ZStream"),B.exports=l},7232944804:(B,l,d)=>{"use strict";B.exports=d(2045210164)},2045210164:(B,l,d)=>{"use strict";var f=l;f.build="minimal",f.Writer=d(7628345881),f.BufferWriter=d(4314741704),f.Reader=d(4066972109),f.BufferReader=d(5398895804),f.util=d(6381418898),f.rpc=d(9851642381),f.roots=d(2285340147),f.configure=h;function h(){f.util._configure(),f.Writer._configure(f.BufferWriter),f.Reader._configure(f.BufferReader)}r(h,"configure"),h()},4066972109:(B,l,d)=>{"use strict";B.exports=s;var f=d(6381418898),h,p=f.LongBits,m=f.utf8;function a(c,g){return RangeError("index out of range: "+c.pos+" + "+(g||1)+" > "+c.len)}r(a,"indexOutOfRange");function s(c){this.buf=c,this.pos=0,this.len=c.length}r(s,"Reader");var n=typeof Uint8Array<"u"?r(function(g){if(g instanceof Uint8Array||Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_typed_array"):r(function(g){if(Array.isArray(g))return new s(g);throw Error("illegal buffer")},"create_array"),e=r(function(){return f.Buffer?r(function(S){return(s.create=r(function(v){return f.Buffer.isBuffer(v)?new h(v):n(v)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");s.create=e(),s.prototype._slice=f.Array.prototype.subarray||f.Array.prototype.slice,s.prototype.uint32=r(function(){var g=4294967295;return r(function(){if(g=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(g=(g|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return g},"read_uint32")},"read_uint32_setup")(),s.prototype.int32=r(function(){return this.uint32()|0},"read_int32"),s.prototype.sint32=r(function(){var g=this.uint32();return g>>>1^-(g&1)|0},"read_sint32");function t(){var c=new p(0,0),g=0;if(this.len-this.pos>4){for(;g<4;++g)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw a(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<g*7)>>>0,c}if(this.len-this.pos>4){for(;g<5;++g)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;g<5;++g){if(this.pos>=this.len)throw a(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}r(t,"readLongVarint"),s.prototype.bool=r(function(){return this.uint32()!==0},"read_bool");function i(c,g){return(c[g-4]|c[g-3]<<8|c[g-2]<<16|c[g-1]<<24)>>>0}r(i,"readFixed32_end"),s.prototype.fixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),s.prototype.sfixed32=r(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new p(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}r(o,"readFixed64"),s.prototype.float=r(function(){if(this.pos+4>this.len)throw a(this,4);var g=f.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},"read_float"),s.prototype.double=r(function(){if(this.pos+8>this.len)throw a(this,4);var g=f.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},"read_double"),s.prototype.bytes=r(function(){var g=this.uint32(),S=this.pos,u=this.pos+g;if(u>this.len)throw a(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice(S,u);if(S===u){var v=f.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,u)},"read_bytes"),s.prototype.string=r(function(){var g=this.bytes();return m.read(g,0,g.length)},"read_string"),s.prototype.skip=r(function(g){if(typeof g=="number"){if(this.pos+g>this.len)throw a(this,g);this.pos+=g}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),s.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},s._configure=function(c){h=c,s.create=e(),h._configure();var g=f.Long?"toLong":"toNumber";f.merge(s.prototype,{int64:r(function(){return t.call(this)[g](!1)},"read_int64"),uint64:r(function(){return t.call(this)[g](!0)},"read_uint64"),sint64:r(function(){return t.call(this).zzDecode()[g](!1)},"read_sint64"),fixed64:r(function(){return o.call(this)[g](!0)},"read_fixed64"),sfixed64:r(function(){return o.call(this)[g](!1)},"read_sfixed64")})}},5398895804:(B,l,d)=>{"use strict";B.exports=p;var f=d(4066972109);(p.prototype=Object.create(f.prototype)).constructor=p;var h=d(6381418898);function p(m){f.call(this,m)}r(p,"BufferReader"),p._configure=function(){h.Buffer&&(p.prototype._slice=h.Buffer.prototype.slice)},p.prototype.string=r(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),p._configure()},2285340147:B=>{"use strict";B.exports={}},9851642381:(B,l,d)=>{"use strict";var f=l;f.Service=d(6359991721)},6359991721:(B,l,d)=>{"use strict";B.exports=h;var f=d(6381418898);(h.prototype=Object.create(f.EventEmitter.prototype)).constructor=h;function h(p,m,a){if(typeof p!="function")throw TypeError("rpcImpl must be a function");f.EventEmitter.call(this),this.rpcImpl=p,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(a)}r(h,"Service"),h.prototype.rpcCall=r(function p(m,a,s,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return f.asPromise(p,t,m,a,s,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,a[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),r(function(o,c){if(o)return t.emit("error",o,m),e(o);if(c===null){t.end(!0);return}if(!(c instanceof s))try{c=s[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(g){return t.emit("error",g,m),e(g)}return t.emit("data",c,m),e(null,c)},"rpcCallback"))}catch(i){t.emit("error",i,m),setTimeout(function(){e(i)},0);return}},"rpcCall"),h.prototype.end=r(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},3157215629:(B,l,d)=>{"use strict";B.exports=h;var f=d(6381418898);function h(s,n){this.lo=s>>>0,this.hi=n>>>0}r(h,"LongBits");var p=h.zero=new h(0,0);p.toNumber=function(){return 0},p.zzEncode=p.zzDecode=function(){return this},p.length=function(){return 1};var m=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=r(function(n){if(n===0)return p;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new h(t,i)},"fromNumber"),h.from=r(function(n){if(typeof n=="number")return h.fromNumber(n);if(f.isString(n))if(f.Long)n=f.Long.fromString(n);else return h.fromNumber(parseInt(n,10));return n.low||n.high?new h(n.low>>>0,n.high>>>0):p},"from"),h.prototype.toNumber=r(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=r(function(n){return f.Long?new f.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=r(function(n){return n===m?p:new h((a.call(n,0)|a.call(n,1)<<8|a.call(n,2)<<16|a.call(n,3)<<24)>>>0,(a.call(n,4)|a.call(n,5)<<8|a.call(n,6)<<16|a.call(n,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=r(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=r(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),h.prototype.zzDecode=r(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),h.prototype.length=r(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6381418898:function(B,l,d){"use strict";var f=l;f.asPromise=d(7410930532),f.base64=d(3824736026),f.EventEmitter=d(6627060659),f.float=d(6797650127),f.inquire=d(3923667175),f.utf8=d(4612067386),f.pool=d(3002561995),f.LongBits=d(3157215629),f.isNode=Boolean(typeof d.g<"u"&&d.g&&d.g.process&&d.g.process.versions&&d.g.process.versions.node),f.global=f.isNode&&d.g||typeof window<"u"&&window||typeof self<"u"&&self||this,f.emptyArray=Object.freeze?Object.freeze([]):[],f.emptyObject=Object.freeze?Object.freeze({}):{},f.isInteger=Number.isInteger||r(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),f.isString=r(function(a){return typeof a=="string"||a instanceof String},"isString"),f.isObject=r(function(a){return a&&typeof a=="object"},"isObject"),f.isset=f.isSet=r(function(a,s){var n=a[s];return n!=null&&a.hasOwnProperty(s)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),f.Buffer=function(){try{var m=f.inquire("buffer").Buffer;return m.prototype.utf8Write?m:null}catch{return null}}(),f._Buffer_from=null,f._Buffer_allocUnsafe=null,f.newBuffer=r(function(a){return typeof a=="number"?f.Buffer?f._Buffer_allocUnsafe(a):new f.Array(a):f.Buffer?f._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),f.Array=typeof Uint8Array<"u"?Uint8Array:Array,f.Long=f.global.dcodeIO&&f.global.dcodeIO.Long||f.global.Long||f.inquire("long"),f.key2Re=/^true|false|0|1$/,f.key32Re=/^-?(?:0|[1-9][0-9]*)$/,f.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,f.longToHash=r(function(a){return a?f.LongBits.from(a).toHash():f.LongBits.zeroHash},"longToHash"),f.longFromHash=r(function(a,s){var n=f.LongBits.fromHash(a);return f.Long?f.Long.fromBits(n.lo,n.hi,s):n.toNumber(Boolean(s))},"longFromHash");function h(m,a,s){for(var n=Object.keys(a),e=0;e<n.length;++e)(m[n[e]]===void 0||!s)&&(m[n[e]]=a[n[e]]);return m}r(h,"merge"),f.merge=h,f.lcFirst=r(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function p(m){function a(s,n){if(!(this instanceof a))return new a(s,n);Object.defineProperty(this,"message",{get:function(){return s}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&h(this,n)}return r(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:r(function(){return m},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:r(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}r(p,"newError"),f.newError=p,f.ProtocolError=p("ProtocolError"),f.oneOfGetter=r(function(a){for(var s={},n=0;n<a.length;++n)s[a[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(s[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),f.oneOfSetter=r(function(a){return function(s){for(var n=0;n<a.length;++n)a[n]!==s&&delete this[a[n]]}},"setOneOf"),f.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},f._configure=function(){var m=f.Buffer;if(!m){f._Buffer_from=f._Buffer_allocUnsafe=null;return}f._Buffer_from=m.from!==Uint8Array.from&&m.from||r(function(s,n){return new m(s,n)},"Buffer_from"),f._Buffer_allocUnsafe=m.allocUnsafe||r(function(s){return new m(s)},"Buffer_allocUnsafe")}},7628345881:(B,l,d)=>{"use strict";B.exports=t;var f=d(6381418898),h,p=f.LongBits,m=f.base64,a=f.utf8;function s(E,b,_){this.fn=E,this.len=b,this.next=void 0,this.val=_}r(s,"Op");function n(){}r(n,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}r(e,"State");function t(){this.len=0,this.head=new s(n,0,0),this.tail=this.head,this.states=null}r(t,"Writer");var i=r(function(){return f.Buffer?r(function(){return(t.create=r(function(){return new h},"create_buffer"))()},"create_buffer_setup"):r(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=r(function(b){return new f.Array(b)},"alloc"),f.Array!==Array&&(t.alloc=f.pool(t.alloc,f.Array.prototype.subarray)),t.prototype._push=r(function(b,_,C){return this.tail=this.tail.next=new s(b,_,C),this.len+=_,this},"push");function o(E,b,_){b[_]=E&255}r(o,"writeByte");function c(E,b,_){for(;E>127;)b[_++]=E&127|128,E>>>=7;b[_]=E}r(c,"writeVarint32");function g(E,b){this.len=E,this.next=void 0,this.val=b}r(g,"VarintOp"),g.prototype=Object.create(s.prototype),g.prototype.fn=c,t.prototype.uint32=r(function(b){return this.len+=(this.tail=this.tail.next=new g((b=b>>>0)<128?1:b<16384?2:b<2097152?3:b<268435456?4:5,b)).len,this},"write_uint32"),t.prototype.int32=r(function(b){return b<0?this._push(S,10,p.fromNumber(b)):this.uint32(b)},"write_int32"),t.prototype.sint32=r(function(b){return this.uint32((b<<1^b>>31)>>>0)},"write_sint32");function S(E,b,_){for(;E.hi;)b[_++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)b[_++]=E.lo&127|128,E.lo=E.lo>>>7;b[_++]=E.lo}r(S,"writeVarint64"),t.prototype.uint64=r(function(b){var _=p.from(b);return this._push(S,_.length(),_)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=r(function(b){var _=p.from(b).zzEncode();return this._push(S,_.length(),_)},"write_sint64"),t.prototype.bool=r(function(b){return this._push(o,1,b?1:0)},"write_bool");function u(E,b,_){b[_]=E&255,b[_+1]=E>>>8&255,b[_+2]=E>>>16&255,b[_+3]=E>>>24}r(u,"writeFixed32"),t.prototype.fixed32=r(function(b){return this._push(u,4,b>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=r(function(b){var _=p.from(b);return this._push(u,4,_.lo)._push(u,4,_.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=r(function(b){return this._push(f.float.writeFloatLE,4,b)},"write_float"),t.prototype.double=r(function(b){return this._push(f.float.writeDoubleLE,8,b)},"write_double");var v=f.Array.prototype.set?r(function(b,_,C){_.set(b,C)},"writeBytes_set"):r(function(b,_,C){for(var I=0;I<b.length;++I)_[C+I]=b[I]},"writeBytes_for");t.prototype.bytes=r(function(b){var _=b.length>>>0;if(!_)return this._push(o,1,0);if(f.isString(b)){var C=t.alloc(_=m.length(b));m.decode(b,C,0),b=C}return this.uint32(_)._push(v,_,b)},"write_bytes"),t.prototype.string=r(function(b){var _=a.length(b);return _?this.uint32(_)._push(a.write,_,b):this._push(o,1,0)},"write_string"),t.prototype.fork=r(function(){return this.states=new e(this),this.head=this.tail=new s(n,0,0),this.len=0,this},"fork"),t.prototype.reset=r(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=r(function(){var b=this.head,_=this.tail,C=this.len;return this.reset().uint32(C),C&&(this.tail.next=b.next,this.tail=_,this.len+=C),this},"ldelim"),t.prototype.finish=r(function(){for(var b=this.head.next,_=this.constructor.alloc(this.len),C=0;b;)b.fn(b.val,_,C),C+=b.len,b=b.next;return _},"finish"),t._configure=function(E){h=E,t.create=i(),h._configure()}},4314741704:(B,l,d)=>{"use strict";B.exports=p;var f=d(7628345881);(p.prototype=Object.create(f.prototype)).constructor=p;var h=d(6381418898);function p(){f.call(this)}r(p,"BufferWriter"),p._configure=function(){p.alloc=h._Buffer_allocUnsafe,p.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?r(function(s,n,e){n.set(s,e)},"writeBytesBuffer_set"):r(function(s,n,e){if(s.copy)s.copy(n,e,0,s.length);else for(var t=0;t<s.length;)n[e++]=s[t++]},"writeBytesBuffer_copy")},p.prototype.bytes=r(function(s){h.isString(s)&&(s=h._Buffer_from(s,"base64"));var n=s.length>>>0;return this.uint32(n),n&&this._push(p.writeBytesBuffer,n,s),this},"write_bytes_buffer");function m(a,s,n){a.length<40?h.utf8.write(a,s,n):s.utf8Write?s.utf8Write(a,n):s.write(a,n)}r(m,"writeStringBuffer"),p.prototype.string=r(function(s){var n=h.Buffer.byteLength(s);return this.uint32(n),n&&this._push(m,n,s),this},"write_string_buffer"),p._configure()},8400004479:(B,l,d)=>{"use strict";d.r(l),d.d(l,{__assign:()=>p,__asyncDelegator:()=>b,__asyncGenerator:()=>E,__asyncValues:()=>_,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>O,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>h,__generator:()=>t,__importDefault:()=>A,__importStar:()=>I,__makeTemplateObject:()=>C,__metadata:()=>n,__param:()=>s,__read:()=>g,__rest:()=>m,__spread:()=>S,__spreadArrays:()=>u,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f=r(function(R,F){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,$){V.__proto__=$}||function(V,$){for(var X in $)$.hasOwnProperty(X)&&(V[X]=$[X])},f(R,F)},"extendStatics");function h(R,F){f(R,F);function V(){this.constructor=R}r(V,"__"),R.prototype=F===null?Object.create(F):(V.prototype=F.prototype,new V)}r(h,"__extends");var p=r(function(){return p=Object.assign||r(function(F){for(var V,$=1,X=arguments.length;$<X;$++){V=arguments[$];for(var Y in V)Object.prototype.hasOwnProperty.call(V,Y)&&(F[Y]=V[Y])}return F},"__assign"),p.apply(this,arguments)},"__assign");function m(R,F){var V={};for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&F.indexOf($)<0&&(V[$]=R[$]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,$=Object.getOwnPropertySymbols(R);X<$.length;X++)F.indexOf($[X])<0&&Object.prototype.propertyIsEnumerable.call(R,$[X])&&(V[$[X]]=R[$[X]]);return V}r(m,"__rest");function a(R,F,V,$){var X=arguments.length,Y=X<3?F:$===null?$=Object.getOwnPropertyDescriptor(F,V):$,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(R,F,V,$);else for(var ie=R.length-1;ie>=0;ie--)(ne=R[ie])&&(Y=(X<3?ne(Y):X>3?ne(F,V,Y):ne(F,V))||Y);return X>3&&Y&&Object.defineProperty(F,V,Y),Y}r(a,"__decorate");function s(R,F){return function(V,$){F(V,$,R)}}r(s,"__param");function n(R,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(R,F)}r(n,"__metadata");function e(R,F,V,$){function X(Y){return Y instanceof V?Y:new V(function(ne){ne(Y)})}return r(X,"adopt"),new(V||(V=Promise))(function(Y,ne){function ie(We){try{Ie($.next(We))}catch(ct){ne(ct)}}r(ie,"fulfilled");function ge(We){try{Ie($.throw(We))}catch(ct){ne(ct)}}r(ge,"rejected");function Ie(We){We.done?Y(We.value):X(We.value).then(ie,ge)}r(Ie,"step"),Ie(($=$.apply(R,F||[])).next())})}r(e,"__awaiter");function t(R,F){var V={label:0,sent:function(){if(Y[0]&1)throw Y[1];return Y[1]},trys:[],ops:[]},$,X,Y,ne;return ne={next:ie(0),throw:ie(1),return:ie(2)},typeof Symbol=="function"&&(ne[Symbol.iterator]=function(){return this}),ne;function ie(Ie){return function(We){return ge([Ie,We])}}function ge(Ie){if($)throw new TypeError("Generator is already executing.");for(;V;)try{if($=1,X&&(Y=Ie[0]&2?X.return:Ie[0]?X.throw||((Y=X.return)&&Y.call(X),0):X.next)&&!(Y=Y.call(X,Ie[1])).done)return Y;switch(X=0,Y&&(Ie=[Ie[0]&2,Y.value]),Ie[0]){case 0:case 1:Y=Ie;break;case 4:return V.label++,{value:Ie[1],done:!1};case 5:V.label++,X=Ie[1],Ie=[0];continue;case 7:Ie=V.ops.pop(),V.trys.pop();continue;default:if(Y=V.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(Ie[0]===6||Ie[0]===2)){V=0;continue}if(Ie[0]===3&&(!Y||Ie[1]>Y[0]&&Ie[1]<Y[3])){V.label=Ie[1];break}if(Ie[0]===6&&V.label<Y[1]){V.label=Y[1],Y=Ie;break}if(Y&&V.label<Y[2]){V.label=Y[2],V.ops.push(Ie);break}Y[2]&&V.ops.pop(),V.trys.pop();continue}Ie=F.call(R,V)}catch(We){Ie=[6,We],X=0}finally{$=Y=0}if(Ie[0]&5)throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}}r(t,"__generator");function i(R,F,V,$){$===void 0&&($=V),R[$]=F[V]}r(i,"__createBinding");function o(R,F){for(var V in R)V!=="default"&&!F.hasOwnProperty(V)&&(F[V]=R[V])}r(o,"__exportStar");function c(R){var F=typeof Symbol=="function"&&Symbol.iterator,V=F&&R[F],$=0;if(V)return V.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&$>=R.length&&(R=void 0),{value:R&&R[$++],done:!R}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}r(c,"__values");function g(R,F){var V=typeof Symbol=="function"&&R[Symbol.iterator];if(!V)return R;var $=V.call(R),X,Y=[],ne;try{for(;(F===void 0||F-- >0)&&!(X=$.next()).done;)Y.push(X.value)}catch(ie){ne={error:ie}}finally{try{X&&!X.done&&(V=$.return)&&V.call($)}finally{if(ne)throw ne.error}}return Y}r(g,"__read");function S(){for(var R=[],F=0;F<arguments.length;F++)R=R.concat(g(arguments[F]));return R}r(S,"__spread");function u(){for(var R=0,F=0,V=arguments.length;F<V;F++)R+=arguments[F].length;for(var $=Array(R),X=0,F=0;F<V;F++)for(var Y=arguments[F],ne=0,ie=Y.length;ne<ie;ne++,X++)$[X]=Y[ne];return $}r(u,"__spreadArrays");function v(R){return this instanceof v?(this.v=R,this):new v(R)}r(v,"__await");function E(R,F,V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=V.apply(R,F||[]),X,Y=[];return X={},ne("next"),ne("throw"),ne("return"),X[Symbol.asyncIterator]=function(){return this},X;function ne(Ae){$[Ae]&&(X[Ae]=function(Fe){return new Promise(function(Xe,Ge){Y.push([Ae,Fe,Xe,Ge])>1||ie(Ae,Fe)})})}function ie(Ae,Fe){try{ge($[Ae](Fe))}catch(Xe){ct(Y[0][3],Xe)}}function ge(Ae){Ae.value instanceof v?Promise.resolve(Ae.value.v).then(Ie,We):ct(Y[0][2],Ae)}function Ie(Ae){ie("next",Ae)}function We(Ae){ie("throw",Ae)}function ct(Ae,Fe){Ae(Fe),Y.shift(),Y.length&&ie(Y[0][0],Y[0][1])}}r(E,"__asyncGenerator");function b(R){var F,V;return F={},$("next"),$("throw",function(X){throw X}),$("return"),F[Symbol.iterator]=function(){return this},F;function $(X,Y){F[X]=R[X]?function(ne){return(V=!V)?{value:v(R[X](ne)),done:X==="return"}:Y?Y(ne):ne}:Y}}r(b,"__asyncDelegator");function _(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=R[Symbol.asyncIterator],V;return F?F.call(R):(R=typeof c=="function"?c(R):R[Symbol.iterator](),V={},$("next"),$("throw"),$("return"),V[Symbol.asyncIterator]=function(){return this},V);function $(Y){V[Y]=R[Y]&&function(ne){return new Promise(function(ie,ge){ne=R[Y](ne),X(ie,ge,ne.done,ne.value)})}}function X(Y,ne,ie,ge){Promise.resolve(ge).then(function(Ie){Y({value:Ie,done:ie})},ne)}}r(_,"__asyncValues");function C(R,F){return Object.defineProperty?Object.defineProperty(R,"raw",{value:F}):R.raw=F,R}r(C,"__makeTemplateObject");function I(R){if(R&&R.__esModule)return R;var F={};if(R!=null)for(var V in R)Object.hasOwnProperty.call(R,V)&&(F[V]=R[V]);return F.default=R,F}r(I,"__importStar");function A(R){return R&&R.__esModule?R:{default:R}}r(A,"__importDefault");function w(R,F){if(!F.has(R))throw new TypeError("attempted to get private field on non-instance");return F.get(R)}r(w,"__classPrivateFieldGet");function O(R,F,V){if(!F.has(R))throw new TypeError("attempted to set private field on non-instance");return F.set(R,V),V}r(O,"__classPrivateFieldSet")},2518355262:function(B,l,d){var f;(function(h,p){"use strict";var m="1.0.40",a="",s="?",n="function",e="undefined",t="object",i="string",o="major",c="model",g="name",S="type",u="vendor",v="version",E="architecture",b="console",_="mobile",C="tablet",I="smarttv",A="wearable",w="embedded",O=500,R="Amazon",F="Apple",V="ASUS",$="BlackBerry",X="Browser",Y="Chrome",ne="Edge",ie="Firefox",ge="Google",Ie="Huawei",We="LG",ct="Microsoft",Ae="Motorola",Fe="Opera",Xe="Samsung",Ge="Sharp",it="Sony",Dt="Xiaomi",wt="Zebra",Pe="Facebook",xe="Chromium OS",et="Mac OS",rt=" Browser",je=r(function(Lt,zt){var It={};for(var z in Lt)zt[z]&&zt[z].length%2===0?It[z]=zt[z].concat(Lt[z]):It[z]=Lt[z];return It},"extend"),Ft=r(function(Lt){for(var zt={},It=0;It<Lt.length;It++)zt[Lt[It].toUpperCase()]=Lt[It];return zt},"enumerize"),Gt=r(function(Lt,zt){return typeof Lt===i?Xt(zt).indexOf(Xt(Lt))!==-1:!1},"has"),Xt=r(function(Lt){return Lt.toLowerCase()},"lowerize"),sn=r(function(Lt){return typeof Lt===i?Lt.replace(/[^\d\.]/g,a).split(".")[0]:p},"majorize"),cn=r(function(Lt,zt){if(typeof Lt===i)return Lt=Lt.replace(/^\s\s*/,a),typeof zt===e?Lt:Lt.substring(0,O)},"trim"),Bt=r(function(Lt,zt){for(var It=0,z,Ve,He,Je,Ye,lt;It<zt.length&&!Ye;){var le=zt[It],Ue=zt[It+1];for(z=Ve=0;z<le.length&&!Ye&&le[z];)if(Ye=le[z++].exec(Lt),Ye)for(He=0;He<Ue.length;He++)lt=Ye[++Ve],Je=Ue[He],typeof Je===t&&Je.length>0?Je.length===2?typeof Je[1]==n?this[Je[0]]=Je[1].call(this,lt):this[Je[0]]=Je[1]:Je.length===3?typeof Je[1]===n&&!(Je[1].exec&&Je[1].test)?this[Je[0]]=lt?Je[1].call(this,lt,Je[2]):p:this[Je[0]]=lt?lt.replace(Je[1],Je[2]):p:Je.length===4&&(this[Je[0]]=lt?Je[3].call(this,lt.replace(Je[1],Je[2])):p):this[Je]=lt||p;It+=2}},"rgxMapper"),gn=r(function(Lt,zt){for(var It in zt)if(typeof zt[It]===t&&zt[It].length>0){for(var z=0;z<zt[It].length;z++)if(Gt(zt[It][z],Lt))return It===s?p:It}else if(Gt(zt[It],Lt))return It===s?p:It;return zt.hasOwnProperty("*")?zt["*"]:Lt},"strMapper"),Ci={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},$n={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Sn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,Fe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[g,Fe+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[g,Fe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[g,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[g,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[g,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+X]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[g,"Smart Lenovo "+X]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+X],v],[/\bfocus\/([\w\.]+)/i],[v,[g,ie+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,Fe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,Fe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI"+rt]],[/fxios\/([\w\.-]+)/i],[v,[g,ie]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[g,"360"]],[/\b(qq)\/([\w\.]+)/i],[[g,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1"+rt],v],[/samsungbrowser\/([\w\.]+)/i],[v,[g,Xe+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[g,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[g],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Pe],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,Y+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,Y+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+X]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,gn,Ci]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[g,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,ie+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[g,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[E,"amd64"]],[/(ia32(?=;))/i],[[E,Xt]],[/((?:i[346]|x)86)[;\)]/i],[[E,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[E,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[E,"armhf"]],[/windows (ce|mobile); ppc;/i],[[E,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[E,/ower/,a,Xt]],[/(sun4\w)[;\)]/i],[[E,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[E,Xt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[u,Xe],[S,C]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[c,[u,Xe],[S,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[u,F],[S,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[u,F],[S,C]],[/(macintosh);/i],[c,[u,F]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[u,Ge],[S,_]],[/(?:honor)([-\w ]+)[;\)]/i],[c,[u,"Honor"],[S,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[u,Ie],[S,C]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[u,Ie],[S,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[c,/_/g," "],[u,Dt],[S,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[u,Dt],[S,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[u,"OPPO"],[S,_]],[/\b(opd2\d{3}a?) bui/i],[c,[u,"OPPO"],[S,C]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[u,"Vivo"],[S,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[u,"Realme"],[S,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[u,Ae],[S,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[u,Ae],[S,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[u,We],[S,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[u,We],[S,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[u,"Lenovo"],[S,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[u,"Nokia"],[S,_]],[/(pixel c)\b/i],[c,[u,ge],[S,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[u,ge],[S,_]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[u,it],[S,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[u,it],[S,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[u,"OnePlus"],[S,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[u,R],[S,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[u,R],[S,_]],[/(playbook);[-\w\),; ]+(rim)/i],[c,u,[S,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[u,$],[S,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[u,V],[S,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[u,V],[S,_]],[/(nexus 9)/i],[c,[u,"HTC"],[S,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[c,/_/g," "],[S,_]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[c,[u,"TCL"],[S,C]],[/(itel) ((\w+))/i],[[u,Xt],c,[S,gn,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[u,"Acer"],[S,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[u,"Meizu"],[S,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[u,"Ulefone"],[S,_]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[c,[u,"Energizer"],[S,_]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[c,[u,"Cat"],[S,_]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[c,[u,"Smartfren"],[S,_]],[/droid.+; (a(?:015|06[35]|142p?))/i],[c,[u,"Nothing"],[S,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,c,[S,_]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,c,[S,C]],[/(surface duo)/i],[c,[u,ct],[S,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[u,"Fairphone"],[S,_]],[/(u304aa)/i],[c,[u,"AT&T"],[S,_]],[/\bsie-(\w*)/i],[c,[u,"Siemens"],[S,_]],[/\b(rct\w+) b/i],[c,[u,"RCA"],[S,C]],[/\b(venue[\d ]{2,7}) b/i],[c,[u,"Dell"],[S,C]],[/\b(q(?:mv|ta)\w+) b/i],[c,[u,"Verizon"],[S,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[u,"Barnes & Noble"],[S,C]],[/\b(tm\d{3}\w+) b/i],[c,[u,"NuVision"],[S,C]],[/\b(k88) b/i],[c,[u,"ZTE"],[S,C]],[/\b(nx\d{3}j) b/i],[c,[u,"ZTE"],[S,_]],[/\b(gen\d{3}) b.+49h/i],[c,[u,"Swiss"],[S,_]],[/\b(zur\d{3}) b/i],[c,[u,"Swiss"],[S,C]],[/\b((zeki)?tb.*\b) b/i],[c,[u,"Zeki"],[S,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],c,[S,C]],[/\b(ns-?\w{0,9}) b/i],[c,[u,"Insignia"],[S,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[u,"NextBook"],[S,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],c,[S,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],c,[S,_]],[/\b(ph-1) /i],[c,[u,"Essential"],[S,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[u,"Envizen"],[S,C]],[/\b(trio[-\w\. ]+) b/i],[c,[u,"MachSpeed"],[S,C]],[/\btu_(1491) b/i],[c,[u,"Rotor"],[S,C]],[/(shield[\w ]+) b/i],[c,[u,"Nvidia"],[S,C]],[/(sprint) (\w+)/i],[u,c,[S,_]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[u,ct],[S,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[u,wt],[S,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[u,wt],[S,_]],[/smart-tv.+(samsung)/i],[u,[S,I]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[u,Xe],[S,I]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,We],[S,I]],[/(apple) ?tv/i],[u,[c,F+" TV"],[S,I]],[/crkey/i],[[c,Y+"cast"],[u,ge],[S,I]],[/droid.+aft(\w+)( bui|\))/i],[c,[u,R],[S,I]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[u,Ge],[S,I]],[/(bravia[\w ]+)( bui|\))/i],[c,[u,it],[S,I]],[/(mitv-\w{5}) bui/i],[c,[u,Dt],[S,I]],[/Hbbtv.*(technisat) (.*);/i],[u,c,[S,I]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,cn],[c,cn],[S,I]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,I]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,c,[S,b]],[/droid.+; (shield) bui/i],[c,[u,"Nvidia"],[S,b]],[/(playstation [345portablevi]+)/i],[c,[u,it],[S,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[u,ct],[S,b]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[c,[u,Xe],[S,A]],[/((pebble))app/i],[u,c,[S,A]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[u,F],[S,A]],[/droid.+; (glass) \d/i],[c,[u,ge],[S,A]],[/droid.+; (wt63?0{2,3})\)/i],[c,[u,wt],[S,A]],[/droid.+; (glass) \d/i],[c,[u,ge],[S,A]],[/(pico) (4|neo3(?: link|pro)?)/i],[u,c,[S,A]],[/; (quest( \d| pro)?)/i],[c,[u,Pe],[S,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[S,w]],[/(aeobc)\b/i],[c,[u,R],[S,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[S,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[S,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,_]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,ne+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[g,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[v,gn,$n]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,gn,$n],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,et],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,$]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,ie+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[g,Y+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,xe],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,v]]},nn=r(function(Lt,zt){if(typeof Lt===t&&(zt=Lt,Lt=p),!(this instanceof nn))return new nn(Lt,zt).getResult();var It=typeof h!==e&&h.navigator?h.navigator:p,z=Lt||(It&&It.userAgent?It.userAgent:a),Ve=It&&It.userAgentData?It.userAgentData:p,He=zt?je(Sn,zt):Sn,Je=It&&It.userAgent==z;return this.getBrowser=function(){var Ye={};return Ye[g]=p,Ye[v]=p,Bt.call(Ye,z,He.browser),Ye[o]=sn(Ye[v]),Je&&It&&It.brave&&typeof It.brave.isBrave==n&&(Ye[g]="Brave"),Ye},this.getCPU=function(){var Ye={};return Ye[E]=p,Bt.call(Ye,z,He.cpu),Ye},this.getDevice=function(){var Ye={};return Ye[u]=p,Ye[c]=p,Ye[S]=p,Bt.call(Ye,z,He.device),Je&&!Ye[S]&&Ve&&Ve.mobile&&(Ye[S]=_),Je&&Ye[c]=="Macintosh"&&It&&typeof It.standalone!==e&&It.maxTouchPoints&&It.maxTouchPoints>2&&(Ye[c]="iPad",Ye[S]=C),Ye},this.getEngine=function(){var Ye={};return Ye[g]=p,Ye[v]=p,Bt.call(Ye,z,He.engine),Ye},this.getOS=function(){var Ye={};return Ye[g]=p,Ye[v]=p,Bt.call(Ye,z,He.os),Je&&!Ye[g]&&Ve&&Ve.platform&&Ve.platform!="Unknown"&&(Ye[g]=Ve.platform.replace(/chrome os/i,xe).replace(/macos/i,et)),Ye},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return z},this.setUA=function(Ye){return z=typeof Ye===i&&Ye.length>O?cn(Ye,O):Ye,this},this.setUA(z),this},"UAParser");nn.VERSION=m,nn.BROWSER=Ft([g,v,o]),nn.CPU=Ft([E]),nn.DEVICE=Ft([c,u,S,b,_,I,C,A,w]),nn.ENGINE=nn.OS=Ft([g,v]),typeof l!==e?(e!=="object"&&B.exports&&(l=B.exports=nn),l.UAParser=nn):n==="function"&&d.amdO?(f=function(){return nn}.call(l,d,l,B),f!==p&&(B.exports=f)):typeof h!==e&&(h.UAParser=nn);var Vt=typeof h!==e&&(h.jQuery||h.Zepto);if(Vt&&!Vt.ua){var Wn=new nn;Vt.ua=Wn.getResult(),Vt.ua.get=function(){return Wn.getUA()},Vt.ua.set=function(Lt){Wn.setUA(Lt);var zt=Wn.getResult();for(var It in zt)Vt.ua[It]=zt[It]}}})(typeof window=="object"?window:this)},7229287800:B=>{B.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.662.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-chime-sdk-messaging","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.662.0","@aws-sdk/client-sts":"3.662.0","@aws-sdk/core":"3.662.0","@aws-sdk/credential-provider-node":"3.662.0","@aws-sdk/middleware-host-header":"3.662.0","@aws-sdk/middleware-logger":"3.662.0","@aws-sdk/middleware-recursion-detection":"3.662.0","@aws-sdk/middleware-user-agent":"3.662.0","@aws-sdk/region-config-resolver":"3.662.0","@aws-sdk/types":"3.662.0","@aws-sdk/util-endpoints":"3.662.0","@aws-sdk/util-user-agent-browser":"3.662.0","@aws-sdk/util-user-agent-node":"3.662.0","@smithy/config-resolver":"^3.0.9","@smithy/core":"^2.4.7","@smithy/fetch-http-handler":"^3.2.9","@smithy/hash-node":"^3.0.7","@smithy/invalid-dependency":"^3.0.7","@smithy/middleware-content-length":"^3.0.9","@smithy/middleware-endpoint":"^3.1.4","@smithy/middleware-retry":"^3.0.22","@smithy/middleware-serde":"^3.0.7","@smithy/middleware-stack":"^3.0.7","@smithy/node-config-provider":"^3.1.8","@smithy/node-http-handler":"^3.2.4","@smithy/protocol-http":"^4.1.4","@smithy/smithy-client":"^3.3.6","@smithy/types":"^3.5.0","@smithy/url-parser":"^3.0.7","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.22","@smithy/util-defaults-mode-node":"^3.0.22","@smithy/util-endpoints":"^2.1.3","@smithy/util-middleware":"^3.0.7","@smithy/util-retry":"^3.0.7","@smithy/util-utf8":"^3.0.0","tslib":"^2.6.2","uuid":"^9.0.1"},"devDependencies":{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96","@types/uuid":"^9.0.4","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typescript":"~4.9.5"},"engines":{"node":">=16.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},1209174152:B=>{B.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},6439564264:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var f=d(4116706745),h=d(7577999880);function p(a,s){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=void 0}r(p,"LodashWrapper"),p.prototype=(0,f.A)(h.A.prototype),p.prototype.constructor=p;const m=p},7577999880:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function f(){}r(f,"baseLodash");const h=f},3119888921:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function f(p,m){return p<m}r(f,"baseLt");const h=f},82774879:(B,l,d)=>{"use strict";d.d(l,{A:()=>s});var f=d(7269456539),h=d(14469648),p=Array.prototype,m=p.splice;function a(n,e){for(var t=n?e.length:0,i=t-1;t--;){var o=e[t];if(t==i||o!==c){var c=o;(0,h.A)(o)?m.call(n,o,1):(0,f.A)(n,o)}}return n}r(a,"basePullAt");const s=a},3046491484:(B,l,d)=>{"use strict";d.d(l,{A:()=>e});var f=d(3940990596),h=d(4059064744),p=d(522166923),m=d(6253409059),a=f.A.isFinite,s=Math.min;function n(t){var i=Math[t];return function(o,c){if(o=(0,p.A)(o),c=c==null?0:s((0,h.A)(c),292),c&&a(o)){var g=((0,m.A)(o)+"e").split("e"),S=i(g[0]+"e"+(+g[1]+c));return g=((0,m.A)(S)+"e").split("e"),+(g[0]+"e"+(+g[1]-c))}return i(o)}}r(n,"createRound");const e=n},9622574471:(B,l,d)=>{"use strict";d.d(l,{A:()=>xr});var f=d(2236568457),h=d(2524318401),p=h.A?function(Zt,Nt){return h.A.set(Zt,Nt),Zt}:f.A;const m=p;var a=d(4116706745),s=d(5797466484);function n(Zt){return function(){var Nt=arguments;switch(Nt.length){case 0:return new Zt;case 1:return new Zt(Nt[0]);case 2:return new Zt(Nt[0],Nt[1]);case 3:return new Zt(Nt[0],Nt[1],Nt[2]);case 4:return new Zt(Nt[0],Nt[1],Nt[2],Nt[3]);case 5:return new Zt(Nt[0],Nt[1],Nt[2],Nt[3],Nt[4]);case 6:return new Zt(Nt[0],Nt[1],Nt[2],Nt[3],Nt[4],Nt[5]);case 7:return new Zt(Nt[0],Nt[1],Nt[2],Nt[3],Nt[4],Nt[5],Nt[6])}var On=(0,a.A)(Zt.prototype),_n=Zt.apply(On,Nt);return(0,s.A)(_n)?_n:On}}r(n,"createCtor");const e=n;var t=d(3940990596),i=1;function o(Zt,Nt,On){var _n=Nt&i,si=e(Zt);function vi(){var Mi=this&&this!==t.A&&this instanceof vi?si:Zt;return Mi.apply(_n?On:this,arguments)}return r(vi,"wrapper"),vi}r(o,"createBind");const c=o;var g=d(4629374672),S=Math.max;function u(Zt,Nt,On,_n){for(var si=-1,vi=Zt.length,Mi=On.length,ui=-1,Ii=Nt.length,wi=S(vi-Mi,0),Ui=Array(Ii+wi),ii=!_n;++ui<Ii;)Ui[ui]=Nt[ui];for(;++si<Mi;)(ii||si<vi)&&(Ui[On[si]]=Zt[si]);for(;wi--;)Ui[ui++]=Zt[si++];return Ui}r(u,"composeArgs");const v=u;var E=Math.max;function b(Zt,Nt,On,_n){for(var si=-1,vi=Zt.length,Mi=-1,ui=On.length,Ii=-1,wi=Nt.length,Ui=E(vi-ui,0),ii=Array(Ui+wi),fr=!_n;++si<Ui;)ii[si]=Zt[si];for(var Li=si;++Ii<wi;)ii[Li+Ii]=Nt[Ii];for(;++Mi<ui;)(fr||si<vi)&&(ii[Li+On[Mi]]=Zt[si++]);return ii}r(b,"composeArgsRight");const _=b;function C(Zt,Nt){for(var On=Zt.length,_n=0;On--;)Zt[On]===Nt&&++_n;return _n}r(C,"countHolders");const I=C;var A=d(934475406),w=d(3968459270),O=(0,w.A)(m);const R=O;var F=/\{\n\/\* \[wrapped with (.+)\] \*/,V=/,? & /;function $(Zt){var Nt=Zt.match(F);return Nt?Nt[1].split(V):[]}r($,"getWrapDetails");const X=$;var Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ne(Zt,Nt){var On=Nt.length;if(!On)return Zt;var _n=On-1;return Nt[_n]=(On>1?"& ":"")+Nt[_n],Nt=Nt.join(On>2?", ":" "),Zt.replace(Y,`{
/* [wrapped with `+Nt+`] */
`)}r(ne,"insertWrapDetails");const ie=ne;var ge=d(5178179588),Ie=d(5614497032),We=d(7402177396),ct=1,Ae=2,Fe=8,Xe=16,Ge=32,it=64,Dt=128,wt=256,Pe=512,xe=[["ary",Dt],["bind",ct],["bindKey",Ae],["curry",Fe],["curryRight",Xe],["flip",Pe],["partial",Ge],["partialRight",it],["rearg",wt]];function et(Zt,Nt){return(0,Ie.A)(xe,function(On){var _n="_."+On[0];Nt&On[1]&&!(0,We.A)(Zt,_n)&&Zt.push(_n)}),Zt.sort()}r(et,"updateWrapDetails");const rt=et;function je(Zt,Nt,On){var _n=Nt+"";return(0,ge.A)(Zt,ie(_n,rt(X(_n),On)))}r(je,"setWrapToString");const Ft=je;var Gt=1,Xt=2,sn=4,cn=8,Bt=32,gn=64;function Ci(Zt,Nt,On,_n,si,vi,Mi,ui,Ii,wi){var Ui=Nt&cn,ii=Ui?Mi:void 0,fr=Ui?void 0:Mi,Li=Ui?vi:void 0,Ar=Ui?void 0:vi;Nt|=Ui?Bt:gn,Nt&=~(Ui?gn:Bt),Nt&sn||(Nt&=~(Gt|Xt));var Zn=[Zt,Nt,si,Li,ii,Ar,fr,ui,Ii,wi],N=On.apply(void 0,Zn);return(0,A.A)(Zt)&&R(N,Zn),N.placeholder=_n,Ft(N,Zt,Nt)}r(Ci,"createRecurry");const $n=Ci;var Sn=d(8708460378),nn=d(4885105346),Vt=d(14469648),Wn=Math.min;function Lt(Zt,Nt){for(var On=Zt.length,_n=Wn(Nt.length,On),si=(0,nn.A)(Zt);_n--;){var vi=Nt[_n];Zt[_n]=(0,Vt.A)(vi,On)?si[vi]:void 0}return Zt}r(Lt,"reorder");const zt=Lt;var It=d(8625772175),z=1,Ve=2,He=8,Je=16,Ye=128,lt=512;function le(Zt,Nt,On,_n,si,vi,Mi,ui,Ii,wi){var Ui=Nt&Ye,ii=Nt&z,fr=Nt&Ve,Li=Nt&(He|Je),Ar=Nt&lt,Zn=fr?void 0:e(Zt);function N(){for(var oe=arguments.length,Re=Array(oe),nt=oe;nt--;)Re[nt]=arguments[nt];if(Li)var Pt=(0,Sn.A)(N),En=I(Re,Pt);if(_n&&(Re=v(Re,_n,si,Li)),vi&&(Re=_(Re,vi,Mi,Li)),oe-=En,Li&&oe<wi){var wn=(0,It.A)(Re,Pt);return $n(Zt,Nt,le,N.placeholder,On,Re,wn,ui,Ii,wi-oe)}var vn=ii?On:this,yn=fr?vn[Zt]:Zt;return oe=Re.length,ui?Re=zt(Re,ui):Ar&&oe>1&&Re.reverse(),Ui&&Ii<oe&&(Re.length=Ii),this&&this!==t.A&&this instanceof N&&(yn=Zn||e(yn)),yn.apply(vn,Re)}return r(N,"wrapper"),N}r(le,"createHybrid");const Ue=le;function G(Zt,Nt,On){var _n=e(Zt);function si(){for(var vi=arguments.length,Mi=Array(vi),ui=vi,Ii=(0,Sn.A)(si);ui--;)Mi[ui]=arguments[ui];var wi=vi<3&&Mi[0]!==Ii&&Mi[vi-1]!==Ii?[]:(0,It.A)(Mi,Ii);if(vi-=wi.length,vi<On)return $n(Zt,Nt,Ue,si.placeholder,void 0,Mi,wi,void 0,void 0,On-vi);var Ui=this&&this!==t.A&&this instanceof si?_n:Zt;return(0,g.A)(Ui,this,Mi)}return r(si,"wrapper"),si}r(G,"createCurry");const Q=G;var ye=1;function Ee(Zt,Nt,On,_n){var si=Nt&ye,vi=e(Zt);function Mi(){for(var ui=-1,Ii=arguments.length,wi=-1,Ui=_n.length,ii=Array(Ui+Ii),fr=this&&this!==t.A&&this instanceof Mi?vi:Zt;++wi<Ui;)ii[wi]=_n[wi];for(;Ii--;)ii[wi++]=arguments[++ui];return(0,g.A)(fr,si?On:this,ii)}return r(Mi,"wrapper"),Mi}r(Ee,"createPartial");const pt=Ee;var ze=d(1114224892),st="__lodash_placeholder__",me=1,Me=2,k=4,Se=8,be=128,we=256,ee=Math.min;function en(Zt,Nt){var On=Zt[1],_n=Nt[1],si=On|_n,vi=si<(me|Me|be),Mi=_n==be&&On==Se||_n==be&&On==we&&Zt[7].length<=Nt[8]||_n==(be|we)&&Nt[7].length<=Nt[8]&&On==Se;if(!(vi||Mi))return Zt;_n&me&&(Zt[2]=Nt[2],si|=On&me?0:k);var ui=Nt[3];if(ui){var Ii=Zt[3];Zt[3]=Ii?v(Ii,ui,Nt[4]):ui,Zt[4]=Ii?(0,It.A)(Zt[3],st):Nt[4]}return ui=Nt[5],ui&&(Ii=Zt[5],Zt[5]=Ii?_(Ii,ui,Nt[6]):ui,Zt[6]=Ii?(0,It.A)(Zt[5],st):Nt[6]),ui=Nt[7],ui&&(Zt[7]=ui),_n&be&&(Zt[8]=Zt[8]==null?Nt[8]:ee(Zt[8],Nt[8])),Zt[9]==null&&(Zt[9]=Nt[9]),Zt[0]=Nt[0],Zt[1]=si,Zt}r(en,"mergeData");const dt=en;var Ct=d(4059064744),xn="Expected a function",Qt=1,Xi=2,Pi=8,Kn=16,ni=32,Mn=64,qn=Math.max;function bi(Zt,Nt,On,_n,si,vi,Mi,ui){var Ii=Nt&Xi;if(!Ii&&typeof Zt!="function")throw new TypeError(xn);var wi=_n?_n.length:0;if(wi||(Nt&=~(ni|Mn),_n=si=void 0),Mi=Mi===void 0?Mi:qn((0,Ct.A)(Mi),0),ui=ui===void 0?ui:(0,Ct.A)(ui),wi-=si?si.length:0,Nt&Mn){var Ui=_n,ii=si;_n=si=void 0}var fr=Ii?void 0:(0,ze.A)(Zt),Li=[Zt,Nt,On,_n,si,Ui,ii,vi,Mi,ui];if(fr&&dt(Li,fr),Zt=Li[0],Nt=Li[1],On=Li[2],_n=Li[3],si=Li[4],ui=Li[9]=Li[9]===void 0?Ii?0:Zt.length:qn(Li[9]-wi,0),!ui&&Nt&(Pi|Kn)&&(Nt&=~(Pi|Kn)),!Nt||Nt==Qt)var Ar=c(Zt,Nt,On);else Nt==Pi||Nt==Kn?Ar=Q(Zt,Nt,ui):(Nt==ni||Nt==(Qt|ni))&&!si.length?Ar=pt(Zt,Nt,On,_n):Ar=Ue.apply(void 0,Li);var Zn=fr?m:R;return Ft(Zn(Ar,Li),Zt,Nt)}r(bi,"createWrap");const xr=bi},1114224892:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var f=d(2524318401),h=d(7715417323),p=f.A?function(a){return f.A.get(a)}:h.A;const m=p},7667421386:(B,l,d)=>{"use strict";d.d(l,{A:()=>s});var f={};const h=f;var p=Object.prototype,m=p.hasOwnProperty;function a(n){for(var e=n.name+"",t=h[e],i=m.call(h,e)?t.length:0;i--;){var o=t[i],c=o.func;if(c==null||c==n)return o.name}return e}r(a,"getFuncName");const s=a},8708460378:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function f(p){var m=p;return m.placeholder}r(f,"getHolder");const h=f},934475406:(B,l,d)=>{"use strict";d.d(l,{A:()=>_});var f=d(4116706745),h=d(7577999880),p=4294967295;function m(C){this.__wrapped__=C,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}r(m,"LazyWrapper"),m.prototype=(0,f.A)(h.A.prototype),m.prototype.constructor=m;const a=m;var s=d(1114224892),n=d(7667421386),e=d(6439564264),t=d(9746734072),i=d(1276945623),o=d(4885105346);function c(C){if(C instanceof a)return C.clone();var I=new e.A(C.__wrapped__,C.__chain__);return I.__actions__=(0,o.A)(C.__actions__),I.__index__=C.__index__,I.__values__=C.__values__,I}r(c,"wrapperClone");const g=c;var S=Object.prototype,u=S.hasOwnProperty;function v(C){if((0,i.A)(C)&&!(0,t.A)(C)&&!(C instanceof a)){if(C instanceof e.A)return C;if(u.call(C,"__wrapped__"))return g(C)}return new e.A(C)}r(v,"lodash"),v.prototype=h.A.prototype,v.prototype.constructor=v;const E=v;function b(C){var I=(0,n.A)(C),A=E[I];if(typeof A!="function"||!(I in a.prototype))return!1;if(C===A)return!0;var w=(0,s.A)(A);return!!w&&C===w[0]}r(b,"isLaziable");const _=b},2524318401:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var f=d(8672092338),h=f.A&&new f.A;const p=h},8625772175:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var f="__lodash_placeholder__";function h(m,a){for(var s=-1,n=m.length,e=0,t=[];++s<n;){var i=m[s];(i===a||i===f)&&(m[s]=f,t[e++]=s)}return t}r(h,"replaceHolders");const p=h},489015593:(B,l,d)=>{"use strict";d.d(l,{A:()=>S});var f=d(5614497032),h=d(8033247945),p=d(9046884403),m=d(9622574471),a=d(8708460378),s=d(8625772175),n=1,e=32,t=(0,p.A)(function(u,v,E){var b=n;if(E.length){var _=(0,s.A)(E,(0,a.A)(t));b|=e}return(0,m.A)(u,b,v,E,_)});t.placeholder={};const i=t;var o=d(316474953),c=d(3055495996),g=(0,o.A)(function(u,v){return(0,f.A)(v,function(E){E=(0,c.A)(E),(0,h.A)(u,E,i(u[E],u))}),u});const S=g},8424846741:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var f=d(9746734072);function h(){if(!arguments.length)return[];var m=arguments[0];return(0,f.A)(m)?m:[m]}r(h,"castArray");const p=h},3605769895:(B,l,d)=>{"use strict";d.d(l,{A:()=>s});var f=d(8033247945),h=d(1322352537),p=Object.prototype,m=p.hasOwnProperty,a=(0,h.A)(function(n,e,t){m.call(n,t)?++n[t]:(0,f.A)(n,t,1)});const s=a},1566461842:(B,l,d)=>{"use strict";d.d(l,{A:()=>t});var f=d(4629374672),h=d(9046884403),p=d(6295853301),m=d(5797466484);function a(i,o,c,g,S,u){return(0,m.A)(i)&&(0,m.A)(o)&&(u.set(o,i),(0,p.A)(i,o,void 0,a,u),u.delete(o)),i}r(a,"customDefaultsMerge");const s=a;var n=d(1687672245),e=(0,h.A)(function(i){return i.push(void 0,s),(0,f.A)(n.A,void 0,i)});const t=e},4360875129:(B,l,d)=>{"use strict";d.d(l,{A:()=>e});var f=d(6966908974),h=d(5684627082),p=d(804366847),m=d(9046884403),a=d(4635518404),s=d(8786006583),n=(0,m.A)(function(t,i){var o=(0,s.A)(i);return(0,a.A)(o)&&(o=void 0),(0,a.A)(t)?(0,f.A)(t,(0,h.A)(i,1,a.A,!0),(0,p.A)(o,2)):[]});const e=n},1041273904:(B,l,d)=>{"use strict";d.d(l,{A:()=>h});function f(p){for(var m=-1,a=p==null?0:p.length,s={};++m<a;){var n=p[m];s[n[0]]=n[1]}return s}r(f,"fromPairs");const h=f},1687672245:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var f=d(6295853301),h=d(9001690186),p=(0,h.A)(function(a,s,n,e){(0,f.A)(a,s,n,e)});const m=p},5729325965:(B,l,d)=>{"use strict";d.d(l,{A:()=>a});var f=d(3743429634),h=d(3119888921),p=d(2236568457);function m(s){return s&&s.length?(0,f.A)(s,p.A,h.A):void 0}r(m,"min");const a=m},4249070636:(B,l,d)=>{"use strict";d.d(l,{A:()=>a});var f=d(3743429634),h=d(804366847),p=d(3119888921);function m(s,n){return s&&s.length?(0,f.A)(s,(0,h.A)(n,2),p.A):void 0}r(m,"minBy");const a=m},3367239067:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var f=d(804366847),h=d(82774879);function p(a,s){var n=[];if(!(a&&a.length))return n;var e=-1,t=[],i=a.length;for(s=(0,f.A)(s,3);++e<i;){var o=a[e];s(o,e,a)&&(n.push(o),t.push(e))}return(0,h.A)(a,t),n}r(p,"remove");const m=p},1699044291:(B,l,d)=>{"use strict";d.d(l,{A:()=>m});var f=Array.prototype,h=f.reverse;function p(a){return a==null?a:h.call(a)}r(p,"reverse");const m=p},5154341017:(B,l,d)=>{"use strict";d.d(l,{A:()=>p});var f=d(3046491484),h=(0,f.A)("round");const p=h},9867500491:(B,l,d)=>{"use strict";d.d(l,{A:()=>e});var f=d(7694407897),h=d(7049857535),p=d(4059064744),m=9007199254740991,a=4294967295,s=Math.min;function n(t,i){if(t=(0,p.A)(t),t<1||t>m)return[];var o=a,c=s(t,a);i=(0,h.A)(i),t-=a;for(var g=(0,f.A)(c,i);++o<t;)i(o);return g}r(n,"times");const e=n}}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/gantry-v2-vendors-client.eb1ded2421cd5f7c96d7.min.js.map